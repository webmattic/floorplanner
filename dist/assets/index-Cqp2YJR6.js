function Dz(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const s=Object.getOwnPropertyDescriptor(i,a);s&&Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();var oN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Oz(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var a=!1;try{a=this instanceof i}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var a=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:function(){return n[i]}})}),t}var HE={exports:{}},hy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN;function jz(){if(lN)return hy;lN=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,s){var r=null;if(s!==void 0&&(r=""+s),a.key!==void 0&&(r=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:n,type:i,key:r,ref:a!==void 0?a:null,props:s}}return hy.Fragment=e,hy.jsx=t,hy.jsxs=t,hy}var cN;function Pz(){return cN||(cN=1,HE.exports=jz()),HE.exports}var c=Pz(),GE={exports:{}},mi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uN;function Uz(){if(uN)return mi;uN=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),r=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function b(Y){return Y===null||typeof Y!="object"?null:(Y=x&&Y[x]||Y["@@iterator"],typeof Y=="function"?Y:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function M(Y,ne,ue){this.props=Y,this.context=ne,this.refs=w,this.updater=ue||_}M.prototype.isReactComponent={},M.prototype.setState=function(Y,ne){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ne,"setState")},M.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function E(){}E.prototype=M.prototype;function T(Y,ne,ue){this.props=Y,this.context=ne,this.refs=w,this.updater=ue||_}var C=T.prototype=new E;C.constructor=T,S(C,M.prototype),C.isPureReactComponent=!0;var D=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function F(Y,ne,ue,de,ie,Me){return ue=Me.ref,{$$typeof:n,type:Y,key:ne,ref:ue!==void 0?ue:null,props:Me}}function j(Y,ne){return F(Y.type,ne,void 0,void 0,void 0,Y.props)}function O(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===n}function I(Y){var ne={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(ue){return ne[ue]})}var W=/\/+/g;function Q(Y,ne){return typeof Y=="object"&&Y!==null&&Y.key!=null?I(""+Y.key):ne.toString(36)}function J(){}function te(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(J,J):(Y.status="pending",Y.then(function(ne){Y.status==="pending"&&(Y.status="fulfilled",Y.value=ne)},function(ne){Y.status==="pending"&&(Y.status="rejected",Y.reason=ne)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function oe(Y,ne,ue,de,ie){var Me=typeof Y;(Me==="undefined"||Me==="boolean")&&(Y=null);var ye=!1;if(Y===null)ye=!0;else switch(Me){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(Y.$$typeof){case n:case e:ye=!0;break;case g:return ye=Y._init,oe(ye(Y._payload),ne,ue,de,ie)}}if(ye)return ie=ie(Y),ye=de===""?"."+Q(Y,0):de,D(ie)?(ue="",ye!=null&&(ue=ye.replace(W,"$&/")+"/"),oe(ie,ne,ue,"",function(Ke){return Ke})):ie!=null&&(O(ie)&&(ie=j(ie,ue+(ie.key==null||Y&&Y.key===ie.key?"":(""+ie.key).replace(W,"$&/")+"/")+ye)),ne.push(ie)),1;ye=0;var ae=de===""?".":de+":";if(D(Y))for(var _e=0;_e<Y.length;_e++)de=Y[_e],Me=ae+Q(de,_e),ye+=oe(de,ne,ue,Me,ie);else if(_e=b(Y),typeof _e=="function")for(Y=_e.call(Y),_e=0;!(de=Y.next()).done;)de=de.value,Me=ae+Q(de,_e++),ye+=oe(de,ne,ue,Me,ie);else if(Me==="object"){if(typeof Y.then=="function")return oe(te(Y),ne,ue,de,ie);throw ne=String(Y),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ye}function $(Y,ne,ue){if(Y==null)return Y;var de=[],ie=0;return oe(Y,de,"","",function(Me){return ne.call(ue,Me,ie++)}),de}function X(Y){if(Y._status===-1){var ne=Y._result;ne=ne(),ne.then(function(ue){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=ue)},function(ue){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=ue)}),Y._status===-1&&(Y._status=0,Y._result=ne)}if(Y._status===1)return Y._result.default;throw Y._result}var G=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function ee(){}return mi.Children={map:$,forEach:function(Y,ne,ue){$(Y,function(){ne.apply(this,arguments)},ue)},count:function(Y){var ne=0;return $(Y,function(){ne++}),ne},toArray:function(Y){return $(Y,function(ne){return ne})||[]},only:function(Y){if(!O(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},mi.Component=M,mi.Fragment=t,mi.Profiler=a,mi.PureComponent=T,mi.StrictMode=i,mi.Suspense=d,mi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,mi.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return P.H.useMemoCache(Y)}},mi.cache=function(Y){return function(){return Y.apply(null,arguments)}},mi.cloneElement=function(Y,ne,ue){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var de=S({},Y.props),ie=Y.key,Me=void 0;if(ne!=null)for(ye in ne.ref!==void 0&&(Me=void 0),ne.key!==void 0&&(ie=""+ne.key),ne)!B.call(ne,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ne.ref===void 0||(de[ye]=ne[ye]);var ye=arguments.length-2;if(ye===1)de.children=ue;else if(1<ye){for(var ae=Array(ye),_e=0;_e<ye;_e++)ae[_e]=arguments[_e+2];de.children=ae}return F(Y.type,ie,void 0,void 0,Me,de)},mi.createContext=function(Y){return Y={$$typeof:r,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:s,_context:Y},Y},mi.createElement=function(Y,ne,ue){var de,ie={},Me=null;if(ne!=null)for(de in ne.key!==void 0&&(Me=""+ne.key),ne)B.call(ne,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ie[de]=ne[de]);var ye=arguments.length-2;if(ye===1)ie.children=ue;else if(1<ye){for(var ae=Array(ye),_e=0;_e<ye;_e++)ae[_e]=arguments[_e+2];ie.children=ae}if(Y&&Y.defaultProps)for(de in ye=Y.defaultProps,ye)ie[de]===void 0&&(ie[de]=ye[de]);return F(Y,Me,void 0,void 0,null,ie)},mi.createRef=function(){return{current:null}},mi.forwardRef=function(Y){return{$$typeof:l,render:Y}},mi.isValidElement=O,mi.lazy=function(Y){return{$$typeof:g,_payload:{_status:-1,_result:Y},_init:X}},mi.memo=function(Y,ne){return{$$typeof:f,type:Y,compare:ne===void 0?null:ne}},mi.startTransition=function(Y){var ne=P.T,ue={};P.T=ue;try{var de=Y(),ie=P.S;ie!==null&&ie(ue,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ee,G)}catch(Me){G(Me)}finally{P.T=ne}},mi.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},mi.use=function(Y){return P.H.use(Y)},mi.useActionState=function(Y,ne,ue){return P.H.useActionState(Y,ne,ue)},mi.useCallback=function(Y,ne){return P.H.useCallback(Y,ne)},mi.useContext=function(Y){return P.H.useContext(Y)},mi.useDebugValue=function(){},mi.useDeferredValue=function(Y,ne){return P.H.useDeferredValue(Y,ne)},mi.useEffect=function(Y,ne,ue){var de=P.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return de.useEffect(Y,ne)},mi.useId=function(){return P.H.useId()},mi.useImperativeHandle=function(Y,ne,ue){return P.H.useImperativeHandle(Y,ne,ue)},mi.useInsertionEffect=function(Y,ne){return P.H.useInsertionEffect(Y,ne)},mi.useLayoutEffect=function(Y,ne){return P.H.useLayoutEffect(Y,ne)},mi.useMemo=function(Y,ne){return P.H.useMemo(Y,ne)},mi.useOptimistic=function(Y,ne){return P.H.useOptimistic(Y,ne)},mi.useReducer=function(Y,ne,ue){return P.H.useReducer(Y,ne,ue)},mi.useRef=function(Y){return P.H.useRef(Y)},mi.useState=function(Y){return P.H.useState(Y)},mi.useSyncExternalStore=function(Y,ne,ue){return P.H.useSyncExternalStore(Y,ne,ue)},mi.useTransition=function(){return P.H.useTransition()},mi.version="19.1.1",mi}var dN;function Lf(){return dN||(dN=1,GE.exports=Uz()),GE.exports}var k=Lf();const di=Uf(k),X6=Dz({__proto__:null,default:di},[k]);var VE={exports:{}},fy={},qE={exports:{}},XE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hN;function Lz(){return hN||(hN=1,function(n){function e($,X){var G=$.length;$.push(X);e:for(;0<G;){var ee=G-1>>>1,Y=$[ee];if(0<a(Y,X))$[ee]=X,$[G]=Y,G=ee;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var X=$[0],G=$.pop();if(G!==X){$[0]=G;e:for(var ee=0,Y=$.length,ne=Y>>>1;ee<ne;){var ue=2*(ee+1)-1,de=$[ue],ie=ue+1,Me=$[ie];if(0>a(de,G))ie<Y&&0>a(Me,de)?($[ee]=Me,$[ie]=G,ee=ie):($[ee]=de,$[ue]=G,ee=ue);else if(ie<Y&&0>a(Me,G))$[ee]=Me,$[ie]=G,ee=ie;else break e}}return X}function a($,X){var G=$.sortIndex-X.sortIndex;return G!==0?G:$.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var r=Date,l=r.now();n.unstable_now=function(){return r.now()-l}}var d=[],f=[],g=1,x=null,b=3,_=!1,S=!1,w=!1,M=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D($){for(var X=t(f);X!==null;){if(X.callback===null)i(f);else if(X.startTime<=$)i(f),X.sortIndex=X.expirationTime,e(d,X);else break;X=t(f)}}function P($){if(w=!1,D($),!S)if(t(d)!==null)S=!0,B||(B=!0,Q());else{var X=t(f);X!==null&&oe(P,X.startTime-$)}}var B=!1,F=-1,j=5,O=-1;function I(){return M?!0:!(n.unstable_now()-O<j)}function W(){if(M=!1,B){var $=n.unstable_now();O=$;var X=!0;try{e:{S=!1,w&&(w=!1,T(F),F=-1),_=!0;var G=b;try{t:{for(D($),x=t(d);x!==null&&!(x.expirationTime>$&&I());){var ee=x.callback;if(typeof ee=="function"){x.callback=null,b=x.priorityLevel;var Y=ee(x.expirationTime<=$);if($=n.unstable_now(),typeof Y=="function"){x.callback=Y,D($),X=!0;break t}x===t(d)&&i(d),D($)}else i(d);x=t(d)}if(x!==null)X=!0;else{var ne=t(f);ne!==null&&oe(P,ne.startTime-$),X=!1}}break e}finally{x=null,b=G,_=!1}X=void 0}}finally{X?Q():B=!1}}}var Q;if(typeof C=="function")Q=function(){C(W)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,te=J.port2;J.port1.onmessage=W,Q=function(){te.postMessage(null)}}else Q=function(){E(W,0)};function oe($,X){F=E(function(){$(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function($){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var G=b;b=X;try{return $()}finally{b=G}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var G=b;b=$;try{return X()}finally{b=G}},n.unstable_scheduleCallback=function($,X,G){var ee=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,$){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=G+Y,$={id:g++,callback:X,priorityLevel:$,startTime:G,expirationTime:Y,sortIndex:-1},G>ee?($.sortIndex=G,e(f,$),t(d)===null&&$===t(f)&&(w?(T(F),F=-1):w=!0,oe(P,G-ee))):($.sortIndex=Y,e(d,$),S||_||(S=!0,B||(B=!0,Q()))),$},n.unstable_shouldYield=I,n.unstable_wrapCallback=function($){var X=b;return function(){var G=b;b=X;try{return $.apply(this,arguments)}finally{b=G}}}}(XE)),XE}var fN;function u3(){return fN||(fN=1,qE.exports=Lz()),qE.exports}var YE={exports:{}},ko={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN;function zz(){if(pN)return ko;pN=1;var n=Lf();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(d,f,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:d,containerInfo:f,implementation:g}}var r=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ko.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ko.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return s(d,f,null,g)},ko.flushSync=function(d){var f=r.T,g=i.p;try{if(r.T=null,i.p=2,d)return d()}finally{r.T=f,i.p=g,i.d.f()}},ko.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},ko.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ko.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,x=l(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:_}):g==="script"&&i.d.X(d,{crossOrigin:x,integrity:b,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ko.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=l(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},ko.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,x=l(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ko.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=l(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},ko.requestFormReset=function(d){i.d.r(d)},ko.unstable_batchedUpdates=function(d,f){return d(f)},ko.useFormState=function(d,f,g){return r.H.useFormState(d,f,g)},ko.useFormStatus=function(){return r.H.useHostTransitionStatus()},ko.version="19.1.1",ko}var mN;function qS(){if(mN)return YE.exports;mN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),YE.exports=zz(),YE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gN;function Iz(){if(gN)return fy;gN=1;var n=u3(),e=Lf(),t=qS();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)u+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var u=o,y=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(y=u.return),o=u.return;while(o)}return u.tag===3?y:null}function r(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(s(o)!==o)throw Error(i(188))}function d(o){var u=o.alternate;if(!u){if(u=s(o),u===null)throw Error(i(188));return u!==o?null:o}for(var y=o,A=u;;){var L=y.return;if(L===null)break;var H=L.alternate;if(H===null){if(A=L.return,A!==null){y=A;continue}break}if(L.child===H.child){for(H=L.child;H;){if(H===y)return l(L),o;if(H===A)return l(L),u;H=H.sibling}throw Error(i(188))}if(y.return!==A.return)y=L,A=H;else{for(var re=!1,me=L.child;me;){if(me===y){re=!0,y=L,A=H;break}if(me===A){re=!0,A=L,y=H;break}me=me.sibling}if(!re){for(me=H.child;me;){if(me===y){re=!0,y=H,A=L;break}if(me===A){re=!0,A=H,y=L;break}me=me.sibling}if(!re)throw Error(i(189))}}if(y.alternate!==A)throw Error(i(190))}if(y.tag!==3)throw Error(i(188));return y.stateNode.current===y?o:u}function f(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=f(o),u!==null)return u;o=o.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function Q(o){return o===null||typeof o!="object"?null:(o=W&&o[W]||o["@@iterator"],typeof o=="function"?o:null)}var J=Symbol.for("react.client.reference");function te(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===J?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case M:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case B:return"SuspenseList";case O:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case C:return(o.displayName||"Context")+".Provider";case T:return(o._context.displayName||"Context")+".Consumer";case D:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case F:return u=o.displayName||null,u!==null?u:te(o.type)||"Memo";case j:u=o._payload,o=o._init;try{return te(o(u))}catch{}}return null}var oe=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},ee=[],Y=-1;function ne(o){return{current:o}}function ue(o){0>Y||(o.current=ee[Y],ee[Y]=null,Y--)}function de(o,u){Y++,ee[Y]=o.current,o.current=u}var ie=ne(null),Me=ne(null),ye=ne(null),ae=ne(null);function _e(o,u){switch(de(ye,u),de(Me,o),de(ie,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?UA(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=UA(u),o=LA(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ue(ie),de(ie,o)}function Ke(){ue(ie),ue(Me),ue(ye)}function Ge(o){o.memoizedState!==null&&de(ae,o);var u=ie.current,y=LA(u,o.type);u!==y&&(de(Me,o),de(ie,y))}function st(o){Me.current===o&&(ue(ie),ue(Me)),ae.current===o&&(ue(ae),oy._currentValue=G)}var ft=Object.prototype.hasOwnProperty,Pe=n.unstable_scheduleCallback,he=n.unstable_cancelCallback,ke=n.unstable_shouldYield,Ee=n.unstable_requestPaint,Le=n.unstable_now,Ie=n.unstable_getCurrentPriorityLevel,Et=n.unstable_ImmediatePriority,ct=n.unstable_UserBlockingPriority,At=n.unstable_NormalPriority,Pt=n.unstable_LowPriority,Se=n.unstable_IdlePriority,se=n.log,He=n.unstable_setDisableYieldValue,Ve=null,Te=null;function ze(o){if(typeof se=="function"&&He(o),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(Ve,o)}catch{}}var Nt=Math.clz32?Math.clz32:Xt,Dt=Math.log,Ft=Math.LN2;function Xt(o){return o>>>=0,o===0?32:31-(Dt(o)/Ft|0)|0}var gt=256,Ot=4194304;function Wt(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ae(o,u,y){var A=o.pendingLanes;if(A===0)return 0;var L=0,H=o.suspendedLanes,re=o.pingedLanes;o=o.warmLanes;var me=A&134217727;return me!==0?(A=me&~H,A!==0?L=Wt(A):(re&=me,re!==0?L=Wt(re):y||(y=me&~o,y!==0&&(L=Wt(y))))):(me=A&~H,me!==0?L=Wt(me):re!==0?L=Wt(re):y||(y=A&~o,y!==0&&(L=Wt(y)))),L===0?0:u!==0&&u!==L&&(u&H)===0&&(H=L&-L,y=u&-u,H>=y||H===32&&(y&4194048)!==0)?u:L}function Xe(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function Mt(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ne(){var o=gt;return gt<<=1,(gt&4194048)===0&&(gt=256),o}function Qe(){var o=Ot;return Ot<<=1,(Ot&62914560)===0&&(Ot=4194304),o}function bt(o){for(var u=[],y=0;31>y;y++)u.push(o);return u}function kt(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function jt(o,u,y,A,L,H){var re=o.pendingLanes;o.pendingLanes=y,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=y,o.entangledLanes&=y,o.errorRecoveryDisabledLanes&=y,o.shellSuspendCounter=0;var me=o.entanglements,Oe=o.expirationTimes,nt=o.hiddenUpdates;for(y=re&~y;0<y;){var St=31-Nt(y),Ct=1<<St;me[St]=0,Oe[St]=-1;var rt=nt[St];if(rt!==null)for(nt[St]=null,St=0;St<rt.length;St++){var ot=rt[St];ot!==null&&(ot.lane&=-536870913)}y&=~Ct}A!==0&&xt(o,A,0),H!==0&&L===0&&o.tag!==0&&(o.suspendedLanes|=H&~(re&~u))}function xt(o,u,y){o.pendingLanes|=u,o.suspendedLanes&=~u;var A=31-Nt(u);o.entangledLanes|=u,o.entanglements[A]=o.entanglements[A]|1073741824|y&4194090}function Vt(o,u){var y=o.entangledLanes|=u;for(o=o.entanglements;y;){var A=31-Nt(y),L=1<<A;L&u|o[A]&u&&(o[A]|=u),y&=~L}}function $t(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Xn(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Dn(){var o=X.p;return o!==0?o:(o=window.event,o===void 0?32:tN(o.type))}function ga(o,u){var y=X.p;try{return X.p=o,u()}finally{X.p=y}}var ta=Math.random().toString(36).slice(2),la="__reactFiber$"+ta,Va="__reactProps$"+ta,Na="__reactContainer$"+ta,_s="__reactEvents$"+ta,to="__reactListeners$"+ta,Ra="__reactHandles$"+ta,un="__reactResources$"+ta,Ss="__reactMarker$"+ta;function Pi(o){delete o[la],delete o[Va],delete o[_s],delete o[to],delete o[Ra]}function le(o){var u=o[la];if(u)return u;for(var y=o.parentNode;y;){if(u=y[Na]||y[la]){if(y=u.alternate,u.child!==null||y!==null&&y.child!==null)for(o=FA(o);o!==null;){if(y=o[la])return y;o=FA(o)}return u}o=y,y=o.parentNode}return null}function ve(o){if(o=o[la]||o[Na]){var u=o.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return o}return null}function Ue(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function tt(o){var u=o[un];return u||(u=o[un]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function at(o){o[Ss]=!0}var ut=new Set,Lt={};function mt(o,u){ce(o,u),ce(o+"Capture",u)}function ce(o,u){for(Lt[o]=u,o=0;o<u.length;o++)ut.add(u[o])}var we=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Re={},De={};function Be(o){return ft.call(De,o)?!0:ft.call(Re,o)?!1:we.test(o)?De[o]=!0:(Re[o]=!0,!1)}function Je(o,u,y){if(Be(u))if(y===null)o.removeAttribute(u);else{switch(typeof y){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var A=u.toLowerCase().slice(0,5);if(A!=="data-"&&A!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+y)}}function dt(o,u,y){if(y===null)o.removeAttribute(u);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+y)}}function _t(o,u,y,A){if(A===null)o.removeAttribute(y);else{switch(typeof A){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(y);return}o.setAttributeNS(u,y,""+A)}}var vt,Ut;function Ht(o){if(vt===void 0)try{throw Error()}catch(y){var u=y.stack.trim().match(/\n( *(at )?)/);vt=u&&u[1]||"",Ut=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vt+o+Ut}var Gt=!1;function an(o,u){if(!o||Gt)return"";Gt=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(u){var Ct=function(){throw Error()};if(Object.defineProperty(Ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ct,[])}catch(ot){var rt=ot}Reflect.construct(o,[],Ct)}else{try{Ct.call()}catch(ot){rt=ot}o.call(Ct.prototype)}}else{try{throw Error()}catch(ot){rt=ot}(Ct=o())&&typeof Ct.catch=="function"&&Ct.catch(function(){})}}catch(ot){if(ot&&rt&&typeof ot.stack=="string")return[ot.stack,rt.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=A.DetermineComponentFrameRoot(),re=H[0],me=H[1];if(re&&me){var Oe=re.split(`
`),nt=me.split(`
`);for(L=A=0;A<Oe.length&&!Oe[A].includes("DetermineComponentFrameRoot");)A++;for(;L<nt.length&&!nt[L].includes("DetermineComponentFrameRoot");)L++;if(A===Oe.length||L===nt.length)for(A=Oe.length-1,L=nt.length-1;1<=A&&0<=L&&Oe[A]!==nt[L];)L--;for(;1<=A&&0<=L;A--,L--)if(Oe[A]!==nt[L]){if(A!==1||L!==1)do if(A--,L--,0>L||Oe[A]!==nt[L]){var St=`
`+Oe[A].replace(" at new "," at ");return o.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",o.displayName)),St}while(1<=A&&0<=L);break}}}finally{Gt=!1,Error.prepareStackTrace=y}return(y=o?o.displayName||o.name:"")?Ht(y):""}function sn(o){switch(o.tag){case 26:case 27:case 5:return Ht(o.type);case 16:return Ht("Lazy");case 13:return Ht("Suspense");case 19:return Ht("SuspenseList");case 0:case 15:return an(o.type,!1);case 11:return an(o.type.render,!1);case 1:return an(o.type,!0);case 31:return Ht("Activity");default:return""}}function Ln(o){try{var u="";do u+=sn(o),o=o.return;while(o);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function Kt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Sn(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Qt(o){var u=Sn(o)?"checked":"value",y=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),A=""+o[u];if(!o.hasOwnProperty(u)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var L=y.get,H=y.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return L.call(this)},set:function(re){A=""+re,H.call(this,re)}}),Object.defineProperty(o,u,{enumerable:y.enumerable}),{getValue:function(){return A},setValue:function(re){A=""+re},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function vi(o){o._valueTracker||(o._valueTracker=Qt(o))}function En(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var y=u.getValue(),A="";return o&&(A=Sn(o)?o.checked?"true":"false":o.value),o=A,o!==y?(u.setValue(o),!0):!1}function Tn(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var na=/[\n"\\]/g;function yn(o){return o.replace(na,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function $n(o,u,y,A,L,H,re,me){o.name="",re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?o.type=re:o.removeAttribute("type"),u!=null?re==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+Kt(u)):o.value!==""+Kt(u)&&(o.value=""+Kt(u)):re!=="submit"&&re!=="reset"||o.removeAttribute("value"),u!=null?ha(o,re,Kt(u)):y!=null?ha(o,re,Kt(y)):A!=null&&o.removeAttribute("value"),L==null&&H!=null&&(o.defaultChecked=!!H),L!=null&&(o.checked=L&&typeof L!="function"&&typeof L!="symbol"),me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?o.name=""+Kt(me):o.removeAttribute("name")}function Gn(o,u,y,A,L,H,re,me){if(H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(o.type=H),u!=null||y!=null){if(!(H!=="submit"&&H!=="reset"||u!=null))return;y=y!=null?""+Kt(y):"",u=u!=null?""+Kt(u):y,me||u===o.value||(o.value=u),o.defaultValue=u}A=A??L,A=typeof A!="function"&&typeof A!="symbol"&&!!A,o.checked=me?o.checked:!!A,o.defaultChecked=!!A,re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"&&(o.name=re)}function ha(o,u,y){u==="number"&&Tn(o.ownerDocument)===o||o.defaultValue===""+y||(o.defaultValue=""+y)}function Ei(o,u,y,A){if(o=o.options,u){u={};for(var L=0;L<y.length;L++)u["$"+y[L]]=!0;for(y=0;y<o.length;y++)L=u.hasOwnProperty("$"+o[y].value),o[y].selected!==L&&(o[y].selected=L),L&&A&&(o[y].defaultSelected=!0)}else{for(y=""+Kt(y),u=null,L=0;L<o.length;L++){if(o[L].value===y){o[L].selected=!0,A&&(o[L].defaultSelected=!0);return}u!==null||o[L].disabled||(u=o[L])}u!==null&&(u.selected=!0)}}function ia(o,u,y){if(u!=null&&(u=""+Kt(u),u!==o.value&&(o.value=u),y==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=y!=null?""+Kt(y):""}function ds(o,u,y,A){if(u==null){if(A!=null){if(y!=null)throw Error(i(92));if(oe(A)){if(1<A.length)throw Error(i(93));A=A[0]}y=A}y==null&&(y=""),u=y}y=Kt(u),o.defaultValue=y,A=o.textContent,A===y&&A!==""&&A!==null&&(o.value=A)}function Xs(o,u){if(u){var y=o.firstChild;if(y&&y===o.lastChild&&y.nodeType===3){y.nodeValue=u;return}}o.textContent=u}var wo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _d(o,u,y){var A=u.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?A?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":A?o.setProperty(u,y):typeof y!="number"||y===0||wo.has(u)?u==="float"?o.cssFloat=y:o[u]=(""+y).trim():o[u]=y+"px"}function Sd(o,u,y){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,y!=null){for(var A in y)!y.hasOwnProperty(A)||u!=null&&u.hasOwnProperty(A)||(A.indexOf("--")===0?o.setProperty(A,""):A==="float"?o.cssFloat="":o[A]="");for(var L in u)A=u[L],u.hasOwnProperty(L)&&y[L]!==A&&_d(o,L,A)}else for(var H in u)u.hasOwnProperty(H)&&_d(o,H,u[H])}function Ah(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),am=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nh(o){return am.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Rh=null;function rc(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var el=null,Kc=null;function Ed(o){var u=ve(o);if(u&&(o=u.stateNode)){var y=o[Va]||null;e:switch(o=u.stateNode,u.type){case"input":if($n(o,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),u=y.name,y.type==="radio"&&u!=null){for(y=o;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+yn(""+u)+'"][type="radio"]'),u=0;u<y.length;u++){var A=y[u];if(A!==o&&A.form===o.form){var L=A[Va]||null;if(!L)throw Error(i(90));$n(A,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(u=0;u<y.length;u++)A=y[u],A.form===o.form&&En(A)}break e;case"textarea":ia(o,y.value,y.defaultValue);break e;case"select":u=y.value,u!=null&&Ei(o,!!y.multiple,u,!1)}}}var oc=!1;function Ff(o,u,y){if(oc)return o(u,y);oc=!0;try{var A=o(u);return A}finally{if(oc=!1,(el!==null||Kc!==null)&&(Kr(),el&&(u=el,o=Kc,Kc=el=null,Ed(u),o)))for(u=0;u<o.length;u++)Ed(o[u])}}function _u(o,u){var y=o.stateNode;if(y===null)return null;var A=y[Va]||null;if(A===null)return null;y=A[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(o=o.type,A=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!A;break e;default:o=!1}if(o)return null;if(y&&typeof y!="function")throw Error(i(231,u,typeof y));return y}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wd=!1;if(tl)try{var Su={};Object.defineProperty(Su,"passive",{get:function(){wd=!0}}),window.addEventListener("test",Su,Su),window.removeEventListener("test",Su,Su)}catch{wd=!1}var Ml=null,Dh=null,Oh=null;function kf(){if(Oh)return Oh;var o,u=Dh,y=u.length,A,L="value"in Ml?Ml.value:Ml.textContent,H=L.length;for(o=0;o<y&&u[o]===L[o];o++);var re=y-o;for(A=1;A<=re&&u[y-A]===L[H-A];A++);return Oh=L.slice(o,1<A?1-A:void 0)}function Tl(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Eu(){return!0}function Md(){return!1}function Ys(o){function u(y,A,L,H,re){this._reactName=y,this._targetInst=L,this.type=A,this.nativeEvent=H,this.target=re,this.currentTarget=null;for(var me in o)o.hasOwnProperty(me)&&(y=o[me],this[me]=y?y(H):H[me]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?Eu:Md,this.isPropagationStopped=Md,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Eu)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Eu)},persist:function(){},isPersistent:Eu}),u}var Cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wu=Ys(Cl),Mu=g({},Cl,{view:0,detail:0}),Lg=Ys(Mu),lc,Tu,Al,Zc=g({},Mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ad,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Al&&(Al&&o.type==="mousemove"?(lc=o.screenX-Al.screenX,Tu=o.screenY-Al.screenY):Tu=lc=0,Al=o),lc)},movementY:function(o){return"movementY"in o?o.movementY:Tu}}),Td=Ys(Zc),sm=g({},Zc,{dataTransfer:0}),zg=Ys(sm),es=g({},Mu,{relatedTarget:0}),Qc=Ys(es),jh=g({},Cl,{animationName:0,elapsedTime:0,pseudoElement:0}),rm=Ys(jh),om=g({},Cl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),cc=Ys(om),Cd=g({},Cl,{data:0}),nl=Ys(Cd),Nl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ph={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gf(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Hf[o])?!!u[o]:!1}function Ad(){return Gf}var Jc=g({},Mu,{key:function(o){if(o.key){var u=Nl[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Tl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ph[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ad,charCode:function(o){return o.type==="keypress"?Tl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Tl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Nd=Ys(Jc),Vf=g({},Zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rd=Ys(Vf),lm=g({},Mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ad}),qf=Ys(lm),Ig=g({},Cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),va=Ys(Ig),Xf=g({},Zc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Bg=Ys(Xf),cm=g({},Cl,{newState:0,oldState:0}),uc=Ys(cm),Rl=[9,13,27,32],$c=tl&&"CompositionEvent"in window,dc=null;tl&&"documentMode"in document&&(dc=document.documentMode);var Dd=tl&&"TextEvent"in window&&!dc,Od=tl&&(!$c||dc&&8<dc&&11>=dc),hc=" ",hs=!1;function Cu(o,u){switch(o){case"keyup":return Rl.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yf(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Dl=!1;function eu(o,u){switch(o){case"compositionend":return Yf(u);case"keypress":return u.which!==32?null:(hs=!0,hc);case"textInput":return o=u.data,o===hc&&hs?null:o;default:return null}}function Uh(o,u){if(Dl)return o==="compositionend"||!$c&&Cu(o,u)?(o=kf(),Oh=Dh=Ml=null,Dl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Od&&u.locale!=="ko"?null:u.data;default:return null}}var Lh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zh(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!Lh[o.type]:u==="textarea"}function mr(o,u,y,A){el?Kc?Kc.push(A):Kc=[A]:el=A,u=V1(u,"onChange"),0<u.length&&(y=new wu("onChange","change",null,y,A),o.push({event:y,listeners:u}))}var Or=null,fc=null;function Fg(o){RA(o,0)}function jd(o){var u=Ue(o);if(En(u))return o}function Ws(o,u){if(o==="change")return u}var Ih=!1;if(tl){var Pd;if(tl){var Au="oninput"in document;if(!Au){var Nu=document.createElement("div");Nu.setAttribute("oninput","return;"),Au=typeof Nu.oninput=="function"}Pd=Au}else Pd=!1;Ih=Pd&&(!document.documentMode||9<document.documentMode)}function fa(){Or&&(Or.detachEvent("onpropertychange",Wf),fc=Or=null)}function Wf(o){if(o.propertyName==="value"&&jd(fc)){var u=[];mr(u,fc,o,rc(o)),Ff(Fg,u)}}function kg(o,u,y){o==="focusin"?(fa(),Or=u,fc=y,Or.attachEvent("onpropertychange",Wf)):o==="focusout"&&fa()}function Bh(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return jd(fc)}function pc(o,u){if(o==="click")return jd(u)}function Xi(o,u){if(o==="input"||o==="change")return jd(u)}function Hg(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var jr=typeof Object.is=="function"?Object.is:Hg;function Mo(o,u){if(jr(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var y=Object.keys(o),A=Object.keys(u);if(y.length!==A.length)return!1;for(A=0;A<y.length;A++){var L=y[A];if(!ft.call(u,L)||!jr(o[L],u[L]))return!1}return!0}function Es(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ol(o,u){var y=Es(o);o=0;for(var A;y;){if(y.nodeType===3){if(A=o+y.textContent.length,o<=u&&A>=u)return{node:y,offset:u-o};o=A}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Es(y)}}function Kf(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?Kf(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Zf(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Tn(o.document);u instanceof o.HTMLIFrameElement;){try{var y=typeof u.contentWindow.location.href=="string"}catch{y=!1}if(y)o=u.contentWindow;else break;u=Tn(o.document)}return u}function mc(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var To=tl&&"documentMode"in document&&11>=document.documentMode,jl=null,Ud=null,Ld=null,zd=!1;function Fh(o,u,y){var A=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;zd||jl==null||jl!==Tn(A)||(A=jl,"selectionStart"in A&&mc(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),Ld&&Mo(Ld,A)||(Ld=A,A=V1(Ud,"onSelect"),0<A.length&&(u=new wu("onSelect","select",null,u,y),o.push({event:u,listeners:A}),u.target=jl)))}function ts(o,u){var y={};return y[o.toLowerCase()]=u.toLowerCase(),y["Webkit"+o]="webkit"+u,y["Moz"+o]="moz"+u,y}var gc={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},kh={},Gg={};tl&&(Gg=document.createElement("div").style,"AnimationEvent"in window||(delete gc.animationend.animation,delete gc.animationiteration.animation,delete gc.animationstart.animation),"TransitionEvent"in window||delete gc.transitionend.transition);function Pl(o){if(kh[o])return kh[o];if(!gc[o])return o;var u=gc[o],y;for(y in u)if(u.hasOwnProperty(y)&&y in Gg)return kh[o]=u[y];return o}var Ks=Pl("animationend"),no=Pl("animationiteration"),Zs=Pl("animationstart"),um=Pl("transitionrun"),vc=Pl("transitionstart"),tu=Pl("transitioncancel"),La=Pl("transitionend"),Hh=new Map,ws="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ws.push("scrollEnd");function fs(o,u){Hh.set(o,u),mt(u,[o])}var Ul=new WeakMap;function za(o,u){if(typeof o=="object"&&o!==null){var y=Ul.get(o);return y!==void 0?y:(u={value:o,source:u,stack:Ln(u)},Ul.set(o,u),u)}return{value:o,source:u,stack:Ln(u)}}var Ia=[],Pr=0,Id=0;function Ur(){for(var o=Pr,u=Id=Pr=0;u<o;){var y=Ia[u];Ia[u++]=null;var A=Ia[u];Ia[u++]=null;var L=Ia[u];Ia[u++]=null;var H=Ia[u];if(Ia[u++]=null,A!==null&&L!==null){var re=A.pending;re===null?L.next=L:(L.next=re.next,re.next=L),A.pending=L}H!==0&&bc(y,L,H)}}function yc(o,u,y,A){Ia[Pr++]=o,Ia[Pr++]=u,Ia[Pr++]=y,Ia[Pr++]=A,Id|=A,o.lanes|=A,o=o.alternate,o!==null&&(o.lanes|=A)}function xc(o,u,y,A){return yc(o,u,y,A),Ru(o)}function io(o,u){return yc(o,null,null,u),Ru(o)}function bc(o,u,y){o.lanes|=y;var A=o.alternate;A!==null&&(A.lanes|=y);for(var L=!1,H=o.return;H!==null;)H.childLanes|=y,A=H.alternate,A!==null&&(A.childLanes|=y),H.tag===22&&(o=H.stateNode,o===null||o._visibility&1||(L=!0)),o=H,H=H.return;return o.tag===3?(H=o.stateNode,L&&u!==null&&(L=31-Nt(y),o=H.hiddenUpdates,A=o[L],A===null?o[L]=[u]:A.push(u),u.lane=y|536870912),H):null}function Ru(o){if(50<wr)throw wr=0,zc=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var _c={};function Du(o,u,y,A){this.tag=o,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(o,u,y,A){return new Du(o,u,y,A)}function nu(o){return o=o.prototype,!(!o||!o.isReactComponent)}function qa(o,u){var y=o.alternate;return y===null?(y=gr(o.tag,u,o.key,o.mode),y.elementType=o.elementType,y.type=o.type,y.stateNode=o.stateNode,y.alternate=o,o.alternate=y):(y.pendingProps=u,y.type=o.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=o.flags&65011712,y.childLanes=o.childLanes,y.lanes=o.lanes,y.child=o.child,y.memoizedProps=o.memoizedProps,y.memoizedState=o.memoizedState,y.updateQueue=o.updateQueue,u=o.dependencies,y.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},y.sibling=o.sibling,y.index=o.index,y.ref=o.ref,y.refCleanup=o.refCleanup,y}function Gh(o,u){o.flags&=65011714;var y=o.alternate;return y===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=y.childLanes,o.lanes=y.lanes,o.child=y.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=y.memoizedProps,o.memoizedState=y.memoizedState,o.updateQueue=y.updateQueue,o.type=y.type,u=y.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function ns(o,u,y,A,L,H){var re=0;if(A=o,typeof o=="function")nu(o)&&(re=1);else if(typeof o=="string")re=yz(o,y,ie.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case O:return o=gr(31,y,u,L),o.elementType=O,o.lanes=H,o;case S:return Ll(y.children,L,H,u);case w:re=8,L|=24;break;case M:return o=gr(12,y,u,L|2),o.elementType=M,o.lanes=H,o;case P:return o=gr(13,y,u,L),o.elementType=P,o.lanes=H,o;case B:return o=gr(19,y,u,L),o.elementType=B,o.lanes=H,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case E:case C:re=10;break e;case T:re=9;break e;case D:re=11;break e;case F:re=14;break e;case j:re=16,A=null;break e}re=29,y=Error(i(130,o===null?"null":typeof o,"")),A=null}return u=gr(re,y,u,L),u.elementType=o,u.type=A,u.lanes=H,u}function Ll(o,u,y,A){return o=gr(7,o,A,u),o.lanes=y,o}function Bd(o,u,y){return o=gr(6,o,null,u),o.lanes=y,o}function Fd(o,u,y){return u=gr(4,o.children!==null?o.children:[],o.key,u),u.lanes=y,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Ms=[],vr=0,Us=null,Ou=0,Ts=[],ao=0,yr=null,il=1,Co="";function Lr(o,u){Ms[vr++]=Ou,Ms[vr++]=Us,Us=o,Ou=u}function Vh(o,u,y){Ts[ao++]=il,Ts[ao++]=Co,Ts[ao++]=yr,yr=o;var A=il;o=Co;var L=32-Nt(A)-1;A&=~(1<<L),y+=1;var H=32-Nt(u)+L;if(30<H){var re=L-L%5;H=(A&(1<<re)-1).toString(32),A>>=re,L-=re,il=1<<32-Nt(u)+L|y<<L|A,Co=H+o}else il=1<<H|y<<L|A,Co=o}function Qf(o){o.return!==null&&(Lr(o,1),Vh(o,1,0))}function Jf(o){for(;o===Us;)Us=Ms[--vr],Ms[vr]=null,Ou=Ms[--vr],Ms[vr]=null;for(;o===yr;)yr=Ts[--ao],Ts[ao]=null,Co=Ts[--ao],Ts[ao]=null,il=Ts[--ao],Ts[ao]=null}var Qs=null,ya=null,wi=!1,Ao=null,so=!1,$f=Error(i(519));function Sc(o){var u=Error(i(418,""));throw au(za(u,o)),$f}function dm(o){var u=o.stateNode,y=o.type,A=o.memoizedProps;switch(u[la]=o,u[Va]=A,y){case"dialog":Oi("cancel",u),Oi("close",u);break;case"iframe":case"object":case"embed":Oi("load",u);break;case"video":case"audio":for(y=0;y<ty.length;y++)Oi(ty[y],u);break;case"source":Oi("error",u);break;case"img":case"image":case"link":Oi("error",u),Oi("load",u);break;case"details":Oi("toggle",u);break;case"input":Oi("invalid",u),Gn(u,A.value,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name,!0),vi(u);break;case"select":Oi("invalid",u);break;case"textarea":Oi("invalid",u),ds(u,A.value,A.defaultValue,A.children),vi(u)}y=A.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||u.textContent===""+y||A.suppressHydrationWarning===!0||PA(u.textContent,y)?(A.popover!=null&&(Oi("beforetoggle",u),Oi("toggle",u)),A.onScroll!=null&&Oi("scroll",u),A.onScrollEnd!=null&&Oi("scrollend",u),A.onClick!=null&&(u.onclick=q1),u=!0):u=!1,u||Sc(o)}function iu(o){for(Qs=o.return;Qs;)switch(Qs.tag){case 5:case 13:so=!1;return;case 27:case 3:so=!0;return;default:Qs=Qs.return}}function zr(o){if(o!==Qs)return!1;if(!wi)return iu(o),wi=!0,!1;var u=o.tag,y;if((y=u!==3&&u!==27)&&((y=u===5)&&(y=o.type,y=!(y!=="form"&&y!=="button")||AE(o.type,o.memoizedProps)),y=!y),y&&ya&&Sc(o),iu(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8)if(y=o.data,y==="/$"){if(u===0){ya=ed(o.nextSibling);break e}u--}else y!=="$"&&y!=="$!"&&y!=="$?"||u++;o=o.nextSibling}ya=null}}else u===27?(u=ya,vp(o.type)?(o=OE,OE=null,ya=o):ya=u):ya=Qs?ed(o.stateNode.nextSibling):null;return!0}function ju(){ya=Qs=null,wi=!1}function Ii(){var o=Ao;return o!==null&&(xn===null?xn=o:xn.push.apply(xn,o),Ao=null),o}function au(o){Ao===null?Ao=[o]:Ao.push(o)}var ep=ne(null),Ec=null,zl=null;function No(o,u,y){de(ep,u._currentValue),u._currentValue=y}function Il(o){o._currentValue=ep.current,ue(ep)}function tp(o,u,y){for(;o!==null;){var A=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,A!==null&&(A.childLanes|=u)):A!==null&&(A.childLanes&u)!==u&&(A.childLanes|=u),o===y)break;o=o.return}}function Ci(o,u,y,A){var L=o.child;for(L!==null&&(L.return=o);L!==null;){var H=L.dependencies;if(H!==null){var re=L.child;H=H.firstContext;e:for(;H!==null;){var me=H;H=L;for(var Oe=0;Oe<u.length;Oe++)if(me.context===u[Oe]){H.lanes|=y,me=H.alternate,me!==null&&(me.lanes|=y),tp(H.return,y,o),A||(re=null);break e}H=me.next}}else if(L.tag===18){if(re=L.return,re===null)throw Error(i(341));re.lanes|=y,H=re.alternate,H!==null&&(H.lanes|=y),tp(re,y,o),re=null}else re=L.child;if(re!==null)re.return=L;else for(re=L;re!==null;){if(re===o){re=null;break}if(L=re.sibling,L!==null){L.return=re.return,re=L;break}re=re.return}L=re}}function Ir(o,u,y,A){o=null;for(var L=u,H=!1;L!==null;){if(!H){if((L.flags&524288)!==0)H=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var re=L.alternate;if(re===null)throw Error(i(387));if(re=re.memoizedProps,re!==null){var me=L.type;jr(L.pendingProps.value,re.value)||(o!==null?o.push(me):o=[me])}}else if(L===ae.current){if(re=L.alternate,re===null)throw Error(i(387));re.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(o!==null?o.push(oy):o=[oy])}L=L.return}o!==null&&Ci(u,o,y,A),u.flags|=262144}function qh(o){for(o=o.firstContext;o!==null;){if(!jr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function al(o){Ec=o,zl=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Xa(o){return np(Ec,o)}function Xh(o,u){return Ec===null&&al(o),np(o,u)}function np(o,u){var y=u._currentValue;if(u={context:u,memoizedValue:y,next:null},zl===null){if(o===null)throw Error(i(308));zl=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else zl=zl.next=u;return y}var hm=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(y,A){o.push(A)}};this.abort=function(){u.aborted=!0,o.forEach(function(y){return y()})}},fm=n.unstable_scheduleCallback,Bl=n.unstable_NormalPriority,Za={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pu(){return{controller:new hm,data:new Map,refCount:0}}function Ro(o){o.refCount--,o.refCount===0&&fm(Bl,function(){o.controller.abort()})}var su=null,Uu=0,Yn=0,Lu=null;function Br(o,u){if(su===null){var y=su=[];Uu=0,Yn=xE(),Lu={status:"pending",value:void 0,then:function(A){y.push(A)}}}return Uu++,u.then(Yh,Yh),u}function Yh(){if(--Uu===0&&su!==null){Lu!==null&&(Lu.status="fulfilled");var o=su;su=null,Yn=0,Lu=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function Vg(o,u){var y=[],A={status:"pending",value:null,reason:null,then:function(L){y.push(L)}};return o.then(function(){A.status="fulfilled",A.value=u;for(var L=0;L<y.length;L++)(0,y[L])(u)},function(L){for(A.status="rejected",A.reason=L,L=0;L<y.length;L++)(0,y[L])(void 0)}),A}var kd=$.S;$.S=function(o,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Br(o,u),kd!==null&&kd(o,u)};var Fr=ne(null);function kn(){var o=Fr.current;return o!==null?o:zn.pooledCache}function Wh(o,u){u===null?de(Fr,Fr.current):de(Fr,u.pool)}function Js(){var o=kn();return o===null?null:{parent:Za._currentValue,pool:o}}var zu=Error(i(460)),pm=Error(i(474)),kr=Error(i(542)),Fl={then:function(){}};function wc(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Iu(){}function Hd(o,u,y){switch(y=o[y],y===void 0?o.push(u):y!==u&&(u.then(Iu,Iu),u=y),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Mc(o),o;default:if(typeof u.status=="string")u.then(Iu,Iu);else{if(o=zn,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(A){if(u.status==="pending"){var L=u;L.status="fulfilled",L.value=A}},function(A){if(u.status==="pending"){var L=u;L.status="rejected",L.reason=A}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Mc(o),o}throw Do=u,zu}}var Do=null;function ip(){if(Do===null)throw Error(i(459));var o=Do;return Do=null,o}function Mc(o){if(o===zu||o===kr)throw Error(i(483))}var sl=!1;function Kh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mn(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Oo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function $s(o,u,y){var A=o.updateQueue;if(A===null)return null;if(A=A.shared,(Cn&2)!==0){var L=A.pending;return L===null?u.next=u:(u.next=L.next,L.next=u),A.pending=u,u=Ru(o),bc(o,null,y),u}return yc(o,A,u,y),Ru(o)}function Tc(o,u,y){if(u=u.updateQueue,u!==null&&(u=u.shared,(y&4194048)!==0)){var A=u.lanes;A&=o.pendingLanes,y|=A,u.lanes=y,Vt(o,y)}}function Gd(o,u){var y=o.updateQueue,A=o.alternate;if(A!==null&&(A=A.updateQueue,y===A)){var L=null,H=null;if(y=y.firstBaseUpdate,y!==null){do{var re={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};H===null?L=H=re:H=H.next=re,y=y.next}while(y!==null);H===null?L=H=u:H=H.next=u}else L=H=u;y={baseState:A.baseState,firstBaseUpdate:L,lastBaseUpdate:H,shared:A.shared,callbacks:A.callbacks},o.updateQueue=y;return}o=y.lastBaseUpdate,o===null?y.firstBaseUpdate=u:o.next=u,y.lastBaseUpdate=u}var ap=!1;function Zh(){if(ap){var o=Lu;if(o!==null)throw o}}function Cc(o,u,y,A){ap=!1;var L=o.updateQueue;sl=!1;var H=L.firstBaseUpdate,re=L.lastBaseUpdate,me=L.shared.pending;if(me!==null){L.shared.pending=null;var Oe=me,nt=Oe.next;Oe.next=null,re===null?H=nt:re.next=nt,re=Oe;var St=o.alternate;St!==null&&(St=St.updateQueue,me=St.lastBaseUpdate,me!==re&&(me===null?St.firstBaseUpdate=nt:me.next=nt,St.lastBaseUpdate=Oe))}if(H!==null){var Ct=L.baseState;re=0,St=nt=Oe=null,me=H;do{var rt=me.lane&-536870913,ot=rt!==me.lane;if(ot?(gn&rt)===rt:(A&rt)===rt){rt!==0&&rt===Yn&&(ap=!0),St!==null&&(St=St.next={lane:0,tag:me.tag,payload:me.payload,callback:null,next:null});e:{var Hn=o,Nn=me;rt=u;var ja=y;switch(Nn.tag){case 1:if(Hn=Nn.payload,typeof Hn=="function"){Ct=Hn.call(ja,Ct,rt);break e}Ct=Hn;break e;case 3:Hn.flags=Hn.flags&-65537|128;case 0:if(Hn=Nn.payload,rt=typeof Hn=="function"?Hn.call(ja,Ct,rt):Hn,rt==null)break e;Ct=g({},Ct,rt);break e;case 2:sl=!0}}rt=me.callback,rt!==null&&(o.flags|=64,ot&&(o.flags|=8192),ot=L.callbacks,ot===null?L.callbacks=[rt]:ot.push(rt))}else ot={lane:rt,tag:me.tag,payload:me.payload,callback:me.callback,next:null},St===null?(nt=St=ot,Oe=Ct):St=St.next=ot,re|=rt;if(me=me.next,me===null){if(me=L.shared.pending,me===null)break;ot=me,me=ot.next,ot.next=null,L.lastBaseUpdate=ot,L.shared.pending=null}}while(!0);St===null&&(Oe=Ct),L.baseState=Oe,L.firstBaseUpdate=nt,L.lastBaseUpdate=St,H===null&&(L.shared.lanes=0),Wi|=re,o.lanes=re,o.memoizedState=Ct}}function hn(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function qg(o,u){var y=o.callbacks;if(y!==null)for(o.callbacks=null,o=0;o<y.length;o++)hn(y[o],u)}var Vd=ne(null),Qh=ne(0);function qd(o,u){o=mo,de(Qh,o),de(Vd,u),mo=o|u.baseLanes}function mm(){de(Qh,mo),de(Vd,Vd.current)}function Jh(){mo=Qh.current,ue(Vd),ue(Qh)}var Ac=0,Wn=null,Zi=null,Ya=null,$h=!1,rl=!1,er=!1,ps=0,jo=0,Ba=null,kl=0;function yi(){throw Error(i(321))}function Fa(o,u){if(u===null)return!1;for(var y=0;y<u.length&&y<o.length;y++)if(!jr(o[y],u[y]))return!1;return!0}function is(o,u,y,A,L,H){return Ac=H,Wn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,$.H=o===null||o.memoizedState===null?pp:mp,er=!1,H=y(A,L),er=!1,rl&&(H=Yg(u,y,A,L)),Xg(o),H}function Xg(o){$.H=rf;var u=Zi!==null&&Zi.next!==null;if(Ac=0,Ya=Zi=Wn=null,$h=!1,jo=0,Ba=null,u)throw Error(i(300));o===null||sa||(o=o.dependencies,o!==null&&qh(o)&&(sa=!0))}function Yg(o,u,y,A){Wn=o;var L=0;do{if(rl&&(Ba=null),jo=0,rl=!1,25<=L)throw Error(i(301));if(L+=1,Ya=Zi=null,o.updateQueue!=null){var H=o.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}$.H=v0,H=u(y,A)}while(rl);return H}function Cs(){var o=$.H,u=o.useState()[0];return u=typeof u.then=="function"?ll(u):u,o=o.useState()[0],(Zi!==null?Zi.memoizedState:null)!==o&&(Wn.flags|=1024),u}function ol(){var o=ps!==0;return ps=0,o}function sp(o,u,y){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~y}function gm(o){if($h){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}$h=!1}Ac=0,Ya=Zi=Wn=null,rl=!1,jo=ps=0,Ba=null}function xr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ya===null?Wn.memoizedState=Ya=o:Ya=Ya.next=o,Ya}function as(){if(Zi===null){var o=Wn.alternate;o=o!==null?o.memoizedState:null}else o=Zi.next;var u=Ya===null?Wn.memoizedState:Ya.next;if(u!==null)Ya=u,Zi=o;else{if(o===null)throw Wn.alternate===null?Error(i(467)):Error(i(310));Zi=o,o={memoizedState:Zi.memoizedState,baseState:Zi.baseState,baseQueue:Zi.baseQueue,queue:Zi.queue,next:null},Ya===null?Wn.memoizedState=Ya=o:Ya=Ya.next=o}return Ya}function Nc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(o){var u=jo;return jo+=1,Ba===null&&(Ba=[]),o=Hd(Ba,o,u),u=Wn,(Ya===null?u.memoizedState:Ya.next)===null&&(u=u.alternate,$.H=u===null||u.memoizedState===null?pp:mp),o}function ef(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ll(o);if(o.$$typeof===C)return Xa(o)}throw Error(i(438,String(o)))}function vm(o){var u=null,y=Wn.updateQueue;if(y!==null&&(u=y.memoCache),u==null){var A=Wn.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(u={data:A.data.map(function(L){return L.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),y===null&&(y=Nc(),Wn.updateQueue=y),y.memoCache=u,y=u.data[u.index],y===void 0)for(y=u.data[u.index]=Array(o),A=0;A<o;A++)y[A]=I;return u.index++,y}function Hr(o,u){return typeof u=="function"?u(o):u}function Gr(o){var u=as();return ym(u,Zi,o)}function ym(o,u,y){var A=o.queue;if(A===null)throw Error(i(311));A.lastRenderedReducer=y;var L=o.baseQueue,H=A.pending;if(H!==null){if(L!==null){var re=L.next;L.next=H.next,H.next=re}u.baseQueue=L=H,A.pending=null}if(H=o.baseState,L===null)o.memoizedState=H;else{u=L.next;var me=re=null,Oe=null,nt=u,St=!1;do{var Ct=nt.lane&-536870913;if(Ct!==nt.lane?(gn&Ct)===Ct:(Ac&Ct)===Ct){var rt=nt.revertLane;if(rt===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),Ct===Yn&&(St=!0);else if((Ac&rt)===rt){nt=nt.next,rt===Yn&&(St=!0);continue}else Ct={lane:0,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},Oe===null?(me=Oe=Ct,re=H):Oe=Oe.next=Ct,Wn.lanes|=rt,Wi|=rt;Ct=nt.action,er&&y(H,Ct),H=nt.hasEagerState?nt.eagerState:y(H,Ct)}else rt={lane:Ct,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},Oe===null?(me=Oe=rt,re=H):Oe=Oe.next=rt,Wn.lanes|=Ct,Wi|=Ct;nt=nt.next}while(nt!==null&&nt!==u);if(Oe===null?re=H:Oe.next=me,!jr(H,o.memoizedState)&&(sa=!0,St&&(y=Lu,y!==null)))throw y;o.memoizedState=H,o.baseState=re,o.baseQueue=Oe,A.lastRenderedState=H}return L===null&&(A.lanes=0),[o.memoizedState,A.dispatch]}function xm(o){var u=as(),y=u.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=o;var A=y.dispatch,L=y.pending,H=u.memoizedState;if(L!==null){y.pending=null;var re=L=L.next;do H=o(H,re.action),re=re.next;while(re!==L);jr(H,u.memoizedState)||(sa=!0),u.memoizedState=H,u.baseQueue===null&&(u.baseState=H),y.lastRenderedState=H}return[H,A]}function Wg(o,u,y){var A=Wn,L=as(),H=wi;if(H){if(y===void 0)throw Error(i(407));y=y()}else y=u();var re=!jr((Zi||L).memoizedState,y);re&&(L.memoizedState=y,sa=!0),L=L.queue;var me=Zg.bind(null,A,L,o);if(Wd(2048,8,me,[o]),L.getSnapshot!==u||re||Ya!==null&&Ya.memoizedState.tag&1){if(A.flags|=2048,Yd(9,tf(),Kg.bind(null,A,L,y,u),null),zn===null)throw Error(i(349));H||(Ac&124)!==0||Hl(A,u,y)}return y}function Hl(o,u,y){o.flags|=16384,o={getSnapshot:u,value:y},u=Wn.updateQueue,u===null?(u=Nc(),Wn.updateQueue=u,u.stores=[o]):(y=u.stores,y===null?u.stores=[o]:y.push(o))}function Kg(o,u,y,A){u.value=y,u.getSnapshot=A,Qg(u)&&Xd(o)}function Zg(o,u,y){return y(function(){Qg(u)&&Xd(o)})}function Qg(o){var u=o.getSnapshot;o=o.value;try{var y=u();return!jr(o,y)}catch{return!0}}function Xd(o){var u=io(o,2);u!==null&&Ka(u,o,2)}function bm(o){var u=xr();if(typeof o=="function"){var y=o;if(o=y(),er){ze(!0);try{y()}finally{ze(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:o},u}function Jg(o,u,y,A){return o.baseState=y,ym(o,Zi,typeof A=="function"?A:Hr)}function Qv(o,u,y,A,L){if(fp(o))throw Error(i(485));if(o=u.action,o!==null){var H={payload:L,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(re){H.listeners.push(re)}};$.T!==null?y(!0):H.isTransition=!1,A(H),y=u.pending,y===null?(H.next=u.pending=H,$g(u,H)):(H.next=y.next,u.pending=y.next=H)}}function $g(o,u){var y=u.action,A=u.payload,L=o.state;if(u.isTransition){var H=$.T,re={};$.T=re;try{var me=y(L,A),Oe=$.S;Oe!==null&&Oe(re,me),e0(o,u,me)}catch(nt){_m(o,u,nt)}finally{$.T=H}}else try{H=y(L,A),e0(o,u,H)}catch(nt){_m(o,u,nt)}}function e0(o,u,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(A){t0(o,u,A)},function(A){return _m(o,u,A)}):t0(o,u,y)}function t0(o,u,y){u.status="fulfilled",u.value=y,n0(u),o.state=y,u=o.pending,u!==null&&(y=u.next,y===u?o.pending=null:(y=y.next,u.next=y,$g(o,y)))}function _m(o,u,y){var A=o.pending;if(o.pending=null,A!==null){A=A.next;do u.status="rejected",u.reason=y,n0(u),u=u.next;while(u!==A)}o.action=null}function n0(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function Sm(o,u){return u}function i0(o,u){if(wi){var y=zn.formState;if(y!==null){e:{var A=Wn;if(wi){if(ya){t:{for(var L=ya,H=so;L.nodeType!==8;){if(!H){L=null;break t}if(L=ed(L.nextSibling),L===null){L=null;break t}}H=L.data,L=H==="F!"||H==="F"?L:null}if(L){ya=ed(L.nextSibling),A=L.data==="F!";break e}}Sc(A)}A=!1}A&&(u=y[0])}}return y=xr(),y.memoizedState=y.baseState=u,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sm,lastRenderedState:u},y.queue=A,y=m0.bind(null,Wn,A),A.dispatch=y,A=bm(!1),H=hp.bind(null,Wn,!1,A.queue),A=xr(),L={state:u,dispatch:null,action:o,pending:null},A.queue=L,y=Qv.bind(null,Wn,L,H,y),L.dispatch=y,A.memoizedState=o,[u,y,!1]}function a0(o){var u=as();return s0(u,Zi,o)}function s0(o,u,y){if(u=ym(o,u,Sm)[0],o=Gr(Hr)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var A=ll(u)}catch(re){throw re===zu?kr:re}else A=u;u=as();var L=u.queue,H=L.dispatch;return y!==u.memoizedState&&(Wn.flags|=2048,Yd(9,tf(),r0.bind(null,L,y),null)),[A,H,o]}function r0(o,u){o.action=u}function o0(o){var u=as(),y=Zi;if(y!==null)return s0(u,y,o);as(),u=u.memoizedState,y=as();var A=y.queue.dispatch;return y.memoizedState=o,[u,A,!1]}function Yd(o,u,y,A){return o={tag:o,create:y,deps:A,inst:u,next:null},u=Wn.updateQueue,u===null&&(u=Nc(),Wn.updateQueue=u),y=u.lastEffect,y===null?u.lastEffect=o.next=o:(A=y.next,y.next=o,o.next=A,u.lastEffect=o),o}function tf(){return{destroy:void 0,resource:void 0}}function Em(){return as().memoizedState}function rp(o,u,y,A){var L=xr();A=A===void 0?null:A,Wn.flags|=o,L.memoizedState=Yd(1|u,tf(),y,A)}function Wd(o,u,y,A){var L=as();A=A===void 0?null:A;var H=L.memoizedState.inst;Zi!==null&&A!==null&&Fa(A,Zi.memoizedState.deps)?L.memoizedState=Yd(u,H,y,A):(Wn.flags|=o,L.memoizedState=Yd(1|u,H,y,A))}function op(o,u){rp(8390656,8,o,u)}function lp(o,u){Wd(2048,8,o,u)}function cp(o,u){return Wd(4,2,o,u)}function nf(o,u){return Wd(4,4,o,u)}function wm(o,u){if(typeof u=="function"){o=o();var y=u(o);return function(){typeof y=="function"?y():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Mm(o,u,y){y=y!=null?y.concat([o]):null,Wd(4,4,wm.bind(null,u,o),y)}function af(){}function up(o,u){var y=as();u=u===void 0?null:u;var A=y.memoizedState;return u!==null&&Fa(u,A[1])?A[0]:(y.memoizedState=[o,u],o)}function Tm(o,u){var y=as();u=u===void 0?null:u;var A=y.memoizedState;if(u!==null&&Fa(u,A[1]))return A[0];if(A=o(),er){ze(!0);try{o()}finally{ze(!1)}}return y.memoizedState=[A,u],A}function dp(o,u,y){return y===void 0||(Ac&1073741824)!==0?o.memoizedState=u:(o.memoizedState=y,o=_a(),Wn.lanes|=o,Wi|=o,y)}function l0(o,u,y,A){return jr(y,u)?y:Vd.current!==null?(o=dp(o,y,A),jr(o,u)||(sa=!0),o):(Ac&42)===0?(sa=!0,o.memoizedState=y):(o=_a(),Wn.lanes|=o,Wi|=o,u)}function c0(o,u,y,A,L){var H=X.p;X.p=H!==0&&8>H?H:8;var re=$.T,me={};$.T=me,hp(o,!1,u,y);try{var Oe=L(),nt=$.S;if(nt!==null&&nt(me,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var St=Vg(Oe,A);sf(o,u,St,Ki(o))}else sf(o,u,A,Ki(o))}catch(Ct){sf(o,u,{then:function(){},status:"rejected",reason:Ct},Ki())}finally{X.p=H,$.T=re}}function u0(){}function Cm(o,u,y,A){if(o.tag!==5)throw Error(i(476));var L=d0(o).queue;c0(o,L,u,G,y===null?u0:function(){return h0(o),y(A)})}function d0(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:G},next:null};var y={};return u.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:y},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function h0(o){var u=d0(o).next.queue;sf(o,u,{},Ki())}function Am(){return Xa(oy)}function f0(){return as().memoizedState}function p0(){return as().memoizedState}function Jv(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var y=Ki();o=Oo(y);var A=$s(u,o,y);A!==null&&(Ka(A,u,y),Tc(A,u,y)),u={cache:Pu()},o.payload=u;return}u=u.return}}function $v(o,u,y){var A=Ki();y={lane:A,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},fp(o)?g0(u,y):(y=xc(o,u,y,A),y!==null&&(Ka(y,o,A),ro(y,u,A)))}function m0(o,u,y){var A=Ki();sf(o,u,y,A)}function sf(o,u,y,A){var L={lane:A,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(fp(o))g0(u,L);else{var H=o.alternate;if(o.lanes===0&&(H===null||H.lanes===0)&&(H=u.lastRenderedReducer,H!==null))try{var re=u.lastRenderedState,me=H(re,y);if(L.hasEagerState=!0,L.eagerState=me,jr(me,re))return yc(o,u,L,0),zn===null&&Ur(),!1}catch{}finally{}if(y=xc(o,u,L,A),y!==null)return Ka(y,o,A),ro(y,u,A),!0}return!1}function hp(o,u,y,A){if(A={lane:2,revertLane:xE(),action:A,hasEagerState:!1,eagerState:null,next:null},fp(o)){if(u)throw Error(i(479))}else u=xc(o,y,A,2),u!==null&&Ka(u,o,2)}function fp(o){var u=o.alternate;return o===Wn||u!==null&&u===Wn}function g0(o,u){rl=$h=!0;var y=o.pending;y===null?u.next=u:(u.next=y.next,y.next=u),o.pending=u}function ro(o,u,y){if((y&4194048)!==0){var A=u.lanes;A&=o.pendingLanes,y|=A,u.lanes=y,Vt(o,y)}}var rf={readContext:Xa,use:ef,useCallback:yi,useContext:yi,useEffect:yi,useImperativeHandle:yi,useLayoutEffect:yi,useInsertionEffect:yi,useMemo:yi,useReducer:yi,useRef:yi,useState:yi,useDebugValue:yi,useDeferredValue:yi,useTransition:yi,useSyncExternalStore:yi,useId:yi,useHostTransitionStatus:yi,useFormState:yi,useActionState:yi,useOptimistic:yi,useMemoCache:yi,useCacheRefresh:yi},pp={readContext:Xa,use:ef,useCallback:function(o,u){return xr().memoizedState=[o,u===void 0?null:u],o},useContext:Xa,useEffect:op,useImperativeHandle:function(o,u,y){y=y!=null?y.concat([o]):null,rp(4194308,4,wm.bind(null,u,o),y)},useLayoutEffect:function(o,u){return rp(4194308,4,o,u)},useInsertionEffect:function(o,u){rp(4,2,o,u)},useMemo:function(o,u){var y=xr();u=u===void 0?null:u;var A=o();if(er){ze(!0);try{o()}finally{ze(!1)}}return y.memoizedState=[A,u],A},useReducer:function(o,u,y){var A=xr();if(y!==void 0){var L=y(u);if(er){ze(!0);try{y(u)}finally{ze(!1)}}}else L=u;return A.memoizedState=A.baseState=L,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:L},A.queue=o,o=o.dispatch=$v.bind(null,Wn,o),[A.memoizedState,o]},useRef:function(o){var u=xr();return o={current:o},u.memoizedState=o},useState:function(o){o=bm(o);var u=o.queue,y=m0.bind(null,Wn,u);return u.dispatch=y,[o.memoizedState,y]},useDebugValue:af,useDeferredValue:function(o,u){var y=xr();return dp(y,o,u)},useTransition:function(){var o=bm(!1);return o=c0.bind(null,Wn,o.queue,!0,!1),xr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,y){var A=Wn,L=xr();if(wi){if(y===void 0)throw Error(i(407));y=y()}else{if(y=u(),zn===null)throw Error(i(349));(gn&124)!==0||Hl(A,u,y)}L.memoizedState=y;var H={value:y,getSnapshot:u};return L.queue=H,op(Zg.bind(null,A,H,o),[o]),A.flags|=2048,Yd(9,tf(),Kg.bind(null,A,H,y,u),null),y},useId:function(){var o=xr(),u=zn.identifierPrefix;if(wi){var y=Co,A=il;y=(A&~(1<<32-Nt(A)-1)).toString(32)+y,u=""+u+"R"+y,y=ps++,0<y&&(u+="H"+y.toString(32)),u+=""}else y=kl++,u=""+u+"r"+y.toString(32)+"";return o.memoizedState=u},useHostTransitionStatus:Am,useFormState:i0,useActionState:i0,useOptimistic:function(o){var u=xr();u.memoizedState=u.baseState=o;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=y,u=hp.bind(null,Wn,!0,y),y.dispatch=u,[o,u]},useMemoCache:vm,useCacheRefresh:function(){return xr().memoizedState=Jv.bind(null,Wn)}},mp={readContext:Xa,use:ef,useCallback:up,useContext:Xa,useEffect:lp,useImperativeHandle:Mm,useInsertionEffect:cp,useLayoutEffect:nf,useMemo:Tm,useReducer:Gr,useRef:Em,useState:function(){return Gr(Hr)},useDebugValue:af,useDeferredValue:function(o,u){var y=as();return l0(y,Zi.memoizedState,o,u)},useTransition:function(){var o=Gr(Hr)[0],u=as().memoizedState;return[typeof o=="boolean"?o:ll(o),u]},useSyncExternalStore:Wg,useId:f0,useHostTransitionStatus:Am,useFormState:a0,useActionState:a0,useOptimistic:function(o,u){var y=as();return Jg(y,Zi,o,u)},useMemoCache:vm,useCacheRefresh:p0},v0={readContext:Xa,use:ef,useCallback:up,useContext:Xa,useEffect:lp,useImperativeHandle:Mm,useInsertionEffect:cp,useLayoutEffect:nf,useMemo:Tm,useReducer:xm,useRef:Em,useState:function(){return xm(Hr)},useDebugValue:af,useDeferredValue:function(o,u){var y=as();return Zi===null?dp(y,o,u):l0(y,Zi.memoizedState,o,u)},useTransition:function(){var o=xm(Hr)[0],u=as().memoizedState;return[typeof o=="boolean"?o:ll(o),u]},useSyncExternalStore:Wg,useId:f0,useHostTransitionStatus:Am,useFormState:o0,useActionState:o0,useOptimistic:function(o,u){var y=as();return Zi!==null?Jg(y,Zi,o,u):(y.baseState=o,[o,y.queue.dispatch])},useMemoCache:vm,useCacheRefresh:p0},Bu=null,br=0;function Kd(o){var u=br;return br+=1,Bu===null&&(Bu=[]),Hd(Bu,o,u)}function ru(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function of(o,u){throw u.$$typeof===x?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function Nm(o){var u=o._init;return u(o._payload)}function Rm(o){function u(Ze,Fe){if(o){var et=Ze.deletions;et===null?(Ze.deletions=[Fe],Ze.flags|=16):et.push(Fe)}}function y(Ze,Fe){if(!o)return null;for(;Fe!==null;)u(Ze,Fe),Fe=Fe.sibling;return null}function A(Ze){for(var Fe=new Map;Ze!==null;)Ze.key!==null?Fe.set(Ze.key,Ze):Fe.set(Ze.index,Ze),Ze=Ze.sibling;return Fe}function L(Ze,Fe){return Ze=qa(Ze,Fe),Ze.index=0,Ze.sibling=null,Ze}function H(Ze,Fe,et){return Ze.index=et,o?(et=Ze.alternate,et!==null?(et=et.index,et<Fe?(Ze.flags|=67108866,Fe):et):(Ze.flags|=67108866,Fe)):(Ze.flags|=1048576,Fe)}function re(Ze){return o&&Ze.alternate===null&&(Ze.flags|=67108866),Ze}function me(Ze,Fe,et,Tt){return Fe===null||Fe.tag!==6?(Fe=Bd(et,Ze.mode,Tt),Fe.return=Ze,Fe):(Fe=L(Fe,et),Fe.return=Ze,Fe)}function Oe(Ze,Fe,et,Tt){var rn=et.type;return rn===S?St(Ze,Fe,et.props.children,Tt,et.key):Fe!==null&&(Fe.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===j&&Nm(rn)===Fe.type)?(Fe=L(Fe,et.props),ru(Fe,et),Fe.return=Ze,Fe):(Fe=ns(et.type,et.key,et.props,null,Ze.mode,Tt),ru(Fe,et),Fe.return=Ze,Fe)}function nt(Ze,Fe,et,Tt){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==et.containerInfo||Fe.stateNode.implementation!==et.implementation?(Fe=Fd(et,Ze.mode,Tt),Fe.return=Ze,Fe):(Fe=L(Fe,et.children||[]),Fe.return=Ze,Fe)}function St(Ze,Fe,et,Tt,rn){return Fe===null||Fe.tag!==7?(Fe=Ll(et,Ze.mode,Tt,rn),Fe.return=Ze,Fe):(Fe=L(Fe,et),Fe.return=Ze,Fe)}function Ct(Ze,Fe,et){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Fe=Bd(""+Fe,Ze.mode,et),Fe.return=Ze,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case b:return et=ns(Fe.type,Fe.key,Fe.props,null,Ze.mode,et),ru(et,Fe),et.return=Ze,et;case _:return Fe=Fd(Fe,Ze.mode,et),Fe.return=Ze,Fe;case j:var Tt=Fe._init;return Fe=Tt(Fe._payload),Ct(Ze,Fe,et)}if(oe(Fe)||Q(Fe))return Fe=Ll(Fe,Ze.mode,et,null),Fe.return=Ze,Fe;if(typeof Fe.then=="function")return Ct(Ze,Kd(Fe),et);if(Fe.$$typeof===C)return Ct(Ze,Xh(Ze,Fe),et);of(Ze,Fe)}return null}function rt(Ze,Fe,et,Tt){var rn=Fe!==null?Fe.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return rn!==null?null:me(Ze,Fe,""+et,Tt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case b:return et.key===rn?Oe(Ze,Fe,et,Tt):null;case _:return et.key===rn?nt(Ze,Fe,et,Tt):null;case j:return rn=et._init,et=rn(et._payload),rt(Ze,Fe,et,Tt)}if(oe(et)||Q(et))return rn!==null?null:St(Ze,Fe,et,Tt,null);if(typeof et.then=="function")return rt(Ze,Fe,Kd(et),Tt);if(et.$$typeof===C)return rt(Ze,Fe,Xh(Ze,et),Tt);of(Ze,et)}return null}function ot(Ze,Fe,et,Tt,rn){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return Ze=Ze.get(et)||null,me(Fe,Ze,""+Tt,rn);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case b:return Ze=Ze.get(Tt.key===null?et:Tt.key)||null,Oe(Fe,Ze,Tt,rn);case _:return Ze=Ze.get(Tt.key===null?et:Tt.key)||null,nt(Fe,Ze,Tt,rn);case j:var Ti=Tt._init;return Tt=Ti(Tt._payload),ot(Ze,Fe,et,Tt,rn)}if(oe(Tt)||Q(Tt))return Ze=Ze.get(et)||null,St(Fe,Ze,Tt,rn,null);if(typeof Tt.then=="function")return ot(Ze,Fe,et,Kd(Tt),rn);if(Tt.$$typeof===C)return ot(Ze,Fe,et,Xh(Fe,Tt),rn);of(Fe,Tt)}return null}function Hn(Ze,Fe,et,Tt){for(var rn=null,Ti=null,_n=Fe,Un=Fe=0,Zr=null;_n!==null&&Un<et.length;Un++){_n.index>Un?(Zr=_n,_n=null):Zr=_n.sibling;var oa=rt(Ze,_n,et[Un],Tt);if(oa===null){_n===null&&(_n=Zr);break}o&&_n&&oa.alternate===null&&u(Ze,_n),Fe=H(oa,Fe,Un),Ti===null?rn=oa:Ti.sibling=oa,Ti=oa,_n=Zr}if(Un===et.length)return y(Ze,_n),wi&&Lr(Ze,Un),rn;if(_n===null){for(;Un<et.length;Un++)_n=Ct(Ze,et[Un],Tt),_n!==null&&(Fe=H(_n,Fe,Un),Ti===null?rn=_n:Ti.sibling=_n,Ti=_n);return wi&&Lr(Ze,Un),rn}for(_n=A(_n);Un<et.length;Un++)Zr=ot(_n,Ze,Un,et[Un],Tt),Zr!==null&&(o&&Zr.alternate!==null&&_n.delete(Zr.key===null?Un:Zr.key),Fe=H(Zr,Fe,Un),Ti===null?rn=Zr:Ti.sibling=Zr,Ti=Zr);return o&&_n.forEach(function(Sp){return u(Ze,Sp)}),wi&&Lr(Ze,Un),rn}function Nn(Ze,Fe,et,Tt){if(et==null)throw Error(i(151));for(var rn=null,Ti=null,_n=Fe,Un=Fe=0,Zr=null,oa=et.next();_n!==null&&!oa.done;Un++,oa=et.next()){_n.index>Un?(Zr=_n,_n=null):Zr=_n.sibling;var Sp=rt(Ze,_n,oa.value,Tt);if(Sp===null){_n===null&&(_n=Zr);break}o&&_n&&Sp.alternate===null&&u(Ze,_n),Fe=H(Sp,Fe,Un),Ti===null?rn=Sp:Ti.sibling=Sp,Ti=Sp,_n=Zr}if(oa.done)return y(Ze,_n),wi&&Lr(Ze,Un),rn;if(_n===null){for(;!oa.done;Un++,oa=et.next())oa=Ct(Ze,oa.value,Tt),oa!==null&&(Fe=H(oa,Fe,Un),Ti===null?rn=oa:Ti.sibling=oa,Ti=oa);return wi&&Lr(Ze,Un),rn}for(_n=A(_n);!oa.done;Un++,oa=et.next())oa=ot(_n,Ze,Un,oa.value,Tt),oa!==null&&(o&&oa.alternate!==null&&_n.delete(oa.key===null?Un:oa.key),Fe=H(oa,Fe,Un),Ti===null?rn=oa:Ti.sibling=oa,Ti=oa);return o&&_n.forEach(function(Rz){return u(Ze,Rz)}),wi&&Lr(Ze,Un),rn}function ja(Ze,Fe,et,Tt){if(typeof et=="object"&&et!==null&&et.type===S&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case b:e:{for(var rn=et.key;Fe!==null;){if(Fe.key===rn){if(rn=et.type,rn===S){if(Fe.tag===7){y(Ze,Fe.sibling),Tt=L(Fe,et.props.children),Tt.return=Ze,Ze=Tt;break e}}else if(Fe.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===j&&Nm(rn)===Fe.type){y(Ze,Fe.sibling),Tt=L(Fe,et.props),ru(Tt,et),Tt.return=Ze,Ze=Tt;break e}y(Ze,Fe);break}else u(Ze,Fe);Fe=Fe.sibling}et.type===S?(Tt=Ll(et.props.children,Ze.mode,Tt,et.key),Tt.return=Ze,Ze=Tt):(Tt=ns(et.type,et.key,et.props,null,Ze.mode,Tt),ru(Tt,et),Tt.return=Ze,Ze=Tt)}return re(Ze);case _:e:{for(rn=et.key;Fe!==null;){if(Fe.key===rn)if(Fe.tag===4&&Fe.stateNode.containerInfo===et.containerInfo&&Fe.stateNode.implementation===et.implementation){y(Ze,Fe.sibling),Tt=L(Fe,et.children||[]),Tt.return=Ze,Ze=Tt;break e}else{y(Ze,Fe);break}else u(Ze,Fe);Fe=Fe.sibling}Tt=Fd(et,Ze.mode,Tt),Tt.return=Ze,Ze=Tt}return re(Ze);case j:return rn=et._init,et=rn(et._payload),ja(Ze,Fe,et,Tt)}if(oe(et))return Hn(Ze,Fe,et,Tt);if(Q(et)){if(rn=Q(et),typeof rn!="function")throw Error(i(150));return et=rn.call(et),Nn(Ze,Fe,et,Tt)}if(typeof et.then=="function")return ja(Ze,Fe,Kd(et),Tt);if(et.$$typeof===C)return ja(Ze,Fe,Xh(Ze,et),Tt);of(Ze,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,Fe!==null&&Fe.tag===6?(y(Ze,Fe.sibling),Tt=L(Fe,et),Tt.return=Ze,Ze=Tt):(y(Ze,Fe),Tt=Bd(et,Ze.mode,Tt),Tt.return=Ze,Ze=Tt),re(Ze)):y(Ze,Fe)}return function(Ze,Fe,et,Tt){try{br=0;var rn=ja(Ze,Fe,et,Tt);return Bu=null,rn}catch(_n){if(_n===zu||_n===kr)throw _n;var Ti=gr(29,_n,null,Ze.mode);return Ti.lanes=Tt,Ti.return=Ze,Ti}finally{}}}var Fu=Rm(!0),Dm=Rm(!1),aa=ne(null),cl=null;function ou(o){var u=o.alternate;de(ii,ii.current&1),de(aa,o),cl===null&&(u===null||Vd.current!==null||u.memoizedState!==null)&&(cl=o)}function y0(o){if(o.tag===22){if(de(ii,ii.current),de(aa,o),cl===null){var u=o.alternate;u!==null&&u.memoizedState!==null&&(cl=o)}}else Rc()}function Rc(){de(ii,ii.current),de(aa,aa.current)}function Gl(o){ue(aa),cl===o&&(cl=null),ue(ii)}var ii=ne(0);function Vl(o){for(var u=o;u!==null;){if(u.tag===13){var y=u.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||DE(y)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function lu(o,u,y,A){u=o.memoizedState,y=y(A,u),y=y==null?u:g({},u,y),o.memoizedState=y,o.lanes===0&&(o.updateQueue.baseState=y)}var tr={enqueueSetState:function(o,u,y){o=o._reactInternals;var A=Ki(),L=Oo(A);L.payload=u,y!=null&&(L.callback=y),u=$s(o,L,A),u!==null&&(Ka(u,o,A),Tc(u,o,A))},enqueueReplaceState:function(o,u,y){o=o._reactInternals;var A=Ki(),L=Oo(A);L.tag=1,L.payload=u,y!=null&&(L.callback=y),u=$s(o,L,A),u!==null&&(Ka(u,o,A),Tc(u,o,A))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var y=Ki(),A=Oo(y);A.tag=2,u!=null&&(A.callback=u),u=$s(o,A,y),u!==null&&(Ka(u,o,y),Tc(u,o,y))}};function Om(o,u,y,A,L,H,re){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(A,H,re):u.prototype&&u.prototype.isPureReactComponent?!Mo(y,A)||!Mo(L,H):!0}function ku(o,u,y,A){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(y,A),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(y,A),u.state!==o&&tr.enqueueReplaceState(u,u.state,null)}function Po(o,u){var y=u;if("ref"in u){y={};for(var A in u)A!=="ref"&&(y[A]=u[A])}if(o=o.defaultProps){y===u&&(y=g({},y));for(var L in o)y[L]===void 0&&(y[L]=o[L])}return y}var Uo=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function ql(o){Uo(o)}function nr(o){console.error(o)}function x0(o){Uo(o)}function gp(o,u){try{var y=o.onUncaughtError;y(u.value,{componentStack:u.stack})}catch(A){setTimeout(function(){throw A})}}function _r(o,u,y){try{var A=o.onCaughtError;A(y.value,{componentStack:y.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function Hu(o,u,y){return y=Oo(y),y.tag=3,y.payload={element:null},y.callback=function(){gp(o,u)},y}function lf(o){return o=Oo(o),o.tag=3,o}function Zd(o,u,y,A){var L=y.type.getDerivedStateFromError;if(typeof L=="function"){var H=A.value;o.payload=function(){return L(H)},o.callback=function(){_r(u,y,A)}}var re=y.stateNode;re!==null&&typeof re.componentDidCatch=="function"&&(o.callback=function(){_r(u,y,A),typeof L!="function"&&(go===null?go=new Set([this]):go.add(this));var me=A.stack;this.componentDidCatch(A.value,{componentStack:me!==null?me:""})})}function ey(o,u,y,A,L){if(y.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(u=y.alternate,u!==null&&Ir(u,y,L,!0),y=aa.current,y!==null){switch(y.tag){case 13:return cl===null?p():y.alternate===null&&Jn===0&&(Jn=3),y.flags&=-257,y.flags|=65536,y.lanes=L,A===Fl?y.flags|=16384:(u=y.updateQueue,u===null?y.updateQueue=new Set([A]):u.add(A),Ce(o,A,L)),!1;case 22:return y.flags|=65536,A===Fl?y.flags|=16384:(u=y.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([A])},y.updateQueue=u):(y=u.retryQueue,y===null?u.retryQueue=new Set([A]):y.add(A)),Ce(o,A,L)),!1}throw Error(i(435,y.tag))}return Ce(o,A,L),p(),!1}if(wi)return u=aa.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=L,A!==$f&&(o=Error(i(422),{cause:A}),au(za(o,y)))):(A!==$f&&(u=Error(i(423),{cause:A}),au(za(u,y))),o=o.current.alternate,o.flags|=65536,L&=-L,o.lanes|=L,A=za(A,y),L=Hu(o.stateNode,A,L),Gd(o,L),Jn!==4&&(Jn=2)),!1;var H=Error(i(520),{cause:A});if(H=za(H,y),Di===null?Di=[H]:Di.push(H),Jn!==4&&(Jn=2),u===null)return!0;A=za(A,y),y=u;do{switch(y.tag){case 3:return y.flags|=65536,o=L&-L,y.lanes|=o,o=Hu(y.stateNode,A,o),Gd(y,o),!1;case 1:if(u=y.type,H=y.stateNode,(y.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(go===null||!go.has(H))))return y.flags|=65536,L&=-L,y.lanes|=L,L=lf(L),Zd(L,o,y,A),Gd(y,L),!1}y=y.return}while(y!==null);return!1}var b0=Error(i(461)),sa=!1;function Wa(o,u,y,A){u.child=o===null?Dm(u,null,y,A):Fu(u,o.child,y,A)}function Vr(o,u,y,A,L){y=y.render;var H=u.ref;if("ref"in A){var re={};for(var me in A)me!=="ref"&&(re[me]=A[me])}else re=A;return al(u),A=is(o,u,y,re,H,L),me=ol(),o!==null&&!sa?(sp(o,u,L),Mi(o,u,L)):(wi&&me&&Qf(u),u.flags|=1,Wa(o,u,A,L),u.child)}function ir(o,u,y,A,L){if(o===null){var H=y.type;return typeof H=="function"&&!nu(H)&&H.defaultProps===void 0&&y.compare===null?(u.tag=15,u.type=H,jm(o,u,H,A,L)):(o=ns(y.type,null,A,u,u.mode,L),o.ref=u.ref,o.return=u,u.child=o)}if(H=o.child,!Oc(o,L)){var re=H.memoizedProps;if(y=y.compare,y=y!==null?y:Mo,y(re,A)&&o.ref===u.ref)return Mi(o,u,L)}return u.flags|=1,o=qa(H,A),o.ref=u.ref,o.return=u,u.child=o}function jm(o,u,y,A,L){if(o!==null){var H=o.memoizedProps;if(Mo(H,A)&&o.ref===u.ref)if(sa=!1,u.pendingProps=A=H,Oc(o,L))(o.flags&131072)!==0&&(sa=!0);else return u.lanes=o.lanes,Mi(o,u,L)}return As(o,u,y,A,L)}function Gu(o,u,y){var A=u.pendingProps,L=A.children,H=o!==null?o.memoizedState:null;if(A.mode==="hidden"){if((u.flags&128)!==0){if(A=H!==null?H.baseLanes|y:y,o!==null){for(L=u.child=o.child,H=0;L!==null;)H=H|L.lanes|L.childLanes,L=L.sibling;u.childLanes=H&~A}else u.childLanes=0,u.child=null;return Vu(o,u,A,y)}if((y&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Wh(u,H!==null?H.cachePool:null),H!==null?qd(u,H):mm(),y0(u);else return u.lanes=u.childLanes=536870912,Vu(o,u,H!==null?H.baseLanes|y:y,y)}else H!==null?(Wh(u,H.cachePool),qd(u,H),Rc(),u.memoizedState=null):(o!==null&&Wh(u,null),mm(),Rc());return Wa(o,u,L,y),u.child}function Vu(o,u,y,A){var L=kn();return L=L===null?null:{parent:Za._currentValue,pool:L},u.memoizedState={baseLanes:y,cachePool:L},o!==null&&Wh(u,null),mm(),y0(u),o!==null&&Ir(o,u,A,!0),null}function ul(o,u){var y=u.ref;if(y===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(i(284));(o===null||o.ref!==y)&&(u.flags|=4194816)}}function As(o,u,y,A,L){return al(u),y=is(o,u,y,A,void 0,L),A=ol(),o!==null&&!sa?(sp(o,u,L),Mi(o,u,L)):(wi&&A&&Qf(u),u.flags|=1,Wa(o,u,y,L),u.child)}function Sr(o,u,y,A,L,H){return al(u),u.updateQueue=null,y=Yg(u,A,y,L),Xg(o),A=ol(),o!==null&&!sa?(sp(o,u,H),Mi(o,u,H)):(wi&&A&&Qf(u),u.flags|=1,Wa(o,u,y,H),u.child)}function qr(o,u,y,A,L){if(al(u),u.stateNode===null){var H=_c,re=y.contextType;typeof re=="object"&&re!==null&&(H=Xa(re)),H=new y(A,H),u.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=tr,u.stateNode=H,H._reactInternals=u,H=u.stateNode,H.props=A,H.state=u.memoizedState,H.refs={},Kh(u),re=y.contextType,H.context=typeof re=="object"&&re!==null?Xa(re):_c,H.state=u.memoizedState,re=y.getDerivedStateFromProps,typeof re=="function"&&(lu(u,y,re,A),H.state=u.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(re=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),re!==H.state&&tr.enqueueReplaceState(H,H.state,null),Cc(u,A,H,L),Zh(),H.state=u.memoizedState),typeof H.componentDidMount=="function"&&(u.flags|=4194308),A=!0}else if(o===null){H=u.stateNode;var me=u.memoizedProps,Oe=Po(y,me);H.props=Oe;var nt=H.context,St=y.contextType;re=_c,typeof St=="object"&&St!==null&&(re=Xa(St));var Ct=y.getDerivedStateFromProps;St=typeof Ct=="function"||typeof H.getSnapshotBeforeUpdate=="function",me=u.pendingProps!==me,St||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(me||nt!==re)&&ku(u,H,A,re),sl=!1;var rt=u.memoizedState;H.state=rt,Cc(u,A,H,L),Zh(),nt=u.memoizedState,me||rt!==nt||sl?(typeof Ct=="function"&&(lu(u,y,Ct,A),nt=u.memoizedState),(Oe=sl||Om(u,y,Oe,A,rt,nt,re))?(St||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(u.flags|=4194308)):(typeof H.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=A,u.memoizedState=nt),H.props=A,H.state=nt,H.context=re,A=Oe):(typeof H.componentDidMount=="function"&&(u.flags|=4194308),A=!1)}else{H=u.stateNode,Mn(o,u),re=u.memoizedProps,St=Po(y,re),H.props=St,Ct=u.pendingProps,rt=H.context,nt=y.contextType,Oe=_c,typeof nt=="object"&&nt!==null&&(Oe=Xa(nt)),me=y.getDerivedStateFromProps,(nt=typeof me=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(re!==Ct||rt!==Oe)&&ku(u,H,A,Oe),sl=!1,rt=u.memoizedState,H.state=rt,Cc(u,A,H,L),Zh();var ot=u.memoizedState;re!==Ct||rt!==ot||sl||o!==null&&o.dependencies!==null&&qh(o.dependencies)?(typeof me=="function"&&(lu(u,y,me,A),ot=u.memoizedState),(St=sl||Om(u,y,St,A,rt,ot,Oe)||o!==null&&o.dependencies!==null&&qh(o.dependencies))?(nt||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(A,ot,Oe),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(A,ot,Oe)),typeof H.componentDidUpdate=="function"&&(u.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof H.componentDidUpdate!="function"||re===o.memoizedProps&&rt===o.memoizedState||(u.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||re===o.memoizedProps&&rt===o.memoizedState||(u.flags|=1024),u.memoizedProps=A,u.memoizedState=ot),H.props=A,H.state=ot,H.context=Oe,A=St):(typeof H.componentDidUpdate!="function"||re===o.memoizedProps&&rt===o.memoizedState||(u.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||re===o.memoizedProps&&rt===o.memoizedState||(u.flags|=1024),A=!1)}return H=A,ul(o,u),A=(u.flags&128)!==0,H||A?(H=u.stateNode,y=A&&typeof y.getDerivedStateFromError!="function"?null:H.render(),u.flags|=1,o!==null&&A?(u.child=Fu(u,o.child,null,L),u.child=Fu(u,null,y,L)):Wa(o,u,y,L),u.memoizedState=H.state,o=u.child):o=Mi(o,u,L),o}function Xl(o,u,y,A){return ju(),u.flags|=256,Wa(o,u,y,A),u.child}var Lo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ar(o){return{baseLanes:o,cachePool:Js()}}function Da(o,u,y){return o=o!==null?o.childLanes&~y:0,u&&(o|=Is),o}function Dc(o,u,y){var A=u.pendingProps,L=!1,H=(u.flags&128)!==0,re;if((re=H)||(re=o!==null&&o.memoizedState===null?!1:(ii.current&2)!==0),re&&(L=!0,u.flags&=-129),re=(u.flags&32)!==0,u.flags&=-33,o===null){if(wi){if(L?ou(u):Rc(),wi){var me=ya,Oe;if(Oe=me){e:{for(Oe=me,me=so;Oe.nodeType!==8;){if(!me){me=null;break e}if(Oe=ed(Oe.nextSibling),Oe===null){me=null;break e}}me=Oe}me!==null?(u.memoizedState={dehydrated:me,treeContext:yr!==null?{id:il,overflow:Co}:null,retryLane:536870912,hydrationErrors:null},Oe=gr(18,null,null,0),Oe.stateNode=me,Oe.return=u,u.child=Oe,Qs=u,ya=null,Oe=!0):Oe=!1}Oe||Sc(u)}if(me=u.memoizedState,me!==null&&(me=me.dehydrated,me!==null))return DE(me)?u.lanes=32:u.lanes=536870912,null;Gl(u)}return me=A.children,A=A.fallback,L?(Rc(),L=u.mode,me=Ns({mode:"hidden",children:me},L),A=Ll(A,L,y,null),me.return=u,A.return=u,me.sibling=A,u.child=me,L=u.child,L.memoizedState=ar(y),L.childLanes=Da(o,re,y),u.memoizedState=Lo,A):(ou(u),oo(u,me))}if(Oe=o.memoizedState,Oe!==null&&(me=Oe.dehydrated,me!==null)){if(H)u.flags&256?(ou(u),u.flags&=-257,u=ra(o,u,y)):u.memoizedState!==null?(Rc(),u.child=o.child,u.flags|=128,u=null):(Rc(),L=A.fallback,me=u.mode,A=Ns({mode:"visible",children:A.children},me),L=Ll(L,me,y,null),L.flags|=2,A.return=u,L.return=u,A.sibling=L,u.child=A,Fu(u,o.child,null,y),A=u.child,A.memoizedState=ar(y),A.childLanes=Da(o,re,y),u.memoizedState=Lo,u=L);else if(ou(u),DE(me)){if(re=me.nextSibling&&me.nextSibling.dataset,re)var nt=re.dgst;re=nt,A=Error(i(419)),A.stack="",A.digest=re,au({value:A,source:null,stack:null}),u=ra(o,u,y)}else if(sa||Ir(o,u,y,!1),re=(y&o.childLanes)!==0,sa||re){if(re=zn,re!==null&&(A=y&-y,A=(A&42)!==0?1:$t(A),A=(A&(re.suspendedLanes|y))!==0?0:A,A!==0&&A!==Oe.retryLane))throw Oe.retryLane=A,io(o,A),Ka(re,o,A),b0;me.data==="$?"||p(),u=ra(o,u,y)}else me.data==="$?"?(u.flags|=192,u.child=o.child,u=null):(o=Oe.treeContext,ya=ed(me.nextSibling),Qs=u,wi=!0,Ao=null,so=!1,o!==null&&(Ts[ao++]=il,Ts[ao++]=Co,Ts[ao++]=yr,il=o.id,Co=o.overflow,yr=u),u=oo(u,A.children),u.flags|=4096);return u}return L?(Rc(),L=A.fallback,me=u.mode,Oe=o.child,nt=Oe.sibling,A=qa(Oe,{mode:"hidden",children:A.children}),A.subtreeFlags=Oe.subtreeFlags&65011712,nt!==null?L=qa(nt,L):(L=Ll(L,me,y,null),L.flags|=2),L.return=u,A.return=u,A.sibling=L,u.child=A,A=L,L=u.child,me=o.child.memoizedState,me===null?me=ar(y):(Oe=me.cachePool,Oe!==null?(nt=Za._currentValue,Oe=Oe.parent!==nt?{parent:nt,pool:nt}:Oe):Oe=Js(),me={baseLanes:me.baseLanes|y,cachePool:Oe}),L.memoizedState=me,L.childLanes=Da(o,re,y),u.memoizedState=Lo,A):(ou(u),y=o.child,o=y.sibling,y=qa(y,{mode:"visible",children:A.children}),y.return=u,y.sibling=null,o!==null&&(re=u.deletions,re===null?(u.deletions=[o],u.flags|=16):re.push(o)),u.child=y,u.memoizedState=null,y)}function oo(o,u){return u=Ns({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Ns(o,u){return o=gr(22,o,null,u),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function ra(o,u,y){return Fu(u,o.child,null,y),o=oo(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function ka(o,u,y){o.lanes|=u;var A=o.alternate;A!==null&&(A.lanes|=u),tp(o.return,u,y)}function Kn(o,u,y,A,L){var H=o.memoizedState;H===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:A,tail:y,tailMode:L}:(H.isBackwards=u,H.rendering=null,H.renderingStartTime=0,H.last=A,H.tail=y,H.tailMode=L)}function ss(o,u,y){var A=u.pendingProps,L=A.revealOrder,H=A.tail;if(Wa(o,u,A.children,y),A=ii.current,(A&2)!==0)A=A&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ka(o,y,u);else if(o.tag===19)ka(o,y,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}A&=1}switch(de(ii,A),L){case"forwards":for(y=u.child,L=null;y!==null;)o=y.alternate,o!==null&&Vl(o)===null&&(L=y),y=y.sibling;y=L,y===null?(L=u.child,u.child=null):(L=y.sibling,y.sibling=null),Kn(u,!1,L,y,H);break;case"backwards":for(y=null,L=u.child,u.child=null;L!==null;){if(o=L.alternate,o!==null&&Vl(o)===null){u.child=L;break}o=L.sibling,L.sibling=y,y=L,L=o}Kn(u,!0,y,null,H);break;case"together":Kn(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Mi(o,u,y){if(o!==null&&(u.dependencies=o.dependencies),Wi|=u.lanes,(y&u.childLanes)===0)if(o!==null){if(Ir(o,u,y,!1),(y&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,y=qa(o,o.pendingProps),u.child=y,y.return=u;o.sibling!==null;)o=o.sibling,y=y.sibling=qa(o,o.pendingProps),y.return=u;y.sibling=null}return u.child}function Oc(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&qh(o)))}function ms(o,u,y){switch(u.tag){case 3:_e(u,u.stateNode.containerInfo),No(u,Za,o.memoizedState.cache),ju();break;case 27:case 5:Ge(u);break;case 4:_e(u,u.stateNode.containerInfo);break;case 10:No(u,u.type,u.memoizedProps.value);break;case 13:var A=u.memoizedState;if(A!==null)return A.dehydrated!==null?(ou(u),u.flags|=128,null):(y&u.child.childLanes)!==0?Dc(o,u,y):(ou(u),o=Mi(o,u,y),o!==null?o.sibling:null);ou(u);break;case 19:var L=(o.flags&128)!==0;if(A=(y&u.childLanes)!==0,A||(Ir(o,u,y,!1),A=(y&u.childLanes)!==0),L){if(A)return ss(o,u,y);u.flags|=128}if(L=u.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),de(ii,ii.current),A)break;return null;case 22:case 23:return u.lanes=0,Gu(o,u,y);case 24:No(u,Za,o.memoizedState.cache)}return Mi(o,u,y)}function Yl(o,u,y){if(o!==null)if(o.memoizedProps!==u.pendingProps)sa=!0;else{if(!Oc(o,y)&&(u.flags&128)===0)return sa=!1,ms(o,u,y);sa=(o.flags&131072)!==0}else sa=!1,wi&&(u.flags&1048576)!==0&&Vh(u,Ou,u.index);switch(u.lanes=0,u.tag){case 16:e:{o=u.pendingProps;var A=u.elementType,L=A._init;if(A=L(A._payload),u.type=A,typeof A=="function")nu(A)?(o=Po(A,o),u.tag=1,u=qr(null,u,A,o,y)):(u.tag=0,u=As(null,u,A,o,y));else{if(A!=null){if(L=A.$$typeof,L===D){u.tag=11,u=Vr(null,u,A,o,y);break e}else if(L===F){u.tag=14,u=ir(null,u,A,o,y);break e}}throw u=te(A)||A,Error(i(306,u,""))}}return u;case 0:return As(o,u,u.type,u.pendingProps,y);case 1:return A=u.type,L=Po(A,u.pendingProps),qr(o,u,A,L,y);case 3:e:{if(_e(u,u.stateNode.containerInfo),o===null)throw Error(i(387));A=u.pendingProps;var H=u.memoizedState;L=H.element,Mn(o,u),Cc(u,A,null,y);var re=u.memoizedState;if(A=re.cache,No(u,Za,A),A!==H.cache&&Ci(u,[Za],y,!0),Zh(),A=re.element,H.isDehydrated)if(H={element:A,isDehydrated:!1,cache:re.cache},u.updateQueue.baseState=H,u.memoizedState=H,u.flags&256){u=Xl(o,u,A,y);break e}else if(A!==L){L=za(Error(i(424)),u),au(L),u=Xl(o,u,A,y);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(ya=ed(o.firstChild),Qs=u,wi=!0,Ao=null,so=!0,y=Dm(u,null,A,y),u.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(ju(),A===L){u=Mi(o,u,y);break e}Wa(o,u,A,y)}u=u.child}return u;case 26:return ul(o,u),o===null?(y=VA(u.type,null,u.pendingProps,null))?u.memoizedState=y:wi||(y=u.type,o=u.pendingProps,A=X1(ye.current).createElement(y),A[la]=u,A[Va]=o,vo(A,y,o),at(A),u.stateNode=A):u.memoizedState=VA(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Ge(u),o===null&&wi&&(A=u.stateNode=kA(u.type,u.pendingProps,ye.current),Qs=u,so=!0,L=ya,vp(u.type)?(OE=L,ya=ed(A.firstChild)):ya=L),Wa(o,u,u.pendingProps.children,y),ul(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&wi&&((L=A=ya)&&(A=sz(A,u.type,u.pendingProps,so),A!==null?(u.stateNode=A,Qs=u,ya=ed(A.firstChild),so=!1,L=!0):L=!1),L||Sc(u)),Ge(u),L=u.type,H=u.pendingProps,re=o!==null?o.memoizedProps:null,A=H.children,AE(L,H)?A=null:re!==null&&AE(L,re)&&(u.flags|=32),u.memoizedState!==null&&(L=is(o,u,Cs,null,null,y),oy._currentValue=L),ul(o,u),Wa(o,u,A,y),u.child;case 6:return o===null&&wi&&((o=y=ya)&&(y=rz(y,u.pendingProps,so),y!==null?(u.stateNode=y,Qs=u,ya=null,o=!0):o=!1),o||Sc(u)),null;case 13:return Dc(o,u,y);case 4:return _e(u,u.stateNode.containerInfo),A=u.pendingProps,o===null?u.child=Fu(u,null,A,y):Wa(o,u,A,y),u.child;case 11:return Vr(o,u,u.type,u.pendingProps,y);case 7:return Wa(o,u,u.pendingProps,y),u.child;case 8:return Wa(o,u,u.pendingProps.children,y),u.child;case 12:return Wa(o,u,u.pendingProps.children,y),u.child;case 10:return A=u.pendingProps,No(u,u.type,A.value),Wa(o,u,A.children,y),u.child;case 9:return L=u.type._context,A=u.pendingProps.children,al(u),L=Xa(L),A=A(L),u.flags|=1,Wa(o,u,A,y),u.child;case 14:return ir(o,u,u.type,u.pendingProps,y);case 15:return jm(o,u,u.type,u.pendingProps,y);case 19:return ss(o,u,y);case 31:return A=u.pendingProps,y=u.mode,A={mode:A.mode,children:A.children},o===null?(y=Ns(A,y),y.ref=u.ref,u.child=y,y.return=u,u=y):(y=qa(o.child,A),y.ref=u.ref,u.child=y,y.return=u,u=y),u;case 22:return Gu(o,u,y);case 24:return al(u),A=Xa(Za),o===null?(L=kn(),L===null&&(L=zn,H=Pu(),L.pooledCache=H,H.refCount++,H!==null&&(L.pooledCacheLanes|=y),L=H),u.memoizedState={parent:A,cache:L},Kh(u),No(u,Za,L)):((o.lanes&y)!==0&&(Mn(o,u),Cc(u,null,null,y),Zh()),L=o.memoizedState,H=u.memoizedState,L.parent!==A?(L={parent:A,cache:A},u.memoizedState=L,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=L),No(u,Za,A)):(A=H.cache,No(u,Za,A),A!==L.cache&&Ci(u,[Za],y,!0))),Wa(o,u,u.pendingProps.children,y),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function xa(o){o.flags|=4}function Ha(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!KA(u)){if(u=aa.current,u!==null&&((gn&4194048)===gn?cl!==null:(gn&62914560)!==gn&&(gn&536870912)===0||u!==cl))throw Do=Fl,pm;o.flags|=8192}}function ai(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?Qe():536870912,o.lanes|=u,Ri|=u)}function lo(o,u){if(!wi)switch(o.tailMode){case"hidden":u=o.tail;for(var y=null;u!==null;)u.alternate!==null&&(y=u),u=u.sibling;y===null?o.tail=null:y.sibling=null;break;case"collapsed":y=o.tail;for(var A=null;y!==null;)y.alternate!==null&&(A=y),y=y.sibling;A===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:A.sibling=null}}function bi(o){var u=o.alternate!==null&&o.alternate.child===o.child,y=0,A=0;if(u)for(var L=o.child;L!==null;)y|=L.lanes|L.childLanes,A|=L.subtreeFlags&65011712,A|=L.flags&65011712,L.return=o,L=L.sibling;else for(L=o.child;L!==null;)y|=L.lanes|L.childLanes,A|=L.subtreeFlags,A|=L.flags,L.return=o,L=L.sibling;return o.subtreeFlags|=A,o.childLanes=y,u}function cf(o,u,y){var A=u.pendingProps;switch(Jf(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bi(u),null;case 1:return bi(u),null;case 3:return y=u.stateNode,A=null,o!==null&&(A=o.memoizedState.cache),u.memoizedState.cache!==A&&(u.flags|=2048),Il(Za),Ke(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(zr(u)?xa(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Ii())),bi(u),null;case 26:return y=u.memoizedState,o===null?(xa(u),y!==null?(bi(u),Ha(u,y)):(bi(u),u.flags&=-16777217)):y?y!==o.memoizedState?(xa(u),bi(u),Ha(u,y)):(bi(u),u.flags&=-16777217):(o.memoizedProps!==A&&xa(u),bi(u),u.flags&=-16777217),null;case 27:st(u),y=ye.current;var L=u.type;if(o!==null&&u.stateNode!=null)o.memoizedProps!==A&&xa(u);else{if(!A){if(u.stateNode===null)throw Error(i(166));return bi(u),null}o=ie.current,zr(u)?dm(u):(o=kA(L,A,y),u.stateNode=o,xa(u))}return bi(u),null;case 5:if(st(u),y=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==A&&xa(u);else{if(!A){if(u.stateNode===null)throw Error(i(166));return bi(u),null}if(o=ie.current,zr(u))dm(u);else{switch(L=X1(ye.current),o){case 1:o=L.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:o=L.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":o=L.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":o=L.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":o=L.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof A.is=="string"?L.createElement("select",{is:A.is}):L.createElement("select"),A.multiple?o.multiple=!0:A.size&&(o.size=A.size);break;default:o=typeof A.is=="string"?L.createElement(y,{is:A.is}):L.createElement(y)}}o[la]=u,o[Va]=A;e:for(L=u.child;L!==null;){if(L.tag===5||L.tag===6)o.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===u)break e;for(;L.sibling===null;){if(L.return===null||L.return===u)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}u.stateNode=o;e:switch(vo(o,y,A),y){case"button":case"input":case"select":case"textarea":o=!!A.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&xa(u)}}return bi(u),u.flags&=-16777217,null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==A&&xa(u);else{if(typeof A!="string"&&u.stateNode===null)throw Error(i(166));if(o=ye.current,zr(u)){if(o=u.stateNode,y=u.memoizedProps,A=null,L=Qs,L!==null)switch(L.tag){case 27:case 5:A=L.memoizedProps}o[la]=u,o=!!(o.nodeValue===y||A!==null&&A.suppressHydrationWarning===!0||PA(o.nodeValue,y)),o||Sc(u)}else o=X1(o).createTextNode(A),o[la]=u,u.stateNode=o}return bi(u),null;case 13:if(A=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(L=zr(u),A!==null&&A.dehydrated!==null){if(o===null){if(!L)throw Error(i(318));if(L=u.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(i(317));L[la]=u}else ju(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;bi(u),L=!1}else L=Ii(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=L),L=!0;if(!L)return u.flags&256?(Gl(u),u):(Gl(u),null)}if(Gl(u),(u.flags&128)!==0)return u.lanes=y,u;if(y=A!==null,o=o!==null&&o.memoizedState!==null,y){A=u.child,L=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(L=A.alternate.memoizedState.cachePool.pool);var H=null;A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(H=A.memoizedState.cachePool.pool),H!==L&&(A.flags|=2048)}return y!==o&&y&&(u.child.flags|=8192),ai(u,u.updateQueue),bi(u),null;case 4:return Ke(),o===null&&EE(u.stateNode.containerInfo),bi(u),null;case 10:return Il(u.type),bi(u),null;case 19:if(ue(ii),L=u.memoizedState,L===null)return bi(u),null;if(A=(u.flags&128)!==0,H=L.rendering,H===null)if(A)lo(L,!1);else{if(Jn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(H=Vl(o),H!==null){for(u.flags|=128,lo(L,!1),o=H.updateQueue,u.updateQueue=o,ai(u,o),u.subtreeFlags=0,o=y,y=u.child;y!==null;)Gh(y,o),y=y.sibling;return de(ii,ii.current&1|2),u.child}o=o.sibling}L.tail!==null&&Le()>vs&&(u.flags|=128,A=!0,lo(L,!1),u.lanes=4194304)}else{if(!A)if(o=Vl(H),o!==null){if(u.flags|=128,A=!0,o=o.updateQueue,u.updateQueue=o,ai(u,o),lo(L,!0),L.tail===null&&L.tailMode==="hidden"&&!H.alternate&&!wi)return bi(u),null}else 2*Le()-L.renderingStartTime>vs&&y!==536870912&&(u.flags|=128,A=!0,lo(L,!1),u.lanes=4194304);L.isBackwards?(H.sibling=u.child,u.child=H):(o=L.last,o!==null?o.sibling=H:u.child=H,L.last=H)}return L.tail!==null?(u=L.tail,L.rendering=u,L.tail=u.sibling,L.renderingStartTime=Le(),u.sibling=null,o=ii.current,de(ii,A?o&1|2:o&1),u):(bi(u),null);case 22:case 23:return Gl(u),Jh(),A=u.memoizedState!==null,o!==null?o.memoizedState!==null!==A&&(u.flags|=8192):A&&(u.flags|=8192),A?(y&536870912)!==0&&(u.flags&128)===0&&(bi(u),u.subtreeFlags&6&&(u.flags|=8192)):bi(u),y=u.updateQueue,y!==null&&ai(u,y.retryQueue),y=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),A=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(A=u.memoizedState.cachePool.pool),A!==y&&(u.flags|=2048),o!==null&&ue(Fr),null;case 24:return y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Il(Za),bi(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function Rs(o,u){switch(Jf(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Il(Za),Ke(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return st(u),null;case 13:if(Gl(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));ju()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return ue(ii),null;case 4:return Ke(),null;case 10:return Il(u.type),null;case 22:case 23:return Gl(u),Jh(),o!==null&&ue(Fr),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Il(Za),null;case 25:return null;default:return null}}function jc(o,u){switch(Jf(u),u.tag){case 3:Il(Za),Ke();break;case 26:case 27:case 5:st(u);break;case 4:Ke();break;case 13:Gl(u);break;case 19:ue(ii);break;case 10:Il(u.type);break;case 22:case 23:Gl(u),Jh(),o!==null&&ue(Fr);break;case 24:Il(Za)}}function co(o,u){try{var y=u.updateQueue,A=y!==null?y.lastEffect:null;if(A!==null){var L=A.next;y=L;do{if((y.tag&o)===o){A=void 0;var H=y.create,re=y.inst;A=H(),re.destroy=A}y=y.next}while(y!==L)}}catch(me){pe(u,u.return,me)}}function Qa(o,u,y){try{var A=u.updateQueue,L=A!==null?A.lastEffect:null;if(L!==null){var H=L.next;A=H;do{if((A.tag&o)===o){var re=A.inst,me=re.destroy;if(me!==void 0){re.destroy=void 0,L=u;var Oe=y,nt=me;try{nt()}catch(St){pe(L,Oe,St)}}}A=A.next}while(A!==H)}}catch(St){pe(u,u.return,St)}}function qu(o){var u=o.updateQueue;if(u!==null){var y=o.stateNode;try{qg(u,y)}catch(A){pe(o,o.return,A)}}}function Pc(o,u,y){y.props=Po(o.type,o.memoizedProps),y.state=o.memoizedState;try{y.componentWillUnmount()}catch(A){pe(o,u,A)}}function Xu(o,u){try{var y=o.ref;if(y!==null){switch(o.tag){case 26:case 27:case 5:var A=o.stateNode;break;case 30:A=o.stateNode;break;default:A=o.stateNode}typeof y=="function"?o.refCleanup=y(A):y.current=A}}catch(L){pe(o,u,L)}}function Bi(o,u){var y=o.ref,A=o.refCleanup;if(y!==null)if(typeof A=="function")try{A()}catch(L){pe(o,u,L)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(L){pe(o,u,L)}else y.current=null}function Uc(o){var u=o.type,y=o.memoizedProps,A=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":y.autoFocus&&A.focus();break e;case"img":y.src?A.src=y.src:y.srcSet&&(A.srcset=y.srcSet)}}catch(L){pe(o,o.return,L)}}function Wl(o,u,y){try{var A=o.stateNode;ez(A,o.type,y,u),A[Va]=u}catch(L){pe(o,o.return,L)}}function Yu(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&vp(o.type)||o.tag===4}function dl(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Yu(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&vp(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Kl(o,u,y){var A=o.tag;if(A===5||A===6)o=o.stateNode,u?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(o,u):(u=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,u.appendChild(o),y=y._reactRootContainer,y!=null||u.onclick!==null||(u.onclick=q1));else if(A!==4&&(A===27&&vp(o.type)&&(y=o.stateNode,u=null),o=o.child,o!==null))for(Kl(o,u,y),o=o.sibling;o!==null;)Kl(o,u,y),o=o.sibling}function uo(o,u,y){var A=o.tag;if(A===5||A===6)o=o.stateNode,u?y.insertBefore(o,u):y.appendChild(o);else if(A!==4&&(A===27&&vp(o.type)&&(y=o.stateNode),o=o.child,o!==null))for(uo(o,u,y),o=o.sibling;o!==null;)uo(o,u,y),o=o.sibling}function zo(o){var u=o.stateNode,y=o.memoizedProps;try{for(var A=o.type,L=u.attributes;L.length;)u.removeAttributeNode(L[0]);vo(u,A,y),u[la]=o,u[Va]=y}catch(H){pe(o,o.return,H)}}var Io=!1,Fi=!1,hl=!1,Xr=typeof WeakSet=="function"?WeakSet:Set,Ai=null;function gs(o,u){if(o=o.containerInfo,TE=J1,o=Zf(o),mc(o)){if("selectionStart"in o)var y={start:o.selectionStart,end:o.selectionEnd};else e:{y=(y=o.ownerDocument)&&y.defaultView||window;var A=y.getSelection&&y.getSelection();if(A&&A.rangeCount!==0){y=A.anchorNode;var L=A.anchorOffset,H=A.focusNode;A=A.focusOffset;try{y.nodeType,H.nodeType}catch{y=null;break e}var re=0,me=-1,Oe=-1,nt=0,St=0,Ct=o,rt=null;t:for(;;){for(var ot;Ct!==y||L!==0&&Ct.nodeType!==3||(me=re+L),Ct!==H||A!==0&&Ct.nodeType!==3||(Oe=re+A),Ct.nodeType===3&&(re+=Ct.nodeValue.length),(ot=Ct.firstChild)!==null;)rt=Ct,Ct=ot;for(;;){if(Ct===o)break t;if(rt===y&&++nt===L&&(me=re),rt===H&&++St===A&&(Oe=re),(ot=Ct.nextSibling)!==null)break;Ct=rt,rt=Ct.parentNode}Ct=ot}y=me===-1||Oe===-1?null:{start:me,end:Oe}}else y=null}y=y||{start:0,end:0}}else y=null;for(CE={focusedElem:o,selectionRange:y},J1=!1,Ai=u;Ai!==null;)if(u=Ai,o=u.child,(u.subtreeFlags&1024)!==0&&o!==null)o.return=u,Ai=o;else for(;Ai!==null;){switch(u=Ai,H=u.alternate,o=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&H!==null){o=void 0,y=u,L=H.memoizedProps,H=H.memoizedState,A=y.stateNode;try{var Hn=Po(y.type,L,y.elementType===y.type);o=A.getSnapshotBeforeUpdate(Hn,H),A.__reactInternalSnapshotBeforeUpdate=o}catch(Nn){pe(y,y.return,Nn)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,y=o.nodeType,y===9)RE(o);else if(y===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":RE(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,Ai=o;break}Ai=u.return}}function ho(o,u,y){var A=y.flags;switch(y.tag){case 0:case 11:case 15:Qn(o,y),A&4&&co(5,y);break;case 1:if(Qn(o,y),A&4)if(o=y.stateNode,u===null)try{o.componentDidMount()}catch(re){pe(y,y.return,re)}else{var L=Po(y.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(L,u,o.__reactInternalSnapshotBeforeUpdate)}catch(re){pe(y,y.return,re)}}A&64&&qu(y),A&512&&Xu(y,y.return);break;case 3:if(Qn(o,y),A&64&&(o=y.updateQueue,o!==null)){if(u=null,y.child!==null)switch(y.child.tag){case 27:case 5:u=y.child.stateNode;break;case 1:u=y.child.stateNode}try{qg(o,u)}catch(re){pe(y,y.return,re)}}break;case 27:u===null&&A&4&&zo(y);case 26:case 5:Qn(o,y),u===null&&A&4&&Uc(y),A&512&&Xu(y,y.return);break;case 12:Qn(o,y);break;case 13:Qn(o,y),A&4&&fo(o,y),A&64&&(o=y.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(y=It.bind(null,y),oz(o,y))));break;case 22:if(A=y.memoizedState!==null||Io,!A){u=u!==null&&u.memoizedState!==null||Fi,L=Io;var H=Fi;Io=A,(Fi=u)&&!H?po(o,y,(y.subtreeFlags&8772)!==0):Qn(o,y),Io=L,Fi=H}break;case 30:break;default:Qn(o,y)}}function Zn(o){var u=o.alternate;u!==null&&(o.alternate=null,Zn(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Pi(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var mn=null,xi=!1;function Ls(o,u,y){for(y=y.child;y!==null;)Ds(o,u,y),y=y.sibling}function Ds(o,u,y){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(Ve,y)}catch{}switch(y.tag){case 26:Fi||Bi(y,u),Ls(o,u,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:Fi||Bi(y,u);var A=mn,L=xi;vp(y.type)&&(mn=y.stateNode,xi=!1),Ls(o,u,y),iy(y.stateNode),mn=A,xi=L;break;case 5:Fi||Bi(y,u);case 6:if(A=mn,L=xi,mn=null,Ls(o,u,y),mn=A,xi=L,mn!==null)if(xi)try{(mn.nodeType===9?mn.body:mn.nodeName==="HTML"?mn.ownerDocument.body:mn).removeChild(y.stateNode)}catch(H){pe(y,u,H)}else try{mn.removeChild(y.stateNode)}catch(H){pe(y,u,H)}break;case 18:mn!==null&&(xi?(o=mn,BA(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,y.stateNode),dy(o)):BA(mn,y.stateNode));break;case 4:A=mn,L=xi,mn=y.stateNode.containerInfo,xi=!0,Ls(o,u,y),mn=A,xi=L;break;case 0:case 11:case 14:case 15:Fi||Qa(2,y,u),Fi||Qa(4,y,u),Ls(o,u,y);break;case 1:Fi||(Bi(y,u),A=y.stateNode,typeof A.componentWillUnmount=="function"&&Pc(y,u,A)),Ls(o,u,y);break;case 21:Ls(o,u,y);break;case 22:Fi=(A=Fi)||y.memoizedState!==null,Ls(o,u,y),Fi=A;break;default:Ls(o,u,y)}}function fo(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{dy(o)}catch(y){pe(u,u.return,y)}}function Qd(o){switch(o.tag){case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new Xr),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new Xr),u;default:throw Error(i(435,o.tag))}}function Yr(o,u){var y=Qd(o);u.forEach(function(A){var L=Bt.bind(null,o,A);y.has(A)||(y.add(A),A.then(L,L))})}function rs(o,u){var y=u.deletions;if(y!==null)for(var A=0;A<y.length;A++){var L=y[A],H=o,re=u,me=re;e:for(;me!==null;){switch(me.tag){case 27:if(vp(me.type)){mn=me.stateNode,xi=!1;break e}break;case 5:mn=me.stateNode,xi=!1;break e;case 3:case 4:mn=me.stateNode.containerInfo,xi=!0;break e}me=me.return}if(mn===null)throw Error(i(160));Ds(H,re,L),mn=null,xi=!1,H=L.alternate,H!==null&&(H.return=null),L.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)Wu(u,o),u=u.sibling}var sr=null;function Wu(o,u){var y=o.alternate,A=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:rs(u,o),Qi(o),A&4&&(Qa(3,o,o.return),co(3,o),Qa(5,o,o.return));break;case 1:rs(u,o),Qi(o),A&512&&(Fi||y===null||Bi(y,y.return)),A&64&&Io&&(o=o.updateQueue,o!==null&&(A=o.callbacks,A!==null&&(y=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=y===null?A:y.concat(A))));break;case 26:var L=sr;if(rs(u,o),Qi(o),A&512&&(Fi||y===null||Bi(y,y.return)),A&4){var H=y!==null?y.memoizedState:null;if(A=o.memoizedState,y===null)if(A===null)if(o.stateNode===null){e:{A=o.type,y=o.memoizedProps,L=L.ownerDocument||L;t:switch(A){case"title":H=L.getElementsByTagName("title")[0],(!H||H[Ss]||H[la]||H.namespaceURI==="http://www.w3.org/2000/svg"||H.hasAttribute("itemprop"))&&(H=L.createElement(A),L.head.insertBefore(H,L.querySelector("head > title"))),vo(H,A,y),H[la]=o,at(H),A=H;break e;case"link":var re=YA("link","href",L).get(A+(y.href||""));if(re){for(var me=0;me<re.length;me++)if(H=re[me],H.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&H.getAttribute("rel")===(y.rel==null?null:y.rel)&&H.getAttribute("title")===(y.title==null?null:y.title)&&H.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){re.splice(me,1);break t}}H=L.createElement(A),vo(H,A,y),L.head.appendChild(H);break;case"meta":if(re=YA("meta","content",L).get(A+(y.content||""))){for(me=0;me<re.length;me++)if(H=re[me],H.getAttribute("content")===(y.content==null?null:""+y.content)&&H.getAttribute("name")===(y.name==null?null:y.name)&&H.getAttribute("property")===(y.property==null?null:y.property)&&H.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&H.getAttribute("charset")===(y.charSet==null?null:y.charSet)){re.splice(me,1);break t}}H=L.createElement(A),vo(H,A,y),L.head.appendChild(H);break;default:throw Error(i(468,A))}H[la]=o,at(H),A=H}o.stateNode=A}else WA(L,o.type,o.stateNode);else o.stateNode=XA(L,A,o.memoizedProps);else H!==A?(H===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):H.count--,A===null?WA(L,o.type,o.stateNode):XA(L,A,o.memoizedProps)):A===null&&o.stateNode!==null&&Wl(o,o.memoizedProps,y.memoizedProps)}break;case 27:rs(u,o),Qi(o),A&512&&(Fi||y===null||Bi(y,y.return)),y!==null&&A&4&&Wl(o,o.memoizedProps,y.memoizedProps);break;case 5:if(rs(u,o),Qi(o),A&512&&(Fi||y===null||Bi(y,y.return)),o.flags&32){L=o.stateNode;try{Xs(L,"")}catch(ot){pe(o,o.return,ot)}}A&4&&o.stateNode!=null&&(L=o.memoizedProps,Wl(o,L,y!==null?y.memoizedProps:L)),A&1024&&(hl=!0);break;case 6:if(rs(u,o),Qi(o),A&4){if(o.stateNode===null)throw Error(i(162));A=o.memoizedProps,y=o.stateNode;try{y.nodeValue=A}catch(ot){pe(o,o.return,ot)}}break;case 3:if(K1=null,L=sr,sr=Y1(u.containerInfo),rs(u,o),sr=L,Qi(o),A&4&&y!==null&&y.memoizedState.isDehydrated)try{dy(u.containerInfo)}catch(ot){pe(o,o.return,ot)}hl&&(hl=!1,On(o));break;case 4:A=sr,sr=Y1(o.stateNode.containerInfo),rs(u,o),Qi(o),sr=A;break;case 12:rs(u,o),Qi(o);break;case 13:rs(u,o),Qi(o),o.child.flags&8192&&o.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Hi=Le()),A&4&&(A=o.updateQueue,A!==null&&(o.updateQueue=null,Yr(o,A)));break;case 22:L=o.memoizedState!==null;var Oe=y!==null&&y.memoizedState!==null,nt=Io,St=Fi;if(Io=nt||L,Fi=St||Oe,rs(u,o),Fi=St,Io=nt,Qi(o),A&8192)e:for(u=o.stateNode,u._visibility=L?u._visibility&-2:u._visibility|1,L&&(y===null||Oe||Io||Fi||Ui(o)),y=null,u=o;;){if(u.tag===5||u.tag===26){if(y===null){Oe=y=u;try{if(H=Oe.stateNode,L)re=H.style,typeof re.setProperty=="function"?re.setProperty("display","none","important"):re.display="none";else{me=Oe.stateNode;var Ct=Oe.memoizedProps.style,rt=Ct!=null&&Ct.hasOwnProperty("display")?Ct.display:null;me.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(ot){pe(Oe,Oe.return,ot)}}}else if(u.tag===6){if(y===null){Oe=u;try{Oe.stateNode.nodeValue=L?"":Oe.memoizedProps}catch(ot){pe(Oe,Oe.return,ot)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;y===u&&(y=null),u=u.return}y===u&&(y=null),u.sibling.return=u.return,u=u.sibling}A&4&&(A=o.updateQueue,A!==null&&(y=A.retryQueue,y!==null&&(A.retryQueue=null,Yr(o,y))));break;case 19:rs(u,o),Qi(o),A&4&&(A=o.updateQueue,A!==null&&(o.updateQueue=null,Yr(o,A)));break;case 30:break;case 21:break;default:rs(u,o),Qi(o)}}function Qi(o){var u=o.flags;if(u&2){try{for(var y,A=o.return;A!==null;){if(Yu(A)){y=A;break}A=A.return}if(y==null)throw Error(i(160));switch(y.tag){case 27:var L=y.stateNode,H=dl(o);uo(o,H,L);break;case 5:var re=y.stateNode;y.flags&32&&(Xs(re,""),y.flags&=-33);var me=dl(o);uo(o,me,re);break;case 3:case 4:var Oe=y.stateNode.containerInfo,nt=dl(o);Kl(o,nt,Oe);break;default:throw Error(i(161))}}catch(St){pe(o,o.return,St)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function On(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;On(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function Qn(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)ho(o,u.alternate,u),u=u.sibling}function Ui(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Qa(4,u,u.return),Ui(u);break;case 1:Bi(u,u.return);var y=u.stateNode;typeof y.componentWillUnmount=="function"&&Pc(u,u.return,y),Ui(u);break;case 27:iy(u.stateNode);case 26:case 5:Bi(u,u.return),Ui(u);break;case 22:u.memoizedState===null&&Ui(u);break;case 30:Ui(u);break;default:Ui(u)}o=o.sibling}}function po(o,u,y){for(y=y&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var A=u.alternate,L=o,H=u,re=H.flags;switch(H.tag){case 0:case 11:case 15:po(L,H,y),co(4,H);break;case 1:if(po(L,H,y),A=H,L=A.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(nt){pe(A,A.return,nt)}if(A=H,L=A.updateQueue,L!==null){var me=A.stateNode;try{var Oe=L.shared.hiddenCallbacks;if(Oe!==null)for(L.shared.hiddenCallbacks=null,L=0;L<Oe.length;L++)hn(Oe[L],me)}catch(nt){pe(A,A.return,nt)}}y&&re&64&&qu(H),Xu(H,H.return);break;case 27:zo(H);case 26:case 5:po(L,H,y),y&&A===null&&re&4&&Uc(H),Xu(H,H.return);break;case 12:po(L,H,y);break;case 13:po(L,H,y),y&&re&4&&fo(L,H);break;case 22:H.memoizedState===null&&po(L,H,y),Xu(H,H.return);break;case 30:break;default:po(L,H,y)}u=u.sibling}}function Lc(o,u){var y=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==y&&(o!=null&&o.refCount++,y!=null&&Ro(y))}function Zl(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Ro(o))}function Yi(o,u,y,A){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)cu(o,u,y,A),u=u.sibling}function cu(o,u,y,A){var L=u.flags;switch(u.tag){case 0:case 11:case 15:Yi(o,u,y,A),L&2048&&co(9,u);break;case 1:Yi(o,u,y,A);break;case 3:Yi(o,u,y,A),L&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Ro(o)));break;case 12:if(L&2048){Yi(o,u,y,A),o=u.stateNode;try{var H=u.memoizedProps,re=H.id,me=H.onPostCommit;typeof me=="function"&&me(re,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Oe){pe(u,u.return,Oe)}}else Yi(o,u,y,A);break;case 13:Yi(o,u,y,A);break;case 23:break;case 22:H=u.stateNode,re=u.alternate,u.memoizedState!==null?H._visibility&2?Yi(o,u,y,A):fl(o,u):H._visibility&2?Yi(o,u,y,A):(H._visibility|=2,Wr(o,u,y,A,(u.subtreeFlags&10256)!==0)),L&2048&&Lc(re,u);break;case 24:Yi(o,u,y,A),L&2048&&Zl(u.alternate,u);break;default:Yi(o,u,y,A)}}function Wr(o,u,y,A,L){for(L=L&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var H=o,re=u,me=y,Oe=A,nt=re.flags;switch(re.tag){case 0:case 11:case 15:Wr(H,re,me,Oe,L),co(8,re);break;case 23:break;case 22:var St=re.stateNode;re.memoizedState!==null?St._visibility&2?Wr(H,re,me,Oe,L):fl(H,re):(St._visibility|=2,Wr(H,re,me,Oe,L)),L&&nt&2048&&Lc(re.alternate,re);break;case 24:Wr(H,re,me,Oe,L),L&&nt&2048&&Zl(re.alternate,re);break;default:Wr(H,re,me,Oe,L)}u=u.sibling}}function fl(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var y=o,A=u,L=A.flags;switch(A.tag){case 22:fl(y,A),L&2048&&Lc(A.alternate,A);break;case 24:fl(y,A),L&2048&&Zl(A.alternate,A);break;default:fl(y,A)}u=u.sibling}}var rr=8192;function Ku(o){if(o.subtreeFlags&rr)for(o=o.child;o!==null;)Pm(o),o=o.sibling}function Pm(o){switch(o.tag){case 26:Ku(o),o.flags&rr&&o.memoizedState!==null&&bz(sr,o.memoizedState,o.memoizedProps);break;case 5:Ku(o);break;case 3:case 4:var u=sr;sr=Y1(o.stateNode.containerInfo),Ku(o),sr=u;break;case 22:o.memoizedState===null&&(u=o.alternate,u!==null&&u.memoizedState!==null?(u=rr,rr=16777216,Ku(o),rr=u):Ku(o));break;default:Ku(o)}}function _0(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function ki(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var y=0;y<u.length;y++){var A=u[y];Ai=A,pl(A,o)}_0(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Zu(o),o=o.sibling}function Zu(o){switch(o.tag){case 0:case 11:case 15:ki(o),o.flags&2048&&Qa(9,o,o.return);break;case 3:ki(o);break;case 12:ki(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Er(o)):ki(o);break;default:ki(o)}}function Er(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var y=0;y<u.length;y++){var A=u[y];Ai=A,pl(A,o)}_0(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Qa(8,u,u.return),Er(u);break;case 22:y=u.stateNode,y._visibility&2&&(y._visibility&=-3,Er(u));break;default:Er(u)}o=o.sibling}}function pl(o,u){for(;Ai!==null;){var y=Ai;switch(y.tag){case 0:case 11:case 15:Qa(8,y,u);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var A=y.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:Ro(y.memoizedState.cache)}if(A=y.child,A!==null)A.return=y,Ai=A;else e:for(y=o;Ai!==null;){A=Ai;var L=A.sibling,H=A.return;if(Zn(A),A===y){Ai=null;break e}if(L!==null){L.return=H,Ai=L;break e}Ai=H}}}var Ni={getCacheForType:function(o){var u=Xa(Za),y=u.data.get(o);return y===void 0&&(y=o(),u.data.set(o,y)),y}},Bo=typeof WeakMap=="function"?WeakMap:Map,Cn=0,zn=null,si=null,gn=0,dn=0,ba=null,Ja=!1,pa=!1,uu=!1,mo=0,Jn=0,Wi=0,Ga=0,zs=0,Is=0,Ri=0,Di=null,xn=null,ri=!1,Hi=0,vs=1/0,or=null,go=null,bn=0,ei=null,en=null,jn=0,pi=0,Bs=null,os=null,wr=0,zc=null;function Ki(){if((Cn&2)!==0&&gn!==0)return gn&-gn;if($.T!==null){var o=Yn;return o!==0?o:xE()}return Dn()}function _a(){Is===0&&(Is=(gn&536870912)===0||wi?Ne():536870912);var o=aa.current;return o!==null&&(o.flags|=32),Is}function Ka(o,u,y){(o===zn&&(dn===2||dn===9)||o.cancelPendingCommit!==null)&&(Ql(o,0),lr(o,gn,Is,!1)),kt(o,y),((Cn&2)===0||o!==zn)&&(o===zn&&((Cn&2)===0&&(Ga|=y),Jn===4&&lr(o,gn,Is,!1)),tn(o))}function Fo(o,u,y){if((Cn&6)!==0)throw Error(i(327));var A=!y&&(u&124)===0&&(u&o.expiredLanes)===0||Xe(o,u),L=A?z(o,u):v(o,u,!0),H=A;do{if(L===0){pa&&!A&&lr(o,u,0,!1);break}else{if(y=o.current.alternate,H&&!ys(y)){L=v(o,u,!1),H=!1;continue}if(L===2){if(H=u,o.errorRecoveryDisabledLanes&H)var re=0;else re=o.pendingLanes&-536870913,re=re!==0?re:re&536870912?536870912:0;if(re!==0){u=re;e:{var me=o;L=Di;var Oe=me.current.memoizedState.isDehydrated;if(Oe&&(Ql(me,re).flags|=256),re=v(me,re,!1),re!==2){if(uu&&!Oe){me.errorRecoveryDisabledLanes|=H,Ga|=H,L=4;break e}H=xn,xn=L,H!==null&&(xn===null?xn=H:xn.push.apply(xn,H))}L=re}if(H=!1,L!==2)continue}}if(L===1){Ql(o,0),lr(o,u,0,!0);break}e:{switch(A=o,H=L,H){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:lr(A,u,Is,!Ja);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(L=Hi+300-Le(),10<L)){if(lr(A,u,Is,!Ja),Ae(A,0,!0)!==0)break e;A.timeoutHandle=zA(Qu.bind(null,A,y,xn,or,ri,u,Is,Ga,Ri,Ja,H,2,-0,0),L);break e}Qu(A,y,xn,or,ri,u,Is,Ga,Ri,Ja,H,0,-0,0)}}break}while(!0);tn(o)}function Qu(o,u,y,A,L,H,re,me,Oe,nt,St,Ct,rt,ot){if(o.timeoutHandle=-1,Ct=u.subtreeFlags,(Ct&8192||(Ct&16785408)===16785408)&&(ry={stylesheets:null,count:0,unsuspend:xz},Pm(u),Ct=_z(),Ct!==null)){o.cancelPendingCommit=Ct(h.bind(null,o,u,H,y,A,L,re,me,Oe,St,1,rt,ot)),lr(o,H,re,!nt);return}h(o,u,H,y,A,L,re,me,Oe)}function ys(o){for(var u=o;;){var y=u.tag;if((y===0||y===11||y===15)&&u.flags&16384&&(y=u.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var A=0;A<y.length;A++){var L=y[A],H=L.getSnapshot;L=L.value;try{if(!jr(H(),L))return!1}catch{return!1}}if(y=u.child,u.subtreeFlags&16384&&y!==null)y.return=u,u=y;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function lr(o,u,y,A){u&=~zs,u&=~Ga,o.suspendedLanes|=u,o.pingedLanes&=~u,A&&(o.warmLanes|=u),A=o.expirationTimes;for(var L=u;0<L;){var H=31-Nt(L),re=1<<H;A[H]=-1,L&=~re}y!==0&&xt(o,y,u)}function Kr(){return(Cn&6)===0?(ca(0),!1):!0}function ls(){if(si!==null){if(dn===0)var o=si.return;else o=si,zl=Ec=null,gm(o),Bu=null,br=0,o=si;for(;o!==null;)jc(o.alternate,o),o=o.return;si=null}}function Ql(o,u){var y=o.timeoutHandle;y!==-1&&(o.timeoutHandle=-1,nz(y)),y=o.cancelPendingCommit,y!==null&&(o.cancelPendingCommit=null,y()),ls(),zn=o,si=y=qa(o.current,null),gn=u,dn=0,ba=null,Ja=!1,pa=Xe(o,u),uu=!1,Ri=Is=zs=Ga=Wi=Jn=0,xn=Di=null,ri=!1,(u&8)!==0&&(u|=u&32);var A=o.entangledLanes;if(A!==0)for(o=o.entanglements,A&=u;0<A;){var L=31-Nt(A),H=1<<L;u|=o[L],A&=~H}return mo=u,Ur(),y}function Jd(o,u){Wn=null,$.H=rf,u===zu||u===kr?(u=ip(),dn=3):u===pm?(u=ip(),dn=4):dn=u===b0?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ba=u,si===null&&(Jn=1,gp(o,za(u,o.current)))}function Jl(){var o=$.H;return $.H=rf,o===null?rf:o}function Ju(){var o=$.A;return $.A=Ni,o}function p(){Jn=4,Ja||(gn&4194048)!==gn&&aa.current!==null||(pa=!0),(Wi&134217727)===0&&(Ga&134217727)===0||zn===null||lr(zn,gn,Is,!1)}function v(o,u,y){var A=Cn;Cn|=2;var L=Jl(),H=Ju();(zn!==o||gn!==u)&&(or=null,Ql(o,u)),u=!1;var re=Jn;e:do try{if(dn!==0&&si!==null){var me=si,Oe=ba;switch(dn){case 8:ls(),re=6;break e;case 3:case 2:case 9:case 6:aa.current===null&&(u=!0);var nt=dn;if(dn=0,ba=null,je(o,me,Oe,nt),y&&pa){re=0;break e}break;default:nt=dn,dn=0,ba=null,je(o,me,Oe,nt)}}R(),re=Jn;break}catch(St){Jd(o,St)}while(!0);return u&&o.shellSuspendCounter++,zl=Ec=null,Cn=A,$.H=L,$.A=H,si===null&&(zn=null,gn=0,Ur()),re}function R(){for(;si!==null;)Z(si)}function z(o,u){var y=Cn;Cn|=2;var A=Jl(),L=Ju();zn!==o||gn!==u?(or=null,vs=Le()+500,Ql(o,u)):pa=Xe(o,u);e:do try{if(dn!==0&&si!==null){u=si;var H=ba;t:switch(dn){case 1:dn=0,ba=null,je(o,u,H,1);break;case 2:case 9:if(wc(H)){dn=0,ba=null,ge(u);break}u=function(){dn!==2&&dn!==9||zn!==o||(dn=7),tn(o)},H.then(u,u);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:wc(H)?(dn=0,ba=null,ge(u)):(dn=0,ba=null,je(o,u,H,7));break;case 5:var re=null;switch(si.tag){case 26:re=si.memoizedState;case 5:case 27:var me=si;if(!re||KA(re)){dn=0,ba=null;var Oe=me.sibling;if(Oe!==null)si=Oe;else{var nt=me.return;nt!==null?(si=nt,We(nt)):si=null}break t}}dn=0,ba=null,je(o,u,H,5);break;case 6:dn=0,ba=null,je(o,u,H,6);break;case 8:ls(),Jn=6;break e;default:throw Error(i(462))}}V();break}catch(St){Jd(o,St)}while(!0);return zl=Ec=null,$.H=A,$.A=L,Cn=y,si!==null?0:(zn=null,gn=0,Ur(),Jn)}function V(){for(;si!==null&&!ke();)Z(si)}function Z(o){var u=Yl(o.alternate,o,mo);o.memoizedProps=o.pendingProps,u===null?We(o):si=u}function ge(o){var u=o,y=u.alternate;switch(u.tag){case 15:case 0:u=Sr(y,u,u.pendingProps,u.type,void 0,gn);break;case 11:u=Sr(y,u,u.pendingProps,u.type.render,u.ref,gn);break;case 5:gm(u);default:jc(y,u),u=si=Gh(u,mo),u=Yl(y,u,mo)}o.memoizedProps=o.pendingProps,u===null?We(o):si=u}function je(o,u,y,A){zl=Ec=null,gm(u),Bu=null,br=0;var L=u.return;try{if(ey(o,L,u,y,gn)){Jn=1,gp(o,za(y,o.current)),si=null;return}}catch(H){if(L!==null)throw si=L,H;Jn=1,gp(o,za(y,o.current)),si=null;return}u.flags&32768?(wi||A===1?o=!0:pa||(gn&536870912)!==0?o=!1:(Ja=o=!0,(A===2||A===9||A===3||A===6)&&(A=aa.current,A!==null&&A.tag===13&&(A.flags|=16384))),yt(u,o)):We(u)}function We(o){var u=o;do{if((u.flags&32768)!==0){yt(u,Ja);return}o=u.return;var y=cf(u.alternate,u,mo);if(y!==null){si=y;return}if(u=u.sibling,u!==null){si=u;return}si=u=o}while(u!==null);Jn===0&&(Jn=5)}function yt(o,u){do{var y=Rs(o.alternate,o);if(y!==null){y.flags&=32767,si=y;return}if(y=o.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!u&&(o=o.sibling,o!==null)){si=o;return}si=o=y}while(o!==null);Jn=6,si=null}function h(o,u,y,A,L,H,re,me,Oe){o.cancelPendingCommit=null;do K();while(bn!==0);if((Cn&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(H=u.lanes|u.childLanes,H|=Id,jt(o,y,H,re,me,Oe),o===zn&&(si=zn=null,gn=0),en=u,ei=o,jn=y,pi=H,Bs=L,os=A,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Vn(At,function(){return xe(),null})):(o.callbackNode=null,o.callbackPriority=0),A=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||A){A=$.T,$.T=null,L=X.p,X.p=2,re=Cn,Cn|=4;try{gs(o,u,y)}finally{Cn=re,X.p=L,$.T=A}}bn=1,m(),N(),U()}}function m(){if(bn===1){bn=0;var o=ei,u=en,y=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||y){y=$.T,$.T=null;var A=X.p;X.p=2;var L=Cn;Cn|=4;try{Wu(u,o);var H=CE,re=Zf(o.containerInfo),me=H.focusedElem,Oe=H.selectionRange;if(re!==me&&me&&me.ownerDocument&&Kf(me.ownerDocument.documentElement,me)){if(Oe!==null&&mc(me)){var nt=Oe.start,St=Oe.end;if(St===void 0&&(St=nt),"selectionStart"in me)me.selectionStart=nt,me.selectionEnd=Math.min(St,me.value.length);else{var Ct=me.ownerDocument||document,rt=Ct&&Ct.defaultView||window;if(rt.getSelection){var ot=rt.getSelection(),Hn=me.textContent.length,Nn=Math.min(Oe.start,Hn),ja=Oe.end===void 0?Nn:Math.min(Oe.end,Hn);!ot.extend&&Nn>ja&&(re=ja,ja=Nn,Nn=re);var Ze=Ol(me,Nn),Fe=Ol(me,ja);if(Ze&&Fe&&(ot.rangeCount!==1||ot.anchorNode!==Ze.node||ot.anchorOffset!==Ze.offset||ot.focusNode!==Fe.node||ot.focusOffset!==Fe.offset)){var et=Ct.createRange();et.setStart(Ze.node,Ze.offset),ot.removeAllRanges(),Nn>ja?(ot.addRange(et),ot.extend(Fe.node,Fe.offset)):(et.setEnd(Fe.node,Fe.offset),ot.addRange(et))}}}}for(Ct=[],ot=me;ot=ot.parentNode;)ot.nodeType===1&&Ct.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof me.focus=="function"&&me.focus(),me=0;me<Ct.length;me++){var Tt=Ct[me];Tt.element.scrollLeft=Tt.left,Tt.element.scrollTop=Tt.top}}J1=!!TE,CE=TE=null}finally{Cn=L,X.p=A,$.T=y}}o.current=u,bn=2}}function N(){if(bn===2){bn=0;var o=ei,u=en,y=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||y){y=$.T,$.T=null;var A=X.p;X.p=2;var L=Cn;Cn|=4;try{ho(o,u.alternate,u)}finally{Cn=L,X.p=A,$.T=y}}bn=3}}function U(){if(bn===4||bn===3){bn=0,Ee();var o=ei,u=en,y=jn,A=os;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?bn=5:(bn=0,en=ei=null,q(o,o.pendingLanes));var L=o.pendingLanes;if(L===0&&(go=null),Xn(y),u=u.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(Ve,u,void 0,(u.current.flags&128)===128)}catch{}if(A!==null){u=$.T,L=X.p,X.p=2,$.T=null;try{for(var H=o.onRecoverableError,re=0;re<A.length;re++){var me=A[re];H(me.value,{componentStack:me.stack})}}finally{$.T=u,X.p=L}}(jn&3)!==0&&K(),tn(o),L=o.pendingLanes,(y&4194090)!==0&&(L&42)!==0?o===zc?wr++:(wr=0,zc=o):wr=0,ca(0)}}function q(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Ro(u)))}function K(o){return m(),N(),U(),xe()}function xe(){if(bn!==5)return!1;var o=ei,u=pi;pi=0;var y=Xn(jn),A=$.T,L=X.p;try{X.p=32>y?32:y,$.T=null,y=Bs,Bs=null;var H=ei,re=jn;if(bn=0,en=ei=null,jn=0,(Cn&6)!==0)throw Error(i(331));var me=Cn;if(Cn|=4,Zu(H.current),cu(H,H.current,re,y),Cn=me,ca(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(Ve,H)}catch{}return!0}finally{X.p=L,$.T=A,q(o,u)}}function fe(o,u,y){u=za(y,u),u=Hu(o.stateNode,u,2),o=$s(o,u,2),o!==null&&(kt(o,2),tn(o))}function pe(o,u,y){if(o.tag===3)fe(o,o,y);else for(;u!==null;){if(u.tag===3){fe(u,o,y);break}else if(u.tag===1){var A=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(go===null||!go.has(A))){o=za(y,o),y=lf(2),A=$s(u,y,2),A!==null&&(Zd(y,A,u,o),kt(A,2),tn(A));break}}u=u.return}}function Ce(o,u,y){var A=o.pingCache;if(A===null){A=o.pingCache=new Bo;var L=new Set;A.set(u,L)}else L=A.get(u),L===void 0&&(L=new Set,A.set(u,L));L.has(y)||(uu=!0,L.add(y),o=qe.bind(null,o,u,y),u.then(o,o))}function qe(o,u,y){var A=o.pingCache;A!==null&&A.delete(u),o.pingedLanes|=o.suspendedLanes&y,o.warmLanes&=~y,zn===o&&(gn&y)===y&&(Jn===4||Jn===3&&(gn&62914560)===gn&&300>Le()-Hi?(Cn&2)===0&&Ql(o,0):zs|=y,Ri===gn&&(Ri=0)),tn(o)}function pt(o,u){u===0&&(u=Qe()),o=io(o,u),o!==null&&(kt(o,u),tn(o))}function It(o){var u=o.memoizedState,y=0;u!==null&&(y=u.retryLane),pt(o,y)}function Bt(o,u){var y=0;switch(o.tag){case 13:var A=o.stateNode,L=o.memoizedState;L!==null&&(y=L.retryLane);break;case 19:A=o.stateNode;break;case 22:A=o.stateNode._retryCache;break;default:throw Error(i(314))}A!==null&&A.delete(u),pt(o,y)}function Vn(o,u){return Pe(o,u)}var Sa=null,qn=null,$e=!1,Ye=!1,lt=!1,zt=0;function tn(o){o!==qn&&o.next===null&&(qn===null?Sa=qn=o:qn=qn.next=o),Ye=!0,$e||($e=!0,yE())}function ca(o,u){if(!lt&&Ye){lt=!0;do for(var y=!1,A=Sa;A!==null;){if(o!==0){var L=A.pendingLanes;if(L===0)var H=0;else{var re=A.suspendedLanes,me=A.pingedLanes;H=(1<<31-Nt(42|o)+1)-1,H&=L&~(re&~me),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(y=!0,$u(A,H))}else H=gn,H=Ae(A,A===zn?H:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),(H&3)===0||Xe(A,H)||(y=!0,$u(A,H));A=A.next}while(y);lt=!1}}function Pn(){Gi()}function Gi(){Ye=$e=!1;var o=0;zt!==0&&(tz()&&(o=zt),zt=0);for(var u=Le(),y=null,A=Sa;A!==null;){var L=A.next,H=Fs(A,u);H===0?(A.next=null,y===null?Sa=L:y.next=L,L===null&&(qn=y)):(y=A,(o!==0||(H&3)!==0)&&(Ye=!0)),A=L}ca(o)}function Fs(o,u){for(var y=o.suspendedLanes,A=o.pingedLanes,L=o.expirationTimes,H=o.pendingLanes&-62914561;0<H;){var re=31-Nt(H),me=1<<re,Oe=L[re];Oe===-1?((me&y)===0||(me&A)!==0)&&(L[re]=Mt(me,u)):Oe<=u&&(o.expiredLanes|=me),H&=~me}if(u=zn,y=gn,y=Ae(o,o===u?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),A=o.callbackNode,y===0||o===u&&(dn===2||dn===9)||o.cancelPendingCommit!==null)return A!==null&&A!==null&&he(A),o.callbackNode=null,o.callbackPriority=0;if((y&3)===0||Xe(o,y)){if(u=y&-y,u===o.callbackPriority)return u;switch(A!==null&&he(A),Xn(y)){case 2:case 8:y=ct;break;case 32:y=At;break;case 268435456:y=Se;break;default:y=At}return A=Vi.bind(null,o),y=Pe(y,A),o.callbackPriority=u,o.callbackNode=y,u}return A!==null&&A!==null&&he(A),o.callbackPriority=2,o.callbackNode=null,2}function Vi(o,u){if(bn!==0&&bn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var y=o.callbackNode;if(K()&&o.callbackNode!==y)return null;var A=gn;return A=Ae(o,o===zn?A:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),A===0?null:(Fo(o,A,u),Fs(o,Le()),o.callbackNode!=null&&o.callbackNode===y?Vi.bind(null,o):null)}function $u(o,u){if(K())return null;Fo(o,u,!0)}function yE(){iz(function(){(Cn&6)!==0?Pe(Et,Pn):Gi()})}function xE(){return zt===0&&(zt=Ne()),zt}function AA(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Nh(""+o)}function NA(o,u){var y=u.ownerDocument.createElement("input");return y.name=u.name,y.value=u.value,o.id&&y.setAttribute("form",o.id),u.parentNode.insertBefore(y,u),o=new FormData(o),y.parentNode.removeChild(y),o}function WL(o,u,y,A,L){if(u==="submit"&&y&&y.stateNode===L){var H=AA((L[Va]||null).action),re=A.submitter;re&&(u=(u=re[Va]||null)?AA(u.formAction):re.getAttribute("formAction"),u!==null&&(H=u,re=null));var me=new wu("action","action",null,A,L);o.push({event:me,listeners:[{instance:null,listener:function(){if(A.defaultPrevented){if(zt!==0){var Oe=re?NA(L,re):new FormData(L);Cm(y,{pending:!0,data:Oe,method:L.method,action:H},null,Oe)}}else typeof H=="function"&&(me.preventDefault(),Oe=re?NA(L,re):new FormData(L),Cm(y,{pending:!0,data:Oe,method:L.method,action:H},H,Oe))},currentTarget:L}]})}}for(var bE=0;bE<ws.length;bE++){var _E=ws[bE],KL=_E.toLowerCase(),ZL=_E[0].toUpperCase()+_E.slice(1);fs(KL,"on"+ZL)}fs(Ks,"onAnimationEnd"),fs(no,"onAnimationIteration"),fs(Zs,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(um,"onTransitionRun"),fs(vc,"onTransitionStart"),fs(tu,"onTransitionCancel"),fs(La,"onTransitionEnd"),ce("onMouseEnter",["mouseout","mouseover"]),ce("onMouseLeave",["mouseout","mouseover"]),ce("onPointerEnter",["pointerout","pointerover"]),ce("onPointerLeave",["pointerout","pointerover"]),mt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mt("onBeforeInput",["compositionend","keypress","textInput","paste"]),mt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ty="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ty));function RA(o,u){u=(u&4)!==0;for(var y=0;y<o.length;y++){var A=o[y],L=A.event;A=A.listeners;e:{var H=void 0;if(u)for(var re=A.length-1;0<=re;re--){var me=A[re],Oe=me.instance,nt=me.currentTarget;if(me=me.listener,Oe!==H&&L.isPropagationStopped())break e;H=me,L.currentTarget=nt;try{H(L)}catch(St){Uo(St)}L.currentTarget=null,H=Oe}else for(re=0;re<A.length;re++){if(me=A[re],Oe=me.instance,nt=me.currentTarget,me=me.listener,Oe!==H&&L.isPropagationStopped())break e;H=me,L.currentTarget=nt;try{H(L)}catch(St){Uo(St)}L.currentTarget=null,H=Oe}}}}function Oi(o,u){var y=u[_s];y===void 0&&(y=u[_s]=new Set);var A=o+"__bubble";y.has(A)||(DA(u,o,2,!1),y.add(A))}function SE(o,u,y){var A=0;u&&(A|=4),DA(y,o,A,u)}var G1="_reactListening"+Math.random().toString(36).slice(2);function EE(o){if(!o[G1]){o[G1]=!0,ut.forEach(function(y){y!=="selectionchange"&&(QL.has(y)||SE(y,!1,o),SE(y,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[G1]||(u[G1]=!0,SE("selectionchange",!1,u))}}function DA(o,u,y,A){switch(tN(u)){case 2:var L=wz;break;case 8:L=Mz;break;default:L=zE}y=L.bind(null,u,y,o),L=void 0,!wd||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(L=!0),A?L!==void 0?o.addEventListener(u,y,{capture:!0,passive:L}):o.addEventListener(u,y,!0):L!==void 0?o.addEventListener(u,y,{passive:L}):o.addEventListener(u,y,!1)}function wE(o,u,y,A,L){var H=A;if((u&1)===0&&(u&2)===0&&A!==null)e:for(;;){if(A===null)return;var re=A.tag;if(re===3||re===4){var me=A.stateNode.containerInfo;if(me===L)break;if(re===4)for(re=A.return;re!==null;){var Oe=re.tag;if((Oe===3||Oe===4)&&re.stateNode.containerInfo===L)return;re=re.return}for(;me!==null;){if(re=le(me),re===null)return;if(Oe=re.tag,Oe===5||Oe===6||Oe===26||Oe===27){A=H=re;continue e}me=me.parentNode}}A=A.return}Ff(function(){var nt=H,St=rc(y),Ct=[];e:{var rt=Hh.get(o);if(rt!==void 0){var ot=wu,Hn=o;switch(o){case"keypress":if(Tl(y)===0)break e;case"keydown":case"keyup":ot=Nd;break;case"focusin":Hn="focus",ot=Qc;break;case"focusout":Hn="blur",ot=Qc;break;case"beforeblur":case"afterblur":ot=Qc;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Td;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=zg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=qf;break;case Ks:case no:case Zs:ot=rm;break;case La:ot=va;break;case"scroll":case"scrollend":ot=Lg;break;case"wheel":ot=Bg;break;case"copy":case"cut":case"paste":ot=cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Rd;break;case"toggle":case"beforetoggle":ot=uc}var Nn=(u&4)!==0,ja=!Nn&&(o==="scroll"||o==="scrollend"),Ze=Nn?rt!==null?rt+"Capture":null:rt;Nn=[];for(var Fe=nt,et;Fe!==null;){var Tt=Fe;if(et=Tt.stateNode,Tt=Tt.tag,Tt!==5&&Tt!==26&&Tt!==27||et===null||Ze===null||(Tt=_u(Fe,Ze),Tt!=null&&Nn.push(ny(Fe,Tt,et))),ja)break;Fe=Fe.return}0<Nn.length&&(rt=new ot(rt,Hn,null,y,St),Ct.push({event:rt,listeners:Nn}))}}if((u&7)===0){e:{if(rt=o==="mouseover"||o==="pointerover",ot=o==="mouseout"||o==="pointerout",rt&&y!==Rh&&(Hn=y.relatedTarget||y.fromElement)&&(le(Hn)||Hn[Na]))break e;if((ot||rt)&&(rt=St.window===St?St:(rt=St.ownerDocument)?rt.defaultView||rt.parentWindow:window,ot?(Hn=y.relatedTarget||y.toElement,ot=nt,Hn=Hn?le(Hn):null,Hn!==null&&(ja=s(Hn),Nn=Hn.tag,Hn!==ja||Nn!==5&&Nn!==27&&Nn!==6)&&(Hn=null)):(ot=null,Hn=nt),ot!==Hn)){if(Nn=Td,Tt="onMouseLeave",Ze="onMouseEnter",Fe="mouse",(o==="pointerout"||o==="pointerover")&&(Nn=Rd,Tt="onPointerLeave",Ze="onPointerEnter",Fe="pointer"),ja=ot==null?rt:Ue(ot),et=Hn==null?rt:Ue(Hn),rt=new Nn(Tt,Fe+"leave",ot,y,St),rt.target=ja,rt.relatedTarget=et,Tt=null,le(St)===nt&&(Nn=new Nn(Ze,Fe+"enter",Hn,y,St),Nn.target=et,Nn.relatedTarget=ja,Tt=Nn),ja=Tt,ot&&Hn)t:{for(Nn=ot,Ze=Hn,Fe=0,et=Nn;et;et=S0(et))Fe++;for(et=0,Tt=Ze;Tt;Tt=S0(Tt))et++;for(;0<Fe-et;)Nn=S0(Nn),Fe--;for(;0<et-Fe;)Ze=S0(Ze),et--;for(;Fe--;){if(Nn===Ze||Ze!==null&&Nn===Ze.alternate)break t;Nn=S0(Nn),Ze=S0(Ze)}Nn=null}else Nn=null;ot!==null&&OA(Ct,rt,ot,Nn,!1),Hn!==null&&ja!==null&&OA(Ct,ja,Hn,Nn,!0)}}e:{if(rt=nt?Ue(nt):window,ot=rt.nodeName&&rt.nodeName.toLowerCase(),ot==="select"||ot==="input"&&rt.type==="file")var rn=Ws;else if(zh(rt))if(Ih)rn=Xi;else{rn=Bh;var Ti=kg}else ot=rt.nodeName,!ot||ot.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?nt&&Ah(nt.elementType)&&(rn=Ws):rn=pc;if(rn&&(rn=rn(o,nt))){mr(Ct,rn,y,St);break e}Ti&&Ti(o,rt,nt),o==="focusout"&&nt&&rt.type==="number"&&nt.memoizedProps.value!=null&&ha(rt,"number",rt.value)}switch(Ti=nt?Ue(nt):window,o){case"focusin":(zh(Ti)||Ti.contentEditable==="true")&&(jl=Ti,Ud=nt,Ld=null);break;case"focusout":Ld=Ud=jl=null;break;case"mousedown":zd=!0;break;case"contextmenu":case"mouseup":case"dragend":zd=!1,Fh(Ct,y,St);break;case"selectionchange":if(To)break;case"keydown":case"keyup":Fh(Ct,y,St)}var _n;if($c)e:{switch(o){case"compositionstart":var Un="onCompositionStart";break e;case"compositionend":Un="onCompositionEnd";break e;case"compositionupdate":Un="onCompositionUpdate";break e}Un=void 0}else Dl?Cu(o,y)&&(Un="onCompositionEnd"):o==="keydown"&&y.keyCode===229&&(Un="onCompositionStart");Un&&(Od&&y.locale!=="ko"&&(Dl||Un!=="onCompositionStart"?Un==="onCompositionEnd"&&Dl&&(_n=kf()):(Ml=St,Dh="value"in Ml?Ml.value:Ml.textContent,Dl=!0)),Ti=V1(nt,Un),0<Ti.length&&(Un=new nl(Un,o,null,y,St),Ct.push({event:Un,listeners:Ti}),_n?Un.data=_n:(_n=Yf(y),_n!==null&&(Un.data=_n)))),(_n=Dd?eu(o,y):Uh(o,y))&&(Un=V1(nt,"onBeforeInput"),0<Un.length&&(Ti=new nl("onBeforeInput","beforeinput",null,y,St),Ct.push({event:Ti,listeners:Un}),Ti.data=_n)),WL(Ct,o,nt,y,St)}RA(Ct,u)})}function ny(o,u,y){return{instance:o,listener:u,currentTarget:y}}function V1(o,u){for(var y=u+"Capture",A=[];o!==null;){var L=o,H=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||H===null||(L=_u(o,y),L!=null&&A.unshift(ny(o,L,H)),L=_u(o,u),L!=null&&A.push(ny(o,L,H))),o.tag===3)return A;o=o.return}return[]}function S0(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function OA(o,u,y,A,L){for(var H=u._reactName,re=[];y!==null&&y!==A;){var me=y,Oe=me.alternate,nt=me.stateNode;if(me=me.tag,Oe!==null&&Oe===A)break;me!==5&&me!==26&&me!==27||nt===null||(Oe=nt,L?(nt=_u(y,H),nt!=null&&re.unshift(ny(y,nt,Oe))):L||(nt=_u(y,H),nt!=null&&re.push(ny(y,nt,Oe)))),y=y.return}re.length!==0&&o.push({event:u,listeners:re})}var JL=/\r\n?/g,$L=/\u0000|\uFFFD/g;function jA(o){return(typeof o=="string"?o:""+o).replace(JL,`
`).replace($L,"")}function PA(o,u){return u=jA(u),jA(o)===u}function q1(){}function Oa(o,u,y,A,L,H){switch(y){case"children":typeof A=="string"?u==="body"||u==="textarea"&&A===""||Xs(o,A):(typeof A=="number"||typeof A=="bigint")&&u!=="body"&&Xs(o,""+A);break;case"className":dt(o,"class",A);break;case"tabIndex":dt(o,"tabindex",A);break;case"dir":case"role":case"viewBox":case"width":case"height":dt(o,y,A);break;case"style":Sd(o,A,H);break;case"data":if(u!=="object"){dt(o,"data",A);break}case"src":case"href":if(A===""&&(u!=="a"||y!=="href")){o.removeAttribute(y);break}if(A==null||typeof A=="function"||typeof A=="symbol"||typeof A=="boolean"){o.removeAttribute(y);break}A=Nh(""+A),o.setAttribute(y,A);break;case"action":case"formAction":if(typeof A=="function"){o.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof H=="function"&&(y==="formAction"?(u!=="input"&&Oa(o,u,"name",L.name,L,null),Oa(o,u,"formEncType",L.formEncType,L,null),Oa(o,u,"formMethod",L.formMethod,L,null),Oa(o,u,"formTarget",L.formTarget,L,null)):(Oa(o,u,"encType",L.encType,L,null),Oa(o,u,"method",L.method,L,null),Oa(o,u,"target",L.target,L,null)));if(A==null||typeof A=="symbol"||typeof A=="boolean"){o.removeAttribute(y);break}A=Nh(""+A),o.setAttribute(y,A);break;case"onClick":A!=null&&(o.onclick=q1);break;case"onScroll":A!=null&&Oi("scroll",o);break;case"onScrollEnd":A!=null&&Oi("scrollend",o);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(i(61));if(y=A.__html,y!=null){if(L.children!=null)throw Error(i(60));o.innerHTML=y}}break;case"multiple":o.multiple=A&&typeof A!="function"&&typeof A!="symbol";break;case"muted":o.muted=A&&typeof A!="function"&&typeof A!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(A==null||typeof A=="function"||typeof A=="boolean"||typeof A=="symbol"){o.removeAttribute("xlink:href");break}y=Nh(""+A),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":A!=null&&typeof A!="function"&&typeof A!="symbol"?o.setAttribute(y,""+A):o.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":A&&typeof A!="function"&&typeof A!="symbol"?o.setAttribute(y,""):o.removeAttribute(y);break;case"capture":case"download":A===!0?o.setAttribute(y,""):A!==!1&&A!=null&&typeof A!="function"&&typeof A!="symbol"?o.setAttribute(y,A):o.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":A!=null&&typeof A!="function"&&typeof A!="symbol"&&!isNaN(A)&&1<=A?o.setAttribute(y,A):o.removeAttribute(y);break;case"rowSpan":case"start":A==null||typeof A=="function"||typeof A=="symbol"||isNaN(A)?o.removeAttribute(y):o.setAttribute(y,A);break;case"popover":Oi("beforetoggle",o),Oi("toggle",o),Je(o,"popover",A);break;case"xlinkActuate":_t(o,"http://www.w3.org/1999/xlink","xlink:actuate",A);break;case"xlinkArcrole":_t(o,"http://www.w3.org/1999/xlink","xlink:arcrole",A);break;case"xlinkRole":_t(o,"http://www.w3.org/1999/xlink","xlink:role",A);break;case"xlinkShow":_t(o,"http://www.w3.org/1999/xlink","xlink:show",A);break;case"xlinkTitle":_t(o,"http://www.w3.org/1999/xlink","xlink:title",A);break;case"xlinkType":_t(o,"http://www.w3.org/1999/xlink","xlink:type",A);break;case"xmlBase":_t(o,"http://www.w3.org/XML/1998/namespace","xml:base",A);break;case"xmlLang":_t(o,"http://www.w3.org/XML/1998/namespace","xml:lang",A);break;case"xmlSpace":_t(o,"http://www.w3.org/XML/1998/namespace","xml:space",A);break;case"is":Je(o,"is",A);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Bf.get(y)||y,Je(o,y,A))}}function ME(o,u,y,A,L,H){switch(y){case"style":Sd(o,A,H);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(i(61));if(y=A.__html,y!=null){if(L.children!=null)throw Error(i(60));o.innerHTML=y}}break;case"children":typeof A=="string"?Xs(o,A):(typeof A=="number"||typeof A=="bigint")&&Xs(o,""+A);break;case"onScroll":A!=null&&Oi("scroll",o);break;case"onScrollEnd":A!=null&&Oi("scrollend",o);break;case"onClick":A!=null&&(o.onclick=q1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lt.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(L=y.endsWith("Capture"),u=y.slice(2,L?y.length-7:void 0),H=o[Va]||null,H=H!=null?H[y]:null,typeof H=="function"&&o.removeEventListener(u,H,L),typeof A=="function")){typeof H!="function"&&H!==null&&(y in o?o[y]=null:o.hasAttribute(y)&&o.removeAttribute(y)),o.addEventListener(u,A,L);break e}y in o?o[y]=A:A===!0?o.setAttribute(y,""):Je(o,y,A)}}}function vo(o,u,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oi("error",o),Oi("load",o);var A=!1,L=!1,H;for(H in y)if(y.hasOwnProperty(H)){var re=y[H];if(re!=null)switch(H){case"src":A=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Oa(o,u,H,re,y,null)}}L&&Oa(o,u,"srcSet",y.srcSet,y,null),A&&Oa(o,u,"src",y.src,y,null);return;case"input":Oi("invalid",o);var me=H=re=L=null,Oe=null,nt=null;for(A in y)if(y.hasOwnProperty(A)){var St=y[A];if(St!=null)switch(A){case"name":L=St;break;case"type":re=St;break;case"checked":Oe=St;break;case"defaultChecked":nt=St;break;case"value":H=St;break;case"defaultValue":me=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(i(137,u));break;default:Oa(o,u,A,St,y,null)}}Gn(o,H,me,Oe,nt,re,L,!1),vi(o);return;case"select":Oi("invalid",o),A=re=H=null;for(L in y)if(y.hasOwnProperty(L)&&(me=y[L],me!=null))switch(L){case"value":H=me;break;case"defaultValue":re=me;break;case"multiple":A=me;default:Oa(o,u,L,me,y,null)}u=H,y=re,o.multiple=!!A,u!=null?Ei(o,!!A,u,!1):y!=null&&Ei(o,!!A,y,!0);return;case"textarea":Oi("invalid",o),H=L=A=null;for(re in y)if(y.hasOwnProperty(re)&&(me=y[re],me!=null))switch(re){case"value":A=me;break;case"defaultValue":L=me;break;case"children":H=me;break;case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(91));break;default:Oa(o,u,re,me,y,null)}ds(o,A,L,H),vi(o);return;case"option":for(Oe in y)if(y.hasOwnProperty(Oe)&&(A=y[Oe],A!=null))switch(Oe){case"selected":o.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:Oa(o,u,Oe,A,y,null)}return;case"dialog":Oi("beforetoggle",o),Oi("toggle",o),Oi("cancel",o),Oi("close",o);break;case"iframe":case"object":Oi("load",o);break;case"video":case"audio":for(A=0;A<ty.length;A++)Oi(ty[A],o);break;case"image":Oi("error",o),Oi("load",o);break;case"details":Oi("toggle",o);break;case"embed":case"source":case"link":Oi("error",o),Oi("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(nt in y)if(y.hasOwnProperty(nt)&&(A=y[nt],A!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Oa(o,u,nt,A,y,null)}return;default:if(Ah(u)){for(St in y)y.hasOwnProperty(St)&&(A=y[St],A!==void 0&&ME(o,u,St,A,y,void 0));return}}for(me in y)y.hasOwnProperty(me)&&(A=y[me],A!=null&&Oa(o,u,me,A,y,null))}function ez(o,u,y,A){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,H=null,re=null,me=null,Oe=null,nt=null,St=null;for(ot in y){var Ct=y[ot];if(y.hasOwnProperty(ot)&&Ct!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":Oe=Ct;default:A.hasOwnProperty(ot)||Oa(o,u,ot,null,A,Ct)}}for(var rt in A){var ot=A[rt];if(Ct=y[rt],A.hasOwnProperty(rt)&&(ot!=null||Ct!=null))switch(rt){case"type":H=ot;break;case"name":L=ot;break;case"checked":nt=ot;break;case"defaultChecked":St=ot;break;case"value":re=ot;break;case"defaultValue":me=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,u));break;default:ot!==Ct&&Oa(o,u,rt,ot,A,Ct)}}$n(o,re,me,Oe,nt,St,H,L);return;case"select":ot=re=me=rt=null;for(H in y)if(Oe=y[H],y.hasOwnProperty(H)&&Oe!=null)switch(H){case"value":break;case"multiple":ot=Oe;default:A.hasOwnProperty(H)||Oa(o,u,H,null,A,Oe)}for(L in A)if(H=A[L],Oe=y[L],A.hasOwnProperty(L)&&(H!=null||Oe!=null))switch(L){case"value":rt=H;break;case"defaultValue":me=H;break;case"multiple":re=H;default:H!==Oe&&Oa(o,u,L,H,A,Oe)}u=me,y=re,A=ot,rt!=null?Ei(o,!!y,rt,!1):!!A!=!!y&&(u!=null?Ei(o,!!y,u,!0):Ei(o,!!y,y?[]:"",!1));return;case"textarea":ot=rt=null;for(me in y)if(L=y[me],y.hasOwnProperty(me)&&L!=null&&!A.hasOwnProperty(me))switch(me){case"value":break;case"children":break;default:Oa(o,u,me,null,A,L)}for(re in A)if(L=A[re],H=y[re],A.hasOwnProperty(re)&&(L!=null||H!=null))switch(re){case"value":rt=L;break;case"defaultValue":ot=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(91));break;default:L!==H&&Oa(o,u,re,L,A,H)}ia(o,rt,ot);return;case"option":for(var Hn in y)if(rt=y[Hn],y.hasOwnProperty(Hn)&&rt!=null&&!A.hasOwnProperty(Hn))switch(Hn){case"selected":o.selected=!1;break;default:Oa(o,u,Hn,null,A,rt)}for(Oe in A)if(rt=A[Oe],ot=y[Oe],A.hasOwnProperty(Oe)&&rt!==ot&&(rt!=null||ot!=null))switch(Oe){case"selected":o.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Oa(o,u,Oe,rt,A,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nn in y)rt=y[Nn],y.hasOwnProperty(Nn)&&rt!=null&&!A.hasOwnProperty(Nn)&&Oa(o,u,Nn,null,A,rt);for(nt in A)if(rt=A[nt],ot=y[nt],A.hasOwnProperty(nt)&&rt!==ot&&(rt!=null||ot!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(i(137,u));break;default:Oa(o,u,nt,rt,A,ot)}return;default:if(Ah(u)){for(var ja in y)rt=y[ja],y.hasOwnProperty(ja)&&rt!==void 0&&!A.hasOwnProperty(ja)&&ME(o,u,ja,void 0,A,rt);for(St in A)rt=A[St],ot=y[St],!A.hasOwnProperty(St)||rt===ot||rt===void 0&&ot===void 0||ME(o,u,St,rt,A,ot);return}}for(var Ze in y)rt=y[Ze],y.hasOwnProperty(Ze)&&rt!=null&&!A.hasOwnProperty(Ze)&&Oa(o,u,Ze,null,A,rt);for(Ct in A)rt=A[Ct],ot=y[Ct],!A.hasOwnProperty(Ct)||rt===ot||rt==null&&ot==null||Oa(o,u,Ct,rt,A,ot)}var TE=null,CE=null;function X1(o){return o.nodeType===9?o:o.ownerDocument}function UA(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function LA(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function AE(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var NE=null;function tz(){var o=window.event;return o&&o.type==="popstate"?o===NE?!1:(NE=o,!0):(NE=null,!1)}var zA=typeof setTimeout=="function"?setTimeout:void 0,nz=typeof clearTimeout=="function"?clearTimeout:void 0,IA=typeof Promise=="function"?Promise:void 0,iz=typeof queueMicrotask=="function"?queueMicrotask:typeof IA<"u"?function(o){return IA.resolve(null).then(o).catch(az)}:zA;function az(o){setTimeout(function(){throw o})}function vp(o){return o==="head"}function BA(o,u){var y=u,A=0,L=0;do{var H=y.nextSibling;if(o.removeChild(y),H&&H.nodeType===8)if(y=H.data,y==="/$"){if(0<A&&8>A){y=A;var re=o.ownerDocument;if(y&1&&iy(re.documentElement),y&2&&iy(re.body),y&4)for(y=re.head,iy(y),re=y.firstChild;re;){var me=re.nextSibling,Oe=re.nodeName;re[Ss]||Oe==="SCRIPT"||Oe==="STYLE"||Oe==="LINK"&&re.rel.toLowerCase()==="stylesheet"||y.removeChild(re),re=me}}if(L===0){o.removeChild(H),dy(u);return}L--}else y==="$"||y==="$?"||y==="$!"?L++:A=y.charCodeAt(0)-48;else A=0;y=H}while(y);dy(u)}function RE(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var y=u;switch(u=u.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":RE(y),Pi(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}o.removeChild(y)}}function sz(o,u,y,A){for(;o.nodeType===1;){var L=y;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!A&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(A){if(!o[Ss])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(H=o.getAttribute("rel"),H==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(H!==L.rel||o.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||o.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||o.getAttribute("title")!==(L.title==null?null:L.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(H=o.getAttribute("src"),(H!==(L.src==null?null:L.src)||o.getAttribute("type")!==(L.type==null?null:L.type)||o.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&H&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var H=L.name==null?null:""+L.name;if(L.type==="hidden"&&o.getAttribute("name")===H)return o}else return o;if(o=ed(o.nextSibling),o===null)break}return null}function rz(o,u,y){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!y||(o=ed(o.nextSibling),o===null))return null;return o}function DE(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function oz(o,u){var y=o.ownerDocument;if(o.data!=="$?"||y.readyState==="complete")u();else{var A=function(){u(),y.removeEventListener("DOMContentLoaded",A)};y.addEventListener("DOMContentLoaded",A),o._reactRetry=A}}function ed(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return o}var OE=null;function FA(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var y=o.data;if(y==="$"||y==="$!"||y==="$?"){if(u===0)return o;u--}else y==="/$"&&u++}o=o.previousSibling}return null}function kA(o,u,y){switch(u=X1(y),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function iy(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Pi(o)}var du=new Map,HA=new Set;function Y1(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var uf=X.d;X.d={f:lz,r:cz,D:uz,C:dz,L:hz,m:fz,X:mz,S:pz,M:gz};function lz(){var o=uf.f(),u=Kr();return o||u}function cz(o){var u=ve(o);u!==null&&u.tag===5&&u.type==="form"?h0(u):uf.r(o)}var E0=typeof document>"u"?null:document;function GA(o,u,y){var A=E0;if(A&&typeof u=="string"&&u){var L=yn(u);L='link[rel="'+o+'"][href="'+L+'"]',typeof y=="string"&&(L+='[crossorigin="'+y+'"]'),HA.has(L)||(HA.add(L),o={rel:o,crossOrigin:y,href:u},A.querySelector(L)===null&&(u=A.createElement("link"),vo(u,"link",o),at(u),A.head.appendChild(u)))}}function uz(o){uf.D(o),GA("dns-prefetch",o,null)}function dz(o,u){uf.C(o,u),GA("preconnect",o,u)}function hz(o,u,y){uf.L(o,u,y);var A=E0;if(A&&o&&u){var L='link[rel="preload"][as="'+yn(u)+'"]';u==="image"&&y&&y.imageSrcSet?(L+='[imagesrcset="'+yn(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(L+='[imagesizes="'+yn(y.imageSizes)+'"]')):L+='[href="'+yn(o)+'"]';var H=L;switch(u){case"style":H=w0(o);break;case"script":H=M0(o)}du.has(H)||(o=g({rel:"preload",href:u==="image"&&y&&y.imageSrcSet?void 0:o,as:u},y),du.set(H,o),A.querySelector(L)!==null||u==="style"&&A.querySelector(ay(H))||u==="script"&&A.querySelector(sy(H))||(u=A.createElement("link"),vo(u,"link",o),at(u),A.head.appendChild(u)))}}function fz(o,u){uf.m(o,u);var y=E0;if(y&&o){var A=u&&typeof u.as=="string"?u.as:"script",L='link[rel="modulepreload"][as="'+yn(A)+'"][href="'+yn(o)+'"]',H=L;switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":H=M0(o)}if(!du.has(H)&&(o=g({rel:"modulepreload",href:o},u),du.set(H,o),y.querySelector(L)===null)){switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(sy(H)))return}A=y.createElement("link"),vo(A,"link",o),at(A),y.head.appendChild(A)}}}function pz(o,u,y){uf.S(o,u,y);var A=E0;if(A&&o){var L=tt(A).hoistableStyles,H=w0(o);u=u||"default";var re=L.get(H);if(!re){var me={loading:0,preload:null};if(re=A.querySelector(ay(H)))me.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":u},y),(y=du.get(H))&&jE(o,y);var Oe=re=A.createElement("link");at(Oe),vo(Oe,"link",o),Oe._p=new Promise(function(nt,St){Oe.onload=nt,Oe.onerror=St}),Oe.addEventListener("load",function(){me.loading|=1}),Oe.addEventListener("error",function(){me.loading|=2}),me.loading|=4,W1(re,u,A)}re={type:"stylesheet",instance:re,count:1,state:me},L.set(H,re)}}}function mz(o,u){uf.X(o,u);var y=E0;if(y&&o){var A=tt(y).hoistableScripts,L=M0(o),H=A.get(L);H||(H=y.querySelector(sy(L)),H||(o=g({src:o,async:!0},u),(u=du.get(L))&&PE(o,u),H=y.createElement("script"),at(H),vo(H,"link",o),y.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},A.set(L,H))}}function gz(o,u){uf.M(o,u);var y=E0;if(y&&o){var A=tt(y).hoistableScripts,L=M0(o),H=A.get(L);H||(H=y.querySelector(sy(L)),H||(o=g({src:o,async:!0,type:"module"},u),(u=du.get(L))&&PE(o,u),H=y.createElement("script"),at(H),vo(H,"link",o),y.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},A.set(L,H))}}function VA(o,u,y,A){var L=(L=ye.current)?Y1(L):null;if(!L)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(u=w0(y.href),y=tt(L).hoistableStyles,A=y.get(u),A||(A={type:"style",instance:null,count:0,state:null},y.set(u,A)),A):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){o=w0(y.href);var H=tt(L).hoistableStyles,re=H.get(o);if(re||(L=L.ownerDocument||L,re={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},H.set(o,re),(H=L.querySelector(ay(o)))&&!H._p&&(re.instance=H,re.state.loading=5),du.has(o)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},du.set(o,y),H||vz(L,o,y,re.state))),u&&A===null)throw Error(i(528,""));return re}if(u&&A!==null)throw Error(i(529,""));return null;case"script":return u=y.async,y=y.src,typeof y=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=M0(y),y=tt(L).hoistableScripts,A=y.get(u),A||(A={type:"script",instance:null,count:0,state:null},y.set(u,A)),A):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function w0(o){return'href="'+yn(o)+'"'}function ay(o){return'link[rel="stylesheet"]['+o+"]"}function qA(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function vz(o,u,y,A){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?A.loading=1:(u=o.createElement("link"),A.preload=u,u.addEventListener("load",function(){return A.loading|=1}),u.addEventListener("error",function(){return A.loading|=2}),vo(u,"link",y),at(u),o.head.appendChild(u))}function M0(o){return'[src="'+yn(o)+'"]'}function sy(o){return"script[async]"+o}function XA(o,u,y){if(u.count++,u.instance===null)switch(u.type){case"style":var A=o.querySelector('style[data-href~="'+yn(y.href)+'"]');if(A)return u.instance=A,at(A),A;var L=g({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return A=(o.ownerDocument||o).createElement("style"),at(A),vo(A,"style",L),W1(A,y.precedence,o),u.instance=A;case"stylesheet":L=w0(y.href);var H=o.querySelector(ay(L));if(H)return u.state.loading|=4,u.instance=H,at(H),H;A=qA(y),(L=du.get(L))&&jE(A,L),H=(o.ownerDocument||o).createElement("link"),at(H);var re=H;return re._p=new Promise(function(me,Oe){re.onload=me,re.onerror=Oe}),vo(H,"link",A),u.state.loading|=4,W1(H,y.precedence,o),u.instance=H;case"script":return H=M0(y.src),(L=o.querySelector(sy(H)))?(u.instance=L,at(L),L):(A=y,(L=du.get(H))&&(A=g({},y),PE(A,L)),o=o.ownerDocument||o,L=o.createElement("script"),at(L),vo(L,"link",A),o.head.appendChild(L),u.instance=L);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(A=u.instance,u.state.loading|=4,W1(A,y.precedence,o));return u.instance}function W1(o,u,y){for(var A=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=A.length?A[A.length-1]:null,H=L,re=0;re<A.length;re++){var me=A[re];if(me.dataset.precedence===u)H=me;else if(H!==L)break}H?H.parentNode.insertBefore(o,H.nextSibling):(u=y.nodeType===9?y.head:y,u.insertBefore(o,u.firstChild))}function jE(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function PE(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var K1=null;function YA(o,u,y){if(K1===null){var A=new Map,L=K1=new Map;L.set(y,A)}else L=K1,A=L.get(y),A||(A=new Map,L.set(y,A));if(A.has(o))return A;for(A.set(o,null),y=y.getElementsByTagName(o),L=0;L<y.length;L++){var H=y[L];if(!(H[Ss]||H[la]||o==="link"&&H.getAttribute("rel")==="stylesheet")&&H.namespaceURI!=="http://www.w3.org/2000/svg"){var re=H.getAttribute(u)||"";re=o+re;var me=A.get(re);me?me.push(H):A.set(re,[H])}}return A}function WA(o,u,y){o=o.ownerDocument||o,o.head.insertBefore(y,u==="title"?o.querySelector("head > title"):null)}function yz(o,u,y){if(y===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function KA(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var ry=null;function xz(){}function bz(o,u,y){if(ry===null)throw Error(i(475));var A=ry;if(u.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var L=w0(y.href),H=o.querySelector(ay(L));if(H){o=H._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(A.count++,A=Z1.bind(A),o.then(A,A)),u.state.loading|=4,u.instance=H,at(H);return}H=o.ownerDocument||o,y=qA(y),(L=du.get(L))&&jE(y,L),H=H.createElement("link"),at(H);var re=H;re._p=new Promise(function(me,Oe){re.onload=me,re.onerror=Oe}),vo(H,"link",y),u.instance=H}A.stylesheets===null&&(A.stylesheets=new Map),A.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(A.count++,u=Z1.bind(A),o.addEventListener("load",u),o.addEventListener("error",u))}}function _z(){if(ry===null)throw Error(i(475));var o=ry;return o.stylesheets&&o.count===0&&UE(o,o.stylesheets),0<o.count?function(u){var y=setTimeout(function(){if(o.stylesheets&&UE(o,o.stylesheets),o.unsuspend){var A=o.unsuspend;o.unsuspend=null,A()}},6e4);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(y)}}:null}function Z1(){if(this.count--,this.count===0){if(this.stylesheets)UE(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Q1=null;function UE(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Q1=new Map,u.forEach(Sz,o),Q1=null,Z1.call(o))}function Sz(o,u){if(!(u.state.loading&4)){var y=Q1.get(o);if(y)var A=y.get(null);else{y=new Map,Q1.set(o,y);for(var L=o.querySelectorAll("link[data-precedence],style[data-precedence]"),H=0;H<L.length;H++){var re=L[H];(re.nodeName==="LINK"||re.getAttribute("media")!=="not all")&&(y.set(re.dataset.precedence,re),A=re)}A&&y.set(null,A)}L=u.instance,re=L.getAttribute("data-precedence"),H=y.get(re)||A,H===A&&y.set(null,L),y.set(re,L),this.count++,A=Z1.bind(this),L.addEventListener("load",A),L.addEventListener("error",A),H?H.parentNode.insertBefore(L,H.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(L,o.firstChild)),u.state.loading|=4}}var oy={$$typeof:C,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function Ez(o,u,y,A,L,H,re,me){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=A,this.onUncaughtError=L,this.onCaughtError=H,this.onRecoverableError=re,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=me,this.incompleteTransitions=new Map}function ZA(o,u,y,A,L,H,re,me,Oe,nt,St,Ct){return o=new Ez(o,u,y,re,me,Oe,nt,Ct),u=1,H===!0&&(u|=24),H=gr(3,null,null,u),o.current=H,H.stateNode=o,u=Pu(),u.refCount++,o.pooledCache=u,u.refCount++,H.memoizedState={element:A,isDehydrated:y,cache:u},Kh(H),o}function QA(o){return o?(o=_c,o):_c}function JA(o,u,y,A,L,H){L=QA(L),A.context===null?A.context=L:A.pendingContext=L,A=Oo(u),A.payload={element:y},H=H===void 0?null:H,H!==null&&(A.callback=H),y=$s(o,A,u),y!==null&&(Ka(y,o,u),Tc(y,o,u))}function $A(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var y=o.retryLane;o.retryLane=y!==0&&y<u?y:u}}function LE(o,u){$A(o,u),(o=o.alternate)&&$A(o,u)}function eN(o){if(o.tag===13){var u=io(o,67108864);u!==null&&Ka(u,o,67108864),LE(o,67108864)}}var J1=!0;function wz(o,u,y,A){var L=$.T;$.T=null;var H=X.p;try{X.p=2,zE(o,u,y,A)}finally{X.p=H,$.T=L}}function Mz(o,u,y,A){var L=$.T;$.T=null;var H=X.p;try{X.p=8,zE(o,u,y,A)}finally{X.p=H,$.T=L}}function zE(o,u,y,A){if(J1){var L=IE(A);if(L===null)wE(o,u,A,$1,y),nN(o,A);else if(Cz(L,o,u,y,A))A.stopPropagation();else if(nN(o,A),u&4&&-1<Tz.indexOf(o)){for(;L!==null;){var H=ve(L);if(H!==null)switch(H.tag){case 3:if(H=H.stateNode,H.current.memoizedState.isDehydrated){var re=Wt(H.pendingLanes);if(re!==0){var me=H;for(me.pendingLanes|=2,me.entangledLanes|=2;re;){var Oe=1<<31-Nt(re);me.entanglements[1]|=Oe,re&=~Oe}tn(H),(Cn&6)===0&&(vs=Le()+500,ca(0))}}break;case 13:me=io(H,2),me!==null&&Ka(me,H,2),Kr(),LE(H,2)}if(H=IE(A),H===null&&wE(o,u,A,$1,y),H===L)break;L=H}L!==null&&A.stopPropagation()}else wE(o,u,A,null,y)}}function IE(o){return o=rc(o),BE(o)}var $1=null;function BE(o){if($1=null,o=le(o),o!==null){var u=s(o);if(u===null)o=null;else{var y=u.tag;if(y===13){if(o=r(u),o!==null)return o;o=null}else if(y===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return $1=o,null}function tN(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ie()){case Et:return 2;case ct:return 8;case At:case Pt:return 32;case Se:return 268435456;default:return 32}default:return 32}}var FE=!1,yp=null,xp=null,bp=null,ly=new Map,cy=new Map,_p=[],Tz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nN(o,u){switch(o){case"focusin":case"focusout":yp=null;break;case"dragenter":case"dragleave":xp=null;break;case"mouseover":case"mouseout":bp=null;break;case"pointerover":case"pointerout":ly.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":cy.delete(u.pointerId)}}function uy(o,u,y,A,L,H){return o===null||o.nativeEvent!==H?(o={blockedOn:u,domEventName:y,eventSystemFlags:A,nativeEvent:H,targetContainers:[L]},u!==null&&(u=ve(u),u!==null&&eN(u)),o):(o.eventSystemFlags|=A,u=o.targetContainers,L!==null&&u.indexOf(L)===-1&&u.push(L),o)}function Cz(o,u,y,A,L){switch(u){case"focusin":return yp=uy(yp,o,u,y,A,L),!0;case"dragenter":return xp=uy(xp,o,u,y,A,L),!0;case"mouseover":return bp=uy(bp,o,u,y,A,L),!0;case"pointerover":var H=L.pointerId;return ly.set(H,uy(ly.get(H)||null,o,u,y,A,L)),!0;case"gotpointercapture":return H=L.pointerId,cy.set(H,uy(cy.get(H)||null,o,u,y,A,L)),!0}return!1}function iN(o){var u=le(o.target);if(u!==null){var y=s(u);if(y!==null){if(u=y.tag,u===13){if(u=r(y),u!==null){o.blockedOn=u,ga(o.priority,function(){if(y.tag===13){var A=Ki();A=$t(A);var L=io(y,A);L!==null&&Ka(L,y,A),LE(y,A)}});return}}else if(u===3&&y.stateNode.current.memoizedState.isDehydrated){o.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}o.blockedOn=null}function eb(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var y=IE(o.nativeEvent);if(y===null){y=o.nativeEvent;var A=new y.constructor(y.type,y);Rh=A,y.target.dispatchEvent(A),Rh=null}else return u=ve(y),u!==null&&eN(u),o.blockedOn=y,!1;u.shift()}return!0}function aN(o,u,y){eb(o)&&y.delete(u)}function Az(){FE=!1,yp!==null&&eb(yp)&&(yp=null),xp!==null&&eb(xp)&&(xp=null),bp!==null&&eb(bp)&&(bp=null),ly.forEach(aN),cy.forEach(aN)}function tb(o,u){o.blockedOn===u&&(o.blockedOn=null,FE||(FE=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Az)))}var nb=null;function sN(o){nb!==o&&(nb=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){nb===o&&(nb=null);for(var u=0;u<o.length;u+=3){var y=o[u],A=o[u+1],L=o[u+2];if(typeof A!="function"){if(BE(A||y)===null)continue;break}var H=ve(y);H!==null&&(o.splice(u,3),u-=3,Cm(H,{pending:!0,data:L,method:y.method,action:A},A,L))}}))}function dy(o){function u(Oe){return tb(Oe,o)}yp!==null&&tb(yp,o),xp!==null&&tb(xp,o),bp!==null&&tb(bp,o),ly.forEach(u),cy.forEach(u);for(var y=0;y<_p.length;y++){var A=_p[y];A.blockedOn===o&&(A.blockedOn=null)}for(;0<_p.length&&(y=_p[0],y.blockedOn===null);)iN(y),y.blockedOn===null&&_p.shift();if(y=(o.ownerDocument||o).$$reactFormReplay,y!=null)for(A=0;A<y.length;A+=3){var L=y[A],H=y[A+1],re=L[Va]||null;if(typeof H=="function")re||sN(y);else if(re){var me=null;if(H&&H.hasAttribute("formAction")){if(L=H,re=H[Va]||null)me=re.formAction;else if(BE(L)!==null)continue}else me=re.action;typeof me=="function"?y[A+1]=me:(y.splice(A,3),A-=3),sN(y)}}}function kE(o){this._internalRoot=o}ib.prototype.render=kE.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var y=u.current,A=Ki();JA(y,A,o,u,null,null)},ib.prototype.unmount=kE.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;JA(o.current,2,null,o,null,null),Kr(),u[Na]=null}};function ib(o){this._internalRoot=o}ib.prototype.unstable_scheduleHydration=function(o){if(o){var u=Dn();o={blockedOn:null,target:o,priority:u};for(var y=0;y<_p.length&&u!==0&&u<_p[y].priority;y++);_p.splice(y,0,o),y===0&&iN(o)}};var rN=e.version;if(rN!=="19.1.1")throw Error(i(527,rN,"19.1.1"));X.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=d(u),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var Nz={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ab=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ab.isDisabled&&ab.supportsFiber)try{Ve=ab.inject(Nz),Te=ab}catch{}}return fy.createRoot=function(o,u){if(!a(o))throw Error(i(299));var y=!1,A="",L=ql,H=nr,re=x0,me=null;return u!=null&&(u.unstable_strictMode===!0&&(y=!0),u.identifierPrefix!==void 0&&(A=u.identifierPrefix),u.onUncaughtError!==void 0&&(L=u.onUncaughtError),u.onCaughtError!==void 0&&(H=u.onCaughtError),u.onRecoverableError!==void 0&&(re=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(me=u.unstable_transitionCallbacks)),u=ZA(o,1,!1,null,null,y,A,L,H,re,me,null),o[Na]=u.current,EE(o),new kE(u)},fy.hydrateRoot=function(o,u,y){if(!a(o))throw Error(i(299));var A=!1,L="",H=ql,re=nr,me=x0,Oe=null,nt=null;return y!=null&&(y.unstable_strictMode===!0&&(A=!0),y.identifierPrefix!==void 0&&(L=y.identifierPrefix),y.onUncaughtError!==void 0&&(H=y.onUncaughtError),y.onCaughtError!==void 0&&(re=y.onCaughtError),y.onRecoverableError!==void 0&&(me=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(Oe=y.unstable_transitionCallbacks),y.formState!==void 0&&(nt=y.formState)),u=ZA(o,1,!0,u,y??null,A,L,H,re,me,Oe,nt),u.context=QA(null),y=u.current,A=Ki(),A=$t(A),L=Oo(A),L.callback=null,$s(y,L,A),y=A,u.current.lanes=y,kt(u,y),tn(u),o[Na]=u.current,EE(o),new ib(u)},fy.version="19.1.1",fy}var vN;function Bz(){if(vN)return VE.exports;vN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),VE.exports=Iz(),VE.exports}var Fz=Bz();const kz=Uf(Fz);function Y6(n,e){return function(){return n.apply(e,arguments)}}const{toString:Hz}=Object.prototype,{getPrototypeOf:d3}=Object,{iterator:XS,toStringTag:W6}=Symbol,YS=(n=>e=>{const t=Hz.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),vd=n=>(n=n.toLowerCase(),e=>YS(e)===n),WS=n=>e=>typeof e===n,{isArray:jv}=Array,Gx=WS("undefined");function x1(n){return n!==null&&!Gx(n)&&n.constructor!==null&&!Gx(n.constructor)&&ic(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const K6=vd("ArrayBuffer");function Gz(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&K6(n.buffer),e}const Vz=WS("string"),ic=WS("function"),Z6=WS("number"),b1=n=>n!==null&&typeof n=="object",qz=n=>n===!0||n===!1,x_=n=>{if(YS(n)!=="object")return!1;const e=d3(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(W6 in n)&&!(XS in n)},Xz=n=>{if(!b1(n)||x1(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Yz=vd("Date"),Wz=vd("File"),Kz=vd("Blob"),Zz=vd("FileList"),Qz=n=>b1(n)&&ic(n.pipe),Jz=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ic(n.append)&&((e=YS(n))==="formdata"||e==="object"&&ic(n.toString)&&n.toString()==="[object FormData]"))},$z=vd("URLSearchParams"),[eI,tI,nI,iI]=["ReadableStream","Request","Response","Headers"].map(vd),aI=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _1(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,a;if(typeof n!="object"&&(n=[n]),jv(n))for(i=0,a=n.length;i<a;i++)e.call(null,n[i],i,n);else{if(x1(n))return;const s=t?Object.getOwnPropertyNames(n):Object.keys(n),r=s.length;let l;for(i=0;i<r;i++)l=s[i],e.call(null,n[l],l,n)}}function Q6(n,e){if(x1(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,a;for(;i-- >0;)if(a=t[i],e===a.toLowerCase())return a;return null}const ig=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,J6=n=>!Gx(n)&&n!==ig;function QM(){const{caseless:n}=J6(this)&&this||{},e={},t=(i,a)=>{const s=n&&Q6(e,a)||a;x_(e[s])&&x_(i)?e[s]=QM(e[s],i):x_(i)?e[s]=QM({},i):jv(i)?e[s]=i.slice():e[s]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&_1(arguments[i],t);return e}const sI=(n,e,t,{allOwnKeys:i}={})=>(_1(e,(a,s)=>{t&&ic(a)?n[s]=Y6(a,t):n[s]=a},{allOwnKeys:i}),n),rI=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),oI=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},lI=(n,e,t,i)=>{let a,s,r;const l={};if(e=e||{},n==null)return e;do{for(a=Object.getOwnPropertyNames(n),s=a.length;s-- >0;)r=a[s],(!i||i(r,n,e))&&!l[r]&&(e[r]=n[r],l[r]=!0);n=t!==!1&&d3(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},cI=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},uI=n=>{if(!n)return null;if(jv(n))return n;let e=n.length;if(!Z6(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},dI=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&d3(Uint8Array)),hI=(n,e)=>{const i=(n&&n[XS]).call(n);let a;for(;(a=i.next())&&!a.done;){const s=a.value;e.call(n,s[0],s[1])}},fI=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},pI=vd("HTMLFormElement"),mI=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,a){return i.toUpperCase()+a}),yN=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),gI=vd("RegExp"),$6=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};_1(t,(a,s)=>{let r;(r=e(a,s,n))!==!1&&(i[s]=r||a)}),Object.defineProperties(n,i)},vI=n=>{$6(n,(e,t)=>{if(ic(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(ic(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},yI=(n,e)=>{const t={},i=a=>{a.forEach(s=>{t[s]=!0})};return jv(n)?i(n):i(String(n).split(e)),t},xI=()=>{},bI=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function _I(n){return!!(n&&ic(n.append)&&n[W6]==="FormData"&&n[XS])}const SI=n=>{const e=new Array(10),t=(i,a)=>{if(b1(i)){if(e.indexOf(i)>=0)return;if(x1(i))return i;if(!("toJSON"in i)){e[a]=i;const s=jv(i)?[]:{};return _1(i,(r,l)=>{const d=t(r,a+1);!Gx(d)&&(s[l]=d)}),e[a]=void 0,s}}return i};return t(n,0)},EI=vd("AsyncFunction"),wI=n=>n&&(b1(n)||ic(n))&&ic(n.then)&&ic(n.catch),e8=((n,e)=>n?setImmediate:e?((t,i)=>(ig.addEventListener("message",({source:a,data:s})=>{a===ig&&s===t&&i.length&&i.shift()()},!1),a=>{i.push(a),ig.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ic(ig.postMessage)),MI=typeof queueMicrotask<"u"?queueMicrotask.bind(ig):typeof process<"u"&&process.nextTick||e8,TI=n=>n!=null&&ic(n[XS]),ht={isArray:jv,isArrayBuffer:K6,isBuffer:x1,isFormData:Jz,isArrayBufferView:Gz,isString:Vz,isNumber:Z6,isBoolean:qz,isObject:b1,isPlainObject:x_,isEmptyObject:Xz,isReadableStream:eI,isRequest:tI,isResponse:nI,isHeaders:iI,isUndefined:Gx,isDate:Yz,isFile:Wz,isBlob:Kz,isRegExp:gI,isFunction:ic,isStream:Qz,isURLSearchParams:$z,isTypedArray:dI,isFileList:Zz,forEach:_1,merge:QM,extend:sI,trim:aI,stripBOM:rI,inherits:oI,toFlatObject:lI,kindOf:YS,kindOfTest:vd,endsWith:cI,toArray:uI,forEachEntry:hI,matchAll:fI,isHTMLForm:pI,hasOwnProperty:yN,hasOwnProp:yN,reduceDescriptors:$6,freezeMethods:vI,toObjectSet:yI,toCamelCase:mI,noop:xI,toFiniteNumber:bI,findKey:Q6,global:ig,isContextDefined:J6,isSpecCompliantForm:_I,toJSONObject:SI,isAsyncFn:EI,isThenable:wI,setImmediate:e8,asap:MI,isIterable:TI};function hi(n,e,t,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}ht.inherits(hi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ht.toJSONObject(this.config),code:this.code,status:this.status}}});const t8=hi.prototype,n8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{n8[n]={value:n}});Object.defineProperties(hi,n8);Object.defineProperty(t8,"isAxiosError",{value:!0});hi.from=(n,e,t,i,a,s)=>{const r=Object.create(t8);return ht.toFlatObject(n,r,function(d){return d!==Error.prototype},l=>l!=="isAxiosError"),hi.call(r,n.message,e,t,i,a),r.cause=n,r.name=n.name,s&&Object.assign(r,s),r};const CI=null;function JM(n){return ht.isPlainObject(n)||ht.isArray(n)}function i8(n){return ht.endsWith(n,"[]")?n.slice(0,-2):n}function xN(n,e,t){return n?n.concat(e).map(function(a,s){return a=i8(a),!t&&s?"["+a+"]":a}).join(t?".":""):e}function AI(n){return ht.isArray(n)&&!n.some(JM)}const NI=ht.toFlatObject(ht,{},null,function(e){return/^is[A-Z]/.test(e)});function KS(n,e,t){if(!ht.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ht.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,M){return!ht.isUndefined(M[w])});const i=t.metaTokens,a=t.visitor||g,s=t.dots,r=t.indexes,d=(t.Blob||typeof Blob<"u"&&Blob)&&ht.isSpecCompliantForm(e);if(!ht.isFunction(a))throw new TypeError("visitor must be a function");function f(S){if(S===null)return"";if(ht.isDate(S))return S.toISOString();if(ht.isBoolean(S))return S.toString();if(!d&&ht.isBlob(S))throw new hi("Blob is not supported. Use a Buffer instead.");return ht.isArrayBuffer(S)||ht.isTypedArray(S)?d&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function g(S,w,M){let E=S;if(S&&!M&&typeof S=="object"){if(ht.endsWith(w,"{}"))w=i?w:w.slice(0,-2),S=JSON.stringify(S);else if(ht.isArray(S)&&AI(S)||(ht.isFileList(S)||ht.endsWith(w,"[]"))&&(E=ht.toArray(S)))return w=i8(w),E.forEach(function(C,D){!(ht.isUndefined(C)||C===null)&&e.append(r===!0?xN([w],D,s):r===null?w:w+"[]",f(C))}),!1}return JM(S)?!0:(e.append(xN(M,w,s),f(S)),!1)}const x=[],b=Object.assign(NI,{defaultVisitor:g,convertValue:f,isVisitable:JM});function _(S,w){if(!ht.isUndefined(S)){if(x.indexOf(S)!==-1)throw Error("Circular reference detected in "+w.join("."));x.push(S),ht.forEach(S,function(E,T){(!(ht.isUndefined(E)||E===null)&&a.call(e,E,ht.isString(T)?T.trim():T,w,b))===!0&&_(E,w?w.concat(T):[T])}),x.pop()}}if(!ht.isObject(n))throw new TypeError("data must be an object");return _(n),e}function bN(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function h3(n,e){this._pairs=[],n&&KS(n,this,e)}const a8=h3.prototype;a8.append=function(e,t){this._pairs.push([e,t])};a8.toString=function(e){const t=e?function(i){return e.call(this,i,bN)}:bN;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function RI(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function s8(n,e,t){if(!e)return n;const i=t&&t.encode||RI;ht.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let s;if(a?s=a(e,t):s=ht.isURLSearchParams(e)?e.toString():new h3(e,t).toString(i),s){const r=n.indexOf("#");r!==-1&&(n=n.slice(0,r)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class _N{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ht.forEach(this.handlers,function(i){i!==null&&e(i)})}}const r8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},DI=typeof URLSearchParams<"u"?URLSearchParams:h3,OI=typeof FormData<"u"?FormData:null,jI=typeof Blob<"u"?Blob:null,PI={isBrowser:!0,classes:{URLSearchParams:DI,FormData:OI,Blob:jI},protocols:["http","https","file","blob","url","data"]},f3=typeof window<"u"&&typeof document<"u",$M=typeof navigator=="object"&&navigator||void 0,UI=f3&&(!$M||["ReactNative","NativeScript","NS"].indexOf($M.product)<0),LI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zI=f3&&window.location.href||"http://localhost",II=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:f3,hasStandardBrowserEnv:UI,hasStandardBrowserWebWorkerEnv:LI,navigator:$M,origin:zI},Symbol.toStringTag,{value:"Module"})),Xo={...II,...PI};function BI(n,e){return KS(n,new Xo.classes.URLSearchParams,{visitor:function(t,i,a,s){return Xo.isNode&&ht.isBuffer(t)?(this.append(i,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function FI(n){return ht.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function kI(n){const e={},t=Object.keys(n);let i;const a=t.length;let s;for(i=0;i<a;i++)s=t[i],e[s]=n[s];return e}function o8(n){function e(t,i,a,s){let r=t[s++];if(r==="__proto__")return!0;const l=Number.isFinite(+r),d=s>=t.length;return r=!r&&ht.isArray(a)?a.length:r,d?(ht.hasOwnProp(a,r)?a[r]=[a[r],i]:a[r]=i,!l):((!a[r]||!ht.isObject(a[r]))&&(a[r]=[]),e(t,i,a[r],s)&&ht.isArray(a[r])&&(a[r]=kI(a[r])),!l)}if(ht.isFormData(n)&&ht.isFunction(n.entries)){const t={};return ht.forEachEntry(n,(i,a)=>{e(FI(i),a,t,0)}),t}return null}function HI(n,e,t){if(ht.isString(n))try{return(e||JSON.parse)(n),ht.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const S1={transitional:r8,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",a=i.indexOf("application/json")>-1,s=ht.isObject(e);if(s&&ht.isHTMLForm(e)&&(e=new FormData(e)),ht.isFormData(e))return a?JSON.stringify(o8(e)):e;if(ht.isArrayBuffer(e)||ht.isBuffer(e)||ht.isStream(e)||ht.isFile(e)||ht.isBlob(e)||ht.isReadableStream(e))return e;if(ht.isArrayBufferView(e))return e.buffer;if(ht.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return BI(e,this.formSerializer).toString();if((l=ht.isFileList(e))||i.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return KS(l?{"files[]":e}:e,d&&new d,this.formSerializer)}}return s||a?(t.setContentType("application/json",!1),HI(e)):e}],transformResponse:[function(e){const t=this.transitional||S1.transitional,i=t&&t.forcedJSONParsing,a=this.responseType==="json";if(ht.isResponse(e)||ht.isReadableStream(e))return e;if(e&&ht.isString(e)&&(i&&!this.responseType||a)){const r=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(l){if(r)throw l.name==="SyntaxError"?hi.from(l,hi.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xo.classes.FormData,Blob:Xo.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ht.forEach(["delete","get","head","post","put","patch"],n=>{S1.headers[n]={}});const GI=ht.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VI=n=>{const e={};let t,i,a;return n&&n.split(`
`).forEach(function(r){a=r.indexOf(":"),t=r.substring(0,a).trim().toLowerCase(),i=r.substring(a+1).trim(),!(!t||e[t]&&GI[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},SN=Symbol("internals");function py(n){return n&&String(n).trim().toLowerCase()}function b_(n){return n===!1||n==null?n:ht.isArray(n)?n.map(b_):String(n)}function qI(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const XI=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function WE(n,e,t,i,a){if(ht.isFunction(i))return i.call(this,e,t);if(a&&(e=t),!!ht.isString(e)){if(ht.isString(i))return e.indexOf(i)!==-1;if(ht.isRegExp(i))return i.test(e)}}function YI(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function WI(n,e){const t=ht.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(a,s,r){return this[i].call(this,e,a,s,r)},configurable:!0})})}let ac=class{constructor(e){e&&this.set(e)}set(e,t,i){const a=this;function s(l,d,f){const g=py(d);if(!g)throw new Error("header name must be a non-empty string");const x=ht.findKey(a,g);(!x||a[x]===void 0||f===!0||f===void 0&&a[x]!==!1)&&(a[x||d]=b_(l))}const r=(l,d)=>ht.forEach(l,(f,g)=>s(f,g,d));if(ht.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(ht.isString(e)&&(e=e.trim())&&!XI(e))r(VI(e),t);else if(ht.isObject(e)&&ht.isIterable(e)){let l={},d,f;for(const g of e){if(!ht.isArray(g))throw TypeError("Object iterator must return a key-value pair");l[f=g[0]]=(d=l[f])?ht.isArray(d)?[...d,g[1]]:[d,g[1]]:g[1]}r(l,t)}else e!=null&&s(t,e,i);return this}get(e,t){if(e=py(e),e){const i=ht.findKey(this,e);if(i){const a=this[i];if(!t)return a;if(t===!0)return qI(a);if(ht.isFunction(t))return t.call(this,a,i);if(ht.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=py(e),e){const i=ht.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||WE(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let a=!1;function s(r){if(r=py(r),r){const l=ht.findKey(i,r);l&&(!t||WE(i,i[l],l,t))&&(delete i[l],a=!0)}}return ht.isArray(e)?e.forEach(s):s(e),a}clear(e){const t=Object.keys(this);let i=t.length,a=!1;for(;i--;){const s=t[i];(!e||WE(this,this[s],s,e,!0))&&(delete this[s],a=!0)}return a}normalize(e){const t=this,i={};return ht.forEach(this,(a,s)=>{const r=ht.findKey(i,s);if(r){t[r]=b_(a),delete t[s];return}const l=e?YI(s):String(s).trim();l!==s&&delete t[s],t[l]=b_(a),i[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ht.forEach(this,(i,a)=>{i!=null&&i!==!1&&(t[a]=e&&ht.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(a=>i.set(a)),i}static accessor(e){const i=(this[SN]=this[SN]={accessors:{}}).accessors,a=this.prototype;function s(r){const l=py(r);i[l]||(WI(a,r),i[l]=!0)}return ht.isArray(e)?e.forEach(s):s(e),this}};ac.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ht.reduceDescriptors(ac.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});ht.freezeMethods(ac);function KE(n,e){const t=this||S1,i=e||t,a=ac.from(i.headers);let s=i.data;return ht.forEach(n,function(l){s=l.call(t,s,a.normalize(),e?e.status:void 0)}),a.normalize(),s}function l8(n){return!!(n&&n.__CANCEL__)}function Pv(n,e,t){hi.call(this,n??"canceled",hi.ERR_CANCELED,e,t),this.name="CanceledError"}ht.inherits(Pv,hi,{__CANCEL__:!0});function c8(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new hi("Request failed with status code "+t.status,[hi.ERR_BAD_REQUEST,hi.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function KI(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function ZI(n,e){n=n||10;const t=new Array(n),i=new Array(n);let a=0,s=0,r;return e=e!==void 0?e:1e3,function(d){const f=Date.now(),g=i[s];r||(r=f),t[a]=d,i[a]=f;let x=s,b=0;for(;x!==a;)b+=t[x++],x=x%n;if(a=(a+1)%n,a===s&&(s=(s+1)%n),f-r<e)return;const _=g&&f-g;return _?Math.round(b*1e3/_):void 0}}function QI(n,e){let t=0,i=1e3/e,a,s;const r=(f,g=Date.now())=>{t=g,a=null,s&&(clearTimeout(s),s=null),n(...f)};return[(...f)=>{const g=Date.now(),x=g-t;x>=i?r(f,g):(a=f,s||(s=setTimeout(()=>{s=null,r(a)},i-x)))},()=>a&&r(a)]}const U_=(n,e,t=3)=>{let i=0;const a=ZI(50,250);return QI(s=>{const r=s.loaded,l=s.lengthComputable?s.total:void 0,d=r-i,f=a(d),g=r<=l;i=r;const x={loaded:r,total:l,progress:l?r/l:void 0,bytes:d,rate:f||void 0,estimated:f&&l&&g?(l-r)/f:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};n(x)},t)},EN=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},wN=n=>(...e)=>ht.asap(()=>n(...e)),JI=Xo.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Xo.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Xo.origin),Xo.navigator&&/(msie|trident)/i.test(Xo.navigator.userAgent)):()=>!0,$I=Xo.hasStandardBrowserEnv?{write(n,e,t,i,a,s){const r=[n+"="+encodeURIComponent(e)];ht.isNumber(t)&&r.push("expires="+new Date(t).toGMTString()),ht.isString(i)&&r.push("path="+i),ht.isString(a)&&r.push("domain="+a),s===!0&&r.push("secure"),document.cookie=r.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function eB(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function tB(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function u8(n,e,t){let i=!eB(e);return n&&(i||t==!1)?tB(n,e):e}const MN=n=>n instanceof ac?{...n}:n;function pg(n,e){e=e||{};const t={};function i(f,g,x,b){return ht.isPlainObject(f)&&ht.isPlainObject(g)?ht.merge.call({caseless:b},f,g):ht.isPlainObject(g)?ht.merge({},g):ht.isArray(g)?g.slice():g}function a(f,g,x,b){if(ht.isUndefined(g)){if(!ht.isUndefined(f))return i(void 0,f,x,b)}else return i(f,g,x,b)}function s(f,g){if(!ht.isUndefined(g))return i(void 0,g)}function r(f,g){if(ht.isUndefined(g)){if(!ht.isUndefined(f))return i(void 0,f)}else return i(void 0,g)}function l(f,g,x){if(x in e)return i(f,g);if(x in n)return i(void 0,f)}const d={url:s,method:s,data:s,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:l,headers:(f,g,x)=>a(MN(f),MN(g),x,!0)};return ht.forEach(Object.keys({...n,...e}),function(g){const x=d[g]||a,b=x(n[g],e[g],g);ht.isUndefined(b)&&x!==l||(t[g]=b)}),t}const d8=n=>{const e=pg({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:s,headers:r,auth:l}=e;e.headers=r=ac.from(r),e.url=s8(u8(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),l&&r.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let d;if(ht.isFormData(t)){if(Xo.hasStandardBrowserEnv||Xo.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((d=r.getContentType())!==!1){const[f,...g]=d?d.split(";").map(x=>x.trim()).filter(Boolean):[];r.setContentType([f||"multipart/form-data",...g].join("; "))}}if(Xo.hasStandardBrowserEnv&&(i&&ht.isFunction(i)&&(i=i(e)),i||i!==!1&&JI(e.url))){const f=a&&s&&$I.read(s);f&&r.set(a,f)}return e},nB=typeof XMLHttpRequest<"u",iB=nB&&function(n){return new Promise(function(t,i){const a=d8(n);let s=a.data;const r=ac.from(a.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:f}=a,g,x,b,_,S;function w(){_&&_(),S&&S(),a.cancelToken&&a.cancelToken.unsubscribe(g),a.signal&&a.signal.removeEventListener("abort",g)}let M=new XMLHttpRequest;M.open(a.method.toUpperCase(),a.url,!0),M.timeout=a.timeout;function E(){if(!M)return;const C=ac.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),P={data:!l||l==="text"||l==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:C,config:n,request:M};c8(function(F){t(F),w()},function(F){i(F),w()},P),M=null}"onloadend"in M?M.onloadend=E:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(E)},M.onabort=function(){M&&(i(new hi("Request aborted",hi.ECONNABORTED,n,M)),M=null)},M.onerror=function(){i(new hi("Network Error",hi.ERR_NETWORK,n,M)),M=null},M.ontimeout=function(){let D=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||r8;a.timeoutErrorMessage&&(D=a.timeoutErrorMessage),i(new hi(D,P.clarifyTimeoutError?hi.ETIMEDOUT:hi.ECONNABORTED,n,M)),M=null},s===void 0&&r.setContentType(null),"setRequestHeader"in M&&ht.forEach(r.toJSON(),function(D,P){M.setRequestHeader(P,D)}),ht.isUndefined(a.withCredentials)||(M.withCredentials=!!a.withCredentials),l&&l!=="json"&&(M.responseType=a.responseType),f&&([b,S]=U_(f,!0),M.addEventListener("progress",b)),d&&M.upload&&([x,_]=U_(d),M.upload.addEventListener("progress",x),M.upload.addEventListener("loadend",_)),(a.cancelToken||a.signal)&&(g=C=>{M&&(i(!C||C.type?new Pv(null,n,M):C),M.abort(),M=null)},a.cancelToken&&a.cancelToken.subscribe(g),a.signal&&(a.signal.aborted?g():a.signal.addEventListener("abort",g)));const T=KI(a.url);if(T&&Xo.protocols.indexOf(T)===-1){i(new hi("Unsupported protocol "+T+":",hi.ERR_BAD_REQUEST,n));return}M.send(s||null)})},aB=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,a;const s=function(f){if(!a){a=!0,l();const g=f instanceof Error?f:this.reason;i.abort(g instanceof hi?g:new Pv(g instanceof Error?g.message:g))}};let r=e&&setTimeout(()=>{r=null,s(new hi(`timeout ${e} of ms exceeded`,hi.ETIMEDOUT))},e);const l=()=>{n&&(r&&clearTimeout(r),r=null,n.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),n=null)};n.forEach(f=>f.addEventListener("abort",s));const{signal:d}=i;return d.unsubscribe=()=>ht.asap(l),d}},sB=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,a;for(;i<t;)a=i+e,yield n.slice(i,a),i=a},rB=async function*(n,e){for await(const t of oB(n))yield*sB(t,e)},oB=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},TN=(n,e,t,i)=>{const a=rB(n,e);let s=0,r,l=d=>{r||(r=!0,i&&i(d))};return new ReadableStream({async pull(d){try{const{done:f,value:g}=await a.next();if(f){l(),d.close();return}let x=g.byteLength;if(t){let b=s+=x;t(b)}d.enqueue(new Uint8Array(g))}catch(f){throw l(f),f}},cancel(d){return l(d),a.return()}},{highWaterMark:2})},ZS=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",h8=ZS&&typeof ReadableStream=="function",lB=ZS&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),f8=(n,...e)=>{try{return!!n(...e)}catch{return!1}},cB=h8&&f8(()=>{let n=!1;const e=new Request(Xo.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),CN=64*1024,eT=h8&&f8(()=>ht.isReadableStream(new Response("").body)),L_={stream:eT&&(n=>n.body)};ZS&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!L_[e]&&(L_[e]=ht.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new hi(`Response type '${e}' is not supported`,hi.ERR_NOT_SUPPORT,i)})})})(new Response);const uB=async n=>{if(n==null)return 0;if(ht.isBlob(n))return n.size;if(ht.isSpecCompliantForm(n))return(await new Request(Xo.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(ht.isArrayBufferView(n)||ht.isArrayBuffer(n))return n.byteLength;if(ht.isURLSearchParams(n)&&(n=n+""),ht.isString(n))return(await lB(n)).byteLength},dB=async(n,e)=>{const t=ht.toFiniteNumber(n.getContentLength());return t??uB(e)},hB=ZS&&(async n=>{let{url:e,method:t,data:i,signal:a,cancelToken:s,timeout:r,onDownloadProgress:l,onUploadProgress:d,responseType:f,headers:g,withCredentials:x="same-origin",fetchOptions:b}=d8(n);f=f?(f+"").toLowerCase():"text";let _=aB([a,s&&s.toAbortSignal()],r),S;const w=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let M;try{if(d&&cB&&t!=="get"&&t!=="head"&&(M=await dB(g,i))!==0){let P=new Request(e,{method:"POST",body:i,duplex:"half"}),B;if(ht.isFormData(i)&&(B=P.headers.get("content-type"))&&g.setContentType(B),P.body){const[F,j]=EN(M,U_(wN(d)));i=TN(P.body,CN,F,j)}}ht.isString(x)||(x=x?"include":"omit");const E="credentials"in Request.prototype;S=new Request(e,{...b,signal:_,method:t.toUpperCase(),headers:g.normalize().toJSON(),body:i,duplex:"half",credentials:E?x:void 0});let T=await fetch(S,b);const C=eT&&(f==="stream"||f==="response");if(eT&&(l||C&&w)){const P={};["status","statusText","headers"].forEach(O=>{P[O]=T[O]});const B=ht.toFiniteNumber(T.headers.get("content-length")),[F,j]=l&&EN(B,U_(wN(l),!0))||[];T=new Response(TN(T.body,CN,F,()=>{j&&j(),w&&w()}),P)}f=f||"text";let D=await L_[ht.findKey(L_,f)||"text"](T,n);return!C&&w&&w(),await new Promise((P,B)=>{c8(P,B,{data:D,headers:ac.from(T.headers),status:T.status,statusText:T.statusText,config:n,request:S})})}catch(E){throw w&&w(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new hi("Network Error",hi.ERR_NETWORK,n,S),{cause:E.cause||E}):hi.from(E,E&&E.code,n,S)}}),tT={http:CI,xhr:iB,fetch:hB};ht.forEach(tT,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const AN=n=>`- ${n}`,fB=n=>ht.isFunction(n)||n===null||n===!1,p8={getAdapter:n=>{n=ht.isArray(n)?n:[n];const{length:e}=n;let t,i;const a={};for(let s=0;s<e;s++){t=n[s];let r;if(i=t,!fB(t)&&(i=tT[(r=String(t)).toLowerCase()],i===void 0))throw new hi(`Unknown adapter '${r}'`);if(i)break;a[r||"#"+s]=i}if(!i){const s=Object.entries(a).map(([l,d])=>`adapter ${l} `+(d===!1?"is not supported by the environment":"is not available in the build"));let r=e?s.length>1?`since :
`+s.map(AN).join(`
`):" "+AN(s[0]):"as no adapter specified";throw new hi("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return i},adapters:tT};function ZE(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Pv(null,n)}function NN(n){return ZE(n),n.headers=ac.from(n.headers),n.data=KE.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),p8.getAdapter(n.adapter||S1.adapter)(n).then(function(i){return ZE(n),i.data=KE.call(n,n.transformResponse,i),i.headers=ac.from(i.headers),i},function(i){return l8(i)||(ZE(n),i&&i.response&&(i.response.data=KE.call(n,n.transformResponse,i.response),i.response.headers=ac.from(i.response.headers))),Promise.reject(i)})}const m8="1.11.0",QS={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{QS[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const RN={};QS.transitional=function(e,t,i){function a(s,r){return"[Axios v"+m8+"] Transitional option '"+s+"'"+r+(i?". "+i:"")}return(s,r,l)=>{if(e===!1)throw new hi(a(r," has been removed"+(t?" in "+t:"")),hi.ERR_DEPRECATED);return t&&!RN[r]&&(RN[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,r,l):!0}};QS.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function pB(n,e,t){if(typeof n!="object")throw new hi("options must be an object",hi.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let a=i.length;for(;a-- >0;){const s=i[a],r=e[s];if(r){const l=n[s],d=l===void 0||r(l,s,n);if(d!==!0)throw new hi("option "+s+" must be "+d,hi.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new hi("Unknown option "+s,hi.ERR_BAD_OPTION)}}const __={assertOptions:pB,validators:QS},$d=__.validators;let cg=class{constructor(e){this.defaults=e||{},this.interceptors={request:new _N,response:new _N}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=pg(this.defaults,t);const{transitional:i,paramsSerializer:a,headers:s}=t;i!==void 0&&__.assertOptions(i,{silentJSONParsing:$d.transitional($d.boolean),forcedJSONParsing:$d.transitional($d.boolean),clarifyTimeoutError:$d.transitional($d.boolean)},!1),a!=null&&(ht.isFunction(a)?t.paramsSerializer={serialize:a}:__.assertOptions(a,{encode:$d.function,serialize:$d.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),__.assertOptions(t,{baseUrl:$d.spelling("baseURL"),withXsrfToken:$d.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=s&&ht.merge(s.common,s[t.method]);s&&ht.forEach(["delete","get","head","post","put","patch","common"],S=>{delete s[S]}),t.headers=ac.concat(r,s);const l=[];let d=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(d=d&&w.synchronous,l.unshift(w.fulfilled,w.rejected))});const f=[];this.interceptors.response.forEach(function(w){f.push(w.fulfilled,w.rejected)});let g,x=0,b;if(!d){const S=[NN.bind(this),void 0];for(S.unshift(...l),S.push(...f),b=S.length,g=Promise.resolve(t);x<b;)g=g.then(S[x++],S[x++]);return g}b=l.length;let _=t;for(x=0;x<b;){const S=l[x++],w=l[x++];try{_=S(_)}catch(M){w.call(this,M);break}}try{g=NN.call(this,_)}catch(S){return Promise.reject(S)}for(x=0,b=f.length;x<b;)g=g.then(f[x++],f[x++]);return g}getUri(e){e=pg(this.defaults,e);const t=u8(e.baseURL,e.url,e.allowAbsoluteUrls);return s8(t,e.params,e.paramsSerializer)}};ht.forEach(["delete","get","head","options"],function(e){cg.prototype[e]=function(t,i){return this.request(pg(i||{},{method:e,url:t,data:(i||{}).data}))}});ht.forEach(["post","put","patch"],function(e){function t(i){return function(s,r,l){return this.request(pg(l||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}cg.prototype[e]=t(),cg.prototype[e+"Form"]=t(!0)});let mB=class g8{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const i=this;this.promise.then(a=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](a);i._listeners=null}),this.promise.then=a=>{let s;const r=new Promise(l=>{i.subscribe(l),s=l}).then(a);return r.cancel=function(){i.unsubscribe(s)},r},e(function(s,r,l){i.reason||(i.reason=new Pv(s,r,l),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new g8(function(a){e=a}),cancel:e}}};function gB(n){return function(t){return n.apply(null,t)}}function vB(n){return ht.isObject(n)&&n.isAxiosError===!0}const nT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nT).forEach(([n,e])=>{nT[e]=n});function v8(n){const e=new cg(n),t=Y6(cg.prototype.request,e);return ht.extend(t,cg.prototype,e,{allOwnKeys:!0}),ht.extend(t,e,null,{allOwnKeys:!0}),t.create=function(a){return v8(pg(n,a))},t}const ua=v8(S1);ua.Axios=cg;ua.CanceledError=Pv;ua.CancelToken=mB;ua.isCancel=l8;ua.VERSION=m8;ua.toFormData=KS;ua.AxiosError=hi;ua.Cancel=ua.CanceledError;ua.all=function(e){return Promise.all(e)};ua.spread=gB;ua.isAxiosError=vB;ua.mergeConfig=pg;ua.AxiosHeaders=ac;ua.formToJSON=n=>o8(ht.isHTMLForm(n)?new FormData(n):n);ua.getAdapter=p8.getAdapter;ua.HttpStatusCode=nT;ua.default=ua;const{Axios:fde,AxiosError:pde,CanceledError:mde,isCancel:gde,CancelToken:vde,VERSION:yde,all:xde,Cancel:bde,isAxiosError:_de,spread:Sde,toFormData:Ede,AxiosHeaders:wde,HttpStatusCode:Mde,formToJSON:Tde,getAdapter:Cde,mergeConfig:Ade}=ua;var S_={exports:{}},my={},QE={},JE={},DN;function Si(){return DN||(DN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._registerNode=n.Konva=n.glob=void 0;const e=Math.PI/180;function t(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}n.glob=typeof oN<"u"?oN:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},n.Konva={_global:n.glob,version:"9.3.22",isBrowser:t(),isUnminified:/param/.test((function(a){}).toString()),dblClickWindow:400,getAngle(a){return n.Konva.angleDeg?a*e:a},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return n.Konva.DD.isDragging},isTransforming(){var a;return(a=n.Konva.Transformer)===null||a===void 0?void 0:a.isTransforming()},isDragReady(){return!!n.Konva.DD.node},releaseCanvasOnDestroy:!0,document:n.glob.document,_injectGlobal(a){n.glob.Konva=a}};const i=a=>{n.Konva[a.prototype.getClassName()]=a};n._registerNode=i,n.Konva._injectGlobal(n.Konva)}(JE)),JE}var $E={},ON;function Ps(){return ON||(ON=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.Transform=void 0;const e=Si();class t{constructor(D=[1,0,0,1,0,0]){this.dirty=!1,this.m=D&&D.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new t(this.m)}copyInto(D){D.m[0]=this.m[0],D.m[1]=this.m[1],D.m[2]=this.m[2],D.m[3]=this.m[3],D.m[4]=this.m[4],D.m[5]=this.m[5]}point(D){const P=this.m;return{x:P[0]*D.x+P[2]*D.y+P[4],y:P[1]*D.x+P[3]*D.y+P[5]}}translate(D,P){return this.m[4]+=this.m[0]*D+this.m[2]*P,this.m[5]+=this.m[1]*D+this.m[3]*P,this}scale(D,P){return this.m[0]*=D,this.m[1]*=D,this.m[2]*=P,this.m[3]*=P,this}rotate(D){const P=Math.cos(D),B=Math.sin(D),F=this.m[0]*P+this.m[2]*B,j=this.m[1]*P+this.m[3]*B,O=this.m[0]*-B+this.m[2]*P,I=this.m[1]*-B+this.m[3]*P;return this.m[0]=F,this.m[1]=j,this.m[2]=O,this.m[3]=I,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(D,P){const B=this.m[0]+this.m[2]*P,F=this.m[1]+this.m[3]*P,j=this.m[2]+this.m[0]*D,O=this.m[3]+this.m[1]*D;return this.m[0]=B,this.m[1]=F,this.m[2]=j,this.m[3]=O,this}multiply(D){const P=this.m[0]*D.m[0]+this.m[2]*D.m[1],B=this.m[1]*D.m[0]+this.m[3]*D.m[1],F=this.m[0]*D.m[2]+this.m[2]*D.m[3],j=this.m[1]*D.m[2]+this.m[3]*D.m[3],O=this.m[0]*D.m[4]+this.m[2]*D.m[5]+this.m[4],I=this.m[1]*D.m[4]+this.m[3]*D.m[5]+this.m[5];return this.m[0]=P,this.m[1]=B,this.m[2]=F,this.m[3]=j,this.m[4]=O,this.m[5]=I,this}invert(){const D=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),P=this.m[3]*D,B=-this.m[1]*D,F=-this.m[2]*D,j=this.m[0]*D,O=D*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),I=D*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=P,this.m[1]=B,this.m[2]=F,this.m[3]=j,this.m[4]=O,this.m[5]=I,this}getMatrix(){return this.m}decompose(){const D=this.m[0],P=this.m[1],B=this.m[2],F=this.m[3],j=this.m[4],O=this.m[5],I=D*F-P*B,W={x:j,y:O,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(D!=0||P!=0){const Q=Math.sqrt(D*D+P*P);W.rotation=P>0?Math.acos(D/Q):-Math.acos(D/Q),W.scaleX=Q,W.scaleY=I/Q,W.skewX=(D*B+P*F)/I,W.skewY=0}else if(B!=0||F!=0){const Q=Math.sqrt(B*B+F*F);W.rotation=Math.PI/2-(F>0?Math.acos(-B/Q):-Math.acos(B/Q)),W.scaleX=I/Q,W.scaleY=Q,W.skewX=0,W.skewY=(D*B+P*F)/I}return W.rotation=n.Util._getRotation(W.rotation),W}}n.Transform=t;const i="[object Array]",a="[object Number]",s="[object String]",r="[object Boolean]",l=Math.PI/180,d=180/Math.PI,f="#",g="",x="0",b="Konva warning: ",_="Konva error: ",S="rgb(",w={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},M=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let E=[];const T=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(C){setTimeout(C,60)};n.Util={_isElement(C){return!!(C&&C.nodeType==1)},_isFunction(C){return!!(C&&C.constructor&&C.call&&C.apply)},_isPlainObject(C){return!!C&&C.constructor===Object},_isArray(C){return Object.prototype.toString.call(C)===i},_isNumber(C){return Object.prototype.toString.call(C)===a&&!isNaN(C)&&isFinite(C)},_isString(C){return Object.prototype.toString.call(C)===s},_isBoolean(C){return Object.prototype.toString.call(C)===r},isObject(C){return C instanceof Object},isValidSelector(C){if(typeof C!="string")return!1;const D=C[0];return D==="#"||D==="."||D===D.toUpperCase()},_sign(C){return C===0||C>0?1:-1},requestAnimFrame(C){E.push(C),E.length===1&&T(function(){const D=E;E=[],D.forEach(function(P){P()})})},createCanvasElement(){const C=document.createElement("canvas");try{C.style=C.style||{}}catch{}return C},createImageElement(){return document.createElement("img")},_isInDocument(C){for(;C=C.parentNode;)if(C==document)return!0;return!1},_urlToImage(C,D){const P=n.Util.createImageElement();P.onload=function(){D(P)},P.src=C},_rgbToHex(C,D,P){return((1<<24)+(C<<16)+(D<<8)+P).toString(16).slice(1)},_hexToRgb(C){C=C.replace(f,g);const D=parseInt(C,16);return{r:D>>16&255,g:D>>8&255,b:D&255}},getRandomColor(){let C=(Math.random()*16777215<<0).toString(16);for(;C.length<6;)C=x+C;return f+C},getRGB(C){let D;return C in w?(D=w[C],{r:D[0],g:D[1],b:D[2]}):C[0]===f?this._hexToRgb(C.substring(1)):C.substr(0,4)===S?(D=M.exec(C.replace(/ /g,"")),{r:parseInt(D[1],10),g:parseInt(D[2],10),b:parseInt(D[3],10)}):{r:0,g:0,b:0}},colorToRGBA(C){return C=C||"black",n.Util._namedColorToRBA(C)||n.Util._hex3ColorToRGBA(C)||n.Util._hex4ColorToRGBA(C)||n.Util._hex6ColorToRGBA(C)||n.Util._hex8ColorToRGBA(C)||n.Util._rgbColorToRGBA(C)||n.Util._rgbaColorToRGBA(C)||n.Util._hslColorToRGBA(C)},_namedColorToRBA(C){const D=w[C.toLowerCase()];return D?{r:D[0],g:D[1],b:D[2],a:1}:null},_rgbColorToRGBA(C){if(C.indexOf("rgb(")===0){C=C.match(/rgb\(([^)]+)\)/)[1];const D=C.split(/ *, */).map(Number);return{r:D[0],g:D[1],b:D[2],a:1}}},_rgbaColorToRGBA(C){if(C.indexOf("rgba(")===0){C=C.match(/rgba\(([^)]+)\)/)[1];const D=C.split(/ *, */).map((P,B)=>P.slice(-1)==="%"?B===3?parseInt(P)/100:parseInt(P)/100*255:Number(P));return{r:D[0],g:D[1],b:D[2],a:D[3]}}},_hex8ColorToRGBA(C){if(C[0]==="#"&&C.length===9)return{r:parseInt(C.slice(1,3),16),g:parseInt(C.slice(3,5),16),b:parseInt(C.slice(5,7),16),a:parseInt(C.slice(7,9),16)/255}},_hex6ColorToRGBA(C){if(C[0]==="#"&&C.length===7)return{r:parseInt(C.slice(1,3),16),g:parseInt(C.slice(3,5),16),b:parseInt(C.slice(5,7),16),a:1}},_hex4ColorToRGBA(C){if(C[0]==="#"&&C.length===5)return{r:parseInt(C[1]+C[1],16),g:parseInt(C[2]+C[2],16),b:parseInt(C[3]+C[3],16),a:parseInt(C[4]+C[4],16)/255}},_hex3ColorToRGBA(C){if(C[0]==="#"&&C.length===4)return{r:parseInt(C[1]+C[1],16),g:parseInt(C[2]+C[2],16),b:parseInt(C[3]+C[3],16),a:1}},_hslColorToRGBA(C){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(C)){const[D,...P]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(C),B=Number(P[0])/360,F=Number(P[1])/100,j=Number(P[2])/100;let O,I,W;if(F===0)return W=j*255,{r:Math.round(W),g:Math.round(W),b:Math.round(W),a:1};j<.5?O=j*(1+F):O=j+F-j*F;const Q=2*j-O,J=[0,0,0];for(let te=0;te<3;te++)I=B+1/3*-(te-1),I<0&&I++,I>1&&I--,6*I<1?W=Q+(O-Q)*6*I:2*I<1?W=O:3*I<2?W=Q+(O-Q)*(2/3-I)*6:W=Q,J[te]=W*255;return{r:Math.round(J[0]),g:Math.round(J[1]),b:Math.round(J[2]),a:1}}},haveIntersection(C,D){return!(D.x>C.x+C.width||D.x+D.width<C.x||D.y>C.y+C.height||D.y+D.height<C.y)},cloneObject(C){const D={};for(const P in C)this._isPlainObject(C[P])?D[P]=this.cloneObject(C[P]):this._isArray(C[P])?D[P]=this.cloneArray(C[P]):D[P]=C[P];return D},cloneArray(C){return C.slice(0)},degToRad(C){return C*l},radToDeg(C){return C*d},_degToRad(C){return n.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),n.Util.degToRad(C)},_radToDeg(C){return n.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),n.Util.radToDeg(C)},_getRotation(C){return e.Konva.angleDeg?n.Util.radToDeg(C):C},_capitalize(C){return C.charAt(0).toUpperCase()+C.slice(1)},throw(C){throw new Error(_+C)},error(C){console.error(_+C)},warn(C){e.Konva.showWarnings&&console.warn(b+C)},each(C,D){for(const P in C)D(P,C[P])},_inRange(C,D,P){return D<=C&&C<P},_getProjectionToSegment(C,D,P,B,F,j){let O,I,W;const Q=(C-P)*(C-P)+(D-B)*(D-B);if(Q==0)O=C,I=D,W=(F-P)*(F-P)+(j-B)*(j-B);else{const J=((F-C)*(P-C)+(j-D)*(B-D))/Q;J<0?(O=C,I=D,W=(C-F)*(C-F)+(D-j)*(D-j)):J>1?(O=P,I=B,W=(P-F)*(P-F)+(B-j)*(B-j)):(O=C+J*(P-C),I=D+J*(B-D),W=(O-F)*(O-F)+(I-j)*(I-j))}return[O,I,W]},_getProjectionToLine(C,D,P){const B=n.Util.cloneObject(C);let F=Number.MAX_VALUE;return D.forEach(function(j,O){if(!P&&O===D.length-1)return;const I=D[(O+1)%D.length],W=n.Util._getProjectionToSegment(j.x,j.y,I.x,I.y,C.x,C.y),Q=W[0],J=W[1],te=W[2];te<F&&(B.x=Q,B.y=J,F=te)}),B},_prepareArrayForTween(C,D,P){const B=[],F=[];if(C.length>D.length){const O=D;D=C,C=O}for(let O=0;O<C.length;O+=2)B.push({x:C[O],y:C[O+1]});for(let O=0;O<D.length;O+=2)F.push({x:D[O],y:D[O+1]});const j=[];return F.forEach(function(O){const I=n.Util._getProjectionToLine(O,B,P);j.push(I.x),j.push(I.y)}),j},_prepareToStringify(C){let D;C.visitedByCircularReferenceRemoval=!0;for(const P in C)if(C.hasOwnProperty(P)&&C[P]&&typeof C[P]=="object"){if(D=Object.getOwnPropertyDescriptor(C,P),C[P].visitedByCircularReferenceRemoval||n.Util._isElement(C[P]))if(D.configurable)delete C[P];else return null;else if(n.Util._prepareToStringify(C[P])===null)if(D.configurable)delete C[P];else return null}return delete C.visitedByCircularReferenceRemoval,C},_assign(C,D){for(const P in D)C[P]=D[P];return C},_getFirstPointerId(C){return C.touches?C.changedTouches[0].identifier:C.pointerId||999},releaseCanvas(...C){e.Konva.releaseCanvasOnDestroy&&C.forEach(D=>{D.width=0,D.height=0})},drawRoundedRectPath(C,D,P,B){let F=0,j=0,O=0,I=0;typeof B=="number"?F=j=O=I=Math.min(B,D/2,P/2):(F=Math.min(B[0]||0,D/2,P/2),j=Math.min(B[1]||0,D/2,P/2),I=Math.min(B[2]||0,D/2,P/2),O=Math.min(B[3]||0,D/2,P/2)),C.moveTo(F,0),C.lineTo(D-j,0),C.arc(D-j,j,j,Math.PI*3/2,0,!1),C.lineTo(D,P-I),C.arc(D-I,P-I,I,0,Math.PI/2,!1),C.lineTo(O,P),C.arc(O,P-O,O,Math.PI/2,Math.PI,!1),C.lineTo(0,F),C.arc(F,F,F,Math.PI,Math.PI*3/2,!1)}}}($E)),$E}var gy={},df={},hf={},jN;function y8(){if(jN)return hf;jN=1,Object.defineProperty(hf,"__esModule",{value:!0}),hf.HitContext=hf.SceneContext=hf.Context=void 0;const n=Ps(),e=Si();function t(E){const T=[],C=E.length,D=n.Util;for(let P=0;P<C;P++){let B=E[P];D._isNumber(B)?B=Math.round(B*1e3)/1e3:D._isString(B)||(B=B+""),T.push(B)}return T}const i=",",a="(",s=")",r="([",l="])",d=";",f="()",g="=",x=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],b=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],_=100;let S=class{constructor(T){this.canvas=T,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(T){T.fillEnabled()&&this._fill(T)}_fill(T){}strokeShape(T){T.hasStroke()&&this._stroke(T)}_stroke(T){}fillStrokeShape(T){T.attrs.fillAfterStrokeEnabled?(this.strokeShape(T),this.fillShape(T)):(this.fillShape(T),this.strokeShape(T))}getTrace(T,C){let D=this.traceArr,P=D.length,B="",F,j,O,I;for(F=0;F<P;F++)j=D[F],O=j.method,O?(I=j.args,B+=O,T?B+=f:n.Util._isArray(I[0])?B+=r+I.join(i)+l:(C&&(I=I.map(W=>typeof W=="number"?Math.floor(W):W)),B+=a+I.join(i)+s)):(B+=j.property,T||(B+=g+j.val)),B+=d;return B}clearTrace(){this.traceArr=[]}_trace(T){let C=this.traceArr,D;C.push(T),D=C.length,D>=_&&C.shift()}reset(){const T=this.getCanvas().getPixelRatio();this.setTransform(1*T,0,0,1*T,0,0)}getCanvas(){return this.canvas}clear(T){const C=this.getCanvas();T?this.clearRect(T.x||0,T.y||0,T.width||0,T.height||0):this.clearRect(0,0,C.getWidth()/C.pixelRatio,C.getHeight()/C.pixelRatio)}_applyLineCap(T){const C=T.attrs.lineCap;C&&this.setAttr("lineCap",C)}_applyOpacity(T){const C=T.getAbsoluteOpacity();C!==1&&this.setAttr("globalAlpha",C)}_applyLineJoin(T){const C=T.attrs.lineJoin;C&&this.setAttr("lineJoin",C)}setAttr(T,C){this._context[T]=C}arc(T,C,D,P,B,F){this._context.arc(T,C,D,P,B,F)}arcTo(T,C,D,P,B){this._context.arcTo(T,C,D,P,B)}beginPath(){this._context.beginPath()}bezierCurveTo(T,C,D,P,B,F){this._context.bezierCurveTo(T,C,D,P,B,F)}clearRect(T,C,D,P){this._context.clearRect(T,C,D,P)}clip(...T){this._context.clip.apply(this._context,T)}closePath(){this._context.closePath()}createImageData(T,C){const D=arguments;if(D.length===2)return this._context.createImageData(T,C);if(D.length===1)return this._context.createImageData(T)}createLinearGradient(T,C,D,P){return this._context.createLinearGradient(T,C,D,P)}createPattern(T,C){return this._context.createPattern(T,C)}createRadialGradient(T,C,D,P,B,F){return this._context.createRadialGradient(T,C,D,P,B,F)}drawImage(T,C,D,P,B,F,j,O,I){const W=arguments,Q=this._context;W.length===3?Q.drawImage(T,C,D):W.length===5?Q.drawImage(T,C,D,P,B):W.length===9&&Q.drawImage(T,C,D,P,B,F,j,O,I)}ellipse(T,C,D,P,B,F,j,O){this._context.ellipse(T,C,D,P,B,F,j,O)}isPointInPath(T,C,D,P){return D?this._context.isPointInPath(D,T,C,P):this._context.isPointInPath(T,C,P)}fill(...T){this._context.fill.apply(this._context,T)}fillRect(T,C,D,P){this._context.fillRect(T,C,D,P)}strokeRect(T,C,D,P){this._context.strokeRect(T,C,D,P)}fillText(T,C,D,P){P?this._context.fillText(T,C,D,P):this._context.fillText(T,C,D)}measureText(T){return this._context.measureText(T)}getImageData(T,C,D,P){return this._context.getImageData(T,C,D,P)}lineTo(T,C){this._context.lineTo(T,C)}moveTo(T,C){this._context.moveTo(T,C)}rect(T,C,D,P){this._context.rect(T,C,D,P)}roundRect(T,C,D,P,B){this._context.roundRect(T,C,D,P,B)}putImageData(T,C,D){this._context.putImageData(T,C,D)}quadraticCurveTo(T,C,D,P){this._context.quadraticCurveTo(T,C,D,P)}restore(){this._context.restore()}rotate(T){this._context.rotate(T)}save(){this._context.save()}scale(T,C){this._context.scale(T,C)}setLineDash(T){this._context.setLineDash?this._context.setLineDash(T):"mozDash"in this._context?this._context.mozDash=T:"webkitLineDash"in this._context&&(this._context.webkitLineDash=T)}getLineDash(){return this._context.getLineDash()}setTransform(T,C,D,P,B,F){this._context.setTransform(T,C,D,P,B,F)}stroke(T){T?this._context.stroke(T):this._context.stroke()}strokeText(T,C,D,P){this._context.strokeText(T,C,D,P)}transform(T,C,D,P,B,F){this._context.transform(T,C,D,P,B,F)}translate(T,C){this._context.translate(T,C)}_enableTrace(){let T=this,C=x.length,D=this.setAttr,P,B;const F=function(j){let O=T[j],I;T[j]=function(){return B=t(Array.prototype.slice.call(arguments,0)),I=O.apply(T,arguments),T._trace({method:j,args:B}),I}};for(P=0;P<C;P++)F(x[P]);T.setAttr=function(){D.apply(T,arguments);const j=arguments[0];let O=arguments[1];(j==="shadowOffsetX"||j==="shadowOffsetY"||j==="shadowBlur")&&(O=O/this.canvas.getPixelRatio()),T._trace({property:j,val:O})}}_applyGlobalCompositeOperation(T){const C=T.attrs.globalCompositeOperation;!C||C==="source-over"||this.setAttr("globalCompositeOperation",C)}};hf.Context=S,b.forEach(function(E){Object.defineProperty(S.prototype,E,{get(){return this._context[E]},set(T){this._context[E]=T}})});class w extends S{constructor(T,{willReadFrequently:C=!1}={}){super(T),this._context=T._canvas.getContext("2d",{willReadFrequently:C})}_fillColor(T){const C=T.fill();this.setAttr("fillStyle",C),T._fillFunc(this)}_fillPattern(T){this.setAttr("fillStyle",T._getFillPattern()),T._fillFunc(this)}_fillLinearGradient(T){const C=T._getLinearGradient();C&&(this.setAttr("fillStyle",C),T._fillFunc(this))}_fillRadialGradient(T){const C=T._getRadialGradient();C&&(this.setAttr("fillStyle",C),T._fillFunc(this))}_fill(T){const C=T.fill(),D=T.getFillPriority();if(C&&D==="color"){this._fillColor(T);return}const P=T.getFillPatternImage();if(P&&D==="pattern"){this._fillPattern(T);return}const B=T.getFillLinearGradientColorStops();if(B&&D==="linear-gradient"){this._fillLinearGradient(T);return}const F=T.getFillRadialGradientColorStops();if(F&&D==="radial-gradient"){this._fillRadialGradient(T);return}C?this._fillColor(T):P?this._fillPattern(T):B?this._fillLinearGradient(T):F&&this._fillRadialGradient(T)}_strokeLinearGradient(T){const C=T.getStrokeLinearGradientStartPoint(),D=T.getStrokeLinearGradientEndPoint(),P=T.getStrokeLinearGradientColorStops(),B=this.createLinearGradient(C.x,C.y,D.x,D.y);if(P){for(let F=0;F<P.length;F+=2)B.addColorStop(P[F],P[F+1]);this.setAttr("strokeStyle",B)}}_stroke(T){const C=T.dash(),D=T.getStrokeScaleEnabled();if(T.hasStroke()){if(!D){this.save();const B=this.getCanvas().getPixelRatio();this.setTransform(B,0,0,B,0,0)}this._applyLineCap(T),C&&T.dashEnabled()&&(this.setLineDash(C),this.setAttr("lineDashOffset",T.dashOffset())),this.setAttr("lineWidth",T.strokeWidth()),T.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),T.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(T):this.setAttr("strokeStyle",T.stroke()),T._strokeFunc(this),D||this.restore()}}_applyShadow(T){var C,D,P;const B=(C=T.getShadowRGBA())!==null&&C!==void 0?C:"black",F=(D=T.getShadowBlur())!==null&&D!==void 0?D:5,j=(P=T.getShadowOffset())!==null&&P!==void 0?P:{x:0,y:0},O=T.getAbsoluteScale(),I=this.canvas.getPixelRatio(),W=O.x*I,Q=O.y*I;this.setAttr("shadowColor",B),this.setAttr("shadowBlur",F*Math.min(Math.abs(W),Math.abs(Q))),this.setAttr("shadowOffsetX",j.x*W),this.setAttr("shadowOffsetY",j.y*Q)}}hf.SceneContext=w;class M extends S{constructor(T){super(T),this._context=T._canvas.getContext("2d",{willReadFrequently:!0})}_fill(T){this.save(),this.setAttr("fillStyle",T.colorKey),T._fillFuncHit(this),this.restore()}strokeShape(T){T.hasHitStroke()&&this._stroke(T)}_stroke(T){if(T.hasHitStroke()){const C=T.getStrokeScaleEnabled();if(!C){this.save();const B=this.getCanvas().getPixelRatio();this.setTransform(B,0,0,B,0,0)}this._applyLineCap(T);const D=T.hitStrokeWidth(),P=D==="auto"?T.strokeWidth():D;this.setAttr("lineWidth",P),this.setAttr("strokeStyle",T.colorKey),T._strokeFuncHit(this),C||this.restore()}}}return hf.HitContext=M,hf}var PN;function JS(){if(PN)return df;PN=1,Object.defineProperty(df,"__esModule",{value:!0}),df.HitCanvas=df.SceneCanvas=df.Canvas=void 0;const n=Ps(),e=y8(),t=Si();let i;function a(){if(i)return i;const d=n.Util.createCanvasElement(),f=d.getContext("2d");return i=function(){const g=t.Konva._global.devicePixelRatio||1,x=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;return g/x}(),n.Util.releaseCanvas(d),i}class s{constructor(f){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const x=(f||{}).pixelRatio||t.Konva.pixelRatio||a();this.pixelRatio=x,this._canvas=n.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(f){const g=this.pixelRatio;this.pixelRatio=f,this.setSize(this.getWidth()/g,this.getHeight()/g)}setWidth(f){this.width=this._canvas.width=f*this.pixelRatio,this._canvas.style.width=f+"px";const g=this.pixelRatio;this.getContext()._context.scale(g,g)}setHeight(f){this.height=this._canvas.height=f*this.pixelRatio,this._canvas.style.height=f+"px";const g=this.pixelRatio;this.getContext()._context.scale(g,g)}getWidth(){return this.width}getHeight(){return this.height}setSize(f,g){this.setWidth(f||0),this.setHeight(g||0)}toDataURL(f,g){try{return this._canvas.toDataURL(f,g)}catch{try{return this._canvas.toDataURL()}catch(b){return n.Util.error("Unable to get data URL. "+b.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}df.Canvas=s;class r extends s{constructor(f={width:0,height:0,willReadFrequently:!1}){super(f),this.context=new e.SceneContext(this,{willReadFrequently:f.willReadFrequently}),this.setSize(f.width,f.height)}}df.SceneCanvas=r;class l extends s{constructor(f={width:0,height:0}){super(f),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(f.width,f.height)}}return df.HitCanvas=l,df}var ew={},UN;function p3(){return UN||(UN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DD=void 0;const e=Si(),t=Ps();n.DD={get isDragging(){let i=!1;return n.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){let i;return n.DD._dragElements.forEach(a=>{i=a.node}),i},_dragElements:new Map,_drag(i){const a=[];n.DD._dragElements.forEach((s,r)=>{const{node:l}=s,d=l.getStage();d.setPointersPositions(i),s.pointerId===void 0&&(s.pointerId=t.Util._getFirstPointerId(i));const f=d._changedPointerPositions.find(g=>g.id===s.pointerId);if(f){if(s.dragStatus!=="dragging"){const g=l.dragDistance();if(Math.max(Math.abs(f.x-s.startPointerPos.x),Math.abs(f.y-s.startPointerPos.y))<g||(l.startDrag({evt:i}),!l.isDragging()))return}l._setDragPosition(i,s),a.push(l)}}),a.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:i},!0)})},_endDragBefore(i){const a=[];n.DD._dragElements.forEach(s=>{const{node:r}=s,l=r.getStage();if(i&&l.setPointersPositions(i),!l._changedPointerPositions.find(g=>g.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(n.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const f=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;f&&a.indexOf(f)===-1&&a.push(f)}),a.forEach(s=>{s.draw()})},_endDragAfter(i){n.DD._dragElements.forEach((a,s)=>{a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:i},!0),a.dragStatus!=="dragging"&&n.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",n.DD._endDragBefore,!0),window.addEventListener("touchend",n.DD._endDragBefore,!0),window.addEventListener("touchcancel",n.DD._endDragBefore,!0),window.addEventListener("mousemove",n.DD._drag),window.addEventListener("touchmove",n.DD._drag),window.addEventListener("mouseup",n.DD._endDragAfter,!1),window.addEventListener("touchend",n.DD._endDragAfter,!1),window.addEventListener("touchcancel",n.DD._endDragAfter,!1))}(ew)),ew}var tw={},$l={},LN;function zi(){if(LN)return $l;LN=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.RGBComponent=i,$l.alphaComponent=a,$l.getNumberValidator=s,$l.getNumberOrArrayOfNumbersValidator=r,$l.getNumberOrAutoValidator=l,$l.getStringValidator=d,$l.getStringOrGradientValidator=f,$l.getFunctionValidator=g,$l.getNumberArrayValidator=x,$l.getBooleanValidator=b,$l.getComponentValidator=_;const n=Si(),e=Ps();function t(S){return e.Util._isString(S)?'"'+S+'"':Object.prototype.toString.call(S)==="[object Number]"||e.Util._isBoolean(S)?S:Object.prototype.toString.call(S)}function i(S){return S>255?255:S<0?0:Math.round(S)}function a(S){return S>1?1:S<1e-4?1e-4:S}function s(){if(n.Konva.isUnminified)return function(S,w){return e.Util._isNumber(S)||e.Util.warn(t(S)+' is a not valid value for "'+w+'" attribute. The value should be a number.'),S}}function r(S){if(n.Konva.isUnminified)return function(w,M){let E=e.Util._isNumber(w),T=e.Util._isArray(w)&&w.length==S;return!E&&!T&&e.Util.warn(t(w)+' is a not valid value for "'+M+'" attribute. The value should be a number or Array<number>('+S+")"),w}}function l(){if(n.Konva.isUnminified)return function(S,w){return e.Util._isNumber(S)||S==="auto"||e.Util.warn(t(S)+' is a not valid value for "'+w+'" attribute. The value should be a number or "auto".'),S}}function d(){if(n.Konva.isUnminified)return function(S,w){return e.Util._isString(S)||e.Util.warn(t(S)+' is a not valid value for "'+w+'" attribute. The value should be a string.'),S}}function f(){if(n.Konva.isUnminified)return function(S,w){const M=e.Util._isString(S),E=Object.prototype.toString.call(S)==="[object CanvasGradient]"||S&&S.addColorStop;return M||E||e.Util.warn(t(S)+' is a not valid value for "'+w+'" attribute. The value should be a string or a native gradient.'),S}}function g(){if(n.Konva.isUnminified)return function(S,w){return e.Util._isFunction(S)||e.Util.warn(t(S)+' is a not valid value for "'+w+'" attribute. The value should be a function.'),S}}function x(){if(n.Konva.isUnminified)return function(S,w){const M=Int8Array?Object.getPrototypeOf(Int8Array):null;return M&&S instanceof M||(e.Util._isArray(S)?S.forEach(function(E){e.Util._isNumber(E)||e.Util.warn('"'+w+'" attribute has non numeric element '+E+". Make sure that all elements are numbers.")}):e.Util.warn(t(S)+' is a not valid value for "'+w+'" attribute. The value should be a array of numbers.')),S}}function b(){if(n.Konva.isUnminified)return function(S,w){return S===!0||S===!1||e.Util.warn(t(S)+' is a not valid value for "'+w+'" attribute. The value should be a boolean.'),S}}function _(S){if(n.Konva.isUnminified)return function(w,M){return w==null||e.Util.isObject(w)||e.Util.warn(t(w)+' is a not valid value for "'+M+'" attribute. The value should be an object with properties '+S),w}}return $l}var zN;function ji(){return zN||(zN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Factory=void 0;const e=Ps(),t=zi(),i="get",a="set";n.Factory={addGetterSetter(s,r,l,d,f){n.Factory.addGetter(s,r,l),n.Factory.addSetter(s,r,d,f),n.Factory.addOverloadedGetterSetter(s,r)},addGetter(s,r,l){const d=i+e.Util._capitalize(r);s.prototype[d]=s.prototype[d]||function(){const f=this.attrs[r];return f===void 0?l:f}},addSetter(s,r,l,d){const f=a+e.Util._capitalize(r);s.prototype[f]||n.Factory.overWriteSetter(s,r,l,d)},overWriteSetter(s,r,l,d){const f=a+e.Util._capitalize(r);s.prototype[f]=function(g){return l&&g!==void 0&&g!==null&&(g=l.call(this,g,r)),this._setAttr(r,g),d&&d.call(this),this}},addComponentsGetterSetter(s,r,l,d,f){const g=l.length,x=e.Util._capitalize,b=i+x(r),_=a+x(r);s.prototype[b]=function(){const w={};for(let M=0;M<g;M++){const E=l[M];w[E]=this.getAttr(r+x(E))}return w};const S=(0,t.getComponentValidator)(l);s.prototype[_]=function(w){const M=this.attrs[r];d&&(w=d.call(this,w,r)),S&&S.call(this,w,r);for(const E in w)w.hasOwnProperty(E)&&this._setAttr(r+x(E),w[E]);return w||l.forEach(E=>{this._setAttr(r+x(E),void 0)}),this._fireChangeEvent(r,M,w),f&&f.call(this),this},n.Factory.addOverloadedGetterSetter(s,r)},addOverloadedGetterSetter(s,r){const l=e.Util._capitalize(r),d=a+l,f=i+l;s.prototype[r]=function(){return arguments.length?(this[d](arguments[0]),this):this[f]()}},addDeprecatedGetterSetter(s,r,l,d){e.Util.error("Adding deprecated "+r);const f=i+e.Util._capitalize(r),g=r+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[f]=function(){e.Util.error(g);const x=this.attrs[r];return x===void 0?l:x},n.Factory.addSetter(s,r,d,function(){e.Util.error(g)}),n.Factory.addOverloadedGetterSetter(s,r)},backCompat(s,r){e.Util.each(r,function(l,d){const f=s.prototype[d],g=i+e.Util._capitalize(l),x=a+e.Util._capitalize(l);function b(){f.apply(this,arguments),e.Util.error('"'+l+'" method is deprecated and will be removed soon. Use ""'+d+'" instead.')}s.prototype[l]=b,s.prototype[g]=b,s.prototype[x]=b})},afterSetFilter(){this._filterUpToDate=!1}}}(tw)),tw}var IN;function qs(){if(IN)return gy;IN=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.Node=void 0;const n=JS(),e=p3(),t=ji(),i=Si(),a=Ps(),s=zi(),r="absoluteOpacity",l="allEventListeners",d="absoluteTransform",f="absoluteScale",g="canvas",x="Change",b="children",_="konva",S="listening",w="mouseenter",M="mouseleave",E="pointerenter",T="pointerleave",C="touchenter",D="touchleave",P="set",B="Shape",F=" ",j="stage",O="transform",I="Stage",W="visible",Q=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(F);let J=1;class te{constructor(X){this._id=J++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(X),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(X){(X===O||X===d)&&this._cache.get(X)?this._cache.get(X).dirty=!0:X?this._cache.delete(X):this._cache.clear()}_getCache(X,G){let ee=this._cache.get(X);return(ee===void 0||(X===O||X===d)&&ee.dirty===!0)&&(ee=G.call(this),this._cache.set(X,ee)),ee}_calculate(X,G,ee){if(!this._attachedDepsListeners.get(X)){const Y=G.map(ne=>ne+"Change.konva").join(F);this.on(Y,()=>{this._clearCache(X)}),this._attachedDepsListeners.set(X,!0)}return this._getCache(X,ee)}_getCanvasCache(){return this._cache.get(g)}_clearSelfAndDescendantCache(X){this._clearCache(X),X===d&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(g)){const{scene:X,filter:G,hit:ee,buffer:Y}=this._cache.get(g);a.Util.releaseCanvas(X,G,ee,Y),this._cache.delete(g)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(X){const G=X||{};let ee={};(G.x===void 0||G.y===void 0||G.width===void 0||G.height===void 0)&&(ee=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let Y=Math.ceil(G.width||ee.width),ne=Math.ceil(G.height||ee.height),ue=G.pixelRatio,de=G.x===void 0?Math.floor(ee.x):G.x,ie=G.y===void 0?Math.floor(ee.y):G.y,Me=G.offset||0,ye=G.drawBorder||!1,ae=G.hitCanvasPixelRatio||1;if(!Y||!ne){a.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const _e=Math.abs(Math.round(ee.x)-de)>.5?1:0,Ke=Math.abs(Math.round(ee.y)-ie)>.5?1:0;Y+=Me*2+_e,ne+=Me*2+Ke,de-=Me,ie-=Me;const Ge=new n.SceneCanvas({pixelRatio:ue,width:Y,height:ne}),st=new n.SceneCanvas({pixelRatio:ue,width:0,height:0,willReadFrequently:!0}),ft=new n.HitCanvas({pixelRatio:ae,width:Y,height:ne}),Pe=Ge.getContext(),he=ft.getContext(),ke=new n.SceneCanvas({width:Ge.width/Ge.pixelRatio+Math.abs(de),height:Ge.height/Ge.pixelRatio+Math.abs(ie),pixelRatio:Ge.pixelRatio}),Ee=ke.getContext();return ft.isCache=!0,Ge.isCache=!0,this._cache.delete(g),this._filterUpToDate=!1,G.imageSmoothingEnabled===!1&&(Ge.getContext()._context.imageSmoothingEnabled=!1,st.getContext()._context.imageSmoothingEnabled=!1),Pe.save(),he.save(),Ee.save(),Pe.translate(-de,-ie),he.translate(-de,-ie),Ee.translate(-de,-ie),ke.x=de,ke.y=ie,this._isUnderCache=!0,this._clearSelfAndDescendantCache(r),this._clearSelfAndDescendantCache(f),this.drawScene(Ge,this,ke),this.drawHit(ft,this),this._isUnderCache=!1,Pe.restore(),he.restore(),ye&&(Pe.save(),Pe.beginPath(),Pe.rect(0,0,Y,ne),Pe.closePath(),Pe.setAttr("strokeStyle","red"),Pe.setAttr("lineWidth",5),Pe.stroke(),Pe.restore()),this._cache.set(g,{scene:Ge,filter:st,hit:ft,buffer:ke,x:de,y:ie}),this._requestDraw(),this}isCached(){return this._cache.has(g)}getClientRect(X){throw new Error('abstract "getClientRect" method call')}_transformedRect(X,G){const ee=[{x:X.x,y:X.y},{x:X.x+X.width,y:X.y},{x:X.x+X.width,y:X.y+X.height},{x:X.x,y:X.y+X.height}];let Y=1/0,ne=1/0,ue=-1/0,de=-1/0;const ie=this.getAbsoluteTransform(G);return ee.forEach(function(Me){const ye=ie.point(Me);Y===void 0&&(Y=ue=ye.x,ne=de=ye.y),Y=Math.min(Y,ye.x),ne=Math.min(ne,ye.y),ue=Math.max(ue,ye.x),de=Math.max(de,ye.y)}),{x:Y,y:ne,width:ue-Y,height:de-ne}}_drawCachedSceneCanvas(X){X.save(),X._applyOpacity(this),X._applyGlobalCompositeOperation(this);const G=this._getCanvasCache();X.translate(G.x,G.y);const ee=this._getCachedSceneCanvas(),Y=ee.pixelRatio;X.drawImage(ee._canvas,0,0,ee.width/Y,ee.height/Y),X.restore()}_drawCachedHitCanvas(X){const G=this._getCanvasCache(),ee=G.hit;X.save(),X.translate(G.x,G.y),X.drawImage(ee._canvas,0,0,ee.width/ee.pixelRatio,ee.height/ee.pixelRatio),X.restore()}_getCachedSceneCanvas(){let X=this.filters(),G=this._getCanvasCache(),ee=G.scene,Y=G.filter,ne=Y.getContext(),ue,de,ie,Me;if(X){if(!this._filterUpToDate){const ye=ee.pixelRatio;Y.setSize(ee.width/ee.pixelRatio,ee.height/ee.pixelRatio);try{for(ue=X.length,ne.clear(),ne.drawImage(ee._canvas,0,0,ee.getWidth()/ye,ee.getHeight()/ye),de=ne.getImageData(0,0,Y.getWidth(),Y.getHeight()),ie=0;ie<ue;ie++){if(Me=X[ie],typeof Me!="function"){a.Util.error("Filter should be type of function, but got "+typeof Me+" instead. Please check correct filters");continue}Me.call(this,de),ne.putImageData(de,0,0)}}catch(ae){a.Util.error("Unable to apply filter. "+ae.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return Y}return ee}on(X,G){if(this._cache&&this._cache.delete(l),arguments.length===3)return this._delegate.apply(this,arguments);const ee=X.split(F);for(let Y=0;Y<ee.length;Y++){const ue=ee[Y].split("."),de=ue[0],ie=ue[1]||"";this.eventListeners[de]||(this.eventListeners[de]=[]),this.eventListeners[de].push({name:ie,handler:G})}return this}off(X,G){let ee=(X||"").split(F),Y=ee.length,ne,ue,de,ie,Me,ye;if(this._cache&&this._cache.delete(l),!X)for(ue in this.eventListeners)this._off(ue);for(ne=0;ne<Y;ne++)if(de=ee[ne],ie=de.split("."),Me=ie[0],ye=ie[1],Me)this.eventListeners[Me]&&this._off(Me,ye,G);else for(ue in this.eventListeners)this._off(ue,ye,G);return this}dispatchEvent(X){const G={target:this,type:X.type,evt:X};return this.fire(X.type,G),this}addEventListener(X,G){return this.on(X,function(ee){G.call(this,ee.evt)}),this}removeEventListener(X){return this.off(X),this}_delegate(X,G,ee){const Y=this;this.on(X,function(ne){const ue=ne.target.findAncestors(G,!0,Y);for(let de=0;de<ue.length;de++)ne=a.Util.cloneObject(ne),ne.currentTarget=ue[de],ee.call(ue[de],ne)})}remove(){return this.isDragging()&&this.stopDrag(),e.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(r),this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(W),this._clearSelfAndDescendantCache(S)}_remove(){this._clearCaches();const X=this.getParent();X&&X.children&&(X.children.splice(this.index,1),X._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(X){const G="get"+a.Util._capitalize(X);return a.Util._isFunction(this[G])?this[G]():this.attrs[X]}getAncestors(){let X=this.getParent(),G=[];for(;X;)G.push(X),X=X.getParent();return G}getAttrs(){return this.attrs||{}}setAttrs(X){return this._batchTransformChanges(()=>{let G,ee;if(!X)return this;for(G in X)G!==b&&(ee=P+a.Util._capitalize(G),a.Util._isFunction(this[ee])?this[ee](X[G]):this._setAttr(G,X[G]))}),this}isListening(){return this._getCache(S,this._isListening)}_isListening(X){if(!this.listening())return!1;const ee=this.getParent();return ee&&ee!==X&&this!==X?ee._isListening(X):!0}isVisible(){return this._getCache(W,this._isVisible)}_isVisible(X){if(!this.visible())return!1;const ee=this.getParent();return ee&&ee!==X&&this!==X?ee._isVisible(X):!0}shouldDrawHit(X,G=!1){if(X)return this._isVisible(X)&&this._isListening(X);const ee=this.getLayer();let Y=!1;e.DD._dragElements.forEach(ue=>{ue.dragStatus==="dragging"&&(ue.node.nodeType==="Stage"||ue.node.getLayer()===ee)&&(Y=!0)});const ne=!G&&!i.Konva.hitOnDragEnabled&&(Y||i.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!ne}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let X=this.getDepth(),G=this,ee=0,Y,ne,ue,de;function ie(ye){for(Y=[],ne=ye.length,ue=0;ue<ne;ue++)de=ye[ue],ee++,de.nodeType!==B&&(Y=Y.concat(de.getChildren().slice())),de._id===G._id&&(ue=ne);Y.length>0&&Y[0].getDepth()<=X&&ie(Y)}const Me=this.getStage();return G.nodeType!==I&&Me&&ie(Me.getChildren()),ee}getDepth(){let X=0,G=this.parent;for(;G;)X++,G=G.parent;return X}_batchTransformChanges(X){this._batchingTransformChange=!0,X(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(O),this._clearSelfAndDescendantCache(d)),this._needClearTransformCache=!1}setPosition(X){return this._batchTransformChanges(()=>{this.x(X.x),this.y(X.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const X=this.getStage();if(!X)return null;const G=X.getPointerPosition();if(!G)return null;const ee=this.getAbsoluteTransform().copy();return ee.invert(),ee.point(G)}getAbsolutePosition(X){let G=!1,ee=this.parent;for(;ee;){if(ee.isCached()){G=!0;break}ee=ee.parent}G&&!X&&(X=!0);const Y=this.getAbsoluteTransform(X).getMatrix(),ne=new a.Transform,ue=this.offset();return ne.m=Y.slice(),ne.translate(ue.x,ue.y),ne.getTranslation()}setAbsolutePosition(X){const{x:G,y:ee,...Y}=this._clearTransform();this.attrs.x=G,this.attrs.y=ee,this._clearCache(O);const ne=this._getAbsoluteTransform().copy();return ne.invert(),ne.translate(X.x,X.y),X={x:this.attrs.x+ne.getTranslation().x,y:this.attrs.y+ne.getTranslation().y},this._setTransform(Y),this.setPosition({x:X.x,y:X.y}),this._clearCache(O),this._clearSelfAndDescendantCache(d),this}_setTransform(X){let G;for(G in X)this.attrs[G]=X[G]}_clearTransform(){const X={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,X}move(X){let G=X.x,ee=X.y,Y=this.x(),ne=this.y();return G!==void 0&&(Y+=G),ee!==void 0&&(ne+=ee),this.setPosition({x:Y,y:ne}),this}_eachAncestorReverse(X,G){let ee=[],Y=this.getParent(),ne,ue;if(!(G&&G._id===this._id)){for(ee.unshift(this);Y&&(!G||Y._id!==G._id);)ee.unshift(Y),Y=Y.parent;for(ne=ee.length,ue=0;ue<ne;ue++)X(ee[ue])}}rotate(X){return this.rotation(this.rotation()+X),this}moveToTop(){if(!this.parent)return a.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const X=this.index,G=this.parent.getChildren().length;return X<G-1?(this.parent.children.splice(X,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return a.Util.warn("Node has no parent. moveUp function is ignored."),!1;const X=this.index,G=this.parent.getChildren().length;return X<G-1?(this.parent.children.splice(X,1),this.parent.children.splice(X+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return a.Util.warn("Node has no parent. moveDown function is ignored."),!1;const X=this.index;return X>0?(this.parent.children.splice(X,1),this.parent.children.splice(X-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return a.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const X=this.index;return X>0?(this.parent.children.splice(X,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(X){if(!this.parent)return a.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(X<0||X>=this.parent.children.length)&&a.Util.warn("Unexpected value "+X+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const G=this.index;return this.parent.children.splice(G,1),this.parent.children.splice(X,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(r,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let X=this.opacity();const G=this.getParent();return G&&!G._isUnderCache&&(X*=G.getAbsoluteOpacity()),X}moveTo(X){return this.getParent()!==X&&(this._remove(),X.add(this)),this}toObject(){let X=this.getAttrs(),G,ee,Y,ne,ue;const de={attrs:{},className:this.getClassName()};for(G in X)ee=X[G],ue=a.Util.isObject(ee)&&!a.Util._isPlainObject(ee)&&!a.Util._isArray(ee),!ue&&(Y=typeof this[G]=="function"&&this[G],delete X[G],ne=Y?Y.call(this):null,X[G]=ee,ne!==ee&&(de.attrs[G]=ee));return a.Util._prepareToStringify(de)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(X,G,ee){const Y=[];G&&this._isMatch(X)&&Y.push(this);let ne=this.parent;for(;ne;){if(ne===ee)return Y;ne._isMatch(X)&&Y.push(ne),ne=ne.parent}return Y}isAncestorOf(X){return!1}findAncestor(X,G,ee){return this.findAncestors(X,G,ee)[0]}_isMatch(X){if(!X)return!1;if(typeof X=="function")return X(this);let G=X.replace(/ /g,"").split(","),ee=G.length,Y,ne;for(Y=0;Y<ee;Y++)if(ne=G[Y],a.Util.isValidSelector(ne)||(a.Util.warn('Selector "'+ne+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),a.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),a.Util.warn("Konva is awesome, right?")),ne.charAt(0)==="#"){if(this.id()===ne.slice(1))return!0}else if(ne.charAt(0)==="."){if(this.hasName(ne.slice(1)))return!0}else if(this.className===ne||this.nodeType===ne)return!0;return!1}getLayer(){const X=this.getParent();return X?X.getLayer():null}getStage(){return this._getCache(j,this._getStage)}_getStage(){const X=this.getParent();return X?X.getStage():null}fire(X,G={},ee){return G.target=G.target||this,ee?this._fireAndBubble(X,G):this._fire(X,G),this}getAbsoluteTransform(X){return X?this._getAbsoluteTransform(X):this._getCache(d,this._getAbsoluteTransform)}_getAbsoluteTransform(X){let G;if(X)return G=new a.Transform,this._eachAncestorReverse(function(ee){const Y=ee.transformsEnabled();Y==="all"?G.multiply(ee.getTransform()):Y==="position"&&G.translate(ee.x()-ee.offsetX(),ee.y()-ee.offsetY())},X),G;{G=this._cache.get(d)||new a.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(G):G.reset();const ee=this.transformsEnabled();if(ee==="all")G.multiply(this.getTransform());else if(ee==="position"){const Y=this.attrs.x||0,ne=this.attrs.y||0,ue=this.attrs.offsetX||0,de=this.attrs.offsetY||0;G.translate(Y-ue,ne-de)}return G.dirty=!1,G}}getAbsoluteScale(X){let G=this;for(;G;)G._isUnderCache&&(X=G),G=G.getParent();const Y=this.getAbsoluteTransform(X).decompose();return{x:Y.scaleX,y:Y.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(O,this._getTransform)}_getTransform(){var X,G;const ee=this._cache.get(O)||new a.Transform;ee.reset();const Y=this.x(),ne=this.y(),ue=i.Konva.getAngle(this.rotation()),de=(X=this.attrs.scaleX)!==null&&X!==void 0?X:1,ie=(G=this.attrs.scaleY)!==null&&G!==void 0?G:1,Me=this.attrs.skewX||0,ye=this.attrs.skewY||0,ae=this.attrs.offsetX||0,_e=this.attrs.offsetY||0;return(Y!==0||ne!==0)&&ee.translate(Y,ne),ue!==0&&ee.rotate(ue),(Me!==0||ye!==0)&&ee.skew(Me,ye),(de!==1||ie!==1)&&ee.scale(de,ie),(ae!==0||_e!==0)&&ee.translate(-1*ae,-1*_e),ee.dirty=!1,ee}clone(X){let G=a.Util.cloneObject(this.attrs),ee,Y,ne,ue,de;for(ee in X)G[ee]=X[ee];const ie=new this.constructor(G);for(ee in this.eventListeners)for(Y=this.eventListeners[ee],ne=Y.length,ue=0;ue<ne;ue++)de=Y[ue],de.name.indexOf(_)<0&&(ie.eventListeners[ee]||(ie.eventListeners[ee]=[]),ie.eventListeners[ee].push(de));return ie}_toKonvaCanvas(X){X=X||{};const G=this.getClientRect(),ee=this.getStage(),Y=X.x!==void 0?X.x:Math.floor(G.x),ne=X.y!==void 0?X.y:Math.floor(G.y),ue=X.pixelRatio||1,de=new n.SceneCanvas({width:X.width||Math.ceil(G.width)||(ee?ee.width():0),height:X.height||Math.ceil(G.height)||(ee?ee.height():0),pixelRatio:ue}),ie=de.getContext(),Me=new n.SceneCanvas({width:de.width/de.pixelRatio+Math.abs(Y),height:de.height/de.pixelRatio+Math.abs(ne),pixelRatio:de.pixelRatio});return X.imageSmoothingEnabled===!1&&(ie._context.imageSmoothingEnabled=!1),ie.save(),(Y||ne)&&ie.translate(-1*Y,-1*ne),this.drawScene(de,void 0,Me),ie.restore(),de}toCanvas(X){return this._toKonvaCanvas(X)._canvas}toDataURL(X){X=X||{};const G=X.mimeType||null,ee=X.quality||null,Y=this._toKonvaCanvas(X).toDataURL(G,ee);return X.callback&&X.callback(Y),Y}toImage(X){return new Promise((G,ee)=>{try{const Y=X?.callback;Y&&delete X.callback,a.Util._urlToImage(this.toDataURL(X),function(ne){G(ne),Y?.(ne)})}catch(Y){ee(Y)}})}toBlob(X){return new Promise((G,ee)=>{try{const Y=X?.callback;Y&&delete X.callback,this.toCanvas(X).toBlob(ne=>{G(ne),Y?.(ne)},X?.mimeType,X?.quality)}catch(Y){ee(Y)}})}setSize(X){return this.width(X.width),this.height(X.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():i.Konva.dragDistance}_off(X,G,ee){let Y=this.eventListeners[X],ne,ue,de;for(ne=0;ne<Y.length;ne++)if(ue=Y[ne].name,de=Y[ne].handler,(ue!=="konva"||G==="konva")&&(!G||ue===G)&&(!ee||ee===de)){if(Y.splice(ne,1),Y.length===0){delete this.eventListeners[X];break}ne--}}_fireChangeEvent(X,G,ee){this._fire(X+x,{oldVal:G,newVal:ee})}addName(X){if(!this.hasName(X)){const G=this.name(),ee=G?G+" "+X:X;this.name(ee)}return this}hasName(X){if(!X)return!1;const G=this.name();return G?(G||"").split(/\s/g).indexOf(X)!==-1:!1}removeName(X){const G=(this.name()||"").split(/\s/g),ee=G.indexOf(X);return ee!==-1&&(G.splice(ee,1),this.name(G.join(" "))),this}setAttr(X,G){const ee=this[P+a.Util._capitalize(X)];return a.Util._isFunction(ee)?ee.call(this,G):this._setAttr(X,G),this}_requestDraw(){if(i.Konva.autoDrawEnabled){const X=this.getLayer()||this.getStage();X?.batchDraw()}}_setAttr(X,G){const ee=this.attrs[X];ee===G&&!a.Util.isObject(G)||(G==null?delete this.attrs[X]:this.attrs[X]=G,this._shouldFireChangeEvents&&this._fireChangeEvent(X,ee,G),this._requestDraw())}_setComponentAttr(X,G,ee){let Y;ee!==void 0&&(Y=this.attrs[X],Y||(this.attrs[X]=this.getAttr(X)),this.attrs[X][G]=ee,this._fireChangeEvent(X,Y,ee))}_fireAndBubble(X,G,ee){G&&this.nodeType===B&&(G.target=this);const Y=[w,M,E,T,C,D];if(!(Y.indexOf(X)!==-1&&(ee&&(this===ee||this.isAncestorOf&&this.isAncestorOf(ee))||this.nodeType==="Stage"&&!ee))){this._fire(X,G);const ue=Y.indexOf(X)!==-1&&ee&&ee.isAncestorOf&&ee.isAncestorOf(this)&&!ee.isAncestorOf(this.parent);(G&&!G.cancelBubble||!G)&&this.parent&&this.parent.isListening()&&!ue&&(ee&&ee.parent?this._fireAndBubble.call(this.parent,X,G,ee):this._fireAndBubble.call(this.parent,X,G))}}_getProtoListeners(X){var G,ee,Y;const ne=(G=this._cache.get(l))!==null&&G!==void 0?G:{};let ue=ne?.[X];if(ue===void 0){ue=[];let de=Object.getPrototypeOf(this);for(;de;){const ie=(Y=(ee=de.eventListeners)===null||ee===void 0?void 0:ee[X])!==null&&Y!==void 0?Y:[];ue.push(...ie),de=Object.getPrototypeOf(de)}ne[X]=ue,this._cache.set(l,ne)}return ue}_fire(X,G){G=G||{},G.currentTarget=this,G.type=X;const ee=this._getProtoListeners(X);if(ee)for(let ne=0;ne<ee.length;ne++)ee[ne].handler.call(this,G);const Y=this.eventListeners[X];if(Y)for(let ne=0;ne<Y.length;ne++)Y[ne].handler.call(this,G)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(X){const G=X?X.pointerId:void 0,ee=this.getStage(),Y=this.getAbsolutePosition();if(!ee)return;const ne=ee._getPointerById(G)||ee._changedPointerPositions[0]||Y;e.DD._dragElements.set(this._id,{node:this,startPointerPos:ne,offset:{x:ne.x-Y.x,y:ne.y-Y.y},dragStatus:"ready",pointerId:G})}startDrag(X,G=!0){e.DD._dragElements.has(this._id)||this._createDragElement(X);const ee=e.DD._dragElements.get(this._id);ee.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:X&&X.evt},G)}_setDragPosition(X,G){const ee=this.getStage()._getPointerById(G.pointerId);if(!ee)return;let Y={x:ee.x-G.offset.x,y:ee.y-G.offset.y};const ne=this.dragBoundFunc();if(ne!==void 0){const ue=ne.call(this,Y,X);ue?Y=ue:a.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==Y.x||this._lastPos.y!==Y.y)&&(this.setAbsolutePosition(Y),this._requestDraw()),this._lastPos=Y}stopDrag(X){const G=e.DD._dragElements.get(this._id);G&&(G.dragStatus="stopped"),e.DD._endDragBefore(X),e.DD._endDragAfter(X)}setDraggable(X){this._setAttr("draggable",X),this._dragChange()}isDragging(){const X=e.DD._dragElements.get(this._id);return X?X.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(X){if(!(!(X.evt.button!==void 0)||i.Konva.dragButtons.indexOf(X.evt.button)>=0)||this.isDragging())return;let Y=!1;e.DD._dragElements.forEach(ne=>{this.isAncestorOf(ne.node)&&(Y=!0)}),Y||this._createDragElement(X)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const G=e.DD._dragElements.get(this._id),ee=G&&G.dragStatus==="dragging",Y=G&&G.dragStatus==="ready";ee?this.stopDrag():Y&&e.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(X={x:0,y:0}){const G=this.getStage();if(!G)return!1;const ee={x:-X.x,y:-X.y,width:G.width()+2*X.x,height:G.height()+2*X.y};return a.Util.haveIntersection(ee,this.getClientRect())}static create(X,G){return a.Util._isString(X)&&(X=JSON.parse(X)),this._createNode(X,G)}static _createNode(X,G){let ee=te.prototype.getClassName.call(X),Y=X.children,ne,ue,de;G&&(X.attrs.container=G),i.Konva[ee]||(a.Util.warn('Can not find a node with class name "'+ee+'". Fallback to "Shape".'),ee="Shape");const ie=i.Konva[ee];if(ne=new ie(X.attrs),Y)for(ue=Y.length,de=0;de<ue;de++)ne.add(te._createNode(Y[de]));return ne}}gy.Node=te,te.prototype.nodeType="Node",te.prototype._attrsAffectingSize=[],te.prototype.eventListeners={},te.prototype.on.call(te.prototype,Q,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(O),this._clearSelfAndDescendantCache(d)}),te.prototype.on.call(te.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(W)}),te.prototype.on.call(te.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(S)}),te.prototype.on.call(te.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(r)});const oe=t.Factory.addGetterSetter;return oe(te,"zIndex"),oe(te,"absolutePosition"),oe(te,"position"),oe(te,"x",0,(0,s.getNumberValidator)()),oe(te,"y",0,(0,s.getNumberValidator)()),oe(te,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),oe(te,"opacity",1,(0,s.getNumberValidator)()),oe(te,"name","",(0,s.getStringValidator)()),oe(te,"id","",(0,s.getStringValidator)()),oe(te,"rotation",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(te,"scale",["x","y"]),oe(te,"scaleX",1,(0,s.getNumberValidator)()),oe(te,"scaleY",1,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(te,"skew",["x","y"]),oe(te,"skewX",0,(0,s.getNumberValidator)()),oe(te,"skewY",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(te,"offset",["x","y"]),oe(te,"offsetX",0,(0,s.getNumberValidator)()),oe(te,"offsetY",0,(0,s.getNumberValidator)()),oe(te,"dragDistance",void 0,(0,s.getNumberValidator)()),oe(te,"width",0,(0,s.getNumberValidator)()),oe(te,"height",0,(0,s.getNumberValidator)()),oe(te,"listening",!0,(0,s.getBooleanValidator)()),oe(te,"preventDefault",!0,(0,s.getBooleanValidator)()),oe(te,"filters",void 0,function($){return this._filterUpToDate=!1,$}),oe(te,"visible",!0,(0,s.getBooleanValidator)()),oe(te,"transformsEnabled","all",(0,s.getStringValidator)()),oe(te,"size"),oe(te,"dragBoundFunc"),oe(te,"draggable",!1,(0,s.getBooleanValidator)()),t.Factory.backCompat(te,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),gy}var vy={},BN;function $S(){if(BN)return vy;BN=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.Container=void 0;const n=ji(),e=qs(),t=zi();let i=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){const r=this.children||[];return s?r.filter(s):r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let l=0;l<s.length;l++)this.add(s[l]);return this}const r=s[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const r=this._generalFind(s,!0);return r.length>0?r[0]:void 0}_generalFind(s,r){const l=[];return this._descendants(d=>{const f=d._isMatch(s);return f&&l.push(d),!!(f&&r)}),l}_descendants(s){let r=!1;const l=this.getChildren();for(const d of l){if(r=s(d),r)return!0;if(d.hasChildren()&&(r=d._descendants(s),r))return!0}return!1}toObject(){const s=e.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(r=>{s.children.push(r.toObject())}),s}isAncestorOf(s){let r=s.getParent();for(;r;){if(r._id===this._id)return!0;r=r.getParent()}return!1}clone(s){const r=e.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(l){r.add(l.clone())}),r}getAllIntersections(s){const r=[];return this.find("Shape").forEach(l=>{l.isVisible()&&l.intersects(s)&&r.push(l)}),r}_clearSelfAndDescendantCache(s){var r;super._clearSelfAndDescendantCache(s),!this.isCached()&&((r=this.children)===null||r===void 0||r.forEach(function(l){l._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(r,l){r.index=l}),this._requestDraw()}drawScene(s,r,l){const d=this.getLayer(),f=s||d&&d.getCanvas(),g=f&&f.getContext(),x=this._getCanvasCache(),b=x&&x.scene,_=f&&f.isCache;if(!this.isVisible()&&!_)return this;if(b){g.save();const S=this.getAbsoluteTransform(r).getMatrix();g.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedSceneCanvas(g),g.restore()}else this._drawChildren("drawScene",f,r,l);return this}drawHit(s,r){if(!this.shouldDrawHit(r))return this;const l=this.getLayer(),d=s||l&&l.hitCanvas,f=d&&d.getContext(),g=this._getCanvasCache();if(g&&g.hit){f.save();const b=this.getAbsoluteTransform(r).getMatrix();f.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._drawCachedHitCanvas(f),f.restore()}else this._drawChildren("drawHit",d,r);return this}_drawChildren(s,r,l,d){var f;const g=r&&r.getContext(),x=this.clipWidth(),b=this.clipHeight(),_=this.clipFunc(),S=typeof x=="number"&&typeof b=="number"||_,w=l===this;if(S){g.save();const E=this.getAbsoluteTransform(l);let T=E.getMatrix();g.transform(T[0],T[1],T[2],T[3],T[4],T[5]),g.beginPath();let C;if(_)C=_.call(this,g,this);else{const D=this.clipX(),P=this.clipY();g.rect(D||0,P||0,x,b)}g.clip.apply(g,C),T=E.copy().invert().getMatrix(),g.transform(T[0],T[1],T[2],T[3],T[4],T[5])}const M=!w&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";M&&(g.save(),g._applyGlobalCompositeOperation(this)),(f=this.children)===null||f===void 0||f.forEach(function(E){E[s](r,l,d)}),M&&g.restore(),S&&g.restore()}getClientRect(s={}){var r;const l=s.skipTransform,d=s.relativeTo;let f,g,x,b,_={x:1/0,y:1/0,width:0,height:0};const S=this;(r=this.children)===null||r===void 0||r.forEach(function(E){if(!E.visible())return;const T=E.getClientRect({relativeTo:S,skipShadow:s.skipShadow,skipStroke:s.skipStroke});T.width===0&&T.height===0||(f===void 0?(f=T.x,g=T.y,x=T.x+T.width,b=T.y+T.height):(f=Math.min(f,T.x),g=Math.min(g,T.y),x=Math.max(x,T.x+T.width),b=Math.max(b,T.y+T.height)))});const w=this.find("Shape");let M=!1;for(let E=0;E<w.length;E++)if(w[E]._isVisible(this)){M=!0;break}return M&&f!==void 0?_={x:f,y:g,width:x-f,height:b-g}:_={x:0,y:0,width:0,height:0},l?_:this._transformedRect(_,d)}};return vy.Container=i,n.Factory.addComponentsGetterSetter(i,"clip",["x","y","width","height"]),n.Factory.addGetterSetter(i,"clipX",void 0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipY",void 0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipWidth",void 0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipHeight",void 0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipFunc"),vy}var nw={},Ep={},FN;function x8(){if(FN)return Ep;FN=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.getCapturedShape=i,Ep.createEvent=a,Ep.hasPointerCapture=s,Ep.setPointerCapture=r,Ep.releaseCapture=l;const n=Si(),e=new Map,t=n.Konva._global.PointerEvent!==void 0;function i(d){return e.get(d)}function a(d){return{evt:d,pointerId:d.pointerId}}function s(d,f){return e.get(d)===f}function r(d,f){l(d),f.getStage()&&(e.set(d,f),t&&f._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))}function l(d,f){const g=e.get(d);if(!g)return;const x=g.getStage();x&&x.content,e.delete(d),t&&g._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}return Ep}var kN;function yB(){return kN||(kN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Stage=n.stages=void 0;const e=Ps(),t=ji(),i=$S(),a=Si(),s=JS(),r=p3(),l=Si(),d=x8(),f="Stage",g="string",x="px",b="mouseout",_="mouseleave",S="mouseover",w="mouseenter",M="mousemove",E="mousedown",T="mouseup",C="pointermove",D="pointerdown",P="pointerup",B="pointercancel",F="lostpointercapture",j="pointerout",O="pointerleave",I="pointerover",W="pointerenter",Q="contextmenu",J="touchstart",te="touchend",oe="touchmove",$="touchcancel",X="wheel",G=5,ee=[[w,"_pointerenter"],[E,"_pointerdown"],[M,"_pointermove"],[T,"_pointerup"],[_,"_pointerleave"],[J,"_pointerdown"],[oe,"_pointermove"],[te,"_pointerup"],[$,"_pointercancel"],[S,"_pointerover"],[X,"_wheel"],[Q,"_contextmenu"],[D,"_pointerdown"],[C,"_pointermove"],[P,"_pointerup"],[B,"_pointercancel"],[O,"_pointerleave"],[F,"_lostpointercapture"]],Y={mouse:{[j]:b,[O]:_,[I]:S,[W]:w,[C]:M,[D]:E,[P]:T,[B]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[j]:"touchout",[O]:"touchleave",[I]:"touchover",[W]:"touchenter",[C]:oe,[D]:J,[P]:te,[B]:$,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[j]:j,[O]:O,[I]:I,[W]:W,[C]:C,[D]:D,[P]:P,[B]:B,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ne=ye=>ye.indexOf("pointer")>=0?"pointer":ye.indexOf("touch")>=0?"touch":"mouse",ue=ye=>{const ae=ne(ye);if(ae==="pointer")return a.Konva.pointerEventsEnabled&&Y.pointer;if(ae==="touch")return Y.touch;if(ae==="mouse")return Y.mouse};function de(ye={}){return(ye.clipFunc||ye.clipWidth||ye.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ye}const ie="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";n.stages=[];class Me extends i.Container{constructor(ae){super(de(ae)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),n.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{de(this.attrs)}),this._checkVisibility()}_validateAdd(ae){const _e=ae.getType()==="Layer",Ke=ae.getType()==="FastLayer";_e||Ke||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const ae=this.visible()?"":"none";this.content.style.display=ae}setContainer(ae){if(typeof ae===g){let _e;if(ae.charAt(0)==="."){const Ke=ae.slice(1);ae=document.getElementsByClassName(Ke)[0]}else ae.charAt(0)!=="#"?_e=ae:_e=ae.slice(1),ae=document.getElementById(_e);if(!ae)throw"Can not find container in document with id "+_e}return this._setAttr("container",ae),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),ae.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const ae=this.children,_e=ae.length;for(let Ke=0;Ke<_e;Ke++)ae[Ke].clear();return this}clone(ae){return ae||(ae={}),ae.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,ae)}destroy(){super.destroy();const ae=this.content;ae&&e.Util._isInDocument(ae)&&this.container().removeChild(ae);const _e=n.stages.indexOf(this);return _e>-1&&n.stages.splice(_e,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const ae=this._pointerPositions[0]||this._changedPointerPositions[0];return ae?{x:ae.x,y:ae.y}:(e.Util.warn(ie),null)}_getPointerById(ae){return this._pointerPositions.find(_e=>_e.id===ae)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(ae){ae=ae||{},ae.x=ae.x||0,ae.y=ae.y||0,ae.width=ae.width||this.width(),ae.height=ae.height||this.height();const _e=new s.SceneCanvas({width:ae.width,height:ae.height,pixelRatio:ae.pixelRatio||1}),Ke=_e.getContext()._context,Ge=this.children;return(ae.x||ae.y)&&Ke.translate(-1*ae.x,-1*ae.y),Ge.forEach(function(st){if(!st.isVisible())return;const ft=st._toKonvaCanvas(ae);Ke.drawImage(ft._canvas,ae.x,ae.y,ft.getWidth()/ft.getPixelRatio(),ft.getHeight()/ft.getPixelRatio())}),_e}getIntersection(ae){if(!ae)return null;const _e=this.children,Ke=_e.length,Ge=Ke-1;for(let st=Ge;st>=0;st--){const ft=_e[st].getIntersection(ae);if(ft)return ft}return null}_resizeDOM(){const ae=this.width(),_e=this.height();this.content&&(this.content.style.width=ae+x,this.content.style.height=_e+x),this.bufferCanvas.setSize(ae,_e),this.bufferHitCanvas.setSize(ae,_e),this.children.forEach(Ke=>{Ke.setSize({width:ae,height:_e}),Ke.draw()})}add(ae,..._e){if(arguments.length>1){for(let Ge=0;Ge<arguments.length;Ge++)this.add(arguments[Ge]);return this}super.add(ae);const Ke=this.children.length;return Ke>G&&e.Util.warn("The stage has "+Ke+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),ae.setSize({width:this.width(),height:this.height()}),ae.draw(),a.Konva.isBrowser&&this.content.appendChild(ae.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(ae){return d.hasPointerCapture(ae,this)}setPointerCapture(ae){d.setPointerCapture(ae,this)}releaseCapture(ae){d.releaseCapture(ae,this)}getLayers(){return this.children}_bindContentEvents(){a.Konva.isBrowser&&ee.forEach(([ae,_e])=>{this.content.addEventListener(ae,Ke=>{this[_e](Ke)},{passive:!1})})}_pointerenter(ae){this.setPointersPositions(ae);const _e=ue(ae.type);_e&&this._fire(_e.pointerenter,{evt:ae,target:this,currentTarget:this})}_pointerover(ae){this.setPointersPositions(ae);const _e=ue(ae.type);_e&&this._fire(_e.pointerover,{evt:ae,target:this,currentTarget:this})}_getTargetShape(ae){let _e=this[ae+"targetShape"];return _e&&!_e.getStage()&&(_e=null),_e}_pointerleave(ae){const _e=ue(ae.type),Ke=ne(ae.type);if(!_e)return;this.setPointersPositions(ae);const Ge=this._getTargetShape(Ke),st=!(a.Konva.isDragging()||a.Konva.isTransforming())||a.Konva.hitOnDragEnabled;Ge&&st?(Ge._fireAndBubble(_e.pointerout,{evt:ae}),Ge._fireAndBubble(_e.pointerleave,{evt:ae}),this._fire(_e.pointerleave,{evt:ae,target:this,currentTarget:this}),this[Ke+"targetShape"]=null):st&&(this._fire(_e.pointerleave,{evt:ae,target:this,currentTarget:this}),this._fire(_e.pointerout,{evt:ae,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(ae){const _e=ue(ae.type),Ke=ne(ae.type);if(!_e)return;this.setPointersPositions(ae);let Ge=!1;this._changedPointerPositions.forEach(st=>{const ft=this.getIntersection(st);if(r.DD.justDragged=!1,a.Konva["_"+Ke+"ListenClick"]=!0,!ft||!ft.isListening()){this[Ke+"ClickStartShape"]=void 0;return}a.Konva.capturePointerEventsEnabled&&ft.setPointerCapture(st.id),this[Ke+"ClickStartShape"]=ft,ft._fireAndBubble(_e.pointerdown,{evt:ae,pointerId:st.id}),Ge=!0;const Pe=ae.type.indexOf("touch")>=0;ft.preventDefault()&&ae.cancelable&&Pe&&ae.preventDefault()}),Ge||this._fire(_e.pointerdown,{evt:ae,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(ae){const _e=ue(ae.type),Ke=ne(ae.type);if(!_e||(a.Konva.isDragging()&&r.DD.node.preventDefault()&&ae.cancelable&&ae.preventDefault(),this.setPointersPositions(ae),!(!(a.Konva.isDragging()||a.Konva.isTransforming())||a.Konva.hitOnDragEnabled)))return;const st={};let ft=!1;const Pe=this._getTargetShape(Ke);this._changedPointerPositions.forEach(he=>{const ke=d.getCapturedShape(he.id)||this.getIntersection(he),Ee=he.id,Le={evt:ae,pointerId:Ee},Ie=Pe!==ke;if(Ie&&Pe&&(Pe._fireAndBubble(_e.pointerout,{...Le},ke),Pe._fireAndBubble(_e.pointerleave,{...Le},ke)),ke){if(st[ke._id])return;st[ke._id]=!0}ke&&ke.isListening()?(ft=!0,Ie&&(ke._fireAndBubble(_e.pointerover,{...Le},Pe),ke._fireAndBubble(_e.pointerenter,{...Le},Pe),this[Ke+"targetShape"]=ke),ke._fireAndBubble(_e.pointermove,{...Le})):Pe&&(this._fire(_e.pointerover,{evt:ae,target:this,currentTarget:this,pointerId:Ee}),this[Ke+"targetShape"]=null)}),ft||this._fire(_e.pointermove,{evt:ae,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(ae){const _e=ue(ae.type),Ke=ne(ae.type);if(!_e)return;this.setPointersPositions(ae);const Ge=this[Ke+"ClickStartShape"],st=this[Ke+"ClickEndShape"],ft={};let Pe=!1;this._changedPointerPositions.forEach(he=>{const ke=d.getCapturedShape(he.id)||this.getIntersection(he);if(ke){if(ke.releaseCapture(he.id),ft[ke._id])return;ft[ke._id]=!0}const Ee=he.id,Le={evt:ae,pointerId:Ee};let Ie=!1;a.Konva["_"+Ke+"InDblClickWindow"]?(Ie=!0,clearTimeout(this[Ke+"DblTimeout"])):r.DD.justDragged||(a.Konva["_"+Ke+"InDblClickWindow"]=!0,clearTimeout(this[Ke+"DblTimeout"])),this[Ke+"DblTimeout"]=setTimeout(function(){a.Konva["_"+Ke+"InDblClickWindow"]=!1},a.Konva.dblClickWindow),ke&&ke.isListening()?(Pe=!0,this[Ke+"ClickEndShape"]=ke,ke._fireAndBubble(_e.pointerup,{...Le}),a.Konva["_"+Ke+"ListenClick"]&&Ge&&Ge===ke&&(ke._fireAndBubble(_e.pointerclick,{...Le}),Ie&&st&&st===ke&&ke._fireAndBubble(_e.pointerdblclick,{...Le}))):(this[Ke+"ClickEndShape"]=null,a.Konva["_"+Ke+"ListenClick"]&&this._fire(_e.pointerclick,{evt:ae,target:this,currentTarget:this,pointerId:Ee}),Ie&&this._fire(_e.pointerdblclick,{evt:ae,target:this,currentTarget:this,pointerId:Ee}))}),Pe||this._fire(_e.pointerup,{evt:ae,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva["_"+Ke+"ListenClick"]=!1,ae.cancelable&&Ke!=="touch"&&Ke!=="pointer"&&ae.preventDefault()}_contextmenu(ae){this.setPointersPositions(ae);const _e=this.getIntersection(this.getPointerPosition());_e&&_e.isListening()?_e._fireAndBubble(Q,{evt:ae}):this._fire(Q,{evt:ae,target:this,currentTarget:this})}_wheel(ae){this.setPointersPositions(ae);const _e=this.getIntersection(this.getPointerPosition());_e&&_e.isListening()?_e._fireAndBubble(X,{evt:ae}):this._fire(X,{evt:ae,target:this,currentTarget:this})}_pointercancel(ae){this.setPointersPositions(ae);const _e=d.getCapturedShape(ae.pointerId)||this.getIntersection(this.getPointerPosition());_e&&_e._fireAndBubble(P,d.createEvent(ae)),d.releaseCapture(ae.pointerId)}_lostpointercapture(ae){d.releaseCapture(ae.pointerId)}setPointersPositions(ae){const _e=this._getContentPosition();let Ke=null,Ge=null;ae=ae||window.event,ae.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(ae.touches,st=>{this._pointerPositions.push({id:st.identifier,x:(st.clientX-_e.left)/_e.scaleX,y:(st.clientY-_e.top)/_e.scaleY})}),Array.prototype.forEach.call(ae.changedTouches||ae.touches,st=>{this._changedPointerPositions.push({id:st.identifier,x:(st.clientX-_e.left)/_e.scaleX,y:(st.clientY-_e.top)/_e.scaleY})})):(Ke=(ae.clientX-_e.left)/_e.scaleX,Ge=(ae.clientY-_e.top)/_e.scaleY,this.pointerPos={x:Ke,y:Ge},this._pointerPositions=[{x:Ke,y:Ge,id:e.Util._getFirstPointerId(ae)}],this._changedPointerPositions=[{x:Ke,y:Ge,id:e.Util._getFirstPointerId(ae)}])}_setPointerPosition(ae){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(ae)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const ae=this.content.getBoundingClientRect();return{top:ae.top,left:ae.left,scaleX:ae.width/this.content.clientWidth||1,scaleY:ae.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!a.Konva.isBrowser)return;const ae=this.container();if(!ae)throw"Stage has no container. A container is required.";ae.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),ae.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(ae){ae.batchDraw()}),this}}n.Stage=Me,Me.prototype.nodeType=f,(0,l._registerNode)(Me),t.Factory.addGetterSetter(Me,"container"),a.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{n.stages.forEach(ye=>{ye.batchDraw()})})}(nw)),nw}var yy={},iw={},HN;function eo(){return HN||(HN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Shape=n.shapes=void 0;const e=Si(),t=Ps(),i=ji(),a=qs(),s=zi(),r=Si(),l=x8(),d="hasShadow",f="shadowRGBA",g="patternImage",x="linearGradient",b="radialGradient";let _;function S(){return _||(_=t.Util.createCanvasElement().getContext("2d"),_)}n.shapes={};function w(O){const I=this.attrs.fillRule;I?O.fill(I):O.fill()}function M(O){O.stroke()}function E(O){const I=this.attrs.fillRule;I?O.fill(I):O.fill()}function T(O){O.stroke()}function C(){this._clearCache(d)}function D(){this._clearCache(f)}function P(){this._clearCache(g)}function B(){this._clearCache(x)}function F(){this._clearCache(b)}class j extends a.Node{constructor(I){super(I);let W;for(;W=t.Util.getRandomColor(),!(W&&!(W in n.shapes)););this.colorKey=W,n.shapes[W]=this}getContext(){return t.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return t.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(d,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(g,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const W=S().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(W&&W.setTransform){const Q=new t.Transform;Q.translate(this.fillPatternX(),this.fillPatternY()),Q.rotate(e.Konva.getAngle(this.fillPatternRotation())),Q.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),Q.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const J=Q.getMatrix(),te=typeof DOMMatrix>"u"?{a:J[0],b:J[1],c:J[2],d:J[3],e:J[4],f:J[5]}:new DOMMatrix(J);W.setTransform(te)}return W}}_getLinearGradient(){return this._getCache(x,this.__getLinearGradient)}__getLinearGradient(){const I=this.fillLinearGradientColorStops();if(I){const W=S(),Q=this.fillLinearGradientStartPoint(),J=this.fillLinearGradientEndPoint(),te=W.createLinearGradient(Q.x,Q.y,J.x,J.y);for(let oe=0;oe<I.length;oe+=2)te.addColorStop(I[oe],I[oe+1]);return te}}_getRadialGradient(){return this._getCache(b,this.__getRadialGradient)}__getRadialGradient(){const I=this.fillRadialGradientColorStops();if(I){const W=S(),Q=this.fillRadialGradientStartPoint(),J=this.fillRadialGradientEndPoint(),te=W.createRadialGradient(Q.x,Q.y,this.fillRadialGradientStartRadius(),J.x,J.y,this.fillRadialGradientEndRadius());for(let oe=0;oe<I.length;oe+=2)te.addColorStop(I[oe],I[oe+1]);return te}}getShadowRGBA(){return this._getCache(f,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const I=t.Util.colorToRGBA(this.shadowColor());if(I)return"rgba("+I.r+","+I.g+","+I.b+","+I.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const I=this.hitStrokeWidth();return I==="auto"?this.hasStroke():this.strokeEnabled()&&!!I}intersects(I){const W=this.getStage();if(!W)return!1;const Q=W.bufferHitCanvas;return Q.getContext().clear(),this.drawHit(Q,void 0,!0),Q.context.getImageData(Math.round(I.x),Math.round(I.y),1,1).data[3]>0}destroy(){return a.Node.prototype.destroy.call(this),delete n.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(I){var W;if(!((W=this.attrs.perfectDrawEnabled)!==null&&W!==void 0?W:!0))return!1;const J=I||this.hasFill(),te=this.hasStroke(),oe=this.getAbsoluteOpacity()!==1;if(J&&te&&oe)return!0;const $=this.hasShadow(),X=this.shadowForStrokeEnabled();return!!(J&&te&&$&&X)}setStrokeHitEnabled(I){t.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),I?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const I=this.size();return{x:this._centroid?-I.width/2:0,y:this._centroid?-I.height/2:0,width:I.width,height:I.height}}getClientRect(I={}){let W=!1,Q=this.getParent();for(;Q;){if(Q.isCached()){W=!0;break}Q=Q.getParent()}const J=I.skipTransform,te=I.relativeTo||W&&this.getStage()||void 0,oe=this.getSelfRect(),X=!I.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,G=oe.width+X,ee=oe.height+X,Y=!I.skipShadow&&this.hasShadow(),ne=Y?this.shadowOffsetX():0,ue=Y?this.shadowOffsetY():0,de=G+Math.abs(ne),ie=ee+Math.abs(ue),Me=Y&&this.shadowBlur()||0,ye=de+Me*2,ae=ie+Me*2,_e={width:ye,height:ae,x:-(X/2+Me)+Math.min(ne,0)+oe.x,y:-(X/2+Me)+Math.min(ue,0)+oe.y};return J?_e:this._transformedRect(_e,te)}drawScene(I,W,Q){const J=this.getLayer(),te=I||J.getCanvas(),oe=te.getContext(),$=this._getCanvasCache(),X=this.getSceneFunc(),G=this.hasShadow();let ee;const Y=W===this;if(!this.isVisible()&&!Y)return this;if($){oe.save();const ne=this.getAbsoluteTransform(W).getMatrix();return oe.transform(ne[0],ne[1],ne[2],ne[3],ne[4],ne[5]),this._drawCachedSceneCanvas(oe),oe.restore(),this}if(!X)return this;if(oe.save(),this._useBufferCanvas()){ee=this.getStage();const ne=Q||ee.bufferCanvas,ue=ne.getContext();ue.clear(),ue.save(),ue._applyLineJoin(this);const de=this.getAbsoluteTransform(W).getMatrix();ue.transform(de[0],de[1],de[2],de[3],de[4],de[5]),X.call(this,ue,this),ue.restore();const ie=ne.pixelRatio;G&&oe._applyShadow(this),oe._applyOpacity(this),oe._applyGlobalCompositeOperation(this),oe.drawImage(ne._canvas,ne.x||0,ne.y||0,ne.width/ie,ne.height/ie)}else{if(oe._applyLineJoin(this),!Y){const ne=this.getAbsoluteTransform(W).getMatrix();oe.transform(ne[0],ne[1],ne[2],ne[3],ne[4],ne[5]),oe._applyOpacity(this),oe._applyGlobalCompositeOperation(this)}G&&oe._applyShadow(this),X.call(this,oe,this)}return oe.restore(),this}drawHit(I,W,Q=!1){if(!this.shouldDrawHit(W,Q))return this;const J=this.getLayer(),te=I||J.hitCanvas,oe=te&&te.getContext(),$=this.hitFunc()||this.sceneFunc(),X=this._getCanvasCache(),G=X&&X.hit;if(this.colorKey||t.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),G){oe.save();const Y=this.getAbsoluteTransform(W).getMatrix();return oe.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),this._drawCachedHitCanvas(oe),oe.restore(),this}if(!$)return this;if(oe.save(),oe._applyLineJoin(this),!(this===W)){const Y=this.getAbsoluteTransform(W).getMatrix();oe.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5])}return $.call(this,oe,this),oe.restore(),this}drawHitFromCache(I=0){const W=this._getCanvasCache(),Q=this._getCachedSceneCanvas(),J=W.hit,te=J.getContext(),oe=J.getWidth(),$=J.getHeight();te.clear(),te.drawImage(Q._canvas,0,0,oe,$);try{const X=te.getImageData(0,0,oe,$),G=X.data,ee=G.length,Y=t.Util._hexToRgb(this.colorKey);for(let ne=0;ne<ee;ne+=4)G[ne+3]>I?(G[ne]=Y.r,G[ne+1]=Y.g,G[ne+2]=Y.b,G[ne+3]=255):G[ne+3]=0;te.putImageData(X,0,0)}catch(X){t.Util.error("Unable to draw hit graph from cached scene canvas. "+X.message)}return this}hasPointerCapture(I){return l.hasPointerCapture(I,this)}setPointerCapture(I){l.setPointerCapture(I,this)}releaseCapture(I){l.releaseCapture(I,this)}}n.Shape=j,j.prototype._fillFunc=w,j.prototype._strokeFunc=M,j.prototype._fillFuncHit=E,j.prototype._strokeFuncHit=T,j.prototype._centroid=!1,j.prototype.nodeType="Shape",(0,r._registerNode)(j),j.prototype.eventListeners={},j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",C),j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",D),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",P),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",B),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",F),i.Factory.addGetterSetter(j,"stroke",void 0,(0,s.getStringOrGradientValidator)()),i.Factory.addGetterSetter(j,"strokeWidth",2,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(j,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(j,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(j,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),i.Factory.addGetterSetter(j,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),i.Factory.addGetterSetter(j,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),i.Factory.addGetterSetter(j,"lineJoin"),i.Factory.addGetterSetter(j,"lineCap"),i.Factory.addGetterSetter(j,"sceneFunc"),i.Factory.addGetterSetter(j,"hitFunc"),i.Factory.addGetterSetter(j,"dash"),i.Factory.addGetterSetter(j,"dashOffset",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(j,"shadowColor",void 0,(0,s.getStringValidator)()),i.Factory.addGetterSetter(j,"shadowBlur",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(j,"shadowOpacity",1,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(j,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(j,"shadowOffsetX",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(j,"shadowOffsetY",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(j,"fillPatternImage"),i.Factory.addGetterSetter(j,"fill",void 0,(0,s.getStringOrGradientValidator)()),i.Factory.addGetterSetter(j,"fillPatternX",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(j,"fillPatternY",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(j,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(j,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(j,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(j,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(j,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(j,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(j,"fillEnabled",!0),i.Factory.addGetterSetter(j,"strokeEnabled",!0),i.Factory.addGetterSetter(j,"shadowEnabled",!0),i.Factory.addGetterSetter(j,"dashEnabled",!0),i.Factory.addGetterSetter(j,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(j,"fillPriority","color"),i.Factory.addComponentsGetterSetter(j,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(j,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(j,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(j,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(j,"fillPatternScaleX",1,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(j,"fillPatternScaleY",1,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(j,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(j,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(j,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(j,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(j,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(j,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(j,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(j,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(j,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(j,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(j,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(j,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(j,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(j,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(j,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(j,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(j,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(j,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(j,"fillPatternRotation",0),i.Factory.addGetterSetter(j,"fillRule",void 0,(0,s.getStringValidator)()),i.Factory.backCompat(j,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(iw)),iw}var GN;function b8(){if(GN)return yy;GN=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.Layer=void 0;const n=Ps(),e=$S(),t=qs(),i=ji(),a=JS(),s=zi(),r=eo(),l=Si(),d="#",f="beforeDraw",g="draw",x=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],b=x.length;class _ extends e.Container{constructor(w){super(w),this.canvas=new a.SceneCanvas,this.hitCanvas=new a.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(w){return this.getContext().clear(w),this.getHitCanvas().getContext().clear(w),this}setZIndex(w){super.setZIndex(w);const M=this.getStage();return M&&M.content&&(M.content.removeChild(this.getNativeCanvasElement()),w<M.children.length-1?M.content.insertBefore(this.getNativeCanvasElement(),M.children[w+1].getCanvas()._canvas):M.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){t.Node.prototype.moveToTop.call(this);const w=this.getStage();return w&&w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!t.Node.prototype.moveUp.call(this))return!1;const M=this.getStage();return!M||!M.content?!1:(M.content.removeChild(this.getNativeCanvasElement()),this.index<M.children.length-1?M.content.insertBefore(this.getNativeCanvasElement(),M.children[this.index+1].getCanvas()._canvas):M.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(t.Node.prototype.moveDown.call(this)){const w=this.getStage();if(w){const M=w.children;w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.insertBefore(this.getNativeCanvasElement(),M[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(t.Node.prototype.moveToBottom.call(this)){const w=this.getStage();if(w){const M=w.children;w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.insertBefore(this.getNativeCanvasElement(),M[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const w=this.getNativeCanvasElement();return t.Node.prototype.remove.call(this),w&&w.parentNode&&n.Util._isInDocument(w)&&w.parentNode.removeChild(w),this}getStage(){return this.parent}setSize({width:w,height:M}){return this.canvas.setSize(w,M),this.hitCanvas.setSize(w,M),this._setSmoothEnabled(),this}_validateAdd(w){const M=w.getType();M!=="Group"&&M!=="Shape"&&n.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(w){return w=w||{},w.width=w.width||this.getWidth(),w.height=w.height||this.getHeight(),w.x=w.x!==void 0?w.x:this.x(),w.y=w.y!==void 0?w.y:this.y(),t.Node.prototype._toKonvaCanvas.call(this,w)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){n.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){n.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,n.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(w){if(!this.isListening()||!this.isVisible())return null;let M=1,E=!1;for(;;){for(let T=0;T<b;T++){const C=x[T],D=this._getIntersection({x:w.x+C.x*M,y:w.y+C.y*M}),P=D.shape;if(P)return P;if(E=!!D.antialiased,!D.antialiased)break}if(E)M+=1;else return null}}_getIntersection(w){const M=this.hitCanvas.pixelRatio,E=this.hitCanvas.context.getImageData(Math.round(w.x*M),Math.round(w.y*M),1,1).data,T=E[3];if(T===255){const C=n.Util._rgbToHex(E[0],E[1],E[2]),D=r.shapes[d+C];return D?{shape:D}:{antialiased:!0}}else if(T>0)return{antialiased:!0};return{}}drawScene(w,M,E){const T=this.getLayer(),C=w||T&&T.getCanvas();return this._fire(f,{node:this}),this.clearBeforeDraw()&&C.getContext().clear(),e.Container.prototype.drawScene.call(this,C,M,E),this._fire(g,{node:this}),this}drawHit(w,M){const E=this.getLayer(),T=w||E&&E.hitCanvas;return E&&E.clearBeforeDraw()&&E.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,T,M),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(w){n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(w)}getHitGraphEnabled(w){return n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const w=this.parent;!!this.hitCanvas._canvas.parentNode?w.content.removeChild(this.hitCanvas._canvas):w.content.appendChild(this.hitCanvas._canvas)}destroy(){return n.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return yy.Layer=_,_.prototype.nodeType="Layer",(0,l._registerNode)(_),i.Factory.addGetterSetter(_,"imageSmoothingEnabled",!0),i.Factory.addGetterSetter(_,"clearBeforeDraw",!0),i.Factory.addGetterSetter(_,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),yy}var xy={},VN;function xB(){if(VN)return xy;VN=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.FastLayer=void 0;const n=Ps(),e=b8(),t=Si();let i=class extends e.Layer{constructor(s){super(s),this.listening(!1),n.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return xy.FastLayer=i,i.prototype.nodeType="FastLayer",(0,t._registerNode)(i),xy}var by={},qN;function m3(){if(qN)return by;qN=1,Object.defineProperty(by,"__esModule",{value:!0}),by.Group=void 0;const n=Ps(),e=$S(),t=Si();class i extends e.Container{_validateAdd(s){const r=s.getType();r!=="Group"&&r!=="Shape"&&n.Util.throw("You may only add groups and shapes to groups.")}}return by.Group=i,i.prototype.nodeType="Group",(0,t._registerNode)(i),by}var _y={},XN;function g3(){if(XN)return _y;XN=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.Animation=void 0;const n=Si(),e=Ps(),t=function(){return n.glob.performance&&n.glob.performance.now?function(){return n.glob.performance.now()}:function(){return new Date().getTime()}}();let i=class tv{constructor(s,r){this.id=tv.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:t(),frameRate:0},this.func=s,this.setLayers(r)}setLayers(s){let r=[];return s&&(r=Array.isArray(s)?s:[s]),this.layers=r,this}getLayers(){return this.layers}addLayer(s){const r=this.layers,l=r.length;for(let d=0;d<l;d++)if(r[d]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const r=tv.animations,l=r.length;for(let d=0;d<l;d++)if(r[d].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=t(),tv._addAnimation(this),this}stop(){return tv._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const r=s.id,l=this.animations,d=l.length;for(let f=0;f<d;f++)if(l[f].id===r){this.animations.splice(f,1);break}}static _runFrames(){const s={},r=this.animations;for(let l=0;l<r.length;l++){const d=r[l],f=d.layers,g=d.func;d._updateFrameObject(t());const x=f.length;let b;if(g?b=g.call(d,d.frame)!==!1:b=!0,!!b)for(let _=0;_<x;_++){const S=f[_];S._id!==void 0&&(s[S._id]=S)}}for(const l in s)s.hasOwnProperty(l)&&s[l].batchDraw()}static _animationLoop(){const s=tv;s.animations.length?(s._runFrames(),e.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return _y.Animation=i,i.animations=[],i.animIdCounter=0,i.animRunning=!1,_y}var aw={},YN;function bB(){return YN||(YN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Easings=n.Tween=void 0;const e=Ps(),t=g3(),i=qs(),a=Si(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},r=1,l=2,d=3,f=["fill","stroke","shadowColor"];let g=0;class x{constructor(S,w,M,E,T,C,D){this.prop=S,this.propFunc=w,this.begin=E,this._pos=E,this.duration=C,this._change=0,this.prevPos=0,this.yoyo=D,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=M,this._change=T-this.begin,this.pause()}fire(S){const w=this[S];w&&w()}setTime(S){S>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():S<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=S,this.update())}getTime(){return this._time}setPosition(S){this.prevPos=this._pos,this.propFunc(S),this._pos=S}getPosition(S){return S===void 0&&(S=this._time),this.func(S,this.begin,this._change,this.duration)}play(){this.state=l,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=d,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(S){this.pause(),this._time=S,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const S=this.getTimer()-this._startTime;this.state===l?this.setTime(S):this.state===d&&this.setTime(this.duration-S)}pause(){this.state=r,this.fire("onPause")}getTimer(){return new Date().getTime()}}class b{constructor(S){const w=this,M=S.node,E=M._id,T=S.easing||n.Easings.Linear,C=!!S.yoyo;let D,P;typeof S.duration>"u"?D=.3:S.duration===0?D=.001:D=S.duration,this.node=M,this._id=g++;const B=M.getLayer()||(M instanceof a.Konva.Stage?M.getLayers():null);B||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new t.Animation(function(){w.tween.onEnterFrame()},B),this.tween=new x(P,function(F){w._tweenFunc(F)},T,0,1,D*1e3,C),this._addListeners(),b.attrs[E]||(b.attrs[E]={}),b.attrs[E][this._id]||(b.attrs[E][this._id]={}),b.tweens[E]||(b.tweens[E]={});for(P in S)s[P]===void 0&&this._addAttr(P,S[P]);this.reset(),this.onFinish=S.onFinish,this.onReset=S.onReset,this.onUpdate=S.onUpdate}_addAttr(S,w){const M=this.node,E=M._id;let T,C,D,P,B;const F=b.tweens[E][S];F&&delete b.attrs[E][F][S];let j=M.getAttr(S);if(e.Util._isArray(w))if(T=[],C=Math.max(w.length,j.length),S==="points"&&w.length!==j.length&&(w.length>j.length?(P=j,j=e.Util._prepareArrayForTween(j,w,M.closed())):(D=w,w=e.Util._prepareArrayForTween(w,j,M.closed()))),S.indexOf("fill")===0)for(let O=0;O<C;O++)if(O%2===0)T.push(w[O]-j[O]);else{const I=e.Util.colorToRGBA(j[O]);B=e.Util.colorToRGBA(w[O]),j[O]=I,T.push({r:B.r-I.r,g:B.g-I.g,b:B.b-I.b,a:B.a-I.a})}else for(let O=0;O<C;O++)T.push(w[O]-j[O]);else f.indexOf(S)!==-1?(j=e.Util.colorToRGBA(j),B=e.Util.colorToRGBA(w),T={r:B.r-j.r,g:B.g-j.g,b:B.b-j.b,a:B.a-j.a}):T=w-j;b.attrs[E][this._id][S]={start:j,diff:T,end:w,trueEnd:D,trueStart:P},b.tweens[E][S]=this._id}_tweenFunc(S){const w=this.node,M=b.attrs[w._id][this._id];let E,T,C,D,P,B,F,j;for(E in M){if(T=M[E],C=T.start,D=T.diff,j=T.end,e.Util._isArray(C))if(P=[],F=Math.max(C.length,j.length),E.indexOf("fill")===0)for(B=0;B<F;B++)B%2===0?P.push((C[B]||0)+D[B]*S):P.push("rgba("+Math.round(C[B].r+D[B].r*S)+","+Math.round(C[B].g+D[B].g*S)+","+Math.round(C[B].b+D[B].b*S)+","+(C[B].a+D[B].a*S)+")");else for(B=0;B<F;B++)P.push((C[B]||0)+D[B]*S);else f.indexOf(E)!==-1?P="rgba("+Math.round(C.r+D.r*S)+","+Math.round(C.g+D.g*S)+","+Math.round(C.b+D.b*S)+","+(C.a+D.a*S)+")":P=C+D*S;w.setAttr(E,P)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const S=this.node,w=b.attrs[S._id][this._id];w.points&&w.points.trueEnd&&S.setAttr("points",w.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const S=this.node,w=b.attrs[S._id][this._id];w.points&&w.points.trueStart&&S.points(w.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(S){return this.tween.seek(S*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const S=this.node._id,w=this._id,M=b.tweens[S];this.pause(),this.anim&&this.anim.stop();for(const E in M)delete b.tweens[S][E];delete b.attrs[S][w],b.tweens[S]&&(Object.keys(b.tweens[S]).length===0&&delete b.tweens[S],Object.keys(b.attrs[S]).length===0&&delete b.attrs[S])}}n.Tween=b,b.attrs={},b.tweens={},i.Node.prototype.to=function(_){const S=_.onFinish;_.node=this,_.onFinish=function(){this.destroy(),S&&S()},new b(_).play()},n.Easings={BackEaseIn(_,S,w,M){return w*(_/=M)*_*((1.70158+1)*_-1.70158)+S},BackEaseOut(_,S,w,M){return w*((_=_/M-1)*_*((1.70158+1)*_+1.70158)+1)+S},BackEaseInOut(_,S,w,M){let E=1.70158;return(_/=M/2)<1?w/2*(_*_*(((E*=1.525)+1)*_-E))+S:w/2*((_-=2)*_*(((E*=1.525)+1)*_+E)+2)+S},ElasticEaseIn(_,S,w,M,E,T){let C=0;return _===0?S:(_/=M)===1?S+w:(T||(T=M*.3),!E||E<Math.abs(w)?(E=w,C=T/4):C=T/(2*Math.PI)*Math.asin(w/E),-(E*Math.pow(2,10*(_-=1))*Math.sin((_*M-C)*(2*Math.PI)/T))+S)},ElasticEaseOut(_,S,w,M,E,T){let C=0;return _===0?S:(_/=M)===1?S+w:(T||(T=M*.3),!E||E<Math.abs(w)?(E=w,C=T/4):C=T/(2*Math.PI)*Math.asin(w/E),E*Math.pow(2,-10*_)*Math.sin((_*M-C)*(2*Math.PI)/T)+w+S)},ElasticEaseInOut(_,S,w,M,E,T){let C=0;return _===0?S:(_/=M/2)===2?S+w:(T||(T=M*(.3*1.5)),!E||E<Math.abs(w)?(E=w,C=T/4):C=T/(2*Math.PI)*Math.asin(w/E),_<1?-.5*(E*Math.pow(2,10*(_-=1))*Math.sin((_*M-C)*(2*Math.PI)/T))+S:E*Math.pow(2,-10*(_-=1))*Math.sin((_*M-C)*(2*Math.PI)/T)*.5+w+S)},BounceEaseOut(_,S,w,M){return(_/=M)<1/2.75?w*(7.5625*_*_)+S:_<2/2.75?w*(7.5625*(_-=1.5/2.75)*_+.75)+S:_<2.5/2.75?w*(7.5625*(_-=2.25/2.75)*_+.9375)+S:w*(7.5625*(_-=2.625/2.75)*_+.984375)+S},BounceEaseIn(_,S,w,M){return w-n.Easings.BounceEaseOut(M-_,0,w,M)+S},BounceEaseInOut(_,S,w,M){return _<M/2?n.Easings.BounceEaseIn(_*2,0,w,M)*.5+S:n.Easings.BounceEaseOut(_*2-M,0,w,M)*.5+w*.5+S},EaseIn(_,S,w,M){return w*(_/=M)*_+S},EaseOut(_,S,w,M){return-w*(_/=M)*(_-2)+S},EaseInOut(_,S,w,M){return(_/=M/2)<1?w/2*_*_+S:-w/2*(--_*(_-2)-1)+S},StrongEaseIn(_,S,w,M){return w*(_/=M)*_*_*_*_+S},StrongEaseOut(_,S,w,M){return w*((_=_/M-1)*_*_*_*_+1)+S},StrongEaseInOut(_,S,w,M){return(_/=M/2)<1?w/2*_*_*_*_*_+S:w/2*((_-=2)*_*_*_*_+2)+S},Linear(_,S,w,M){return w*_/M+S}}}(aw)),aw}var WN;function iT(){return WN||(WN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Konva=void 0;const e=Si(),t=Ps(),i=qs(),a=$S(),s=yB(),r=b8(),l=xB(),d=m3(),f=p3(),g=eo(),x=g3(),b=bB(),_=y8(),S=JS();n.Konva=t.Util._assign(e.Konva,{Util:t.Util,Transform:t.Transform,Node:i.Node,Container:a.Container,Stage:s.Stage,stages:s.stages,Layer:r.Layer,FastLayer:l.FastLayer,Group:d.Group,DD:f.DD,Shape:g.Shape,shapes:g.shapes,Animation:x.Animation,Tween:b.Tween,Easings:b.Easings,Context:_.Context,Canvas:S.Canvas}),n.default=n.Konva}(QE)),QE}var Sy={},KN;function _B(){if(KN)return Sy;KN=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.Arc=void 0;const n=ji(),e=eo(),t=Si(),i=zi(),a=Si();let s=class extends e.Shape{_sceneFunc(l){const d=t.Konva.getAngle(this.angle()),f=this.clockwise();l.beginPath(),l.arc(0,0,this.outerRadius(),0,d,f),l.arc(0,0,this.innerRadius(),d,0,!f),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}getSelfRect(){const l=this.innerRadius(),d=this.outerRadius(),f=this.clockwise(),g=t.Konva.getAngle(f?360-this.angle():this.angle()),x=Math.cos(Math.min(g,Math.PI)),b=1,_=Math.sin(Math.min(Math.max(Math.PI,g),3*Math.PI/2)),S=Math.sin(Math.min(g,Math.PI/2)),w=x*(x>0?l:d),M=b*d,E=_*(_>0?l:d),T=S*(S>0?d:l);return{x:w,y:f?-1*T:E,width:M-w,height:T-E}}};return Sy.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,a._registerNode)(s),n.Factory.addGetterSetter(s,"innerRadius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"outerRadius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"angle",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"clockwise",!1,(0,i.getBooleanValidator)()),Sy}var Ey={},wy={},ZN;function _8(){if(ZN)return wy;ZN=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.Line=void 0;const n=ji(),e=Si(),t=eo(),i=zi();function a(l,d,f,g,x,b,_){const S=Math.sqrt(Math.pow(f-l,2)+Math.pow(g-d,2)),w=Math.sqrt(Math.pow(x-f,2)+Math.pow(b-g,2)),M=_*S/(S+w),E=_*w/(S+w),T=f-M*(x-l),C=g-M*(b-d),D=f+E*(x-l),P=g+E*(b-d);return[T,C,D,P]}function s(l,d){const f=l.length,g=[];for(let x=2;x<f-2;x+=2){const b=a(l[x-2],l[x-1],l[x],l[x+1],l[x+2],l[x+3],d);isNaN(b[0])||(g.push(b[0]),g.push(b[1]),g.push(l[x]),g.push(l[x+1]),g.push(b[2]),g.push(b[3]))}return g}class r extends t.Shape{constructor(d){super(d),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(d){const f=this.points(),g=f.length,x=this.tension(),b=this.closed(),_=this.bezier();if(!g)return;let S=0;if(d.beginPath(),d.moveTo(f[0],f[1]),x!==0&&g>4){const w=this.getTensionPoints(),M=w.length;for(S=b?0:4,b||d.quadraticCurveTo(w[0],w[1],w[2],w[3]);S<M-2;)d.bezierCurveTo(w[S++],w[S++],w[S++],w[S++],w[S++],w[S++]);b||d.quadraticCurveTo(w[M-2],w[M-1],f[g-2],f[g-1])}else if(_)for(S=2;S<g;)d.bezierCurveTo(f[S++],f[S++],f[S++],f[S++],f[S++],f[S++]);else for(S=2;S<g;S+=2)d.lineTo(f[S],f[S+1]);b?(d.closePath(),d.fillStrokeShape(this)):d.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const d=this.points(),f=d.length,g=this.tension(),x=a(d[f-2],d[f-1],d[0],d[1],d[2],d[3],g),b=a(d[f-4],d[f-3],d[f-2],d[f-1],d[0],d[1],g),_=s(d,g);return[x[2],x[3]].concat(_).concat([b[0],b[1],d[f-2],d[f-1],b[2],b[3],x[0],x[1],d[0],d[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let d=this.points();if(d.length<4)return{x:d[0]||0,y:d[1]||0,width:0,height:0};this.tension()!==0?d=[d[0],d[1],...this._getTensionPoints(),d[d.length-2],d[d.length-1]]:d=this.points();let f=d[0],g=d[0],x=d[1],b=d[1],_,S;for(let w=0;w<d.length/2;w++)_=d[w*2],S=d[w*2+1],f=Math.min(f,_),g=Math.max(g,_),x=Math.min(x,S),b=Math.max(b,S);return{x:f,y:x,width:g-f,height:b-x}}}return wy.Line=r,r.prototype.className="Line",r.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(r),n.Factory.addGetterSetter(r,"closed",!1),n.Factory.addGetterSetter(r,"bezier",!1),n.Factory.addGetterSetter(r,"tension",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(r,"points",[],(0,i.getNumberArrayValidator)()),wy}var My={},sw={},QN;function SB(){return QN||(QN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.t2length=n.getQuadraticArcLength=n.getCubicArcLength=n.binomialCoefficients=n.cValues=n.tValues=void 0,n.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],n.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],n.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(r,l,d)=>{let f,g;const b=d/2;f=0;for(let _=0;_<20;_++)g=b*n.tValues[20][_]+b,f+=n.cValues[20][_]*i(r,l,g);return b*f};n.getCubicArcLength=e;const t=(r,l,d)=>{d===void 0&&(d=1);const f=r[0]-2*r[1]+r[2],g=l[0]-2*l[1]+l[2],x=2*r[1]-2*r[0],b=2*l[1]-2*l[0],_=4*(f*f+g*g),S=4*(f*x+g*b),w=x*x+b*b;if(_===0)return d*Math.sqrt(Math.pow(r[2]-r[0],2)+Math.pow(l[2]-l[0],2));const M=S/(2*_),E=w/_,T=d+M,C=E-M*M,D=T*T+C>0?Math.sqrt(T*T+C):0,P=M*M+C>0?Math.sqrt(M*M+C):0,B=M+Math.sqrt(M*M+C)!==0?C*Math.log(Math.abs((T+D)/(M+P))):0;return Math.sqrt(_)/2*(T*D-M*P+B)};n.getQuadraticArcLength=t;function i(r,l,d){const f=a(1,d,r),g=a(1,d,l),x=f*f+g*g;return Math.sqrt(x)}const a=(r,l,d)=>{const f=d.length-1;let g,x;if(f===0)return 0;if(r===0){x=0;for(let b=0;b<=f;b++)x+=n.binomialCoefficients[f][b]*Math.pow(1-l,f-b)*Math.pow(l,b)*d[b];return x}else{g=new Array(f);for(let b=0;b<f;b++)g[b]=f*(d[b+1]-d[b]);return a(r-1,l,g)}},s=(r,l,d)=>{let f=1,g=r/l,x=(r-d(g))/l,b=0;for(;f>.001;){const _=d(g+x),S=Math.abs(r-_)/l;if(S<f)f=S,g+=x;else{const w=d(g-x),M=Math.abs(r-w)/l;M<f?(f=M,g-=x):x/=2}if(b++,b>500)break}return g};n.t2length=s}(sw)),sw}var JN;function v3(){if(JN)return My;JN=1,Object.defineProperty(My,"__esModule",{value:!0}),My.Path=void 0;const n=ji(),e=Si(),t=eo(),i=SB();class a extends t.Shape{constructor(r){super(r),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=a.parsePathData(this.data()),this.pathLength=a.getPathLength(this.dataArray)}_sceneFunc(r){const l=this.dataArray;r.beginPath();let d=!1;for(let f=0;f<l.length;f++){const g=l[f].command,x=l[f].points;switch(g){case"L":r.lineTo(x[0],x[1]);break;case"M":r.moveTo(x[0],x[1]);break;case"C":r.bezierCurveTo(x[0],x[1],x[2],x[3],x[4],x[5]);break;case"Q":r.quadraticCurveTo(x[0],x[1],x[2],x[3]);break;case"A":const b=x[0],_=x[1],S=x[2],w=x[3],M=x[4],E=x[5],T=x[6],C=x[7],D=S>w?S:w,P=S>w?1:S/w,B=S>w?w/S:1;r.translate(b,_),r.rotate(T),r.scale(P,B),r.arc(0,0,D,M,M+E,1-C),r.scale(1/P,1/B),r.rotate(-T),r.translate(-b,-_);break;case"z":d=!0,r.closePath();break}}!d&&!this.hasFill()?r.strokeShape(this):r.fillStrokeShape(this)}getSelfRect(){let r=[];this.dataArray.forEach(function(_){if(_.command==="A"){const S=_.points[4],w=_.points[5],M=_.points[4]+w;let E=Math.PI/180;if(Math.abs(S-M)<E&&(E=Math.abs(S-M)),w<0)for(let T=S-E;T>M;T-=E){const C=a.getPointOnEllipticalArc(_.points[0],_.points[1],_.points[2],_.points[3],T,0);r.push(C.x,C.y)}else for(let T=S+E;T<M;T+=E){const C=a.getPointOnEllipticalArc(_.points[0],_.points[1],_.points[2],_.points[3],T,0);r.push(C.x,C.y)}}else if(_.command==="C")for(let S=0;S<=1;S+=.01){const w=a.getPointOnCubicBezier(S,_.start.x,_.start.y,_.points[0],_.points[1],_.points[2],_.points[3],_.points[4],_.points[5]);r.push(w.x,w.y)}else r=r.concat(_.points)});let l=r[0],d=r[0],f=r[1],g=r[1],x,b;for(let _=0;_<r.length/2;_++)x=r[_*2],b=r[_*2+1],isNaN(x)||(l=Math.min(l,x),d=Math.max(d,x)),isNaN(b)||(f=Math.min(f,b),g=Math.max(g,b));return{x:l,y:f,width:d-l,height:g-f}}getLength(){return this.pathLength}getPointAtLength(r){return a.getPointAtLengthOfDataArray(r,this.dataArray)}static getLineLength(r,l,d,f){return Math.sqrt((d-r)*(d-r)+(f-l)*(f-l))}static getPathLength(r){let l=0;for(let d=0;d<r.length;++d)l+=r[d].pathLength;return l}static getPointAtLengthOfDataArray(r,l){let d,f=0,g=l.length;if(!g)return null;for(;f<g&&r>l[f].pathLength;)r-=l[f].pathLength,++f;if(f===g)return d=l[f-1].points.slice(-2),{x:d[0],y:d[1]};if(r<.01)return l[f].command==="M"?(d=l[f].points.slice(0,2),{x:d[0],y:d[1]}):{x:l[f].start.x,y:l[f].start.y};const x=l[f],b=x.points;switch(x.command){case"L":return a.getPointOnLine(r,x.start.x,x.start.y,b[0],b[1]);case"C":return a.getPointOnCubicBezier((0,i.t2length)(r,a.getPathLength(l),D=>(0,i.getCubicArcLength)([x.start.x,b[0],b[2],b[4]],[x.start.y,b[1],b[3],b[5]],D)),x.start.x,x.start.y,b[0],b[1],b[2],b[3],b[4],b[5]);case"Q":return a.getPointOnQuadraticBezier((0,i.t2length)(r,a.getPathLength(l),D=>(0,i.getQuadraticArcLength)([x.start.x,b[0],b[2]],[x.start.y,b[1],b[3]],D)),x.start.x,x.start.y,b[0],b[1],b[2],b[3]);case"A":const _=b[0],S=b[1],w=b[2],M=b[3],E=b[5],T=b[6];let C=b[4];return C+=E*r/x.pathLength,a.getPointOnEllipticalArc(_,S,w,M,C,T)}return null}static getPointOnLine(r,l,d,f,g,x,b){x=x??l,b=b??d;const _=this.getLineLength(l,d,f,g);if(_<1e-10)return{x:l,y:d};if(f===l)return{x,y:b+(g>d?r:-r)};const S=(g-d)/(f-l),w=Math.sqrt(r*r/(1+S*S))*(f<l?-1:1),M=S*w;if(Math.abs(b-d-S*(x-l))<1e-10)return{x:x+w,y:b+M};const E=((x-l)*(f-l)+(b-d)*(g-d))/(_*_),T=l+E*(f-l),C=d+E*(g-d),D=this.getLineLength(x,b,T,C),P=Math.sqrt(r*r-D*D),B=Math.sqrt(P*P/(1+S*S))*(f<l?-1:1),F=S*B;return{x:T+B,y:C+F}}static getPointOnCubicBezier(r,l,d,f,g,x,b,_,S){function w(P){return P*P*P}function M(P){return 3*P*P*(1-P)}function E(P){return 3*P*(1-P)*(1-P)}function T(P){return(1-P)*(1-P)*(1-P)}const C=_*w(r)+x*M(r)+f*E(r)+l*T(r),D=S*w(r)+b*M(r)+g*E(r)+d*T(r);return{x:C,y:D}}static getPointOnQuadraticBezier(r,l,d,f,g,x,b){function _(T){return T*T}function S(T){return 2*T*(1-T)}function w(T){return(1-T)*(1-T)}const M=x*_(r)+f*S(r)+l*w(r),E=b*_(r)+g*S(r)+d*w(r);return{x:M,y:E}}static getPointOnEllipticalArc(r,l,d,f,g,x){const b=Math.cos(x),_=Math.sin(x),S={x:d*Math.cos(g),y:f*Math.sin(g)};return{x:r+(S.x*b-S.y*_),y:l+(S.x*_+S.y*b)}}static parsePathData(r){if(!r)return[];let l=r;const d=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];l=l.replace(new RegExp(" ","g"),",");for(let M=0;M<d.length;M++)l=l.replace(new RegExp(d[M],"g"),"|"+d[M]);const f=l.split("|"),g=[],x=[];let b=0,_=0;const S=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let w;for(let M=1;M<f.length;M++){let E=f[M],T=E.charAt(0);for(E=E.slice(1),x.length=0;w=S.exec(E);)x.push(w[0]);const C=[];for(let D=0,P=x.length;D<P;D++){if(x[D]==="00"){C.push(0,0);continue}const B=parseFloat(x[D]);isNaN(B)?C.push(0):C.push(B)}for(;C.length>0&&!isNaN(C[0]);){let D="",P=[];const B=b,F=_;let j,O,I,W,Q,J,te,oe,$,X;switch(T){case"l":b+=C.shift(),_+=C.shift(),D="L",P.push(b,_);break;case"L":b=C.shift(),_=C.shift(),P.push(b,_);break;case"m":const G=C.shift(),ee=C.shift();if(b+=G,_+=ee,D="M",g.length>2&&g[g.length-1].command==="z"){for(let Y=g.length-2;Y>=0;Y--)if(g[Y].command==="M"){b=g[Y].points[0]+G,_=g[Y].points[1]+ee;break}}P.push(b,_),T="l";break;case"M":b=C.shift(),_=C.shift(),D="M",P.push(b,_),T="L";break;case"h":b+=C.shift(),D="L",P.push(b,_);break;case"H":b=C.shift(),D="L",P.push(b,_);break;case"v":_+=C.shift(),D="L",P.push(b,_);break;case"V":_=C.shift(),D="L",P.push(b,_);break;case"C":P.push(C.shift(),C.shift(),C.shift(),C.shift()),b=C.shift(),_=C.shift(),P.push(b,_);break;case"c":P.push(b+C.shift(),_+C.shift(),b+C.shift(),_+C.shift()),b+=C.shift(),_+=C.shift(),D="C",P.push(b,_);break;case"S":O=b,I=_,j=g[g.length-1],j.command==="C"&&(O=b+(b-j.points[2]),I=_+(_-j.points[3])),P.push(O,I,C.shift(),C.shift()),b=C.shift(),_=C.shift(),D="C",P.push(b,_);break;case"s":O=b,I=_,j=g[g.length-1],j.command==="C"&&(O=b+(b-j.points[2]),I=_+(_-j.points[3])),P.push(O,I,b+C.shift(),_+C.shift()),b+=C.shift(),_+=C.shift(),D="C",P.push(b,_);break;case"Q":P.push(C.shift(),C.shift()),b=C.shift(),_=C.shift(),P.push(b,_);break;case"q":P.push(b+C.shift(),_+C.shift()),b+=C.shift(),_+=C.shift(),D="Q",P.push(b,_);break;case"T":O=b,I=_,j=g[g.length-1],j.command==="Q"&&(O=b+(b-j.points[0]),I=_+(_-j.points[1])),b=C.shift(),_=C.shift(),D="Q",P.push(O,I,b,_);break;case"t":O=b,I=_,j=g[g.length-1],j.command==="Q"&&(O=b+(b-j.points[0]),I=_+(_-j.points[1])),b+=C.shift(),_+=C.shift(),D="Q",P.push(O,I,b,_);break;case"A":W=C.shift(),Q=C.shift(),J=C.shift(),te=C.shift(),oe=C.shift(),$=b,X=_,b=C.shift(),_=C.shift(),D="A",P=this.convertEndpointToCenterParameterization($,X,b,_,te,oe,W,Q,J);break;case"a":W=C.shift(),Q=C.shift(),J=C.shift(),te=C.shift(),oe=C.shift(),$=b,X=_,b+=C.shift(),_+=C.shift(),D="A",P=this.convertEndpointToCenterParameterization($,X,b,_,te,oe,W,Q,J);break}g.push({command:D||T,points:P,start:{x:B,y:F},pathLength:this.calcLength(B,F,D||T,P)})}(T==="z"||T==="Z")&&g.push({command:"z",points:[],start:void 0,pathLength:0})}return g}static calcLength(r,l,d,f){let g,x,b,_;const S=a;switch(d){case"L":return S.getLineLength(r,l,f[0],f[1]);case"C":return(0,i.getCubicArcLength)([r,f[0],f[2],f[4]],[l,f[1],f[3],f[5]],1);case"Q":return(0,i.getQuadraticArcLength)([r,f[0],f[2]],[l,f[1],f[3]],1);case"A":g=0;const w=f[4],M=f[5],E=f[4]+M;let T=Math.PI/180;if(Math.abs(w-E)<T&&(T=Math.abs(w-E)),x=S.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],w,0),M<0)for(_=w-T;_>E;_-=T)b=S.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],_,0),g+=S.getLineLength(x.x,x.y,b.x,b.y),x=b;else for(_=w+T;_<E;_+=T)b=S.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],_,0),g+=S.getLineLength(x.x,x.y,b.x,b.y),x=b;return b=S.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],E,0),g+=S.getLineLength(x.x,x.y,b.x,b.y),g}return 0}static convertEndpointToCenterParameterization(r,l,d,f,g,x,b,_,S){const w=S*(Math.PI/180),M=Math.cos(w)*(r-d)/2+Math.sin(w)*(l-f)/2,E=-1*Math.sin(w)*(r-d)/2+Math.cos(w)*(l-f)/2,T=M*M/(b*b)+E*E/(_*_);T>1&&(b*=Math.sqrt(T),_*=Math.sqrt(T));let C=Math.sqrt((b*b*(_*_)-b*b*(E*E)-_*_*(M*M))/(b*b*(E*E)+_*_*(M*M)));g===x&&(C*=-1),isNaN(C)&&(C=0);const D=C*b*E/_,P=C*-_*M/b,B=(r+d)/2+Math.cos(w)*D-Math.sin(w)*P,F=(l+f)/2+Math.sin(w)*D+Math.cos(w)*P,j=function(oe){return Math.sqrt(oe[0]*oe[0]+oe[1]*oe[1])},O=function(oe,$){return(oe[0]*$[0]+oe[1]*$[1])/(j(oe)*j($))},I=function(oe,$){return(oe[0]*$[1]<oe[1]*$[0]?-1:1)*Math.acos(O(oe,$))},W=I([1,0],[(M-D)/b,(E-P)/_]),Q=[(M-D)/b,(E-P)/_],J=[(-1*M-D)/b,(-1*E-P)/_];let te=I(Q,J);return O(Q,J)<=-1&&(te=Math.PI),O(Q,J)>=1&&(te=0),x===0&&te>0&&(te=te-2*Math.PI),x===1&&te<0&&(te=te+2*Math.PI),[B,F,b,_,W,te,w,x]}}return My.Path=a,a.prototype.className="Path",a.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(a),n.Factory.addGetterSetter(a,"data"),My}var $N;function EB(){if($N)return Ey;$N=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.Arrow=void 0;const n=ji(),e=_8(),t=zi(),i=Si(),a=v3();class s extends e.Line{_sceneFunc(l){super._sceneFunc(l);const d=Math.PI*2,f=this.points();let g=f;const x=this.tension()!==0&&f.length>4;x&&(g=this.getTensionPoints());const b=this.pointerLength(),_=f.length;let S,w;if(x){const T=[g[g.length-4],g[g.length-3],g[g.length-2],g[g.length-1],f[_-2],f[_-1]],C=a.Path.calcLength(g[g.length-4],g[g.length-3],"C",T),D=a.Path.getPointOnQuadraticBezier(Math.min(1,1-b/C),T[0],T[1],T[2],T[3],T[4],T[5]);S=f[_-2]-D.x,w=f[_-1]-D.y}else S=f[_-2]-f[_-4],w=f[_-1]-f[_-3];const M=(Math.atan2(w,S)+d)%d,E=this.pointerWidth();this.pointerAtEnding()&&(l.save(),l.beginPath(),l.translate(f[_-2],f[_-1]),l.rotate(M),l.moveTo(0,0),l.lineTo(-b,E/2),l.lineTo(-b,-E/2),l.closePath(),l.restore(),this.__fillStroke(l)),this.pointerAtBeginning()&&(l.save(),l.beginPath(),l.translate(f[0],f[1]),x?(S=(g[0]+g[2])/2-f[0],w=(g[1]+g[3])/2-f[1]):(S=f[2]-f[0],w=f[3]-f[1]),l.rotate((Math.atan2(-w,-S)+d)%d),l.moveTo(0,0),l.lineTo(-b,E/2),l.lineTo(-b,-E/2),l.closePath(),l.restore(),this.__fillStroke(l))}__fillStroke(l){const d=this.dashEnabled();d&&(this.attrs.dashEnabled=!1,l.setLineDash([])),l.fillStrokeShape(this),d&&(this.attrs.dashEnabled=!0)}getSelfRect(){const l=super.getSelfRect(),d=this.pointerWidth()/2;return{x:l.x,y:l.y-d,width:l.width,height:l.height+d*2}}}return Ey.Arrow=s,s.prototype.className="Arrow",(0,i._registerNode)(s),n.Factory.addGetterSetter(s,"pointerLength",10,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(s,"pointerWidth",10,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(s,"pointerAtBeginning",!1),n.Factory.addGetterSetter(s,"pointerAtEnding",!0),Ey}var Ty={},e4;function wB(){if(e4)return Ty;e4=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.Circle=void 0;const n=ji(),e=eo(),t=zi(),i=Si();class a extends e.Shape{_sceneFunc(r){r.beginPath(),r.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),r.closePath(),r.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(r){this.radius()!==r/2&&this.radius(r/2)}setHeight(r){this.radius()!==r/2&&this.radius(r/2)}}return Ty.Circle=a,a.prototype._centroid=!0,a.prototype.className="Circle",a.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(a),n.Factory.addGetterSetter(a,"radius",0,(0,t.getNumberValidator)()),Ty}var Cy={},t4;function MB(){if(t4)return Cy;t4=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.Ellipse=void 0;const n=ji(),e=eo(),t=zi(),i=Si();let a=class extends e.Shape{_sceneFunc(r){const l=this.radiusX(),d=this.radiusY();r.beginPath(),r.save(),l!==d&&r.scale(1,d/l),r.arc(0,0,l,0,Math.PI*2,!1),r.restore(),r.closePath(),r.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(r){this.radiusX(r/2)}setHeight(r){this.radiusY(r/2)}};return Cy.Ellipse=a,a.prototype.className="Ellipse",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,i._registerNode)(a),n.Factory.addComponentsGetterSetter(a,"radius",["x","y"]),n.Factory.addGetterSetter(a,"radiusX",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(a,"radiusY",0,(0,t.getNumberValidator)()),Cy}var Ay={},n4;function TB(){if(n4)return Ay;n4=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.Image=void 0;const n=Ps(),e=ji(),t=eo(),i=Si(),a=zi();class s extends t.Shape{constructor(l){super(l),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",d=>{this._removeImageLoad(d.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const l=this.image();l&&l.complete||l&&l.readyState===4||l&&l.addEventListener&&l.addEventListener("load",this._loadListener)}_removeImageLoad(l){l&&l.removeEventListener&&l.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const l=!!this.cornerRadius(),d=this.hasShadow();return l&&d?!0:super._useBufferCanvas(!0)}_sceneFunc(l){const d=this.getWidth(),f=this.getHeight(),g=this.cornerRadius(),x=this.attrs.image;let b;if(x){const _=this.attrs.cropWidth,S=this.attrs.cropHeight;_&&S?b=[x,this.cropX(),this.cropY(),_,S,0,0,d,f]:b=[x,0,0,d,f]}(this.hasFill()||this.hasStroke()||g)&&(l.beginPath(),g?n.Util.drawRoundedRectPath(l,d,f,g):l.rect(0,0,d,f),l.closePath(),l.fillStrokeShape(this)),x&&(g&&l.clip(),l.drawImage.apply(l,b))}_hitFunc(l){const d=this.width(),f=this.height(),g=this.cornerRadius();l.beginPath(),g?n.Util.drawRoundedRectPath(l,d,f,g):l.rect(0,0,d,f),l.closePath(),l.fillStrokeShape(this)}getWidth(){var l,d;return(l=this.attrs.width)!==null&&l!==void 0?l:(d=this.image())===null||d===void 0?void 0:d.width}getHeight(){var l,d;return(l=this.attrs.height)!==null&&l!==void 0?l:(d=this.image())===null||d===void 0?void 0:d.height}static fromURL(l,d,f=null){const g=n.Util.createImageElement();g.onload=function(){const x=new s({image:g});d(x)},g.onerror=f,g.crossOrigin="Anonymous",g.src=l}}return Ay.Image=s,s.prototype.className="Image",(0,i._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(s,"image"),e.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(s,"cropX",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropY",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropWidth",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropHeight",0,(0,a.getNumberValidator)()),Ay}var Um={},i4;function CB(){if(i4)return Um;i4=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.Tag=Um.Label=void 0;const n=ji(),e=eo(),t=m3(),i=zi(),a=Si(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],r="Change.konva",l="none",d="up",f="right",g="down",x="left",b=s.length;class _ extends t.Group{constructor(M){super(M),this.on("add.konva",function(E){this._addListeners(E.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(M){let E=this,T;const C=function(){E._sync()};for(T=0;T<b;T++)M.on(s[T]+r,C)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let M=this.getText(),E=this.getTag(),T,C,D,P,B,F,j;if(M&&E){switch(T=M.width(),C=M.height(),D=E.pointerDirection(),P=E.pointerWidth(),j=E.pointerHeight(),B=0,F=0,D){case d:B=T/2,F=-1*j;break;case f:B=T+P,F=C/2;break;case g:B=T/2,F=C+j;break;case x:B=-1*P,F=C/2;break}E.setAttrs({x:-1*B,y:-1*F,width:T,height:C}),M.setAttrs({x:-1*B,y:-1*F})}}}Um.Label=_,_.prototype.className="Label",(0,a._registerNode)(_);class S extends e.Shape{_sceneFunc(M){const E=this.width(),T=this.height(),C=this.pointerDirection(),D=this.pointerWidth(),P=this.pointerHeight(),B=this.cornerRadius();let F=0,j=0,O=0,I=0;typeof B=="number"?F=j=O=I=Math.min(B,E/2,T/2):(F=Math.min(B[0]||0,E/2,T/2),j=Math.min(B[1]||0,E/2,T/2),I=Math.min(B[2]||0,E/2,T/2),O=Math.min(B[3]||0,E/2,T/2)),M.beginPath(),M.moveTo(F,0),C===d&&(M.lineTo((E-D)/2,0),M.lineTo(E/2,-1*P),M.lineTo((E+D)/2,0)),M.lineTo(E-j,0),M.arc(E-j,j,j,Math.PI*3/2,0,!1),C===f&&(M.lineTo(E,(T-P)/2),M.lineTo(E+D,T/2),M.lineTo(E,(T+P)/2)),M.lineTo(E,T-I),M.arc(E-I,T-I,I,0,Math.PI/2,!1),C===g&&(M.lineTo((E+D)/2,T),M.lineTo(E/2,T+P),M.lineTo((E-D)/2,T)),M.lineTo(O,T),M.arc(O,T-O,O,Math.PI/2,Math.PI,!1),C===x&&(M.lineTo(0,(T+P)/2),M.lineTo(-1*D,T/2),M.lineTo(0,(T-P)/2)),M.lineTo(0,F),M.arc(F,F,F,Math.PI,Math.PI*3/2,!1),M.closePath(),M.fillStrokeShape(this)}getSelfRect(){let M=0,E=0,T=this.pointerWidth(),C=this.pointerHeight(),D=this.pointerDirection(),P=this.width(),B=this.height();return D===d?(E-=C,B+=C):D===g?B+=C:D===x?(M-=T*1.5,P+=T):D===f&&(P+=T*1.5),{x:M,y:E,width:P,height:B}}}return Um.Tag=S,S.prototype.className="Tag",(0,a._registerNode)(S),n.Factory.addGetterSetter(S,"pointerDirection",l),n.Factory.addGetterSetter(S,"pointerWidth",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(S,"pointerHeight",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(S,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),Um}var Ny={},a4;function S8(){if(a4)return Ny;a4=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.Rect=void 0;const n=ji(),e=eo(),t=Si(),i=Ps(),a=zi();class s extends e.Shape{_sceneFunc(l){const d=this.cornerRadius(),f=this.width(),g=this.height();l.beginPath(),d?i.Util.drawRoundedRectPath(l,f,g,d):l.rect(0,0,f,g),l.closePath(),l.fillStrokeShape(this)}}return Ny.Rect=s,s.prototype.className="Rect",(0,t._registerNode)(s),n.Factory.addGetterSetter(s,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4)),Ny}var Ry={},s4;function AB(){if(s4)return Ry;s4=1,Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.RegularPolygon=void 0;const n=ji(),e=eo(),t=zi(),i=Si();let a=class extends e.Shape{_sceneFunc(r){const l=this._getPoints();r.beginPath(),r.moveTo(l[0].x,l[0].y);for(let d=1;d<l.length;d++)r.lineTo(l[d].x,l[d].y);r.closePath(),r.fillStrokeShape(this)}_getPoints(){const r=this.attrs.sides,l=this.attrs.radius||0,d=[];for(let f=0;f<r;f++)d.push({x:l*Math.sin(f*2*Math.PI/r),y:-1*l*Math.cos(f*2*Math.PI/r)});return d}getSelfRect(){const r=this._getPoints();let l=r[0].x,d=r[0].y,f=r[0].x,g=r[0].y;return r.forEach(x=>{l=Math.min(l,x.x),d=Math.max(d,x.x),f=Math.min(f,x.y),g=Math.max(g,x.y)}),{x:l,y:f,width:d-l,height:g-f}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(r){this.radius(r/2)}setHeight(r){this.radius(r/2)}};return Ry.RegularPolygon=a,a.prototype.className="RegularPolygon",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(a),n.Factory.addGetterSetter(a,"radius",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(a,"sides",0,(0,t.getNumberValidator)()),Ry}var Dy={},r4;function NB(){if(r4)return Dy;r4=1,Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.Ring=void 0;const n=ji(),e=eo(),t=zi(),i=Si(),a=Math.PI*2;let s=class extends e.Shape{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.innerRadius(),0,a,!1),l.moveTo(this.outerRadius(),0),l.arc(0,0,this.outerRadius(),a,0,!0),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}};return Dy.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(s),n.Factory.addGetterSetter(s,"innerRadius",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(s,"outerRadius",0,(0,t.getNumberValidator)()),Dy}var Oy={},o4;function RB(){if(o4)return Oy;o4=1,Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.Sprite=void 0;const n=ji(),e=eo(),t=g3(),i=zi(),a=Si();class s extends e.Shape{constructor(l){super(l),this._updated=!0,this.anim=new t.Animation(()=>{const d=this._updated;return this._updated=!1,d}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(l){const d=this.animation(),f=this.frameIndex(),g=f*4,x=this.animations()[d],b=this.frameOffsets(),_=x[g+0],S=x[g+1],w=x[g+2],M=x[g+3],E=this.image();if((this.hasFill()||this.hasStroke())&&(l.beginPath(),l.rect(0,0,w,M),l.closePath(),l.fillStrokeShape(this)),E)if(b){const T=b[d],C=f*2;l.drawImage(E,_,S,w,M,T[C+0],T[C+1],w,M)}else l.drawImage(E,_,S,w,M,0,0,w,M)}_hitFunc(l){const d=this.animation(),f=this.frameIndex(),g=f*4,x=this.animations()[d],b=this.frameOffsets(),_=x[g+2],S=x[g+3];if(l.beginPath(),b){const w=b[d],M=f*2;l.rect(w[M+0],w[M+1],_,S)}else l.rect(0,0,_,S);l.closePath(),l.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const l=this;this.interval=setInterval(function(){l._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const l=this.getLayer();this.anim.setLayers(l),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const l=this.frameIndex(),d=this.animation(),f=this.animations(),g=f[d],x=g.length/4;l<x-1?this.frameIndex(l+1):this.frameIndex(0)}}return Oy.Sprite=s,s.prototype.className="Sprite",(0,a._registerNode)(s),n.Factory.addGetterSetter(s,"animation"),n.Factory.addGetterSetter(s,"animations"),n.Factory.addGetterSetter(s,"frameOffsets"),n.Factory.addGetterSetter(s,"image"),n.Factory.addGetterSetter(s,"frameIndex",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"frameRate",17,(0,i.getNumberValidator)()),n.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Oy}var jy={},l4;function DB(){if(l4)return jy;l4=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.Star=void 0;const n=ji(),e=eo(),t=zi(),i=Si();class a extends e.Shape{_sceneFunc(r){const l=this.innerRadius(),d=this.outerRadius(),f=this.numPoints();r.beginPath(),r.moveTo(0,0-d);for(let g=1;g<f*2;g++){const x=g%2===0?d:l,b=x*Math.sin(g*Math.PI/f),_=-1*x*Math.cos(g*Math.PI/f);r.lineTo(b,_)}r.closePath(),r.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(r){this.outerRadius(r/2)}setHeight(r){this.outerRadius(r/2)}}return jy.Star=a,a.prototype.className="Star",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(a),n.Factory.addGetterSetter(a,"numPoints",5,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(a,"innerRadius",0,(0,t.getNumberValidator)()),n.Factory.addGetterSetter(a,"outerRadius",0,(0,t.getNumberValidator)()),jy}var T0={},c4;function E8(){if(c4)return T0;c4=1,Object.defineProperty(T0,"__esModule",{value:!0}),T0.Text=void 0,T0.stringToArray=r;const n=Ps(),e=ji(),t=eo(),i=Si(),a=zi(),s=Si();function r(ue){return[...ue].reduce((de,ie,Me,ye)=>{if(new RegExp("\\p{Emoji}","u").test(ie)){const ae=ye[Me+1];ae&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(ae)?(de.push(ie+ae),ye[Me+1]=""):de.push(ie)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(ie+(ye[Me+1]||""))?de.push(ie+ye[Me+1]):Me>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(ie)?de[de.length-1]+=ie:ie&&de.push(ie);return de},[])}const l="auto",d="center",f="inherit",g="justify",x="Change.konva",b="2d",_="-",S="left",w="text",M="Text",E="top",T="bottom",C="middle",D="normal",P="px ",B=" ",F="right",j="rtl",O="word",I="char",W="none",Q="",J=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],te=J.length;function oe(ue){return ue.split(",").map(de=>{de=de.trim();const ie=de.indexOf(" ")>=0,Me=de.indexOf('"')>=0||de.indexOf("'")>=0;return ie&&!Me&&(de=`"${de}"`),de}).join(", ")}let $;function X(){return $||($=n.Util.createCanvasElement().getContext(b),$)}function G(ue){ue.fillText(this._partialText,this._partialTextX,this._partialTextY)}function ee(ue){ue.setAttr("miterLimit",2),ue.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Y(ue){return ue=ue||{},!ue.fillLinearGradientColorStops&&!ue.fillRadialGradientColorStops&&!ue.fillPatternImage&&(ue.fill=ue.fill||"black"),ue}class ne extends t.Shape{constructor(de){super(Y(de)),this._partialTextX=0,this._partialTextY=0;for(let ie=0;ie<te;ie++)this.on(J[ie]+x,this._setTextData);this._setTextData()}_sceneFunc(de){const ie=this.textArr,Me=ie.length;if(!this.text())return;let ye=this.padding(),ae=this.fontSize(),_e=this.lineHeight()*ae,Ke=this.verticalAlign(),Ge=this.direction(),st=0,ft=this.align(),Pe=this.getWidth(),he=this.letterSpacing(),ke=this.fill(),Ee=this.textDecoration(),Le=Ee.indexOf("underline")!==-1,Ie=Ee.indexOf("line-through")!==-1,Et;Ge=Ge===f?de.direction:Ge;let ct=_e/2,At=C;if(i.Konva._fixTextRendering){const Pt=this.measureSize("M");At="alphabetic",ct=(Pt.fontBoundingBoxAscent-Pt.fontBoundingBoxDescent)/2+_e/2}for(Ge===j&&de.setAttr("direction",Ge),de.setAttr("font",this._getContextFont()),de.setAttr("textBaseline",At),de.setAttr("textAlign",S),Ke===C?st=(this.getHeight()-Me*_e-ye*2)/2:Ke===T&&(st=this.getHeight()-Me*_e-ye*2),de.translate(ye,st+ye),Et=0;Et<Me;Et++){let Pt=0,Se=0;const se=ie[Et],He=se.text,Ve=se.width,Te=se.lastInParagraph;if(de.save(),ft===F?Pt+=Pe-Ve-ye*2:ft===d&&(Pt+=(Pe-Ve-ye*2)/2),Le){de.save(),de.beginPath();const ze=i.Konva._fixTextRendering?Math.round(ae/4):Math.round(ae/2),Nt=Pt,Dt=ct+Se+ze;de.moveTo(Nt,Dt);const Ft=ft===g&&!Te?Pe-ye*2:Ve;de.lineTo(Nt+Math.round(Ft),Dt),de.lineWidth=ae/15;const Xt=this._getLinearGradient();de.strokeStyle=Xt||ke,de.stroke(),de.restore()}if(Ie){de.save(),de.beginPath();const ze=i.Konva._fixTextRendering?-Math.round(ae/4):0;de.moveTo(Pt,ct+Se+ze);const Nt=ft===g&&!Te?Pe-ye*2:Ve;de.lineTo(Pt+Math.round(Nt),ct+Se+ze),de.lineWidth=ae/15;const Dt=this._getLinearGradient();de.strokeStyle=Dt||ke,de.stroke(),de.restore()}if(Ge!==j&&(he!==0||ft===g)){const ze=He.split(" ").length-1,Nt=r(He);for(let Dt=0;Dt<Nt.length;Dt++){const Ft=Nt[Dt];Ft===" "&&!Te&&ft===g&&(Pt+=(Pe-ye*2-Ve)/ze),this._partialTextX=Pt,this._partialTextY=ct+Se,this._partialText=Ft,de.fillStrokeShape(this),Pt+=this.measureSize(Ft).width+he}}else he!==0&&de.setAttr("letterSpacing",`${he}px`),this._partialTextX=Pt,this._partialTextY=ct+Se,this._partialText=He,de.fillStrokeShape(this);de.restore(),Me>1&&(ct+=_e)}}_hitFunc(de){const ie=this.getWidth(),Me=this.getHeight();de.beginPath(),de.rect(0,0,ie,Me),de.closePath(),de.fillStrokeShape(this)}setText(de){const ie=n.Util._isString(de)?de:de==null?"":de+"";return this._setAttr(w,ie),this}getWidth(){return this.attrs.width===l||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===l||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(de){var ie,Me,ye,ae,_e,Ke,Ge,st,ft,Pe,he;let ke=X(),Ee=this.fontSize(),Le;ke.save(),ke.font=this._getContextFont(),Le=ke.measureText(de),ke.restore();const Ie=Ee/100;return{actualBoundingBoxAscent:(ie=Le.actualBoundingBoxAscent)!==null&&ie!==void 0?ie:71.58203125*Ie,actualBoundingBoxDescent:(Me=Le.actualBoundingBoxDescent)!==null&&Me!==void 0?Me:0,actualBoundingBoxLeft:(ye=Le.actualBoundingBoxLeft)!==null&&ye!==void 0?ye:-7.421875*Ie,actualBoundingBoxRight:(ae=Le.actualBoundingBoxRight)!==null&&ae!==void 0?ae:75.732421875*Ie,alphabeticBaseline:(_e=Le.alphabeticBaseline)!==null&&_e!==void 0?_e:0,emHeightAscent:(Ke=Le.emHeightAscent)!==null&&Ke!==void 0?Ke:100*Ie,emHeightDescent:(Ge=Le.emHeightDescent)!==null&&Ge!==void 0?Ge:-20*Ie,fontBoundingBoxAscent:(st=Le.fontBoundingBoxAscent)!==null&&st!==void 0?st:91*Ie,fontBoundingBoxDescent:(ft=Le.fontBoundingBoxDescent)!==null&&ft!==void 0?ft:21*Ie,hangingBaseline:(Pe=Le.hangingBaseline)!==null&&Pe!==void 0?Pe:72.80000305175781*Ie,ideographicBaseline:(he=Le.ideographicBaseline)!==null&&he!==void 0?he:-21*Ie,width:Le.width,height:Ee}}_getContextFont(){return this.fontStyle()+B+this.fontVariant()+B+(this.fontSize()+P)+oe(this.fontFamily())}_addTextLine(de){this.align()===g&&(de=de.trim());const Me=this._getTextWidth(de);return this.textArr.push({text:de,width:Me,lastInParagraph:!1})}_getTextWidth(de){const ie=this.letterSpacing(),Me=de.length;return X().measureText(de).width+ie*Me}_setTextData(){let de=this.text().split(`
`),ie=+this.fontSize(),Me=0,ye=this.lineHeight()*ie,ae=this.attrs.width,_e=this.attrs.height,Ke=ae!==l&&ae!==void 0,Ge=_e!==l&&_e!==void 0,st=this.padding(),ft=ae-st*2,Pe=_e-st*2,he=0,ke=this.wrap(),Ee=ke!==W,Le=ke!==I&&Ee,Ie=this.ellipsis();this.textArr=[],X().font=this._getContextFont();const Et=Ie?this._getTextWidth(Q):0;for(let ct=0,At=de.length;ct<At;++ct){let Pt=de[ct],Se=this._getTextWidth(Pt);if(Ke&&Se>ft)for(;Pt.length>0;){let se=0,He=r(Pt).length,Ve="",Te=0;for(;se<He;){const ze=se+He>>>1,Nt=r(Pt),Dt=Nt.slice(0,ze+1).join(""),Ft=this._getTextWidth(Dt);(Ie&&Ge&&he+ye>Pe?Ft+Et:Ft)<=ft?(se=ze+1,Ve=Dt,Te=Ft):He=ze}if(Ve){if(Le){const Dt=r(Pt),Ft=r(Ve),Xt=Dt[Ft.length],gt=Xt===B||Xt===_;let Ot;if(gt&&Te<=ft)Ot=Ft.length;else{const Wt=Ft.lastIndexOf(B),Ae=Ft.lastIndexOf(_);Ot=Math.max(Wt,Ae)+1}Ot>0&&(se=Ot,Ve=Dt.slice(0,se).join(""),Te=this._getTextWidth(Ve))}if(Ve=Ve.trimRight(),this._addTextLine(Ve),Me=Math.max(Me,Te),he+=ye,this._shouldHandleEllipsis(he)){this._tryToAddEllipsisToLastLine();break}if(Pt=r(Pt).slice(se).join("").trimLeft(),Pt.length>0&&(Se=this._getTextWidth(Pt),Se<=ft)){this._addTextLine(Pt),he+=ye,Me=Math.max(Me,Se);break}}else break}else this._addTextLine(Pt),he+=ye,Me=Math.max(Me,Se),this._shouldHandleEllipsis(he)&&ct<At-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Ge&&he+ye>Pe)break}this.textHeight=ie,this.textWidth=Me}_shouldHandleEllipsis(de){const ie=+this.fontSize(),Me=this.lineHeight()*ie,ye=this.attrs.height,ae=ye!==l&&ye!==void 0,_e=this.padding(),Ke=ye-_e*2;return!(this.wrap()!==W)||ae&&de+Me>Ke}_tryToAddEllipsisToLastLine(){const de=this.attrs.width,ie=de!==l&&de!==void 0,Me=this.padding(),ye=de-Me*2,ae=this.ellipsis(),_e=this.textArr[this.textArr.length-1];!_e||!ae||(ie&&(this._getTextWidth(_e.text+Q)<ye||(_e.text=_e.text.slice(0,_e.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(_e.text+Q))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const de=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,ie=this.hasShadow();return de&&ie?!0:super._useBufferCanvas()}}return T0.Text=ne,ne.prototype._fillFunc=G,ne.prototype._strokeFunc=ee,ne.prototype.className=M,ne.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(ne),e.Factory.overWriteSetter(ne,"width",(0,a.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(ne,"height",(0,a.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(ne,"direction",f),e.Factory.addGetterSetter(ne,"fontFamily","Arial"),e.Factory.addGetterSetter(ne,"fontSize",12,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(ne,"fontStyle",D),e.Factory.addGetterSetter(ne,"fontVariant",D),e.Factory.addGetterSetter(ne,"padding",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(ne,"align",S),e.Factory.addGetterSetter(ne,"verticalAlign",E),e.Factory.addGetterSetter(ne,"lineHeight",1,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(ne,"wrap",O),e.Factory.addGetterSetter(ne,"ellipsis",!1,(0,a.getBooleanValidator)()),e.Factory.addGetterSetter(ne,"letterSpacing",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(ne,"text","",(0,a.getStringValidator)()),e.Factory.addGetterSetter(ne,"textDecoration",""),T0}var Py={},u4;function OB(){if(u4)return Py;u4=1,Object.defineProperty(Py,"__esModule",{value:!0}),Py.TextPath=void 0;const n=Ps(),e=ji(),t=eo(),i=v3(),a=E8(),s=zi(),r=Si(),l="",d="normal";function f(b){b.fillText(this.partialText,0,0)}function g(b){b.strokeText(this.partialText,0,0)}let x=class extends t.Shape{constructor(_){super(_),this.dummyCanvas=n.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return i.Path.getPathLength(this.dataArray)}_getPointAtLength(_){if(!this.attrs.data)return null;const S=this.pathLength;return _-1>S?null:i.Path.getPointAtLengthOfDataArray(_,this.dataArray)}_readDataAttribute(){this.dataArray=i.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(_){_.setAttr("font",this._getContextFont()),_.setAttr("textBaseline",this.textBaseline()),_.setAttr("textAlign","left"),_.save();const S=this.textDecoration(),w=this.fill(),M=this.fontSize(),E=this.glyphInfo;S==="underline"&&_.beginPath();for(let T=0;T<E.length;T++){_.save();const C=E[T].p0;_.translate(C.x,C.y),_.rotate(E[T].rotation),this.partialText=E[T].text,_.fillStrokeShape(this),S==="underline"&&(T===0&&_.moveTo(0,M/2+1),_.lineTo(M,M/2+1)),_.restore()}S==="underline"&&(_.strokeStyle=w,_.lineWidth=M/20,_.stroke()),_.restore()}_hitFunc(_){_.beginPath();const S=this.glyphInfo;if(S.length>=1){const w=S[0].p0;_.moveTo(w.x,w.y)}for(let w=0;w<S.length;w++){const M=S[w].p1;_.lineTo(M.x,M.y)}_.setAttr("lineWidth",this.fontSize()),_.setAttr("strokeStyle",this.colorKey),_.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(_){return a.Text.prototype.setText.call(this,_)}_getContextFont(){return a.Text.prototype._getContextFont.call(this)}_getTextSize(_){const w=this.dummyCanvas.getContext("2d");w.save(),w.font=this._getContextFont();const M=w.measureText(_);return w.restore(),{width:M.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:_,height:S}=this._getTextSize(this.attrs.text);if(this.textWidth=_,this.textHeight=S,this.glyphInfo=[],!this.attrs.data)return null;const w=this.letterSpacing(),M=this.align(),E=this.kerningFunc(),T=Math.max(this.textWidth+((this.attrs.text||"").length-1)*w,0);let C=0;M==="center"&&(C=Math.max(0,this.pathLength/2-T/2)),M==="right"&&(C=Math.max(0,this.pathLength-T));const D=(0,a.stringToArray)(this.text());let P=C;for(let B=0;B<D.length;B++){const F=this._getPointAtLength(P);if(!F)return;let j=this._getTextSize(D[B]).width+w;if(D[B]===" "&&M==="justify"){const te=this.text().split(" ").length-1;j+=(this.pathLength-T)/te}const O=this._getPointAtLength(P+j);if(!O)return;const I=i.Path.getLineLength(F.x,F.y,O.x,O.y);let W=0;if(E)try{W=E(D[B-1],D[B])*this.fontSize()}catch{W=0}F.x+=W,O.x+=W,this.textWidth+=W;const Q=i.Path.getPointOnLine(W+I/2,F.x,F.y,O.x,O.y),J=Math.atan2(O.y-F.y,O.x-F.x);this.glyphInfo.push({transposeX:Q.x,transposeY:Q.y,text:D[B],rotation:J,p0:F,p1:O}),P+=j}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const _=[];this.glyphInfo.forEach(function(P){_.push(P.p0.x),_.push(P.p0.y),_.push(P.p1.x),_.push(P.p1.y)});let S=_[0]||0,w=_[0]||0,M=_[1]||0,E=_[1]||0,T,C;for(let P=0;P<_.length/2;P++)T=_[P*2],C=_[P*2+1],S=Math.min(S,T),w=Math.max(w,T),M=Math.min(M,C),E=Math.max(E,C);const D=this.fontSize();return{x:S-D/2,y:M-D/2,width:w-S+D,height:E-M+D}}destroy(){return n.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Py.TextPath=x,x.prototype._fillFunc=f,x.prototype._strokeFunc=g,x.prototype._fillFuncHit=f,x.prototype._strokeFuncHit=g,x.prototype.className="TextPath",x.prototype._attrsAffectingSize=["text","fontSize","data"],(0,r._registerNode)(x),e.Factory.addGetterSetter(x,"data"),e.Factory.addGetterSetter(x,"fontFamily","Arial"),e.Factory.addGetterSetter(x,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(x,"fontStyle",d),e.Factory.addGetterSetter(x,"align","left"),e.Factory.addGetterSetter(x,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(x,"textBaseline","middle"),e.Factory.addGetterSetter(x,"fontVariant",d),e.Factory.addGetterSetter(x,"text",l),e.Factory.addGetterSetter(x,"textDecoration",""),e.Factory.addGetterSetter(x,"kerningFunc",void 0),Py}var Uy={},d4;function jB(){if(d4)return Uy;d4=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.Transformer=void 0;const n=Ps(),e=ji(),t=qs(),i=eo(),a=S8(),s=m3(),r=Si(),l=zi(),d=Si(),f="tr-konva",g=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(j=>j+`.${f}`).join(" "),x="nodesRect",b=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],_={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},S="ontouchstart"in r.Konva._global;function w(j,O,I){if(j==="rotater")return I;O+=n.Util.degToRad(_[j]||0);const W=(n.Util.radToDeg(O)%360+360)%360;return n.Util._inRange(W,315+22.5,360)||n.Util._inRange(W,0,22.5)?"ns-resize":n.Util._inRange(W,45-22.5,45+22.5)?"nesw-resize":n.Util._inRange(W,90-22.5,90+22.5)?"ew-resize":n.Util._inRange(W,135-22.5,135+22.5)?"nwse-resize":n.Util._inRange(W,180-22.5,180+22.5)?"ns-resize":n.Util._inRange(W,225-22.5,225+22.5)?"nesw-resize":n.Util._inRange(W,270-22.5,270+22.5)?"ew-resize":n.Util._inRange(W,315-22.5,315+22.5)?"nwse-resize":(n.Util.error("Transformer has unknown angle for cursor detection: "+W),"pointer")}const M=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function E(j){return{x:j.x+j.width/2*Math.cos(j.rotation)+j.height/2*Math.sin(-j.rotation),y:j.y+j.height/2*Math.cos(j.rotation)+j.width/2*Math.sin(j.rotation)}}function T(j,O,I){const W=I.x+(j.x-I.x)*Math.cos(O)-(j.y-I.y)*Math.sin(O),Q=I.y+(j.x-I.x)*Math.sin(O)+(j.y-I.y)*Math.cos(O);return{...j,rotation:j.rotation+O,x:W,y:Q}}function C(j,O){const I=E(j);return T(j,O,I)}function D(j,O,I){let W=O;for(let Q=0;Q<j.length;Q++){const J=r.Konva.getAngle(j[Q]),te=Math.abs(J-O)%(Math.PI*2);Math.min(te,Math.PI*2-te)<I&&(W=J)}return W}let P=0,B=class extends s.Group{constructor(O){super(O),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(g,this.update),this.getNode()&&this.update()}attachTo(O){return this.setNode(O),this}setNode(O){return n.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([O])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return f+this._id}setNodes(O=[]){this._nodes&&this._nodes.length&&this.detach();const I=O.filter(Q=>Q.isAncestorOf(this)?(n.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=O=I,O.length===1&&this.useSingleNodeRotation()?this.rotation(O[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(Q=>{const J=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(Q._attrsAffectingSize.length){const te=Q._attrsAffectingSize.map(oe=>oe+"Change."+this._getEventNamespace()).join(" ");Q.on(te,J)}Q.on(b.map(te=>te+`.${this._getEventNamespace()}`).join(" "),J),Q.on(`absoluteTransformChange.${this._getEventNamespace()}`,J),this._proxyDrag(Q)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(O){let I;O.on(`dragstart.${this._getEventNamespace()}`,W=>{I=O.getAbsolutePosition(),!this.isDragging()&&O!==this.findOne(".back")&&this.startDrag(W,!1)}),O.on(`dragmove.${this._getEventNamespace()}`,W=>{if(!I)return;const Q=O.getAbsolutePosition(),J=Q.x-I.x,te=Q.y-I.y;this.nodes().forEach(oe=>{if(oe===O||oe.isDragging())return;const $=oe.getAbsolutePosition();oe.setAbsolutePosition({x:$.x+J,y:$.y+te}),oe.startDrag(W)}),I=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(O=>{O.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(x),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(x,this.__getNodeRect)}__getNodeShape(O,I=this.rotation(),W){const Q=O.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),J=O.getAbsoluteScale(W),te=O.getAbsolutePosition(W),oe=Q.x*J.x-O.offsetX()*J.x,$=Q.y*J.y-O.offsetY()*J.y,X=(r.Konva.getAngle(O.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),G={x:te.x+oe*Math.cos(X)+$*Math.sin(-X),y:te.y+$*Math.cos(X)+oe*Math.sin(X),width:Q.width*J.x,height:Q.height*J.y,rotation:X};return T(G,-r.Konva.getAngle(I),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const I=[];this.nodes().map(X=>{const G=X.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ee=[{x:G.x,y:G.y},{x:G.x+G.width,y:G.y},{x:G.x+G.width,y:G.y+G.height},{x:G.x,y:G.y+G.height}],Y=X.getAbsoluteTransform();ee.forEach(function(ne){const ue=Y.point(ne);I.push(ue)})});const W=new n.Transform;W.rotate(-r.Konva.getAngle(this.rotation()));let Q=1/0,J=1/0,te=-1/0,oe=-1/0;I.forEach(function(X){const G=W.point(X);Q===void 0&&(Q=te=G.x,J=oe=G.y),Q=Math.min(Q,G.x),J=Math.min(J,G.y),te=Math.max(te,G.x),oe=Math.max(oe,G.y)}),W.invert();const $=W.point({x:Q,y:J});return{x:$.x,y:$.y,width:te-Q,height:oe-J,rotation:r.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),M.forEach(O=>{this._createAnchor(O)}),this._createAnchor("rotater")}_createAnchor(O){const I=new a.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:O+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:S?10:"auto"}),W=this;I.on("mousedown touchstart",function(Q){W._handleMouseDown(Q)}),I.on("dragstart",Q=>{I.stopDrag(),Q.cancelBubble=!0}),I.on("dragend",Q=>{Q.cancelBubble=!0}),I.on("mouseenter",()=>{const Q=r.Konva.getAngle(this.rotation()),J=this.rotateAnchorCursor(),te=w(O,Q,J);I.getStage().content&&(I.getStage().content.style.cursor=te),this._cursorChange=!0}),I.on("mouseout",()=>{I.getStage().content&&(I.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(I)}_createBack(){const O=new i.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(I,W){const Q=W.getParent(),J=Q.padding();I.beginPath(),I.rect(-J,-J,W.width()+J*2,W.height()+J*2),I.moveTo(W.width()/2,-J),Q.rotateEnabled()&&Q.rotateLineVisible()&&I.lineTo(W.width()/2,-Q.rotateAnchorOffset()*n.Util._sign(W.height())-J),I.fillStrokeShape(W)},hitFunc:(I,W)=>{if(!this.shouldOverdrawWholeArea())return;const Q=this.padding();I.beginPath(),I.rect(-Q,-Q,W.width()+Q*2,W.height()+Q*2),I.fillStrokeShape(W)}});this.add(O),this._proxyDrag(O),O.on("dragstart",I=>{I.cancelBubble=!0}),O.on("dragmove",I=>{I.cancelBubble=!0}),O.on("dragend",I=>{I.cancelBubble=!0}),this.on("dragmove",I=>{this.update()})}_handleMouseDown(O){if(this._transforming)return;this._movingAnchorName=O.target.name().split(" ")[0];const I=this._getNodeRect(),W=I.width,Q=I.height,J=Math.sqrt(Math.pow(W,2)+Math.pow(Q,2));this.sin=Math.abs(Q/J),this.cos=Math.abs(W/J),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const te=O.target.getAbsolutePosition(),oe=O.target.getStage().getPointerPosition();this._anchorDragOffset={x:oe.x-te.x,y:oe.y-te.y},P++,this._fire("transformstart",{evt:O.evt,target:this.getNode()}),this._nodes.forEach($=>{$._fire("transformstart",{evt:O.evt,target:$})})}_handleMouseMove(O){let I,W,Q;const J=this.findOne("."+this._movingAnchorName),te=J.getStage();te.setPointersPositions(O);const oe=te.getPointerPosition();let $={x:oe.x-this._anchorDragOffset.x,y:oe.y-this._anchorDragOffset.y};const X=J.getAbsolutePosition();this.anchorDragBoundFunc()&&($=this.anchorDragBoundFunc()(X,$,O)),J.setAbsolutePosition($);const G=J.getAbsolutePosition();if(X.x===G.x&&X.y===G.y)return;if(this._movingAnchorName==="rotater"){const ye=this._getNodeRect();I=J.x()-ye.width/2,W=-J.y()+ye.height/2;let ae=Math.atan2(-W,I)+Math.PI/2;ye.height<0&&(ae-=Math.PI);const Ke=r.Konva.getAngle(this.rotation())+ae,Ge=r.Konva.getAngle(this.rotationSnapTolerance()),ft=D(this.rotationSnaps(),Ke,Ge)-ye.rotation,Pe=C(ye,ft);this._fitNodesInto(Pe,O);return}const ee=this.shiftBehavior();let Y;ee==="inverted"?Y=this.keepRatio()&&!O.shiftKey:ee==="none"?Y=this.keepRatio():Y=this.keepRatio()||O.shiftKey;let ne=this.centeredScaling()||O.altKey;if(this._movingAnchorName==="top-left"){if(Y){const ye=ne?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};Q=Math.sqrt(Math.pow(ye.x-J.x(),2)+Math.pow(ye.y-J.y(),2));const ae=this.findOne(".top-left").x()>ye.x?-1:1,_e=this.findOne(".top-left").y()>ye.y?-1:1;I=Q*this.cos*ae,W=Q*this.sin*_e,this.findOne(".top-left").x(ye.x-I),this.findOne(".top-left").y(ye.y-W)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(J.y());else if(this._movingAnchorName==="top-right"){if(Y){const ye=ne?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};Q=Math.sqrt(Math.pow(J.x()-ye.x,2)+Math.pow(ye.y-J.y(),2));const ae=this.findOne(".top-right").x()<ye.x?-1:1,_e=this.findOne(".top-right").y()>ye.y?-1:1;I=Q*this.cos*ae,W=Q*this.sin*_e,this.findOne(".top-right").x(ye.x+I),this.findOne(".top-right").y(ye.y-W)}var ue=J.position();this.findOne(".top-left").y(ue.y),this.findOne(".bottom-right").x(ue.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(J.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(J.x());else if(this._movingAnchorName==="bottom-left"){if(Y){const ye=ne?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};Q=Math.sqrt(Math.pow(ye.x-J.x(),2)+Math.pow(J.y()-ye.y,2));const ae=ye.x<J.x()?-1:1,_e=J.y()<ye.y?-1:1;I=Q*this.cos*ae,W=Q*this.sin*_e,J.x(ye.x-I),J.y(ye.y+W)}ue=J.position(),this.findOne(".top-left").x(ue.x),this.findOne(".bottom-right").y(ue.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(J.y());else if(this._movingAnchorName==="bottom-right"){if(Y){const ye=ne?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};Q=Math.sqrt(Math.pow(J.x()-ye.x,2)+Math.pow(J.y()-ye.y,2));const ae=this.findOne(".bottom-right").x()<ye.x?-1:1,_e=this.findOne(".bottom-right").y()<ye.y?-1:1;I=Q*this.cos*ae,W=Q*this.sin*_e,this.findOne(".bottom-right").x(ye.x+I),this.findOne(".bottom-right").y(ye.y+W)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(ne=this.centeredScaling()||O.altKey,ne){const ye=this.findOne(".top-left"),ae=this.findOne(".bottom-right"),_e=ye.x(),Ke=ye.y(),Ge=this.getWidth()-ae.x(),st=this.getHeight()-ae.y();ae.move({x:-_e,y:-Ke}),ye.move({x:Ge,y:st})}const de=this.findOne(".top-left").getAbsolutePosition();I=de.x,W=de.y;const ie=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Me=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:I,y:W,width:ie,height:Me,rotation:r.Konva.getAngle(this.rotation())},O)}_handleMouseUp(O){this._removeEvents(O)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(O){var I;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const W=this.getNode();P--,this._fire("transformend",{evt:O,target:W}),(I=this.getLayer())===null||I===void 0||I.batchDraw(),W&&this._nodes.forEach(Q=>{var J;Q._fire("transformend",{evt:O,target:Q}),(J=Q.getLayer())===null||J===void 0||J.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(O,I){const W=this._getNodeRect(),Q=1;if(n.Util._inRange(O.width,-this.padding()*2-Q,Q)){this.update();return}if(n.Util._inRange(O.height,-this.padding()*2-Q,Q)){this.update();return}const J=new n.Transform;if(J.rotate(r.Konva.getAngle(this.rotation())),this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("left")>=0){const Y=J.point({x:-this.padding()*2,y:0});O.x+=Y.x,O.y+=Y.y,O.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=Y.x,this._anchorDragOffset.y-=Y.y}else if(this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("right")>=0){const Y=J.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=Y.x,this._anchorDragOffset.y-=Y.y,O.width+=this.padding()*2}if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("top")>=0){const Y=J.point({x:0,y:-this.padding()*2});O.x+=Y.x,O.y+=Y.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=Y.x,this._anchorDragOffset.y-=Y.y,O.height+=this.padding()*2}else if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const Y=J.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=Y.x,this._anchorDragOffset.y-=Y.y,O.height+=this.padding()*2}if(this.boundBoxFunc()){const Y=this.boundBoxFunc()(W,O);Y?O=Y:n.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const te=1e7,oe=new n.Transform;oe.translate(W.x,W.y),oe.rotate(W.rotation),oe.scale(W.width/te,W.height/te);const $=new n.Transform,X=O.width/te,G=O.height/te;this.flipEnabled()===!1?($.translate(O.x,O.y),$.rotate(O.rotation),$.translate(O.width<0?O.width:0,O.height<0?O.height:0),$.scale(Math.abs(X),Math.abs(G))):($.translate(O.x,O.y),$.rotate(O.rotation),$.scale(X,G));const ee=$.multiply(oe.invert());this._nodes.forEach(Y=>{var ne;const ue=Y.getParent().getAbsoluteTransform(),de=Y.getTransform().copy();de.translate(Y.offsetX(),Y.offsetY());const ie=new n.Transform;ie.multiply(ue.copy().invert()).multiply(ee).multiply(ue).multiply(de);const Me=ie.decompose();Y.setAttrs(Me),(ne=Y.getLayer())===null||ne===void 0||ne.batchDraw()}),this.rotation(n.Util._getRotation(O.rotation)),this._nodes.forEach(Y=>{this._fire("transform",{evt:I,target:Y}),Y._fire("transform",{evt:I,target:Y})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(O,I){this.findOne(O).setAttrs(I)}update(){var O;const I=this._getNodeRect();this.rotation(n.Util._getRotation(I.rotation));const W=I.width,Q=I.height,J=this.enabledAnchors(),te=this.resizeEnabled(),oe=this.padding(),$=this.anchorSize(),X=this.find("._anchor");X.forEach(ee=>{ee.setAttrs({width:$,height:$,offsetX:$/2,offsetY:$/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:$/2+oe,offsetY:$/2+oe,visible:te&&J.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:W/2,y:0,offsetY:$/2+oe,visible:te&&J.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:W,y:0,offsetX:$/2-oe,offsetY:$/2+oe,visible:te&&J.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:Q/2,offsetX:$/2+oe,visible:te&&J.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:W,y:Q/2,offsetX:$/2-oe,visible:te&&J.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:Q,offsetX:$/2+oe,offsetY:$/2-oe,visible:te&&J.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:W/2,y:Q,offsetY:$/2-oe,visible:te&&J.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:W,y:Q,offsetX:$/2-oe,offsetY:$/2-oe,visible:te&&J.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:W/2,y:-this.rotateAnchorOffset()*n.Util._sign(Q)-oe,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:W,height:Q,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const G=this.anchorStyleFunc();G&&X.forEach(ee=>{G(ee)}),(O=this.getLayer())===null||O===void 0||O.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const O=this.findOne("."+this._movingAnchorName);O&&O.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return t.Node.prototype.toObject.call(this)}clone(O){return t.Node.prototype.clone.call(this,O)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Uy.Transformer=B,B.isTransforming=()=>P>0;function F(j){return j instanceof Array||n.Util.warn("enabledAnchors value should be an array"),j instanceof Array&&j.forEach(function(O){M.indexOf(O)===-1&&n.Util.warn("Unknown anchor name: "+O+". Available names are: "+M.join(", "))}),j||[]}return B.prototype.className="Transformer",(0,d._registerNode)(B),e.Factory.addGetterSetter(B,"enabledAnchors",M,F),e.Factory.addGetterSetter(B,"flipEnabled",!0,(0,l.getBooleanValidator)()),e.Factory.addGetterSetter(B,"resizeEnabled",!0),e.Factory.addGetterSetter(B,"anchorSize",10,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(B,"rotateEnabled",!0),e.Factory.addGetterSetter(B,"rotateLineVisible",!0),e.Factory.addGetterSetter(B,"rotationSnaps",[]),e.Factory.addGetterSetter(B,"rotateAnchorOffset",50,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(B,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(B,"rotationSnapTolerance",5,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(B,"borderEnabled",!0),e.Factory.addGetterSetter(B,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(B,"anchorStrokeWidth",1,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(B,"anchorFill","white"),e.Factory.addGetterSetter(B,"anchorCornerRadius",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(B,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(B,"borderStrokeWidth",1,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(B,"borderDash"),e.Factory.addGetterSetter(B,"keepRatio",!0),e.Factory.addGetterSetter(B,"shiftBehavior","default"),e.Factory.addGetterSetter(B,"centeredScaling",!1),e.Factory.addGetterSetter(B,"ignoreStroke",!1),e.Factory.addGetterSetter(B,"padding",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(B,"nodes"),e.Factory.addGetterSetter(B,"node"),e.Factory.addGetterSetter(B,"boundBoxFunc"),e.Factory.addGetterSetter(B,"anchorDragBoundFunc"),e.Factory.addGetterSetter(B,"anchorStyleFunc"),e.Factory.addGetterSetter(B,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(B,"useSingleNodeRotation",!0),e.Factory.backCompat(B,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Uy}var Ly={},h4;function PB(){if(h4)return Ly;h4=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.Wedge=void 0;const n=ji(),e=eo(),t=Si(),i=zi(),a=Si();let s=class extends e.Shape{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.radius(),0,t.Konva.getAngle(this.angle()),this.clockwise()),l.lineTo(0,0),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(l){this.radius(l/2)}setHeight(l){this.radius(l/2)}};return Ly.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(s),n.Factory.addGetterSetter(s,"radius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"angle",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"clockwise",!1),n.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Ly}var zy={},f4;function UB(){if(f4)return zy;f4=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.Blur=void 0;const n=ji(),e=qs(),t=zi();function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function r(d,f){const g=d.data,x=d.width,b=d.height;let _,S,w,M,E,T,C,D,P,B,F,j,O,I,W,Q,J,te,oe,$;const X=f+f+1,G=x-1,ee=b-1,Y=f+1,ne=Y*(Y+1)/2,ue=new i,de=a[f],ie=s[f];let Me=null,ye=ue,ae=null,_e=null;for(let Ke=1;Ke<X;Ke++)ye=ye.next=new i,Ke===Y&&(Me=ye);ye.next=ue,w=S=0;for(let Ke=0;Ke<b;Ke++){j=O=I=W=M=E=T=C=0,D=Y*(Q=g[S]),P=Y*(J=g[S+1]),B=Y*(te=g[S+2]),F=Y*(oe=g[S+3]),M+=ne*Q,E+=ne*J,T+=ne*te,C+=ne*oe,ye=ue;for(let Ge=0;Ge<Y;Ge++)ye.r=Q,ye.g=J,ye.b=te,ye.a=oe,ye=ye.next;for(let Ge=1;Ge<Y;Ge++)_=S+((G<Ge?G:Ge)<<2),M+=(ye.r=Q=g[_])*($=Y-Ge),E+=(ye.g=J=g[_+1])*$,T+=(ye.b=te=g[_+2])*$,C+=(ye.a=oe=g[_+3])*$,j+=Q,O+=J,I+=te,W+=oe,ye=ye.next;ae=ue,_e=Me;for(let Ge=0;Ge<x;Ge++)g[S+3]=oe=C*de>>ie,oe!==0?(oe=255/oe,g[S]=(M*de>>ie)*oe,g[S+1]=(E*de>>ie)*oe,g[S+2]=(T*de>>ie)*oe):g[S]=g[S+1]=g[S+2]=0,M-=D,E-=P,T-=B,C-=F,D-=ae.r,P-=ae.g,B-=ae.b,F-=ae.a,_=w+((_=Ge+f+1)<G?_:G)<<2,j+=ae.r=g[_],O+=ae.g=g[_+1],I+=ae.b=g[_+2],W+=ae.a=g[_+3],M+=j,E+=O,T+=I,C+=W,ae=ae.next,D+=Q=_e.r,P+=J=_e.g,B+=te=_e.b,F+=oe=_e.a,j-=Q,O-=J,I-=te,W-=oe,_e=_e.next,S+=4;w+=x}for(let Ke=0;Ke<x;Ke++){O=I=W=j=E=T=C=M=0,S=Ke<<2,D=Y*(Q=g[S]),P=Y*(J=g[S+1]),B=Y*(te=g[S+2]),F=Y*(oe=g[S+3]),M+=ne*Q,E+=ne*J,T+=ne*te,C+=ne*oe,ye=ue;for(let st=0;st<Y;st++)ye.r=Q,ye.g=J,ye.b=te,ye.a=oe,ye=ye.next;let Ge=x;for(let st=1;st<=f;st++)S=Ge+Ke<<2,M+=(ye.r=Q=g[S])*($=Y-st),E+=(ye.g=J=g[S+1])*$,T+=(ye.b=te=g[S+2])*$,C+=(ye.a=oe=g[S+3])*$,j+=Q,O+=J,I+=te,W+=oe,ye=ye.next,st<ee&&(Ge+=x);S=Ke,ae=ue,_e=Me;for(let st=0;st<b;st++)_=S<<2,g[_+3]=oe=C*de>>ie,oe>0?(oe=255/oe,g[_]=(M*de>>ie)*oe,g[_+1]=(E*de>>ie)*oe,g[_+2]=(T*de>>ie)*oe):g[_]=g[_+1]=g[_+2]=0,M-=D,E-=P,T-=B,C-=F,D-=ae.r,P-=ae.g,B-=ae.b,F-=ae.a,_=Ke+((_=st+Y)<ee?_:ee)*x<<2,M+=j+=ae.r=g[_],E+=O+=ae.g=g[_+1],T+=I+=ae.b=g[_+2],C+=W+=ae.a=g[_+3],ae=ae.next,D+=Q=_e.r,P+=J=_e.g,B+=te=_e.b,F+=oe=_e.a,j-=Q,O-=J,I-=te,W-=oe,_e=_e.next,S+=x}}const l=function(f){const g=Math.round(this.blurRadius());g>0&&r(f,g)};return zy.Blur=l,n.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),zy}var Iy={},p4;function LB(){if(p4)return Iy;p4=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.Brighten=void 0;const n=ji(),e=qs(),t=zi(),i=function(a){const s=this.brightness()*255,r=a.data,l=r.length;for(let d=0;d<l;d+=4)r[d]+=s,r[d+1]+=s,r[d+2]+=s};return Iy.Brighten=i,n.Factory.addGetterSetter(e.Node,"brightness",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),Iy}var By={},m4;function zB(){if(m4)return By;m4=1,Object.defineProperty(By,"__esModule",{value:!0}),By.Contrast=void 0;const n=ji(),e=qs(),t=zi(),i=function(a){const s=Math.pow((this.contrast()+100)/100,2),r=a.data,l=r.length;let d=150,f=150,g=150;for(let x=0;x<l;x+=4)d=r[x],f=r[x+1],g=r[x+2],d/=255,d-=.5,d*=s,d+=.5,d*=255,f/=255,f-=.5,f*=s,f+=.5,f*=255,g/=255,g-=.5,g*=s,g+=.5,g*=255,d=d<0?0:d>255?255:d,f=f<0?0:f>255?255:f,g=g<0?0:g>255?255:g,r[x]=d,r[x+1]=f,r[x+2]=g};return By.Contrast=i,n.Factory.addGetterSetter(e.Node,"contrast",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),By}var Fy={},g4;function IB(){if(g4)return Fy;g4=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.Emboss=void 0;const n=ji(),e=qs(),t=Ps(),i=zi(),a=function(s){const r=this.embossStrength()*10,l=this.embossWhiteLevel()*255,d=this.embossDirection(),f=this.embossBlend(),g=s.data,x=s.width,b=s.height,_=x*4;let S=0,w=0,M=b;switch(d){case"top-left":S=-1,w=-1;break;case"top":S=-1,w=0;break;case"top-right":S=-1,w=1;break;case"right":S=0,w=1;break;case"bottom-right":S=1,w=1;break;case"bottom":S=1,w=0;break;case"bottom-left":S=1,w=-1;break;case"left":S=0,w=-1;break;default:t.Util.error("Unknown emboss direction: "+d)}do{const E=(M-1)*_;let T=S;M+T<1&&(T=0),M+T>b&&(T=0);const C=(M-1+T)*x*4;let D=x;do{const P=E+(D-1)*4;let B=w;D+B<1&&(B=0),D+B>x&&(B=0);const F=C+(D-1+B)*4,j=g[P]-g[F],O=g[P+1]-g[F+1],I=g[P+2]-g[F+2];let W=j;const Q=W>0?W:-W,J=O>0?O:-O,te=I>0?I:-I;if(J>Q&&(W=O),te>Q&&(W=I),W*=r,f){const oe=g[P]+W,$=g[P+1]+W,X=g[P+2]+W;g[P]=oe>255?255:oe<0?0:oe,g[P+1]=$>255?255:$<0?0:$,g[P+2]=X>255?255:X<0?0:X}else{let oe=l-W;oe<0?oe=0:oe>255&&(oe=255),g[P]=g[P+1]=g[P+2]=oe}}while(--D)}while(--M)};return Fy.Emboss=a,n.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,n.Factory.afterSetFilter),Fy}var ky={},v4;function BB(){if(v4)return ky;v4=1,Object.defineProperty(ky,"__esModule",{value:!0}),ky.Enhance=void 0;const n=ji(),e=qs(),t=zi();function i(s,r,l,d,f){const g=l-r,x=f-d;if(g===0)return d+x/2;if(x===0)return d;let b=(s-r)/g;return b=x*b+d,b}const a=function(s){const r=s.data,l=r.length;let d=r[0],f=d,g,x=r[1],b=x,_,S=r[2],w=S,M;const E=this.enhance();if(E===0)return;for(let j=0;j<l;j+=4)g=r[j+0],g<d?d=g:g>f&&(f=g),_=r[j+1],_<x?x=_:_>b&&(b=_),M=r[j+2],M<S?S=M:M>w&&(w=M);f===d&&(f=255,d=0),b===x&&(b=255,x=0),w===S&&(w=255,S=0);let T,C,D,P,B,F;if(E>0)T=f+E*(255-f),C=d-E*(d-0),D=b+E*(255-b),P=x-E*(x-0),B=w+E*(255-w),F=S-E*(S-0);else{const j=(f+d)*.5;T=f+E*(f-j),C=d+E*(d-j);const O=(b+x)*.5;D=b+E*(b-O),P=x+E*(x-O);const I=(w+S)*.5;B=w+E*(w-I),F=S+E*(S-I)}for(let j=0;j<l;j+=4)r[j+0]=i(r[j+0],d,f,C,T),r[j+1]=i(r[j+1],x,b,P,D),r[j+2]=i(r[j+2],S,w,F,B)};return ky.Enhance=a,n.Factory.addGetterSetter(e.Node,"enhance",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),ky}var Hy={},y4;function FB(){if(y4)return Hy;y4=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.Grayscale=void 0;const n=function(e){const t=e.data,i=t.length;for(let a=0;a<i;a+=4){const s=.34*t[a]+.5*t[a+1]+.16*t[a+2];t[a]=s,t[a+1]=s,t[a+2]=s}};return Hy.Grayscale=n,Hy}var Gy={},x4;function kB(){if(x4)return Gy;x4=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.HSL=void 0;const n=ji(),e=qs(),t=zi();n.Factory.addGetterSetter(e.Node,"hue",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"saturation",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"luminance",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter);const i=function(a){const s=a.data,r=s.length,l=1,d=Math.pow(2,this.saturation()),f=Math.abs(this.hue()+360)%360,g=this.luminance()*127,x=l*d*Math.cos(f*Math.PI/180),b=l*d*Math.sin(f*Math.PI/180),_=.299*l+.701*x+.167*b,S=.587*l-.587*x+.33*b,w=.114*l-.114*x-.497*b,M=.299*l-.299*x-.328*b,E=.587*l+.413*x+.035*b,T=.114*l-.114*x+.293*b,C=.299*l-.3*x+1.25*b,D=.587*l-.586*x-1.05*b,P=.114*l+.886*x-.2*b;let B,F,j,O;for(let I=0;I<r;I+=4)B=s[I+0],F=s[I+1],j=s[I+2],O=s[I+3],s[I+0]=_*B+S*F+w*j+g,s[I+1]=M*B+E*F+T*j+g,s[I+2]=C*B+D*F+P*j+g,s[I+3]=O};return Gy.HSL=i,Gy}var Vy={},b4;function HB(){if(b4)return Vy;b4=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.HSV=void 0;const n=ji(),e=qs(),t=zi(),i=function(a){const s=a.data,r=s.length,l=Math.pow(2,this.value()),d=Math.pow(2,this.saturation()),f=Math.abs(this.hue()+360)%360,g=l*d*Math.cos(f*Math.PI/180),x=l*d*Math.sin(f*Math.PI/180),b=.299*l+.701*g+.167*x,_=.587*l-.587*g+.33*x,S=.114*l-.114*g-.497*x,w=.299*l-.299*g-.328*x,M=.587*l+.413*g+.035*x,E=.114*l-.114*g+.293*x,T=.299*l-.3*g+1.25*x,C=.587*l-.586*g-1.05*x,D=.114*l+.886*g-.2*x;for(let P=0;P<r;P+=4){const B=s[P+0],F=s[P+1],j=s[P+2],O=s[P+3];s[P+0]=b*B+_*F+S*j,s[P+1]=w*B+M*F+E*j,s[P+2]=T*B+C*F+D*j,s[P+3]=O}};return Vy.HSV=i,n.Factory.addGetterSetter(e.Node,"hue",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"saturation",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"value",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),Vy}var qy={},_4;function GB(){if(_4)return qy;_4=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.Invert=void 0;const n=function(e){const t=e.data,i=t.length;for(let a=0;a<i;a+=4)t[a]=255-t[a],t[a+1]=255-t[a+1],t[a+2]=255-t[a+2]};return qy.Invert=n,qy}var Xy={},S4;function VB(){if(S4)return Xy;S4=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.Kaleidoscope=void 0;const n=ji(),e=qs(),t=Ps(),i=zi(),a=function(l,d,f){const g=l.data,x=d.data,b=l.width,_=l.height,S=f.polarCenterX||b/2,w=f.polarCenterY||_/2;let M=Math.sqrt(S*S+w*w),E=b-S,T=_-w;const C=Math.sqrt(E*E+T*T);M=C>M?C:M;const D=_,P=b,B=360/P*Math.PI/180;for(let F=0;F<P;F+=1){const j=Math.sin(F*B),O=Math.cos(F*B);for(let I=0;I<D;I+=1){E=Math.floor(S+M*I/D*O),T=Math.floor(w+M*I/D*j);let W=(T*b+E)*4;const Q=g[W+0],J=g[W+1],te=g[W+2],oe=g[W+3];W=(F+I*b)*4,x[W+0]=Q,x[W+1]=J,x[W+2]=te,x[W+3]=oe}}},s=function(l,d,f){const g=l.data,x=d.data,b=l.width,_=l.height,S=f.polarCenterX||b/2,w=f.polarCenterY||_/2;let M=Math.sqrt(S*S+w*w),E=b-S,T=_-w;const C=Math.sqrt(E*E+T*T);M=C>M?C:M;const D=_,P=b,B=0;let F,j;for(E=0;E<b;E+=1)for(T=0;T<_;T+=1){const O=E-S,I=T-w,W=Math.sqrt(O*O+I*I)*D/M;let Q=(Math.atan2(I,O)*180/Math.PI+360+B)%360;Q=Q*P/360,F=Math.floor(Q),j=Math.floor(W);let J=(j*b+F)*4;const te=g[J+0],oe=g[J+1],$=g[J+2],X=g[J+3];J=(T*b+E)*4,x[J+0]=te,x[J+1]=oe,x[J+2]=$,x[J+3]=X}},r=function(l){const d=l.width,f=l.height;let g,x,b,_,S,w,M,E,T,C,D=Math.round(this.kaleidoscopePower());const P=Math.round(this.kaleidoscopeAngle()),B=Math.floor(d*(P%360)/360);if(D<1)return;const F=t.Util.createCanvasElement();F.width=d,F.height=f;const j=F.getContext("2d").getImageData(0,0,d,f);t.Util.releaseCanvas(F),a(l,j,{polarCenterX:d/2,polarCenterY:f/2});let O=d/Math.pow(2,D);for(;O<=8;)O=O*2,D-=1;O=Math.ceil(O);let I=O,W=0,Q=I,J=1;for(B+O>d&&(W=I,Q=0,J=-1),x=0;x<f;x+=1)for(g=W;g!==Q;g+=J)b=Math.round(g+B)%d,T=(d*x+b)*4,S=j.data[T+0],w=j.data[T+1],M=j.data[T+2],E=j.data[T+3],C=(d*x+g)*4,j.data[C+0]=S,j.data[C+1]=w,j.data[C+2]=M,j.data[C+3]=E;for(x=0;x<f;x+=1)for(I=Math.floor(O),_=0;_<D;_+=1){for(g=0;g<I+1;g+=1)T=(d*x+g)*4,S=j.data[T+0],w=j.data[T+1],M=j.data[T+2],E=j.data[T+3],C=(d*x+I*2-g-1)*4,j.data[C+0]=S,j.data[C+1]=w,j.data[C+2]=M,j.data[C+3]=E;I*=2}s(j,l,{})};return Xy.Kaleidoscope=r,n.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Xy}var Yy={},E4;function qB(){if(E4)return Yy;E4=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.Mask=void 0;const n=ji(),e=qs(),t=zi();function i(b,_,S){let w=(S*b.width+_)*4;const M=[];return M.push(b.data[w++],b.data[w++],b.data[w++],b.data[w++]),M}function a(b,_){return Math.sqrt(Math.pow(b[0]-_[0],2)+Math.pow(b[1]-_[1],2)+Math.pow(b[2]-_[2],2))}function s(b){const _=[0,0,0];for(let S=0;S<b.length;S++)_[0]+=b[S][0],_[1]+=b[S][1],_[2]+=b[S][2];return _[0]/=b.length,_[1]/=b.length,_[2]/=b.length,_}function r(b,_){const S=i(b,0,0),w=i(b,b.width-1,0),M=i(b,0,b.height-1),E=i(b,b.width-1,b.height-1),T=_||10;if(a(S,w)<T&&a(w,E)<T&&a(E,M)<T&&a(M,S)<T){const C=s([w,S,E,M]),D=[];for(let P=0;P<b.width*b.height;P++){const B=a(C,[b.data[P*4],b.data[P*4+1],b.data[P*4+2]]);D[P]=B<T?0:255}return D}}function l(b,_){for(let S=0;S<b.width*b.height;S++)b.data[4*S+3]=_[S]}function d(b,_,S){const w=[1,1,1,1,0,1,1,1,1],M=Math.round(Math.sqrt(w.length)),E=Math.floor(M/2),T=[];for(let C=0;C<S;C++)for(let D=0;D<_;D++){const P=C*_+D;let B=0;for(let F=0;F<M;F++)for(let j=0;j<M;j++){const O=C+F-E,I=D+j-E;if(O>=0&&O<S&&I>=0&&I<_){const W=O*_+I,Q=w[F*M+j];B+=b[W]*Q}}T[P]=B===2040?255:0}return T}function f(b,_,S){const w=[1,1,1,1,1,1,1,1,1],M=Math.round(Math.sqrt(w.length)),E=Math.floor(M/2),T=[];for(let C=0;C<S;C++)for(let D=0;D<_;D++){const P=C*_+D;let B=0;for(let F=0;F<M;F++)for(let j=0;j<M;j++){const O=C+F-E,I=D+j-E;if(O>=0&&O<S&&I>=0&&I<_){const W=O*_+I,Q=w[F*M+j];B+=b[W]*Q}}T[P]=B>=1020?255:0}return T}function g(b,_,S){const w=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],M=Math.round(Math.sqrt(w.length)),E=Math.floor(M/2),T=[];for(let C=0;C<S;C++)for(let D=0;D<_;D++){const P=C*_+D;let B=0;for(let F=0;F<M;F++)for(let j=0;j<M;j++){const O=C+F-E,I=D+j-E;if(O>=0&&O<S&&I>=0&&I<_){const W=O*_+I,Q=w[F*M+j];B+=b[W]*Q}}T[P]=B}return T}const x=function(b){const _=this.threshold();let S=r(b,_);return S&&(S=d(S,b.width,b.height),S=f(S,b.width,b.height),S=g(S,b.width,b.height),l(b,S)),b};return Yy.Mask=x,n.Factory.addGetterSetter(e.Node,"threshold",0,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),Yy}var Wy={},w4;function XB(){if(w4)return Wy;w4=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.Noise=void 0;const n=ji(),e=qs(),t=zi(),i=function(a){const s=this.noise()*255,r=a.data,l=r.length,d=s/2;for(let f=0;f<l;f+=4)r[f+0]+=d-2*d*Math.random(),r[f+1]+=d-2*d*Math.random(),r[f+2]+=d-2*d*Math.random()};return Wy.Noise=i,n.Factory.addGetterSetter(e.Node,"noise",.2,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),Wy}var Ky={},M4;function YB(){if(M4)return Ky;M4=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.Pixelate=void 0;const n=ji(),e=Ps(),t=qs(),i=zi(),a=function(s){let r=Math.ceil(this.pixelSize()),l=s.width,d=s.height,f=Math.ceil(l/r),g=Math.ceil(d/r),x=s.data;if(r<=0){e.Util.error("pixelSize value can not be <= 0");return}for(let b=0;b<f;b+=1)for(let _=0;_<g;_+=1){let S=0,w=0,M=0,E=0;const T=b*r,C=T+r,D=_*r,P=D+r;let B=0;for(let F=T;F<C;F+=1)if(!(F>=l))for(let j=D;j<P;j+=1){if(j>=d)continue;const O=(l*j+F)*4;S+=x[O+0],w+=x[O+1],M+=x[O+2],E+=x[O+3],B+=1}S=S/B,w=w/B,M=M/B,E=E/B;for(let F=T;F<C;F+=1)if(!(F>=l))for(let j=D;j<P;j+=1){if(j>=d)continue;const O=(l*j+F)*4;x[O+0]=S,x[O+1]=w,x[O+2]=M,x[O+3]=E}}};return Ky.Pixelate=a,n.Factory.addGetterSetter(t.Node,"pixelSize",8,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Ky}var Zy={},T4;function WB(){if(T4)return Zy;T4=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.Posterize=void 0;const n=ji(),e=qs(),t=zi(),i=function(a){const s=Math.round(this.levels()*254)+1,r=a.data,l=r.length,d=255/s;for(let f=0;f<l;f+=1)r[f]=Math.floor(r[f]/d)*d};return Zy.Posterize=i,n.Factory.addGetterSetter(e.Node,"levels",.5,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),Zy}var Qy={},C4;function KB(){if(C4)return Qy;C4=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.RGB=void 0;const n=ji(),e=qs(),t=zi(),i=function(a){const s=a.data,r=s.length,l=this.red(),d=this.green(),f=this.blue();for(let g=0;g<r;g+=4){const x=(.34*s[g]+.5*s[g+1]+.16*s[g+2])/255;s[g]=x*l,s[g+1]=x*d,s[g+2]=x*f,s[g+3]=s[g+3]}};return Qy.RGB=i,n.Factory.addGetterSetter(e.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),n.Factory.addGetterSetter(e.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),n.Factory.addGetterSetter(e.Node,"blue",0,t.RGBComponent,n.Factory.afterSetFilter),Qy}var Jy={},A4;function ZB(){if(A4)return Jy;A4=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.RGBA=void 0;const n=ji(),e=qs(),t=zi(),i=function(a){const s=a.data,r=s.length,l=this.red(),d=this.green(),f=this.blue(),g=this.alpha();for(let x=0;x<r;x+=4){const b=1-g;s[x]=l*g+s[x]*b,s[x+1]=d*g+s[x+1]*b,s[x+2]=f*g+s[x+2]*b}};return Jy.RGBA=i,n.Factory.addGetterSetter(e.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),n.Factory.addGetterSetter(e.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),n.Factory.addGetterSetter(e.Node,"blue",0,t.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(e.Node,"alpha",1,function(a){return this._filterUpToDate=!1,a>1?1:a<0?0:a}),Jy}var $y={},N4;function QB(){if(N4)return $y;N4=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.Sepia=void 0;const n=function(e){const t=e.data,i=t.length;for(let a=0;a<i;a+=4){const s=t[a+0],r=t[a+1],l=t[a+2];t[a+0]=Math.min(255,s*.393+r*.769+l*.189),t[a+1]=Math.min(255,s*.349+r*.686+l*.168),t[a+2]=Math.min(255,s*.272+r*.534+l*.131)}};return $y.Sepia=n,$y}var ex={},R4;function JB(){if(R4)return ex;R4=1,Object.defineProperty(ex,"__esModule",{value:!0}),ex.Solarize=void 0;const n=function(e){const t=e.data,i=e.width,a=e.height,s=i*4;let r=a;do{const l=(r-1)*s;let d=i;do{const f=l+(d-1)*4;let g=t[f],x=t[f+1],b=t[f+2];g>127&&(g=255-g),x>127&&(x=255-x),b>127&&(b=255-b),t[f]=g,t[f+1]=x,t[f+2]=b}while(--d)}while(--r)};return ex.Solarize=n,ex}var tx={},D4;function $B(){if(D4)return tx;D4=1,Object.defineProperty(tx,"__esModule",{value:!0}),tx.Threshold=void 0;const n=ji(),e=qs(),t=zi(),i=function(a){const s=this.threshold()*255,r=a.data,l=r.length;for(let d=0;d<l;d+=1)r[d]=r[d]<s?0:255};return tx.Threshold=i,n.Factory.addGetterSetter(e.Node,"threshold",.5,(0,t.getNumberValidator)(),n.Factory.afterSetFilter),tx}var O4;function eF(){if(O4)return my;O4=1,Object.defineProperty(my,"__esModule",{value:!0}),my.Konva=void 0;const n=iT(),e=_B(),t=EB(),i=wB(),a=MB(),s=TB(),r=CB(),l=_8(),d=v3(),f=S8(),g=AB(),x=NB(),b=RB(),_=DB(),S=E8(),w=OB(),M=jB(),E=PB(),T=UB(),C=LB(),D=zB(),P=IB(),B=BB(),F=FB(),j=kB(),O=HB(),I=GB(),W=VB(),Q=qB(),J=XB(),te=YB(),oe=WB(),$=KB(),X=ZB(),G=QB(),ee=JB(),Y=$B();return my.Konva=n.Konva.Util._assign(n.Konva,{Arc:e.Arc,Arrow:t.Arrow,Circle:i.Circle,Ellipse:a.Ellipse,Image:s.Image,Label:r.Label,Tag:r.Tag,Line:l.Line,Path:d.Path,Rect:f.Rect,RegularPolygon:g.RegularPolygon,Ring:x.Ring,Sprite:b.Sprite,Star:_.Star,Text:S.Text,TextPath:w.TextPath,Transformer:M.Transformer,Wedge:E.Wedge,Filters:{Blur:T.Blur,Brighten:C.Brighten,Contrast:D.Contrast,Emboss:P.Emboss,Enhance:B.Enhance,Grayscale:F.Grayscale,HSL:j.HSL,HSV:O.HSV,Invert:I.Invert,Kaleidoscope:W.Kaleidoscope,Mask:Q.Mask,Noise:J.Noise,Pixelate:te.Pixelate,Posterize:oe.Posterize,RGB:$.RGB,RGBA:X.RGBA,Sepia:G.Sepia,Solarize:ee.Solarize,Threshold:Y.Threshold}}),my}var tF=S_.exports,j4;function nF(){if(j4)return S_.exports;j4=1,Object.defineProperty(tF,"__esModule",{value:!0});const n=eF();return S_.exports=n.Konva,S_.exports}nF();var sb={exports:{}},P4;function iF(){return P4||(P4=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var t=iT();Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return t.Konva}});const i=iT();n.exports=i.Konva}(sb,sb.exports)),sb.exports}var aF=iF();const z_=Uf(aF);var rw={exports:{}},ow={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U4;function sF(){return U4||(U4=1,function(n){n.exports=function(e){function t(h,m,N,U){return new hm(h,m,N,U)}function i(){}function a(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)m+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(h){var m=h,N=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(N=m.return),h=m.return;while(h)}return m.tag===3?N:null}function r(h){if(s(h)!==h)throw Error(a(188))}function l(h){var m=h.alternate;if(!m){if(m=s(h),m===null)throw Error(a(188));return m!==h?null:h}for(var N=h,U=m;;){var q=N.return;if(q===null)break;var K=q.alternate;if(K===null){if(U=q.return,U!==null){N=U;continue}break}if(q.child===K.child){for(K=q.child;K;){if(K===N)return r(q),h;if(K===U)return r(q),m;K=K.sibling}throw Error(a(188))}if(N.return!==U.return)N=q,U=K;else{for(var xe=!1,fe=q.child;fe;){if(fe===N){xe=!0,N=q,U=K;break}if(fe===U){xe=!0,U=q,N=K;break}fe=fe.sibling}if(!xe){for(fe=K.child;fe;){if(fe===N){xe=!0,N=K,U=q;break}if(fe===U){xe=!0,U=K,N=q;break}fe=fe.sibling}if(!xe)throw Error(a(189))}}if(N.alternate!==U)throw Error(a(190))}if(N.tag!==3)throw Error(a(188));return N.stateNode.current===N?h:m}function d(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(m=d(h),m!==null)return m;h=h.sibling}return null}function f(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(m=f(h),m!==null))return m;h=h.sibling}return null}function g(h){return h===null||typeof h!="object"?null:(h=ap&&h[ap]||h["@@iterator"],typeof h=="function"?h:null)}function x(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===Zh?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case wc:return"Fragment";case Hd:return"Profiler";case Iu:return"StrictMode";case Kh:return"Suspense";case Mn:return"SuspenseList";case Tc:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case Fl:return"Portal";case Mc:return(h.displayName||"Context")+".Provider";case ip:return(h._context.displayName||"Context")+".Consumer";case sl:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case Oo:return m=h.displayName||null,m!==null?m:x(h.type)||"Memo";case $s:m=h._payload,h=h._init;try{return x(h(m))}catch{}}return null}function b(h){return{current:h}}function _(h){0>Uo||(h.current=Po[Uo],Po[Uo]=null,Uo--)}function S(h,m){Uo++,Po[Uo]=h.current,h.current=m}function w(h){return h>>>=0,h===0?32:31-(x0(h)/gp|0)|0}function M(h){var m=h&42;if(m!==0)return m;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function E(h,m,N){var U=h.pendingLanes;if(U===0)return 0;var q=0,K=h.suspendedLanes,xe=h.pingedLanes;h=h.warmLanes;var fe=U&134217727;return fe!==0?(U=fe&~K,U!==0?q=M(U):(xe&=fe,xe!==0?q=M(xe):N||(N=fe&~h,N!==0&&(q=M(N))))):(fe=U&~K,fe!==0?q=M(fe):xe!==0?q=M(xe):N||(N=U&~h,N!==0&&(q=M(N)))),q===0?0:m!==0&&m!==q&&(m&K)===0&&(K=q&-q,N=m&-m,K>=N||K===32&&(N&4194048)!==0)?m:q}function T(h,m){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&m)===0}function C(h,m){switch(h){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D(){var h=_r;return _r<<=1,(_r&4194048)===0&&(_r=256),h}function P(){var h=Hu;return Hu<<=1,(Hu&62914560)===0&&(Hu=4194304),h}function B(h){for(var m=[],N=0;31>N;N++)m.push(h);return m}function F(h,m){h.pendingLanes|=m,m!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function j(h,m,N,U,q,K){var xe=h.pendingLanes;h.pendingLanes=N,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=N,h.entangledLanes&=N,h.errorRecoveryDisabledLanes&=N,h.shellSuspendCounter=0;var fe=h.entanglements,pe=h.expirationTimes,Ce=h.hiddenUpdates;for(N=xe&~N;0<N;){var qe=31-nr(N),pt=1<<qe;fe[qe]=0,pe[qe]=-1;var It=Ce[qe];if(It!==null)for(Ce[qe]=null,qe=0;qe<It.length;qe++){var Bt=It[qe];Bt!==null&&(Bt.lane&=-536870913)}N&=~pt}U!==0&&O(h,U,0),K!==0&&q===0&&h.tag!==0&&(h.suspendedLanes|=K&~(xe&~m))}function O(h,m,N){h.pendingLanes|=m,h.suspendedLanes&=~m;var U=31-nr(m);h.entangledLanes|=m,h.entanglements[U]=h.entanglements[U]|1073741824|N&4194090}function I(h,m){var N=h.entangledLanes|=m;for(h=h.entanglements;N;){var U=31-nr(N),q=1<<U;q&m|h[U]&m&&(h[U]|=m),N&=~q}}function W(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Q(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function J(h){if(typeof Gu=="function"&&Vu(h),As&&typeof As.setStrictMode=="function")try{As.setStrictMode(ul,h)}catch{}}function te(h){if(Sr===void 0)try{throw Error()}catch(N){var m=N.stack.trim().match(/\n( *(at )?)/);Sr=m&&m[1]||"",qr=-1<N.stack.indexOf(`
    at`)?" (<anonymous>)":-1<N.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sr+h+qr}function oe(h,m){if(!h||Xl)return"";Xl=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var U={DetermineComponentFrameRoot:function(){try{if(m){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(Bt){var It=Bt}Reflect.construct(h,[],pt)}else{try{pt.call()}catch(Bt){It=Bt}h.call(pt.prototype)}}else{try{throw Error()}catch(Bt){It=Bt}(pt=h())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(Bt){if(Bt&&It&&typeof Bt.stack=="string")return[Bt.stack,It.stack]}return[null,null]}};U.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var q=Object.getOwnPropertyDescriptor(U.DetermineComponentFrameRoot,"name");q&&q.configurable&&Object.defineProperty(U.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var K=U.DetermineComponentFrameRoot(),xe=K[0],fe=K[1];if(xe&&fe){var pe=xe.split(`
`),Ce=fe.split(`
`);for(q=U=0;U<pe.length&&!pe[U].includes("DetermineComponentFrameRoot");)U++;for(;q<Ce.length&&!Ce[q].includes("DetermineComponentFrameRoot");)q++;if(U===pe.length||q===Ce.length)for(U=pe.length-1,q=Ce.length-1;1<=U&&0<=q&&pe[U]!==Ce[q];)q--;for(;1<=U&&0<=q;U--,q--)if(pe[U]!==Ce[q]){if(U!==1||q!==1)do if(U--,q--,0>q||pe[U]!==Ce[q]){var qe=`
`+pe[U].replace(" at new "," at ");return h.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",h.displayName)),qe}while(1<=U&&0<=q);break}}}finally{Xl=!1,Error.prepareStackTrace=N}return(N=h?h.displayName||h.name:"")?te(N):""}function $(h){switch(h.tag){case 26:case 27:case 5:return te(h.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 15:return oe(h.type,!1);case 11:return oe(h.type.render,!1);case 1:return oe(h.type,!0);case 31:return te("Activity");default:return""}}function X(h){try{var m="";do m+=$(h),h=h.return;while(h);return m}catch(N){return`
Error generating stack: `+N.message+`
`+N.stack}}function G(h,m){if(typeof h=="object"&&h!==null){var N=Lo.get(h);return N!==void 0?N:(m={value:h,source:m,stack:X(m)},Lo.set(h,m),m)}return{value:h,source:m,stack:X(m)}}function ee(h,m){ar[Da++]=oo,ar[Da++]=Dc,Dc=h,oo=m}function Y(h,m,N){Ns[ra++]=Kn,Ns[ra++]=ss,Ns[ra++]=ka,ka=h;var U=Kn;h=ss;var q=32-nr(U)-1;U&=~(1<<q),N+=1;var K=32-nr(m)+q;if(30<K){var xe=q-q%5;K=(U&(1<<xe)-1).toString(32),U>>=xe,q-=xe,Kn=1<<32-nr(m)+q|N<<q|U,ss=K+h}else Kn=1<<K|N<<q|U,ss=h}function ne(h){h.return!==null&&(ee(h,1),Y(h,1,0))}function ue(h){for(;h===Dc;)Dc=ar[--Da],ar[Da]=null,oo=ar[--Da],ar[Da]=null;for(;h===ka;)ka=Ns[--ra],Ns[ra]=null,ss=Ns[--ra],Ns[ra]=null,Kn=Ns[--ra],Ns[ra]=null}function de(h,m){S(ms,m),S(Oc,h),S(Mi,null),h=mm(m),_(Mi),S(Mi,h)}function ie(){_(Mi),_(Oc),_(ms)}function Me(h){h.memoizedState!==null&&S(Yl,h);var m=Mi.current,N=Jh(m,h.type);m!==N&&(S(Oc,h),S(Mi,N))}function ye(h){Oc.current===h&&(_(Mi),_(Oc)),Yl.current===h&&(_(Yl),kl?Gr._currentValue=Hr:Gr._currentValue2=Hr)}function ae(h){var m=Error(a(418,""));throw Pe(G(m,h)),cf}function _e(h,m){if(!is)throw Error(a(175));m0(h.stateNode,h.type,h.memoizedProps,m,h)||ae(h)}function Ke(h){for(xa=h.return;xa;)switch(xa.tag){case 5:case 13:bi=!1;return;case 27:case 3:bi=!0;return;default:xa=xa.return}}function Ge(h){if(!is||h!==xa)return!1;if(!ai)return Ke(h),ai=!0,!1;var m=h.tag;if(ii?m!==3&&m!==27&&(m!==5||mp(h.type)&&!rl(h.type,h.memoizedProps))&&Ha&&ae(h):m!==3&&(m!==5||mp(h.type)&&!rl(h.type,h.memoizedProps))&&Ha&&ae(h),Ke(h),m===13){if(!is)throw Error(a(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));Ha=fp(h)}else Ha=ii&&m===27?Cm(h.type,Ha):xa?u0(h.stateNode):null;return!0}function st(){is&&(Ha=xa=null,ai=!1)}function ft(){var h=lo;return h!==null&&(ls===null?ls=h:ls.push.apply(ls,h),lo=null),h}function Pe(h){lo===null?lo=[h]:lo.push(h)}function he(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}function ke(h,m,N){kl?(S(jc,m._currentValue),m._currentValue=N):(S(jc,m._currentValue2),m._currentValue2=N)}function Ee(h){var m=jc.current;kl?h._currentValue=m:h._currentValue2=m,_(jc)}function Le(h,m,N){for(;h!==null;){var U=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,U!==null&&(U.childLanes|=m)):U!==null&&(U.childLanes&m)!==m&&(U.childLanes|=m),h===N)break;h=h.return}}function Ie(h,m,N,U){var q=h.child;for(q!==null&&(q.return=h);q!==null;){var K=q.dependencies;if(K!==null){var xe=q.child;K=K.firstContext;e:for(;K!==null;){var fe=K;K=q;for(var pe=0;pe<m.length;pe++)if(fe.context===m[pe]){K.lanes|=N,fe=K.alternate,fe!==null&&(fe.lanes|=N),Le(K.return,N,h),U||(xe=null);break e}K=fe.next}}else if(q.tag===18){if(xe=q.return,xe===null)throw Error(a(341));xe.lanes|=N,K=xe.alternate,K!==null&&(K.lanes|=N),Le(xe,N,h),xe=null}else xe=q.child;if(xe!==null)xe.return=q;else for(xe=q;xe!==null;){if(xe===h){xe=null;break}if(q=xe.sibling,q!==null){q.return=xe.return,xe=q;break}xe=xe.return}q=xe}}function Et(h,m,N,U){h=null;for(var q=m,K=!1;q!==null;){if(!K){if((q.flags&524288)!==0)K=!0;else if((q.flags&262144)!==0)break}if(q.tag===10){var xe=q.alternate;if(xe===null)throw Error(a(387));if(xe=xe.memoizedProps,xe!==null){var fe=q.type;Rs(q.pendingProps.value,xe.value)||(h!==null?h.push(fe):h=[fe])}}else if(q===Yl.current){if(xe=q.alternate,xe===null)throw Error(a(387));xe.memoizedState.memoizedState!==q.memoizedState.memoizedState&&(h!==null?h.push(Gr):h=[Gr])}q=q.return}h!==null&&Ie(m,h,N,U),m.flags|=262144}function ct(h){for(h=h.firstContext;h!==null;){var m=h.context;if(!Rs(kl?m._currentValue:m._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function At(h){co=h,Qa=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Pt(h){return se(co,h)}function Se(h,m){return co===null&&At(h),se(h,m)}function se(h,m){var N=kl?m._currentValue:m._currentValue2;if(m={context:m,memoizedValue:N,next:null},Qa===null){if(h===null)throw Error(a(308));Qa=m,h.dependencies={lanes:0,firstContext:m},h.flags|=524288}else Qa=Qa.next=m;return N}function He(){return{controller:new qu,data:new Map,refCount:0}}function Ve(h){h.refCount--,h.refCount===0&&Pc(Xu,function(){h.controller.abort()})}function Te(h){h!==Wl&&h.next===null&&(Wl===null?Uc=Wl=h:Wl=Wl.next=h),dl=!0,Yu||(Yu=!0,Ot())}function ze(h,m){if(!Kl&&dl){Kl=!0;do for(var N=!1,U=Uc;U!==null;){if(h!==0){var q=U.pendingLanes;if(q===0)var K=0;else{var xe=U.suspendedLanes,fe=U.pingedLanes;K=(1<<31-nr(42|h)+1)-1,K&=q&~(xe&~fe),K=K&201326741?K&201326741|1:K?K|2:0}K!==0&&(N=!0,gt(U,K))}else K=jn,K=E(U,U===ei?K:0,U.cancelPendingCommit!==null||U.timeoutHandle!==Ba),(K&3)===0||T(U,K)||(N=!0,gt(U,K));U=U.next}while(N);Kl=!1}}function Nt(){Dt()}function Dt(){dl=Yu=!1;var h=0;uo!==0&&(gm()&&(h=uo),uo=0);for(var m=sa(),N=null,U=Uc;U!==null;){var q=U.next,K=Ft(U,m);K===0?(U.next=null,N===null?Uc=q:N.next=q,q===null&&(Wl=N)):(N=U,(h!==0||(K&3)!==0)&&(dl=!0)),U=q}ze(h)}function Ft(h,m){for(var N=h.suspendedLanes,U=h.pingedLanes,q=h.expirationTimes,K=h.pendingLanes&-62914561;0<K;){var xe=31-nr(K),fe=1<<xe,pe=q[xe];pe===-1?((fe&N)===0||(fe&U)!==0)&&(q[xe]=C(fe,m)):pe<=m&&(h.expiredLanes|=fe),K&=~fe}if(m=ei,N=jn,N=E(h,h===m?N:0,h.cancelPendingCommit!==null||h.timeoutHandle!==Ba),U=h.callbackNode,N===0||h===m&&(pi===2||pi===9)||h.cancelPendingCommit!==null)return U!==null&&U!==null&&Zd(U),h.callbackNode=null,h.callbackPriority=0;if((N&3)===0||T(h,N)){if(m=N&-N,m===h.callbackPriority)return m;switch(U!==null&&Zd(U),Q(N)){case 2:case 8:N=Vr;break;case 32:N=ir;break;case 268435456:N=jm;break;default:N=ir}return U=Xt.bind(null,h),N=lf(N,U),h.callbackPriority=m,h.callbackNode=N,m}return U!==null&&U!==null&&Zd(U),h.callbackPriority=2,h.callbackNode=null,2}function Xt(h,m){if(v!==0&&v!==5)return h.callbackNode=null,h.callbackPriority=0,null;var N=h.callbackNode;if(No()&&h.callbackNode!==N)return null;var U=jn;return U=E(h,h===ei?U:0,h.cancelPendingCommit!==null||h.timeoutHandle!==Ba),U===0?null:(Ou(h,U,m),Ft(h,sa()),h.callbackNode!=null&&h.callbackNode===N?Xt.bind(null,h):null)}function gt(h,m){if(No())return null;Ou(h,m,!0)}function Ot(){xm?Wg(function(){(bn&6)!==0?lf(Wa,Nt):Dt()}):lf(Wa,Nt)}function Wt(){return uo===0&&(uo=D()),uo}function Ae(h,m){if(zo===null){var N=zo=[];Io=0,Fi=Wt(),hl={status:"pending",value:void 0,then:function(U){N.push(U)}}}return Io++,m.then(Xe,Xe),m}function Xe(){if(--Io===0&&zo!==null){hl!==null&&(hl.status="fulfilled");var h=zo;zo=null,Fi=0,hl=null;for(var m=0;m<h.length;m++)(0,h[m])()}}function Mt(h,m){var N=[],U={status:"pending",value:null,reason:null,then:function(q){N.push(q)}};return h.then(function(){U.status="fulfilled",U.value=m;for(var q=0;q<N.length;q++)(0,N[q])(m)},function(q){for(U.status="rejected",U.reason=q,q=0;q<N.length;q++)(0,N[q])(void 0)}),U}function Ne(){var h=Ai.current;return h!==null?h:ei.pooledCache}function Qe(h,m){m===null?S(Ai,Ai.current):S(Ai,m.pool)}function bt(){var h=Ne();return h===null?null:{parent:kl?Bi._currentValue:Bi._currentValue2,pool:h}}function kt(h,m){if(Rs(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var N=Object.keys(h),U=Object.keys(m);if(N.length!==U.length)return!1;for(U=0;U<N.length;U++){var q=N[U];if(!gs.call(m,q)||!Rs(h[q],m[q]))return!1}return!0}function jt(h){return h=h.status,h==="fulfilled"||h==="rejected"}function xt(){}function Vt(h,m,N){switch(N=h[N],N===void 0?h.push(m):N!==m&&(m.then(xt,xt),m=N),m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Xn(h),h;default:if(typeof m.status=="string")m.then(xt,xt);else{if(h=ei,h!==null&&100<h.shellSuspendCounter)throw Error(a(482));h=m,h.status="pending",h.then(function(U){if(m.status==="pending"){var q=m;q.status="fulfilled",q.value=U}},function(U){if(m.status==="pending"){var q=m;q.status="rejected",q.reason=U}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Xn(h),h}throw Ls=m,ho}}function $t(){if(Ls===null)throw Error(a(459));var h=Ls;return Ls=null,h}function Xn(h){if(h===ho||h===mn)throw Error(a(483))}function Dn(){for(var h=fo,m=Qd=fo=0;m<h;){var N=Ds[m];Ds[m++]=null;var U=Ds[m];Ds[m++]=null;var q=Ds[m];Ds[m++]=null;var K=Ds[m];if(Ds[m++]=null,U!==null&&q!==null){var xe=U.pending;xe===null?q.next=q:(q.next=xe.next,xe.next=q),U.pending=q}K!==0&&Va(N,q,K)}}function ga(h,m,N,U){Ds[fo++]=h,Ds[fo++]=m,Ds[fo++]=N,Ds[fo++]=U,Qd|=U,h.lanes|=U,h=h.alternate,h!==null&&(h.lanes|=U)}function ta(h,m,N,U){return ga(h,m,N,U),Na(h)}function la(h,m){return ga(h,null,null,m),Na(h)}function Va(h,m,N){h.lanes|=N;var U=h.alternate;U!==null&&(U.lanes|=N);for(var q=!1,K=h.return;K!==null;)K.childLanes|=N,U=K.alternate,U!==null&&(U.childLanes|=N),K.tag===22&&(h=K.stateNode,h===null||h._visibility&1||(q=!0)),h=K,K=K.return;return h.tag===3?(K=h.stateNode,q&&m!==null&&(q=31-nr(N),h=K.hiddenUpdates,U=h[q],U===null?h[q]=[m]:U.push(m),m.lane=N|536870912),K):null}function Na(h){if(50<We)throw We=0,yt=null,Error(a(185));for(var m=h.return;m!==null;)h=m,m=h.return;return h.tag===3?h.stateNode:null}function _s(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function to(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Ra(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function un(h,m,N){var U=h.updateQueue;if(U===null)return null;if(U=U.shared,(bn&2)!==0){var q=U.pending;return q===null?m.next=m:(m.next=q.next,q.next=m),U.pending=m,m=Na(h),Va(h,null,N),m}return ga(h,U,m,N),Na(h)}function Ss(h,m,N){if(m=m.updateQueue,m!==null&&(m=m.shared,(N&4194048)!==0)){var U=m.lanes;U&=h.pendingLanes,N|=U,m.lanes=N,I(h,N)}}function Pi(h,m){var N=h.updateQueue,U=h.alternate;if(U!==null&&(U=U.updateQueue,N===U)){var q=null,K=null;if(N=N.firstBaseUpdate,N!==null){do{var xe={lane:N.lane,tag:N.tag,payload:N.payload,callback:null,next:null};K===null?q=K=xe:K=K.next=xe,N=N.next}while(N!==null);K===null?q=K=m:K=K.next=m}else q=K=m;N={baseState:U.baseState,firstBaseUpdate:q,lastBaseUpdate:K,shared:U.shared,callbacks:U.callbacks},h.updateQueue=N;return}h=N.lastBaseUpdate,h===null?N.firstBaseUpdate=m:h.next=m,N.lastBaseUpdate=m}function le(){if(rs){var h=hl;if(h!==null)throw h}}function ve(h,m,N,U){rs=!1;var q=h.updateQueue;Yr=!1;var K=q.firstBaseUpdate,xe=q.lastBaseUpdate,fe=q.shared.pending;if(fe!==null){q.shared.pending=null;var pe=fe,Ce=pe.next;pe.next=null,xe===null?K=Ce:xe.next=Ce,xe=pe;var qe=h.alternate;qe!==null&&(qe=qe.updateQueue,fe=qe.lastBaseUpdate,fe!==xe&&(fe===null?qe.firstBaseUpdate=Ce:fe.next=Ce,qe.lastBaseUpdate=pe))}if(K!==null){var pt=q.baseState;xe=0,qe=Ce=pe=null,fe=K;do{var It=fe.lane&-536870913,Bt=It!==fe.lane;if(Bt?(jn&It)===It:(U&It)===It){It!==0&&It===Fi&&(rs=!0),qe!==null&&(qe=qe.next={lane:0,tag:fe.tag,payload:fe.payload,callback:null,next:null});e:{var Vn=h,Sa=fe;It=m;var qn=N;switch(Sa.tag){case 1:if(Vn=Sa.payload,typeof Vn=="function"){pt=Vn.call(qn,pt,It);break e}pt=Vn;break e;case 3:Vn.flags=Vn.flags&-65537|128;case 0:if(Vn=Sa.payload,It=typeof Vn=="function"?Vn.call(qn,pt,It):Vn,It==null)break e;pt=zu({},pt,It);break e;case 2:Yr=!0}}It=fe.callback,It!==null&&(h.flags|=64,Bt&&(h.flags|=8192),Bt=q.callbacks,Bt===null?q.callbacks=[It]:Bt.push(It))}else Bt={lane:It,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},qe===null?(Ce=qe=Bt,pe=pt):qe=qe.next=Bt,xe|=It;if(fe=fe.next,fe===null){if(fe=q.shared.pending,fe===null)break;Bt=fe,fe=Bt.next,Bt.next=null,q.lastBaseUpdate=Bt,q.shared.pending=null}}while(!0);qe===null&&(pe=pt),q.baseState=pe,q.firstBaseUpdate=Ce,q.lastBaseUpdate=qe,K===null&&(q.shared.lanes=0),Ka|=xe,h.lanes=xe,h.memoizedState=pt}}function Ue(h,m){if(typeof h!="function")throw Error(a(191,h));h.call(m)}function tt(h,m){var N=h.callbacks;if(N!==null)for(h.callbacks=null,h=0;h<N.length;h++)Ue(N[h],m)}function at(h,m){h=Ki,S(Wu,h),S(sr,m),Ki=h|m.baseLanes}function ut(){S(Wu,Ki),S(sr,sr.current)}function Lt(){Ki=Wu.current,_(sr),_(Wu)}function mt(){throw Error(a(321))}function ce(h,m){if(m===null)return!1;for(var N=0;N<m.length&&N<h.length;N++)if(!Rs(h[N],m[N]))return!1;return!0}function we(h,m,N,U,q,K){return Qi=K,On=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,hn.H=h===null||h.memoizedState===null?Ku:Pm,Zl=!1,K=N(U,q),Zl=!1,Lc&&(K=De(m,N,U,q)),Re(h),K}function Re(h){hn.H=rr;var m=Qn!==null&&Qn.next!==null;if(Qi=0,Ui=Qn=On=null,po=!1,cu=0,Wr=null,m)throw Error(a(300));h===null||dn||(h=h.dependencies,h!==null&&ct(h)&&(dn=!0))}function De(h,m,N,U){On=h;var q=0;do{if(Lc&&(Wr=null),cu=0,Lc=!1,25<=q)throw Error(a(301));if(q+=1,Ui=Qn=null,h.updateQueue!=null){var K=h.updateQueue;K.lastEffect=null,K.events=null,K.stores=null,K.memoCache!=null&&(K.memoCache.index=0)}hn.H=_0,K=m(N,U)}while(Lc);return K}function Be(){var h=hn.H,m=h.useState()[0];return m=typeof m.then=="function"?Gt(m):m,h=h.useState()[0],(Qn!==null?Qn.memoizedState:null)!==h&&(On.flags|=1024),m}function Je(){var h=Yi!==0;return Yi=0,h}function dt(h,m,N){m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~N}function _t(h){if(po){for(h=h.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}po=!1}Qi=0,Ui=Qn=On=null,Lc=!1,cu=Yi=0,Wr=null}function vt(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ui===null?On.memoizedState=Ui=h:Ui=Ui.next=h,Ui}function Ut(){if(Qn===null){var h=On.alternate;h=h!==null?h.memoizedState:null}else h=Qn.next;var m=Ui===null?On.memoizedState:Ui.next;if(m!==null)Ui=m,Qn=h;else{if(h===null)throw On.alternate===null?Error(a(467)):Error(a(310));Qn=h,h={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},Ui===null?On.memoizedState=Ui=h:Ui=Ui.next=h}return Ui}function Ht(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gt(h){var m=cu;return cu+=1,Wr===null&&(Wr=[]),h=Vt(Wr,h,m),m=On,(Ui===null?m.memoizedState:Ui.next)===null&&(m=m.alternate,hn.H=m===null||m.memoizedState===null?Ku:Pm),h}function an(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Gt(h);if(h.$$typeof===Mc)return Pt(h)}throw Error(a(438,String(h)))}function sn(h){var m=null,N=On.updateQueue;if(N!==null&&(m=N.memoCache),m==null){var U=On.alternate;U!==null&&(U=U.updateQueue,U!==null&&(U=U.memoCache,U!=null&&(m={data:U.data.map(function(q){return q.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),N===null&&(N=Ht(),On.updateQueue=N),N.memoCache=m,N=m.data[m.index],N===void 0)for(N=m.data[m.index]=Array(h),U=0;U<h;U++)N[U]=Gd;return m.index++,N}function Ln(h,m){return typeof m=="function"?m(h):m}function Kt(h){var m=Ut();return Sn(m,Qn,h)}function Sn(h,m,N){var U=h.queue;if(U===null)throw Error(a(311));U.lastRenderedReducer=N;var q=h.baseQueue,K=U.pending;if(K!==null){if(q!==null){var xe=q.next;q.next=K.next,K.next=xe}m.baseQueue=q=K,U.pending=null}if(K=h.baseState,q===null)h.memoizedState=K;else{m=q.next;var fe=xe=null,pe=null,Ce=m,qe=!1;do{var pt=Ce.lane&-536870913;if(pt!==Ce.lane?(jn&pt)===pt:(Qi&pt)===pt){var It=Ce.revertLane;if(It===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),pt===Fi&&(qe=!0);else if((Qi&It)===It){Ce=Ce.next,It===Fi&&(qe=!0);continue}else pt={lane:0,revertLane:Ce.revertLane,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},pe===null?(fe=pe=pt,xe=K):pe=pe.next=pt,On.lanes|=It,Ka|=It;pt=Ce.action,Zl&&N(K,pt),K=Ce.hasEagerState?Ce.eagerState:N(K,pt)}else It={lane:pt,revertLane:Ce.revertLane,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},pe===null?(fe=pe=It,xe=K):pe=pe.next=It,On.lanes|=pt,Ka|=pt;Ce=Ce.next}while(Ce!==null&&Ce!==m);if(pe===null?xe=K:pe.next=fe,!Rs(K,h.memoizedState)&&(dn=!0,qe&&(N=hl,N!==null)))throw N;h.memoizedState=K,h.baseState=xe,h.baseQueue=pe,U.lastRenderedState=K}return q===null&&(U.lanes=0),[h.memoizedState,U.dispatch]}function Qt(h){var m=Ut(),N=m.queue;if(N===null)throw Error(a(311));N.lastRenderedReducer=h;var U=N.dispatch,q=N.pending,K=m.memoizedState;if(q!==null){N.pending=null;var xe=q=q.next;do K=h(K,xe.action),xe=xe.next;while(xe!==q);Rs(K,m.memoizedState)||(dn=!0),m.memoizedState=K,m.baseQueue===null&&(m.baseState=K),N.lastRenderedState=K}return[K,U]}function vi(h,m,N){var U=On,q=Ut(),K=ai;if(K){if(N===void 0)throw Error(a(407));N=N()}else N=m();var xe=!Rs((Qn||q).memoizedState,N);xe&&(q.memoizedState=N,dn=!0),q=q.queue;var fe=na.bind(null,U,q,h);if(oc(2048,8,fe,[h]),q.getSnapshot!==m||xe||Ui!==null&&Ui.memoizedState.tag&1){if(U.flags|=2048,rc(9,el(),Tn.bind(null,U,q,N,m),null),ei===null)throw Error(a(349));K||(Qi&124)!==0||En(U,m,N)}return N}function En(h,m,N){h.flags|=16384,h={getSnapshot:m,value:N},m=On.updateQueue,m===null?(m=Ht(),On.updateQueue=m,m.stores=[h]):(N=m.stores,N===null?m.stores=[h]:N.push(h))}function Tn(h,m,N,U){m.value=N,m.getSnapshot=U,yn(m)&&$n(h)}function na(h,m,N){return N(function(){yn(m)&&$n(h)})}function yn(h){var m=h.getSnapshot;h=h.value;try{var N=m();return!Rs(h,N)}catch{return!0}}function $n(h){var m=la(h,2);m!==null&&Us(m,h,2)}function Gn(h){var m=vt();if(typeof h=="function"){var N=h;if(h=N(),Zl){J(!0);try{N()}finally{J(!1)}}}return m.memoizedState=m.baseState=h,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:h},m}function ha(h,m,N,U){return h.baseState=N,Sn(h,Qn,typeof U=="function"?U:Ln)}function Ei(h,m,N,U,q){if(Td(h))throw Error(a(485));if(h=m.action,h!==null){var K={payload:q,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(xe){K.listeners.push(xe)}};hn.T!==null?N(!0):K.isTransition=!1,U(K),N=m.pending,N===null?(K.next=m.pending=K,ia(m,K)):(K.next=N.next,m.pending=N.next=K)}}function ia(h,m){var N=m.action,U=m.payload,q=h.state;if(m.isTransition){var K=hn.T,xe={};hn.T=xe;try{var fe=N(q,U),pe=hn.S;pe!==null&&pe(xe,fe),ds(h,m,fe)}catch(Ce){wo(h,m,Ce)}finally{hn.T=K}}else try{K=N(q,U),ds(h,m,K)}catch(Ce){wo(h,m,Ce)}}function ds(h,m,N){N!==null&&typeof N=="object"&&typeof N.then=="function"?N.then(function(U){Xs(h,m,U)},function(U){return wo(h,m,U)}):Xs(h,m,N)}function Xs(h,m,N){m.status="fulfilled",m.value=N,_d(m),h.state=N,m=h.pending,m!==null&&(N=m.next,N===m?h.pending=null:(N=N.next,m.next=N,ia(h,N)))}function wo(h,m,N){var U=h.pending;if(h.pending=null,U!==null){U=U.next;do m.status="rejected",m.reason=N,_d(m),m=m.next;while(m!==U)}h.action=null}function _d(h){h=h.listeners;for(var m=0;m<h.length;m++)(0,h[m])()}function Sd(h,m){return m}function Ah(h,m){if(ai){var N=ei.formState;if(N!==null){e:{var U=On;if(ai){if(Ha){var q=l0(Ha,bi);if(q){Ha=u0(q),U=c0(q);break e}}ae(U)}U=!1}U&&(m=N[0])}}N=vt(),N.memoizedState=N.baseState=m,U={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sd,lastRenderedState:m},N.queue=U,N=Tu.bind(null,On,U),U.dispatch=N,U=Gn(!1);var K=Zc.bind(null,On,!1,U.queue);return U=vt(),q={state:m,dispatch:null,action:h,pending:null},U.queue=q,N=Ei.bind(null,On,q,K,N),q.dispatch=N,U.memoizedState=h,[m,N,!1]}function Bf(h){var m=Ut();return am(m,Qn,h)}function am(h,m,N){if(m=Sn(h,m,Sd)[0],h=Kt(Ln)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var U=Gt(m)}catch(xe){throw xe===ho?mn:xe}else U=m;m=Ut();var q=m.queue,K=q.dispatch;return N!==m.memoizedState&&(On.flags|=2048,rc(9,el(),Nh.bind(null,q,N),null)),[U,K,h]}function Nh(h,m){h.action=m}function Rh(h){var m=Ut(),N=Qn;if(N!==null)return am(m,N,h);Ut(),m=m.memoizedState,N=Ut();var U=N.queue.dispatch;return N.memoizedState=h,[m,U,!1]}function rc(h,m,N,U){return h={tag:h,create:N,deps:U,inst:m,next:null},m=On.updateQueue,m===null&&(m=Ht(),On.updateQueue=m),N=m.lastEffect,N===null?m.lastEffect=h.next=h:(U=N.next,N.next=h,h.next=U,m.lastEffect=h),h}function el(){return{destroy:void 0,resource:void 0}}function Kc(){return Ut().memoizedState}function Ed(h,m,N,U){var q=vt();U=U===void 0?null:U,On.flags|=h,q.memoizedState=rc(1|m,el(),N,U)}function oc(h,m,N,U){var q=Ut();U=U===void 0?null:U;var K=q.memoizedState.inst;Qn!==null&&U!==null&&ce(U,Qn.memoizedState.deps)?q.memoizedState=rc(m,K,N,U):(On.flags|=h,q.memoizedState=rc(1|m,K,N,U))}function Ff(h,m){Ed(8390656,8,h,m)}function _u(h,m){oc(2048,8,h,m)}function tl(h,m){return oc(4,2,h,m)}function wd(h,m){return oc(4,4,h,m)}function Su(h,m){if(typeof m=="function"){h=h();var N=m(h);return function(){typeof N=="function"?N():m(null)}}if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function Ml(h,m,N){N=N!=null?N.concat([h]):null,oc(4,4,Su.bind(null,m,h),N)}function Dh(){}function Oh(h,m){var N=Ut();m=m===void 0?null:m;var U=N.memoizedState;return m!==null&&ce(m,U[1])?U[0]:(N.memoizedState=[h,m],h)}function kf(h,m){var N=Ut();m=m===void 0?null:m;var U=N.memoizedState;if(m!==null&&ce(m,U[1]))return U[0];if(U=h(),Zl){J(!0);try{h()}finally{J(!1)}}return N.memoizedState=[U,m],U}function Tl(h,m,N){return N===void 0||(Qi&1073741824)!==0?h.memoizedState=m:(h.memoizedState=N,h=vr(),On.lanes|=h,Ka|=h,N)}function Eu(h,m,N,U){return Rs(N,m)?N:sr.current!==null?(h=Tl(h,N,U),Rs(h,m)||(dn=!0),h):(Qi&42)===0?(dn=!0,h.memoizedState=N):(h=vr(),On.lanes|=h,Ka|=h,m)}function Md(h,m,N,U,q){var K=ol();Cs(K!==0&&8>K?K:8);var xe=hn.T,fe={};hn.T=fe,Zc(h,!1,m,N);try{var pe=q(),Ce=hn.S;if(Ce!==null&&Ce(fe,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var qe=Mt(pe,U);Al(h,m,qe,Ms(h))}else Al(h,m,U,Ms(h))}catch(pt){Al(h,m,{then:function(){},status:"rejected",reason:pt},Ms())}finally{Cs(K),hn.T=xe}}function Ys(h){var m=h.memoizedState;if(m!==null)return m;m={memoizedState:Hr,baseState:Hr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:Hr},next:null};var N={};return m.next={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:N},next:null},h.memoizedState=m,h=h.alternate,h!==null&&(h.memoizedState=m),m}function Cl(){return Pt(Gr)}function wu(){return Ut().memoizedState}function Mu(){return Ut().memoizedState}function Lg(h){for(var m=h.return;m!==null;){switch(m.tag){case 24:case 3:var N=Ms();h=Ra(N);var U=un(m,h,N);U!==null&&(Us(U,m,N),Ss(U,m,N)),m={cache:He()},h.payload=m;return}m=m.return}}function lc(h,m,N){var U=Ms();N={lane:U,revertLane:0,action:N,hasEagerState:!1,eagerState:null,next:null},Td(h)?sm(m,N):(N=ta(h,m,N,U),N!==null&&(Us(N,h,U),zg(N,m,U)))}function Tu(h,m,N){var U=Ms();Al(h,m,N,U)}function Al(h,m,N,U){var q={lane:U,revertLane:0,action:N,hasEagerState:!1,eagerState:null,next:null};if(Td(h))sm(m,q);else{var K=h.alternate;if(h.lanes===0&&(K===null||K.lanes===0)&&(K=m.lastRenderedReducer,K!==null))try{var xe=m.lastRenderedState,fe=K(xe,N);if(q.hasEagerState=!0,q.eagerState=fe,Rs(fe,xe))return ga(h,m,q,0),ei===null&&Dn(),!1}catch{}finally{}if(N=ta(h,m,q,U),N!==null)return Us(N,h,U),zg(N,m,U),!0}return!1}function Zc(h,m,N,U){if(U={lane:2,revertLane:Wt(),action:U,hasEagerState:!1,eagerState:null,next:null},Td(h)){if(m)throw Error(a(479))}else m=ta(h,N,U,2),m!==null&&Us(m,h,2)}function Td(h){var m=h.alternate;return h===On||m!==null&&m===On}function sm(h,m){Lc=po=!0;var N=h.pending;N===null?m.next=m:(m.next=N.next,N.next=m),h.pending=m}function zg(h,m,N){if((N&4194048)!==0){var U=m.lanes;U&=h.pendingLanes,N|=U,m.lanes=N,I(h,N)}}function es(h){var m=Zu;return Zu+=1,ki===null&&(ki=[]),Vt(ki,h,m)}function Qc(h,m){m=m.props.ref,h.ref=m!==void 0?m:null}function jh(h,m){throw m.$$typeof===pm?Error(a(525)):(h=Object.prototype.toString.call(m),Error(a(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h)))}function rm(h){var m=h._init;return m(h._payload)}function om(h){function m($e,Ye){if(h){var lt=$e.deletions;lt===null?($e.deletions=[Ye],$e.flags|=16):lt.push(Ye)}}function N($e,Ye){if(!h)return null;for(;Ye!==null;)m($e,Ye),Ye=Ye.sibling;return null}function U($e){for(var Ye=new Map;$e!==null;)$e.key!==null?Ye.set($e.key,$e):Ye.set($e.index,$e),$e=$e.sibling;return Ye}function q($e,Ye){return $e=Bl($e,Ye),$e.index=0,$e.sibling=null,$e}function K($e,Ye,lt){return $e.index=lt,h?(lt=$e.alternate,lt!==null?(lt=lt.index,lt<Ye?($e.flags|=67108866,Ye):lt):($e.flags|=67108866,Ye)):($e.flags|=1048576,Ye)}function xe($e){return h&&$e.alternate===null&&($e.flags|=67108866),$e}function fe($e,Ye,lt,zt){return Ye===null||Ye.tag!==6?(Ye=su(lt,$e.mode,zt),Ye.return=$e,Ye):(Ye=q(Ye,lt),Ye.return=$e,Ye)}function pe($e,Ye,lt,zt){var tn=lt.type;return tn===wc?qe($e,Ye,lt.props.children,zt,lt.key):Ye!==null&&(Ye.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===$s&&rm(tn)===Ye.type)?(Ye=q(Ye,lt.props),Qc(Ye,lt),Ye.return=$e,Ye):(Ye=Pu(lt.type,lt.key,lt.props,null,$e.mode,zt),Qc(Ye,lt),Ye.return=$e,Ye)}function Ce($e,Ye,lt,zt){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==lt.containerInfo||Ye.stateNode.implementation!==lt.implementation?(Ye=Uu(lt,$e.mode,zt),Ye.return=$e,Ye):(Ye=q(Ye,lt.children||[]),Ye.return=$e,Ye)}function qe($e,Ye,lt,zt,tn){return Ye===null||Ye.tag!==7?(Ye=Ro(lt,$e.mode,zt,tn),Ye.return=$e,Ye):(Ye=q(Ye,lt),Ye.return=$e,Ye)}function pt($e,Ye,lt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ye=su(""+Ye,$e.mode,lt),Ye.return=$e,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case kr:return lt=Pu(Ye.type,Ye.key,Ye.props,null,$e.mode,lt),Qc(lt,Ye),lt.return=$e,lt;case Fl:return Ye=Uu(Ye,$e.mode,lt),Ye.return=$e,Ye;case $s:var zt=Ye._init;return Ye=zt(Ye._payload),pt($e,Ye,lt)}if(Cc(Ye)||g(Ye))return Ye=Ro(Ye,$e.mode,lt,null),Ye.return=$e,Ye;if(typeof Ye.then=="function")return pt($e,es(Ye),lt);if(Ye.$$typeof===Mc)return pt($e,Se($e,Ye),lt);jh($e,Ye)}return null}function It($e,Ye,lt,zt){var tn=Ye!==null?Ye.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return tn!==null?null:fe($e,Ye,""+lt,zt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case kr:return lt.key===tn?pe($e,Ye,lt,zt):null;case Fl:return lt.key===tn?Ce($e,Ye,lt,zt):null;case $s:return tn=lt._init,lt=tn(lt._payload),It($e,Ye,lt,zt)}if(Cc(lt)||g(lt))return tn!==null?null:qe($e,Ye,lt,zt,null);if(typeof lt.then=="function")return It($e,Ye,es(lt),zt);if(lt.$$typeof===Mc)return It($e,Ye,Se($e,lt),zt);jh($e,lt)}return null}function Bt($e,Ye,lt,zt,tn){if(typeof zt=="string"&&zt!==""||typeof zt=="number"||typeof zt=="bigint")return $e=$e.get(lt)||null,fe(Ye,$e,""+zt,tn);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case kr:return $e=$e.get(zt.key===null?lt:zt.key)||null,pe(Ye,$e,zt,tn);case Fl:return $e=$e.get(zt.key===null?lt:zt.key)||null,Ce(Ye,$e,zt,tn);case $s:var ca=zt._init;return zt=ca(zt._payload),Bt($e,Ye,lt,zt,tn)}if(Cc(zt)||g(zt))return $e=$e.get(lt)||null,qe(Ye,$e,zt,tn,null);if(typeof zt.then=="function")return Bt($e,Ye,lt,es(zt),tn);if(zt.$$typeof===Mc)return Bt($e,Ye,lt,Se(Ye,zt),tn);jh(Ye,zt)}return null}function Vn($e,Ye,lt,zt){for(var tn=null,ca=null,Pn=Ye,Gi=Ye=0,Fs=null;Pn!==null&&Gi<lt.length;Gi++){Pn.index>Gi?(Fs=Pn,Pn=null):Fs=Pn.sibling;var Vi=It($e,Pn,lt[Gi],zt);if(Vi===null){Pn===null&&(Pn=Fs);break}h&&Pn&&Vi.alternate===null&&m($e,Pn),Ye=K(Vi,Ye,Gi),ca===null?tn=Vi:ca.sibling=Vi,ca=Vi,Pn=Fs}if(Gi===lt.length)return N($e,Pn),ai&&ee($e,Gi),tn;if(Pn===null){for(;Gi<lt.length;Gi++)Pn=pt($e,lt[Gi],zt),Pn!==null&&(Ye=K(Pn,Ye,Gi),ca===null?tn=Pn:ca.sibling=Pn,ca=Pn);return ai&&ee($e,Gi),tn}for(Pn=U(Pn);Gi<lt.length;Gi++)Fs=Bt(Pn,$e,Gi,lt[Gi],zt),Fs!==null&&(h&&Fs.alternate!==null&&Pn.delete(Fs.key===null?Gi:Fs.key),Ye=K(Fs,Ye,Gi),ca===null?tn=Fs:ca.sibling=Fs,ca=Fs);return h&&Pn.forEach(function($u){return m($e,$u)}),ai&&ee($e,Gi),tn}function Sa($e,Ye,lt,zt){if(lt==null)throw Error(a(151));for(var tn=null,ca=null,Pn=Ye,Gi=Ye=0,Fs=null,Vi=lt.next();Pn!==null&&!Vi.done;Gi++,Vi=lt.next()){Pn.index>Gi?(Fs=Pn,Pn=null):Fs=Pn.sibling;var $u=It($e,Pn,Vi.value,zt);if($u===null){Pn===null&&(Pn=Fs);break}h&&Pn&&$u.alternate===null&&m($e,Pn),Ye=K($u,Ye,Gi),ca===null?tn=$u:ca.sibling=$u,ca=$u,Pn=Fs}if(Vi.done)return N($e,Pn),ai&&ee($e,Gi),tn;if(Pn===null){for(;!Vi.done;Gi++,Vi=lt.next())Vi=pt($e,Vi.value,zt),Vi!==null&&(Ye=K(Vi,Ye,Gi),ca===null?tn=Vi:ca.sibling=Vi,ca=Vi);return ai&&ee($e,Gi),tn}for(Pn=U(Pn);!Vi.done;Gi++,Vi=lt.next())Vi=Bt(Pn,$e,Gi,Vi.value,zt),Vi!==null&&(h&&Vi.alternate!==null&&Pn.delete(Vi.key===null?Gi:Vi.key),Ye=K(Vi,Ye,Gi),ca===null?tn=Vi:ca.sibling=Vi,ca=Vi);return h&&Pn.forEach(function(yE){return m($e,yE)}),ai&&ee($e,Gi),tn}function qn($e,Ye,lt,zt){if(typeof lt=="object"&&lt!==null&&lt.type===wc&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case kr:e:{for(var tn=lt.key;Ye!==null;){if(Ye.key===tn){if(tn=lt.type,tn===wc){if(Ye.tag===7){N($e,Ye.sibling),zt=q(Ye,lt.props.children),zt.return=$e,$e=zt;break e}}else if(Ye.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===$s&&rm(tn)===Ye.type){N($e,Ye.sibling),zt=q(Ye,lt.props),Qc(zt,lt),zt.return=$e,$e=zt;break e}N($e,Ye);break}else m($e,Ye);Ye=Ye.sibling}lt.type===wc?(zt=Ro(lt.props.children,$e.mode,zt,lt.key),zt.return=$e,$e=zt):(zt=Pu(lt.type,lt.key,lt.props,null,$e.mode,zt),Qc(zt,lt),zt.return=$e,$e=zt)}return xe($e);case Fl:e:{for(tn=lt.key;Ye!==null;){if(Ye.key===tn)if(Ye.tag===4&&Ye.stateNode.containerInfo===lt.containerInfo&&Ye.stateNode.implementation===lt.implementation){N($e,Ye.sibling),zt=q(Ye,lt.children||[]),zt.return=$e,$e=zt;break e}else{N($e,Ye);break}else m($e,Ye);Ye=Ye.sibling}zt=Uu(lt,$e.mode,zt),zt.return=$e,$e=zt}return xe($e);case $s:return tn=lt._init,lt=tn(lt._payload),qn($e,Ye,lt,zt)}if(Cc(lt))return Vn($e,Ye,lt,zt);if(g(lt)){if(tn=g(lt),typeof tn!="function")throw Error(a(150));return lt=tn.call(lt),Sa($e,Ye,lt,zt)}if(typeof lt.then=="function")return qn($e,Ye,es(lt),zt);if(lt.$$typeof===Mc)return qn($e,Ye,Se($e,lt),zt);jh($e,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Ye!==null&&Ye.tag===6?(N($e,Ye.sibling),zt=q(Ye,lt),zt.return=$e,$e=zt):(N($e,Ye),zt=su(lt,$e.mode,zt),zt.return=$e,$e=zt),xe($e)):N($e,Ye)}return function($e,Ye,lt,zt){try{Zu=0;var tn=qn($e,Ye,lt,zt);return ki=null,tn}catch(Pn){if(Pn===ho||Pn===mn)throw Pn;var ca=t(29,Pn,null,$e.mode);return ca.lanes=zt,ca.return=$e,ca}finally{}}}function cc(h){var m=h.alternate;S(Cn,Cn.current&1),S(Ni,h),Bo===null&&(m===null||sr.current!==null||m.memoizedState!==null)&&(Bo=h)}function Cd(h){if(h.tag===22){if(S(Cn,Cn.current),S(Ni,h),Bo===null){var m=h.alternate;m!==null&&m.memoizedState!==null&&(Bo=h)}}else nl()}function nl(){S(Cn,Cn.current),S(Ni,Ni.current)}function Nl(h){_(Ni),Bo===h&&(Bo=null),_(Cn)}function Ph(h){for(var m=h;m!==null;){if(m.tag===13){var N=m.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||af(N)||up(N)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function Hf(h,m,N,U){m=h.memoizedState,N=N(U,m),N=N==null?m:zu({},m,N),h.memoizedState=N,h.lanes===0&&(h.updateQueue.baseState=N)}function Gf(h,m,N,U,q,K,xe){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(U,K,xe):m.prototype&&m.prototype.isPureReactComponent?!kt(N,U)||!kt(q,K):!0}function Ad(h,m,N,U){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(N,U),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(N,U),m.state!==h&&zn.enqueueReplaceState(m,m.state,null)}function Jc(h,m){var N=m;if("ref"in m){N={};for(var U in m)U!=="ref"&&(N[U]=m[U])}if(h=h.defaultProps){N===m&&(N=zu({},N));for(var q in h)N[q]===void 0&&(N[q]=h[q])}return N}function Nd(h,m){try{var N=h.onUncaughtError;N(m.value,{componentStack:m.stack})}catch(U){setTimeout(function(){throw U})}}function Vf(h,m,N){try{var U=h.onCaughtError;U(N.value,{componentStack:N.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(q){setTimeout(function(){throw q})}}function Rd(h,m,N){return N=Ra(N),N.tag=3,N.payload={element:null},N.callback=function(){Nd(h,m)},N}function lm(h){return h=Ra(h),h.tag=3,h}function qf(h,m,N,U){var q=N.type.getDerivedStateFromError;if(typeof q=="function"){var K=U.value;h.payload=function(){return q(K)},h.callback=function(){Vf(m,N,U)}}var xe=N.stateNode;xe!==null&&typeof xe.componentDidCatch=="function"&&(h.callback=function(){Vf(m,N,U),typeof q!="function"&&(p===null?p=new Set([this]):p.add(this));var fe=U.stack;this.componentDidCatch(U.value,{componentStack:fe!==null?fe:""})})}function Ig(h,m,N,U,q){if(N.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){if(m=N.alternate,m!==null&&Et(m,N,q,!0),N=Ni.current,N!==null){switch(N.tag){case 13:return Bo===null?ya():N.alternate===null&&_a===0&&(_a=3),N.flags&=-257,N.flags|=65536,N.lanes=q,U===xi?N.flags|=16384:(m=N.updateQueue,m===null?N.updateQueue=new Set([U]):m.add(U),Ir(h,U,q)),!1;case 22:return N.flags|=65536,U===xi?N.flags|=16384:(m=N.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([U])},N.updateQueue=m):(N=m.retryQueue,N===null?m.retryQueue=new Set([U]):N.add(U)),Ir(h,U,q)),!1}throw Error(a(435,N.tag))}return Ir(h,U,q),ya(),!1}if(ai)return m=Ni.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=q,U!==cf&&(h=Error(a(422),{cause:U}),Pe(G(h,N)))):(U!==cf&&(m=Error(a(423),{cause:U}),Pe(G(m,N))),h=h.current.alternate,h.flags|=65536,q&=-q,h.lanes|=q,U=G(U,N),q=Rd(h.stateNode,U,q),Pi(h,q),_a!==4&&(_a=2)),!1;var K=Error(a(520),{cause:U});if(K=G(K,N),Kr===null?Kr=[K]:Kr.push(K),_a!==4&&(_a=2),m===null)return!0;U=G(U,N),N=m;do{switch(N.tag){case 3:return N.flags|=65536,h=q&-q,N.lanes|=h,h=Rd(N.stateNode,U,h),Pi(N,h),!1;case 1:if(m=N.type,K=N.stateNode,(N.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(p===null||!p.has(K))))return N.flags|=65536,q&=-q,N.lanes|=q,q=lm(q),qf(q,h,N,U),Pi(N,q),!1}N=N.return}while(N!==null);return!1}function va(h,m,N,U){m.child=h===null?pl(m,null,N,U):Er(m,h.child,N,U)}function Xf(h,m,N,U,q){N=N.render;var K=m.ref;if("ref"in U){var xe={};for(var fe in U)fe!=="ref"&&(xe[fe]=U[fe])}else xe=U;return At(m),U=we(h,m,N,xe,K,q),fe=Je(),h!==null&&!dn?(dt(h,m,q),Or(h,m,q)):(ai&&fe&&ne(m),m.flags|=1,va(h,m,U,q),m.child)}function Bg(h,m,N,U,q){if(h===null){var K=N.type;return typeof K=="function"&&!fm(K)&&K.defaultProps===void 0&&N.compare===null?(m.tag=15,m.type=K,cm(h,m,K,U,q)):(h=Pu(N.type,null,U,m,m.mode,q),h.ref=m.ref,h.return=m,m.child=h)}if(K=h.child,!fc(h,q)){var xe=K.memoizedProps;if(N=N.compare,N=N!==null?N:kt,N(xe,U)&&h.ref===m.ref)return Or(h,m,q)}return m.flags|=1,h=Bl(K,U),h.ref=m.ref,h.return=m,m.child=h}function cm(h,m,N,U,q){if(h!==null){var K=h.memoizedProps;if(kt(K,U)&&h.ref===m.ref)if(dn=!1,m.pendingProps=U=K,fc(h,q))(h.flags&131072)!==0&&(dn=!0);else return m.lanes=h.lanes,Or(h,m,q)}return dc(h,m,N,U,q)}function uc(h,m,N){var U=m.pendingProps,q=U.children,K=h!==null?h.memoizedState:null;if(U.mode==="hidden"){if((m.flags&128)!==0){if(U=K!==null?K.baseLanes|N:N,h!==null){for(q=m.child=h.child,K=0;q!==null;)K=K|q.lanes|q.childLanes,q=q.sibling;m.childLanes=K&~U}else m.childLanes=0,m.child=null;return Rl(h,m,U,N)}if((N&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},h!==null&&Qe(m,K!==null?K.cachePool:null),K!==null?at(m,K):ut(),Cd(m);else return m.lanes=m.childLanes=536870912,Rl(h,m,K!==null?K.baseLanes|N:N,N)}else K!==null?(Qe(m,K.cachePool),at(m,K),nl(),m.memoizedState=null):(h!==null&&Qe(m,null),ut(),nl());return va(h,m,q,N),m.child}function Rl(h,m,N,U){var q=Ne();return q=q===null?null:{parent:kl?Bi._currentValue:Bi._currentValue2,pool:q},m.memoizedState={baseLanes:N,cachePool:q},h!==null&&Qe(m,null),ut(),Cd(m),h!==null&&Et(h,m,U,!0),null}function $c(h,m){var N=m.ref;if(N===null)h!==null&&h.ref!==null&&(m.flags|=4194816);else{if(typeof N!="function"&&typeof N!="object")throw Error(a(284));(h===null||h.ref!==N)&&(m.flags|=4194816)}}function dc(h,m,N,U,q){return At(m),N=we(h,m,N,U,void 0,q),U=Je(),h!==null&&!dn?(dt(h,m,q),Or(h,m,q)):(ai&&U&&ne(m),m.flags|=1,va(h,m,N,q),m.child)}function Dd(h,m,N,U,q,K){return At(m),m.updateQueue=null,N=De(m,U,N,q),Re(h),U=Je(),h!==null&&!dn?(dt(h,m,K),Or(h,m,K)):(ai&&U&&ne(m),m.flags|=1,va(h,m,N,K),m.child)}function Od(h,m,N,U,q){if(At(m),m.stateNode===null){var K=ql,xe=N.contextType;typeof xe=="object"&&xe!==null&&(K=Pt(xe)),K=new N(U,K),m.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,K.updater=zn,m.stateNode=K,K._reactInternals=m,K=m.stateNode,K.props=U,K.state=m.memoizedState,K.refs={},_s(m),xe=N.contextType,K.context=typeof xe=="object"&&xe!==null?Pt(xe):ql,K.state=m.memoizedState,xe=N.getDerivedStateFromProps,typeof xe=="function"&&(Hf(m,N,xe,U),K.state=m.memoizedState),typeof N.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(xe=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),xe!==K.state&&zn.enqueueReplaceState(K,K.state,null),ve(m,U,K,q),le(),K.state=m.memoizedState),typeof K.componentDidMount=="function"&&(m.flags|=4194308),U=!0}else if(h===null){K=m.stateNode;var fe=m.memoizedProps,pe=Jc(N,fe);K.props=pe;var Ce=K.context,qe=N.contextType;xe=ql,typeof qe=="object"&&qe!==null&&(xe=Pt(qe));var pt=N.getDerivedStateFromProps;qe=typeof pt=="function"||typeof K.getSnapshotBeforeUpdate=="function",fe=m.pendingProps!==fe,qe||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(fe||Ce!==xe)&&Ad(m,K,U,xe),Yr=!1;var It=m.memoizedState;K.state=It,ve(m,U,K,q),le(),Ce=m.memoizedState,fe||It!==Ce||Yr?(typeof pt=="function"&&(Hf(m,N,pt,U),Ce=m.memoizedState),(pe=Yr||Gf(m,N,pe,U,It,Ce,xe))?(qe||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(m.flags|=4194308)):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=U,m.memoizedState=Ce),K.props=U,K.state=Ce,K.context=xe,U=pe):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),U=!1)}else{K=m.stateNode,to(h,m),xe=m.memoizedProps,qe=Jc(N,xe),K.props=qe,pt=m.pendingProps,It=K.context,Ce=N.contextType,pe=ql,typeof Ce=="object"&&Ce!==null&&(pe=Pt(Ce)),fe=N.getDerivedStateFromProps,(Ce=typeof fe=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(xe!==pt||It!==pe)&&Ad(m,K,U,pe),Yr=!1,It=m.memoizedState,K.state=It,ve(m,U,K,q),le();var Bt=m.memoizedState;xe!==pt||It!==Bt||Yr||h!==null&&h.dependencies!==null&&ct(h.dependencies)?(typeof fe=="function"&&(Hf(m,N,fe,U),Bt=m.memoizedState),(qe=Yr||Gf(m,N,qe,U,It,Bt,pe)||h!==null&&h.dependencies!==null&&ct(h.dependencies))?(Ce||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(U,Bt,pe),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(U,Bt,pe)),typeof K.componentDidUpdate=="function"&&(m.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof K.componentDidUpdate!="function"||xe===h.memoizedProps&&It===h.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||xe===h.memoizedProps&&It===h.memoizedState||(m.flags|=1024),m.memoizedProps=U,m.memoizedState=Bt),K.props=U,K.state=Bt,K.context=pe,U=qe):(typeof K.componentDidUpdate!="function"||xe===h.memoizedProps&&It===h.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||xe===h.memoizedProps&&It===h.memoizedState||(m.flags|=1024),U=!1)}return K=U,$c(h,m),U=(m.flags&128)!==0,K||U?(K=m.stateNode,N=U&&typeof N.getDerivedStateFromError!="function"?null:K.render(),m.flags|=1,h!==null&&U?(m.child=Er(m,h.child,null,q),m.child=Er(m,null,N,q)):va(h,m,N,q),m.memoizedState=K.state,h=m.child):h=Or(h,m,q),h}function hc(h,m,N,U){return st(),m.flags|=256,va(h,m,N,U),m.child}function hs(h){return{baseLanes:h,cachePool:bt()}}function Cu(h,m,N){return h=h!==null?h.childLanes&~N:0,m&&(h|=ys),h}function Yf(h,m,N){var U=m.pendingProps,q=!1,K=(m.flags&128)!==0,xe;if((xe=K)||(xe=h!==null&&h.memoizedState===null?!1:(Cn.current&2)!==0),xe&&(q=!0,m.flags&=-129),xe=(m.flags&32)!==0,m.flags&=-33,h===null){if(ai){if(q?cc(m):nl(),ai){var fe=Ha,pe;(pe=fe)&&(fe=$v(fe,bi),fe!==null?(m.memoizedState={dehydrated:fe,treeContext:ka!==null?{id:Kn,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},pe=t(18,null,null,0),pe.stateNode=fe,pe.return=m,m.child=pe,xa=m,Ha=null,pe=!0):pe=!1),pe||ae(m)}if(fe=m.memoizedState,fe!==null&&(fe=fe.dehydrated,fe!==null))return up(fe)?m.lanes=32:m.lanes=536870912,null;Nl(m)}return fe=U.children,U=U.fallback,q?(nl(),q=m.mode,fe=eu({mode:"hidden",children:fe},q),U=Ro(U,q,N,null),fe.return=m,U.return=m,fe.sibling=U,m.child=fe,q=m.child,q.memoizedState=hs(N),q.childLanes=Cu(h,xe,N),m.memoizedState=ba,U):(cc(m),Dl(m,fe))}if(pe=h.memoizedState,pe!==null&&(fe=pe.dehydrated,fe!==null)){if(K)m.flags&256?(cc(m),m.flags&=-257,m=Uh(h,m,N)):m.memoizedState!==null?(nl(),m.child=h.child,m.flags|=128,m=null):(nl(),q=U.fallback,fe=m.mode,U=eu({mode:"visible",children:U.children},fe),q=Ro(q,fe,N,null),q.flags|=2,U.return=m,q.return=m,U.sibling=q,m.child=U,Er(m,h.child,null,N),U=m.child,U.memoizedState=hs(N),U.childLanes=Cu(h,xe,N),m.memoizedState=ba,m=q);else if(cc(m),up(fe))xe=Tm(fe).digest,U=Error(a(419)),U.stack="",U.digest=xe,Pe({value:U,source:null,stack:null}),m=Uh(h,m,N);else if(dn||Et(h,m,N,!1),xe=(N&h.childLanes)!==0,dn||xe){if(xe=ei,xe!==null&&(U=N&-N,U=(U&42)!==0?1:W(U),U=(U&(xe.suspendedLanes|N))!==0?0:U,U!==0&&U!==pe.retryLane))throw pe.retryLane=U,la(h,U),Us(xe,h,U),gn;af(fe)||ya(),m=Uh(h,m,N)}else af(fe)?(m.flags|=192,m.child=h.child,m=null):(h=pe.treeContext,is&&(Ha=Am(fe),xa=m,ai=!0,lo=null,bi=!1,h!==null&&(Ns[ra++]=Kn,Ns[ra++]=ss,Ns[ra++]=ka,Kn=h.id,ss=h.overflow,ka=m)),m=Dl(m,U.children),m.flags|=4096);return m}return q?(nl(),q=U.fallback,fe=m.mode,pe=h.child,K=pe.sibling,U=Bl(pe,{mode:"hidden",children:U.children}),U.subtreeFlags=pe.subtreeFlags&65011712,K!==null?q=Bl(K,q):(q=Ro(q,fe,N,null),q.flags|=2),q.return=m,U.return=m,U.sibling=q,m.child=U,U=q,q=m.child,fe=h.child.memoizedState,fe===null?fe=hs(N):(pe=fe.cachePool,pe!==null?(K=kl?Bi._currentValue:Bi._currentValue2,pe=pe.parent!==K?{parent:K,pool:K}:pe):pe=bt(),fe={baseLanes:fe.baseLanes|N,cachePool:pe}),q.memoizedState=fe,q.childLanes=Cu(h,xe,N),m.memoizedState=ba,U):(cc(m),N=h.child,h=N.sibling,N=Bl(N,{mode:"visible",children:U.children}),N.return=m,N.sibling=null,h!==null&&(xe=m.deletions,xe===null?(m.deletions=[h],m.flags|=16):xe.push(h)),m.child=N,m.memoizedState=null,N)}function Dl(h,m){return m=eu({mode:"visible",children:m},h.mode),m.return=h,h.child=m}function eu(h,m){return h=t(22,h,null,m),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function Uh(h,m,N){return Er(m,h.child,null,N),h=Dl(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function Lh(h,m,N){h.lanes|=m;var U=h.alternate;U!==null&&(U.lanes|=m),Le(h.return,m,N)}function zh(h,m,N,U,q){var K=h.memoizedState;K===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:U,tail:N,tailMode:q}:(K.isBackwards=m,K.rendering=null,K.renderingStartTime=0,K.last=U,K.tail=N,K.tailMode=q)}function mr(h,m,N){var U=m.pendingProps,q=U.revealOrder,K=U.tail;if(va(h,m,U.children,N),U=Cn.current,(U&2)!==0)U=U&1|2,m.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Lh(h,N,m);else if(h.tag===19)Lh(h,N,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}U&=1}switch(S(Cn,U),q){case"forwards":for(N=m.child,q=null;N!==null;)h=N.alternate,h!==null&&Ph(h)===null&&(q=N),N=N.sibling;N=q,N===null?(q=m.child,m.child=null):(q=N.sibling,N.sibling=null),zh(m,!1,q,N,K);break;case"backwards":for(N=null,q=m.child,m.child=null;q!==null;){if(h=q.alternate,h!==null&&Ph(h)===null){m.child=q;break}h=q.sibling,q.sibling=N,N=q,q=h}zh(m,!0,N,null,K);break;case"together":zh(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Or(h,m,N){if(h!==null&&(m.dependencies=h.dependencies),Ka|=m.lanes,(N&m.childLanes)===0)if(h!==null){if(Et(h,m,N,!1),(N&m.childLanes)===0)return null}else return null;if(h!==null&&m.child!==h.child)throw Error(a(153));if(m.child!==null){for(h=m.child,N=Bl(h,h.pendingProps),m.child=N,N.return=m;h.sibling!==null;)h=h.sibling,N=N.sibling=Bl(h,h.pendingProps),N.return=m;N.sibling=null}return m.child}function fc(h,m){return(h.lanes&m)!==0?!0:(h=h.dependencies,!!(h!==null&&ct(h)))}function Fg(h,m,N){switch(m.tag){case 3:de(m,m.stateNode.containerInfo),ke(m,Bi,h.memoizedState.cache),st();break;case 27:case 5:Me(m);break;case 4:de(m,m.stateNode.containerInfo);break;case 10:ke(m,m.type,m.memoizedProps.value);break;case 13:var U=m.memoizedState;if(U!==null)return U.dehydrated!==null?(cc(m),m.flags|=128,null):(N&m.child.childLanes)!==0?Yf(h,m,N):(cc(m),h=Or(h,m,N),h!==null?h.sibling:null);cc(m);break;case 19:var q=(h.flags&128)!==0;if(U=(N&m.childLanes)!==0,U||(Et(h,m,N,!1),U=(N&m.childLanes)!==0),q){if(U)return mr(h,m,N);m.flags|=128}if(q=m.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),S(Cn,Cn.current),U)break;return null;case 22:case 23:return m.lanes=0,uc(h,m,N);case 24:ke(m,Bi,h.memoizedState.cache)}return Or(h,m,N)}function jd(h,m,N){if(h!==null)if(h.memoizedProps!==m.pendingProps)dn=!0;else{if(!fc(h,N)&&(m.flags&128)===0)return dn=!1,Fg(h,m,N);dn=(h.flags&131072)!==0}else dn=!1,ai&&(m.flags&1048576)!==0&&Y(m,oo,m.index);switch(m.lanes=0,m.tag){case 16:e:{h=m.pendingProps;var U=m.elementType,q=U._init;if(U=q(U._payload),m.type=U,typeof U=="function")fm(U)?(h=Jc(U,h),m.tag=1,m=Od(null,m,U,h,N)):(m.tag=0,m=dc(null,m,U,h,N));else{if(U!=null){if(q=U.$$typeof,q===sl){m.tag=11,m=Xf(null,m,U,h,N);break e}else if(q===Oo){m.tag=14,m=Bg(null,m,U,h,N);break e}}throw m=x(U)||U,Error(a(306,m,""))}}return m;case 0:return dc(h,m,m.type,m.pendingProps,N);case 1:return U=m.type,q=Jc(U,m.pendingProps),Od(h,m,U,q,N);case 3:e:{if(de(m,m.stateNode.containerInfo),h===null)throw Error(a(387));var K=m.pendingProps;q=m.memoizedState,U=q.element,to(h,m),ve(m,K,null,N);var xe=m.memoizedState;if(K=xe.cache,ke(m,Bi,K),K!==q.cache&&Ie(m,[Bi],N,!0),le(),K=xe.element,is&&q.isDehydrated)if(q={element:K,isDehydrated:!1,cache:xe.cache},m.updateQueue.baseState=q,m.memoizedState=q,m.flags&256){m=hc(h,m,K,N);break e}else if(K!==U){U=G(Error(a(424)),m),Pe(U),m=hc(h,m,K,N);break e}else for(is&&(Ha=h0(m.stateNode.containerInfo),xa=m,ai=!0,lo=null,bi=!0),N=pl(m,null,K,N),m.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(st(),K===U){m=Or(h,m,N);break e}va(h,m,K,N)}m=m.child}return m;case 26:if(br)return $c(h,m),h===null?(N=of(m.type,null,m.pendingProps,null))?m.memoizedState=N:ai||(m.stateNode=cl(m.type,m.pendingProps,ms.current,m)):m.memoizedState=of(m.type,h.memoizedProps,m.pendingProps,h.memoizedState),null;case 27:if(ii)return Me(m),h===null&&ii&&ai&&(U=m.stateNode=Vl(m.type,m.pendingProps,ms.current,Mi.current,!1),xa=m,bi=!0,Ha=f0(m.type,U,Ha)),va(h,m,m.pendingProps.children,N),$c(h,m),h===null&&(m.flags|=4194304),m.child;case 5:return h===null&&ai&&(v0(m.type,m.pendingProps,Mi.current),(q=U=Ha)&&(U=p0(U,m.type,m.pendingProps,bi),U!==null?(m.stateNode=U,xa=m,Ha=d0(U),bi=!1,q=!0):q=!1),q||ae(m)),Me(m),q=m.type,K=m.pendingProps,xe=h!==null?h.memoizedProps:null,U=K.children,rl(q,K)?U=null:xe!==null&&rl(q,xe)&&(m.flags|=32),m.memoizedState!==null&&(q=we(h,m,Be,null,null,N),kl?Gr._currentValue=q:Gr._currentValue2=q),$c(h,m),va(h,m,U,N),m.child;case 6:return h===null&&ai&&(Bu(m.pendingProps,Mi.current),(h=N=Ha)&&(N=Jv(N,m.pendingProps,bi),N!==null?(m.stateNode=N,xa=m,Ha=null,h=!0):h=!1),h||ae(m)),null;case 13:return Yf(h,m,N);case 4:return de(m,m.stateNode.containerInfo),U=m.pendingProps,h===null?m.child=Er(m,null,U,N):va(h,m,U,N),m.child;case 11:return Xf(h,m,m.type,m.pendingProps,N);case 7:return va(h,m,m.pendingProps,N),m.child;case 8:return va(h,m,m.pendingProps.children,N),m.child;case 12:return va(h,m,m.pendingProps.children,N),m.child;case 10:return U=m.pendingProps,ke(m,m.type,U.value),va(h,m,U.children,N),m.child;case 9:return q=m.type._context,U=m.pendingProps.children,At(m),q=Pt(q),U=U(q),m.flags|=1,va(h,m,U,N),m.child;case 14:return Bg(h,m,m.type,m.pendingProps,N);case 15:return cm(h,m,m.type,m.pendingProps,N);case 19:return mr(h,m,N);case 31:return U=m.pendingProps,N=m.mode,U={mode:U.mode,children:U.children},h===null?(N=eu(U,N),N.ref=m.ref,m.child=N,N.return=m,m=N):(N=Bl(h.child,U),N.ref=m.ref,m.child=N,N.return=m,m=N),m;case 22:return uc(h,m,N);case 24:return At(m),U=Pt(Bi),h===null?(q=Ne(),q===null&&(q=ei,K=He(),q.pooledCache=K,K.refCount++,K!==null&&(q.pooledCacheLanes|=N),q=K),m.memoizedState={parent:U,cache:q},_s(m),ke(m,Bi,q)):((h.lanes&N)!==0&&(to(h,m),ve(m,null,null,N),le()),q=h.memoizedState,K=m.memoizedState,q.parent!==U?(q={parent:U,cache:U},m.memoizedState=q,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=q),ke(m,Bi,U)):(U=K.cache,ke(m,Bi,U),U!==q.cache&&Ie(m,[Bi],N,!0))),va(h,m,m.pendingProps.children,N),m.child;case 29:throw m.pendingProps}throw Error(a(156,m.tag))}function Ws(h){h.flags|=4}function Ih(h,m){if(h!==null&&h.child===m.child)return!1;if((m.flags&16)!==0)return!0;for(h=m.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function Pd(h,m,N,U){if(yi)for(N=m.child;N!==null;){if(N.tag===5||N.tag===6)Ya(h,N.stateNode);else if(!(N.tag===4||ii&&N.tag===27)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===m)break;for(;N.sibling===null;){if(N.return===null||N.return===m)return;N=N.return}N.sibling.return=N.return,N=N.sibling}else if(Fa)for(var q=m.child;q!==null;){if(q.tag===5){var K=q.stateNode;N&&U&&(K=wm(K,q.type,q.memoizedProps)),Ya(h,K)}else if(q.tag===6)K=q.stateNode,N&&U&&(K=Mm(K,q.memoizedProps)),Ya(h,K);else if(q.tag!==4){if(q.tag===22&&q.memoizedState!==null)K=q.child,K!==null&&(K.return=q),Pd(h,q,!0,!0);else if(q.child!==null){q.child.return=q,q=q.child;continue}}if(q===m)break;for(;q.sibling===null;){if(q.return===null||q.return===m)return;q=q.return}q.sibling.return=q.return,q=q.sibling}}function Au(h,m,N,U){var q=!1;if(Fa)for(var K=m.child;K!==null;){if(K.tag===5){var xe=K.stateNode;N&&U&&(xe=wm(xe,K.type,K.memoizedProps)),lp(h,xe)}else if(K.tag===6)xe=K.stateNode,N&&U&&(xe=Mm(xe,K.memoizedProps)),lp(h,xe);else if(K.tag!==4){if(K.tag===22&&K.memoizedState!==null)q=K.child,q!==null&&(q.return=K),Au(h,K,!0,!0),q=!0;else if(K.child!==null){K.child.return=K,K=K.child;continue}}if(K===m)break;for(;K.sibling===null;){if(K.return===null||K.return===m)return q;K=K.return}K.sibling.return=K.return,K=K.sibling}return q}function Nu(h,m){if(Fa&&Ih(h,m)){h=m.stateNode;var N=h.containerInfo,U=op();Au(U,m,!1,!1),h.pendingChildren=U,Ws(m),cp(N,U)}}function fa(h,m,N,U){if(yi)h.memoizedProps!==U&&Ws(m);else if(Fa){var q=h.stateNode,K=h.memoizedProps;if((h=Ih(h,m))||K!==U){var xe=Mi.current;K=Wd(q,N,K,U,!h,null),K===q?m.stateNode=q:($h(K,N,U,xe)&&Ws(m),m.stateNode=K,h?Pd(K,m,!1,!1):Ws(m))}else m.stateNode=q}}function Wf(h,m,N){if(as(m,N)){if(h.flags|=16777216,!Nc(m,N))if(Qf())h.flags|=8192;else throw Ls=xi,Zn}else h.flags&=-16777217}function kg(h,m){if(y0(m)){if(h.flags|=16777216,!Rc(m))if(Qf())h.flags|=8192;else throw Ls=xi,Zn}else h.flags&=-16777217}function Bh(h,m){m!==null&&(h.flags|=4),h.flags&16384&&(m=h.tag!==22?P():536870912,h.lanes|=m,lr|=m)}function pc(h,m){if(!ai)switch(h.tailMode){case"hidden":m=h.tail;for(var N=null;m!==null;)m.alternate!==null&&(N=m),m=m.sibling;N===null?h.tail=null:N.sibling=null;break;case"collapsed":N=h.tail;for(var U=null;N!==null;)N.alternate!==null&&(U=N),N=N.sibling;U===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:U.sibling=null}}function Xi(h){var m=h.alternate!==null&&h.alternate.child===h.child,N=0,U=0;if(m)for(var q=h.child;q!==null;)N|=q.lanes|q.childLanes,U|=q.subtreeFlags&65011712,U|=q.flags&65011712,q.return=h,q=q.sibling;else for(q=h.child;q!==null;)N|=q.lanes|q.childLanes,U|=q.subtreeFlags,U|=q.flags,q.return=h,q=q.sibling;return h.subtreeFlags|=U,h.childLanes=N,m}function Hg(h,m,N){var U=m.pendingProps;switch(ue(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xi(m),null;case 1:return Xi(m),null;case 3:return N=m.stateNode,U=null,h!==null&&(U=h.memoizedState.cache),m.memoizedState.cache!==U&&(m.flags|=2048),Ee(Bi),ie(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(h===null||h.child===null)&&(Ge(m)?Ws(m):h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,ft())),Nu(h,m),Xi(m),null;case 26:if(br){N=m.type;var q=m.memoizedState;return h===null?(Ws(m),q!==null?(Xi(m),kg(m,q)):(Xi(m),Wf(m,N,U))):q?q!==h.memoizedState?(Ws(m),Xi(m),kg(m,q)):(Xi(m),m.flags&=-16777217):(yi?h.memoizedProps!==U&&Ws(m):fa(h,m,N,U),Xi(m),Wf(m,N,U)),null}case 27:if(ii){if(ye(m),N=ms.current,q=m.type,h!==null&&m.stateNode!=null)yi?h.memoizedProps!==U&&Ws(m):fa(h,m,q,U);else{if(!U){if(m.stateNode===null)throw Error(a(166));return Xi(m),null}h=Mi.current,Ge(m)?_e(m,h):(h=Vl(q,U,N,h,!0),m.stateNode=h,Ws(m))}return Xi(m),null}case 5:if(ye(m),N=m.type,h!==null&&m.stateNode!=null)fa(h,m,N,U);else{if(!U){if(m.stateNode===null)throw Error(a(166));return Xi(m),null}h=Mi.current,Ge(m)?_e(m,h):(q=Zi(N,U,ms.current,h,m),Pd(q,m,!1,!1),m.stateNode=q,$h(q,N,U,h)&&Ws(m))}return Xi(m),Wf(m,m.type,m.pendingProps),null;case 6:if(h&&m.stateNode!=null)N=h.memoizedProps,yi?N!==U&&Ws(m):Fa&&(N!==U?(m.stateNode=er(U,ms.current,Mi.current,m),Ws(m)):m.stateNode=h.stateNode);else{if(typeof U!="string"&&m.stateNode===null)throw Error(a(166));if(h=ms.current,N=Mi.current,Ge(m)){if(!is)throw Error(a(176));if(h=m.stateNode,N=m.memoizedProps,U=null,q=xa,q!==null)switch(q.tag){case 27:case 5:U=q.memoizedProps}sf(h,N,m,U)||ae(m)}else m.stateNode=er(U,h,N,m)}return Xi(m),null;case 13:if(U=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(q=Ge(m),U!==null&&U.dehydrated!==null){if(h===null){if(!q)throw Error(a(318));if(!is)throw Error(a(344));if(q=m.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(a(317));hp(q,m)}else st(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Xi(m),q=!1}else q=ft(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=q),q=!0;if(!q)return m.flags&256?(Nl(m),m):(Nl(m),null)}if(Nl(m),(m.flags&128)!==0)return m.lanes=N,m;if(N=U!==null,h=h!==null&&h.memoizedState!==null,N){U=m.child,q=null,U.alternate!==null&&U.alternate.memoizedState!==null&&U.alternate.memoizedState.cachePool!==null&&(q=U.alternate.memoizedState.cachePool.pool);var K=null;U.memoizedState!==null&&U.memoizedState.cachePool!==null&&(K=U.memoizedState.cachePool.pool),K!==q&&(U.flags|=2048)}return N!==h&&N&&(m.child.flags|=8192),Bh(m,m.updateQueue),Xi(m),null;case 4:return ie(),Nu(h,m),h===null&&Yg(m.stateNode.containerInfo),Xi(m),null;case 10:return Ee(m.type),Xi(m),null;case 19:if(_(Cn),q=m.memoizedState,q===null)return Xi(m),null;if(U=(m.flags&128)!==0,K=q.rendering,K===null)if(U)pc(q,!1);else{if(_a!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(K=Ph(h),K!==null){for(m.flags|=128,pc(q,!1),h=K.updateQueue,m.updateQueue=h,Bh(m,h),m.subtreeFlags=0,h=N,N=m.child;N!==null;)Za(N,h),N=N.sibling;return S(Cn,Cn.current&1|2),m.child}h=h.sibling}q.tail!==null&&sa()>Jl&&(m.flags|=128,U=!0,pc(q,!1),m.lanes=4194304)}else{if(!U)if(h=Ph(K),h!==null){if(m.flags|=128,U=!0,h=h.updateQueue,m.updateQueue=h,Bh(m,h),pc(q,!0),q.tail===null&&q.tailMode==="hidden"&&!K.alternate&&!ai)return Xi(m),null}else 2*sa()-q.renderingStartTime>Jl&&N!==536870912&&(m.flags|=128,U=!0,pc(q,!1),m.lanes=4194304);q.isBackwards?(K.sibling=m.child,m.child=K):(h=q.last,h!==null?h.sibling=K:m.child=K,q.last=K)}return q.tail!==null?(m=q.tail,q.rendering=m,q.tail=m.sibling,q.renderingStartTime=sa(),m.sibling=null,h=Cn.current,S(Cn,U?h&1|2:h&1),m):(Xi(m),null);case 22:case 23:return Nl(m),Lt(),U=m.memoizedState!==null,h!==null?h.memoizedState!==null!==U&&(m.flags|=8192):U&&(m.flags|=8192),U?(N&536870912)!==0&&(m.flags&128)===0&&(Xi(m),m.subtreeFlags&6&&(m.flags|=8192)):Xi(m),N=m.updateQueue,N!==null&&Bh(m,N.retryQueue),N=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(N=h.memoizedState.cachePool.pool),U=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(U=m.memoizedState.cachePool.pool),U!==N&&(m.flags|=2048),h!==null&&_(Ai),null;case 24:return N=null,h!==null&&(N=h.memoizedState.cache),m.memoizedState.cache!==N&&(m.flags|=2048),Ee(Bi),Xi(m),null;case 25:return null;case 30:return null}throw Error(a(156,m.tag))}function jr(h,m){switch(ue(m),m.tag){case 1:return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return Ee(Bi),ie(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 26:case 27:case 5:return ye(m),null;case 13:if(Nl(m),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(a(340));st()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return _(Cn),null;case 4:return ie(),null;case 10:return Ee(m.type),null;case 22:case 23:return Nl(m),Lt(),h!==null&&_(Ai),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 24:return Ee(Bi),null;case 25:return null;default:return null}}function Mo(h,m){switch(ue(m),m.tag){case 3:Ee(Bi),ie();break;case 26:case 27:case 5:ye(m);break;case 4:ie();break;case 13:Nl(m);break;case 19:_(Cn);break;case 10:Ee(m.type);break;case 22:case 23:Nl(m),Lt(),h!==null&&_(Ai);break;case 24:Ee(Bi)}}function Es(h,m){try{var N=m.updateQueue,U=N!==null?N.lastEffect:null;if(U!==null){var q=U.next;N=q;do{if((N.tag&h)===h){U=void 0;var K=N.create,xe=N.inst;U=K(),xe.destroy=U}N=N.next}while(N!==q)}}catch(fe){Ci(m,m.return,fe)}}function Ol(h,m,N){try{var U=m.updateQueue,q=U!==null?U.lastEffect:null;if(q!==null){var K=q.next;U=K;do{if((U.tag&h)===h){var xe=U.inst,fe=xe.destroy;if(fe!==void 0){xe.destroy=void 0,q=m;var pe=N,Ce=fe;try{Ce()}catch(qe){Ci(q,pe,qe)}}}U=U.next}while(U!==K)}}catch(qe){Ci(m,m.return,qe)}}function Kf(h){var m=h.updateQueue;if(m!==null){var N=h.stateNode;try{tt(m,N)}catch(U){Ci(h,h.return,U)}}}function Zf(h,m,N){N.props=Jc(h.type,h.memoizedProps),N.state=h.memoizedState;try{N.componentWillUnmount()}catch(U){Ci(h,m,U)}}function mc(h,m){try{var N=h.ref;if(N!==null){switch(h.tag){case 26:case 27:case 5:var U=qd(h.stateNode);break;case 30:U=h.stateNode;break;default:U=h.stateNode}typeof N=="function"?h.refCleanup=N(U):N.current=U}}catch(q){Ci(h,m,q)}}function To(h,m){var N=h.ref,U=h.refCleanup;if(N!==null)if(typeof U=="function")try{U()}catch(q){Ci(h,m,q)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof N=="function")try{N(null)}catch(q){Ci(h,m,q)}else N.current=null}function jl(h){var m=h.type,N=h.memoizedProps,U=h.stateNode;try{_m(U,m,N,h)}catch(q){Ci(h,h.return,q)}}function Ud(h,m,N){try{n0(h.stateNode,h.type,N,m,h)}catch(U){Ci(h,h.return,U)}}function Ld(h){return h.tag===5||h.tag===3||(br?h.tag===26:!1)||(ii?h.tag===27&&ku(h.type):!1)||h.tag===4}function zd(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Ld(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(ii&&h.tag===27&&ku(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Fh(h,m,N){var U=h.tag;if(U===5||U===6)h=h.stateNode,m?i0(N,h,m):e0(N,h);else if(U!==4&&(ii&&U===27&&ku(h.type)&&(N=h.stateNode,m=null),h=h.child,h!==null))for(Fh(h,m,N),h=h.sibling;h!==null;)Fh(h,m,N),h=h.sibling}function ts(h,m,N){var U=h.tag;if(U===5||U===6)h=h.stateNode,m?Sm(N,h,m):$g(N,h);else if(U!==4&&(ii&&U===27&&ku(h.type)&&(N=h.stateNode),h=h.child,h!==null))for(ts(h,m,N),h=h.sibling;h!==null;)ts(h,m,N),h=h.sibling}function gc(h,m,N){h=h.containerInfo;try{nf(h,N)}catch(U){Ci(m,m.return,U)}}function kh(h){var m=h.stateNode,N=h.memoizedProps;try{lu(h.type,N,m,h)}catch(U){Ci(h,h.return,U)}}function Gg(h,m){for(Ac(h.containerInfo),Jn=m;Jn!==null;)if(h=Jn,m=h.child,(h.subtreeFlags&1024)!==0&&m!==null)m.return=h,Jn=m;else for(;Jn!==null;){h=Jn;var N=h.alternate;switch(m=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((m&1024)!==0&&N!==null){m=void 0;var U=h,q=N.memoizedProps;N=N.memoizedState;var K=U.stateNode;try{var xe=Jc(U.type,q,U.elementType===U.type);m=K.getSnapshotBeforeUpdate(xe,N),K.__reactInternalSnapshotBeforeUpdate=m}catch(fe){Ci(U,U.return,fe)}}break;case 3:(m&1024)!==0&&yi&&rp(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(a(163))}if(m=h.sibling,m!==null){m.return=h.return,Jn=m;break}Jn=h.return}}function Pl(h,m,N){var U=N.flags;switch(N.tag){case 0:case 11:case 15:Ul(h,N),U&4&&Es(5,N);break;case 1:if(Ul(h,N),U&4)if(h=N.stateNode,m===null)try{h.componentDidMount()}catch(xe){Ci(N,N.return,xe)}else{var q=Jc(N.type,m.memoizedProps);m=m.memoizedState;try{h.componentDidUpdate(q,m,h.__reactInternalSnapshotBeforeUpdate)}catch(xe){Ci(N,N.return,xe)}}U&64&&Kf(N),U&512&&mc(N,N.return);break;case 3:if(Ul(h,N),U&64&&(h=N.updateQueue,h!==null)){if(m=null,N.child!==null)switch(N.child.tag){case 27:case 5:m=qd(N.child.stateNode);break;case 1:m=N.child.stateNode}try{tt(h,m)}catch(xe){Ci(N,N.return,xe)}}break;case 27:ii&&m===null&&U&4&&kh(N);case 26:case 5:Ul(h,N),m===null&&U&4&&jl(N),U&512&&mc(N,N.return);break;case 12:Ul(h,N);break;case 13:Ul(h,N),U&4&&um(h,N),U&64&&(h=N.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(N=Xa.bind(null,N),dp(h,N))));break;case 22:if(U=N.memoizedState!==null||Ja,!U){m=m!==null&&m.memoizedState!==null||pa,q=Ja;var K=pa;Ja=U,(pa=m)&&!K?Ia(h,N,(N.subtreeFlags&8772)!==0):Ul(h,N),Ja=q,pa=K}break;case 30:break;default:Ul(h,N)}}function Ks(h){var m=h.alternate;m!==null&&(h.alternate=null,Ks(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&xr(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function no(h,m,N){for(N=N.child;N!==null;)Zs(h,m,N),N=N.sibling}function Zs(h,m,N){if(As&&typeof As.onCommitFiberUnmount=="function")try{As.onCommitFiberUnmount(ul,N)}catch{}switch(N.tag){case 26:if(br){pa||To(N,m),no(h,m,N),N.memoizedState?Rm(N.memoizedState):N.stateNode&&aa(N.stateNode);break}case 27:if(ii){pa||To(N,m);var U=Wi,q=Ga;ku(N.type)&&(Wi=N.stateNode,Ga=!1),no(h,m,N),tr(N.stateNode),Wi=U,Ga=q;break}case 5:pa||To(N,m);case 6:if(yi){if(U=Wi,q=Ga,Wi=null,no(h,m,N),Wi=U,Ga=q,Wi!==null)if(Ga)try{s0(Wi,N.stateNode)}catch(K){Ci(N,m,K)}else try{a0(Wi,N.stateNode)}catch(K){Ci(N,m,K)}}else no(h,m,N);break;case 18:yi&&Wi!==null&&(Ga?pp(Wi,N.stateNode):rf(Wi,N.stateNode));break;case 4:yi?(U=Wi,q=Ga,Wi=N.stateNode.containerInfo,Ga=!0,no(h,m,N),Wi=U,Ga=q):(Fa&&gc(N.stateNode,N,op()),no(h,m,N));break;case 0:case 11:case 14:case 15:pa||Ol(2,N,m),pa||Ol(4,N,m),no(h,m,N);break;case 1:pa||(To(N,m),U=N.stateNode,typeof U.componentWillUnmount=="function"&&Zf(N,m,U)),no(h,m,N);break;case 21:no(h,m,N);break;case 22:pa=(U=pa)||N.memoizedState!==null,no(h,m,N),pa=U;break;default:no(h,m,N)}}function um(h,m){if(is&&m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{ro(h)}catch(N){Ci(m,m.return,N)}}function vc(h){switch(h.tag){case 13:case 19:var m=h.stateNode;return m===null&&(m=h.stateNode=new mo),m;case 22:return h=h.stateNode,m=h._retryCache,m===null&&(m=h._retryCache=new mo),m;default:throw Error(a(435,h.tag))}}function tu(h,m){var N=vc(h);m.forEach(function(U){var q=Xh.bind(null,h,U);N.has(U)||(N.add(U),U.then(q,q))})}function La(h,m){var N=m.deletions;if(N!==null)for(var U=0;U<N.length;U++){var q=N[U],K=h,xe=m;if(yi){var fe=xe;e:for(;fe!==null;){switch(fe.tag){case 27:if(ii){if(ku(fe.type)){Wi=fe.stateNode,Ga=!1;break e}break}case 5:Wi=fe.stateNode,Ga=!1;break e;case 3:case 4:Wi=fe.stateNode.containerInfo,Ga=!0;break e}fe=fe.return}if(Wi===null)throw Error(a(160));Zs(K,xe,q),Wi=null,Ga=!1}else Zs(K,xe,q);K=q.alternate,K!==null&&(K.return=null),q.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)Hh(m,h),m=m.sibling}function Hh(h,m){var N=h.alternate,U=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:La(m,h),ws(h),U&4&&(Ol(3,h,h.return),Es(3,h),Ol(5,h,h.return));break;case 1:La(m,h),ws(h),U&512&&(pa||N===null||To(N,N.return)),U&64&&Ja&&(h=h.updateQueue,h!==null&&(U=h.callbacks,U!==null&&(N=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=N===null?U:N.concat(U))));break;case 26:if(br){var q=zs;if(La(m,h),ws(h),U&512&&(pa||N===null||To(N,N.return)),U&4){U=N!==null?N.memoizedState:null;var K=h.memoizedState;N===null?K===null?h.stateNode===null?h.stateNode=Fu(q,h.type,h.memoizedProps,h):Dm(q,h.type,h.stateNode):h.stateNode=Nm(q,K,h.memoizedProps):U!==K?(U===null?N.stateNode!==null&&aa(N.stateNode):Rm(U),K===null?Dm(q,h.type,h.stateNode):Nm(q,K,h.memoizedProps)):K===null&&h.stateNode!==null&&Ud(h,h.memoizedProps,N.memoizedProps)}break}case 27:if(ii){La(m,h),ws(h),U&512&&(pa||N===null||To(N,N.return)),N!==null&&U&4&&Ud(h,h.memoizedProps,N.memoizedProps);break}case 5:if(La(m,h),ws(h),U&512&&(pa||N===null||To(N,N.return)),yi){if(h.flags&32){q=h.stateNode;try{r0(q)}catch(qe){Ci(h,h.return,qe)}}U&4&&h.stateNode!=null&&(q=h.memoizedProps,Ud(h,q,N!==null?N.memoizedProps:q)),U&1024&&(uu=!0)}break;case 6:if(La(m,h),ws(h),U&4&&yi){if(h.stateNode===null)throw Error(a(162));U=h.memoizedProps,N=N!==null?N.memoizedProps:U,q=h.stateNode;try{t0(q,N,U)}catch(qe){Ci(h,h.return,qe)}}break;case 3:if(br?(ou(),q=zs,zs=ru(m.containerInfo),La(m,h),zs=q):La(m,h),ws(h),U&4){if(yi&&is&&N!==null&&N.memoizedState.isDehydrated)try{g0(m.containerInfo)}catch(qe){Ci(h,h.return,qe)}if(Fa){U=m.containerInfo,N=m.pendingChildren;try{nf(U,N)}catch(qe){Ci(h,h.return,qe)}}}uu&&(uu=!1,fs(h));break;case 4:br?(N=zs,zs=ru(h.stateNode.containerInfo),La(m,h),ws(h),zs=N):(La(m,h),ws(h)),U&4&&Fa&&gc(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:La(m,h),ws(h);break;case 13:La(m,h),ws(h),h.child.flags&8192&&h.memoizedState!==null!=(N!==null&&N.memoizedState!==null)&&(Jd=sa()),U&4&&(U=h.updateQueue,U!==null&&(h.updateQueue=null,tu(h,U)));break;case 22:q=h.memoizedState!==null;var xe=N!==null&&N.memoizedState!==null,fe=Ja,pe=pa;if(Ja=fe||q,pa=pe||xe,La(m,h),pa=pe,Ja=fe,ws(h),U&8192&&(m=h.stateNode,m._visibility=q?m._visibility&-2:m._visibility|1,q&&(N===null||xe||Ja||pa||za(h)),yi)){e:if(N=null,yi)for(m=h;;){if(m.tag===5||br&&m.tag===26){if(N===null){xe=N=m;try{K=xe.stateNode,q?o0(K):tf(xe.stateNode,xe.memoizedProps)}catch(qe){Ci(xe,xe.return,qe)}}}else if(m.tag===6){if(N===null){xe=m;try{var Ce=xe.stateNode;q?Yd(Ce):Em(Ce,xe.memoizedProps)}catch(qe){Ci(xe,xe.return,qe)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;N===m&&(N=null),m=m.return}N===m&&(N=null),m.sibling.return=m.return,m=m.sibling}}U&4&&(U=h.updateQueue,U!==null&&(N=U.retryQueue,N!==null&&(U.retryQueue=null,tu(h,N))));break;case 19:La(m,h),ws(h),U&4&&(U=h.updateQueue,U!==null&&(h.updateQueue=null,tu(h,U)));break;case 30:break;case 21:break;default:La(m,h),ws(h)}}function ws(h){var m=h.flags;if(m&2){try{if(yi){for(var N,U=h.return;U!==null;){if(Ld(U)){N=U;break}U=U.return}if(N==null)throw Error(a(160));switch(N.tag){case 27:if(ii){var q=N.stateNode,K=zd(h);ts(h,K,q);break}case 5:var xe=N.stateNode;N.flags&32&&(r0(xe),N.flags&=-33);var fe=zd(h);ts(h,fe,xe);break;case 3:case 4:var pe=N.stateNode.containerInfo,Ce=zd(h);Fh(h,Ce,pe);break;default:throw Error(a(161))}}}catch(qe){Ci(h,h.return,qe)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function fs(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var m=h;fs(m),m.tag===5&&m.flags&1024&&ym(m.stateNode),h=h.sibling}}function Ul(h,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)Pl(h,m.alternate,m),m=m.sibling}function za(h){for(h=h.child;h!==null;){var m=h;switch(m.tag){case 0:case 11:case 14:case 15:Ol(4,m,m.return),za(m);break;case 1:To(m,m.return);var N=m.stateNode;typeof N.componentWillUnmount=="function"&&Zf(m,m.return,N),za(m);break;case 27:ii&&tr(m.stateNode);case 26:case 5:To(m,m.return),za(m);break;case 22:m.memoizedState===null&&za(m);break;case 30:za(m);break;default:za(m)}h=h.sibling}}function Ia(h,m,N){for(N=N&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var U=m.alternate,q=h,K=m,xe=K.flags;switch(K.tag){case 0:case 11:case 15:Ia(q,K,N),Es(4,K);break;case 1:if(Ia(q,K,N),U=K,q=U.stateNode,typeof q.componentDidMount=="function")try{q.componentDidMount()}catch(Ce){Ci(U,U.return,Ce)}if(U=K,q=U.updateQueue,q!==null){var fe=U.stateNode;try{var pe=q.shared.hiddenCallbacks;if(pe!==null)for(q.shared.hiddenCallbacks=null,q=0;q<pe.length;q++)Ue(pe[q],fe)}catch(Ce){Ci(U,U.return,Ce)}}N&&xe&64&&Kf(K),mc(K,K.return);break;case 27:ii&&kh(K);case 26:case 5:Ia(q,K,N),N&&U===null&&xe&4&&jl(K),mc(K,K.return);break;case 12:Ia(q,K,N);break;case 13:Ia(q,K,N),N&&xe&4&&um(q,K);break;case 22:K.memoizedState===null&&Ia(q,K,N),mc(K,K.return);break;case 30:break;default:Ia(q,K,N)}m=m.sibling}}function Pr(h,m){var N=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(N=h.memoizedState.cachePool.pool),h=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(h=m.memoizedState.cachePool.pool),h!==N&&(h!=null&&h.refCount++,N!=null&&Ve(N))}function Id(h,m){h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Ve(h))}function Ur(h,m,N,U){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)yc(h,m,N,U),m=m.sibling}function yc(h,m,N,U){var q=m.flags;switch(m.tag){case 0:case 11:case 15:Ur(h,m,N,U),q&2048&&Es(9,m);break;case 1:Ur(h,m,N,U);break;case 3:Ur(h,m,N,U),q&2048&&(h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Ve(h)));break;case 12:if(q&2048){Ur(h,m,N,U),h=m.stateNode;try{var K=m.memoizedProps,xe=K.id,fe=K.onPostCommit;typeof fe=="function"&&fe(xe,m.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(pe){Ci(m,m.return,pe)}}else Ur(h,m,N,U);break;case 13:Ur(h,m,N,U);break;case 23:break;case 22:K=m.stateNode,xe=m.alternate,m.memoizedState!==null?K._visibility&2?Ur(h,m,N,U):io(h,m):K._visibility&2?Ur(h,m,N,U):(K._visibility|=2,xc(h,m,N,U,(m.subtreeFlags&10256)!==0)),q&2048&&Pr(xe,m);break;case 24:Ur(h,m,N,U),q&2048&&Id(m.alternate,m);break;default:Ur(h,m,N,U)}}function xc(h,m,N,U,q){for(q=q&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var K=h,xe=m,fe=N,pe=U,Ce=xe.flags;switch(xe.tag){case 0:case 11:case 15:xc(K,xe,fe,pe,q),Es(8,xe);break;case 23:break;case 22:var qe=xe.stateNode;xe.memoizedState!==null?qe._visibility&2?xc(K,xe,fe,pe,q):io(K,xe):(qe._visibility|=2,xc(K,xe,fe,pe,q)),q&&Ce&2048&&Pr(xe.alternate,xe);break;case 24:xc(K,xe,fe,pe,q),q&&Ce&2048&&Id(xe.alternate,xe);break;default:xc(K,xe,fe,pe,q)}m=m.sibling}}function io(h,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var N=h,U=m,q=U.flags;switch(U.tag){case 22:io(N,U),q&2048&&Pr(U.alternate,U);break;case 24:io(N,U),q&2048&&Id(U.alternate,U);break;default:io(N,U)}m=m.sibling}}function bc(h){if(h.subtreeFlags&Is)for(h=h.child;h!==null;)Ru(h),h=h.sibling}function Ru(h){switch(h.tag){case 26:bc(h),h.flags&Is&&(h.memoizedState!==null?Gl(zs,h.memoizedState,h.memoizedProps):ef(h.type,h.memoizedProps));break;case 5:bc(h),h.flags&Is&&ef(h.type,h.memoizedProps);break;case 3:case 4:if(br){var m=zs;zs=ru(h.stateNode.containerInfo),bc(h),zs=m}else bc(h);break;case 22:h.memoizedState===null&&(m=h.alternate,m!==null&&m.memoizedState!==null?(m=Is,Is=16777216,bc(h),Is=m):bc(h));break;default:bc(h)}}function _c(h){var m=h.alternate;if(m!==null&&(h=m.child,h!==null)){m.child=null;do m=h.sibling,h.sibling=null,h=m;while(h!==null)}}function Du(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var N=0;N<m.length;N++){var U=m[N];Jn=U,qa(U,h)}_c(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)gr(h),h=h.sibling}function gr(h){switch(h.tag){case 0:case 11:case 15:Du(h),h.flags&2048&&Ol(9,h,h.return);break;case 3:Du(h);break;case 12:Du(h);break;case 22:var m=h.stateNode;h.memoizedState!==null&&m._visibility&2&&(h.return===null||h.return.tag!==13)?(m._visibility&=-3,nu(h)):Du(h);break;default:Du(h)}}function nu(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var N=0;N<m.length;N++){var U=m[N];Jn=U,qa(U,h)}_c(h)}for(h=h.child;h!==null;){switch(m=h,m.tag){case 0:case 11:case 15:Ol(8,m,m.return),nu(m);break;case 22:N=m.stateNode,N._visibility&2&&(N._visibility&=-3,nu(m));break;default:nu(m)}h=h.sibling}}function qa(h,m){for(;Jn!==null;){var N=Jn;switch(N.tag){case 0:case 11:case 15:Ol(8,N,m);break;case 23:case 22:if(N.memoizedState!==null&&N.memoizedState.cachePool!==null){var U=N.memoizedState.cachePool.pool;U!=null&&U.refCount++}break;case 24:Ve(N.memoizedState.cache)}if(U=N.child,U!==null)U.return=N,Jn=U;else e:for(N=h;Jn!==null;){U=Jn;var q=U.sibling,K=U.return;if(Ks(U),U===N){Jn=null;break e}if(q!==null){q.return=K,Jn=q;break e}Jn=K}}}function Gh(h){var m=Xg(h);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(a(364));return m}if(h=Kg(h),h===null)throw Error(a(362));return h.stateNode.current}function ns(h,m){var N=h.tag;switch(m.$$typeof){case Di:if(h.type===m.value)return!0;break;case xn:e:{for(m=m.value,h=[h,0],N=0;N<h.length;){var U=h[N++],q=U.tag,K=h[N++],xe=m[K];if(q!==5&&q!==26&&q!==27||!Xd(U)){for(;xe!=null&&ns(U,xe);)K++,xe=m[K];if(K===m.length){m=!0;break e}else for(U=U.child;U!==null;)h.push(U,K),U=U.sibling}}m=!1}return m;case ri:if((N===5||N===26||N===27)&&bm(h.stateNode,m.value))return!0;break;case vs:if((N===5||N===6||N===26||N===27)&&(h=Qg(h),h!==null&&0<=h.indexOf(m.value)))return!0;break;case Hi:if((N===5||N===26||N===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Ll(h){switch(h.$$typeof){case Di:return"<"+(x(h.value)||"Unknown")+">";case xn:return":has("+(Ll(h)||"")+")";case ri:return'[role="'+h.value+'"]';case vs:return'"'+h.value+'"';case Hi:return'[data-testname="'+h.value+'"]';default:throw Error(a(365))}}function Bd(h,m){var N=[];h=[h,0];for(var U=0;U<h.length;){var q=h[U++],K=q.tag,xe=h[U++],fe=m[xe];if(K!==5&&K!==26&&K!==27||!Xd(q)){for(;fe!=null&&ns(q,fe);)xe++,fe=m[xe];if(xe===m.length)N.push(q);else for(q=q.child;q!==null;)h.push(q,xe),q=q.sibling}}return N}function Fd(h,m){if(!Hl)throw Error(a(363));h=Gh(h),h=Bd(h,m),m=[],h=Array.from(h);for(var N=0;N<h.length;){var U=h[N++],q=U.tag;if(q===5||q===26||q===27)Xd(U)||m.push(U.stateNode);else for(U=U.child;U!==null;)h.push(U),U=U.sibling}return m}function Ms(){if((bn&2)!==0&&jn!==0)return jn&-jn;if(hn.T!==null){var h=Fi;return h!==0?h:Wt()}return sp()}function vr(){ys===0&&(ys=(jn&536870912)===0||ai?D():536870912);var h=Ni.current;return h!==null&&(h.flags|=32),ys}function Us(h,m,N){(h===ei&&(pi===2||pi===9)||h.cancelPendingCommit!==null)&&(Lr(h,0),yr(h,jn,ys,!1)),F(h,N),((bn&2)===0||h!==ei)&&(h===ei&&((bn&2)===0&&(Fo|=N),_a===4&&yr(h,jn,ys,!1)),Te(h))}function Ou(h,m,N){if((bn&6)!==0)throw Error(a(327));var U=!N&&(m&124)===0&&(m&h.expiredLanes)===0||T(h,m),q=U?so(h,m):wi(h,m,!0),K=U;do{if(q===0){wr&&!U&&yr(h,m,0,!1);break}else{if(N=h.current.alternate,K&&!ao(N)){q=wi(h,m,!1),K=!1;continue}if(q===2){if(K=m,h.errorRecoveryDisabledLanes&K)var xe=0;else xe=h.pendingLanes&-536870913,xe=xe!==0?xe:xe&536870912?536870912:0;if(xe!==0){m=xe;e:{var fe=h;q=Kr;var pe=is&&fe.current.memoizedState.isDehydrated;if(pe&&(Lr(fe,xe).flags|=256),xe=wi(fe,xe,!1),xe!==2){if(zc&&!pe){fe.errorRecoveryDisabledLanes|=K,Fo|=K,q=4;break e}K=ls,ls=q,K!==null&&(ls===null?ls=K:ls.push.apply(ls,K))}q=xe}if(K=!1,q!==2)continue}}if(q===1){Lr(h,0),yr(h,m,0,!0);break}e:{switch(U=h,K=q,K){case 0:case 1:throw Error(a(345));case 4:if((m&4194048)!==m)break;case 6:yr(U,m,ys,!os);break e;case 2:ls=null;break;case 3:case 5:break;default:throw Error(a(329))}if((m&62914560)===m&&(q=Jd+300-sa(),10<q)){if(yr(U,m,ys,!os),E(U,0,!0)!==0)break e;U.timeoutHandle=ps(Ts.bind(null,U,N,ls,Ju,Ql,m,ys,Fo,lr,os,K,2,-0,0),q);break e}Ts(U,N,ls,Ju,Ql,m,ys,Fo,lr,os,K,0,-0,0)}}break}while(!0);Te(h)}function Ts(h,m,N,U,q,K,xe,fe,pe,Ce,qe,pt,It,Bt){if(h.timeoutHandle=Ba,pt=m.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(ll(),Ru(m),pt=vm(),pt!==null)){h.cancelPendingCommit=pt(Ii.bind(null,h,m,K,N,U,q,xe,fe,pe,qe,1,It,Bt)),yr(h,K,xe,!Ce);return}Ii(h,m,K,N,U,q,xe,fe,pe)}function ao(h){for(var m=h;;){var N=m.tag;if((N===0||N===11||N===15)&&m.flags&16384&&(N=m.updateQueue,N!==null&&(N=N.stores,N!==null)))for(var U=0;U<N.length;U++){var q=N[U],K=q.getSnapshot;q=q.value;try{if(!Rs(K(),q))return!1}catch{return!1}}if(N=m.child,m.subtreeFlags&16384&&N!==null)N.return=m,m=N;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function yr(h,m,N,U){m&=~Qu,m&=~Fo,h.suspendedLanes|=m,h.pingedLanes&=~m,U&&(h.warmLanes|=m),U=h.expirationTimes;for(var q=m;0<q;){var K=31-nr(q),xe=1<<K;U[K]=-1,q&=~xe}N!==0&&O(h,N,m)}function il(){return(bn&6)===0?(ze(0),!1):!0}function Co(){if(en!==null){if(pi===0)var h=en.return;else h=en,Qa=co=null,_t(h),ki=null,Zu=0,h=en;for(;h!==null;)Mo(h.alternate,h),h=h.return;en=null}}function Lr(h,m){var N=h.timeoutHandle;N!==Ba&&(h.timeoutHandle=Ba,jo(N)),N=h.cancelPendingCommit,N!==null&&(h.cancelPendingCommit=null,N()),Co(),ei=h,en=N=Bl(h.current,null),jn=m,pi=0,Bs=null,os=!1,wr=T(h,m),zc=!1,lr=ys=Qu=Fo=Ka=_a=0,ls=Kr=null,Ql=!1,(m&8)!==0&&(m|=m&32);var U=h.entangledLanes;if(U!==0)for(h=h.entanglements,U&=m;0<U;){var q=31-nr(U),K=1<<q;m|=h[q],U&=~K}return Ki=m,Dn(),N}function Vh(h,m){On=null,hn.H=rr,m===ho||m===mn?(m=$t(),pi=3):m===Zn?(m=$t(),pi=4):pi=m===gn?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,Bs=m,en===null&&(_a=1,Nd(h,G(m,h.current)))}function Qf(){var h=Ni.current;return h===null?!0:(jn&4194048)===jn?Bo===null:(jn&62914560)===jn||(jn&536870912)!==0?h===Bo:!1}function Jf(){var h=hn.H;return hn.H=rr,h===null?rr:h}function Qs(){var h=hn.A;return hn.A=Ri,h}function ya(){_a=4,os||(jn&4194048)!==jn&&Ni.current!==null||(wr=!0),(Ka&134217727)===0&&(Fo&134217727)===0||ei===null||yr(ei,jn,ys,!1)}function wi(h,m,N){var U=bn;bn|=2;var q=Jf(),K=Qs();(ei!==h||jn!==m)&&(Ju=null,Lr(h,m)),m=!1;var xe=_a;e:do try{if(pi!==0&&en!==null){var fe=en,pe=Bs;switch(pi){case 8:Co(),xe=6;break e;case 3:case 2:case 9:case 6:Ni.current===null&&(m=!0);var Ce=pi;if(pi=0,Bs=null,iu(h,fe,pe,Ce),N&&wr){xe=0;break e}break;default:Ce=pi,pi=0,Bs=null,iu(h,fe,pe,Ce)}}Ao(),xe=_a;break}catch(qe){Vh(h,qe)}while(!0);return m&&h.shellSuspendCounter++,Qa=co=null,bn=U,hn.H=q,hn.A=K,en===null&&(ei=null,jn=0,Dn()),xe}function Ao(){for(;en!==null;)Sc(en)}function so(h,m){var N=bn;bn|=2;var U=Jf(),q=Qs();ei!==h||jn!==m?(Ju=null,Jl=sa()+500,Lr(h,m)):wr=T(h,m);e:do try{if(pi!==0&&en!==null){m=en;var K=Bs;t:switch(pi){case 1:pi=0,Bs=null,iu(h,m,K,1);break;case 2:case 9:if(jt(K)){pi=0,Bs=null,dm(m);break}m=function(){pi!==2&&pi!==9||ei!==h||(pi=7),Te(h)},K.then(m,m);break e;case 3:pi=7;break e;case 4:pi=5;break e;case 7:jt(K)?(pi=0,Bs=null,dm(m)):(pi=0,Bs=null,iu(h,m,K,7));break;case 5:var xe=null;switch(en.tag){case 26:xe=en.memoizedState;case 5:case 27:var fe=en,pe=fe.type,Ce=fe.pendingProps;if(xe?Rc(xe):Nc(pe,Ce)){pi=0,Bs=null;var qe=fe.sibling;if(qe!==null)en=qe;else{var pt=fe.return;pt!==null?(en=pt,zr(pt)):en=null}break t}}pi=0,Bs=null,iu(h,m,K,5);break;case 6:pi=0,Bs=null,iu(h,m,K,6);break;case 8:Co(),_a=6;break e;default:throw Error(a(462))}}$f();break}catch(It){Vh(h,It)}while(!0);return Qa=co=null,hn.H=U,hn.A=q,bn=N,en!==null?0:(ei=null,jn=0,Dn(),_a)}function $f(){for(;en!==null&&!ey();)Sc(en)}function Sc(h){var m=jd(h.alternate,h,Ki);h.memoizedProps=h.pendingProps,m===null?zr(h):en=m}function dm(h){var m=h,N=m.alternate;switch(m.tag){case 15:case 0:m=Dd(N,m,m.pendingProps,m.type,void 0,jn);break;case 11:m=Dd(N,m,m.pendingProps,m.type.render,m.ref,jn);break;case 5:_t(m);default:Mo(N,m),m=en=Za(m,Ki),m=jd(N,m,Ki)}h.memoizedProps=h.pendingProps,m===null?zr(h):en=m}function iu(h,m,N,U){Qa=co=null,_t(m),ki=null,Zu=0;var q=m.return;try{if(Ig(h,q,m,N,jn)){_a=1,Nd(h,G(N,h.current)),en=null;return}}catch(K){if(q!==null)throw en=q,K;_a=1,Nd(h,G(N,h.current)),en=null;return}m.flags&32768?(ai||U===1?h=!0:wr||(jn&536870912)!==0?h=!1:(os=h=!0,(U===2||U===9||U===3||U===6)&&(U=Ni.current,U!==null&&U.tag===13&&(U.flags|=16384))),ju(m,h)):zr(m)}function zr(h){var m=h;do{if((m.flags&32768)!==0){ju(m,os);return}h=m.return;var N=Hg(m.alternate,m,Ki);if(N!==null){en=N;return}if(m=m.sibling,m!==null){en=m;return}en=m=h}while(m!==null);_a===0&&(_a=5)}function ju(h,m){do{var N=jr(h.alternate,h);if(N!==null){N.flags&=32767,en=N;return}if(N=h.return,N!==null&&(N.flags|=32768,N.subtreeFlags=0,N.deletions=null),!m&&(h=h.sibling,h!==null)){en=h;return}en=h=N}while(h!==null);_a=6,en=null}function Ii(h,m,N,U,q,K,xe,fe,pe){h.cancelPendingCommit=null;do No();while(v!==0);if((bn&6)!==0)throw Error(a(327));if(m!==null){if(m===h.current)throw Error(a(177));if(K=m.lanes|m.childLanes,K|=Qd,j(h,N,K,xe,fe,pe),h===ei&&(en=ei=null,jn=0),z=m,R=h,V=N,Z=K,ge=q,je=U,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,np(ir,function(){return Il(),null})):(h.callbackNode=null,h.callbackPriority=0),U=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||U){U=hn.T,hn.T=null,q=ol(),Cs(2),xe=bn,bn|=4;try{Gg(h,m,N)}finally{bn=xe,Cs(q),hn.T=U}}v=1,au(),ep(),Ec()}}function au(){if(v===1){v=0;var h=R,m=z,N=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||N){N=hn.T,hn.T=null;var U=ol();Cs(2);var q=bn;bn|=4;try{Hh(m,h),Wn(h.containerInfo)}finally{bn=q,Cs(U),hn.T=N}}h.current=m,v=2}}function ep(){if(v===2){v=0;var h=R,m=z,N=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||N){N=hn.T,hn.T=null;var U=ol();Cs(2);var q=bn;bn|=4;try{Pl(h,m.alternate,m)}finally{bn=q,Cs(U),hn.T=N}}v=3}}function Ec(){if(v===4||v===3){v=0,b0();var h=R,m=z,N=V,U=je;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?v=5:(v=0,z=R=null,zl(h,h.pendingLanes));var q=h.pendingLanes;if(q===0&&(p=null),Q(N),m=m.stateNode,As&&typeof As.onCommitFiberRoot=="function")try{As.onCommitFiberRoot(ul,m,void 0,(m.current.flags&128)===128)}catch{}if(U!==null){m=hn.T,q=ol(),Cs(2),hn.T=null;try{for(var K=h.onRecoverableError,xe=0;xe<U.length;xe++){var fe=U[xe];K(fe.value,{componentStack:fe.stack})}}finally{hn.T=m,Cs(q)}}(V&3)!==0&&No(),Te(h),q=h.pendingLanes,(N&4194090)!==0&&(q&42)!==0?h===yt?We++:(We=0,yt=h):We=0,ze(0)}}function zl(h,m){(h.pooledCacheLanes&=m)===0&&(m=h.pooledCache,m!=null&&(h.pooledCache=null,Ve(m)))}function No(h){return au(),ep(),Ec(),Il()}function Il(){if(v!==5)return!1;var h=R,m=Z;Z=0;var N=Q(V),U=32>N?32:N;N=hn.T;var q=ol();try{Cs(U),hn.T=null,U=ge,ge=null;var K=R,xe=V;if(v=0,z=R=null,V=0,(bn&6)!==0)throw Error(a(331));var fe=bn;if(bn|=4,gr(K.current),yc(K,K.current,xe,U),bn=fe,ze(0,!1),As&&typeof As.onPostCommitFiberRoot=="function")try{As.onPostCommitFiberRoot(ul,K)}catch{}return!0}finally{Cs(q),hn.T=N,zl(h,m)}}function tp(h,m,N){m=G(N,m),m=Rd(h.stateNode,m,2),h=un(h,m,2),h!==null&&(F(h,2),Te(h))}function Ci(h,m,N){if(h.tag===3)tp(h,h,N);else for(;m!==null;){if(m.tag===3){tp(m,h,N);break}else if(m.tag===1){var U=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof U.componentDidCatch=="function"&&(p===null||!p.has(U))){h=G(N,h),N=lm(2),U=un(m,N,2),U!==null&&(qf(N,U,m,h),F(U,2),Te(U));break}}m=m.return}}function Ir(h,m,N){var U=h.pingCache;if(U===null){U=h.pingCache=new go;var q=new Set;U.set(m,q)}else q=U.get(m),q===void 0&&(q=new Set,U.set(m,q));q.has(N)||(zc=!0,q.add(N),h=qh.bind(null,h,m,N),m.then(h,h))}function qh(h,m,N){var U=h.pingCache;U!==null&&U.delete(m),h.pingedLanes|=h.suspendedLanes&N,h.warmLanes&=~N,ei===h&&(jn&N)===N&&(_a===4||_a===3&&(jn&62914560)===jn&&300>sa()-Jd?(bn&2)===0&&Lr(h,0):Qu|=N,lr===jn&&(lr=0)),Te(h)}function al(h,m){m===0&&(m=P()),h=la(h,m),h!==null&&(F(h,m),Te(h))}function Xa(h){var m=h.memoizedState,N=0;m!==null&&(N=m.retryLane),al(h,N)}function Xh(h,m){var N=0;switch(h.tag){case 13:var U=h.stateNode,q=h.memoizedState;q!==null&&(N=q.retryLane);break;case 19:U=h.stateNode;break;case 22:U=h.stateNode._retryCache;break;default:throw Error(a(314))}U!==null&&U.delete(m),al(h,N)}function np(h,m){return lf(h,m)}function hm(h,m,N,U){this.tag=h,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=U,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fm(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Bl(h,m){var N=h.alternate;return N===null?(N=t(h.tag,m,h.key,h.mode),N.elementType=h.elementType,N.type=h.type,N.stateNode=h.stateNode,N.alternate=h,h.alternate=N):(N.pendingProps=m,N.type=h.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=h.flags&65011712,N.childLanes=h.childLanes,N.lanes=h.lanes,N.child=h.child,N.memoizedProps=h.memoizedProps,N.memoizedState=h.memoizedState,N.updateQueue=h.updateQueue,m=h.dependencies,N.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},N.sibling=h.sibling,N.index=h.index,N.ref=h.ref,N.refCleanup=h.refCleanup,N}function Za(h,m){h.flags&=65011714;var N=h.alternate;return N===null?(h.childLanes=0,h.lanes=m,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=N.childLanes,h.lanes=N.lanes,h.child=N.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=N.memoizedProps,h.memoizedState=N.memoizedState,h.updateQueue=N.updateQueue,h.type=N.type,m=N.dependencies,h.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),h}function Pu(h,m,N,U,q,K){var xe=0;if(U=h,typeof h=="function")fm(h)&&(xe=1);else if(typeof h=="string")xe=br&&ii?Kd(h,N,Mi.current)?26:Om(h)?27:5:br?Kd(h,N,Mi.current)?26:5:ii&&Om(h)?27:5;else e:switch(h){case Tc:return h=t(31,N,m,q),h.elementType=Tc,h.lanes=K,h;case wc:return Ro(N.children,q,K,m);case Iu:xe=8,q|=24;break;case Hd:return h=t(12,N,m,q|2),h.elementType=Hd,h.lanes=K,h;case Kh:return h=t(13,N,m,q),h.elementType=Kh,h.lanes=K,h;case Mn:return h=t(19,N,m,q),h.elementType=Mn,h.lanes=K,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case Do:case Mc:xe=10;break e;case ip:xe=9;break e;case sl:xe=11;break e;case Oo:xe=14;break e;case $s:xe=16,U=null;break e}xe=29,N=Error(a(130,h===null?"null":typeof h,"")),U=null}return m=t(xe,N,m,q),m.elementType=h,m.type=U,m.lanes=K,m}function Ro(h,m,N,U){return h=t(7,h,U,m),h.lanes=N,h}function su(h,m,N){return h=t(6,h,null,m),h.lanes=N,h}function Uu(h,m,N){return m=t(4,h.children!==null?h.children:[],h.key,m),m.lanes=N,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}function Yn(h,m,N,U,q,K,xe,fe){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ba,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=B(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=B(0),this.hiddenUpdates=B(null),this.identifierPrefix=U,this.onUncaughtError=q,this.onCaughtError=K,this.onRecoverableError=xe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=fe,this.incompleteTransitions=new Map}function Lu(h,m,N,U,q,K,xe,fe,pe,Ce,qe,pt){return h=new Yn(h,m,N,xe,fe,pe,Ce,pt),m=1,K===!0&&(m|=24),K=t(3,null,null,m),h.current=K,K.stateNode=h,m=He(),m.refCount++,h.pooledCache=m,m.refCount++,K.memoizedState={element:U,isDehydrated:N,cache:m},_s(K),h}function Br(h){return h?(h=ql,h):ql}function Yh(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(a(188)):(h=Object.keys(h).join(","),Error(a(268,h)));return h=l(m),h=h!==null?d(h):null,h===null?null:qd(h.stateNode)}function Vg(h,m,N,U,q,K){q=Br(q),U.context===null?U.context=q:U.pendingContext=q,U=Ra(m),U.payload={element:N},K=K===void 0?null:K,K!==null&&(U.callback=K),N=un(h,U,m),N!==null&&(Us(N,h,m),Ss(N,h,m))}function kd(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var N=h.retryLane;h.retryLane=N!==0&&N<m?N:m}}function Fr(h,m){kd(h,m),(h=h.alternate)&&kd(h,m)}var kn={},Wh=Lf(),Js=u3(),zu=Object.assign,pm=Symbol.for("react.element"),kr=Symbol.for("react.transitional.element"),Fl=Symbol.for("react.portal"),wc=Symbol.for("react.fragment"),Iu=Symbol.for("react.strict_mode"),Hd=Symbol.for("react.profiler"),Do=Symbol.for("react.provider"),ip=Symbol.for("react.consumer"),Mc=Symbol.for("react.context"),sl=Symbol.for("react.forward_ref"),Kh=Symbol.for("react.suspense"),Mn=Symbol.for("react.suspense_list"),Oo=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),Tc=Symbol.for("react.activity"),Gd=Symbol.for("react.memo_cache_sentinel"),ap=Symbol.iterator,Zh=Symbol.for("react.client.reference"),Cc=Array.isArray,hn=Wh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qg=e.rendererVersion,Vd=e.rendererPackageName,Qh=e.extraDevToolsConfig,qd=e.getPublicInstance,mm=e.getRootHostContext,Jh=e.getChildHostContext,Ac=e.prepareForCommit,Wn=e.resetAfterCommit,Zi=e.createInstance;e.cloneMutableInstance;var Ya=e.appendInitialChild,$h=e.finalizeInitialChildren,rl=e.shouldSetTextContent,er=e.createTextInstance;e.cloneMutableTextInstance;var ps=e.scheduleTimeout,jo=e.cancelTimeout,Ba=e.noTimeout,kl=e.isPrimaryRenderer;e.warnsIfNotActing;var yi=e.supportsMutation,Fa=e.supportsPersistence,is=e.supportsHydration,Xg=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var Yg=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Cs=e.setCurrentUpdatePriority,ol=e.getCurrentUpdatePriority,sp=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var gm=e.shouldAttemptEagerTransition,xr=e.detachDeletedInstance;e.requestPostPaintCallback;var as=e.maySuspendCommit,Nc=e.preloadInstance,ll=e.startSuspendingCommit,ef=e.suspendInstance;e.suspendOnActiveViewTransition;var vm=e.waitForCommitToBeReady,Hr=e.NotPendingTransition,Gr=e.HostTransitionContext,ym=e.resetFormInstance;e.bindToConsole;var xm=e.supportsMicrotasks,Wg=e.scheduleMicrotask,Hl=e.supportsTestSelectors,Kg=e.findFiberRoot,Zg=e.getBoundingRect,Qg=e.getTextContent,Xd=e.isHiddenSubtree,bm=e.matchAccessibilityRole,Jg=e.setFocusIfFocusable,Qv=e.setupIntersectionObserver,$g=e.appendChild,e0=e.appendChildToContainer,t0=e.commitTextUpdate,_m=e.commitMount,n0=e.commitUpdate,Sm=e.insertBefore,i0=e.insertInContainerBefore,a0=e.removeChild,s0=e.removeChildFromContainer,r0=e.resetTextContent,o0=e.hideInstance,Yd=e.hideTextInstance,tf=e.unhideInstance,Em=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopGestureTransition,e.getCurrentGestureOffset,e.subscribeToGestureDirection,e.createViewTransitionInstance;var rp=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var Wd=e.cloneInstance,op=e.createContainerChildSet,lp=e.appendChildToContainerChildSet,cp=e.finalizeContainerChildren,nf=e.replaceContainerChildren,wm=e.cloneHiddenInstance,Mm=e.cloneHiddenTextInstance,af=e.isSuspenseInstancePending,up=e.isSuspenseInstanceFallback,Tm=e.getSuspenseInstanceFallbackErrorDetails,dp=e.registerSuspenseInstanceRetry,l0=e.canHydrateFormStateMarker,c0=e.isFormStateMarkerMatching,u0=e.getNextHydratableSibling,Cm=e.getNextHydratableSiblingAfterSingleton,d0=e.getFirstHydratableChild,h0=e.getFirstHydratableChildWithinContainer,Am=e.getFirstHydratableChildWithinSuspenseInstance,f0=e.getFirstHydratableChildWithinSingleton,p0=e.canHydrateInstance,Jv=e.canHydrateTextInstance,$v=e.canHydrateSuspenseInstance,m0=e.hydrateInstance,sf=e.hydrateTextInstance,hp=e.hydrateSuspenseInstance,fp=e.getNextHydratableInstanceAfterSuspenseInstance,g0=e.commitHydratedContainer,ro=e.commitHydratedSuspenseInstance,rf=e.clearSuspenseBoundary,pp=e.clearSuspenseBoundaryFromContainer,mp=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var v0=e.validateHydratableInstance,Bu=e.validateHydratableTextInstance,br=e.supportsResources,Kd=e.isHostHoistableType,ru=e.getHoistableRoot,of=e.getResource,Nm=e.acquireResource,Rm=e.releaseResource,Fu=e.hydrateHoistable,Dm=e.mountHoistable,aa=e.unmountHoistable,cl=e.createHoistableInstance,ou=e.prepareToCommitHoistables,y0=e.mayResourceSuspendCommit,Rc=e.preloadResource,Gl=e.suspendResource,ii=e.supportsSingletons,Vl=e.resolveSingletonInstance,lu=e.acquireSingletonInstance,tr=e.releaseSingletonInstance,Om=e.isHostSingletonType,ku=e.isSingletonScope,Po=[],Uo=-1,ql={},nr=Math.clz32?Math.clz32:w,x0=Math.log,gp=Math.LN2,_r=256,Hu=4194304,lf=Js.unstable_scheduleCallback,Zd=Js.unstable_cancelCallback,ey=Js.unstable_shouldYield,b0=Js.unstable_requestPaint,sa=Js.unstable_now,Wa=Js.unstable_ImmediatePriority,Vr=Js.unstable_UserBlockingPriority,ir=Js.unstable_NormalPriority,jm=Js.unstable_IdlePriority,Gu=Js.log,Vu=Js.unstable_setDisableYieldValue,ul=null,As=null,Sr,qr,Xl=!1,Lo=new WeakMap,ar=[],Da=0,Dc=null,oo=0,Ns=[],ra=0,ka=null,Kn=1,ss="",Mi=b(null),Oc=b(null),ms=b(null),Yl=b(null),xa=null,Ha=null,ai=!1,lo=null,bi=!1,cf=Error(a(519)),Rs=typeof Object.is=="function"?Object.is:he,jc=b(null),co=null,Qa=null,qu=typeof AbortController<"u"?AbortController:function(){var h=[],m=this.signal={aborted:!1,addEventListener:function(N,U){h.push(U)}};this.abort=function(){m.aborted=!0,h.forEach(function(N){return N()})}},Pc=Js.unstable_scheduleCallback,Xu=Js.unstable_NormalPriority,Bi={$$typeof:Mc,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Uc=null,Wl=null,Yu=!1,dl=!1,Kl=!1,uo=0,zo=null,Io=0,Fi=0,hl=null,Xr=hn.S;hn.S=function(h,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&Ae(h,m),Xr!==null&&Xr(h,m)};var Ai=b(null),gs=Object.prototype.hasOwnProperty,ho=Error(a(460)),Zn=Error(a(474)),mn=Error(a(542)),xi={then:function(){}},Ls=null,Ds=[],fo=0,Qd=0,Yr=!1,rs=!1,sr=b(null),Wu=b(0),Qi=0,On=null,Qn=null,Ui=null,po=!1,Lc=!1,Zl=!1,Yi=0,cu=0,Wr=null,fl=0,rr={readContext:Pt,use:an,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt},Ku={readContext:Pt,use:an,useCallback:function(h,m){return vt().memoizedState=[h,m===void 0?null:m],h},useContext:Pt,useEffect:Ff,useImperativeHandle:function(h,m,N){N=N!=null?N.concat([h]):null,Ed(4194308,4,Su.bind(null,m,h),N)},useLayoutEffect:function(h,m){return Ed(4194308,4,h,m)},useInsertionEffect:function(h,m){Ed(4,2,h,m)},useMemo:function(h,m){var N=vt();m=m===void 0?null:m;var U=h();if(Zl){J(!0);try{h()}finally{J(!1)}}return N.memoizedState=[U,m],U},useReducer:function(h,m,N){var U=vt();if(N!==void 0){var q=N(m);if(Zl){J(!0);try{N(m)}finally{J(!1)}}}else q=m;return U.memoizedState=U.baseState=q,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:q},U.queue=h,h=h.dispatch=lc.bind(null,On,h),[U.memoizedState,h]},useRef:function(h){var m=vt();return h={current:h},m.memoizedState=h},useState:function(h){h=Gn(h);var m=h.queue,N=Tu.bind(null,On,m);return m.dispatch=N,[h.memoizedState,N]},useDebugValue:Dh,useDeferredValue:function(h,m){var N=vt();return Tl(N,h,m)},useTransition:function(){var h=Gn(!1);return h=Md.bind(null,On,h.queue,!0,!1),vt().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,m,N){var U=On,q=vt();if(ai){if(N===void 0)throw Error(a(407));N=N()}else{if(N=m(),ei===null)throw Error(a(349));(jn&124)!==0||En(U,m,N)}q.memoizedState=N;var K={value:N,getSnapshot:m};return q.queue=K,Ff(na.bind(null,U,K,h),[h]),U.flags|=2048,rc(9,el(),Tn.bind(null,U,K,N,m),null),N},useId:function(){var h=vt(),m=ei.identifierPrefix;if(ai){var N=ss,U=Kn;N=(U&~(1<<32-nr(U)-1)).toString(32)+N,m=""+m+"R"+N,N=Yi++,0<N&&(m+="H"+N.toString(32)),m+=""}else N=fl++,m=""+m+"r"+N.toString(32)+"";return h.memoizedState=m},useHostTransitionStatus:Cl,useFormState:Ah,useActionState:Ah,useOptimistic:function(h){var m=vt();m.memoizedState=m.baseState=h;var N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=N,m=Zc.bind(null,On,!0,N),N.dispatch=m,[h,m]},useMemoCache:sn,useCacheRefresh:function(){return vt().memoizedState=Lg.bind(null,On)}},Pm={readContext:Pt,use:an,useCallback:Oh,useContext:Pt,useEffect:_u,useImperativeHandle:Ml,useInsertionEffect:tl,useLayoutEffect:wd,useMemo:kf,useReducer:Kt,useRef:Kc,useState:function(){return Kt(Ln)},useDebugValue:Dh,useDeferredValue:function(h,m){var N=Ut();return Eu(N,Qn.memoizedState,h,m)},useTransition:function(){var h=Kt(Ln)[0],m=Ut().memoizedState;return[typeof h=="boolean"?h:Gt(h),m]},useSyncExternalStore:vi,useId:wu,useHostTransitionStatus:Cl,useFormState:Bf,useActionState:Bf,useOptimistic:function(h,m){var N=Ut();return ha(N,Qn,h,m)},useMemoCache:sn,useCacheRefresh:Mu},_0={readContext:Pt,use:an,useCallback:Oh,useContext:Pt,useEffect:_u,useImperativeHandle:Ml,useInsertionEffect:tl,useLayoutEffect:wd,useMemo:kf,useReducer:Qt,useRef:Kc,useState:function(){return Qt(Ln)},useDebugValue:Dh,useDeferredValue:function(h,m){var N=Ut();return Qn===null?Tl(N,h,m):Eu(N,Qn.memoizedState,h,m)},useTransition:function(){var h=Qt(Ln)[0],m=Ut().memoizedState;return[typeof h=="boolean"?h:Gt(h),m]},useSyncExternalStore:vi,useId:wu,useHostTransitionStatus:Cl,useFormState:Rh,useActionState:Rh,useOptimistic:function(h,m){var N=Ut();return Qn!==null?ha(N,Qn,h,m):(N.baseState=h,[h,N.queue.dispatch])},useMemoCache:sn,useCacheRefresh:Mu},ki=null,Zu=0,Er=om(!0),pl=om(!1),Ni=b(null),Bo=null,Cn=b(0),zn={enqueueSetState:function(h,m,N){h=h._reactInternals;var U=Ms(),q=Ra(U);q.payload=m,N!=null&&(q.callback=N),m=un(h,q,U),m!==null&&(Us(m,h,U),Ss(m,h,U))},enqueueReplaceState:function(h,m,N){h=h._reactInternals;var U=Ms(),q=Ra(U);q.tag=1,q.payload=m,N!=null&&(q.callback=N),m=un(h,q,U),m!==null&&(Us(m,h,U),Ss(m,h,U))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var N=Ms(),U=Ra(N);U.tag=2,m!=null&&(U.callback=m),m=un(h,U,N),m!==null&&(Us(m,h,N),Ss(m,h,N))}},si=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},gn=Error(a(461)),dn=!1,ba={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Ja=!1,pa=!1,uu=!1,mo=typeof WeakSet=="function"?WeakSet:Set,Jn=null,Wi=null,Ga=!1,zs=null,Is=8192,Ri={getCacheForType:function(h){var m=Pt(Bi),N=m.data.get(h);return N===void 0&&(N=h(),m.data.set(h,N)),N}},Di=0,xn=1,ri=2,Hi=3,vs=4;if(typeof Symbol=="function"&&Symbol.for){var or=Symbol.for;Di=or("selector.component"),xn=or("selector.has_pseudo_class"),ri=or("selector.role"),Hi=or("selector.test_id"),vs=or("selector.text")}var go=typeof WeakMap=="function"?WeakMap:Map,bn=0,ei=null,en=null,jn=0,pi=0,Bs=null,os=!1,wr=!1,zc=!1,Ki=0,_a=0,Ka=0,Fo=0,Qu=0,ys=0,lr=0,Kr=null,ls=null,Ql=!1,Jd=0,Jl=1/0,Ju=null,p=null,v=0,R=null,z=null,V=0,Z=0,ge=null,je=null,We=0,yt=null;return kn.attemptContinuousHydration=function(h){if(h.tag===13){var m=la(h,67108864);m!==null&&Us(m,h,67108864),Fr(h,67108864)}},kn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var m=Ms();m=W(m);var N=la(h,m);N!==null&&Us(N,h,m),Fr(h,m)}},kn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var m=M(h.pendingLanes);if(m!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;m;){var N=1<<31-nr(m);h.entanglements[1]|=N,m&=~N}Te(h),(bn&6)===0&&(Jl=sa()+500,ze(0))}}break;case 13:m=la(h,2),m!==null&&Us(m,h,2),il(),Fr(h,2)}},kn.batchedUpdates=function(h,m){return h(m)},kn.createComponentSelector=function(h){return{$$typeof:Di,value:h}},kn.createContainer=function(h,m,N,U,q,K,xe,fe,pe,Ce){return Lu(h,m,!1,null,N,U,K,xe,fe,pe,Ce,null)},kn.createHasPseudoClassSelector=function(h){return{$$typeof:xn,value:h}},kn.createHydrationContainer=function(h,m,N,U,q,K,xe,fe,pe,Ce,qe,pt,It){return h=Lu(N,U,!0,h,q,K,fe,pe,Ce,qe,pt,It),h.context=Br(null),N=h.current,U=Ms(),U=W(U),q=Ra(U),q.callback=m??null,un(N,q,U),m=U,h.current.lanes=m,F(h,m),Te(h),h},kn.createPortal=function(h,m,N){var U=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fl,key:U==null?null:""+U,children:h,containerInfo:m,implementation:N}},kn.createRoleSelector=function(h){return{$$typeof:ri,value:h}},kn.createTestNameSelector=function(h){return{$$typeof:Hi,value:h}},kn.createTextSelector=function(h){return{$$typeof:vs,value:h}},kn.defaultOnCaughtError=function(h){console.error(h)},kn.defaultOnRecoverableError=function(h){si(h)},kn.defaultOnUncaughtError=function(h){si(h)},kn.deferredUpdates=function(h){var m=hn.T,N=ol();try{return Cs(32),hn.T=null,h()}finally{Cs(N),hn.T=m}},kn.discreteUpdates=function(h,m,N,U,q){var K=hn.T,xe=ol();try{return Cs(2),hn.T=null,h(m,N,U,q)}finally{Cs(xe),hn.T=K,bn===0&&(Jl=sa()+500)}},kn.findAllNodes=Fd,kn.findBoundingRects=function(h,m){if(!Hl)throw Error(a(363));m=Fd(h,m),h=[];for(var N=0;N<m.length;N++)h.push(Zg(m[N]));for(m=h.length-1;0<m;m--){N=h[m];for(var U=N.x,q=U+N.width,K=N.y,xe=K+N.height,fe=m-1;0<=fe;fe--)if(m!==fe){var pe=h[fe],Ce=pe.x,qe=Ce+pe.width,pt=pe.y,It=pt+pe.height;if(U>=Ce&&K>=pt&&q<=qe&&xe<=It){h.splice(m,1);break}else if(U!==Ce||N.width!==pe.width||It<K||pt>xe){if(!(K!==pt||N.height!==pe.height||qe<U||Ce>q)){Ce>U&&(pe.width+=Ce-U,pe.x=U),qe<q&&(pe.width=q-Ce),h.splice(m,1);break}}else{pt>K&&(pe.height+=pt-K,pe.y=K),It<xe&&(pe.height=xe-pt),h.splice(m,1);break}}}return h},kn.findHostInstance=Yh,kn.findHostInstanceWithNoPortals=function(h){return h=l(h),h=h!==null?f(h):null,h===null?null:qd(h.stateNode)},kn.findHostInstanceWithWarning=function(h){return Yh(h)},kn.flushPassiveEffects=No,kn.flushSyncFromReconciler=function(h){var m=bn;bn|=1;var N=hn.T,U=ol();try{if(Cs(2),hn.T=null,h)return h()}finally{Cs(U),hn.T=N,bn=m,(bn&6)===0&&ze(0)}},kn.flushSyncWork=il,kn.focusWithin=function(h,m){if(!Hl)throw Error(a(363));for(h=Gh(h),m=Bd(h,m),m=Array.from(m),h=0;h<m.length;){var N=m[h++],U=N.tag;if(!Xd(N)){if((U===5||U===26||U===27)&&Jg(N.stateNode))return!0;for(N=N.child;N!==null;)m.push(N),N=N.sibling}}return!1},kn.getFindAllNodesFailureDescription=function(h,m){if(!Hl)throw Error(a(363));var N=0,U=[];h=[Gh(h),0];for(var q=0;q<h.length;){var K=h[q++],xe=K.tag,fe=h[q++],pe=m[fe];if((xe!==5&&xe!==26&&xe!==27||!Xd(K))&&(ns(K,pe)&&(U.push(Ll(pe)),fe++,fe>N&&(N=fe)),fe<m.length))for(K=K.child;K!==null;)h.push(K,fe),K=K.sibling}if(N<m.length){for(h=[];N<m.length;N++)h.push(Ll(m[N]));return`findAllNodes was able to match part of the selector:
  `+(U.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},kn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return qd(h.child.stateNode);default:return h.child.stateNode}},kn.injectIntoDevTools=function(){var h={bundleType:0,version:qg,rendererPackageName:Vd,currentDispatcherRef:hn,reconcilerVersion:"19.1.0"};if(Qh!==null&&(h.rendererConfig=Qh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)h=!0;else{try{ul=m.inject(h),As=m}catch{}h=!!m.checkDCE}}return h},kn.isAlreadyRendering=function(){return(bn&6)!==0},kn.observeVisibleRects=function(h,m,N,U){if(!Hl)throw Error(a(363));h=Fd(h,m);var q=Qv(h,N,U).disconnect;return{disconnect:function(){q()}}},kn.shouldError=function(){return null},kn.shouldSuspend=function(){return!1},kn.startHostTransition=function(h,m,N,U){if(h.tag!==5)throw Error(a(476));var q=Ys(h).queue;Md(h,q,m,Hr,N===null?i:function(){var K=Ys(h).next.queue;return Al(h,K,{},Ms()),N(U)})},kn.updateContainer=function(h,m,N,U){var q=m.current,K=Ms();return Vg(q,K,h,m,N,U),K},kn.updateContainerSync=function(h,m,N,U){return Vg(m.current,2,h,m,N,U),2},kn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(ow)),ow.exports}var L4;function rF(){return L4||(L4=1,rw.exports=sF()),rw.exports}var oF=rF();const lF=Uf(oF);var lw={exports:{}},ff={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z4;function cF(){return z4||(z4=1,ff.ConcurrentRoot=1,ff.ContinuousEventPriority=8,ff.DefaultEventPriority=32,ff.DiscreteEventPriority=2,ff.IdleEventPriority=268435456,ff.LegacyRoot=0,ff.NoEventPriority=0),ff}var I4;function uF(){return I4||(I4=1,lw.exports=cF()),lw.exports}var e2=uF(),dF=Si();const B4={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let F4=!1,k4=!1;const I_=".react-konva-event",hF=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,fF=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,pF={};function t2(n,e,t=pF){if(!F4&&"zIndex"in e&&(console.warn(fF),F4=!0),!k4&&e.draggable){var i=e.x!==void 0||e.y!==void 0,a=e.onDragEnd||e.onDragMove;i&&!a&&(console.warn(hF),k4=!0)}for(var s in t)if(!B4[s]){var r=s.slice(0,2)==="on",l=t[s]!==e[s];if(r&&l){var d=s.substr(2).toLowerCase();d.substr(0,7)==="content"&&(d="content"+d.substr(7,1).toUpperCase()+d.substr(8)),n.off(d,t[s])}var f=!e.hasOwnProperty(s);f&&n.setAttr(s,void 0)}var g=e._useStrictMode,x={},b=!1;const _={};for(var s in e)if(!B4[s]){var r=s.slice(0,2)==="on",S=t[s]!==e[s];if(r&&S){var d=s.substr(2).toLowerCase();d.substr(0,7)==="content"&&(d="content"+d.substr(7,1).toUpperCase()+d.substr(8)),e[s]&&(_[d]=e[s])}!r&&(e[s]!==t[s]||g&&e[s]!==n.getAttr(s))&&(b=!0,x[s]=e[s])}b&&(n.setAttrs(x),Jp(n));for(var d in _)n.off(d+I_),n.on(d+I_,_[d])}function Jp(n){if(!dF.Konva.autoDrawEnabled){var e=n.getLayer()||n.getStage();e&&e.batchDraw()}}var cw=u3();const w8={},mF={};z_.Node.prototype._applyProps=t2;let M8=e2.DefaultEventPriority;function gF(n,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}n.add(e),Jp(n)}function vF(n,e,t){let i=z_[n];i||(console.error(`Konva has no node with the type ${n}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${n}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=z_.Group);const a={},s={};for(var r in e)if(r!=="ref"){var l=r.slice(0,2)==="on";l?s[r]=e[r]:a[r]=e[r]}const d=new i(a);return t2(d,s),d}function yF(n,e,t){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${n}"`)}function xF(n,e,t){return!1}function bF(n){return n}function _F(){return null}function SF(){return null}function EF(n,e,t,i){return mF}function wF(){}function MF(n){}function TF(n,e){return!1}function CF(){return w8}function AF(){return w8}const NF=setTimeout,RF=clearTimeout,DF=!0,OF=n=>{n()},jF=-1;function PF(n,e){return!1}const UF=!1,LF=!1,zF=!0,IF=!1,BF=!1;function FF(n,e){e.parent===n?e.moveToTop():n.add(e),Jp(n)}function kF(n,e){e.parent===n?e.moveToTop():n.add(e),Jp(n)}function T8(n,e,t){e._remove(),n.add(e),e.setZIndex(t.getZIndex()),Jp(n)}function HF(n,e,t){T8(n,e,t)}function GF(n,e){e.destroy(),e.off(I_),Jp(n)}function VF(n,e){e.destroy(),e.off(I_),Jp(n)}function qF(n,e,t){console.error(`Text components are not yet supported in ReactKonva. You text is: "${t}"`)}function XF(n,e,t){}function YF(n,e,t,i){t2(n,i,t)}function WF(n){n.hide(),Jp(n)}function KF(n){}function ZF(n,e){(e.visible==null||e.visible)&&n.show()}function QF(n,e){}function JF(n){}function $F(){}function ek(){return e2.DefaultEventPriority}function tk(){}function nk(){return null}function ik(n){M8=n}function ak(){return M8}function sk(){return e2.DiscreteEventPriority}function rk(){return!1}function ok(){}function lk(){return!1}function ck(){return!0}function uk(){}function dk(){}function hk(){return null}const fk=null;function pk(){}const mk=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:fk,appendChild:FF,appendChildToContainer:kF,appendInitialChild:gF,cancelTimeout:RF,clearContainer:JF,commitMount:XF,commitTextUpdate:qF,commitUpdate:YF,createInstance:vF,createTextInstance:yF,detachDeletedInstance:$F,finalizeInitialChildren:xF,getChildHostContext:AF,getCurrentEventPriority:ek,getCurrentUpdatePriority:ak,getInstanceFromScope:nk,getPublicInstance:bF,getRootHostContext:CF,hideInstance:WF,hideTextInstance:KF,idlePriority:cw.unstable_IdlePriority,insertBefore:T8,insertInContainerBefore:HF,isPrimaryRenderer:UF,maySuspendCommit:lk,noTimeout:jF,now:cw.unstable_now,preloadInstance:ck,prepareForCommit:_F,preparePortalMount:SF,prepareScopeUpdate:tk,prepareUpdate:EF,removeChild:GF,removeChildFromContainer:VF,requestPostPaintCallback:ok,resetAfterCommit:wF,resetFormInstance:pk,resetTextContent:MF,resolveUpdatePriority:sk,run:cw.unstable_runWithPriority,scheduleMicrotask:OF,scheduleTimeout:NF,setCurrentUpdatePriority:ik,shouldAttemptEagerTransition:rk,shouldDeprioritizeSubtree:TF,shouldSetTextContent:PF,startSuspendingCommit:uk,supportsHydration:BF,supportsMicrotasks:DF,supportsMutation:zF,supportsPersistence:IF,suspendInstance:dk,unhideInstance:ZF,unhideTextInstance:QF,waitForCommitToBeReady:hk,warnsIfNotActing:LF},Symbol.toStringTag,{value:"Module"}));function y3(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const a=y3(i,e,t);if(a)return a;i=e?null:i.sibling}}function C8(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const x3=C8(k.createContext(null));class b3 extends k.Component{render(){return k.createElement(x3.Provider,{value:this._reactInternals},this.props.children)}}function A8(){const n=k.useContext(x3);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=k.useId();return k.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=y3(t,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}const gk=Symbol.for("react.context"),vk=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===gk;function yk(){const n=A8(),[e]=k.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;vk(i)&&i!==x3&&!e.has(i)&&e.set(i,k.use(C8(i))),t=t.return}return e}function N8(){const n=yk();return k.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>k.createElement(e,null,k.createElement(t.Provider,{...i,value:n.get(t)})),e=>k.createElement(b3,{...e})),[n])}if(di.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function xk(n){const e=di.useRef({});return di.useLayoutEffect(()=>{e.current=n}),di.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const bk=()=>{const n=di.useRef(0);return di.useMemo(()=>{n.current++},[]),n.current>1},_k=n=>{const e=di.useRef(null),t=di.useRef(null),i=di.useRef(null),a=xk(n),s=N8(),r=di.useRef(!1),l=f=>{const{forwardedRef:g}=n;g&&(typeof g=="function"?g(f):g.current=f)},d=bk();return di.useLayoutEffect(()=>r.current&&d?()=>{r.current=!1,l(null),nv.updateContainer(null,i.current,null),t.current.destroy()}:(r.current=!0,t.current=new z_.Stage({width:n.width,height:n.height,container:e.current}),l(t.current),i.current=nv.createContainer(t.current,e2.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),nv.updateContainer(di.createElement(s,{},n.children),i.current,null,()=>{}),()=>{d||(l(null),nv.updateContainer(null,i.current,null),t.current.destroy())}),[]),di.useLayoutEffect(()=>{l(t.current),t2(t.current,n,a),nv.updateContainer(di.createElement(s,{},n.children),i.current,null)}),di.createElement("div",{ref:e,id:n.id,accessKey:n.accessKey,className:n.className,role:n.role,style:n.style,tabIndex:n.tabIndex,title:n.title})},uw="Layer",dw="Rect",nx="Line",hw="Text",nv=lF(mk);nv.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:di.version,rendererPackageName:"react-konva"});const Sk=di.forwardRef((n,e)=>di.createElement(b3,{},di.createElement(_k,{...n,forwardedRef:e}))),H4=n=>{let e;const t=new Set,i=(f,g)=>{const x=typeof f=="function"?f(e):f;if(!Object.is(x,e)){const b=e;e=g??(typeof x!="object"||x===null)?x:Object.assign({},e,x),t.forEach(_=>_(e,b))}},a=()=>e,l={setState:i,getState:a,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f))},d=e=n(i,a,l);return l},R8=n=>n?H4(n):H4,Ek=n=>n;function wk(n,e=Ek){const t=di.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return di.useDebugValue(t),t}const G4=n=>{const e=R8(n),t=i=>wk(e,i);return Object.assign(t,e),t},_3=n=>n?G4(n):G4;function ld(n){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+n+(t.length?" "+t.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function mv(n){return!!n&&!!n[Xc]}function mg(n){var e;return!!n&&(function(t){if(!t||typeof t!="object")return!1;var i=Object.getPrototypeOf(t);if(i===null)return!0;var a=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===Ok}(n)||Array.isArray(n)||!!n[Q4]||!!(!((e=n.constructor)===null||e===void 0)&&e[Q4])||S3(n)||E3(n))}function Vx(n,e,t){t===void 0&&(t=!1),Uv(n)===0?(t?Object.keys:A3)(n).forEach(function(i){t&&typeof i=="symbol"||e(i,n[i],n)}):n.forEach(function(i,a){return e(a,i,n)})}function Uv(n){var e=n[Xc];return e?e.i>3?e.i-4:e.i:Array.isArray(n)?1:S3(n)?2:E3(n)?3:0}function aT(n,e){return Uv(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function Mk(n,e){return Uv(n)===2?n.get(e):n[e]}function D8(n,e,t){var i=Uv(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function Tk(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e}function S3(n){return Rk&&n instanceof Map}function E3(n){return Dk&&n instanceof Set}function Qm(n){return n.o||n.t}function w3(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var e=jk(n);delete e[Xc];for(var t=A3(e),i=0;i<t.length;i++){var a=t[i],s=e[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:n[a]})}return Object.create(Object.getPrototypeOf(n),e)}function M3(n,e){return e===void 0&&(e=!1),T3(n)||mv(n)||!mg(n)||(Uv(n)>1&&(n.set=n.add=n.clear=n.delete=Ck),Object.freeze(n),e&&Vx(n,function(t,i){return M3(i,!0)},!0)),n}function Ck(){ld(2)}function T3(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function dh(n){var e=Pk[n];return e||ld(18,n),e}function V4(){return qx}function fw(n,e){e&&(dh("Patches"),n.u=[],n.s=[],n.v=e)}function B_(n){sT(n),n.p.forEach(Ak),n.p=null}function sT(n){n===qx&&(qx=n.l)}function q4(n){return qx={p:[],l:qx,h:n,m:!0,_:0}}function Ak(n){var e=n[Xc];e.i===0||e.i===1?e.j():e.g=!0}function pw(n,e){e._=e.p.length;var t=e.p[0],i=n!==void 0&&n!==t;return e.h.O||dh("ES5").S(e,n,i),i?(t[Xc].P&&(B_(e),ld(4)),mg(n)&&(n=F_(e,n),e.l||k_(e,n)),e.u&&dh("Patches").M(t[Xc].t,n,e.u,e.s)):n=F_(e,t,[]),B_(e),e.u&&e.v(e.u,e.s),n!==O8?n:void 0}function F_(n,e,t){if(T3(e))return e;var i=e[Xc];if(!i)return Vx(e,function(l,d){return X4(n,i,e,l,d,t)},!0),e;if(i.A!==n)return e;if(!i.P)return k_(n,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var a=i.i===4||i.i===5?i.o=w3(i.k):i.o,s=a,r=!1;i.i===3&&(s=new Set(a),a.clear(),r=!0),Vx(s,function(l,d){return X4(n,i,a,l,d,t,r)}),k_(n,a,!1),t&&n.u&&dh("Patches").N(i,t,n.u,n.s)}return i.o}function X4(n,e,t,i,a,s,r){if(mv(a)){var l=F_(n,a,s&&e&&e.i!==3&&!aT(e.R,i)?s.concat(i):void 0);if(D8(t,i,l),!mv(l))return;n.m=!1}else r&&t.add(a);if(mg(a)&&!T3(a)){if(!n.h.D&&n._<1)return;F_(n,a),e&&e.A.l||k_(n,a)}}function k_(n,e,t){t===void 0&&(t=!1),!n.l&&n.h.D&&n.m&&M3(e,t)}function mw(n,e){var t=n[Xc];return(t?Qm(t):n)[e]}function Y4(n,e){if(e in n)for(var t=Object.getPrototypeOf(n);t;){var i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Object.getPrototypeOf(t)}}function rT(n){n.P||(n.P=!0,n.l&&rT(n.l))}function gw(n){n.o||(n.o=w3(n.t))}function oT(n,e,t){var i=S3(e)?dh("MapSet").F(e,t):E3(e)?dh("MapSet").T(e,t):n.O?function(a,s){var r=Array.isArray(a),l={i:r?1:0,A:s?s.A:V4(),P:!1,I:!1,R:{},l:s,t:a,k:null,o:null,j:null,C:!1},d=l,f=lT;r&&(d=[l],f=Sx);var g=Proxy.revocable(d,f),x=g.revoke,b=g.proxy;return l.k=b,l.j=x,b}(e,t):dh("ES5").J(e,t);return(t?t.A:V4()).p.push(i),i}function Nk(n){return mv(n)||ld(22,n),function e(t){if(!mg(t))return t;var i,a=t[Xc],s=Uv(t);if(a){if(!a.P&&(a.i<4||!dh("ES5").K(a)))return a.t;a.I=!0,i=W4(t,s),a.I=!1}else i=W4(t,s);return Vx(i,function(r,l){a&&Mk(a.t,r)===l||D8(i,r,e(l))}),s===3?new Set(i):i}(n)}function W4(n,e){switch(e){case 2:return new Map(n);case 3:return Array.from(n)}return w3(n)}var K4,qx,C3=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Rk=typeof Map<"u",Dk=typeof Set<"u",Z4=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",O8=C3?Symbol.for("immer-nothing"):((K4={})["immer-nothing"]=!0,K4),Q4=C3?Symbol.for("immer-draftable"):"__$immer_draftable",Xc=C3?Symbol.for("immer-state"):"__$immer_state",Ok=""+Object.prototype.constructor,A3=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,jk=Object.getOwnPropertyDescriptors||function(n){var e={};return A3(n).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(n,t)}),e},Pk={},lT={get:function(n,e){if(e===Xc)return n;var t=Qm(n);if(!aT(t,e))return function(a,s,r){var l,d=Y4(s,r);return d?"value"in d?d.value:(l=d.get)===null||l===void 0?void 0:l.call(a.k):void 0}(n,t,e);var i=t[e];return n.I||!mg(i)?i:i===mw(n.t,e)?(gw(n),n.o[e]=oT(n.A.h,i,n)):i},has:function(n,e){return e in Qm(n)},ownKeys:function(n){return Reflect.ownKeys(Qm(n))},set:function(n,e,t){var i=Y4(Qm(n),e);if(i?.set)return i.set.call(n.k,t),!0;if(!n.P){var a=mw(Qm(n),e),s=a?.[Xc];if(s&&s.t===t)return n.o[e]=t,n.R[e]=!1,!0;if(Tk(t,a)&&(t!==void 0||aT(n.t,e)))return!0;gw(n),rT(n)}return n.o[e]===t&&(t!==void 0||e in n.o)||Number.isNaN(t)&&Number.isNaN(n.o[e])||(n.o[e]=t,n.R[e]=!0),!0},deleteProperty:function(n,e){return mw(n.t,e)!==void 0||e in n.t?(n.R[e]=!1,gw(n),rT(n)):delete n.R[e],n.o&&delete n.o[e],!0},getOwnPropertyDescriptor:function(n,e){var t=Qm(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.i!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty:function(){ld(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){ld(12)}},Sx={};Vx(lT,function(n,e){Sx[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Sx.deleteProperty=function(n,e){return Sx.set.call(this,n,e,void 0)},Sx.set=function(n,e,t){return lT.set.call(this,n[0],e,t,n[0])};var Uk=function(){function n(t){var i=this;this.O=Z4,this.D=!0,this.produce=function(a,s,r){if(typeof a=="function"&&typeof s!="function"){var l=s;s=a;var d=i;return function(w){var M=this;w===void 0&&(w=l);for(var E=arguments.length,T=Array(E>1?E-1:0),C=1;C<E;C++)T[C-1]=arguments[C];return d.produce(w,function(D){var P;return(P=s).call.apply(P,[M,D].concat(T))})}}var f;if(typeof s!="function"&&ld(6),r!==void 0&&typeof r!="function"&&ld(7),mg(a)){var g=q4(i),x=oT(i,a,void 0),b=!0;try{f=s(x),b=!1}finally{b?B_(g):sT(g)}return typeof Promise<"u"&&f instanceof Promise?f.then(function(w){return fw(g,r),pw(w,g)},function(w){throw B_(g),w}):(fw(g,r),pw(f,g))}if(!a||typeof a!="object"){if((f=s(a))===void 0&&(f=a),f===O8&&(f=void 0),i.D&&M3(f,!0),r){var _=[],S=[];dh("Patches").M(a,f,_,S),r(_,S)}return f}ld(21,a)},this.produceWithPatches=function(a,s){if(typeof a=="function")return function(f){for(var g=arguments.length,x=Array(g>1?g-1:0),b=1;b<g;b++)x[b-1]=arguments[b];return i.produceWithPatches(f,function(_){return a.apply(void 0,[_].concat(x))})};var r,l,d=i.produce(a,s,function(f,g){r=f,l=g});return typeof Promise<"u"&&d instanceof Promise?d.then(function(f){return[f,r,l]}):[d,r,l]},typeof t?.useProxies=="boolean"&&this.setUseProxies(t.useProxies),typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=n.prototype;return e.createDraft=function(t){mg(t)||ld(8),mv(t)&&(t=Nk(t));var i=q4(this),a=oT(this,t,void 0);return a[Xc].C=!0,sT(i),a},e.finishDraft=function(t,i){var a=t&&t[Xc],s=a.A;return fw(s,i),pw(void 0,s)},e.setAutoFreeze=function(t){this.D=t},e.setUseProxies=function(t){t&&!Z4&&ld(20),this.O=t},e.applyPatches=function(t,i){var a;for(a=i.length-1;a>=0;a--){var s=i[a];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}a>-1&&(i=i.slice(a+1));var r=dh("Patches").$;return mv(t)?r(t,i):this.produce(t,function(l){return r(l,i)})},n}(),Yc=new Uk,Lk=Yc.produce;Yc.produceWithPatches.bind(Yc);Yc.setAutoFreeze.bind(Yc);Yc.setUseProxies.bind(Yc);Yc.applyPatches.bind(Yc);Yc.createDraft.bind(Yc);Yc.finishDraft.bind(Yc);const zk=n=>(e,t,i)=>(i.setState=(a,s,...r)=>{const l=typeof a=="function"?Lk(a):a;return e(l,s,...r)},n(i.setState,t,i)),Ik=zk,ti=_3(Ik((n,e)=>({currentTool:"wall",viewMode:"2d",zoom:1,pan:{x:0,y:0},walls:[],rooms:[],furniture:[],selectedElement:null,lighting:{mainLight:.75,ambientLight:.3,temperature:6500},measurements:[],clearanceDetection:!0,measurementUnit:"ft",cameraView:"default",comments:[],activeComment:null,currentFloorPlan:null,apiConfig:{baseUrl:window.floorplannerConfig?.apiUrl||"/api/floorplanner",wsUrl:window.floorplannerConfig?.wsUrl||"/ws/floorplanner"},currentShareableLink:null,shareSettings:{privacy:"view-only",expirationDays:30,requiresLogin:!1,created:null},revisionHistory:[{id:"rev-1689247200000",timestamp:16892472e5,name:"Initial Design",description:"First floor plan layout",thumbnail:"https://via.placeholder.com/100x100/e2e8f0/475569?text=Rev+1",changes:{added:["wall-1","wall-2"],modified:[],deleted:[]}},{id:"rev-1689333600000",timestamp:16893336e5,name:"Added Bedroom",description:"Extended layout with additional bedroom",thumbnail:"https://via.placeholder.com/100x100/e2e8f0/475569?text=Rev+2",changes:{added:["room-1"],modified:["wall-2"],deleted:[]}},{id:"rev-1689420000000",timestamp:168942e7,name:"Furniture Layout",description:"Added furniture to living room and bedroom",thumbnail:"https://via.placeholder.com/100x100/e2e8f0/475569?text=Rev+3",changes:{added:["furniture-1","furniture-2"],modified:[],deleted:[]}}],currentRevision:"rev-1689420000000",setCurrentTool:t=>n({currentTool:t}),setViewMode:t=>n({viewMode:t}),setZoom:t=>n({zoom:Math.max(.2,Math.min(5,t))}),setPan:t=>n({pan:t}),setApiConfig:t=>n(i=>{i.apiConfig={...i.apiConfig,...t}}),initializeApp:()=>{console.log("FloorPlanner app initialized")},addWall:t=>n(i=>{i.walls.push({id:`wall-${Date.now()}`,type:"wall",...t})}),addFurniture:t=>n(i=>{i.furniture.push({id:`furniture-${Date.now()}`,type:"furniture",...t})}),setSelectedElement:t=>n({selectedElement:t}),setCurrentFloorPlan:t=>n({currentFloorPlan:t}),loadFloorPlan:async t=>{const i=e();try{const a=await fetch(`${i.apiConfig.baseUrl}/floorplans/${t}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(a.ok){const s=await a.json();if(n({currentFloorPlan:s}),s.data){const{walls:r,rooms:l,furniture:d,measurements:f}=s.data;n(g=>{g.walls=r||[],g.rooms=l||[],g.furniture=d||[],g.measurements=f||[]})}return s}}catch(a){return console.error("Failed to load floor plan:",a),null}},saveFloorPlan:async()=>{const t=e();if(!t.currentFloorPlan)return null;const i={walls:t.walls,rooms:t.rooms,furniture:t.furniture,measurements:t.measurements,lighting:t.lighting,viewMode:t.viewMode,zoom:t.zoom,pan:t.pan};try{const a=await fetch(`${t.apiConfig.baseUrl}/floorplans/${t.currentFloorPlan.id}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`,"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]")?.value||""},body:JSON.stringify({...t.currentFloorPlan,data:i})});if(a.ok){const s=await a.json();return n({currentFloorPlan:s}),s}}catch(a){return console.error("Failed to save floor plan:",a),null}},updateSceneLighting:t=>n(i=>{i.lighting={...i.lighting,...t}}),updateElement:t=>n(i=>{i.selectedElement&&(t.material&&console.log(`Applying material: ${t.material} to ${i.selectedElement.type}`),Object.assign(i.selectedElement,t))}),addMeasurement:t=>n(i=>{i.measurements.push({...t,id:t.id||`measurement-${Date.now()}`})}),removeMeasurement:t=>n(i=>{i.measurements=i.measurements.filter(a=>a.id!==t)}),setMeasurementUnit:t=>n({measurementUnit:t}),toggleClearanceDetection:()=>n(t=>{t.clearanceDetection=!t.clearanceDetection}),getClearanceIssues:()=>e().clearanceDetection?[{id:"issue-1",elementType:"door",elementId:"door-1",description:"Door swing area obstructed by furniture",severity:"error"},{id:"issue-2",elementType:"furniture",elementId:"furniture-3",description:"Furniture too close to wall outlet",severity:"warning"}]:[],setCameraView:t=>n({cameraView:t}),addComment:t=>n(i=>{i.comments.push(t),i.activeComment=t.id}),removeComment:t=>n(i=>{i.comments=i.comments.filter(a=>a.id!==t),i.activeComment===t&&(i.activeComment=null)}),addCommentReply:(t,i)=>n(a=>{const s=a.comments.find(r=>r.id===t);s&&(s.replies||(s.replies=[]),s.replies.push({id:`reply-${Date.now()}`,text:i,author:"Current User",createdAt:new Date().toISOString(),...typeof i=="object"?i:{}}))}),setActiveComment:t=>n(i=>{i.activeComment=t}),createShareableLink:(t={})=>n(i=>{const a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),r=`${window.location.origin}/floorplanner/preview/${a}`;return i.currentShareableLink=r,i.shareSettings={...i.shareSettings,...t,created:new Date().toISOString()},console.log("Created shareable link:",r,"with settings:",i.shareSettings),r}),updateShareSettings:t=>n(i=>{i.shareSettings={...i.shareSettings,...t},console.log("Updated share settings:",i.shareSettings)}),getSharedPlanData:t=>{console.log("Fetching shared plan data for link:",t);const{walls:i,rooms:a,furniture:s,measurements:r}=e();return{walls:i,rooms:a,furniture:s,measurements:r}},addViewerComment:t=>n(i=>{i.comments.push({...t,id:`comment-${Date.now()}`,createdAt:new Date().toISOString(),author:t.author||"Anonymous Viewer"}),i.activeComment=t.id}),createRevision:(t="",i="")=>n(a=>{const s=Date.now(),r=`rev-${s}`,l={id:r,timestamp:s,name:t||`Revision ${a.revisionHistory.length+1}`,description:i,thumbnail:"https://via.placeholder.com/100x100/e2e8f0/475569?text=New+Rev",changes:{added:[],modified:[],deleted:[]}};a.revisionHistory.push(l),a.currentRevision=r,console.log("Created new revision:",l)}),setCurrentRevision:t=>n(i=>{i.currentRevision=t,console.log("Restored to revision:",t)}),compareRevisions:(t,i)=>{const{revisionHistory:a}=e(),s=a.find(l=>l.id===t),r=a.find(l=>l.id===i);return s&&r?(console.log("Comparing revisions:",s.id,"and",r.id),{added:r.changes.added,removed:s.changes.added.filter(l=>!r.changes.added.includes(l)),modified:r.changes.modified}):null},autoSave:()=>{const{createRevision:t}=e();t("Auto-save","Automatic periodic save"),console.log("Auto-saved to cloud")},importCADFile:(t,i)=>(console.log("Importing CAD file:",t.name,"with layers:",i),n(a=>{i.forEach(d=>{d.importable&&(d.name==="Walls"&&(a.walls.push({id:`wall-import-${Date.now()}-1`,type:"wall",start:{x:100,y:100},end:{x:300,y:100},thickness:10,color:"#333333"}),a.walls.push({id:`wall-import-${Date.now()}-2`,type:"wall",start:{x:300,y:100},end:{x:300,y:300},thickness:10,color:"#333333"})),d.name==="Doors"&&a.furniture.push({id:`door-import-${Date.now()}`,type:"door",x:200,y:95,width:80,height:10,rotation:0,color:"#8b4513"}),d.name==="Windows"&&a.furniture.push({id:`window-import-${Date.now()}`,type:"window",x:300,y:200,width:10,height:60,rotation:0,color:"#add8e6"}),d.name==="Furniture"&&(a.furniture.push({id:`furniture-import-${Date.now()}-1`,type:"furniture",x:150,y:150,width:80,height:40,rotation:0,color:"#8b5cf6"}),a.furniture.push({id:`furniture-import-${Date.now()}-2`,type:"furniture",x:250,y:200,width:40,height:40,rotation:0,color:"#8b5cf6"})))});const s=Date.now(),r=`rev-${s}`,l={id:r,timestamp:s,name:`Imported ${t.name}`,description:`Imported ${i.filter(d=>d.importable).length} layers from CAD file`,thumbnail:"https://via.placeholder.com/100x100/e2e8f0/475569?text=Import",changes:{added:[...a.walls.slice(-2).map(d=>d.id),...a.furniture.slice(-3).map(d=>d.id)],modified:[],deleted:[]}};a.revisionHistory.push(l),a.currentRevision=r}),!0),saveFloorPlan:()=>{const{walls:t,rooms:i,furniture:a,measurements:s,createRevision:r}=e();return r("Manual Save","User-initiated save"),{walls:t,rooms:i,furniture:a,measurements:s}}}))),Bk=()=>{const{walls:n,rooms:e,furniture:t,addWall:i,currentTool:a,zoom:s,panX:r,panY:l,setPan:d,selectedElements:f,setSelectedElements:g,viewMode:x,addRoom:b,addFurniture:_,comments:S}=ti(),w=k.useRef(null),[M,E]=k.useState(!1),[T,C]=k.useState([]),[D,P]=k.useState({width:0,height:0}),[B,F]=k.useState(50),[j,O]=k.useState([{x:100,y:100,name:"Alice"},{x:200,y:150,name:"Bob"}]),[I,W]=k.useState([]),[Q,J]=k.useState(null);k.useEffect(()=>{Q&&ua.get(`/api/floorplanner/media/${Q}/geometry/`).then(Ee=>{Array.isArray(Ee.data)&&W(Ee.data)})},[Q]);const[te,oe]=k.useState([{x:120,y:120,text:"Try blue here?"}]),$=(Ee,Le,Ie)=>{oe(Et=>[...Et,{x:Ee,y:Le,text:Ie}])};k.useEffect(()=>{const Ee=document.querySelector(".canvas-container"),Le=()=>{Ee&&P({width:Ee.clientWidth,height:Ee.clientHeight})};Le(),window.addEventListener("resize",Le);const Ie=new ResizeObserver(Le);return Ee&&Ie.observe(Ee),()=>{window.removeEventListener("resize",Le),Ee&&Ie.unobserve(Ee)}},[]);const X=({gridSpacing:Ee=20})=>{const Le=[];if(!D.width)return null;for(let Ie=0;Ie<D.width/Ee+1;Ie++)Le.push(c.jsx(nx,{points:[Ie*Ee,0,Ie*Ee,D.height],stroke:"#e5e7eb",strokeWidth:.5},`v${Ie}`));for(let Ie=0;Ie<D.height/Ee+1;Ie++)Le.push(c.jsx(nx,{points:[0,Ie*Ee,D.width,Ie*Ee],stroke:"#e5e7eb",strokeWidth:.5},`h${Ie}`));return Le},G=({wall:Ee,isSelected:Le,onClick:Ie})=>c.jsx(nx,{points:Ee.points,stroke:Le?"#3b82f6":"#374151",strokeWidth:Ee.thickness||8,lineCap:"round",lineJoin:"round",onClick:Ie}),ee=({x:Ee,y:Le,onDragMove:Ie})=>c.jsx(dw,{x:Ee-6,y:Le-6,width:12,height:12,fill:"#3b82f6",draggable:!0,onDragMove:Ie,cornerRadius:3,shadowBlur:2}),Y=({room:Ee})=>c.jsx(hw,{x:Ee.x+Ee.width/2-40,y:Ee.y+Ee.height/2-10,text:`${Math.round(Ee.width)} x ${Math.round(Ee.height)} cm`,fontSize:14,fill:"#374151",fontStyle:"bold"}),ne=({room:Ee,isSelected:Le,onClick:Ie})=>c.jsxs(di.Fragment,{children:[c.jsx(dw,{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height,fill:Ee.color||"rgba(59, 130, 246, 0.1)",stroke:Le?"#3b82f6":"#9ca3af",strokeWidth:Le?2:1,onClick:Ie,onDrop:Et=>{const ct=Et.evt.dataTransfer.getData("material");ct&&ti.getState().updateElement({color:ct})},onDragOver:Et=>Et.evt.preventDefault()}),c.jsx(Y,{room:Ee}),Le&&c.jsx(ee,{x:Ee.x+Ee.width,y:Ee.y+Ee.height,onDragMove:Et=>{const ct=Math.max(20,Et.target.x()-Ee.x),At=Math.max(20,Et.target.y()-Ee.y);ti.getState().updateElement({width:ct,height:At})}})]}),ue=({item:Ee,isSelected:Le,onClick:Ie})=>c.jsxs(di.Fragment,{children:[c.jsx(dw,{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height,fill:Ee.color||"#8b5cf6",stroke:Le?"#3b82f6":"#6b7280",strokeWidth:Le?2:1,onClick:Ie,onDrop:Et=>{const ct=Et.evt.dataTransfer.getData("material");ct&&ti.getState().updateElement({color:ct})},onDragOver:Et=>Et.evt.preventDefault()}),c.jsx(hw,{x:Ee.x+5,y:Ee.y+5,text:Ee.label||"Furniture",fontSize:12,fill:"white"}),Le&&c.jsx(ee,{x:Ee.x+Ee.width,y:Ee.y+Ee.height,onDragMove:Et=>{const ct=Math.max(10,Et.target.x()-Ee.x),At=Math.max(10,Et.target.y()-Ee.y);ti.getState().updateElement({width:ct,height:At})}})]}),de=(Ee,Le)=>{a==="select"&&g([{...Ee,type:Le}])},ie=Ee=>{if(Ee.target===Ee.target.getStage()){g([]);const Le=Ee.target.getStage().getPointerPosition(),Ie={x:(Le.x-r)/s,y:(Le.y-l)/s};if(a==="room"&&b({x:Ie.x,y:Ie.y,width:100,height:100,color:"rgba(59, 130, 246, 0.1)",label:"New Room"}),a==="furniture"&&_({x:Ie.x,y:Ie.y,width:60,height:30,color:"#8b5cf6",label:"Furniture"}),a==="comment"){const{addComment:Et}=ti.getState();Et({id:`comment-${Date.now()}`,x:Ie.x,y:Ie.y,text:"Add your comment here...",createdAt:new Date().toISOString(),author:"Current User",replies:[]})}}};k.useEffect(()=>{const Ee=w.current?.getStage();if(!Ee)return;const Le=ct=>{if(a==="wall"){E(!0),ct.evt.touches[0];const At=Ee.getPointerPosition();C([At.x,At.y])}},Ie=ct=>{if(!M||a!=="wall")return;ct.evt.touches[0];const At=Ee.getPointerPosition();C(Pt=>[...Pt,At.x,At.y])},Et=()=>{M&&T.length>=4&&i({points:T,thickness:8,color:"#374151"}),E(!1),C([])};return Ee.on("touchstart",Le),Ee.on("touchmove",Ie),Ee.on("touchend",Et),()=>{Ee.off("touchstart",Le),Ee.off("touchmove",Ie),Ee.off("touchend",Et)}},[a,M,T,i]);const Me=({walls:Ee,rooms:Le,furniture:Ie})=>c.jsx("div",{className:"absolute top-4 right-4 bg-white shadow-lg rounded-lg p-4 z-50",style:{width:320,height:240},children:c.jsx("div",{className:"text-center text-gray-700",children:"Live 3D Preview (Three.js integration coming soon)"})}),ye=(Ee,Le,Ie)=>({x:0,y:0,z:500,lookAt:{x:0,y:0,z:0}});if(x==="3d"){const Ee=ye();return c.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 text-5xl",children:""}),c.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-800",children:"3D View"}),c.jsxs("p",{className:"text-gray-600",children:["3D visualization will be implemented with Three.js",c.jsx("br",{}),c.jsxs("span",{className:"text-xs",children:["Camera auto-set to optimal angle: ",JSON.stringify(Ee)]})]})]})})}const[ae,_e]=k.useState({active:!1,start:null,end:null}),[Ke,Ge]=k.useState([{message:"Door won't open!",type:"clearance"}]),[st,ft]=k.useState([]),[Pe,he]=k.useState(0),ke=Ee=>{ft(Le=>[...Le.slice(0,Pe+1),Ee]),he(Le=>Le+1)};return k.useEffect(()=>{ke({walls:n,rooms:e,furniture:t})},[n,e,t]),c.jsxs("div",{className:"canvas-container h-full w-full overflow-hidden relative",style:{background:B<33?"#f3f4f6":B<66?"#ffe4b5":"#23272f",transition:"background 0.3s"},onDoubleClick:Ee=>{const Le=Ee.currentTarget.getBoundingClientRect(),Ie=Ee.clientX-Le.left,Et=Ee.clientY-Le.top;$(Ie,Et,"New comment")},children:[c.jsxs(Sk,{width:D.width,height:D.height,scaleX:s,scaleY:s,x:r,y:l,onClick:ie,draggable:a==="select"||a==="pan",onDragEnd:Ee=>{(a==="select"||a==="pan")&&d(Ee.target.x(),Ee.target.y())},children:[c.jsx(uw,{children:I.map((Ee,Le)=>Ee.type==="line"?c.jsx(nx,{points:[...Ee.start,...Ee.end],stroke:"#10b981",strokeWidth:2,lineCap:"round",lineJoin:"round",dash:[8,4]},"dxf-line-"+Le):Ee.type==="polyline"?c.jsx(nx,{points:Ee.points.flat(),stroke:"#6366f1",strokeWidth:2,lineCap:"round",lineJoin:"round",closed:!0},"dxf-poly-"+Le):null)}),c.jsx(uw,{children:c.jsx(X,{})}),c.jsxs(uw,{children:[n.map(Ee=>c.jsx(G,{wall:Ee,isSelected:f.some(Le=>Le.id===Ee.id),onClick:()=>de(Ee,"wall")},Ee.id)),e.map(Ee=>c.jsx(ne,{room:Ee,isSelected:f.some(Le=>Le.id===Ee.id),onClick:()=>de(Ee,"room")},Ee.id)),t.map(Ee=>c.jsx(ue,{item:Ee,isSelected:f.some(Le=>Le.id===Ee.id),onClick:()=>de(Ee,"furniture")},Ee.id)),S&&S.map(Ee=>c.jsxs(Group,{x:Ee.x,y:Ee.y,onClick:Le=>{Le.cancelBubble=!0;const{setActiveComment:Ie}=ti.getState();Ie(Ee.id)},onTap:Le=>{Le.cancelBubble=!0;const{setActiveComment:Ie}=ti.getState();Ie(Ee.id)},cursor:"pointer",children:[c.jsx(Circle,{radius:8,fill:"#3b82f6",shadowColor:"black",shadowBlur:3,shadowOpacity:.3}),Ee.replies&&Ee.replies.length>0&&c.jsx(hw,{text:Ee.replies.length.toString(),fontSize:10,fill:"white",align:"center",verticalAlign:"middle",width:16,height:16,offsetX:8,offsetY:8})]},Ee.id))]})]}),c.jsx(Me,{walls:n,rooms:e,furniture:t})]})};var vw={exports:{}},pf={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J4;function Fk(){return J4||(J4=1,pf.ConcurrentRoot=1,pf.ContinuousEventPriority=8,pf.DefaultEventPriority=32,pf.DiscreteEventPriority=2,pf.IdleEventPriority=268435456,pf.LegacyRoot=0,pf.NoEventPriority=0),pf}var $4;function kk(){return $4||($4=1,vw.exports=Fk()),vw.exports}var E_=kk();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Lv="178",Jm={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},$m={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},j8=0,cT=1,P8=2,Hk=3,U8=0,n2=1,Ax=2,rd=3,Rf=0,Wo=1,cd=2,hh=0,ug=1,uT=2,dT=3,hT=4,L8=5,Lp=100,z8=101,I8=102,B8=103,F8=104,k8=200,H8=201,G8=202,V8=203,H_=204,G_=205,q8=206,X8=207,Y8=208,W8=209,K8=210,Z8=211,Q8=212,J8=213,$8=214,V_=0,q_=1,X_=2,gg=3,Y_=4,W_=5,K_=6,Z_=7,E1=0,eO=1,tO=2,fh=0,nO=1,iO=2,aO=3,N3=4,sO=5,rO=6,oO=7,fT="attached",lO="detached",qp=300,xh=301,Xp=302,gv=303,Xx=304,zv=306,Yx=1e3,fr=1001,Wx=1002,xo=1003,R3=1004,Gk=1004,iv=1005,Vk=1005,Aa=1006,Nx=1007,qk=1007,lh=1008,pT=1008,bl=1009,i2=1010,a2=1011,vv=1012,w1=1013,bh=1014,bs=1015,Jr=1016,s2=1017,r2=1018,yv=1020,D3=35902,O3=1021,j3=1022,Vs=1023,xv=1026,bv=1027,M1=1028,T1=1029,P3=1030,o2=1031,Xk=1032,l2=1033,Rx=33776,Dx=33777,Ox=33778,jx=33779,Q_=35840,J_=35841,$_=35842,eS=35843,tS=36196,nS=37492,iS=37496,aS=37808,sS=37809,rS=37810,oS=37811,lS=37812,cS=37813,uS=37814,dS=37815,hS=37816,fS=37817,pS=37818,mS=37819,gS=37820,vS=37821,Px=36492,yS=36494,xS=36495,U3=36283,bS=36284,_S=36285,SS=36286,cO=2200,uO=2201,dO=2202,Kx=2300,ES=2301,w_=2302,ag=2400,sg=2401,Zx=2402,c2=2500,L3=2501,Yk=0,Wk=1,Kk=2,hO=3200,fO=3201,Zk=3202,Qk=3203,$p=0,pO=1,Ef="",yo="srgb",fd="srgb-linear",Qx="linear",Ea="srgb",Jk=0,eg=7680,$k=7681,eH=7682,tH=7683,nH=34055,iH=34056,aH=5386,sH=512,rH=513,oH=514,lH=515,cH=516,uH=517,dH=518,mT=519,mO=512,gO=513,vO=514,z3=515,yO=516,xO=517,bO=518,_O=519,Jx=35044,hH=35048,fH=35040,pH=35045,mH=35049,gH=35041,vH=35046,yH=35050,xH=35042,bH="100",gT="300 es",vu=2e3,$x=2001,_H={COMPUTE:"compute",RENDER:"render"},SH={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},EH={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let wh=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const a=i[e];if(a!==void 0){const s=a.indexOf(t);s!==-1&&a.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const a=i.slice(0);for(let s=0,r=a.length;s<r;s++)a[s].call(this,e);e.target=null}}};const Ho=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let eR=1234567;const dg=Math.PI/180,_v=180/Math.PI;function Gc(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ho[n&255]+Ho[n>>8&255]+Ho[n>>16&255]+Ho[n>>24&255]+"-"+Ho[e&255]+Ho[e>>8&255]+"-"+Ho[e>>16&15|64]+Ho[e>>24&255]+"-"+Ho[t&63|128]+Ho[t>>8&255]+"-"+Ho[t>>16&255]+Ho[t>>24&255]+Ho[i&255]+Ho[i>>8&255]+Ho[i>>16&255]+Ho[i>>24&255]).toLowerCase()}function ni(n,e,t){return Math.max(e,Math.min(t,n))}function I3(n,e){return(n%e+e)%e}function wH(n,e,t,i,a){return i+(n-e)*(a-i)/(t-e)}function MH(n,e,t){return n!==e?(t-n)/(e-n):0}function Ux(n,e,t){return(1-t)*n+t*e}function TH(n,e,t,i){return Ux(n,e,1-Math.exp(-t*i))}function CH(n,e=1){return e-Math.abs(I3(n,e*2)-e)}function AH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function NH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function RH(n,e){return n+Math.floor(Math.random()*(e-n+1))}function DH(n,e){return n+Math.random()*(e-n)}function OH(n){return n*(.5-Math.random())}function jH(n){n!==void 0&&(eR=n);let e=eR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function PH(n){return n*dg}function UH(n){return n*_v}function LH(n){return(n&n-1)===0&&n!==0}function zH(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function IH(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function BH(n,e,t,i,a){const s=Math.cos,r=Math.sin,l=s(t/2),d=r(t/2),f=s((e+i)/2),g=r((e+i)/2),x=s((e-i)/2),b=r((e-i)/2),_=s((i-e)/2),S=r((i-e)/2);switch(a){case"XYX":n.set(l*g,d*x,d*b,l*f);break;case"YZY":n.set(d*b,l*g,d*x,l*f);break;case"ZXZ":n.set(d*x,d*b,l*g,l*f);break;case"XZX":n.set(l*g,d*S,d*_,l*f);break;case"YXY":n.set(d*_,l*g,d*S,l*f);break;case"ZYZ":n.set(d*S,d*_,l*g,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function yl(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ui(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const SO={DEG2RAD:dg,RAD2DEG:_v,generateUUID:Gc,clamp:ni,euclideanModulo:I3,mapLinear:wH,inverseLerp:MH,lerp:Ux,damp:TH,pingpong:CH,smoothstep:AH,smootherstep:NH,randInt:RH,randFloat:DH,randFloatSpread:OH,seededRandom:jH,degToRad:PH,radToDeg:UH,isPowerOfTwo:LH,ceilPowerOfTwo:zH,floorPowerOfTwo:IH,setQuaternionFromProperEuler:BH,normalize:ui,denormalize:yl};class wt{constructor(e=0,t=0){wt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6],this.y=a[1]*t+a[4]*i+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=ni(this.x,e.x,t.x),this.y=ni(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=ni(this.x,e,t),this.y=ni(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ni(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ni(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),a=Math.sin(t),s=this.x-e.x,r=this.y-e.y;return this.x=s*i-r*a+e.x,this.y=s*a+r*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ko{constructor(e=0,t=0,i=0,a=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=a}static slerpFlat(e,t,i,a,s,r,l){let d=i[a+0],f=i[a+1],g=i[a+2],x=i[a+3];const b=s[r+0],_=s[r+1],S=s[r+2],w=s[r+3];if(l===0){e[t+0]=d,e[t+1]=f,e[t+2]=g,e[t+3]=x;return}if(l===1){e[t+0]=b,e[t+1]=_,e[t+2]=S,e[t+3]=w;return}if(x!==w||d!==b||f!==_||g!==S){let M=1-l;const E=d*b+f*_+g*S+x*w,T=E>=0?1:-1,C=1-E*E;if(C>Number.EPSILON){const P=Math.sqrt(C),B=Math.atan2(P,E*T);M=Math.sin(M*B)/P,l=Math.sin(l*B)/P}const D=l*T;if(d=d*M+b*D,f=f*M+_*D,g=g*M+S*D,x=x*M+w*D,M===1-l){const P=1/Math.sqrt(d*d+f*f+g*g+x*x);d*=P,f*=P,g*=P,x*=P}}e[t]=d,e[t+1]=f,e[t+2]=g,e[t+3]=x}static multiplyQuaternionsFlat(e,t,i,a,s,r){const l=i[a],d=i[a+1],f=i[a+2],g=i[a+3],x=s[r],b=s[r+1],_=s[r+2],S=s[r+3];return e[t]=l*S+g*x+d*_-f*b,e[t+1]=d*S+g*b+f*x-l*_,e[t+2]=f*S+g*_+l*b-d*x,e[t+3]=g*S-l*x-d*b-f*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,a){return this._x=e,this._y=t,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,a=e._y,s=e._z,r=e._order,l=Math.cos,d=Math.sin,f=l(i/2),g=l(a/2),x=l(s/2),b=d(i/2),_=d(a/2),S=d(s/2);switch(r){case"XYZ":this._x=b*g*x+f*_*S,this._y=f*_*x-b*g*S,this._z=f*g*S+b*_*x,this._w=f*g*x-b*_*S;break;case"YXZ":this._x=b*g*x+f*_*S,this._y=f*_*x-b*g*S,this._z=f*g*S-b*_*x,this._w=f*g*x+b*_*S;break;case"ZXY":this._x=b*g*x-f*_*S,this._y=f*_*x+b*g*S,this._z=f*g*S+b*_*x,this._w=f*g*x-b*_*S;break;case"ZYX":this._x=b*g*x-f*_*S,this._y=f*_*x+b*g*S,this._z=f*g*S-b*_*x,this._w=f*g*x+b*_*S;break;case"YZX":this._x=b*g*x+f*_*S,this._y=f*_*x+b*g*S,this._z=f*g*S-b*_*x,this._w=f*g*x-b*_*S;break;case"XZY":this._x=b*g*x-f*_*S,this._y=f*_*x-b*g*S,this._z=f*g*S+b*_*x,this._w=f*g*x+b*_*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,a=Math.sin(i);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],a=t[4],s=t[8],r=t[1],l=t[5],d=t[9],f=t[2],g=t[6],x=t[10],b=i+l+x;if(b>0){const _=.5/Math.sqrt(b+1);this._w=.25/_,this._x=(g-d)*_,this._y=(s-f)*_,this._z=(r-a)*_}else if(i>l&&i>x){const _=2*Math.sqrt(1+i-l-x);this._w=(g-d)/_,this._x=.25*_,this._y=(a+r)/_,this._z=(s+f)/_}else if(l>x){const _=2*Math.sqrt(1+l-i-x);this._w=(s-f)/_,this._x=(a+r)/_,this._y=.25*_,this._z=(d+g)/_}else{const _=2*Math.sqrt(1+x-i-l);this._w=(r-a)/_,this._x=(s+f)/_,this._y=(d+g)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ni(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const a=Math.min(1,t/i);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,a=e._y,s=e._z,r=e._w,l=t._x,d=t._y,f=t._z,g=t._w;return this._x=i*g+r*l+a*f-s*d,this._y=a*g+r*d+s*l-i*f,this._z=s*g+r*f+i*d-a*l,this._w=r*g-i*l-a*d-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,a=this._y,s=this._z,r=this._w;let l=r*e._w+i*e._x+a*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=r,this._x=i,this._y=a,this._z=s,this;const d=1-l*l;if(d<=Number.EPSILON){const _=1-t;return this._w=_*r+t*this._w,this._x=_*i+t*this._x,this._y=_*a+t*this._y,this._z=_*s+t*this._z,this.normalize(),this}const f=Math.sqrt(d),g=Math.atan2(f,l),x=Math.sin((1-t)*g)/f,b=Math.sin(t*g)/f;return this._w=r*x+this._w*b,this._x=i*x+this._x*b,this._y=a*x+this._y*b,this._z=s*x+this._z*b,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),a=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(a*Math.sin(e),a*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class be{constructor(e=0,t=0,i=0){be.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(tR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(tR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,a=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*a,this.y=s[1]*t+s[4]*i+s[7]*a,this.z=s[2]*t+s[5]*i+s[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,s=e.elements,r=1/(s[3]*t+s[7]*i+s[11]*a+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*a+s[12])*r,this.y=(s[1]*t+s[5]*i+s[9]*a+s[13])*r,this.z=(s[2]*t+s[6]*i+s[10]*a+s[14])*r,this}applyQuaternion(e){const t=this.x,i=this.y,a=this.z,s=e.x,r=e.y,l=e.z,d=e.w,f=2*(r*a-l*i),g=2*(l*t-s*a),x=2*(s*i-r*t);return this.x=t+d*f+r*x-l*g,this.y=i+d*g+l*f-s*x,this.z=a+d*x+s*g-r*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,a=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*a,this.y=s[1]*t+s[5]*i+s[9]*a,this.z=s[2]*t+s[6]*i+s[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=ni(this.x,e.x,t.x),this.y=ni(this.y,e.y,t.y),this.z=ni(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=ni(this.x,e,t),this.y=ni(this.y,e,t),this.z=ni(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ni(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,a=e.y,s=e.z,r=t.x,l=t.y,d=t.z;return this.x=a*d-s*l,this.y=s*r-i*d,this.z=i*l-a*r,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return yw.copy(this).projectOnVector(e),this.sub(yw)}reflect(e){return this.sub(yw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ni(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,a=this.z-e.z;return t*t+i*i+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const a=Math.sin(t)*e;return this.x=a*Math.sin(i),this.y=Math.cos(t)*e,this.z=a*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=a,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const yw=new be,tR=new Ko;class oi{constructor(e,t,i,a,s,r,l,d,f){oi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,a,s,r,l,d,f)}set(e,t,i,a,s,r,l,d,f){const g=this.elements;return g[0]=e,g[1]=a,g[2]=l,g[3]=t,g[4]=s,g[5]=d,g[6]=i,g[7]=r,g[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,s=this.elements,r=i[0],l=i[3],d=i[6],f=i[1],g=i[4],x=i[7],b=i[2],_=i[5],S=i[8],w=a[0],M=a[3],E=a[6],T=a[1],C=a[4],D=a[7],P=a[2],B=a[5],F=a[8];return s[0]=r*w+l*T+d*P,s[3]=r*M+l*C+d*B,s[6]=r*E+l*D+d*F,s[1]=f*w+g*T+x*P,s[4]=f*M+g*C+x*B,s[7]=f*E+g*D+x*F,s[2]=b*w+_*T+S*P,s[5]=b*M+_*C+S*B,s[8]=b*E+_*D+S*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],a=e[2],s=e[3],r=e[4],l=e[5],d=e[6],f=e[7],g=e[8];return t*r*g-t*l*f-i*s*g+i*l*d+a*s*f-a*r*d}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],s=e[3],r=e[4],l=e[5],d=e[6],f=e[7],g=e[8],x=g*r-l*f,b=l*d-g*s,_=f*s-r*d,S=t*x+i*b+a*_;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/S;return e[0]=x*w,e[1]=(a*f-g*i)*w,e[2]=(l*i-a*r)*w,e[3]=b*w,e[4]=(g*t-a*d)*w,e[5]=(a*s-l*t)*w,e[6]=_*w,e[7]=(i*d-f*t)*w,e[8]=(r*t-i*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,a,s,r,l){const d=Math.cos(s),f=Math.sin(s);return this.set(i*d,i*f,-i*(d*r+f*l)+r+e,-a*f,a*d,-a*(-f*r+d*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(xw.makeScale(e,t)),this}rotate(e){return this.premultiply(xw.makeRotation(-e)),this}translate(e,t){return this.premultiply(xw.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<9;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const xw=new oi;function EO(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const FH={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function av(n,e){return new FH[n](e)}function e1(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function wO(){const n=e1("canvas");return n.style.display="block",n}const nR={};function lv(n){n in nR||(nR[n]=!0,console.warn(n))}function kH(n,e,t){return new Promise(function(i,a){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:a();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function HH(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function GH(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const iR=new oi().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),aR=new oi().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function VH(){const n={enabled:!0,workingColorSpace:fd,spaces:{},convert:function(a,s,r){return this.enabled===!1||s===r||!s||!r||(this.spaces[s].transfer===Ea&&(a.r=Tf(a.r),a.g=Tf(a.g),a.b=Tf(a.b)),this.spaces[s].primaries!==this.spaces[r].primaries&&(a.applyMatrix3(this.spaces[s].toXYZ),a.applyMatrix3(this.spaces[r].fromXYZ)),this.spaces[r].transfer===Ea&&(a.r=cv(a.r),a.g=cv(a.g),a.b=cv(a.b))),a},workingToColorSpace:function(a,s){return this.convert(a,this.workingColorSpace,s)},colorSpaceToWorking:function(a,s){return this.convert(a,s,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Ef?Qx:this.spaces[a].transfer},getLuminanceCoefficients:function(a,s=this.workingColorSpace){return a.fromArray(this.spaces[s].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,s,r){return a.copy(this.spaces[s].toXYZ).multiply(this.spaces[r].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,s){return lv("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(a,s)},toWorkingColorSpace:function(a,s){return lv("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(a,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[fd]:{primaries:e,whitePoint:i,transfer:Qx,toXYZ:iR,fromXYZ:aR,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:yo},outputColorSpaceConfig:{drawingBufferColorSpace:yo}},[yo]:{primaries:e,whitePoint:i,transfer:Ea,toXYZ:iR,fromXYZ:aR,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:yo}}}),n}const qi=VH();function Tf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function cv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let C0;class MO{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{C0===void 0&&(C0=e1("canvas")),C0.width=e.width,C0.height=e.height;const a=C0.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),i=C0}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=e1("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const a=i.getImageData(0,0,e.width,e.height),s=a.data;for(let r=0;r<s.length;r++)s[r]=Tf(s[r]/255)*255;return i.putImageData(a,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Tf(t[i]/255)*255):t[i]=Tf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let qH=0;class zp{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:qH++}),this.uuid=Gc(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},a=this.data;if(a!==null){let s;if(Array.isArray(a)){s=[];for(let r=0,l=a.length;r<l;r++)a[r].isDataTexture?s.push(bw(a[r].image)):s.push(bw(a[r]))}else s=bw(a);i.url=s}return t||(e.images[this.uuid]=i),i}}function bw(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?MO.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let XH=0;const _w=new be;class Pa extends wh{constructor(e=Pa.DEFAULT_IMAGE,t=Pa.DEFAULT_MAPPING,i=fr,a=fr,s=Aa,r=lh,l=Vs,d=bl,f=Pa.DEFAULT_ANISOTROPY,g=Ef){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:XH++}),this.uuid=Gc(),this.name="",this.source=new zp(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=s,this.minFilter=r,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=d,this.offset=new wt(0,0),this.repeat=new wt(1,1),this.center=new wt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new oi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(_w).x}get height(){return this.source.getSize(_w).y}get depth(){return this.source.getSize(_w).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}a&&i&&a.isVector2&&i.isVector2||a&&i&&a.isVector3&&i.isVector3||a&&i&&a.isMatrix3&&i.isMatrix3?a.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==qp)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Yx:e.x=e.x-Math.floor(e.x);break;case fr:e.x=e.x<0?0:1;break;case Wx:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Yx:e.y=e.y-Math.floor(e.y);break;case fr:e.y=e.y<0?0:1;break;case Wx:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Pa.DEFAULT_IMAGE=null;Pa.DEFAULT_MAPPING=qp;Pa.DEFAULT_ANISOTROPY=1;class $i{constructor(e=0,t=0,i=0,a=1){$i.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,a){return this.x=e,this.y=t,this.z=i,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,s=this.w,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*a+r[12]*s,this.y=r[1]*t+r[5]*i+r[9]*a+r[13]*s,this.z=r[2]*t+r[6]*i+r[10]*a+r[14]*s,this.w=r[3]*t+r[7]*i+r[11]*a+r[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,a,s;const d=e.elements,f=d[0],g=d[4],x=d[8],b=d[1],_=d[5],S=d[9],w=d[2],M=d[6],E=d[10];if(Math.abs(g-b)<.01&&Math.abs(x-w)<.01&&Math.abs(S-M)<.01){if(Math.abs(g+b)<.1&&Math.abs(x+w)<.1&&Math.abs(S+M)<.1&&Math.abs(f+_+E-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const C=(f+1)/2,D=(_+1)/2,P=(E+1)/2,B=(g+b)/4,F=(x+w)/4,j=(S+M)/4;return C>D&&C>P?C<.01?(i=0,a=.707106781,s=.707106781):(i=Math.sqrt(C),a=B/i,s=F/i):D>P?D<.01?(i=.707106781,a=0,s=.707106781):(a=Math.sqrt(D),i=B/a,s=j/a):P<.01?(i=.707106781,a=.707106781,s=0):(s=Math.sqrt(P),i=F/s,a=j/s),this.set(i,a,s,t),this}let T=Math.sqrt((M-S)*(M-S)+(x-w)*(x-w)+(b-g)*(b-g));return Math.abs(T)<.001&&(T=1),this.x=(M-S)/T,this.y=(x-w)/T,this.z=(b-g)/T,this.w=Math.acos((f+_+E-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=ni(this.x,e.x,t.x),this.y=ni(this.y,e.y,t.y),this.z=ni(this.z,e.z,t.z),this.w=ni(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=ni(this.x,e,t),this.y=ni(this.y,e,t),this.z=ni(this.z,e,t),this.w=ni(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ni(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class B3 extends wh{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Aa,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new $i(0,0,e,t),this.scissorTest=!1,this.viewport=new $i(0,0,e,t);const a={width:e,height:t,depth:i.depth},s=new Pa(a);this.textures=[];const r=i.count;for(let l=0;l<r;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:Aa,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let a=0,s=this.textures.length;a<s;a++)this.textures[a].image.width=e,this.textures[a].image.height=t,this.textures[a].image.depth=i,this.textures[a].isArrayTexture=this.textures[a].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const a=Object.assign({},e.textures[t].image);this.textures[t].source=new zp(a)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class sc extends B3{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class u2 extends Pa{constructor(e=null,t=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=xo,this.minFilter=xo,this.wrapR=fr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class YH extends sc{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new u2(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class d2 extends Pa{constructor(e=null,t=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=xo,this.minFilter=xo,this.wrapR=fr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WH extends sc{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new d2(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class pr{constructor(e=new be(1/0,1/0,1/0),t=new be(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(td.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(td.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=td.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let r=0,l=s.count;r<l;r++)e.isMesh===!0?e.getVertexPosition(r,td):td.fromBufferAttribute(s,r),td.applyMatrix4(e.matrixWorld),this.expandByPoint(td);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),rb.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),rb.copy(i.boundingBox)),rb.applyMatrix4(e.matrixWorld),this.union(rb)}const a=e.children;for(let s=0,r=a.length;s<r;s++)this.expandByObject(a[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,td),td.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ix),ob.subVectors(this.max,ix),A0.subVectors(e.a,ix),N0.subVectors(e.b,ix),R0.subVectors(e.c,ix),wp.subVectors(N0,A0),Mp.subVectors(R0,N0),Lm.subVectors(A0,R0);let t=[0,-wp.z,wp.y,0,-Mp.z,Mp.y,0,-Lm.z,Lm.y,wp.z,0,-wp.x,Mp.z,0,-Mp.x,Lm.z,0,-Lm.x,-wp.y,wp.x,0,-Mp.y,Mp.x,0,-Lm.y,Lm.x,0];return!Sw(t,A0,N0,R0,ob)||(t=[1,0,0,0,1,0,0,0,1],!Sw(t,A0,N0,R0,ob))?!1:(lb.crossVectors(wp,Mp),t=[lb.x,lb.y,lb.z],Sw(t,A0,N0,R0,ob))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,td).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(td).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(mf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),mf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),mf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),mf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),mf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),mf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),mf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),mf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(mf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const mf=[new be,new be,new be,new be,new be,new be,new be,new be],td=new be,rb=new pr,A0=new be,N0=new be,R0=new be,wp=new be,Mp=new be,Lm=new be,ix=new be,ob=new be,lb=new be,zm=new be;function Sw(n,e,t,i,a){for(let s=0,r=n.length-3;s<=r;s+=3){zm.fromArray(n,s);const l=a.x*Math.abs(zm.x)+a.y*Math.abs(zm.y)+a.z*Math.abs(zm.z),d=e.dot(zm),f=t.dot(zm),g=i.dot(zm);if(Math.max(-Math.max(d,f,g),Math.min(d,f,g))>l)return!1}return!0}const KH=new pr,ax=new be,Ew=new be;class bo{constructor(e=new be,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):KH.setFromPoints(e).getCenter(i);let a=0;for(let s=0,r=e.length;s<r;s++)a=Math.max(a,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ax.subVectors(e,this.center);const t=ax.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),a=(i-this.radius)*.5;this.center.addScaledVector(ax,a/i),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Ew.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ax.copy(e.center).add(Ew)),this.expandByPoint(ax.copy(e.center).sub(Ew))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const gf=new be,ww=new be,cb=new be,Tp=new be,Mw=new be,ub=new be,Tw=new be;class Ng{constructor(e=new be,t=new be(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,gf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=gf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(gf.copy(this.origin).addScaledVector(this.direction,t),gf.distanceToSquared(e))}distanceSqToSegment(e,t,i,a){ww.copy(e).add(t).multiplyScalar(.5),cb.copy(t).sub(e).normalize(),Tp.copy(this.origin).sub(ww);const s=e.distanceTo(t)*.5,r=-this.direction.dot(cb),l=Tp.dot(this.direction),d=-Tp.dot(cb),f=Tp.lengthSq(),g=Math.abs(1-r*r);let x,b,_,S;if(g>0)if(x=r*d-l,b=r*l-d,S=s*g,x>=0)if(b>=-S)if(b<=S){const w=1/g;x*=w,b*=w,_=x*(x+r*b+2*l)+b*(r*x+b+2*d)+f}else b=s,x=Math.max(0,-(r*b+l)),_=-x*x+b*(b+2*d)+f;else b=-s,x=Math.max(0,-(r*b+l)),_=-x*x+b*(b+2*d)+f;else b<=-S?(x=Math.max(0,-(-r*s+l)),b=x>0?-s:Math.min(Math.max(-s,-d),s),_=-x*x+b*(b+2*d)+f):b<=S?(x=0,b=Math.min(Math.max(-s,-d),s),_=b*(b+2*d)+f):(x=Math.max(0,-(r*s+l)),b=x>0?s:Math.min(Math.max(-s,-d),s),_=-x*x+b*(b+2*d)+f);else b=r>0?-s:s,x=Math.max(0,-(r*b+l)),_=-x*x+b*(b+2*d)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,x),a&&a.copy(ww).addScaledVector(cb,b),_}intersectSphere(e,t){gf.subVectors(e.center,this.origin);const i=gf.dot(this.direction),a=gf.dot(gf)-i*i,s=e.radius*e.radius;if(a>s)return null;const r=Math.sqrt(s-a),l=i-r,d=i+r;return d<0?null:l<0?this.at(d,t):this.at(l,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,a,s,r,l,d;const f=1/this.direction.x,g=1/this.direction.y,x=1/this.direction.z,b=this.origin;return f>=0?(i=(e.min.x-b.x)*f,a=(e.max.x-b.x)*f):(i=(e.max.x-b.x)*f,a=(e.min.x-b.x)*f),g>=0?(s=(e.min.y-b.y)*g,r=(e.max.y-b.y)*g):(s=(e.max.y-b.y)*g,r=(e.min.y-b.y)*g),i>r||s>a||((s>i||isNaN(i))&&(i=s),(r<a||isNaN(a))&&(a=r),x>=0?(l=(e.min.z-b.z)*x,d=(e.max.z-b.z)*x):(l=(e.max.z-b.z)*x,d=(e.min.z-b.z)*x),i>d||l>a)||((l>i||i!==i)&&(i=l),(d<a||a!==a)&&(a=d),a<0)?null:this.at(i>=0?i:a,t)}intersectsBox(e){return this.intersectBox(e,gf)!==null}intersectTriangle(e,t,i,a,s){Mw.subVectors(t,e),ub.subVectors(i,e),Tw.crossVectors(Mw,ub);let r=this.direction.dot(Tw),l;if(r>0){if(a)return null;l=1}else if(r<0)l=-1,r=-r;else return null;Tp.subVectors(this.origin,e);const d=l*this.direction.dot(ub.crossVectors(Tp,ub));if(d<0)return null;const f=l*this.direction.dot(Mw.cross(Tp));if(f<0||d+f>r)return null;const g=-l*Tp.dot(Tw);return g<0?null:this.at(g/r,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Fn{constructor(e,t,i,a,s,r,l,d,f,g,x,b,_,S,w,M){Fn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,a,s,r,l,d,f,g,x,b,_,S,w,M)}set(e,t,i,a,s,r,l,d,f,g,x,b,_,S,w,M){const E=this.elements;return E[0]=e,E[4]=t,E[8]=i,E[12]=a,E[1]=s,E[5]=r,E[9]=l,E[13]=d,E[2]=f,E[6]=g,E[10]=x,E[14]=b,E[3]=_,E[7]=S,E[11]=w,E[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Fn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,a=1/D0.setFromMatrixColumn(e,0).length(),s=1/D0.setFromMatrixColumn(e,1).length(),r=1/D0.setFromMatrixColumn(e,2).length();return t[0]=i[0]*a,t[1]=i[1]*a,t[2]=i[2]*a,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*r,t[9]=i[9]*r,t[10]=i[10]*r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,a=e.y,s=e.z,r=Math.cos(i),l=Math.sin(i),d=Math.cos(a),f=Math.sin(a),g=Math.cos(s),x=Math.sin(s);if(e.order==="XYZ"){const b=r*g,_=r*x,S=l*g,w=l*x;t[0]=d*g,t[4]=-d*x,t[8]=f,t[1]=_+S*f,t[5]=b-w*f,t[9]=-l*d,t[2]=w-b*f,t[6]=S+_*f,t[10]=r*d}else if(e.order==="YXZ"){const b=d*g,_=d*x,S=f*g,w=f*x;t[0]=b+w*l,t[4]=S*l-_,t[8]=r*f,t[1]=r*x,t[5]=r*g,t[9]=-l,t[2]=_*l-S,t[6]=w+b*l,t[10]=r*d}else if(e.order==="ZXY"){const b=d*g,_=d*x,S=f*g,w=f*x;t[0]=b-w*l,t[4]=-r*x,t[8]=S+_*l,t[1]=_+S*l,t[5]=r*g,t[9]=w-b*l,t[2]=-r*f,t[6]=l,t[10]=r*d}else if(e.order==="ZYX"){const b=r*g,_=r*x,S=l*g,w=l*x;t[0]=d*g,t[4]=S*f-_,t[8]=b*f+w,t[1]=d*x,t[5]=w*f+b,t[9]=_*f-S,t[2]=-f,t[6]=l*d,t[10]=r*d}else if(e.order==="YZX"){const b=r*d,_=r*f,S=l*d,w=l*f;t[0]=d*g,t[4]=w-b*x,t[8]=S*x+_,t[1]=x,t[5]=r*g,t[9]=-l*g,t[2]=-f*g,t[6]=_*x+S,t[10]=b-w*x}else if(e.order==="XZY"){const b=r*d,_=r*f,S=l*d,w=l*f;t[0]=d*g,t[4]=-x,t[8]=f*g,t[1]=b*x+w,t[5]=r*g,t[9]=_*x-S,t[2]=S*x-_,t[6]=l*g,t[10]=w*x+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ZH,e,QH)}lookAt(e,t,i){const a=this.elements;return Ic.subVectors(e,t),Ic.lengthSq()===0&&(Ic.z=1),Ic.normalize(),Cp.crossVectors(i,Ic),Cp.lengthSq()===0&&(Math.abs(i.z)===1?Ic.x+=1e-4:Ic.z+=1e-4,Ic.normalize(),Cp.crossVectors(i,Ic)),Cp.normalize(),db.crossVectors(Ic,Cp),a[0]=Cp.x,a[4]=db.x,a[8]=Ic.x,a[1]=Cp.y,a[5]=db.y,a[9]=Ic.y,a[2]=Cp.z,a[6]=db.z,a[10]=Ic.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,s=this.elements,r=i[0],l=i[4],d=i[8],f=i[12],g=i[1],x=i[5],b=i[9],_=i[13],S=i[2],w=i[6],M=i[10],E=i[14],T=i[3],C=i[7],D=i[11],P=i[15],B=a[0],F=a[4],j=a[8],O=a[12],I=a[1],W=a[5],Q=a[9],J=a[13],te=a[2],oe=a[6],$=a[10],X=a[14],G=a[3],ee=a[7],Y=a[11],ne=a[15];return s[0]=r*B+l*I+d*te+f*G,s[4]=r*F+l*W+d*oe+f*ee,s[8]=r*j+l*Q+d*$+f*Y,s[12]=r*O+l*J+d*X+f*ne,s[1]=g*B+x*I+b*te+_*G,s[5]=g*F+x*W+b*oe+_*ee,s[9]=g*j+x*Q+b*$+_*Y,s[13]=g*O+x*J+b*X+_*ne,s[2]=S*B+w*I+M*te+E*G,s[6]=S*F+w*W+M*oe+E*ee,s[10]=S*j+w*Q+M*$+E*Y,s[14]=S*O+w*J+M*X+E*ne,s[3]=T*B+C*I+D*te+P*G,s[7]=T*F+C*W+D*oe+P*ee,s[11]=T*j+C*Q+D*$+P*Y,s[15]=T*O+C*J+D*X+P*ne,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],a=e[8],s=e[12],r=e[1],l=e[5],d=e[9],f=e[13],g=e[2],x=e[6],b=e[10],_=e[14],S=e[3],w=e[7],M=e[11],E=e[15];return S*(+s*d*x-a*f*x-s*l*b+i*f*b+a*l*_-i*d*_)+w*(+t*d*_-t*f*b+s*r*b-a*r*_+a*f*g-s*d*g)+M*(+t*f*x-t*l*_-s*r*x+i*r*_+s*l*g-i*f*g)+E*(-a*l*g-t*d*x+t*l*b+a*r*x-i*r*b+i*d*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=t,a[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],s=e[3],r=e[4],l=e[5],d=e[6],f=e[7],g=e[8],x=e[9],b=e[10],_=e[11],S=e[12],w=e[13],M=e[14],E=e[15],T=x*M*f-w*b*f+w*d*_-l*M*_-x*d*E+l*b*E,C=S*b*f-g*M*f-S*d*_+r*M*_+g*d*E-r*b*E,D=g*w*f-S*x*f+S*l*_-r*w*_-g*l*E+r*x*E,P=S*x*d-g*w*d-S*l*b+r*w*b+g*l*M-r*x*M,B=t*T+i*C+a*D+s*P;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/B;return e[0]=T*F,e[1]=(w*b*s-x*M*s-w*a*_+i*M*_+x*a*E-i*b*E)*F,e[2]=(l*M*s-w*d*s+w*a*f-i*M*f-l*a*E+i*d*E)*F,e[3]=(x*d*s-l*b*s-x*a*f+i*b*f+l*a*_-i*d*_)*F,e[4]=C*F,e[5]=(g*M*s-S*b*s+S*a*_-t*M*_-g*a*E+t*b*E)*F,e[6]=(S*d*s-r*M*s-S*a*f+t*M*f+r*a*E-t*d*E)*F,e[7]=(r*b*s-g*d*s+g*a*f-t*b*f-r*a*_+t*d*_)*F,e[8]=D*F,e[9]=(S*x*s-g*w*s-S*i*_+t*w*_+g*i*E-t*x*E)*F,e[10]=(r*w*s-S*l*s+S*i*f-t*w*f-r*i*E+t*l*E)*F,e[11]=(g*l*s-r*x*s-g*i*f+t*x*f+r*i*_-t*l*_)*F,e[12]=P*F,e[13]=(g*w*a-S*x*a+S*i*b-t*w*b-g*i*M+t*x*M)*F,e[14]=(S*l*a-r*w*a-S*i*d+t*w*d+r*i*M-t*l*M)*F,e[15]=(r*x*a-g*l*a+g*i*d-t*x*d-r*i*b+t*l*b)*F,this}scale(e){const t=this.elements,i=e.x,a=e.y,s=e.z;return t[0]*=i,t[4]*=a,t[8]*=s,t[1]*=i,t[5]*=a,t[9]*=s,t[2]*=i,t[6]*=a,t[10]*=s,t[3]*=i,t[7]*=a,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,a))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),a=Math.sin(t),s=1-i,r=e.x,l=e.y,d=e.z,f=s*r,g=s*l;return this.set(f*r+i,f*l-a*d,f*d+a*l,0,f*l+a*d,g*l+i,g*d-a*r,0,f*d-a*l,g*d+a*r,s*d*d+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,a,s,r){return this.set(1,i,s,0,e,1,r,0,t,a,1,0,0,0,0,1),this}compose(e,t,i){const a=this.elements,s=t._x,r=t._y,l=t._z,d=t._w,f=s+s,g=r+r,x=l+l,b=s*f,_=s*g,S=s*x,w=r*g,M=r*x,E=l*x,T=d*f,C=d*g,D=d*x,P=i.x,B=i.y,F=i.z;return a[0]=(1-(w+E))*P,a[1]=(_+D)*P,a[2]=(S-C)*P,a[3]=0,a[4]=(_-D)*B,a[5]=(1-(b+E))*B,a[6]=(M+T)*B,a[7]=0,a[8]=(S+C)*F,a[9]=(M-T)*F,a[10]=(1-(b+w))*F,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,t,i){const a=this.elements;let s=D0.set(a[0],a[1],a[2]).length();const r=D0.set(a[4],a[5],a[6]).length(),l=D0.set(a[8],a[9],a[10]).length();this.determinant()<0&&(s=-s),e.x=a[12],e.y=a[13],e.z=a[14],nd.copy(this);const f=1/s,g=1/r,x=1/l;return nd.elements[0]*=f,nd.elements[1]*=f,nd.elements[2]*=f,nd.elements[4]*=g,nd.elements[5]*=g,nd.elements[6]*=g,nd.elements[8]*=x,nd.elements[9]*=x,nd.elements[10]*=x,t.setFromRotationMatrix(nd),i.x=s,i.y=r,i.z=l,this}makePerspective(e,t,i,a,s,r,l=vu){const d=this.elements,f=2*s/(t-e),g=2*s/(i-a),x=(t+e)/(t-e),b=(i+a)/(i-a);let _,S;if(l===vu)_=-(r+s)/(r-s),S=-2*r*s/(r-s);else if(l===$x)_=-r/(r-s),S=-r*s/(r-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return d[0]=f,d[4]=0,d[8]=x,d[12]=0,d[1]=0,d[5]=g,d[9]=b,d[13]=0,d[2]=0,d[6]=0,d[10]=_,d[14]=S,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,i,a,s,r,l=vu){const d=this.elements,f=1/(t-e),g=1/(i-a),x=1/(r-s),b=(t+e)*f,_=(i+a)*g;let S,w;if(l===vu)S=(r+s)*x,w=-2*x;else if(l===$x)S=s*x,w=-1*x;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return d[0]=2*f,d[4]=0,d[8]=0,d[12]=-b,d[1]=0,d[5]=2*g,d[9]=0,d[13]=-_,d[2]=0,d[6]=0,d[10]=w,d[14]=-S,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<16;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const D0=new be,nd=new Fn,ZH=new be(0,0,0),QH=new be(1,1,1),Cp=new be,db=new be,Ic=new be,sR=new Fn,rR=new Ko;class Wc{constructor(e=0,t=0,i=0,a=Wc.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,a=this._order){return this._x=e,this._y=t,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const a=e.elements,s=a[0],r=a[4],l=a[8],d=a[1],f=a[5],g=a[9],x=a[2],b=a[6],_=a[10];switch(t){case"XYZ":this._y=Math.asin(ni(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-g,_),this._z=Math.atan2(-r,s)):(this._x=Math.atan2(b,f),this._z=0);break;case"YXZ":this._x=Math.asin(-ni(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(d,f)):(this._y=Math.atan2(-x,s),this._z=0);break;case"ZXY":this._x=Math.asin(ni(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-x,_),this._z=Math.atan2(-r,f)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-ni(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(b,_),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-r,f));break;case"YZX":this._z=Math.asin(ni(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-g,f),this._y=Math.atan2(-x,s)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-ni(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(b,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-g,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return sR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(sR,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rR.setFromEuler(this),this.setFromQuaternion(rR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Wc.DEFAULT_ORDER="XYZ";let Sv=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},JH=0;const oR=new be,O0=new Ko,vf=new Fn,hb=new be,sx=new be,$H=new be,eG=new Ko,lR=new be(1,0,0),cR=new be(0,1,0),uR=new be(0,0,1),dR={type:"added"},tG={type:"removed"},j0={type:"childadded",child:null},Cw={type:"childremoved",child:null};class ea extends wh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:JH++}),this.uuid=Gc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ea.DEFAULT_UP.clone();const e=new be,t=new Wc,i=new Ko,a=new be(1,1,1);function s(){i.setFromEuler(t,!1)}function r(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(r),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Fn},normalMatrix:{value:new oi}}),this.matrix=new Fn,this.matrixWorld=new Fn,this.matrixAutoUpdate=ea.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ea.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Sv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return O0.setFromAxisAngle(e,t),this.quaternion.multiply(O0),this}rotateOnWorldAxis(e,t){return O0.setFromAxisAngle(e,t),this.quaternion.premultiply(O0),this}rotateX(e){return this.rotateOnAxis(lR,e)}rotateY(e){return this.rotateOnAxis(cR,e)}rotateZ(e){return this.rotateOnAxis(uR,e)}translateOnAxis(e,t){return oR.copy(e).applyQuaternion(this.quaternion),this.position.add(oR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(lR,e)}translateY(e){return this.translateOnAxis(cR,e)}translateZ(e){return this.translateOnAxis(uR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(vf.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?hb.copy(e):hb.set(e,t,i);const a=this.parent;this.updateWorldMatrix(!0,!1),sx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vf.lookAt(sx,hb,this.up):vf.lookAt(hb,sx,this.up),this.quaternion.setFromRotationMatrix(vf),a&&(vf.extractRotation(a.matrixWorld),O0.setFromRotationMatrix(vf),this.quaternion.premultiply(O0.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(dR),j0.child=e,this.dispatchEvent(j0),j0.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(tG),Cw.child=e,this.dispatchEvent(Cw),Cw.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),vf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),vf.multiply(e.parent.matrixWorld)),e.applyMatrix4(vf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(dR),j0.child=e,this.dispatchEvent(j0),j0.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,a=this.children.length;i<a;i++){const r=this.children[i].getObjectByProperty(e,t);if(r!==void 0)return r}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const a=this.children;for(let s=0,r=a.length;s<r;s++)a[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sx,e,$H),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sx,eG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const a=this.children;for(let s=0,r=a.length;s<r;s++)a[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(l=>({...l})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(e),a.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function s(l,d){return l[d.uuid]===void 0&&(l[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const d=l.shapes;if(Array.isArray(d))for(let f=0,g=d.length;f<g;f++){const x=d[f];s(e.shapes,x)}else s(e.shapes,d)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let d=0,f=this.material.length;d<f;d++)l.push(s(e.materials,this.material[d]));a.material=l}else a.material=s(e.materials,this.material);if(this.children.length>0){a.children=[];for(let l=0;l<this.children.length;l++)a.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let l=0;l<this.animations.length;l++){const d=this.animations[l];a.animations.push(s(e.animations,d))}}if(t){const l=r(e.geometries),d=r(e.materials),f=r(e.textures),g=r(e.images),x=r(e.shapes),b=r(e.skeletons),_=r(e.animations),S=r(e.nodes);l.length>0&&(i.geometries=l),d.length>0&&(i.materials=d),f.length>0&&(i.textures=f),g.length>0&&(i.images=g),x.length>0&&(i.shapes=x),b.length>0&&(i.skeletons=b),_.length>0&&(i.animations=_),S.length>0&&(i.nodes=S)}return i.object=a,i;function r(l){const d=[];for(const f in l){const g=l[f];delete g.metadata,d.push(g)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const a=e.children[i];this.add(a.clone())}return this}}ea.DEFAULT_UP=new be(0,1,0);ea.DEFAULT_MATRIX_AUTO_UPDATE=!0;ea.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const id=new be,yf=new be,Aw=new be,xf=new be,P0=new be,U0=new be,hR=new be,Nw=new be,Rw=new be,Dw=new be,Ow=new $i,jw=new $i,Pw=new $i;class nc{constructor(e=new be,t=new be,i=new be){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,a){a.subVectors(i,t),id.subVectors(e,t),a.cross(id);const s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}static getBarycoord(e,t,i,a,s){id.subVectors(a,t),yf.subVectors(i,t),Aw.subVectors(e,t);const r=id.dot(id),l=id.dot(yf),d=id.dot(Aw),f=yf.dot(yf),g=yf.dot(Aw),x=r*f-l*l;if(x===0)return s.set(0,0,0),null;const b=1/x,_=(f*d-l*g)*b,S=(r*g-l*d)*b;return s.set(1-_-S,S,_)}static containsPoint(e,t,i,a){return this.getBarycoord(e,t,i,a,xf)===null?!1:xf.x>=0&&xf.y>=0&&xf.x+xf.y<=1}static getInterpolation(e,t,i,a,s,r,l,d){return this.getBarycoord(e,t,i,a,xf)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(s,xf.x),d.addScaledVector(r,xf.y),d.addScaledVector(l,xf.z),d)}static getInterpolatedAttribute(e,t,i,a,s,r){return Ow.setScalar(0),jw.setScalar(0),Pw.setScalar(0),Ow.fromBufferAttribute(e,t),jw.fromBufferAttribute(e,i),Pw.fromBufferAttribute(e,a),r.setScalar(0),r.addScaledVector(Ow,s.x),r.addScaledVector(jw,s.y),r.addScaledVector(Pw,s.z),r}static isFrontFacing(e,t,i,a){return id.subVectors(i,t),yf.subVectors(e,t),id.cross(yf).dot(a)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,a){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,t,i,a){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return id.subVectors(this.c,this.b),yf.subVectors(this.a,this.b),id.cross(yf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return nc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return nc.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,a,s){return nc.getInterpolation(e,this.a,this.b,this.c,t,i,a,s)}containsPoint(e){return nc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return nc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,a=this.b,s=this.c;let r,l;P0.subVectors(a,i),U0.subVectors(s,i),Nw.subVectors(e,i);const d=P0.dot(Nw),f=U0.dot(Nw);if(d<=0&&f<=0)return t.copy(i);Rw.subVectors(e,a);const g=P0.dot(Rw),x=U0.dot(Rw);if(g>=0&&x<=g)return t.copy(a);const b=d*x-g*f;if(b<=0&&d>=0&&g<=0)return r=d/(d-g),t.copy(i).addScaledVector(P0,r);Dw.subVectors(e,s);const _=P0.dot(Dw),S=U0.dot(Dw);if(S>=0&&_<=S)return t.copy(s);const w=_*f-d*S;if(w<=0&&f>=0&&S<=0)return l=f/(f-S),t.copy(i).addScaledVector(U0,l);const M=g*S-_*x;if(M<=0&&x-g>=0&&_-S>=0)return hR.subVectors(s,a),l=(x-g)/(x-g+(_-S)),t.copy(a).addScaledVector(hR,l);const E=1/(M+w+b);return r=w*E,l=b*E,t.copy(i).addScaledVector(P0,r).addScaledVector(U0,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const TO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ap={h:0,s:0,l:0},fb={h:0,s:0,l:0};function Uw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Zt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=yo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qi.colorSpaceToWorking(this,t),this}setRGB(e,t,i,a=qi.workingColorSpace){return this.r=e,this.g=t,this.b=i,qi.colorSpaceToWorking(this,a),this}setHSL(e,t,i,a=qi.workingColorSpace){if(e=I3(e,1),t=ni(t,0,1),i=ni(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,r=2*i-s;this.r=Uw(r,s,e+1/3),this.g=Uw(r,s,e),this.b=Uw(r,s,e-1/3)}return qi.colorSpaceToWorking(this,a),this}setStyle(e,t=yo){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const r=a[1],l=a[2];switch(r){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=a[1],r=s.length;if(r===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(r===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=yo){const i=TO[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Tf(e.r),this.g=Tf(e.g),this.b=Tf(e.b),this}copyLinearToSRGB(e){return this.r=cv(e.r),this.g=cv(e.g),this.b=cv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=yo){return qi.workingToColorSpace(Go.copy(this),e),Math.round(ni(Go.r*255,0,255))*65536+Math.round(ni(Go.g*255,0,255))*256+Math.round(ni(Go.b*255,0,255))}getHexString(e=yo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qi.workingColorSpace){qi.workingToColorSpace(Go.copy(this),t);const i=Go.r,a=Go.g,s=Go.b,r=Math.max(i,a,s),l=Math.min(i,a,s);let d,f;const g=(l+r)/2;if(l===r)d=0,f=0;else{const x=r-l;switch(f=g<=.5?x/(r+l):x/(2-r-l),r){case i:d=(a-s)/x+(a<s?6:0);break;case a:d=(s-i)/x+2;break;case s:d=(i-a)/x+4;break}d/=6}return e.h=d,e.s=f,e.l=g,e}getRGB(e,t=qi.workingColorSpace){return qi.workingToColorSpace(Go.copy(this),t),e.r=Go.r,e.g=Go.g,e.b=Go.b,e}getStyle(e=yo){qi.workingToColorSpace(Go.copy(this),e);const t=Go.r,i=Go.g,a=Go.b;return e!==yo?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(a*255)})`}offsetHSL(e,t,i){return this.getHSL(Ap),this.setHSL(Ap.h+e,Ap.s+t,Ap.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ap),e.getHSL(fb);const i=Ux(Ap.h,fb.h,t),a=Ux(Ap.s,fb.s,t),s=Ux(Ap.l,fb.l,t);return this.setHSL(i,a,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,a=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*a,this.g=s[1]*t+s[4]*i+s[7]*a,this.b=s[2]*t+s[5]*i+s[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Go=new Zt;Zt.NAMES=TO;let nG=0;class $o extends wh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nG++}),this.uuid=Gc(),this.name="",this.type="Material",this.blending=ug,this.side=Rf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=H_,this.blendDst=G_,this.blendEquation=Lp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Zt(0,0,0),this.blendAlpha=0,this.depthFunc=gg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=mT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=eg,this.stencilZFail=eg,this.stencilZPass=eg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(i):a&&a.isVector3&&i&&i.isVector3?a.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ug&&(i.blending=this.blending),this.side!==Rf&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==H_&&(i.blendSrc=this.blendSrc),this.blendDst!==G_&&(i.blendDst=this.blendDst),this.blendEquation!==Lp&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==gg&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==mT&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==eg&&(i.stencilFail=this.stencilFail),this.stencilZFail!==eg&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==eg&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function a(s){const r=[];for(const l in s){const d=s[l];delete d.metadata,r.push(d)}return r}if(t){const s=a(e.textures),r=a(e.images);s.length>0&&(i.textures=s),r.length>0&&(i.images=r)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const a=t.length;i=new Array(a);for(let s=0;s!==a;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class zf extends $o{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Wc,this.combine=E1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wf=iG();function iG(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),a=new Uint32Array(512);for(let d=0;d<256;++d){const f=d-127;f<-27?(i[d]=0,i[d|256]=32768,a[d]=24,a[d|256]=24):f<-14?(i[d]=1024>>-f-14,i[d|256]=1024>>-f-14|32768,a[d]=-f-1,a[d|256]=-f-1):f<=15?(i[d]=f+15<<10,i[d|256]=f+15<<10|32768,a[d]=13,a[d|256]=13):f<128?(i[d]=31744,i[d|256]=64512,a[d]=24,a[d|256]=24):(i[d]=31744,i[d|256]=64512,a[d]=13,a[d|256]=13)}const s=new Uint32Array(2048),r=new Uint32Array(64),l=new Uint32Array(64);for(let d=1;d<1024;++d){let f=d<<13,g=0;for(;(f&8388608)===0;)f<<=1,g-=8388608;f&=-8388609,g+=947912704,s[d]=f|g}for(let d=1024;d<2048;++d)s[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)r[d]=d<<23;r[31]=1199570944,r[32]=2147483648;for(let d=33;d<63;++d)r[d]=2147483648+(d-32<<23);r[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(l[d]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:a,mantissaTable:s,exponentTable:r,offsetTable:l}}function tc(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=ni(n,-65504,65504),wf.floatView[0]=n;const e=wf.uint32View[0],t=e>>23&511;return wf.baseTable[t]+((e&8388607)>>wf.shiftTable[t])}function Ex(n){const e=n>>10;return wf.uint32View[0]=wf.mantissaTable[wf.offsetTable[e]+(n&1023)]+wf.exponentTable[e],wf.floatView[0]}class rg{static toHalfFloat(e){return tc(e)}static fromHalfFloat(e){return Ex(e)}}const cr=new be,pb=new wt;let aG=0;class Ua{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:aG++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Jx,this.updateRanges=[],this.gpuType=bs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let a=0,s=this.itemSize;a<s;a++)this.array[e+a]=t.array[i+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)pb.fromBufferAttribute(this,t),pb.applyMatrix3(e),this.setXY(t,pb.x,pb.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.applyMatrix3(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.applyMatrix4(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.applyNormalMatrix(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.transformDirection(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=yl(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ui(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=yl(t,this.array)),t}setX(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=yl(t,this.array)),t}setY(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=yl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=yl(t,this.array)),t}setW(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),i=ui(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,a){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),i=ui(i,this.array),a=ui(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this}setXYZW(e,t,i,a,s){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),i=ui(i,this.array),a=ui(a,this.array),s=ui(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Jx&&(e.usage=this.usage),e}}class sG extends Ua{constructor(e,t,i){super(new Int8Array(e),t,i)}}class rG extends Ua{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class oG extends Ua{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class lG extends Ua{constructor(e,t,i){super(new Int16Array(e),t,i)}}class F3 extends Ua{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class cG extends Ua{constructor(e,t,i){super(new Int32Array(e),t,i)}}class k3 extends Ua{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class uG extends Ua{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Ex(this.array[e*this.itemSize]);return this.normalized&&(t=yl(t,this.array)),t}setX(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize]=tc(t),this}getY(e){let t=Ex(this.array[e*this.itemSize+1]);return this.normalized&&(t=yl(t,this.array)),t}setY(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+1]=tc(t),this}getZ(e){let t=Ex(this.array[e*this.itemSize+2]);return this.normalized&&(t=yl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+2]=tc(t),this}getW(e){let t=Ex(this.array[e*this.itemSize+3]);return this.normalized&&(t=yl(t,this.array)),t}setW(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+3]=tc(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),i=ui(i,this.array)),this.array[e+0]=tc(t),this.array[e+1]=tc(i),this}setXYZ(e,t,i,a){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),i=ui(i,this.array),a=ui(a,this.array)),this.array[e+0]=tc(t),this.array[e+1]=tc(i),this.array[e+2]=tc(a),this}setXYZW(e,t,i,a,s){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),i=ui(i,this.array),a=ui(a,this.array),s=ui(s,this.array)),this.array[e+0]=tc(t),this.array[e+1]=tc(i),this.array[e+2]=tc(a),this.array[e+3]=tc(s),this}}class cn extends Ua{constructor(e,t,i){super(new Float32Array(e),t,i)}}let dG=0;const hu=new Fn,Lw=new ea,L0=new be,Bc=new pr,rx=new pr,Qr=new be;class fi extends wh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dG++}),this.uuid=Gc(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(EO(e)?k3:F3)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new oi().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return hu.makeRotationFromQuaternion(e),this.applyMatrix4(hu),this}rotateX(e){return hu.makeRotationX(e),this.applyMatrix4(hu),this}rotateY(e){return hu.makeRotationY(e),this.applyMatrix4(hu),this}rotateZ(e){return hu.makeRotationZ(e),this.applyMatrix4(hu),this}translate(e,t,i){return hu.makeTranslation(e,t,i),this.applyMatrix4(hu),this}scale(e,t,i){return hu.makeScale(e,t,i),this.applyMatrix4(hu),this}lookAt(e){return Lw.lookAt(e),Lw.updateMatrix(),this.applyMatrix4(Lw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(L0).negate(),this.translate(L0.x,L0.y,L0.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let a=0,s=e.length;a<s;a++){const r=e[a];i.push(r.x,r.y,r.z||0)}this.setAttribute("position",new cn(i,3))}else{const i=Math.min(e.length,t.count);for(let a=0;a<i;a++){const s=e[a];t.setXYZ(a,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new pr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new be(-1/0,-1/0,-1/0),new be(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,a=t.length;i<a;i++){const s=t[i];Bc.setFromBufferAttribute(s),this.morphTargetsRelative?(Qr.addVectors(this.boundingBox.min,Bc.min),this.boundingBox.expandByPoint(Qr),Qr.addVectors(this.boundingBox.max,Bc.max),this.boundingBox.expandByPoint(Qr)):(this.boundingBox.expandByPoint(Bc.min),this.boundingBox.expandByPoint(Bc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new be,1/0);return}if(e){const i=this.boundingSphere.center;if(Bc.setFromBufferAttribute(e),t)for(let s=0,r=t.length;s<r;s++){const l=t[s];rx.setFromBufferAttribute(l),this.morphTargetsRelative?(Qr.addVectors(Bc.min,rx.min),Bc.expandByPoint(Qr),Qr.addVectors(Bc.max,rx.max),Bc.expandByPoint(Qr)):(Bc.expandByPoint(rx.min),Bc.expandByPoint(rx.max))}Bc.getCenter(i);let a=0;for(let s=0,r=e.count;s<r;s++)Qr.fromBufferAttribute(e,s),a=Math.max(a,i.distanceToSquared(Qr));if(t)for(let s=0,r=t.length;s<r;s++){const l=t[s],d=this.morphTargetsRelative;for(let f=0,g=l.count;f<g;f++)Qr.fromBufferAttribute(l,f),d&&(L0.fromBufferAttribute(e,f),Qr.add(L0)),a=Math.max(a,i.distanceToSquared(Qr))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,a=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ua(new Float32Array(4*i.count),4));const r=this.getAttribute("tangent"),l=[],d=[];for(let j=0;j<i.count;j++)l[j]=new be,d[j]=new be;const f=new be,g=new be,x=new be,b=new wt,_=new wt,S=new wt,w=new be,M=new be;function E(j,O,I){f.fromBufferAttribute(i,j),g.fromBufferAttribute(i,O),x.fromBufferAttribute(i,I),b.fromBufferAttribute(s,j),_.fromBufferAttribute(s,O),S.fromBufferAttribute(s,I),g.sub(f),x.sub(f),_.sub(b),S.sub(b);const W=1/(_.x*S.y-S.x*_.y);isFinite(W)&&(w.copy(g).multiplyScalar(S.y).addScaledVector(x,-_.y).multiplyScalar(W),M.copy(x).multiplyScalar(_.x).addScaledVector(g,-S.x).multiplyScalar(W),l[j].add(w),l[O].add(w),l[I].add(w),d[j].add(M),d[O].add(M),d[I].add(M))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let j=0,O=T.length;j<O;++j){const I=T[j],W=I.start,Q=I.count;for(let J=W,te=W+Q;J<te;J+=3)E(e.getX(J+0),e.getX(J+1),e.getX(J+2))}const C=new be,D=new be,P=new be,B=new be;function F(j){P.fromBufferAttribute(a,j),B.copy(P);const O=l[j];C.copy(O),C.sub(P.multiplyScalar(P.dot(O))).normalize(),D.crossVectors(B,O);const W=D.dot(d[j])<0?-1:1;r.setXYZW(j,C.x,C.y,C.z,W)}for(let j=0,O=T.length;j<O;++j){const I=T[j],W=I.start,Q=I.count;for(let J=W,te=W+Q;J<te;J+=3)F(e.getX(J+0)),F(e.getX(J+1)),F(e.getX(J+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ua(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let b=0,_=i.count;b<_;b++)i.setXYZ(b,0,0,0);const a=new be,s=new be,r=new be,l=new be,d=new be,f=new be,g=new be,x=new be;if(e)for(let b=0,_=e.count;b<_;b+=3){const S=e.getX(b+0),w=e.getX(b+1),M=e.getX(b+2);a.fromBufferAttribute(t,S),s.fromBufferAttribute(t,w),r.fromBufferAttribute(t,M),g.subVectors(r,s),x.subVectors(a,s),g.cross(x),l.fromBufferAttribute(i,S),d.fromBufferAttribute(i,w),f.fromBufferAttribute(i,M),l.add(g),d.add(g),f.add(g),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(w,d.x,d.y,d.z),i.setXYZ(M,f.x,f.y,f.z)}else for(let b=0,_=t.count;b<_;b+=3)a.fromBufferAttribute(t,b+0),s.fromBufferAttribute(t,b+1),r.fromBufferAttribute(t,b+2),g.subVectors(r,s),x.subVectors(a,s),g.cross(x),i.setXYZ(b+0,g.x,g.y,g.z),i.setXYZ(b+1,g.x,g.y,g.z),i.setXYZ(b+2,g.x,g.y,g.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Qr.fromBufferAttribute(e,t),Qr.normalize(),e.setXYZ(t,Qr.x,Qr.y,Qr.z)}toNonIndexed(){function e(l,d){const f=l.array,g=l.itemSize,x=l.normalized,b=new f.constructor(d.length*g);let _=0,S=0;for(let w=0,M=d.length;w<M;w++){l.isInterleavedBufferAttribute?_=d[w]*l.data.stride+l.offset:_=d[w]*g;for(let E=0;E<g;E++)b[S++]=f[_++]}return new Ua(b,g,x)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new fi,i=this.index.array,a=this.attributes;for(const l in a){const d=a[l],f=e(d,i);t.setAttribute(l,f)}const s=this.morphAttributes;for(const l in s){const d=[],f=s[l];for(let g=0,x=f.length;g<x;g++){const b=f[g],_=e(b,i);d.push(_)}t.morphAttributes[l]=d}t.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let l=0,d=r.length;l<d;l++){const f=r[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const f in d)d[f]!==void 0&&(e[f]=d[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const d in i){const f=i[d];e.data.attributes[d]=f.toJSON(e.data)}const a={};let s=!1;for(const d in this.morphAttributes){const f=this.morphAttributes[d],g=[];for(let x=0,b=f.length;x<b;x++){const _=f[x];g.push(_.toJSON(e.data))}g.length>0&&(a[d]=g,s=!0)}s&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(e.data.groups=JSON.parse(JSON.stringify(r)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere=l.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const a=e.attributes;for(const f in a){const g=a[f];this.setAttribute(f,g.clone(t))}const s=e.morphAttributes;for(const f in s){const g=[],x=s[f];for(let b=0,_=x.length;b<_;b++)g.push(x[b].clone(t));this.morphAttributes[f]=g}this.morphTargetsRelative=e.morphTargetsRelative;const r=e.groups;for(let f=0,g=r.length;f<g;f++){const x=r[f];this.addGroup(x.start,x.count,x.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const fR=new Fn,Im=new Ng,mb=new bo,pR=new be,gb=new be,vb=new be,yb=new be,zw=new be,xb=new be,mR=new be,bb=new be;class us extends ea{constructor(e=new fi,t=new zf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=a.length;s<r;s++){const l=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const i=this.geometry,a=i.attributes.position,s=i.morphAttributes.position,r=i.morphTargetsRelative;t.fromBufferAttribute(a,e);const l=this.morphTargetInfluences;if(s&&l){xb.set(0,0,0);for(let d=0,f=s.length;d<f;d++){const g=l[d],x=s[d];g!==0&&(zw.fromBufferAttribute(x,e),r?xb.addScaledVector(zw,g):xb.addScaledVector(zw.sub(t),g))}t.add(xb)}return t}raycast(e,t){const i=this.geometry,a=this.material,s=this.matrixWorld;a!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),mb.copy(i.boundingSphere),mb.applyMatrix4(s),Im.copy(e.ray).recast(e.near),!(mb.containsPoint(Im.origin)===!1&&(Im.intersectSphere(mb,pR)===null||Im.origin.distanceToSquared(pR)>(e.far-e.near)**2))&&(fR.copy(s).invert(),Im.copy(e.ray).applyMatrix4(fR),!(i.boundingBox!==null&&Im.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Im)))}_computeIntersections(e,t,i){let a;const s=this.geometry,r=this.material,l=s.index,d=s.attributes.position,f=s.attributes.uv,g=s.attributes.uv1,x=s.attributes.normal,b=s.groups,_=s.drawRange;if(l!==null)if(Array.isArray(r))for(let S=0,w=b.length;S<w;S++){const M=b[S],E=r[M.materialIndex],T=Math.max(M.start,_.start),C=Math.min(l.count,Math.min(M.start+M.count,_.start+_.count));for(let D=T,P=C;D<P;D+=3){const B=l.getX(D),F=l.getX(D+1),j=l.getX(D+2);a=_b(this,E,e,i,f,g,x,B,F,j),a&&(a.faceIndex=Math.floor(D/3),a.face.materialIndex=M.materialIndex,t.push(a))}}else{const S=Math.max(0,_.start),w=Math.min(l.count,_.start+_.count);for(let M=S,E=w;M<E;M+=3){const T=l.getX(M),C=l.getX(M+1),D=l.getX(M+2);a=_b(this,r,e,i,f,g,x,T,C,D),a&&(a.faceIndex=Math.floor(M/3),t.push(a))}}else if(d!==void 0)if(Array.isArray(r))for(let S=0,w=b.length;S<w;S++){const M=b[S],E=r[M.materialIndex],T=Math.max(M.start,_.start),C=Math.min(d.count,Math.min(M.start+M.count,_.start+_.count));for(let D=T,P=C;D<P;D+=3){const B=D,F=D+1,j=D+2;a=_b(this,E,e,i,f,g,x,B,F,j),a&&(a.faceIndex=Math.floor(D/3),a.face.materialIndex=M.materialIndex,t.push(a))}}else{const S=Math.max(0,_.start),w=Math.min(d.count,_.start+_.count);for(let M=S,E=w;M<E;M+=3){const T=M,C=M+1,D=M+2;a=_b(this,r,e,i,f,g,x,T,C,D),a&&(a.faceIndex=Math.floor(M/3),t.push(a))}}}}function hG(n,e,t,i,a,s,r,l){let d;if(e.side===Wo?d=i.intersectTriangle(r,s,a,!0,l):d=i.intersectTriangle(a,s,r,e.side===Rf,l),d===null)return null;bb.copy(l),bb.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(bb);return f<t.near||f>t.far?null:{distance:f,point:bb.clone(),object:n}}function _b(n,e,t,i,a,s,r,l,d,f){n.getVertexPosition(l,gb),n.getVertexPosition(d,vb),n.getVertexPosition(f,yb);const g=hG(n,e,t,i,gb,vb,yb,mR);if(g){const x=new be;nc.getBarycoord(mR,gb,vb,yb,x),a&&(g.uv=nc.getInterpolatedAttribute(a,l,d,f,x,new wt)),s&&(g.uv1=nc.getInterpolatedAttribute(s,l,d,f,x,new wt)),r&&(g.normal=nc.getInterpolatedAttribute(r,l,d,f,x,new be),g.normal.dot(i.direction)>0&&g.normal.multiplyScalar(-1));const b={a:l,b:d,c:f,normal:new be,materialIndex:0};nc.getNormal(gb,vb,yb,b.normal),g.face=b,g.barycoord=x}return g}class Rg extends fi{constructor(e=1,t=1,i=1,a=1,s=1,r=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:a,heightSegments:s,depthSegments:r};const l=this;a=Math.floor(a),s=Math.floor(s),r=Math.floor(r);const d=[],f=[],g=[],x=[];let b=0,_=0;S("z","y","x",-1,-1,i,t,e,r,s,0),S("z","y","x",1,-1,i,t,-e,r,s,1),S("x","z","y",1,1,e,i,t,a,r,2),S("x","z","y",1,-1,e,i,-t,a,r,3),S("x","y","z",1,-1,e,t,i,a,s,4),S("x","y","z",-1,-1,e,t,-i,a,s,5),this.setIndex(d),this.setAttribute("position",new cn(f,3)),this.setAttribute("normal",new cn(g,3)),this.setAttribute("uv",new cn(x,2));function S(w,M,E,T,C,D,P,B,F,j,O){const I=D/F,W=P/j,Q=D/2,J=P/2,te=B/2,oe=F+1,$=j+1;let X=0,G=0;const ee=new be;for(let Y=0;Y<$;Y++){const ne=Y*W-J;for(let ue=0;ue<oe;ue++){const de=ue*I-Q;ee[w]=de*T,ee[M]=ne*C,ee[E]=te,f.push(ee.x,ee.y,ee.z),ee[w]=0,ee[M]=0,ee[E]=B>0?1:-1,g.push(ee.x,ee.y,ee.z),x.push(ue/F),x.push(1-Y/j),X+=1}}for(let Y=0;Y<j;Y++)for(let ne=0;ne<F;ne++){const ue=b+ne+oe*Y,de=b+ne+oe*(Y+1),ie=b+(ne+1)+oe*(Y+1),Me=b+(ne+1)+oe*Y;d.push(ue,de,Me),d.push(de,ie,Me),G+=6}l.addGroup(_,G,O),_+=G,b+=X}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ev(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const a=n[t][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=a.clone():Array.isArray(a)?e[t][i]=a.slice():e[t][i]=a}}return e}function gl(n){const e={};for(let t=0;t<n.length;t++){const i=Ev(n[t]);for(const a in i)e[a]=i[a]}return e}function fG(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function CO(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:qi.workingColorSpace}const H3={clone:Ev,merge:gl};var pG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,mG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class So extends $o{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=pG,this.fragmentShader=mG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ev(e.uniforms),this.uniformsGroups=fG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const a in this.uniforms){const r=this.uniforms[a].value;r&&r.isTexture?t.uniforms[a]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[a]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[a]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[a]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[a]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[a]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[a]={type:"m4",value:r.toArray()}:t.uniforms[a]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const a in this.extensions)this.extensions[a]===!0&&(i[a]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}let h2=class extends ea{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Fn,this.projectionMatrix=new Fn,this.projectionMatrixInverse=new Fn,this.coordinateSystem=vu}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const Np=new be,gR=new wt,vR=new wt;class Gs extends h2{constructor(e=50,t=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=_v*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(dg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return _v*2*Math.atan(Math.tan(dg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Np.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Np.x,Np.y).multiplyScalar(-e/Np.z),Np.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Np.x,Np.y).multiplyScalar(-e/Np.z)}getViewSize(e,t){return this.getViewBounds(e,gR,vR),t.subVectors(vR,gR)}setViewOffset(e,t,i,a,s,r){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(dg*.5*this.fov)/this.zoom,i=2*t,a=this.aspect*i,s=-.5*a;const r=this.view;if(this.view!==null&&this.view.enabled){const d=r.fullWidth,f=r.fullHeight;s+=r.offsetX*a/d,t-=r.offsetY*i/f,a*=r.width/d,i*=r.height/f}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+a,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const z0=-90,I0=1;class AO extends ea{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new Gs(z0,I0,e,t);a.layers=this.layers,this.add(a);const s=new Gs(z0,I0,e,t);s.layers=this.layers,this.add(s);const r=new Gs(z0,I0,e,t);r.layers=this.layers,this.add(r);const l=new Gs(z0,I0,e,t);l.layers=this.layers,this.add(l);const d=new Gs(z0,I0,e,t);d.layers=this.layers,this.add(d);const f=new Gs(z0,I0,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,a,s,r,l,d]=t;for(const f of t)this.remove(f);if(e===vu)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),r.up.set(0,0,1),r.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===$x)i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),r.up.set(0,0,-1),r.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,r,l,d,f,g]=this.children,x=e.getRenderTarget(),b=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,a),e.render(t,s),e.setRenderTarget(i,1,a),e.render(t,r),e.setRenderTarget(i,2,a),e.render(t,l),e.setRenderTarget(i,3,a),e.render(t,d),e.setRenderTarget(i,4,a),e.render(t,f),i.texture.generateMipmaps=w,e.setRenderTarget(i,5,a),e.render(t,g),e.setRenderTarget(x,b,_),e.xr.enabled=S,i.texture.needsPMREMUpdate=!0}}class C1 extends Pa{constructor(e=[],t=xh,i,a,s,r,l,d,f,g){super(e,t,i,a,s,r,l,d,f,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class G3 extends sc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},a=[i,i,i,i,i,i];this.texture=new C1(a),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Rg(5,5,5),s=new So({name:"CubemapFromEquirect",uniforms:Ev(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Wo,blending:hh});s.uniforms.tEquirect.value=t;const r=new us(a,s),l=t.minFilter;return t.minFilter===lh&&(t.minFilter=Aa),new AO(1,10,this).update(e,r),t.minFilter=l,r.geometry.dispose(),r.material.dispose(),this}clear(e,t=!0,i=!0,a=!0){const s=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,i,a);e.setRenderTarget(s)}}let sv=class extends ea{constructor(){super(),this.isGroup=!0,this.type="Group"}};const gG={type:"move"};class M_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new sv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new sv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new be,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new be),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new sv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new be,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new be),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let a=null,s=null,r=null;const l=this._targetRay,d=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){r=!0;for(const w of e.hand.values()){const M=t.getJointPose(w,i),E=this._getHandJoint(f,w);M!==null&&(E.matrix.fromArray(M.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,E.jointRadius=M.radius),E.visible=M!==null}const g=f.joints["index-finger-tip"],x=f.joints["thumb-tip"],b=g.position.distanceTo(x.position),_=.02,S=.005;f.inputState.pinching&&b>_+S?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&b<=_-S&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(d.matrix.fromArray(s.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,s.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(s.linearVelocity)):d.hasLinearVelocity=!1,s.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(s.angularVelocity)):d.hasAngularVelocity=!1));l!==null&&(a=t.getPose(e.targetRaySpace,i),a===null&&s!==null&&(a=s),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(gG)))}return l!==null&&(l.visible=a!==null),d!==null&&(d.visible=s!==null),f!==null&&(f.visible=r!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new sv;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class f2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Zt(e),this.density=t}clone(){return new f2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class p2{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Zt(e),this.near=t,this.far=i}clone(){return new p2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class A1 extends ea{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Wc,this.environmentIntensity=1,this.environmentRotation=new Wc,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class m2{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Jx,this.updateRanges=[],this.version=0,this.uuid=Gc()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let a=0,s=this.stride;a<s;a++)this.array[e+a]=t.array[i+a];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Gc()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Gc()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ml=new be;class vg{constructor(e,t,i,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ml.fromBufferAttribute(this,t),ml.applyMatrix4(e),this.setXYZ(t,ml.x,ml.y,ml.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ml.fromBufferAttribute(this,t),ml.applyNormalMatrix(e),this.setXYZ(t,ml.x,ml.y,ml.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ml.fromBufferAttribute(this,t),ml.transformDirection(e),this.setXYZ(t,ml.x,ml.y,ml.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=yl(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ui(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=ui(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ui(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ui(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ui(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=yl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=yl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=yl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=yl(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ui(t,this.array),i=ui(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=ui(t,this.array),i=ui(i,this.array),a=ui(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this}setXYZW(e,t,i,a,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ui(t,this.array),i=ui(i,this.array),a=ui(a,this.array),s=ui(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[a+s])}return new Ua(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[a+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class V3 extends $o{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let B0;const ox=new be,F0=new be,k0=new be,H0=new wt,lx=new wt,NO=new Fn,Sb=new be,cx=new be,Eb=new be,yR=new wt,Iw=new wt,xR=new wt;class RO extends ea{constructor(e=new V3){if(super(),this.isSprite=!0,this.type="Sprite",B0===void 0){B0=new fi;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new m2(t,5);B0.setIndex([0,1,2,0,2,3]),B0.setAttribute("position",new vg(i,3,0,!1)),B0.setAttribute("uv",new vg(i,2,3,!1))}this.geometry=B0,this.material=e,this.center=new wt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),F0.setFromMatrixScale(this.matrixWorld),NO.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),k0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&F0.multiplyScalar(-k0.z);const i=this.material.rotation;let a,s;i!==0&&(s=Math.cos(i),a=Math.sin(i));const r=this.center;wb(Sb.set(-.5,-.5,0),k0,r,F0,a,s),wb(cx.set(.5,-.5,0),k0,r,F0,a,s),wb(Eb.set(.5,.5,0),k0,r,F0,a,s),yR.set(0,0),Iw.set(1,0),xR.set(1,1);let l=e.ray.intersectTriangle(Sb,cx,Eb,!1,ox);if(l===null&&(wb(cx.set(-.5,.5,0),k0,r,F0,a,s),Iw.set(0,1),l=e.ray.intersectTriangle(Sb,Eb,cx,!1,ox),l===null))return;const d=e.ray.origin.distanceTo(ox);d<e.near||d>e.far||t.push({distance:d,point:ox.clone(),uv:nc.getInterpolation(ox,Sb,cx,Eb,yR,Iw,xR,new wt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function wb(n,e,t,i,a,s){H0.subVectors(n,t).addScalar(.5).multiply(i),a!==void 0?(lx.x=s*H0.x-a*H0.y,lx.y=a*H0.x+s*H0.y):lx.copy(H0),n.copy(e),n.x+=lx.x,n.y+=lx.y,n.applyMatrix4(NO)}const Mb=new be,bR=new be;class DO extends ea{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,a=t.length;i<a;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const a=this.levels;let s;for(s=0;s<a.length&&!(t<a[s].distance);s++);return a.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const a=t.splice(i,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,a;for(i=1,a=t.length;i<a;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Mb.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(Mb);this.getObjectForDistance(a).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Mb.setFromMatrixPosition(e.matrixWorld),bR.setFromMatrixPosition(this.matrixWorld);const i=Mb.distanceTo(bR)/e.zoom;t[0].object.visible=!0;let a,s;for(a=1,s=t.length;a<s;a++){let r=t[a].distance;if(t[a].object.visible&&(r-=r*t[a].hysteresis),i>=r)t[a-1].object.visible=!1,t[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<s;a++)t[a].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let a=0,s=i.length;a<s;a++){const r=i[a];t.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return t}}const _R=new be,SR=new $i,ER=new $i,vG=new be,wR=new Fn,Tb=new be,Bw=new bo,MR=new Fn,Fw=new Ng;class OO extends us{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=fT,this.bindMatrix=new Fn,this.bindMatrixInverse=new Fn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new pr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Tb),this.boundingBox.expandByPoint(Tb)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new bo),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Tb),this.boundingSphere.expandByPoint(Tb)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,a=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Bw.copy(this.boundingSphere),Bw.applyMatrix4(a),e.ray.intersectsSphere(Bw)!==!1&&(MR.copy(a).invert(),Fw.copy(e.ray).applyMatrix4(MR),!(this.boundingBox!==null&&Fw.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Fw)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new $i,t=this.geometry.attributes.skinWeight;for(let i=0,a=t.count;i<a;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===fT?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===lO?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,a=this.geometry;SR.fromBufferAttribute(a.attributes.skinIndex,e),ER.fromBufferAttribute(a.attributes.skinWeight,e),_R.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const r=ER.getComponent(s);if(r!==0){const l=SR.getComponent(s);wR.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(vG.copy(_R).applyMatrix4(wR),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class q3 extends ea{constructor(){super(),this.isBone=!0,this.type="Bone"}}class dd extends Pa{constructor(e=null,t=1,i=1,a,s,r,l,d,f=xo,g=xo,x,b){super(null,r,l,d,f,g,a,s,x,b),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const TR=new Fn,yG=new Fn;class g2{constructor(e=[],t=[]){this.uuid=Gc(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new Fn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Fn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,a=this.boneTexture;for(let s=0,r=e.length;s<r;s++){const l=e[s]?e[s].matrixWorld:yG;TR.multiplyMatrices(l,t[s]),TR.toArray(i,s*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new g2(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new dd(t,e,e,Vs,bs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const a=this.bones[t];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,a=e.bones.length;i<a;i++){const s=e.bones[i];let r=t[s];r===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),r=new q3),this.bones.push(r),this.boneInverses.push(new Fn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let a=0,s=t.length;a<s;a++){const r=t[a];e.bones.push(r.uuid);const l=i[a];e.boneInverses.push(l.toArray())}return e}}class wv extends Ua{constructor(e,t,i,a=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const G0=new Fn,CR=new Fn,Cb=[],AR=new pr,xG=new Fn,ux=new us,dx=new bo;class jO extends us{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new wv(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<i;a++)this.setMatrixAt(a,xG)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new pr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,G0),AR.copy(e.boundingBox).applyMatrix4(G0),this.boundingBox.union(AR)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new bo),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,G0),dx.copy(e.boundingSphere).applyMatrix4(G0),this.boundingSphere.union(dx)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,a=this.morphTexture.source.data.data,s=i.length+1,r=e*s+1;for(let l=0;l<i.length;l++)i[l]=a[r+l]}raycast(e,t){const i=this.matrixWorld,a=this.count;if(ux.geometry=this.geometry,ux.material=this.material,ux.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),dx.copy(this.boundingSphere),dx.applyMatrix4(i),e.ray.intersectsSphere(dx)!==!1))for(let s=0;s<a;s++){this.getMatrixAt(s,G0),CR.multiplyMatrices(i,G0),ux.matrixWorld=CR,ux.raycast(e,Cb);for(let r=0,l=Cb.length;r<l;r++){const d=Cb[r];d.instanceId=s,d.object=this,t.push(d)}Cb.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new wv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,a=i.length+1;this.morphTexture===null&&(this.morphTexture=new dd(new Float32Array(a*this.count),a,this.count,M1,bs));const s=this.morphTexture.source.data.data;let r=0;for(let f=0;f<i.length;f++)r+=i[f];const l=this.geometry.morphTargetsRelative?1:1-r,d=a*e;s[d]=l,s.set(i,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const kw=new be,bG=new be,_G=new oi;let sh=class{constructor(e=new be(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,a){return this.normal.set(e,t,i),this.constant=a,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const a=kw.subVectors(i,t).cross(bG.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(kw),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/a;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||_G.getNormalMatrix(e),a=this.coplanarPoint(kw).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Bm=new bo,SG=new wt(.5,.5),Ab=new be;class Iv{constructor(e=new sh,t=new sh,i=new sh,a=new sh,s=new sh,r=new sh){this.planes=[e,t,i,a,s,r]}set(e,t,i,a,s,r){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(a),l[4].copy(s),l[5].copy(r),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=vu){const i=this.planes,a=e.elements,s=a[0],r=a[1],l=a[2],d=a[3],f=a[4],g=a[5],x=a[6],b=a[7],_=a[8],S=a[9],w=a[10],M=a[11],E=a[12],T=a[13],C=a[14],D=a[15];if(i[0].setComponents(d-s,b-f,M-_,D-E).normalize(),i[1].setComponents(d+s,b+f,M+_,D+E).normalize(),i[2].setComponents(d+r,b+g,M+S,D+T).normalize(),i[3].setComponents(d-r,b-g,M-S,D-T).normalize(),i[4].setComponents(d-l,b-x,M-w,D-C).normalize(),t===vu)i[5].setComponents(d+l,b+x,M+w,D+C).normalize();else if(t===$x)i[5].setComponents(l,x,w,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Bm.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Bm.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Bm)}intersectsSprite(e){Bm.center.set(0,0,0);const t=SG.distanceTo(e.center);return Bm.radius=.7071067811865476+t,Bm.applyMatrix4(e.matrixWorld),this.intersectsSphere(Bm)}intersectsSphere(e){const t=this.planes,i=e.center,a=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<a)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const a=t[i];if(Ab.x=a.normal.x>0?e.max.x:e.min.x,Ab.y=a.normal.y>0?e.max.y:e.min.y,Ab.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(Ab)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const eh=new Fn,th=new Iv;class v2{constructor(){this.coordinateSystem=vu}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(eh.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),th.setFromProjectionMatrix(eh,this.coordinateSystem),th.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(eh.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),th.setFromProjectionMatrix(eh,this.coordinateSystem),th.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(eh.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),th.setFromProjectionMatrix(eh,this.coordinateSystem),th.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(eh.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),th.setFromProjectionMatrix(eh,this.coordinateSystem),th.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(eh.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),th.setFromProjectionMatrix(eh,this.coordinateSystem),th.containsPoint(e))return!0}return!1}clone(){return new v2}}function Hw(n,e){return n-e}function EG(n,e){return n.z-e.z}function wG(n,e){return e.z-n.z}class MG{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,a){const s=this.pool,r=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];r.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=a}reset(){this.list.length=0,this.index=0}}const ec=new Fn,TG=new Zt(1,1,1),NR=new Iv,CG=new v2,Nb=new pr,Fm=new bo,hx=new be,RR=new be,AG=new be,Gw=new MG,Vo=new us,Rb=[];function NG(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const a=n.count;for(let s=0;s<a;s++)for(let r=0;r<i;r++)e.setComponent(s+t,r,n.getComponent(s,r))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function km(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class PO extends us{constructor(e,t,i=t*2,a){super(new fi,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new dd(t,e,e,Vs,bs);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new dd(t,e,e,T1,bh);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new dd(t,e,e,Vs,bs);i.colorSpace=qi.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const r=e.getAttribute(s),{array:l,itemSize:d,normalized:f}=r,g=new l.constructor(i*d),x=new Ua(g,d,f);t.setAttribute(s,x)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(a):new Uint16Array(a);t.setIndex(new Ua(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const a=e.getAttribute(i),s=t.getAttribute(i);if(a.itemSize!==s.itemSize||a.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new pr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,a=t.length;i<a;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ec),this.getBoundingBoxAt(s,Nb).applyMatrix4(ec),e.union(Nb)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bo);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,a=t.length;i<a;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ec),this.getBoundingSphereAt(s,Fm).applyMatrix4(ec),e.union(Fm)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Hw),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=i):(a=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;ec.identity().toArray(s.image.data,a*16),s.needsUpdate=!0;const r=this._colorsTexture;return r&&(TG.toArray(r.image.data,a*4),r.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const r=e.getIndex();if(r!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=i===-1?r.count:i),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Hw),d=this._availableGeometryIds.shift(),s[d]=a):(d=this._geometryCount,this._geometryCount++,s.push(a)),this.setGeometryAt(d,e),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,a=i.getIndex()!==null,s=i.getIndex(),r=t.getIndex(),l=this._geometryInfo[e];if(a&&r.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const g in i.attributes){const x=t.getAttribute(g),b=i.getAttribute(g);NG(x,b,d);const _=x.itemSize;for(let S=x.count,w=f;S<w;S++){const M=d+S;for(let E=0;E<_;E++)b.setComponent(M,E,0)}b.needsUpdate=!0,b.addUpdateRange(d*_,f*_)}if(a){const g=l.indexStart,x=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let b=0;b<r.count;b++)s.setX(g+b,d+r.getX(b));for(let b=r.count,_=x;b<_;b++)s.setX(g+b,d);s.needsUpdate=!0,s.addUpdateRange(g,l.reservedIndexCount)}return l.start=a?l.indexStart:l.vertexStart,l.count=a?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let a=0,s=i.length;a<s;a++)i[a].active&&i[a].geometryIndex===e&&this.deleteInstance(a);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,a=i.map((r,l)=>l).sort((r,l)=>i[r].vertexStart-i[l].vertexStart),s=this.geometry;for(let r=0,l=i.length;r<l;r++){const d=a[r],f=i[d];if(f.active!==!1){if(s.index!==null){if(f.indexStart!==t){const{indexStart:g,vertexStart:x,reservedIndexCount:b}=f,_=s.index,S=_.array,w=e-x;for(let M=g;M<g+b;M++)S[M]=S[M]+w;_.array.copyWithin(t,g,g+b),_.addUpdateRange(t,b),f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:g,reservedVertexCount:x}=f,b=s.attributes;for(const _ in b){const S=b[_],{array:w,itemSize:M}=S;w.copyWithin(e*M,g*M,(g+x)*M),S.addUpdateRange(e*M,x*M)}f.vertexStart=e}e+=f.reservedVertexCount,f.start=s.index?f.indexStart:f.vertexStart,this._nextIndexStart=s.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[e];if(a.boundingBox===null){const s=new pr,r=i.index,l=i.attributes.position;for(let d=a.start,f=a.start+a.count;d<f;d++){let g=d;r&&(g=r.getX(g)),s.expandByPoint(hx.fromBufferAttribute(l,g))}a.boundingBox=s}return t.copy(a.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[e];if(a.boundingSphere===null){const s=new bo;this.getBoundingBoxAt(e,Nb),Nb.getCenter(s.center);const r=i.index,l=i.attributes.position;let d=0;for(let f=a.start,g=a.start+a.count;f<g;f++){let x=f;r&&(x=r.getX(x)),hx.fromBufferAttribute(l,x),d=Math.max(d,s.center.distanceToSquared(hx))}s.radius=Math.sqrt(d),a.boundingSphere=s}return t.copy(a.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,a=this._matricesTexture.image.data;return t.toArray(a,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(Hw);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const a=new Int32Array(e),s=new Int32Array(e);km(this._multiDrawCounts,a),km(this._multiDrawStarts,s),this._multiDrawCounts=a,this._multiDrawStarts=s,this._maxInstanceCount=e;const r=this._indirectTexture,l=this._matricesTexture,d=this._colorsTexture;r.dispose(),this._initIndirectTexture(),km(r.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),km(l.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),km(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...i.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new fi,this._initializeGeometry(s));const r=this.geometry;s.index&&km(s.index.array,r.index.array);for(const l in s.attributes)km(s.attributes[l].array,r.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,a=this._geometryInfo,s=this.matrixWorld,r=this.geometry;Vo.material=this.material,Vo.geometry.index=r.index,Vo.geometry.attributes=r.attributes,Vo.geometry.boundingBox===null&&(Vo.geometry.boundingBox=new pr),Vo.geometry.boundingSphere===null&&(Vo.geometry.boundingSphere=new bo);for(let l=0,d=i.length;l<d;l++){if(!i[l].visible||!i[l].active)continue;const f=i[l].geometryIndex,g=a[f];Vo.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(l,Vo.matrixWorld).premultiply(s),this.getBoundingBoxAt(f,Vo.geometry.boundingBox),this.getBoundingSphereAt(f,Vo.geometry.boundingSphere),Vo.raycast(e,Rb);for(let x=0,b=Rb.length;x<b;x++){const _=Rb[x];_.object=this,_.batchId=l,t.push(_)}Rb.length=0}Vo.material=null,Vo.geometry.index=null,Vo.geometry.attributes={},Vo.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,a,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const r=a.getIndex(),l=r===null?1:r.array.BYTES_PER_ELEMENT,d=this._instanceInfo,f=this._multiDrawStarts,g=this._multiDrawCounts,x=this._geometryInfo,b=this.perObjectFrustumCulled,_=this._indirectTexture,S=_.image.data,w=i.isArrayCamera?CG:NR;b&&!i.isArrayCamera&&(ec.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),NR.setFromProjectionMatrix(ec,e.coordinateSystem));let M=0;if(this.sortObjects){ec.copy(this.matrixWorld).invert(),hx.setFromMatrixPosition(i.matrixWorld).applyMatrix4(ec),RR.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(ec);for(let C=0,D=d.length;C<D;C++)if(d[C].visible&&d[C].active){const P=d[C].geometryIndex;this.getMatrixAt(C,ec),this.getBoundingSphereAt(P,Fm).applyMatrix4(ec);let B=!1;if(b&&(B=!w.intersectsSphere(Fm,i)),!B){const F=x[P],j=AG.subVectors(Fm.center,hx).dot(RR);Gw.push(F.start,F.count,j,C)}}const E=Gw.list,T=this.customSort;T===null?E.sort(s.transparent?wG:EG):T.call(this,E,i);for(let C=0,D=E.length;C<D;C++){const P=E[C];f[M]=P.start*l,g[M]=P.count,S[M]=P.index,M++}Gw.reset()}else for(let E=0,T=d.length;E<T;E++)if(d[E].visible&&d[E].active){const C=d[E].geometryIndex;let D=!1;if(b&&(this.getMatrixAt(E,ec),this.getBoundingSphereAt(C,Fm).applyMatrix4(ec),D=!w.intersectsSphere(Fm,i)),!D){const P=x[C];f[M]=P.start*l,g[M]=P.count,S[M]=E,M++}}_.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(e,t,i,a,s,r){this.onBeforeRender(e,null,a,s,r)}}class Sl extends $o{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Zt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const wS=new be,MS=new be,DR=new Fn,fx=new Ng,Db=new bo,Vw=new be,OR=new be;class Yp extends ea{constructor(e=new fi,t=new Sl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let a=1,s=t.count;a<s;a++)wS.fromBufferAttribute(t,a-1),MS.fromBufferAttribute(t,a),i[a]=i[a-1],i[a]+=wS.distanceTo(MS);e.setAttribute("lineDistance",new cn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,a=this.matrixWorld,s=e.params.Line.threshold,r=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Db.copy(i.boundingSphere),Db.applyMatrix4(a),Db.radius+=s,e.ray.intersectsSphere(Db)===!1)return;DR.copy(a).invert(),fx.copy(e.ray).applyMatrix4(DR);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=l*l,f=this.isLineSegments?2:1,g=i.index,b=i.attributes.position;if(g!==null){const _=Math.max(0,r.start),S=Math.min(g.count,r.start+r.count);for(let w=_,M=S-1;w<M;w+=f){const E=g.getX(w),T=g.getX(w+1),C=Ob(this,e,fx,d,E,T,w);C&&t.push(C)}if(this.isLineLoop){const w=g.getX(S-1),M=g.getX(_),E=Ob(this,e,fx,d,w,M,S-1);E&&t.push(E)}}else{const _=Math.max(0,r.start),S=Math.min(b.count,r.start+r.count);for(let w=_,M=S-1;w<M;w+=f){const E=Ob(this,e,fx,d,w,w+1,w);E&&t.push(E)}if(this.isLineLoop){const w=Ob(this,e,fx,d,S-1,_,S-1);w&&t.push(w)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=a.length;s<r;s++){const l=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Ob(n,e,t,i,a,s,r){const l=n.geometry.attributes.position;if(wS.fromBufferAttribute(l,a),MS.fromBufferAttribute(l,s),t.distanceSqToSegment(wS,MS,Vw,OR)>i)return;Vw.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(Vw);if(!(f<e.near||f>e.far))return{distance:f,point:OR.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}const jR=new be,PR=new be;class Mh extends Yp{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let a=0,s=t.count;a<s;a+=2)jR.fromBufferAttribute(t,a),PR.fromBufferAttribute(t,a+1),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+jR.distanceTo(PR);e.setAttribute("lineDistance",new cn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class UO extends Yp{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class X3 extends $o{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const UR=new Fn,vT=new Ng,jb=new bo,Pb=new be;class LO extends ea{constructor(e=new fi,t=new X3){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,a=this.matrixWorld,s=e.params.Points.threshold,r=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),jb.copy(i.boundingSphere),jb.applyMatrix4(a),jb.radius+=s,e.ray.intersectsSphere(jb)===!1)return;UR.copy(a).invert(),vT.copy(e.ray).applyMatrix4(UR);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=l*l,f=i.index,x=i.attributes.position;if(f!==null){const b=Math.max(0,r.start),_=Math.min(f.count,r.start+r.count);for(let S=b,w=_;S<w;S++){const M=f.getX(S);Pb.fromBufferAttribute(x,M),LR(Pb,M,d,a,e,t,this)}}else{const b=Math.max(0,r.start),_=Math.min(x.count,r.start+r.count);for(let S=b,w=_;S<w;S++)Pb.fromBufferAttribute(x,S),LR(Pb,S,d,a,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=a.length;s<r;s++){const l=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function LR(n,e,t,i,a,s,r){const l=vT.distanceSqToPoint(n);if(l<t){const d=new be;vT.closestPointToPoint(n,d),d.applyMatrix4(i);const f=a.ray.origin.distanceTo(d);if(f<a.near||f>a.far)return;s.push({distance:f,distanceToRay:Math.sqrt(l),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:r})}}class zO extends Pa{constructor(e,t,i,a,s=Aa,r=Aa,l,d,f){super(e,t,i,a,s,r,l,d,f),this.isVideoTexture=!0,this.generateMipmaps=!1;const g=this;function x(){g.needsUpdate=!0,e.requestVideoFrameCallback(x)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(x)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class RG extends zO{constructor(e,t,i,a,s,r,l,d){super({},e,t,i,a,s,r,l,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class DG extends Pa{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=xo,this.minFilter=xo,this.generateMipmaps=!1,this.needsUpdate=!0}}class y2 extends Pa{constructor(e,t,i,a,s,r,l,d,f,g,x,b){super(null,r,l,d,f,g,a,s,x,b),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class OG extends y2{constructor(e,t,i,a,s,r){super(e,t,i,s,r),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=fr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class jG extends y2{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,xh),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class PG extends Pa{constructor(e,t,i,a,s,r,l,d,f){super(e,t,i,a,s,r,l,d,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Y3 extends Pa{constructor(e,t,i=bh,a,s,r,l=xo,d=xo,f,g=xv,x=1){if(g!==xv&&g!==bv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const b={width:e,height:t,depth:x};super(b,a,s,r,l,d,g,i,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new zp(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class x2 extends fi{constructor(e=1,t=1,i=4,a=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:a,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),a=Math.max(3,Math.floor(a)),s=Math.max(1,Math.floor(s));const r=[],l=[],d=[],f=[],g=t/2,x=Math.PI/2*e,b=t,_=2*x+b,S=i*2+s,w=a+1,M=new be,E=new be;for(let T=0;T<=S;T++){let C=0,D=0,P=0,B=0;if(T<=i){const O=T/i,I=O*Math.PI/2;D=-g-e*Math.cos(I),P=e*Math.sin(I),B=-e*Math.cos(I),C=O*x}else if(T<=i+s){const O=(T-i)/s;D=-g+O*t,P=e,B=0,C=x+O*b}else{const O=(T-i-s)/i,I=O*Math.PI/2;D=g+e*Math.sin(I),P=e*Math.cos(I),B=e*Math.sin(I),C=x+b+O*x}const F=Math.max(0,Math.min(1,C/_));let j=0;T===0?j=.5/a:T===S&&(j=-.5/a);for(let O=0;O<=a;O++){const I=O/a,W=I*Math.PI*2,Q=Math.sin(W),J=Math.cos(W);E.x=-P*J,E.y=D,E.z=P*Q,l.push(E.x,E.y,E.z),M.set(-P*J,B,P*Q),M.normalize(),d.push(M.x,M.y,M.z),f.push(I+j,F)}if(T>0){const O=(T-1)*w;for(let I=0;I<a;I++){const W=O+I,Q=O+I+1,J=T*w+I,te=T*w+I+1;r.push(W,Q,J),r.push(Q,te,J)}}}this.setIndex(r),this.setAttribute("position",new cn(l,3)),this.setAttribute("normal",new cn(d,3)),this.setAttribute("uv",new cn(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new x2(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class b2 extends fi{constructor(e=1,t=32,i=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:a},t=Math.max(3,t);const s=[],r=[],l=[],d=[],f=new be,g=new wt;r.push(0,0,0),l.push(0,0,1),d.push(.5,.5);for(let x=0,b=3;x<=t;x++,b+=3){const _=i+x/t*a;f.x=e*Math.cos(_),f.y=e*Math.sin(_),r.push(f.x,f.y,f.z),l.push(0,0,1),g.x=(r[b]/e+1)/2,g.y=(r[b+1]/e+1)/2,d.push(g.x,g.y)}for(let x=1;x<=t;x++)s.push(x,x+1,0);this.setIndex(s),this.setAttribute("position",new cn(r,3)),this.setAttribute("normal",new cn(l,3)),this.setAttribute("uv",new cn(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new b2(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class N1 extends fi{constructor(e=1,t=1,i=1,a=32,s=1,r=!1,l=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:a,heightSegments:s,openEnded:r,thetaStart:l,thetaLength:d};const f=this;a=Math.floor(a),s=Math.floor(s);const g=[],x=[],b=[],_=[];let S=0;const w=[],M=i/2;let E=0;T(),r===!1&&(e>0&&C(!0),t>0&&C(!1)),this.setIndex(g),this.setAttribute("position",new cn(x,3)),this.setAttribute("normal",new cn(b,3)),this.setAttribute("uv",new cn(_,2));function T(){const D=new be,P=new be;let B=0;const F=(t-e)/i;for(let j=0;j<=s;j++){const O=[],I=j/s,W=I*(t-e)+e;for(let Q=0;Q<=a;Q++){const J=Q/a,te=J*d+l,oe=Math.sin(te),$=Math.cos(te);P.x=W*oe,P.y=-I*i+M,P.z=W*$,x.push(P.x,P.y,P.z),D.set(oe,F,$).normalize(),b.push(D.x,D.y,D.z),_.push(J,1-I),O.push(S++)}w.push(O)}for(let j=0;j<a;j++)for(let O=0;O<s;O++){const I=w[O][j],W=w[O+1][j],Q=w[O+1][j+1],J=w[O][j+1];(e>0||O!==0)&&(g.push(I,W,J),B+=3),(t>0||O!==s-1)&&(g.push(W,Q,J),B+=3)}f.addGroup(E,B,0),E+=B}function C(D){const P=S,B=new wt,F=new be;let j=0;const O=D===!0?e:t,I=D===!0?1:-1;for(let Q=1;Q<=a;Q++)x.push(0,M*I,0),b.push(0,I,0),_.push(.5,.5),S++;const W=S;for(let Q=0;Q<=a;Q++){const te=Q/a*d+l,oe=Math.cos(te),$=Math.sin(te);F.x=O*$,F.y=M*I,F.z=O*oe,x.push(F.x,F.y,F.z),b.push(0,I,0),B.x=oe*.5+.5,B.y=$*.5*I+.5,_.push(B.x,B.y),S++}for(let Q=0;Q<a;Q++){const J=P+Q,te=W+Q;D===!0?g.push(te,te+1,J):g.push(te+1,te,J),j+=3}f.addGroup(E,j,D===!0?1:2),E+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N1(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class R1 extends N1{constructor(e=1,t=1,i=32,a=1,s=!1,r=0,l=Math.PI*2){super(0,e,t,i,a,s,r,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:r,thetaLength:l}}static fromJSON(e){return new R1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class em extends fi{constructor(e=[],t=[],i=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:a};const s=[],r=[];l(a),f(i),g(),this.setAttribute("position",new cn(s,3)),this.setAttribute("normal",new cn(s.slice(),3)),this.setAttribute("uv",new cn(r,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function l(T){const C=new be,D=new be,P=new be;for(let B=0;B<t.length;B+=3)_(t[B+0],C),_(t[B+1],D),_(t[B+2],P),d(C,D,P,T)}function d(T,C,D,P){const B=P+1,F=[];for(let j=0;j<=B;j++){F[j]=[];const O=T.clone().lerp(D,j/B),I=C.clone().lerp(D,j/B),W=B-j;for(let Q=0;Q<=W;Q++)Q===0&&j===B?F[j][Q]=O:F[j][Q]=O.clone().lerp(I,Q/W)}for(let j=0;j<B;j++)for(let O=0;O<2*(B-j)-1;O++){const I=Math.floor(O/2);O%2===0?(b(F[j][I+1]),b(F[j+1][I]),b(F[j][I])):(b(F[j][I+1]),b(F[j+1][I+1]),b(F[j+1][I]))}}function f(T){const C=new be;for(let D=0;D<s.length;D+=3)C.x=s[D+0],C.y=s[D+1],C.z=s[D+2],C.normalize().multiplyScalar(T),s[D+0]=C.x,s[D+1]=C.y,s[D+2]=C.z}function g(){const T=new be;for(let C=0;C<s.length;C+=3){T.x=s[C+0],T.y=s[C+1],T.z=s[C+2];const D=M(T)/2/Math.PI+.5,P=E(T)/Math.PI+.5;r.push(D,1-P)}S(),x()}function x(){for(let T=0;T<r.length;T+=6){const C=r[T+0],D=r[T+2],P=r[T+4],B=Math.max(C,D,P),F=Math.min(C,D,P);B>.9&&F<.1&&(C<.2&&(r[T+0]+=1),D<.2&&(r[T+2]+=1),P<.2&&(r[T+4]+=1))}}function b(T){s.push(T.x,T.y,T.z)}function _(T,C){const D=T*3;C.x=e[D+0],C.y=e[D+1],C.z=e[D+2]}function S(){const T=new be,C=new be,D=new be,P=new be,B=new wt,F=new wt,j=new wt;for(let O=0,I=0;O<s.length;O+=9,I+=6){T.set(s[O+0],s[O+1],s[O+2]),C.set(s[O+3],s[O+4],s[O+5]),D.set(s[O+6],s[O+7],s[O+8]),B.set(r[I+0],r[I+1]),F.set(r[I+2],r[I+3]),j.set(r[I+4],r[I+5]),P.copy(T).add(C).add(D).divideScalar(3);const W=M(P);w(B,I+0,T,W),w(F,I+2,C,W),w(j,I+4,D,W)}}function w(T,C,D,P){P<0&&T.x===1&&(r[C]=T.x-1),D.x===0&&D.z===0&&(r[C]=P/2/Math.PI+.5)}function M(T){return Math.atan2(T.z,-T.x)}function E(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new em(e.vertices,e.indices,e.radius,e.details)}}class _2 extends em{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,a=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-i,0,-a,i,0,a,-i,0,a,i,-a,-i,0,-a,i,0,a,-i,0,a,i,0,-i,0,-a,i,0,-a,-i,0,a,i,0,a],r=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,r,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _2(e.radius,e.detail)}}const Ub=new be,Lb=new be,qw=new be,zb=new nc;class IO extends fi{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const a=Math.pow(10,4),s=Math.cos(dg*t),r=e.getIndex(),l=e.getAttribute("position"),d=r?r.count:l.count,f=[0,0,0],g=["a","b","c"],x=new Array(3),b={},_=[];for(let S=0;S<d;S+=3){r?(f[0]=r.getX(S),f[1]=r.getX(S+1),f[2]=r.getX(S+2)):(f[0]=S,f[1]=S+1,f[2]=S+2);const{a:w,b:M,c:E}=zb;if(w.fromBufferAttribute(l,f[0]),M.fromBufferAttribute(l,f[1]),E.fromBufferAttribute(l,f[2]),zb.getNormal(qw),x[0]=`${Math.round(w.x*a)},${Math.round(w.y*a)},${Math.round(w.z*a)}`,x[1]=`${Math.round(M.x*a)},${Math.round(M.y*a)},${Math.round(M.z*a)}`,x[2]=`${Math.round(E.x*a)},${Math.round(E.y*a)},${Math.round(E.z*a)}`,!(x[0]===x[1]||x[1]===x[2]||x[2]===x[0]))for(let T=0;T<3;T++){const C=(T+1)%3,D=x[T],P=x[C],B=zb[g[T]],F=zb[g[C]],j=`${D}_${P}`,O=`${P}_${D}`;O in b&&b[O]?(qw.dot(b[O].normal)<=s&&(_.push(B.x,B.y,B.z),_.push(F.x,F.y,F.z)),b[O]=null):j in b||(b[j]={index0:f[T],index1:f[C],normal:qw.clone()})}}for(const S in b)if(b[S]){const{index0:w,index1:M}=b[S];Ub.fromBufferAttribute(l,w),Lb.fromBufferAttribute(l,M),_.push(Ub.x,Ub.y,Ub.z),_.push(Lb.x,Lb.y,Lb.z)}this.setAttribute("position",new cn(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class yd{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,a=this.getPoint(0),s=0;t.push(0);for(let r=1;r<=e;r++)i=this.getPoint(r/e),s+=i.distanceTo(a),t.push(s),a=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let a=0;const s=i.length;let r;t?r=t:r=e*i[s-1];let l=0,d=s-1,f;for(;l<=d;)if(a=Math.floor(l+(d-l)/2),f=i[a]-r,f<0)l=a+1;else if(f>0)d=a-1;else{d=a;break}if(a=d,i[a]===r)return a/(s-1);const g=i[a],b=i[a+1]-g,_=(r-g)/b;return(a+_)/(s-1)}getTangent(e,t){let a=e-1e-4,s=e+1e-4;a<0&&(a=0),s>1&&(s=1);const r=this.getPoint(a),l=this.getPoint(s),d=t||(r.isVector2?new wt:new be);return d.copy(l).sub(r).normalize(),d}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new be,a=[],s=[],r=[],l=new be,d=new Fn;for(let _=0;_<=e;_++){const S=_/e;a[_]=this.getTangentAt(S,new be)}s[0]=new be,r[0]=new be;let f=Number.MAX_VALUE;const g=Math.abs(a[0].x),x=Math.abs(a[0].y),b=Math.abs(a[0].z);g<=f&&(f=g,i.set(1,0,0)),x<=f&&(f=x,i.set(0,1,0)),b<=f&&i.set(0,0,1),l.crossVectors(a[0],i).normalize(),s[0].crossVectors(a[0],l),r[0].crossVectors(a[0],s[0]);for(let _=1;_<=e;_++){if(s[_]=s[_-1].clone(),r[_]=r[_-1].clone(),l.crossVectors(a[_-1],a[_]),l.length()>Number.EPSILON){l.normalize();const S=Math.acos(ni(a[_-1].dot(a[_]),-1,1));s[_].applyMatrix4(d.makeRotationAxis(l,S))}r[_].crossVectors(a[_],s[_])}if(t===!0){let _=Math.acos(ni(s[0].dot(s[e]),-1,1));_/=e,a[0].dot(l.crossVectors(s[0],s[e]))>0&&(_=-_);for(let S=1;S<=e;S++)s[S].applyMatrix4(d.makeRotationAxis(a[S],_*S)),r[S].crossVectors(a[S],s[S])}return{tangents:a,normals:s,binormals:r}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class S2 extends yd{constructor(e=0,t=0,i=1,a=1,s=0,r=Math.PI*2,l=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=a,this.aStartAngle=s,this.aEndAngle=r,this.aClockwise=l,this.aRotation=d}getPoint(e,t=new wt){const i=t,a=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const r=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=a;for(;s>a;)s-=a;s<Number.EPSILON&&(r?s=0:s=a),this.aClockwise===!0&&!r&&(s===a?s=-a:s=s-a);const l=this.aStartAngle+e*s;let d=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const g=Math.cos(this.aRotation),x=Math.sin(this.aRotation),b=d-this.aX,_=f-this.aY;d=b*g-_*x+this.aX,f=b*x+_*g+this.aY}return i.set(d,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class BO extends S2{constructor(e,t,i,a,s,r){super(e,t,i,i,a,s,r),this.isArcCurve=!0,this.type="ArcCurve"}}function W3(){let n=0,e=0,t=0,i=0;function a(s,r,l,d){n=s,e=l,t=-3*s+3*r-2*l-d,i=2*s-2*r+l+d}return{initCatmullRom:function(s,r,l,d,f){a(r,l,f*(l-s),f*(d-r))},initNonuniformCatmullRom:function(s,r,l,d,f,g,x){let b=(r-s)/f-(l-s)/(f+g)+(l-r)/g,_=(l-r)/g-(d-r)/(g+x)+(d-l)/x;b*=g,_*=g,a(r,l,b,_)},calc:function(s){const r=s*s,l=r*s;return n+e*s+t*r+i*l}}}const Ib=new be,Xw=new W3,Yw=new W3,Ww=new W3;class FO extends yd{constructor(e=[],t=!1,i="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=a}getPoint(e,t=new be){const i=t,a=this.points,s=a.length,r=(s-(this.closed?0:1))*e;let l=Math.floor(r),d=r-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:d===0&&l===s-1&&(l=s-2,d=1);let f,g;this.closed||l>0?f=a[(l-1)%s]:(Ib.subVectors(a[0],a[1]).add(a[0]),f=Ib);const x=a[l%s],b=a[(l+1)%s];if(this.closed||l+2<s?g=a[(l+2)%s]:(Ib.subVectors(a[s-1],a[s-2]).add(a[s-1]),g=Ib),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let S=Math.pow(f.distanceToSquared(x),_),w=Math.pow(x.distanceToSquared(b),_),M=Math.pow(b.distanceToSquared(g),_);w<1e-4&&(w=1),S<1e-4&&(S=w),M<1e-4&&(M=w),Xw.initNonuniformCatmullRom(f.x,x.x,b.x,g.x,S,w,M),Yw.initNonuniformCatmullRom(f.y,x.y,b.y,g.y,S,w,M),Ww.initNonuniformCatmullRom(f.z,x.z,b.z,g.z,S,w,M)}else this.curveType==="catmullrom"&&(Xw.initCatmullRom(f.x,x.x,b.x,g.x,this.tension),Yw.initCatmullRom(f.y,x.y,b.y,g.y,this.tension),Ww.initCatmullRom(f.z,x.z,b.z,g.z,this.tension));return i.set(Xw.calc(d),Yw.calc(d),Ww.calc(d)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(new be().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function zR(n,e,t,i,a){const s=(i-e)*.5,r=(a-t)*.5,l=n*n,d=n*l;return(2*t-2*i+s+r)*d+(-3*t+3*i-2*s-r)*l+s*n+t}function UG(n,e){const t=1-n;return t*t*e}function LG(n,e){return 2*(1-n)*n*e}function zG(n,e){return n*n*e}function Lx(n,e,t,i){return UG(n,e)+LG(n,t)+zG(n,i)}function IG(n,e){const t=1-n;return t*t*t*e}function BG(n,e){const t=1-n;return 3*t*t*n*e}function FG(n,e){return 3*(1-n)*n*n*e}function kG(n,e){return n*n*n*e}function zx(n,e,t,i,a){return IG(n,e)+BG(n,t)+FG(n,i)+kG(n,a)}class K3 extends yd{constructor(e=new wt,t=new wt,i=new wt,a=new wt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=a}getPoint(e,t=new wt){const i=t,a=this.v0,s=this.v1,r=this.v2,l=this.v3;return i.set(zx(e,a.x,s.x,r.x,l.x),zx(e,a.y,s.y,r.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class kO extends yd{constructor(e=new be,t=new be,i=new be,a=new be){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=a}getPoint(e,t=new be){const i=t,a=this.v0,s=this.v1,r=this.v2,l=this.v3;return i.set(zx(e,a.x,s.x,r.x,l.x),zx(e,a.y,s.y,r.y,l.y),zx(e,a.z,s.z,r.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Z3 extends yd{constructor(e=new wt,t=new wt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new wt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new wt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class HO extends yd{constructor(e=new be,t=new be){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new be){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new be){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Q3 extends yd{constructor(e=new wt,t=new wt,i=new wt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new wt){const i=t,a=this.v0,s=this.v1,r=this.v2;return i.set(Lx(e,a.x,s.x,r.x),Lx(e,a.y,s.y,r.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class J3 extends yd{constructor(e=new be,t=new be,i=new be){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new be){const i=t,a=this.v0,s=this.v1,r=this.v2;return i.set(Lx(e,a.x,s.x,r.x),Lx(e,a.y,s.y,r.y),Lx(e,a.z,s.z,r.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $3 extends yd{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new wt){const i=t,a=this.points,s=(a.length-1)*e,r=Math.floor(s),l=s-r,d=a[r===0?r:r-1],f=a[r],g=a[r>a.length-2?a.length-1:r+1],x=a[r>a.length-3?a.length-1:r+2];return i.set(zR(l,d.x,f.x,g.x,x.x),zR(l,d.y,f.y,g.y,x.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const a=this.points[t];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(new wt().fromArray(a))}return this}}var TS=Object.freeze({__proto__:null,ArcCurve:BO,CatmullRomCurve3:FO,CubicBezierCurve:K3,CubicBezierCurve3:kO,EllipseCurve:S2,LineCurve:Z3,LineCurve3:HO,QuadraticBezierCurve:Q3,QuadraticBezierCurve3:J3,SplineCurve:$3});class GO extends yd{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new TS[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),a=this.getCurveLengths();let s=0;for(;s<a.length;){if(a[s]>=i){const r=a[s]-i,l=this.curves[s],d=l.getLength(),f=d===0?0:1-r/d;return l.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,a=this.curves.length;i<a;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let a=0,s=this.curves;a<s.length;a++){const r=s[a],l=r.isEllipseCurve?e*2:r.isLineCurve||r.isLineCurve3?1:r.isSplineCurve?e*r.points.length:e,d=r.getPoints(l);for(let f=0;f<d.length;f++){const g=d[f];i&&i.equals(g)||(t.push(g),i=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const a=this.curves[t];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const a=e.curves[t];this.curves.push(new TS[a.type]().fromJSON(a))}return this}}class CS extends GO{constructor(e){super(),this.type="Path",this.currentPoint=new wt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Z3(this.currentPoint.clone(),new wt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,a){const s=new Q3(this.currentPoint.clone(),new wt(e,t),new wt(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}bezierCurveTo(e,t,i,a,s,r){const l=new K3(this.currentPoint.clone(),new wt(e,t),new wt(i,a),new wt(s,r));return this.curves.push(l),this.currentPoint.set(s,r),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new $3(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,a,s,r){const l=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+l,t+d,i,a,s,r),this}absarc(e,t,i,a,s,r){return this.absellipse(e,t,i,i,a,s,r),this}ellipse(e,t,i,a,s,r,l,d){const f=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+f,t+g,i,a,s,r,l,d),this}absellipse(e,t,i,a,s,r,l,d){const f=new S2(e,t,i,a,s,r,l,d);if(this.curves.length>0){const x=f.getPoint(0);x.equals(this.currentPoint)||this.lineTo(x.x,x.y)}this.curves.push(f);const g=f.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class hg extends CS{constructor(e){super(e),this.uuid=Gc(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,a=this.holes.length;i<a;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const a=e.holes[t];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const a=this.holes[t];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const a=e.holes[t];this.holes.push(new CS().fromJSON(a))}return this}}function HG(n,e,t=2){const i=e&&e.length,a=i?e[0]*t:n.length;let s=VO(n,0,a,t,!0);const r=[];if(!s||s.next===s.prev)return r;let l,d,f;if(i&&(s=YG(n,e,s,t)),n.length>80*t){l=1/0,d=1/0;let g=-1/0,x=-1/0;for(let b=t;b<a;b+=t){const _=n[b],S=n[b+1];_<l&&(l=_),S<d&&(d=S),_>g&&(g=_),S>x&&(x=S)}f=Math.max(g-l,x-d),f=f!==0?32767/f:0}return t1(s,r,t,l,d,f,0),r}function VO(n,e,t,i,a){let s;if(a===aV(n,e,t,i)>0)for(let r=e;r<t;r+=i)s=IR(r/i|0,n[r],n[r+1],s);else for(let r=t-i;r>=e;r-=i)s=IR(r/i|0,n[r],n[r+1],s);return s&&Mv(s,s.next)&&(i1(s),s=s.next),s}function yg(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Mv(t,t.next)||xs(t.prev,t,t.next)===0)){if(i1(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function t1(n,e,t,i,a,s,r){if(!n)return;!r&&s&&JG(n,i,a,s);let l=n;for(;n.prev!==n.next;){const d=n.prev,f=n.next;if(s?VG(n,i,a,s):GG(n)){e.push(d.i,n.i,f.i),i1(n),n=f.next,l=f.next;continue}if(n=f,n===l){r?r===1?(n=qG(yg(n),e),t1(n,e,t,i,a,s,2)):r===2&&XG(n,e,t,i,a,s):t1(yg(n),e,t,i,a,s,1);break}}}function GG(n){const e=n.prev,t=n,i=n.next;if(xs(e,t,i)>=0)return!1;const a=e.x,s=t.x,r=i.x,l=e.y,d=t.y,f=i.y,g=Math.min(a,s,r),x=Math.min(l,d,f),b=Math.max(a,s,r),_=Math.max(l,d,f);let S=i.next;for(;S!==e;){if(S.x>=g&&S.x<=b&&S.y>=x&&S.y<=_&&wx(a,l,s,d,r,f,S.x,S.y)&&xs(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function VG(n,e,t,i){const a=n.prev,s=n,r=n.next;if(xs(a,s,r)>=0)return!1;const l=a.x,d=s.x,f=r.x,g=a.y,x=s.y,b=r.y,_=Math.min(l,d,f),S=Math.min(g,x,b),w=Math.max(l,d,f),M=Math.max(g,x,b),E=yT(_,S,e,t,i),T=yT(w,M,e,t,i);let C=n.prevZ,D=n.nextZ;for(;C&&C.z>=E&&D&&D.z<=T;){if(C.x>=_&&C.x<=w&&C.y>=S&&C.y<=M&&C!==a&&C!==r&&wx(l,g,d,x,f,b,C.x,C.y)&&xs(C.prev,C,C.next)>=0||(C=C.prevZ,D.x>=_&&D.x<=w&&D.y>=S&&D.y<=M&&D!==a&&D!==r&&wx(l,g,d,x,f,b,D.x,D.y)&&xs(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;C&&C.z>=E;){if(C.x>=_&&C.x<=w&&C.y>=S&&C.y<=M&&C!==a&&C!==r&&wx(l,g,d,x,f,b,C.x,C.y)&&xs(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;D&&D.z<=T;){if(D.x>=_&&D.x<=w&&D.y>=S&&D.y<=M&&D!==a&&D!==r&&wx(l,g,d,x,f,b,D.x,D.y)&&xs(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function qG(n,e){let t=n;do{const i=t.prev,a=t.next.next;!Mv(i,a)&&XO(i,t,t.next,a)&&n1(i,a)&&n1(a,i)&&(e.push(i.i,t.i,a.i),i1(t),i1(t.next),t=n=a),t=t.next}while(t!==n);return yg(t)}function XG(n,e,t,i,a,s){let r=n;do{let l=r.next.next;for(;l!==r.prev;){if(r.i!==l.i&&tV(r,l)){let d=YO(r,l);r=yg(r,r.next),d=yg(d,d.next),t1(r,e,t,i,a,s,0),t1(d,e,t,i,a,s,0);return}l=l.next}r=r.next}while(r!==n)}function YG(n,e,t,i){const a=[];for(let s=0,r=e.length;s<r;s++){const l=e[s]*i,d=s<r-1?e[s+1]*i:n.length,f=VO(n,l,d,i,!1);f===f.next&&(f.steiner=!0),a.push(eV(f))}a.sort(WG);for(let s=0;s<a.length;s++)t=KG(a[s],t);return t}function WG(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),a=(e.next.y-e.y)/(e.next.x-e.x);t=i-a}return t}function KG(n,e){const t=ZG(n,e);if(!t)return e;const i=YO(t,n);return yg(i,i.next),yg(t,t.next)}function ZG(n,e){let t=e;const i=n.x,a=n.y;let s=-1/0,r;if(Mv(n,t))return t;do{if(Mv(n,t.next))return t.next;if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const x=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(x<=i&&x>s&&(s=x,r=t.x<t.next.x?t:t.next,x===i))return r}t=t.next}while(t!==e);if(!r)return null;const l=r,d=r.x,f=r.y;let g=1/0;t=r;do{if(i>=t.x&&t.x>=d&&i!==t.x&&qO(a<f?i:s,a,d,f,a<f?s:i,a,t.x,t.y)){const x=Math.abs(a-t.y)/(i-t.x);n1(t,n)&&(x<g||x===g&&(t.x>r.x||t.x===r.x&&QG(r,t)))&&(r=t,g=x)}t=t.next}while(t!==l);return r}function QG(n,e){return xs(n.prev,n,e.prev)<0&&xs(e.next,n,n.next)<0}function JG(n,e,t,i){let a=n;do a.z===0&&(a.z=yT(a.x,a.y,e,t,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==n);a.prevZ.nextZ=null,a.prevZ=null,$G(a)}function $G(n){let e,t=1;do{let i=n,a;n=null;let s=null;for(e=0;i;){e++;let r=i,l=0;for(let f=0;f<t&&(l++,r=r.nextZ,!!r);f++);let d=t;for(;l>0||d>0&&r;)l!==0&&(d===0||!r||i.z<=r.z)?(a=i,i=i.nextZ,l--):(a=r,r=r.nextZ,d--),s?s.nextZ=a:n=a,a.prevZ=s,s=a;i=r}s.nextZ=null,t*=2}while(e>1);return n}function yT(n,e,t,i,a){return n=(n-t)*a|0,e=(e-i)*a|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function eV(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function qO(n,e,t,i,a,s,r,l){return(a-r)*(e-l)>=(n-r)*(s-l)&&(n-r)*(i-l)>=(t-r)*(e-l)&&(t-r)*(s-l)>=(a-r)*(i-l)}function wx(n,e,t,i,a,s,r,l){return!(n===r&&e===l)&&qO(n,e,t,i,a,s,r,l)}function tV(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!nV(n,e)&&(n1(n,e)&&n1(e,n)&&iV(n,e)&&(xs(n.prev,n,e.prev)||xs(n,e.prev,e))||Mv(n,e)&&xs(n.prev,n,n.next)>0&&xs(e.prev,e,e.next)>0)}function xs(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Mv(n,e){return n.x===e.x&&n.y===e.y}function XO(n,e,t,i){const a=Fb(xs(n,e,t)),s=Fb(xs(n,e,i)),r=Fb(xs(t,i,n)),l=Fb(xs(t,i,e));return!!(a!==s&&r!==l||a===0&&Bb(n,t,e)||s===0&&Bb(n,i,e)||r===0&&Bb(t,n,i)||l===0&&Bb(t,e,i))}function Bb(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Fb(n){return n>0?1:n<0?-1:0}function nV(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&XO(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function n1(n,e){return xs(n.prev,n,n.next)<0?xs(n,e,n.next)>=0&&xs(n,n.prev,e)>=0:xs(n,e,n.prev)<0||xs(n,n.next,e)<0}function iV(n,e){let t=n,i=!1;const a=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&a<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function YO(n,e){const t=xT(n.i,n.x,n.y),i=xT(e.i,e.x,e.y),a=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=a,a.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function IR(n,e,t,i){const a=xT(n,e,t);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function i1(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function xT(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function aV(n,e,t,i){let a=0;for(let s=e,r=t-i;s<t;s+=i)a+=(n[r]-n[s])*(n[s+1]+n[r+1]),r=s;return a}class sV{static triangulate(e,t,i=2){return HG(e,t,i)}}class ud{static area(e){const t=e.length;let i=0;for(let a=t-1,s=0;s<t;a=s++)i+=e[a].x*e[s].y-e[s].x*e[a].y;return i*.5}static isClockWise(e){return ud.area(e)<0}static triangulateShape(e,t){const i=[],a=[],s=[];BR(e),FR(i,e);let r=e.length;t.forEach(BR);for(let d=0;d<t.length;d++)a.push(r),r+=t[d].length,FR(i,t[d]);const l=sV.triangulate(i,a);for(let d=0;d<l.length;d+=3)s.push(l.slice(d,d+3));return s}}function BR(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function FR(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class E2 extends fi{constructor(e=new hg([new wt(.5,.5),new wt(-.5,.5),new wt(-.5,-.5),new wt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,a=[],s=[];for(let l=0,d=e.length;l<d;l++){const f=e[l];r(f)}this.setAttribute("position",new cn(a,3)),this.setAttribute("uv",new cn(s,2)),this.computeVertexNormals();function r(l){const d=[],f=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,x=t.depth!==void 0?t.depth:1;let b=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:_-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const E=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:rV;let C,D=!1,P,B,F,j;E&&(C=E.getSpacedPoints(g),D=!0,b=!1,P=E.computeFrenetFrames(g,!1),B=new be,F=new be,j=new be),b||(M=0,_=0,S=0,w=0);const O=l.extractPoints(f);let I=O.shape;const W=O.holes;if(!ud.isClockWise(I)){I=I.reverse();for(let he=0,ke=W.length;he<ke;he++){const Ee=W[he];ud.isClockWise(Ee)&&(W[he]=Ee.reverse())}}function J(he){const Ee=10000000000000001e-36;let Le=he[0];for(let Ie=1;Ie<=he.length;Ie++){const Et=Ie%he.length,ct=he[Et],At=ct.x-Le.x,Pt=ct.y-Le.y,Se=At*At+Pt*Pt,se=Math.max(Math.abs(ct.x),Math.abs(ct.y),Math.abs(Le.x),Math.abs(Le.y)),He=Ee*se*se;if(Se<=He){he.splice(Et,1),Ie--;continue}Le=ct}}J(I),W.forEach(J);const te=W.length,oe=I;for(let he=0;he<te;he++){const ke=W[he];I=I.concat(ke)}function $(he,ke,Ee){return ke||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().addScaledVector(ke,Ee)}const X=I.length;function G(he,ke,Ee){let Le,Ie,Et;const ct=he.x-ke.x,At=he.y-ke.y,Pt=Ee.x-he.x,Se=Ee.y-he.y,se=ct*ct+At*At,He=ct*Se-At*Pt;if(Math.abs(He)>Number.EPSILON){const Ve=Math.sqrt(se),Te=Math.sqrt(Pt*Pt+Se*Se),ze=ke.x-At/Ve,Nt=ke.y+ct/Ve,Dt=Ee.x-Se/Te,Ft=Ee.y+Pt/Te,Xt=((Dt-ze)*Se-(Ft-Nt)*Pt)/(ct*Se-At*Pt);Le=ze+ct*Xt-he.x,Ie=Nt+At*Xt-he.y;const gt=Le*Le+Ie*Ie;if(gt<=2)return new wt(Le,Ie);Et=Math.sqrt(gt/2)}else{let Ve=!1;ct>Number.EPSILON?Pt>Number.EPSILON&&(Ve=!0):ct<-Number.EPSILON?Pt<-Number.EPSILON&&(Ve=!0):Math.sign(At)===Math.sign(Se)&&(Ve=!0),Ve?(Le=-At,Ie=ct,Et=Math.sqrt(se)):(Le=ct,Ie=At,Et=Math.sqrt(se/2))}return new wt(Le/Et,Ie/Et)}const ee=[];for(let he=0,ke=oe.length,Ee=ke-1,Le=he+1;he<ke;he++,Ee++,Le++)Ee===ke&&(Ee=0),Le===ke&&(Le=0),ee[he]=G(oe[he],oe[Ee],oe[Le]);const Y=[];let ne,ue=ee.concat();for(let he=0,ke=te;he<ke;he++){const Ee=W[he];ne=[];for(let Le=0,Ie=Ee.length,Et=Ie-1,ct=Le+1;Le<Ie;Le++,Et++,ct++)Et===Ie&&(Et=0),ct===Ie&&(ct=0),ne[Le]=G(Ee[Le],Ee[Et],Ee[ct]);Y.push(ne),ue=ue.concat(ne)}let de;if(M===0)de=ud.triangulateShape(oe,W);else{const he=[],ke=[];for(let Ee=0;Ee<M;Ee++){const Le=Ee/M,Ie=_*Math.cos(Le*Math.PI/2),Et=S*Math.sin(Le*Math.PI/2)+w;for(let ct=0,At=oe.length;ct<At;ct++){const Pt=$(oe[ct],ee[ct],Et);Ke(Pt.x,Pt.y,-Ie),Le===0&&he.push(Pt)}for(let ct=0,At=te;ct<At;ct++){const Pt=W[ct];ne=Y[ct];const Se=[];for(let se=0,He=Pt.length;se<He;se++){const Ve=$(Pt[se],ne[se],Et);Ke(Ve.x,Ve.y,-Ie),Le===0&&Se.push(Ve)}Le===0&&ke.push(Se)}}de=ud.triangulateShape(he,ke)}const ie=de.length,Me=S+w;for(let he=0;he<X;he++){const ke=b?$(I[he],ue[he],Me):I[he];D?(F.copy(P.normals[0]).multiplyScalar(ke.x),B.copy(P.binormals[0]).multiplyScalar(ke.y),j.copy(C[0]).add(F).add(B),Ke(j.x,j.y,j.z)):Ke(ke.x,ke.y,0)}for(let he=1;he<=g;he++)for(let ke=0;ke<X;ke++){const Ee=b?$(I[ke],ue[ke],Me):I[ke];D?(F.copy(P.normals[he]).multiplyScalar(Ee.x),B.copy(P.binormals[he]).multiplyScalar(Ee.y),j.copy(C[he]).add(F).add(B),Ke(j.x,j.y,j.z)):Ke(Ee.x,Ee.y,x/g*he)}for(let he=M-1;he>=0;he--){const ke=he/M,Ee=_*Math.cos(ke*Math.PI/2),Le=S*Math.sin(ke*Math.PI/2)+w;for(let Ie=0,Et=oe.length;Ie<Et;Ie++){const ct=$(oe[Ie],ee[Ie],Le);Ke(ct.x,ct.y,x+Ee)}for(let Ie=0,Et=W.length;Ie<Et;Ie++){const ct=W[Ie];ne=Y[Ie];for(let At=0,Pt=ct.length;At<Pt;At++){const Se=$(ct[At],ne[At],Le);D?Ke(Se.x,Se.y+C[g-1].y,C[g-1].x+Ee):Ke(Se.x,Se.y,x+Ee)}}}ye(),ae();function ye(){const he=a.length/3;if(b){let ke=0,Ee=X*ke;for(let Le=0;Le<ie;Le++){const Ie=de[Le];Ge(Ie[2]+Ee,Ie[1]+Ee,Ie[0]+Ee)}ke=g+M*2,Ee=X*ke;for(let Le=0;Le<ie;Le++){const Ie=de[Le];Ge(Ie[0]+Ee,Ie[1]+Ee,Ie[2]+Ee)}}else{for(let ke=0;ke<ie;ke++){const Ee=de[ke];Ge(Ee[2],Ee[1],Ee[0])}for(let ke=0;ke<ie;ke++){const Ee=de[ke];Ge(Ee[0]+X*g,Ee[1]+X*g,Ee[2]+X*g)}}i.addGroup(he,a.length/3-he,0)}function ae(){const he=a.length/3;let ke=0;_e(oe,ke),ke+=oe.length;for(let Ee=0,Le=W.length;Ee<Le;Ee++){const Ie=W[Ee];_e(Ie,ke),ke+=Ie.length}i.addGroup(he,a.length/3-he,1)}function _e(he,ke){let Ee=he.length;for(;--Ee>=0;){const Le=Ee;let Ie=Ee-1;Ie<0&&(Ie=he.length-1);for(let Et=0,ct=g+M*2;Et<ct;Et++){const At=X*Et,Pt=X*(Et+1),Se=ke+Le+At,se=ke+Ie+At,He=ke+Ie+Pt,Ve=ke+Le+Pt;st(Se,se,He,Ve)}}}function Ke(he,ke,Ee){d.push(he),d.push(ke),d.push(Ee)}function Ge(he,ke,Ee){ft(he),ft(ke),ft(Ee);const Le=a.length/3,Ie=T.generateTopUV(i,a,Le-3,Le-2,Le-1);Pe(Ie[0]),Pe(Ie[1]),Pe(Ie[2])}function st(he,ke,Ee,Le){ft(he),ft(ke),ft(Le),ft(ke),ft(Ee),ft(Le);const Ie=a.length/3,Et=T.generateSideWallUV(i,a,Ie-6,Ie-3,Ie-2,Ie-1);Pe(Et[0]),Pe(Et[1]),Pe(Et[3]),Pe(Et[1]),Pe(Et[2]),Pe(Et[3])}function ft(he){a.push(d[he*3+0]),a.push(d[he*3+1]),a.push(d[he*3+2])}function Pe(he){s.push(he.x),s.push(he.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return oV(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,r=e.shapes.length;s<r;s++){const l=t[e.shapes[s]];i.push(l)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new TS[a.type]().fromJSON(a)),new E2(i,e.options)}}const rV={generateTopUV:function(n,e,t,i,a){const s=e[t*3],r=e[t*3+1],l=e[i*3],d=e[i*3+1],f=e[a*3],g=e[a*3+1];return[new wt(s,r),new wt(l,d),new wt(f,g)]},generateSideWallUV:function(n,e,t,i,a,s){const r=e[t*3],l=e[t*3+1],d=e[t*3+2],f=e[i*3],g=e[i*3+1],x=e[i*3+2],b=e[a*3],_=e[a*3+1],S=e[a*3+2],w=e[s*3],M=e[s*3+1],E=e[s*3+2];return Math.abs(l-g)<Math.abs(r-f)?[new wt(r,1-d),new wt(f,1-x),new wt(b,1-S),new wt(w,1-E)]:[new wt(l,1-d),new wt(g,1-x),new wt(_,1-S),new wt(M,1-E)]}};function oV(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,a=n.length;i<a;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class D1 extends em{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,a=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new D1(e.radius,e.detail)}}class w2 extends fi{constructor(e=[new wt(0,-.5),new wt(.5,0),new wt(0,.5)],t=12,i=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:a},t=Math.floor(t),a=ni(a,0,Math.PI*2);const s=[],r=[],l=[],d=[],f=[],g=1/t,x=new be,b=new wt,_=new be,S=new be,w=new be;let M=0,E=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:M=e[T+1].x-e[T].x,E=e[T+1].y-e[T].y,_.x=E*1,_.y=-M,_.z=E*0,w.copy(_),_.normalize(),d.push(_.x,_.y,_.z);break;case e.length-1:d.push(w.x,w.y,w.z);break;default:M=e[T+1].x-e[T].x,E=e[T+1].y-e[T].y,_.x=E*1,_.y=-M,_.z=E*0,S.copy(_),_.x+=w.x,_.y+=w.y,_.z+=w.z,_.normalize(),d.push(_.x,_.y,_.z),w.copy(S)}for(let T=0;T<=t;T++){const C=i+T*g*a,D=Math.sin(C),P=Math.cos(C);for(let B=0;B<=e.length-1;B++){x.x=e[B].x*D,x.y=e[B].y,x.z=e[B].x*P,r.push(x.x,x.y,x.z),b.x=T/t,b.y=B/(e.length-1),l.push(b.x,b.y);const F=d[3*B+0]*D,j=d[3*B+1],O=d[3*B+0]*P;f.push(F,j,O)}}for(let T=0;T<t;T++)for(let C=0;C<e.length-1;C++){const D=C+T*e.length,P=D,B=D+e.length,F=D+e.length+1,j=D+1;s.push(P,B,j),s.push(F,j,B)}this.setIndex(s),this.setAttribute("position",new cn(r,3)),this.setAttribute("uv",new cn(l,2)),this.setAttribute("normal",new cn(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w2(e.points,e.segments,e.phiStart,e.phiLength)}}class O1 extends em{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,a,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new O1(e.radius,e.detail)}}class If extends fi{constructor(e=1,t=1,i=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:a};const s=e/2,r=t/2,l=Math.floor(i),d=Math.floor(a),f=l+1,g=d+1,x=e/l,b=t/d,_=[],S=[],w=[],M=[];for(let E=0;E<g;E++){const T=E*b-r;for(let C=0;C<f;C++){const D=C*x-s;S.push(D,-T,0),w.push(0,0,1),M.push(C/l),M.push(1-E/d)}}for(let E=0;E<d;E++)for(let T=0;T<l;T++){const C=T+f*E,D=T+f*(E+1),P=T+1+f*(E+1),B=T+1+f*E;_.push(C,D,B),_.push(D,P,B)}this.setIndex(_),this.setAttribute("position",new cn(S,3)),this.setAttribute("normal",new cn(w,3)),this.setAttribute("uv",new cn(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new If(e.width,e.height,e.widthSegments,e.heightSegments)}}class M2 extends fi{constructor(e=.5,t=1,i=32,a=1,s=0,r=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:a,thetaStart:s,thetaLength:r},i=Math.max(3,i),a=Math.max(1,a);const l=[],d=[],f=[],g=[];let x=e;const b=(t-e)/a,_=new be,S=new wt;for(let w=0;w<=a;w++){for(let M=0;M<=i;M++){const E=s+M/i*r;_.x=x*Math.cos(E),_.y=x*Math.sin(E),d.push(_.x,_.y,_.z),f.push(0,0,1),S.x=(_.x/t+1)/2,S.y=(_.y/t+1)/2,g.push(S.x,S.y)}x+=b}for(let w=0;w<a;w++){const M=w*(i+1);for(let E=0;E<i;E++){const T=E+M,C=T,D=T+i+1,P=T+i+2,B=T+1;l.push(C,D,B),l.push(D,P,B)}}this.setIndex(l),this.setAttribute("position",new cn(d,3)),this.setAttribute("normal",new cn(f,3)),this.setAttribute("uv",new cn(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new M2(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class T2 extends fi{constructor(e=new hg([new wt(0,.5),new wt(-.5,-.5),new wt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],a=[],s=[],r=[];let l=0,d=0;if(Array.isArray(e)===!1)f(e);else for(let g=0;g<e.length;g++)f(e[g]),this.addGroup(l,d,g),l+=d,d=0;this.setIndex(i),this.setAttribute("position",new cn(a,3)),this.setAttribute("normal",new cn(s,3)),this.setAttribute("uv",new cn(r,2));function f(g){const x=a.length/3,b=g.extractPoints(t);let _=b.shape;const S=b.holes;ud.isClockWise(_)===!1&&(_=_.reverse());for(let M=0,E=S.length;M<E;M++){const T=S[M];ud.isClockWise(T)===!0&&(S[M]=T.reverse())}const w=ud.triangulateShape(_,S);for(let M=0,E=S.length;M<E;M++){const T=S[M];_=_.concat(T)}for(let M=0,E=_.length;M<E;M++){const T=_[M];a.push(T.x,T.y,0),s.push(0,0,1),r.push(T.x,T.y)}for(let M=0,E=w.length;M<E;M++){const T=w[M],C=T[0]+x,D=T[1]+x,P=T[2]+x;i.push(C,D,P),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return lV(t,e)}static fromJSON(e,t){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const r=t[e.shapes[a]];i.push(r)}return new T2(i,e.curveSegments)}}function lV(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const a=n[t];e.shapes.push(a.uuid)}else e.shapes.push(n.uuid);return e}class j1 extends fi{constructor(e=1,t=32,i=16,a=0,s=Math.PI*2,r=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:a,phiLength:s,thetaStart:r,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const d=Math.min(r+l,Math.PI);let f=0;const g=[],x=new be,b=new be,_=[],S=[],w=[],M=[];for(let E=0;E<=i;E++){const T=[],C=E/i;let D=0;E===0&&r===0?D=.5/t:E===i&&d===Math.PI&&(D=-.5/t);for(let P=0;P<=t;P++){const B=P/t;x.x=-e*Math.cos(a+B*s)*Math.sin(r+C*l),x.y=e*Math.cos(r+C*l),x.z=e*Math.sin(a+B*s)*Math.sin(r+C*l),S.push(x.x,x.y,x.z),b.copy(x).normalize(),w.push(b.x,b.y,b.z),M.push(B+D,1-C),T.push(f++)}g.push(T)}for(let E=0;E<i;E++)for(let T=0;T<t;T++){const C=g[E][T+1],D=g[E][T],P=g[E+1][T],B=g[E+1][T+1];(E!==0||r>0)&&_.push(C,D,B),(E!==i-1||d<Math.PI)&&_.push(D,P,B)}this.setIndex(_),this.setAttribute("position",new cn(S,3)),this.setAttribute("normal",new cn(w,3)),this.setAttribute("uv",new cn(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new j1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class C2 extends em{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,a,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new C2(e.radius,e.detail)}}class A2 extends fi{constructor(e=1,t=.4,i=12,a=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:a,arc:s},i=Math.floor(i),a=Math.floor(a);const r=[],l=[],d=[],f=[],g=new be,x=new be,b=new be;for(let _=0;_<=i;_++)for(let S=0;S<=a;S++){const w=S/a*s,M=_/i*Math.PI*2;x.x=(e+t*Math.cos(M))*Math.cos(w),x.y=(e+t*Math.cos(M))*Math.sin(w),x.z=t*Math.sin(M),l.push(x.x,x.y,x.z),g.x=e*Math.cos(w),g.y=e*Math.sin(w),b.subVectors(x,g).normalize(),d.push(b.x,b.y,b.z),f.push(S/a),f.push(_/i)}for(let _=1;_<=i;_++)for(let S=1;S<=a;S++){const w=(a+1)*_+S-1,M=(a+1)*(_-1)+S-1,E=(a+1)*(_-1)+S,T=(a+1)*_+S;r.push(w,M,T),r.push(M,E,T)}this.setIndex(r),this.setAttribute("position",new cn(l,3)),this.setAttribute("normal",new cn(d,3)),this.setAttribute("uv",new cn(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new A2(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class N2 extends fi{constructor(e=1,t=.4,i=64,a=8,s=2,r=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:a,p:s,q:r},i=Math.floor(i),a=Math.floor(a);const l=[],d=[],f=[],g=[],x=new be,b=new be,_=new be,S=new be,w=new be,M=new be,E=new be;for(let C=0;C<=i;++C){const D=C/i*s*Math.PI*2;T(D,s,r,e,_),T(D+.01,s,r,e,S),M.subVectors(S,_),E.addVectors(S,_),w.crossVectors(M,E),E.crossVectors(w,M),w.normalize(),E.normalize();for(let P=0;P<=a;++P){const B=P/a*Math.PI*2,F=-t*Math.cos(B),j=t*Math.sin(B);x.x=_.x+(F*E.x+j*w.x),x.y=_.y+(F*E.y+j*w.y),x.z=_.z+(F*E.z+j*w.z),d.push(x.x,x.y,x.z),b.subVectors(x,_).normalize(),f.push(b.x,b.y,b.z),g.push(C/i),g.push(P/a)}}for(let C=1;C<=i;C++)for(let D=1;D<=a;D++){const P=(a+1)*(C-1)+(D-1),B=(a+1)*C+(D-1),F=(a+1)*C+D,j=(a+1)*(C-1)+D;l.push(P,B,j),l.push(B,F,j)}this.setIndex(l),this.setAttribute("position",new cn(d,3)),this.setAttribute("normal",new cn(f,3)),this.setAttribute("uv",new cn(g,2));function T(C,D,P,B,F){const j=Math.cos(C),O=Math.sin(C),I=P/D*C,W=Math.cos(I);F.x=B*(2+W)*.5*j,F.y=B*(2+W)*O*.5,F.z=B*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N2(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class R2 extends fi{constructor(e=new J3(new be(-1,-1,0),new be(-1,1,0),new be(1,1,0)),t=64,i=1,a=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:a,closed:s};const r=e.computeFrenetFrames(t,s);this.tangents=r.tangents,this.normals=r.normals,this.binormals=r.binormals;const l=new be,d=new be,f=new wt;let g=new be;const x=[],b=[],_=[],S=[];w(),this.setIndex(S),this.setAttribute("position",new cn(x,3)),this.setAttribute("normal",new cn(b,3)),this.setAttribute("uv",new cn(_,2));function w(){for(let C=0;C<t;C++)M(C);M(s===!1?t:0),T(),E()}function M(C){g=e.getPointAt(C/t,g);const D=r.normals[C],P=r.binormals[C];for(let B=0;B<=a;B++){const F=B/a*Math.PI*2,j=Math.sin(F),O=-Math.cos(F);d.x=O*D.x+j*P.x,d.y=O*D.y+j*P.y,d.z=O*D.z+j*P.z,d.normalize(),b.push(d.x,d.y,d.z),l.x=g.x+i*d.x,l.y=g.y+i*d.y,l.z=g.z+i*d.z,x.push(l.x,l.y,l.z)}}function E(){for(let C=1;C<=t;C++)for(let D=1;D<=a;D++){const P=(a+1)*(C-1)+(D-1),B=(a+1)*C+(D-1),F=(a+1)*C+D,j=(a+1)*(C-1)+D;S.push(P,B,j),S.push(B,F,j)}}function T(){for(let C=0;C<=t;C++)for(let D=0;D<=a;D++)f.x=C/t,f.y=D/a,_.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new R2(new TS[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class WO extends fi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,a=new be,s=new be;if(e.index!==null){const r=e.attributes.position,l=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,g=d.length;f<g;++f){const x=d[f],b=x.start,_=x.count;for(let S=b,w=b+_;S<w;S+=3)for(let M=0;M<3;M++){const E=l.getX(S+M),T=l.getX(S+(M+1)%3);a.fromBufferAttribute(r,E),s.fromBufferAttribute(r,T),kR(a,s,i)===!0&&(t.push(a.x,a.y,a.z),t.push(s.x,s.y,s.z))}}}else{const r=e.attributes.position;for(let l=0,d=r.count/3;l<d;l++)for(let f=0;f<3;f++){const g=3*l+f,x=3*l+(f+1)%3;a.fromBufferAttribute(r,g),s.fromBufferAttribute(r,x),kR(a,s,i)===!0&&(t.push(a.x,a.y,a.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new cn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function kR(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(a)===!0?!1:(t.add(i),t.add(a),!0)}var HR=Object.freeze({__proto__:null,BoxGeometry:Rg,CapsuleGeometry:x2,CircleGeometry:b2,ConeGeometry:R1,CylinderGeometry:N1,DodecahedronGeometry:_2,EdgesGeometry:IO,ExtrudeGeometry:E2,IcosahedronGeometry:D1,LatheGeometry:w2,OctahedronGeometry:O1,PlaneGeometry:If,PolyhedronGeometry:em,RingGeometry:M2,ShapeGeometry:T2,SphereGeometry:j1,TetrahedronGeometry:C2,TorusGeometry:A2,TorusKnotGeometry:N2,TubeGeometry:R2,WireframeGeometry:WO});class KO extends $o{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Zt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class ZO extends So{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class eC extends $o{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$p,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Wc,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class QO extends eC{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new wt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ni(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Zt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Zt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class JO extends $o{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Zt(16777215),this.specular=new Zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$p,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Wc,this.combine=E1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $O extends $o{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$p,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class ej extends $o{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$p,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class tj extends $o{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$p,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Wc,this.combine=E1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class D2 extends $o{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=hO,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class tC extends $o{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class nj extends $o{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$p,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ij extends Sl{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function og(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function aj(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function sj(n){function e(a,s){return n[a]-n[s]}const t=n.length,i=new Array(t);for(let a=0;a!==t;++a)i[a]=a;return i.sort(e),i}function bT(n,e,t){const i=n.length,a=new n.constructor(i);for(let s=0,r=0;r!==i;++s){const l=t[s]*e;for(let d=0;d!==e;++d)a[r++]=n[l+d]}return a}function nC(n,e,t,i){let a=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[a++];if(s===void 0)return;let r=s[i];if(r!==void 0)if(Array.isArray(r))do r=s[i],r!==void 0&&(e.push(s.time),t.push(...r)),s=n[a++];while(s!==void 0);else if(r.toArray!==void 0)do r=s[i],r!==void 0&&(e.push(s.time),r.toArray(t,t.length)),s=n[a++];while(s!==void 0);else do r=s[i],r!==void 0&&(e.push(s.time),t.push(r)),s=n[a++];while(s!==void 0)}function cV(n,e,t,i,a=30){const s=n.clone();s.name=e;const r=[];for(let d=0;d<s.tracks.length;++d){const f=s.tracks[d],g=f.getValueSize(),x=[],b=[];for(let _=0;_<f.times.length;++_){const S=f.times[_]*a;if(!(S<t||S>=i)){x.push(f.times[_]);for(let w=0;w<g;++w)b.push(f.values[_*g+w])}}x.length!==0&&(f.times=og(x,f.times.constructor),f.values=og(b,f.values.constructor),r.push(f))}s.tracks=r;let l=1/0;for(let d=0;d<s.tracks.length;++d)l>s.tracks[d].times[0]&&(l=s.tracks[d].times[0]);for(let d=0;d<s.tracks.length;++d)s.tracks[d].shift(-1*l);return s.resetDuration(),s}function uV(n,e=0,t=n,i=30){i<=0&&(i=30);const a=t.tracks.length,s=e/i;for(let r=0;r<a;++r){const l=t.tracks[r],d=l.ValueTypeName;if(d==="bool"||d==="string")continue;const f=n.tracks.find(function(E){return E.name===l.name&&E.ValueTypeName===d});if(f===void 0)continue;let g=0;const x=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=x/3);let b=0;const _=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=_/3);const S=l.times.length-1;let w;if(s<=l.times[0]){const E=g,T=x-g;w=l.values.slice(E,T)}else if(s>=l.times[S]){const E=S*x+g,T=E+x-g;w=l.values.slice(E,T)}else{const E=l.createInterpolant(),T=g,C=x-g;E.evaluate(s),w=E.resultBuffer.slice(T,C)}d==="quaternion"&&new Ko().fromArray(w).normalize().conjugate().toArray(w);const M=f.times.length;for(let E=0;E<M;++E){const T=E*_+b;if(d==="quaternion")Ko.multiplyQuaternionsFlat(f.values,T,w,0,f.values,T);else{const C=_-b*2;for(let D=0;D<C;++D)f.values[T+D]-=w[D]}}}return n.blendMode=L3,n}class dV{static convertArray(e,t){return og(e,t)}static isTypedArray(e){return aj(e)}static getKeyframeOrder(e){return sj(e)}static sortedArray(e,t,i){return bT(e,t,i)}static flattenJSON(e,t,i,a){nC(e,t,i,a)}static subclip(e,t,i,a,s=30){return cV(e,t,i,a,s)}static makeClipAdditive(e,t=0,i=e,a=30){return uV(e,t,i,a)}}class P1{constructor(e,t,i,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,a=t[i],s=t[i-1];e:{t:{let r;n:{i:if(!(e<a)){for(let l=i+2;;){if(a===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=a,a=t[++i],e<a)break t}r=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(i=2,s=l);for(let d=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(a=s,s=t[--i-1],e>=s)break t}r=i,i=0;break n}break e}for(;i<r;){const l=i+r>>>1;e<t[l]?r=l:i=l+1}if(a=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,a)}return this.interpolate_(i,s,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,a=this.valueSize,s=e*a;for(let r=0;r!==a;++r)t[r]=i[s+r];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class rj extends P1{constructor(e,t,i,a){super(e,t,i,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ag,endingEnd:ag}}intervalChanged_(e,t,i){const a=this.parameterPositions;let s=e-2,r=e+1,l=a[s],d=a[r];if(l===void 0)switch(this.getSettings_().endingStart){case sg:s=e,l=2*t-i;break;case Zx:s=a.length-2,l=t+a[s]-a[s+1];break;default:s=e,l=i}if(d===void 0)switch(this.getSettings_().endingEnd){case sg:r=e,d=2*i-t;break;case Zx:r=1,d=i+a[1]-a[0];break;default:r=e-1,d=t}const f=(i-t)*.5,g=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(d-i),this._offsetPrev=s*g,this._offsetNext=r*g}interpolate_(e,t,i,a){const s=this.resultBuffer,r=this.sampleValues,l=this.valueSize,d=e*l,f=d-l,g=this._offsetPrev,x=this._offsetNext,b=this._weightPrev,_=this._weightNext,S=(i-t)/(a-t),w=S*S,M=w*S,E=-b*M+2*b*w-b*S,T=(1+b)*M+(-1.5-2*b)*w+(-.5+b)*S+1,C=(-1-_)*M+(1.5+_)*w+.5*S,D=_*M-_*w;for(let P=0;P!==l;++P)s[P]=E*r[g+P]+T*r[f+P]+C*r[d+P]+D*r[x+P];return s}}class iC extends P1{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const s=this.resultBuffer,r=this.sampleValues,l=this.valueSize,d=e*l,f=d-l,g=(i-t)/(a-t),x=1-g;for(let b=0;b!==l;++b)s[b]=r[f+b]*x+r[d+b]*g;return s}}class oj extends P1{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class xu{constructor(e,t,i,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=og(t,this.TimeBufferType),this.values=og(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:og(e.times,Array),values:og(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(i.interpolation=a)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new oj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new iC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new rj(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Kx:t=this.InterpolantFactoryMethodDiscrete;break;case ES:t=this.InterpolantFactoryMethodLinear;break;case w_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Kx;case this.InterpolantFactoryMethodLinear:return ES;case this.InterpolantFactoryMethodSmooth:return w_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]*=e}return this}trim(e,t){const i=this.times,a=i.length;let s=0,r=a-1;for(;s!==a&&i[s]<e;)++s;for(;r!==-1&&i[r]>t;)--r;if(++r,s!==0||r!==a){s>=r&&(r=Math.max(r,1),s=r-1);const l=this.getValueSize();this.times=i.slice(s,r),this.values=this.values.slice(s*l,r*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,a=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let r=null;for(let l=0;l!==s;l++){const d=i[l];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,d),e=!1;break}if(r!==null&&r>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,d,r),e=!1;break}r=d}if(a!==void 0&&aj(a))for(let l=0,d=a.length;l!==d;++l){const f=a[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),a=this.getInterpolation()===w_,s=e.length-1;let r=1;for(let l=1;l<s;++l){let d=!1;const f=e[l],g=e[l+1];if(f!==g&&(l!==1||f!==e[0]))if(a)d=!0;else{const x=l*i,b=x-i,_=x+i;for(let S=0;S!==i;++S){const w=t[x+S];if(w!==t[b+S]||w!==t[_+S]){d=!0;break}}}if(d){if(l!==r){e[r]=e[l];const x=l*i,b=r*i;for(let _=0;_!==i;++_)t[b+_]=t[x+_]}++r}}if(s>0){e[r]=e[s];for(let l=s*i,d=r*i,f=0;f!==i;++f)t[d+f]=t[l+f];++r}return r!==e.length?(this.times=e.slice(0,r),this.values=t.slice(0,r*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,a=new i(this.name,e,t);return a.createInterpolant=this.createInterpolant,a}}xu.prototype.ValueTypeName="";xu.prototype.TimeBufferType=Float32Array;xu.prototype.ValueBufferType=Float32Array;xu.prototype.DefaultInterpolation=ES;class Dg extends xu{constructor(e,t,i){super(e,t,i)}}Dg.prototype.ValueTypeName="bool";Dg.prototype.ValueBufferType=Array;Dg.prototype.DefaultInterpolation=Kx;Dg.prototype.InterpolantFactoryMethodLinear=void 0;Dg.prototype.InterpolantFactoryMethodSmooth=void 0;class aC extends xu{constructor(e,t,i,a){super(e,t,i,a)}}aC.prototype.ValueTypeName="color";class a1 extends xu{constructor(e,t,i,a){super(e,t,i,a)}}a1.prototype.ValueTypeName="number";class lj extends P1{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const s=this.resultBuffer,r=this.sampleValues,l=this.valueSize,d=(i-t)/(a-t);let f=e*l;for(let g=f+l;f!==g;f+=4)Ko.slerpFlat(s,0,r,f-l,r,f,d);return s}}class U1 extends xu{constructor(e,t,i,a){super(e,t,i,a)}InterpolantFactoryMethodLinear(e){return new lj(this.times,this.values,this.getValueSize(),e)}}U1.prototype.ValueTypeName="quaternion";U1.prototype.InterpolantFactoryMethodSmooth=void 0;class Og extends xu{constructor(e,t,i){super(e,t,i)}}Og.prototype.ValueTypeName="string";Og.prototype.ValueBufferType=Array;Og.prototype.DefaultInterpolation=Kx;Og.prototype.InterpolantFactoryMethodLinear=void 0;Og.prototype.InterpolantFactoryMethodSmooth=void 0;class s1 extends xu{constructor(e,t,i,a){super(e,t,i,a)}}s1.prototype.ValueTypeName="vector";class r1{constructor(e="",t=-1,i=[],a=c2){this.name=e,this.tracks=i,this.duration=t,this.blendMode=a,this.uuid=Gc(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,a=1/(e.fps||1);for(let r=0,l=i.length;r!==l;++r)t.push(fV(i[r]).scale(a));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,a={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,r=i.length;s!==r;++s)t.push(xu.toJSON(i[s]));return a}static CreateFromMorphTargetSequence(e,t,i,a){const s=t.length,r=[];for(let l=0;l<s;l++){let d=[],f=[];d.push((l+s-1)%s,l,(l+1)%s),f.push(0,1,0);const g=sj(d);d=bT(d,1,g),f=bT(f,1,g),!a&&d[0]===0&&(d.push(s),f.push(f[0])),r.push(new a1(".morphTargetInfluences["+t[l].name+"]",d,f).scale(1/i))}return new this(e,-1,r)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const a=e;i=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<i.length;a++)if(i[a].name===t)return i[a];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const a={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,d=e.length;l<d;l++){const f=e[l],g=f.name.match(s);if(g&&g.length>1){const x=g[1];let b=a[x];b||(a[x]=b=[]),b.push(f)}}const r=[];for(const l in a)r.push(this.CreateFromMorphTargetSequence(l,a[l],t,i));return r}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(x,b,_,S,w){if(_.length!==0){const M=[],E=[];nC(_,M,E,S),M.length!==0&&w.push(new x(b,M,E))}},a=[],s=e.name||"default",r=e.fps||30,l=e.blendMode;let d=e.length||-1;const f=e.hierarchy||[];for(let x=0;x<f.length;x++){const b=f[x].keys;if(!(!b||b.length===0))if(b[0].morphTargets){const _={};let S;for(S=0;S<b.length;S++)if(b[S].morphTargets)for(let w=0;w<b[S].morphTargets.length;w++)_[b[S].morphTargets[w]]=-1;for(const w in _){const M=[],E=[];for(let T=0;T!==b[S].morphTargets.length;++T){const C=b[S];M.push(C.time),E.push(C.morphTarget===w?1:0)}a.push(new a1(".morphTargetInfluence["+w+"]",M,E))}d=_.length*r}else{const _=".bones["+t[x].name+"]";i(s1,_+".position",b,"pos",a),i(U1,_+".quaternion",b,"rot",a),i(s1,_+".scale",b,"scl",a)}}return a.length===0?null:new this(s,d,a,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,a=e.length;i!==a;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function hV(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return a1;case"vector":case"vector2":case"vector3":case"vector4":return s1;case"color":return aC;case"quaternion":return U1;case"bool":case"boolean":return Dg;case"string":return Og}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function fV(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=hV(n.type);if(n.times===void 0){const t=[],i=[];nC(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ch={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class O2{constructor(e,t,i){const a=this;let s=!1,r=0,l=0,d;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(g){l++,s===!1&&a.onStart!==void 0&&a.onStart(g,r,l),s=!0},this.itemEnd=function(g){r++,a.onProgress!==void 0&&a.onProgress(g,r,l),r===l&&(s=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(g){a.onError!==void 0&&a.onError(g)},this.resolveURL=function(g){return d?d(g):g},this.setURLModifier=function(g){return d=g,this},this.addHandler=function(g,x){return f.push(g,x),this},this.removeHandler=function(g){const x=f.indexOf(g);return x!==-1&&f.splice(x,2),this},this.getHandler=function(g){for(let x=0,b=f.length;x<b;x+=2){const _=f[x],S=f[x+1];if(_.global&&(_.lastIndex=0),_.test(g))return S}return null}}}const cj=new O2;class El{constructor(e){this.manager=e!==void 0?e:cj,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(a,s){i.load(e,a,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}El.DEFAULT_MATERIAL_NAME="__DEFAULT";const bf={};class pV extends Error{constructor(e,t){super(e),this.response=t}}class Vc extends El{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ch.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(bf[e]!==void 0){bf[e].push({onLoad:t,onProgress:i,onError:a});return}bf[e]=[],bf[e].push({onLoad:t,onProgress:i,onError:a});const r=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,d=this.responseType;fetch(r).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const g=bf[e],x=f.body.getReader(),b=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),_=b?parseInt(b):0,S=_!==0;let w=0;const M=new ReadableStream({start(E){T();function T(){x.read().then(({done:C,value:D})=>{if(C)E.close();else{w+=D.byteLength;const P=new ProgressEvent("progress",{lengthComputable:S,loaded:w,total:_});for(let B=0,F=g.length;B<F;B++){const j=g[B];j.onProgress&&j.onProgress(P)}E.enqueue(D),T()}},C=>{E.error(C)})}}});return new Response(M)}else throw new pV(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(d){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(g=>new DOMParser().parseFromString(g,l));case"json":return f.json();default:if(l==="")return f.text();{const x=/charset="?([^;"\s]*)"?/i.exec(l),b=x&&x[1]?x[1].toLowerCase():void 0,_=new TextDecoder(b);return f.arrayBuffer().then(S=>_.decode(S))}}}).then(f=>{ch.add(`file:${e}`,f);const g=bf[e];delete bf[e];for(let x=0,b=g.length;x<b;x++){const _=g[x];_.onLoad&&_.onLoad(f)}}).catch(f=>{const g=bf[e];if(g===void 0)throw this.manager.itemError(e),f;delete bf[e];for(let x=0,b=g.length;x<b;x++){const _=g[x];_.onError&&_.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class mV extends El{constructor(e){super(e)}load(e,t,i,a){const s=this,r=new Vc(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(d){a?a(d):console.error(d),s.manager.itemError(e)}},i,a)}parse(e){const t=[];for(let i=0;i<e.length;i++){const a=r1.parse(e[i]);t.push(a)}return t}}class gV extends El{constructor(e){super(e)}load(e,t,i,a){const s=this,r=[],l=new y2,d=new Vc(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(s.withCredentials);let f=0;function g(x){d.load(e[x],function(b){const _=s.parse(b,!0);r[x]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},f+=1,f===6&&(_.mipmapCount===1&&(l.minFilter=Aa),l.image=r,l.format=_.format,l.needsUpdate=!0,t&&t(l))},i,a)}if(Array.isArray(e))for(let x=0,b=e.length;x<b;++x)g(x);else d.load(e,function(x){const b=s.parse(x,!0);if(b.isCubemap){const _=b.mipmaps.length/b.mipmapCount;for(let S=0;S<_;S++){r[S]={mipmaps:[]};for(let w=0;w<b.mipmapCount;w++)r[S].mipmaps.push(b.mipmaps[S*b.mipmapCount+w]),r[S].format=b.format,r[S].width=b.width,r[S].height=b.height}l.image=r}else l.image.width=b.width,l.image.height=b.height,l.mipmaps=b.mipmaps;b.mipmapCount===1&&(l.minFilter=Aa),l.format=b.format,l.needsUpdate=!0,t&&t(l)},i,a);return l}}const V0=new WeakMap;class o1 extends El{constructor(e){super(e)}load(e,t,i,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,r=ch.get(`image:${e}`);if(r!==void 0){if(r.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(r),s.manager.itemEnd(e)},0);else{let x=V0.get(r);x===void 0&&(x=[],V0.set(r,x)),x.push({onLoad:t,onError:a})}return r}const l=e1("img");function d(){g(),t&&t(this);const x=V0.get(this)||[];for(let b=0;b<x.length;b++){const _=x[b];_.onLoad&&_.onLoad(this)}V0.delete(this),s.manager.itemEnd(e)}function f(x){g(),a&&a(x),ch.remove(`image:${e}`);const b=V0.get(this)||[];for(let _=0;_<b.length;_++){const S=b[_];S.onError&&S.onError(x)}V0.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function g(){l.removeEventListener("load",d,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",d,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),ch.add(`image:${e}`,l),s.manager.itemStart(e),l.src=e,l}}class uj extends El{constructor(e){super(e)}load(e,t,i,a){const s=new C1;s.colorSpace=yo;const r=new o1(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);let l=0;function d(f){r.load(e[f],function(g){s.images[f]=g,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,a)}for(let f=0;f<e.length;++f)d(f);return s}}class sC extends El{constructor(e){super(e)}load(e,t,i,a){const s=this,r=new dd,l=new Vc(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(d){let f;try{f=s.parse(d)}catch(g){if(a!==void 0)a(g);else{console.error(g);return}}f.image!==void 0?r.image=f.image:f.data!==void 0&&(r.image.width=f.width,r.image.height=f.height,r.image.data=f.data),r.wrapS=f.wrapS!==void 0?f.wrapS:fr,r.wrapT=f.wrapT!==void 0?f.wrapT:fr,r.magFilter=f.magFilter!==void 0?f.magFilter:Aa,r.minFilter=f.minFilter!==void 0?f.minFilter:Aa,r.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(r.colorSpace=f.colorSpace),f.flipY!==void 0&&(r.flipY=f.flipY),f.format!==void 0&&(r.format=f.format),f.type!==void 0&&(r.type=f.type),f.mipmaps!==void 0&&(r.mipmaps=f.mipmaps,r.minFilter=lh),f.mipmapCount===1&&(r.minFilter=Aa),f.generateMipmaps!==void 0&&(r.generateMipmaps=f.generateMipmaps),r.needsUpdate=!0,t&&t(r,f)},i,a),r}}class vV extends El{constructor(e){super(e)}load(e,t,i,a){const s=new Pa,r=new o1(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},i,a),s}}class tm extends ea{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Zt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class dj extends tm{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ea.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Zt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Kw=new Fn,GR=new be,VR=new be;class rC{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new wt(512,512),this.mapType=bl,this.map=null,this.mapPass=null,this.matrix=new Fn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Iv,this._frameExtents=new wt(1,1),this._viewportCount=1,this._viewports=[new $i(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;GR.setFromMatrixPosition(e.matrixWorld),t.position.copy(GR),VR.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(VR),t.updateMatrixWorld(),Kw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Kw),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Kw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class yV extends rC{constructor(){super(new Gs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=_v*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(i!==t.fov||a!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=a,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class hj extends tm{constructor(e,t,i=0,a=Math.PI/3,s=0,r=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ea.DEFAULT_UP),this.updateMatrix(),this.target=new ea,this.distance=i,this.angle=a,this.penumbra=s,this.decay=r,this.map=null,this.shadow=new yV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const qR=new Fn,px=new be,Zw=new be;class xV extends rC{constructor(){super(new Gs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new wt(4,2),this._viewportCount=6,this._viewports=[new $i(2,1,1,1),new $i(0,1,1,1),new $i(3,1,1,1),new $i(1,1,1,1),new $i(3,0,1,1),new $i(1,0,1,1)],this._cubeDirections=[new be(1,0,0),new be(-1,0,0),new be(0,0,1),new be(0,0,-1),new be(0,1,0),new be(0,-1,0)],this._cubeUps=[new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,0,1),new be(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,a=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),px.setFromMatrixPosition(e.matrixWorld),i.position.copy(px),Zw.copy(i.position),Zw.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Zw),i.updateMatrixWorld(),a.makeTranslation(-px.x,-px.y,-px.z),qR.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qR)}}class fj extends tm{constructor(e,t,i=0,a=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=a,this.shadow=new xV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Cf extends h2{constructor(e=-1,t=1,i=1,a=-1,s=.1,r=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=a,this.near=s,this.far=r,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,a,s,r){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let s=i-e,r=i+e,l=a+t,d=a-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,r=s+f*this.view.width,l-=g*this.view.offsetY,d=l-g*this.view.height}this.projectionMatrix.makeOrthographic(s,r,l,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class bV extends rC{constructor(){super(new Cf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class pj extends tm{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ea.DEFAULT_UP),this.updateMatrix(),this.target=new ea,this.shadow=new bV}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class mj extends tm{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class gj extends tm{constructor(e,t,i=10,a=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class vj{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new be)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,a=e.y,s=e.z,r=this.coefficients;return t.copy(r[0]).multiplyScalar(.282095),t.addScaledVector(r[1],.488603*a),t.addScaledVector(r[2],.488603*s),t.addScaledVector(r[3],.488603*i),t.addScaledVector(r[4],1.092548*(i*a)),t.addScaledVector(r[5],1.092548*(a*s)),t.addScaledVector(r[6],.315392*(3*s*s-1)),t.addScaledVector(r[7],1.092548*(i*s)),t.addScaledVector(r[8],.546274*(i*i-a*a)),t}getIrradianceAt(e,t){const i=e.x,a=e.y,s=e.z,r=this.coefficients;return t.copy(r[0]).multiplyScalar(.886227),t.addScaledVector(r[1],2*.511664*a),t.addScaledVector(r[2],2*.511664*s),t.addScaledVector(r[3],2*.511664*i),t.addScaledVector(r[4],2*.429043*i*a),t.addScaledVector(r[5],2*.429043*a*s),t.addScaledVector(r[6],.743125*s*s-.247708),t.addScaledVector(r[7],2*.429043*i*s),t.addScaledVector(r[8],.429043*(i*i-a*a)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].fromArray(e,t+a*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].toArray(e,t+a*3);return e}static getBasisAt(e,t){const i=e.x,a=e.y,s=e.z;t[0]=.282095,t[1]=.488603*a,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*a,t[5]=1.092548*a*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-a*a)}}class yj extends tm{constructor(e=new vj,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class j2 extends El{constructor(e){super(e),this.textures={}}load(e,t,i,a){const s=this,r=new Vc(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.setWithCredentials(s.withCredentials),r.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(d){a?a(d):console.error(d),s.manager.itemError(e)}},i,a)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const a=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new Zt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(a.dispersion=e.dispersion),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(a.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(a.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(a.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(a.depthFunc=e.depthFunc),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(a.blendSrc=e.blendSrc),e.blendDst!==void 0&&(a.blendDst=e.blendDst),e.blendEquation!==void 0&&(a.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(a.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(a.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==void 0&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(a.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const r=e.uniforms[s];switch(a.uniforms[s]={},r.type){case"t":a.uniforms[s].value=i(r.value);break;case"c":a.uniforms[s].value=new Zt().setHex(r.value);break;case"v2":a.uniforms[s].value=new wt().fromArray(r.value);break;case"v3":a.uniforms[s].value=new be().fromArray(r.value);break;case"v4":a.uniforms[s].value=new $i().fromArray(r.value);break;case"m3":a.uniforms[s].value=new oi().fromArray(r.value);break;case"m4":a.uniforms[s].value=new Fn().fromArray(r.value);break;default:a.uniforms[s].value=r.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)a.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(a.lights=e.lights),e.clipping!==void 0&&(a.clipping=e.clipping),e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=i(e.map)),e.matcap!==void 0&&(a.matcap=i(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),a.normalScale=new wt().fromArray(s)}return e.displacementMap!==void 0&&(a.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=i(e.envMap)),e.envMapRotation!==void 0&&a.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new wt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(a.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=i(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return j2.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:KO,SpriteMaterial:V3,RawShaderMaterial:ZO,ShaderMaterial:So,PointsMaterial:X3,MeshPhysicalMaterial:QO,MeshStandardMaterial:eC,MeshPhongMaterial:JO,MeshToonMaterial:$O,MeshNormalMaterial:ej,MeshLambertMaterial:tj,MeshDepthMaterial:D2,MeshDistanceMaterial:tC,MeshBasicMaterial:zf,MeshMatcapMaterial:nj,LineDashedMaterial:ij,LineBasicMaterial:Sl,Material:$o};return new t[e]}}class _T{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class xj extends fi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class bj extends El{constructor(e){super(e)}load(e,t,i,a){const s=this,r=new Vc(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.setWithCredentials(s.withCredentials),r.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(d){a?a(d):console.error(d),s.manager.itemError(e)}},i,a)}parse(e){const t={},i={};function a(_,S){if(t[S]!==void 0)return t[S];const M=_.interleavedBuffers[S],E=s(_,M.buffer),T=av(M.type,E),C=new m2(T,M.stride);return C.uuid=M.uuid,t[S]=C,C}function s(_,S){if(i[S]!==void 0)return i[S];const M=_.arrayBuffers[S],E=new Uint32Array(M).buffer;return i[S]=E,E}const r=e.isInstancedBufferGeometry?new xj:new fi,l=e.data.index;if(l!==void 0){const _=av(l.type,l.array);r.setIndex(new Ua(_,1))}const d=e.data.attributes;for(const _ in d){const S=d[_];let w;if(S.isInterleavedBufferAttribute){const M=a(e.data,S.data);w=new vg(M,S.itemSize,S.offset,S.normalized)}else{const M=av(S.type,S.array),E=S.isInstancedBufferAttribute?wv:Ua;w=new E(M,S.itemSize,S.normalized)}S.name!==void 0&&(w.name=S.name),S.usage!==void 0&&w.setUsage(S.usage),r.setAttribute(_,w)}const f=e.data.morphAttributes;if(f)for(const _ in f){const S=f[_],w=[];for(let M=0,E=S.length;M<E;M++){const T=S[M];let C;if(T.isInterleavedBufferAttribute){const D=a(e.data,T.data);C=new vg(D,T.itemSize,T.offset,T.normalized)}else{const D=av(T.type,T.array);C=new Ua(D,T.itemSize,T.normalized)}T.name!==void 0&&(C.name=T.name),w.push(C)}r.morphAttributes[_]=w}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const x=e.data.groups||e.data.drawcalls||e.data.offsets;if(x!==void 0)for(let _=0,S=x.length;_!==S;++_){const w=x[_];r.addGroup(w.start,w.count,w.materialIndex)}const b=e.data.boundingSphere;return b!==void 0&&(r.boundingSphere=new bo().fromJSON(b)),e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class _V extends El{constructor(e){super(e)}load(e,t,i,a){const s=this,r=this.path===""?_T.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const l=new Vc(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){let f=null;try{f=JSON.parse(d)}catch(x){a!==void 0&&a(x),console.error("THREE:ObjectLoader: Can't parse "+e+".",x.message);return}const g=f.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,a)}async loadAsync(e,t){const i=this,a=this.path===""?_T.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new Vc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const r=await s.loadAsync(e,t),l=JSON.parse(r),d=l.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,a),r=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,r),d=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,s,d,l,i),g=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,g),this.bindLightTargets(f),t!==void 0){let x=!1;for(const b in r)if(r[b].data instanceof HTMLImageElement){x=!0;break}x===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),r=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,r),d=this.parseObject(e.object,a,l,r,t),f=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,f),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let i=0,a=e.length;i<a;i++){const s=new hg().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},a={};if(t.traverse(function(s){s.isBone&&(a[s.uuid]=s)}),e!==void 0)for(let s=0,r=e.length;s<r;s++){const l=new g2().fromJSON(e[s],a);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const a=new bj;for(let s=0,r=e.length;s<r;s++){let l;const d=e[s];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":l=a.parse(d);break;default:d.type in HR?l=HR[d.type].fromJSON(d,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}l.uuid=d.uuid,d.name!==void 0&&(l.name=d.name),d.userData!==void 0&&(l.userData=d.userData),i[d.uuid]=l}}return i}parseMaterials(e,t){const i={},a={};if(e!==void 0){const s=new j2;s.setTextures(t);for(let r=0,l=e.length;r<l;r++){const d=e[r];i[d.uuid]===void 0&&(i[d.uuid]=s.parse(d)),a[d.uuid]=i[d.uuid]}}return a}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const a=e[i],s=r1.parse(a);t[s.uuid]=s}return t}parseImages(e,t){const i=this,a={};let s;function r(d){return i.manager.itemStart(d),s.load(d,function(){i.manager.itemEnd(d)},void 0,function(){i.manager.itemError(d),i.manager.itemEnd(d)})}function l(d){if(typeof d=="string"){const f=d,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return r(g)}else return d.data?{data:av(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new O2(t);s=new o1(d),s.setCrossOrigin(this.crossOrigin);for(let f=0,g=e.length;f<g;f++){const x=e[f],b=x.url;if(Array.isArray(b)){const _=[];for(let S=0,w=b.length;S<w;S++){const M=b[S],E=l(M);E!==null&&(E instanceof HTMLImageElement?_.push(E):_.push(new dd(E.data,E.width,E.height)))}a[x.uuid]=new zp(_)}else{const _=l(x.url);a[x.uuid]=new zp(_)}}}return a}async parseImagesAsync(e){const t=this,i={};let a;async function s(r){if(typeof r=="string"){const l=r,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await a.loadAsync(d)}else return r.data?{data:av(r.type,r.data),width:r.width,height:r.height}:null}if(e!==void 0&&e.length>0){a=new o1(this.manager),a.setCrossOrigin(this.crossOrigin);for(let r=0,l=e.length;r<l;r++){const d=e[r],f=d.url;if(Array.isArray(f)){const g=[];for(let x=0,b=f.length;x<b;x++){const _=f[x],S=await s(_);S!==null&&(S instanceof HTMLImageElement?g.push(S):g.push(new dd(S.data,S.width,S.height)))}i[d.uuid]=new zp(g)}else{const g=await s(d.url);i[d.uuid]=new zp(g)}}}return i}parseTextures(e,t){function i(s,r){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),r[s])}const a={};if(e!==void 0)for(let s=0,r=e.length;s<r;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const d=t[l.image],f=d.data;let g;Array.isArray(f)?(g=new C1,f.length===6&&(g.needsUpdate=!0)):(f&&f.data?g=new dd:g=new Pa,f&&(g.needsUpdate=!0)),g.source=d,g.uuid=l.uuid,l.name!==void 0&&(g.name=l.name),l.mapping!==void 0&&(g.mapping=i(l.mapping,SV)),l.channel!==void 0&&(g.channel=l.channel),l.offset!==void 0&&g.offset.fromArray(l.offset),l.repeat!==void 0&&g.repeat.fromArray(l.repeat),l.center!==void 0&&g.center.fromArray(l.center),l.rotation!==void 0&&(g.rotation=l.rotation),l.wrap!==void 0&&(g.wrapS=i(l.wrap[0],XR),g.wrapT=i(l.wrap[1],XR)),l.format!==void 0&&(g.format=l.format),l.internalFormat!==void 0&&(g.internalFormat=l.internalFormat),l.type!==void 0&&(g.type=l.type),l.colorSpace!==void 0&&(g.colorSpace=l.colorSpace),l.minFilter!==void 0&&(g.minFilter=i(l.minFilter,YR)),l.magFilter!==void 0&&(g.magFilter=i(l.magFilter,YR)),l.anisotropy!==void 0&&(g.anisotropy=l.anisotropy),l.flipY!==void 0&&(g.flipY=l.flipY),l.generateMipmaps!==void 0&&(g.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(g.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(g.compareFunction=l.compareFunction),l.userData!==void 0&&(g.userData=l.userData),a[l.uuid]=g}return a}parseObject(e,t,i,a,s){let r;function l(b){return t[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",b),t[b]}function d(b){if(b!==void 0){if(Array.isArray(b)){const _=[];for(let S=0,w=b.length;S<w;S++){const M=b[S];i[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),_.push(i[M])}return _}return i[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),i[b]}}function f(b){return a[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",b),a[b]}let g,x;switch(e.type){case"Scene":r=new A1,e.background!==void 0&&(Number.isInteger(e.background)?r.background=new Zt(e.background):r.background=f(e.background)),e.environment!==void 0&&(r.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?r.fog=new p2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(r.fog=new f2(e.fog.color,e.fog.density)),e.fog.name!==""&&(r.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(r.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(r.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&r.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(r.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&r.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":r=new Gs(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(r.focus=e.focus),e.zoom!==void 0&&(r.zoom=e.zoom),e.filmGauge!==void 0&&(r.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(r.filmOffset=e.filmOffset),e.view!==void 0&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new Cf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(r.zoom=e.zoom),e.view!==void 0&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new mj(e.color,e.intensity);break;case"DirectionalLight":r=new pj(e.color,e.intensity),r.target=e.target||"";break;case"PointLight":r=new fj(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new gj(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new hj(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),r.target=e.target||"";break;case"HemisphereLight":r=new dj(e.color,e.groundColor,e.intensity);break;case"LightProbe":r=new yj().fromJSON(e);break;case"SkinnedMesh":g=l(e.geometry),x=d(e.material),r=new OO(g,x),e.bindMode!==void 0&&(r.bindMode=e.bindMode),e.bindMatrix!==void 0&&r.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(r.skeleton=e.skeleton);break;case"Mesh":g=l(e.geometry),x=d(e.material),r=new us(g,x);break;case"InstancedMesh":g=l(e.geometry),x=d(e.material);const b=e.count,_=e.instanceMatrix,S=e.instanceColor;r=new jO(g,x,b),r.instanceMatrix=new wv(new Float32Array(_.array),16),S!==void 0&&(r.instanceColor=new wv(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":g=l(e.geometry),x=d(e.material),r=new PO(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,x),r.geometry=g,r.perObjectFrustumCulled=e.perObjectFrustumCulled,r.sortObjects=e.sortObjects,r._drawRanges=e.drawRanges,r._reservedRanges=e.reservedRanges,r._geometryInfo=e.geometryInfo.map(w=>{let M=null,E=null;return w.boundingBox!==void 0&&(M=new pr().fromJSON(w.boundingBox)),w.boundingSphere!==void 0&&(E=new bo().fromJSON(w.boundingSphere)),{...w,boundingBox:M,boundingSphere:E}}),r._instanceInfo=e.instanceInfo,r._availableInstanceIds=e._availableInstanceIds,r._availableGeometryIds=e._availableGeometryIds,r._nextIndexStart=e.nextIndexStart,r._nextVertexStart=e.nextVertexStart,r._geometryCount=e.geometryCount,r._maxInstanceCount=e.maxInstanceCount,r._maxVertexCount=e.maxVertexCount,r._maxIndexCount=e.maxIndexCount,r._geometryInitialized=e.geometryInitialized,r._matricesTexture=f(e.matricesTexture.uuid),r._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(r._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(r.boundingSphere=new bo().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(r.boundingBox=new pr().fromJSON(e.boundingBox));break;case"LOD":r=new DO;break;case"Line":r=new Yp(l(e.geometry),d(e.material));break;case"LineLoop":r=new UO(l(e.geometry),d(e.material));break;case"LineSegments":r=new Mh(l(e.geometry),d(e.material));break;case"PointCloud":case"Points":r=new LO(l(e.geometry),d(e.material));break;case"Sprite":r=new RO(d(e.material));break;case"Group":r=new sv;break;case"Bone":r=new q3;break;default:r=new ea}if(r.uuid=e.uuid,e.name!==void 0&&(r.name=e.name),e.matrix!==void 0?(r.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(e.position!==void 0&&r.position.fromArray(e.position),e.rotation!==void 0&&r.rotation.fromArray(e.rotation),e.quaternion!==void 0&&r.quaternion.fromArray(e.quaternion),e.scale!==void 0&&r.scale.fromArray(e.scale)),e.up!==void 0&&r.up.fromArray(e.up),e.castShadow!==void 0&&(r.castShadow=e.castShadow),e.receiveShadow!==void 0&&(r.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(r.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(r.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(r.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(r.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&r.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(r.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(r.visible=e.visible),e.frustumCulled!==void 0&&(r.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(r.renderOrder=e.renderOrder),e.userData!==void 0&&(r.userData=e.userData),e.layers!==void 0&&(r.layers.mask=e.layers),e.children!==void 0){const b=e.children;for(let _=0;_<b.length;_++)r.add(this.parseObject(b[_],t,i,a,s))}if(e.animations!==void 0){const b=e.animations;for(let _=0;_<b.length;_++){const S=b[_];r.animations.push(s[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(r.autoUpdate=e.autoUpdate);const b=e.levels;for(let _=0;_<b.length;_++){const S=b[_],w=r.getObjectByProperty("uuid",S.object);w!==void 0&&r.addLevel(w,S.distance,S.hysteresis)}}return r}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const a=t[i.skeleton];a===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(a,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,a=e.getObjectByProperty("uuid",i);a!==void 0?t.target=a:t.target=new ea}})}}const SV={UVMapping:qp,CubeReflectionMapping:xh,CubeRefractionMapping:Xp,EquirectangularReflectionMapping:gv,EquirectangularRefractionMapping:Xx,CubeUVReflectionMapping:zv},XR={RepeatWrapping:Yx,ClampToEdgeWrapping:fr,MirroredRepeatWrapping:Wx},YR={NearestFilter:xo,NearestMipmapNearestFilter:R3,NearestMipmapLinearFilter:iv,LinearFilter:Aa,LinearMipmapNearestFilter:Nx,LinearMipmapLinearFilter:lh},Qw=new WeakMap;class EV extends El{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,r=ch.get(`image-bitmap:${e}`);if(r!==void 0){if(s.manager.itemStart(e),r.then){r.then(f=>{if(Qw.has(r)===!0)a&&a(Qw.get(r)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(f),s.manager.itemEnd(e),f});return}return setTimeout(function(){t&&t(r),s.manager.itemEnd(e)},0),r}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const d=fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(f){return ch.add(`image-bitmap:${e}`,f),t&&t(f),s.manager.itemEnd(e),f}).catch(function(f){a&&a(f),Qw.set(d,f),ch.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});ch.add(`image-bitmap:${e}`,d),s.manager.itemStart(e)}}let kb;class oC{static getContext(){return kb===void 0&&(kb=new(window.AudioContext||window.webkitAudioContext)),kb}static setContext(e){kb=e}}class wV extends El{constructor(e){super(e)}load(e,t,i,a){const s=this,r=new Vc(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,function(d){try{const f=d.slice(0);oC.getContext().decodeAudioData(f,function(x){t(x)}).catch(l)}catch(f){l(f)}},i,a);function l(d){a?a(d):console.error(d),s.manager.itemError(e)}}}const WR=new Fn,KR=new Fn,Hm=new Fn;class MV{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Hm.copy(e.projectionMatrix);const a=t.eyeSep/2,s=a*t.near/t.focus,r=t.near*Math.tan(dg*t.fov*.5)/t.zoom;let l,d;KR.elements[12]=-a,WR.elements[12]=a,l=-r*t.aspect+s,d=r*t.aspect+s,Hm.elements[0]=2*t.near/(d-l),Hm.elements[8]=(d+l)/(d-l),this.cameraL.projectionMatrix.copy(Hm),l=-r*t.aspect-s,d=r*t.aspect-s,Hm.elements[0]=2*t.near/(d-l),Hm.elements[8]=(d+l)/(d-l),this.cameraR.projectionMatrix.copy(Hm)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(KR),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(WR)}}class _j extends Gs{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}let lC=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};const Gm=new be,Jw=new Ko,TV=new be,Vm=new be,qm=new be;class CV extends ea{constructor(){super(),this.type="AudioListener",this.context=oC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new lC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Gm,Jw,TV),Vm.set(0,0,-1).applyQuaternion(Jw),qm.set(0,1,0).applyQuaternion(Jw),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Gm.x,i),t.positionY.linearRampToValueAtTime(Gm.y,i),t.positionZ.linearRampToValueAtTime(Gm.z,i),t.forwardX.linearRampToValueAtTime(Vm.x,i),t.forwardY.linearRampToValueAtTime(Vm.y,i),t.forwardZ.linearRampToValueAtTime(Vm.z,i),t.upX.linearRampToValueAtTime(qm.x,i),t.upY.linearRampToValueAtTime(qm.y,i),t.upZ.linearRampToValueAtTime(qm.z,i)}else t.setPosition(Gm.x,Gm.y,Gm.z),t.setOrientation(Vm.x,Vm.y,Vm.z,qm.x,qm.y,qm.z)}}class Sj extends ea{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Xm=new be,ZR=new Ko,AV=new be,Ym=new be;class NV extends Sj{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Xm,ZR,AV),Ym.set(0,0,1).applyQuaternion(ZR);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Xm.x,i),t.positionY.linearRampToValueAtTime(Xm.y,i),t.positionZ.linearRampToValueAtTime(Xm.z,i),t.orientationX.linearRampToValueAtTime(Ym.x,i),t.orientationY.linearRampToValueAtTime(Ym.y,i),t.orientationZ.linearRampToValueAtTime(Ym.z,i)}else t.setPosition(Xm.x,Xm.y,Xm.z),t.setOrientation(Ym.x,Ym.y,Ym.z)}}class RV{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class Ej{constructor(e,t,i){this.binding=e,this.valueSize=i;let a,s,r;switch(t){case"quaternion":a=this._slerp,s=this._slerpAdditive,r=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":a=this._select,s=this._select,r=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:a=this._lerp,s=this._lerpAdditive,r=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=s,this._setIdentity=r,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,a=this.valueSize,s=e*a+a;let r=this.cumulativeWeight;if(r===0){for(let l=0;l!==a;++l)i[s+l]=i[l];r=t}else{r+=t;const l=t/r;this._mixBufferRegion(i,s,0,l,a)}this.cumulativeWeight=r}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,a=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,a,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,a=e*t+t,s=this.cumulativeWeight,r=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const d=t*this._origIndex;this._mixBufferRegion(i,a,d,1-s,t)}r>0&&this._mixBufferRegionAdditive(i,a,this._addIndex*t,1,t);for(let d=t,f=t+t;d!==f;++d)if(i[d]!==i[d+t]){l.setValue(i,a);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,a=i*this._origIndex;e.getValue(t,a);for(let s=i,r=a;s!==r;++s)t[s]=t[a+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,a,s){if(a>=.5)for(let r=0;r!==s;++r)e[t+r]=e[i+r]}_slerp(e,t,i,a){Ko.slerpFlat(e,t,e,t,e,i,a)}_slerpAdditive(e,t,i,a,s){const r=this._workIndex*s;Ko.multiplyQuaternionsFlat(e,r,e,t,e,i),Ko.slerpFlat(e,t,e,t,e,r,a)}_lerp(e,t,i,a,s){const r=1-a;for(let l=0;l!==s;++l){const d=t+l;e[d]=e[d]*r+e[i+l]*a}}_lerpAdditive(e,t,i,a,s){for(let r=0;r!==s;++r){const l=t+r;e[l]=e[l]+e[i+r]*a}}}const cC="\\[\\]\\.:\\/",DV=new RegExp("["+cC+"]","g"),uC="[^"+cC+"]",OV="[^"+cC.replace("\\.","")+"]",jV=/((?:WC+[\/:])*)/.source.replace("WC",uC),PV=/(WCOD+)?/.source.replace("WCOD",OV),UV=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uC),LV=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uC),zV=new RegExp("^"+jV+PV+UV+LV+"$"),IV=["material","materials","bones","map"];class BV{constructor(e,t,i){const a=i||Ji.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,a)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,a=this._bindings[i];a!==void 0&&a.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,s=i.length;a!==s;++a)i[a].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Ji{constructor(e,t,i){this.path=t,this.parsedPath=i||Ji.parseTrackName(t),this.node=Ji.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ji.Composite(e,t,i):new Ji(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(DV,"")}static parseTrackName(e){const t=zV.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},a=i.nodeName&&i.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const s=i.nodeName.substring(a+1);IV.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,a),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let r=0;r<s.length;r++){const l=s[r];if(l.name===t||l.uuid===t)return l;const d=i(l.children);if(d)return d}return null},a=i(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)e[t++]=i[a]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,a=t.propertyName;let s=t.propertyIndex;if(e||(e=Ji.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===f){f=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const r=e[a];if(r===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+a+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(s!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=s}else r.fromArray!==void 0&&r.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(d=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=a;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ji.Composite=BV;Ji.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ji.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ji.prototype.GetterByBindingType=[Ji.prototype._getValue_direct,Ji.prototype._getValue_array,Ji.prototype._getValue_arrayElement,Ji.prototype._getValue_toArray];Ji.prototype.SetterByBindingTypeAndVersioning=[[Ji.prototype._setValue_direct,Ji.prototype._setValue_direct_setNeedsUpdate,Ji.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ji.prototype._setValue_array,Ji.prototype._setValue_array_setNeedsUpdate,Ji.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ji.prototype._setValue_arrayElement,Ji.prototype._setValue_arrayElement_setNeedsUpdate,Ji.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ji.prototype._setValue_fromArray,Ji.prototype._setValue_fromArray_setNeedsUpdate,Ji.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class FV{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Gc(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,a=arguments.length;i!==a;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,a=this._parsedPaths,s=this._bindings,r=s.length;let l,d=e.length,f=this.nCachedObjects_;for(let g=0,x=arguments.length;g!==x;++g){const b=arguments[g],_=b.uuid;let S=t[_];if(S===void 0){S=d++,t[_]=S,e.push(b);for(let w=0,M=r;w!==M;++w)s[w].push(new Ji(b,i[w],a[w]))}else if(S<f){l=e[S];const w=--f,M=e[w];t[M.uuid]=S,e[S]=M,t[_]=w,e[w]=b;for(let E=0,T=r;E!==T;++E){const C=s[E],D=C[w];let P=C[S];C[S]=D,P===void 0&&(P=new Ji(b,i[E],a[E])),C[w]=P}}else e[S]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,a=i.length;let s=this.nCachedObjects_;for(let r=0,l=arguments.length;r!==l;++r){const d=arguments[r],f=d.uuid,g=t[f];if(g!==void 0&&g>=s){const x=s++,b=e[x];t[b.uuid]=g,e[g]=b,t[f]=x,e[x]=d;for(let _=0,S=a;_!==S;++_){const w=i[_],M=w[x],E=w[g];w[g]=M,w[x]=E}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,a=i.length;let s=this.nCachedObjects_,r=e.length;for(let l=0,d=arguments.length;l!==d;++l){const f=arguments[l],g=f.uuid,x=t[g];if(x!==void 0)if(delete t[g],x<s){const b=--s,_=e[b],S=--r,w=e[S];t[_.uuid]=x,e[x]=_,t[w.uuid]=b,e[b]=w,e.pop();for(let M=0,E=a;M!==E;++M){const T=i[M],C=T[b],D=T[S];T[x]=C,T[b]=D,T.pop()}}else{const b=--r,_=e[b];b>0&&(t[_.uuid]=x),e[x]=_,e.pop();for(let S=0,w=a;S!==w;++S){const M=i[S];M[x]=M[b],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let a=i[e];const s=this._bindings;if(a!==void 0)return s[a];const r=this._paths,l=this._parsedPaths,d=this._objects,f=d.length,g=this.nCachedObjects_,x=new Array(f);a=s.length,i[e]=a,r.push(e),l.push(t),s.push(x);for(let b=g,_=d.length;b!==_;++b){const S=d[b];x[b]=new Ji(S,e,t)}return x}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const a=this._paths,s=this._parsedPaths,r=this._bindings,l=r.length-1,d=r[l],f=e[l];t[f]=i,r[i]=d,r.pop(),s[i]=s[l],s.pop(),a[i]=a[l],a.pop()}}}class wj{constructor(e,t,i=null,a=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=a;const s=t.tracks,r=s.length,l=new Array(r),d={endingStart:ag,endingEnd:ag};for(let f=0;f!==r;++f){const g=s[f].createInterpolant(null);l[f]=g,g.settings=d}this._interpolantSettings=d,this._interpolants=l,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=uO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const a=this._clip.duration,s=e._clip.duration,r=s/a,l=a/s;e.warp(1,r,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const a=this._mixer,s=a.time,r=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=a._lendControlInterpolant(),this._timeScaleInterpolant=l);const d=l.parameterPositions,f=l.sampleValues;return d[0]=s,d[1]=s+i,f[0]=e/r,f[1]=t/r,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,a){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const d=(e-s)*i;d<0||i===0?t=0:(this._startTime=null,t=i*d)}t*=this._updateTimeScale(e);const r=this._updateTime(t),l=this._updateWeight(e);if(l>0){const d=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case L3:for(let g=0,x=d.length;g!==x;++g)d[g].evaluate(r),f[g].accumulateAdditive(l);break;case c2:default:for(let g=0,x=d.length;g!==x;++g)d[g].evaluate(r),f[g].accumulate(a,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const a=i.evaluate(e)[0];t*=a,e>i.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const a=i.evaluate(e)[0];t*=a,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let a=this.time+e,s=this._loopCount;const r=i===dO;if(e===0)return s===-1?a:r&&(s&1)===1?t-a:a;if(i===cO){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=t)a=t;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,r)):this._setEndings(this.repetitions===0,!0,r)),a>=t||a<0){const l=Math.floor(a/t);a-=t*l,s+=Math.abs(l);const d=this.repetitions-s;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?t:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const f=e<0;this._setEndings(f,!f,r)}else this._setEndings(!1,!1,r);this._loopCount=s,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=a;if(r&&(s&1)===1)return t-a}return a}_setEndings(e,t,i){const a=this._interpolantSettings;i?(a.endingStart=sg,a.endingEnd=sg):(e?a.endingStart=this.zeroSlopeAtStart?sg:ag:a.endingStart=Zx,t?a.endingEnd=this.zeroSlopeAtEnd?sg:ag:a.endingEnd=Zx)}_scheduleFading(e,t,i){const a=this._mixer,s=a.time;let r=this._weightInterpolant;r===null&&(r=a._lendControlInterpolant(),this._weightInterpolant=r);const l=r.parameterPositions,d=r.sampleValues;return l[0]=s,d[0]=t,l[1]=s+e,d[1]=i,this}}const kV=new Float32Array(1);class HV extends wh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,a=e._clip.tracks,s=a.length,r=e._propertyBindings,l=e._interpolants,d=i.uuid,f=this._bindingsByRootAndName;let g=f[d];g===void 0&&(g={},f[d]=g);for(let x=0;x!==s;++x){const b=a[x],_=b.name;let S=g[_];if(S!==void 0)++S.referenceCount,r[x]=S;else{if(S=r[x],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,d,_));continue}const w=t&&t._propertyBindings[x].binding.parsedPath;S=new Ej(Ji.create(i,_,w),b.ValueTypeName,b.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,d,_),r[x]=S}l[x].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,a=e._clip.uuid,s=this._actionsByClip[a];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,a,i)}const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const a=this._actions,s=this._actionsByClip;let r=s[t];if(r===void 0)r={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=r;else{const l=r.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=a.length,a.push(e),r.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],a=e._cacheIndex;i._cacheIndex=a,t[a]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,r=this._actionsByClip,l=r[s],d=l.knownActions,f=d[d.length-1],g=e._byClipCacheIndex;f._byClipCacheIndex=g,d[g]=f,d.pop(),e._byClipCacheIndex=null;const x=l.actionByRoot,b=(e._localRoot||this._root).uuid;delete x[b],d.length===0&&delete r[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,a=this._nActiveActions++,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,a=--this._nActiveActions,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const a=this._bindingsByRootAndName,s=this._bindings;let r=a[t];r===void 0&&(r={},a[t]=r),r[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,a=i.rootNode.uuid,s=i.path,r=this._bindingsByRootAndName,l=r[a],d=t[t.length-1],f=e._cacheIndex;d._cacheIndex=f,t[f]=d,t.pop(),delete l[s],Object.keys(l).length===0&&delete r[a]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,a=this._nActiveBindings++,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,a=--this._nActiveBindings,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new iC(new Float32Array(2),new Float32Array(2),1,kV),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,a=--this._nActiveControlInterpolants,s=t[a];e.__cacheIndex=a,t[a]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const a=t||this._root,s=a.uuid;let r=typeof e=="string"?r1.findByName(a,e):e;const l=r!==null?r.uuid:e,d=this._actionsByClip[l];let f=null;if(i===void 0&&(r!==null?i=r.blendMode:i=c2),d!==void 0){const x=d.actionByRoot[s];if(x!==void 0&&x.blendMode===i)return x;f=d.knownActions[0],r===null&&(r=f._clip)}if(r===null)return null;const g=new wj(this,r,t,i);return this._bindAction(g,f),this._addInactiveAction(g,l,s),g}existingAction(e,t){const i=t||this._root,a=i.uuid,s=typeof e=="string"?r1.findByName(i,e):e,r=s?s.uuid:e,l=this._actionsByClip[r];return l!==void 0&&l.actionByRoot[a]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,a=this.time+=e,s=Math.sign(e),r=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(a,e,s,r);const l=this._bindings,d=this._nActiveBindings;for(let f=0;f!==d;++f)l[f].apply(r);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,a=this._actionsByClip,s=a[i];if(s!==void 0){const r=s.knownActions;for(let l=0,d=r.length;l!==d;++l){const f=r[l];this._deactivateAction(f);const g=f._cacheIndex,x=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,x._cacheIndex=g,t[g]=x,t.pop(),this._removeInactiveBindingsForAction(f)}delete a[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const r in i){const l=i[r].actionByRoot,d=l[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const a=this._bindingsByRootAndName,s=a[t];if(s!==void 0)for(const r in s){const l=s[r];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class GV extends B3{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isRenderTarget3D=!0,this.depth=i,this.texture=new d2(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class P2{constructor(e){this.value=e}clone(){return new P2(this.value.clone===void 0?this.value:this.value.clone())}}let VV=0;class qV extends wh{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:VV++}),this.name="",this.usage=Jx,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,a=t.length;i<a;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let r=0;r<s.length;r++)this.uniforms.push(s[r].clone())}return this}clone(){return new this.constructor().copy(this)}}class XV extends m2{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class YV{constructor(e,t,i,a,s,r=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=a,this.count=s,this.normalized=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const QR=new Fn;class dC{constructor(e,t,i=0,a=1/0){this.ray=new Ng(e,t),this.near=i,this.far=a,this.camera=null,this.layers=new Sv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return QR.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(QR),this}intersectObject(e,t=!0,i=[]){return ST(e,this,i,t),i.sort(JR),i}intersectObjects(e,t=!0,i=[]){for(let a=0,s=e.length;a<s;a++)ST(e[a],this,i,t);return i.sort(JR),i}}function JR(n,e){return n.distance-e.distance}function ST(n,e,t,i){let a=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(a=!1),a===!0&&i===!0){const s=n.children;for(let r=0,l=s.length;r<l;r++)ST(s[r],e,t,!0)}}class ET{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=ni(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ni(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class WV{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class hC{constructor(e,t,i,a){hC.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,a)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,a){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=a,this}}const $R=new wt;class KV{constructor(e=new wt(1/0,1/0),t=new wt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=$R.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$R).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const e5=new be,Hb=new be;class ZV{constructor(e=new be,t=new be){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){e5.subVectors(e,this.start),Hb.subVectors(this.end,this.start);const i=Hb.dot(Hb);let s=Hb.dot(e5)/i;return t&&(s=ni(s,0,1)),s}closestPointToPoint(e,t,i){const a=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(a).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const t5=new be;class QV extends ea{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new fi,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let r=0,l=1,d=32;r<d;r++,l++){const f=r/d*Math.PI*2,g=l/d*Math.PI*2;a.push(Math.cos(f),Math.sin(f),1,Math.cos(g),Math.sin(g),1)}i.setAttribute("position",new cn(a,3));const s=new Sl({fog:!1,toneMapped:!1});this.cone=new Mh(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),t5.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t5),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Rp=new be,Gb=new Fn,$w=new Fn;class JV extends Mh{constructor(e){const t=Mj(e),i=new fi,a=[],s=[],r=new Zt(0,0,1),l=new Zt(0,1,0);for(let f=0;f<t.length;f++){const g=t[f];g.parent&&g.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(r.r,r.g,r.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new cn(a,3)),i.setAttribute("color",new cn(s,3));const d=new Sl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,a=i.getAttribute("position");$w.copy(this.root.matrixWorld).invert();for(let s=0,r=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Gb.multiplyMatrices($w,l.matrixWorld),Rp.setFromMatrixPosition(Gb),a.setXYZ(r,Rp.x,Rp.y,Rp.z),Gb.multiplyMatrices($w,l.parent.matrixWorld),Rp.setFromMatrixPosition(Gb),a.setXYZ(r+1,Rp.x,Rp.y,Rp.z),r+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Mj(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...Mj(n.children[t]));return e}class $V extends us{constructor(e,t,i){const a=new j1(t,4,2),s=new zf({wireframe:!0,fog:!1,toneMapped:!1});super(a,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const eq=new be,n5=new Zt,i5=new Zt;class tq extends ea{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const a=new O1(t);a.rotateY(Math.PI*.5),this.material=new zf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=a.getAttribute("position"),r=new Float32Array(s.count*3);a.setAttribute("color",new Ua(r,3)),this.add(new us(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");n5.copy(this.light.color),i5.copy(this.light.groundColor);for(let i=0,a=t.count;i<a;i++){const s=i<a/2?n5:i5;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(eq.setFromMatrixPosition(this.light.matrixWorld).negate())}}class nq extends Mh{constructor(e=10,t=10,i=4473924,a=8947848){i=new Zt(i),a=new Zt(a);const s=t/2,r=e/t,l=e/2,d=[],f=[];for(let b=0,_=0,S=-l;b<=t;b++,S+=r){d.push(-l,0,S,l,0,S),d.push(S,0,-l,S,0,l);const w=b===s?i:a;w.toArray(f,_),_+=3,w.toArray(f,_),_+=3,w.toArray(f,_),_+=3,w.toArray(f,_),_+=3}const g=new fi;g.setAttribute("position",new cn(d,3)),g.setAttribute("color",new cn(f,3));const x=new Sl({vertexColors:!0,toneMapped:!1});super(g,x),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class iq extends Mh{constructor(e=10,t=16,i=8,a=64,s=4473924,r=8947848){s=new Zt(s),r=new Zt(r);const l=[],d=[];if(t>1)for(let x=0;x<t;x++){const b=x/t*(Math.PI*2),_=Math.sin(b)*e,S=Math.cos(b)*e;l.push(0,0,0),l.push(_,0,S);const w=x&1?s:r;d.push(w.r,w.g,w.b),d.push(w.r,w.g,w.b)}for(let x=0;x<i;x++){const b=x&1?s:r,_=e-e/i*x;for(let S=0;S<a;S++){let w=S/a*(Math.PI*2),M=Math.sin(w)*_,E=Math.cos(w)*_;l.push(M,0,E),d.push(b.r,b.g,b.b),w=(S+1)/a*(Math.PI*2),M=Math.sin(w)*_,E=Math.cos(w)*_,l.push(M,0,E),d.push(b.r,b.g,b.b)}}const f=new fi;f.setAttribute("position",new cn(l,3)),f.setAttribute("color",new cn(d,3));const g=new Sl({vertexColors:!0,toneMapped:!1});super(f,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const a5=new be,Vb=new be,s5=new be;class aq extends ea{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let a=new fi;a.setAttribute("position",new cn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Sl({fog:!1,toneMapped:!1});this.lightPlane=new Yp(a,s),this.add(this.lightPlane),a=new fi,a.setAttribute("position",new cn([0,0,0,0,0,1],3)),this.targetLine=new Yp(a,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),a5.setFromMatrixPosition(this.light.matrixWorld),Vb.setFromMatrixPosition(this.light.target.matrixWorld),s5.subVectors(Vb,a5),this.lightPlane.lookAt(Vb),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Vb),this.targetLine.scale.z=s5.length()}}const qb=new be,Os=new h2;class sq extends Mh{constructor(e){const t=new fi,i=new Sl({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],s=[],r={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(S,w){d(S),d(w)}function d(S){a.push(0,0,0),s.push(0,0,0),r[S]===void 0&&(r[S]=[]),r[S].push(a.length/3-1)}t.setAttribute("position",new cn(a,3)),t.setAttribute("color",new cn(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=r,this.update();const f=new Zt(16755200),g=new Zt(16711680),x=new Zt(43775),b=new Zt(16777215),_=new Zt(3355443);this.setColors(f,g,x,b,_)}setColors(e,t,i,a,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,a.r,a.g,a.b),l.setXYZ(39,a.r,a.g,a.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,a=1;Os.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===vu?-1:0;ks("c",t,e,Os,0,0,s),ks("t",t,e,Os,0,0,1),ks("n1",t,e,Os,-i,-a,s),ks("n2",t,e,Os,i,-a,s),ks("n3",t,e,Os,-i,a,s),ks("n4",t,e,Os,i,a,s),ks("f1",t,e,Os,-i,-a,1),ks("f2",t,e,Os,i,-a,1),ks("f3",t,e,Os,-i,a,1),ks("f4",t,e,Os,i,a,1),ks("u1",t,e,Os,i*.7,a*1.1,s),ks("u2",t,e,Os,-i*.7,a*1.1,s),ks("u3",t,e,Os,0,a*2,s),ks("cf1",t,e,Os,-i,0,1),ks("cf2",t,e,Os,i,0,1),ks("cf3",t,e,Os,0,-a,1),ks("cf4",t,e,Os,0,a,1),ks("cn1",t,e,Os,-i,0,s),ks("cn2",t,e,Os,i,0,s),ks("cn3",t,e,Os,0,-a,s),ks("cn4",t,e,Os,0,a,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ks(n,e,t,i,a,s,r){qb.set(a,s,r).unproject(i);const l=e[n];if(l!==void 0){const d=t.getAttribute("position");for(let f=0,g=l.length;f<g;f++)d.setXYZ(l[f],qb.x,qb.y,qb.z)}}const Xb=new pr;class rq extends Mh{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),s=new fi;s.setIndex(new Ua(i,1)),s.setAttribute("position",new Ua(a,3)),super(s,new Sl({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Xb.setFromObject(this.object),Xb.isEmpty())return;const e=Xb.min,t=Xb.max,i=this.geometry.attributes.position,a=i.array;a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=e.x,a[4]=t.y,a[5]=t.z,a[6]=e.x,a[7]=e.y,a[8]=t.z,a[9]=t.x,a[10]=e.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=e.z,a[15]=e.x,a[16]=t.y,a[17]=e.z,a[18]=e.x,a[19]=e.y,a[20]=e.z,a[21]=t.x,a[22]=e.y,a[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oq extends Mh{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new fi;s.setIndex(new Ua(i,1)),s.setAttribute("position",new cn(a,3)),super(s,new Sl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class lq extends Yp{constructor(e,t=1,i=16776960){const a=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],r=new fi;r.setAttribute("position",new cn(s,3)),r.computeBoundingSphere(),super(r,new Sl({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new fi;d.setAttribute("position",new cn(l,3)),d.computeBoundingSphere(),this.add(new us(d,new zf({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const r5=new be;let Yb,eM;class cq extends ea{constructor(e=new be(0,0,1),t=new be(0,0,0),i=1,a=16776960,s=i*.2,r=s*.2){super(),this.type="ArrowHelper",Yb===void 0&&(Yb=new fi,Yb.setAttribute("position",new cn([0,0,0,0,1,0],3)),eM=new R1(.5,1,5,1),eM.translate(0,-.5,0)),this.position.copy(t),this.line=new Yp(Yb,new Sl({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new us(eM,new zf({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,r)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{r5.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(r5,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class uq extends Mh{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new fi;a.setAttribute("position",new cn(t,3)),a.setAttribute("color",new cn(i,3));const s=new Sl({vertexColors:!0,toneMapped:!1});super(a,s),this.type="AxesHelper"}setColors(e,t,i){const a=new Zt,s=this.geometry.attributes.color.array;return a.set(e),a.toArray(s,0),a.toArray(s,3),a.set(t),a.toArray(s,6),a.toArray(s,9),a.set(i),a.toArray(s,12),a.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dq{constructor(){this.type="ShapePath",this.color=new Zt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new CS,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,a){return this.currentPath.quadraticCurveTo(e,t,i,a),this}bezierCurveTo(e,t,i,a,s,r){return this.currentPath.bezierCurveTo(e,t,i,a,s,r),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(E){const T=[];for(let C=0,D=E.length;C<D;C++){const P=E[C],B=new hg;B.curves=P.curves,T.push(B)}return T}function i(E,T){const C=T.length;let D=!1;for(let P=C-1,B=0;B<C;P=B++){let F=T[P],j=T[B],O=j.x-F.x,I=j.y-F.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(F=T[B],O=-O,j=T[P],I=-I),E.y<F.y||E.y>j.y)continue;if(E.y===F.y){if(E.x===F.x)return!0}else{const W=I*(E.x-F.x)-O*(E.y-F.y);if(W===0)return!0;if(W<0)continue;D=!D}}else{if(E.y!==F.y)continue;if(j.x<=E.x&&E.x<=F.x||F.x<=E.x&&E.x<=j.x)return!0}}return D}const a=ud.isClockWise,s=this.subPaths;if(s.length===0)return[];let r,l,d;const f=[];if(s.length===1)return l=s[0],d=new hg,d.curves=l.curves,f.push(d),f;let g=!a(s[0].getPoints());g=e?!g:g;const x=[],b=[];let _=[],S=0,w;b[S]=void 0,_[S]=[];for(let E=0,T=s.length;E<T;E++)l=s[E],w=l.getPoints(),r=a(w),r=e?!r:r,r?(!g&&b[S]&&S++,b[S]={s:new hg,p:w},b[S].s.curves=l.curves,g&&S++,_[S]=[]):_[S].push({h:l,p:w[0]});if(!b[0])return t(s);if(b.length>1){let E=!1,T=0;for(let C=0,D=b.length;C<D;C++)x[C]=[];for(let C=0,D=b.length;C<D;C++){const P=_[C];for(let B=0;B<P.length;B++){const F=P[B];let j=!0;for(let O=0;O<b.length;O++)i(F.p,b[O].p)&&(C!==O&&T++,j?(j=!1,x[O].push(F)):E=!0);j&&x[C].push(F)}}T>0&&E===!1&&(_=x)}let M;for(let E=0,T=b.length;E<T;E++){d=b[E].s,f.push(d),M=_[E];for(let C=0,D=M.length;C<D;C++)d.holes.push(M[C].h)}return f}}class hq extends wh{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function fq(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function pq(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function mq(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function wT(n,e,t,i){const a=gq(i);switch(t){case O3:return n*e;case M1:return n*e/a.components*a.byteLength;case T1:return n*e/a.components*a.byteLength;case P3:return n*e*2/a.components*a.byteLength;case o2:return n*e*2/a.components*a.byteLength;case j3:return n*e*3/a.components*a.byteLength;case Vs:return n*e*4/a.components*a.byteLength;case l2:return n*e*4/a.components*a.byteLength;case Rx:case Dx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Ox:case jx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case J_:case eS:return Math.max(n,16)*Math.max(e,8)/4;case Q_:case $_:return Math.max(n,8)*Math.max(e,8)/2;case tS:case nS:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case iS:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case aS:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case sS:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case rS:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case oS:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case lS:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case cS:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case uS:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case dS:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case hS:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case fS:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case pS:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case mS:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case gS:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case vS:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Px:case yS:case xS:return Math.ceil(n/4)*Math.ceil(e/4)*16;case U3:case bS:return Math.ceil(n/4)*Math.ceil(e/4)*8;case _S:case SS:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function gq(n){switch(n){case bl:case i2:return{byteLength:1,components:1};case vv:case a2:case Jr:return{byteLength:2,components:1};case s2:case r2:return{byteLength:2,components:4};case bh:case w1:case bs:return{byteLength:4,components:1};case D3:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class vq{static contain(e,t){return fq(e,t)}static cover(e,t){return pq(e,t)}static fill(e){return mq(e)}static getByteLength(e,t,i,a){return wT(e,t,i,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Lv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Lv);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Tj(){let n=null,e=!1,t=null,i=null;function a(s,r){t(s,r),i=n.requestAnimationFrame(a)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(a),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function yq(n){const e=new WeakMap;function t(l,d){const f=l.array,g=l.usage,x=f.byteLength,b=n.createBuffer();n.bindBuffer(d,b),n.bufferData(d,f,g),l.onUploadCallback();let _;if(f instanceof Float32Array)_=n.FLOAT;else if(typeof Float16Array<"u"&&f instanceof Float16Array)_=n.HALF_FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?_=n.HALF_FLOAT:_=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=n.SHORT;else if(f instanceof Uint32Array)_=n.UNSIGNED_INT;else if(f instanceof Int32Array)_=n.INT;else if(f instanceof Int8Array)_=n.BYTE;else if(f instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:b,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:x}}function i(l,d,f){const g=d.array,x=d.updateRanges;if(n.bindBuffer(f,l),x.length===0)n.bufferSubData(f,0,g);else{x.sort((_,S)=>_.start-S.start);let b=0;for(let _=1;_<x.length;_++){const S=x[b],w=x[_];w.start<=S.start+S.count+1?S.count=Math.max(S.count,w.start+w.count-S.start):(++b,x[b]=w)}x.length=b+1;for(let _=0,S=x.length;_<S;_++){const w=x[_];n.bufferSubData(f,w.start*g.BYTES_PER_ELEMENT,g,w.start,w.count)}d.clearUpdateRanges()}d.onUploadCallback()}function a(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const d=e.get(l);d&&(n.deleteBuffer(d.buffer),e.delete(l))}function r(l,d){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const g=e.get(l);(!g||g.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=e.get(l);if(f===void 0)e.set(l,t(l,d));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,l,d),f.version=l.version}}return{get:a,remove:s,update:r}}var xq=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,bq=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,_q=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Sq=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Eq=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,wq=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Mq=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Tq=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Cq=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Aq=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Nq=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Rq=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Dq=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Oq=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,jq=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Pq=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Uq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Lq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,zq=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Iq=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Bq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Fq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,kq=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Hq=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Gq=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Vq=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,qq=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Xq=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Yq=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Wq=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Kq="gl_FragColor = linearToOutputTexel( gl_FragColor );",Zq=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Qq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Jq=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,$q=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,eX=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,tX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,nX=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,iX=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,aX=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,sX=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,rX=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,oX=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lX=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,cX=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,uX=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,dX=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,hX=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,fX=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,pX=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,mX=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,gX=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,vX=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,yX=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,xX=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,bX=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,_X=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,SX=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,EX=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wX=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,MX=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,TX=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,CX=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,AX=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NX=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,RX=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,DX=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,OX=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,jX=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,PX=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,UX=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,LX=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,zX=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,IX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,BX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,FX=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kX=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,HX=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,GX=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,VX=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,qX=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,XX=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,YX=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,WX=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,KX=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ZX=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,QX=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,JX=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,$X=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,eY=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,tY=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,nY=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,iY=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,aY=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,sY=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,rY=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,oY=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,lY=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,cY=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,uY=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dY=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,hY=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,fY=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,pY=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,mY=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gY=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,vY=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const yY=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xY=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_Y=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,EY=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wY=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,MY=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,TY=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,CY=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,AY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,NY=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RY=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,DY=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,OY=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,jY=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PY=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UY=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LY=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zY=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IY=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,BY=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,FY=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kY=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HY=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,GY=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VY=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qY=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XY=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,YY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WY=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KY=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ZY=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gi={alphahash_fragment:xq,alphahash_pars_fragment:bq,alphamap_fragment:_q,alphamap_pars_fragment:Sq,alphatest_fragment:Eq,alphatest_pars_fragment:wq,aomap_fragment:Mq,aomap_pars_fragment:Tq,batching_pars_vertex:Cq,batching_vertex:Aq,begin_vertex:Nq,beginnormal_vertex:Rq,bsdfs:Dq,iridescence_fragment:Oq,bumpmap_pars_fragment:jq,clipping_planes_fragment:Pq,clipping_planes_pars_fragment:Uq,clipping_planes_pars_vertex:Lq,clipping_planes_vertex:zq,color_fragment:Iq,color_pars_fragment:Bq,color_pars_vertex:Fq,color_vertex:kq,common:Hq,cube_uv_reflection_fragment:Gq,defaultnormal_vertex:Vq,displacementmap_pars_vertex:qq,displacementmap_vertex:Xq,emissivemap_fragment:Yq,emissivemap_pars_fragment:Wq,colorspace_fragment:Kq,colorspace_pars_fragment:Zq,envmap_fragment:Qq,envmap_common_pars_fragment:Jq,envmap_pars_fragment:$q,envmap_pars_vertex:eX,envmap_physical_pars_fragment:dX,envmap_vertex:tX,fog_vertex:nX,fog_pars_vertex:iX,fog_fragment:aX,fog_pars_fragment:sX,gradientmap_pars_fragment:rX,lightmap_pars_fragment:oX,lights_lambert_fragment:lX,lights_lambert_pars_fragment:cX,lights_pars_begin:uX,lights_toon_fragment:hX,lights_toon_pars_fragment:fX,lights_phong_fragment:pX,lights_phong_pars_fragment:mX,lights_physical_fragment:gX,lights_physical_pars_fragment:vX,lights_fragment_begin:yX,lights_fragment_maps:xX,lights_fragment_end:bX,logdepthbuf_fragment:_X,logdepthbuf_pars_fragment:SX,logdepthbuf_pars_vertex:EX,logdepthbuf_vertex:wX,map_fragment:MX,map_pars_fragment:TX,map_particle_fragment:CX,map_particle_pars_fragment:AX,metalnessmap_fragment:NX,metalnessmap_pars_fragment:RX,morphinstance_vertex:DX,morphcolor_vertex:OX,morphnormal_vertex:jX,morphtarget_pars_vertex:PX,morphtarget_vertex:UX,normal_fragment_begin:LX,normal_fragment_maps:zX,normal_pars_fragment:IX,normal_pars_vertex:BX,normal_vertex:FX,normalmap_pars_fragment:kX,clearcoat_normal_fragment_begin:HX,clearcoat_normal_fragment_maps:GX,clearcoat_pars_fragment:VX,iridescence_pars_fragment:qX,opaque_fragment:XX,packing:YX,premultiplied_alpha_fragment:WX,project_vertex:KX,dithering_fragment:ZX,dithering_pars_fragment:QX,roughnessmap_fragment:JX,roughnessmap_pars_fragment:$X,shadowmap_pars_fragment:eY,shadowmap_pars_vertex:tY,shadowmap_vertex:nY,shadowmask_pars_fragment:iY,skinbase_vertex:aY,skinning_pars_vertex:sY,skinning_vertex:rY,skinnormal_vertex:oY,specularmap_fragment:lY,specularmap_pars_fragment:cY,tonemapping_fragment:uY,tonemapping_pars_fragment:dY,transmission_fragment:hY,transmission_pars_fragment:fY,uv_pars_fragment:pY,uv_pars_vertex:mY,uv_vertex:gY,worldpos_vertex:vY,background_vert:yY,background_frag:xY,backgroundCube_vert:bY,backgroundCube_frag:_Y,cube_vert:SY,cube_frag:EY,depth_vert:wY,depth_frag:MY,distanceRGBA_vert:TY,distanceRGBA_frag:CY,equirect_vert:AY,equirect_frag:NY,linedashed_vert:RY,linedashed_frag:DY,meshbasic_vert:OY,meshbasic_frag:jY,meshlambert_vert:PY,meshlambert_frag:UY,meshmatcap_vert:LY,meshmatcap_frag:zY,meshnormal_vert:IY,meshnormal_frag:BY,meshphong_vert:FY,meshphong_frag:kY,meshphysical_vert:HY,meshphysical_frag:GY,meshtoon_vert:VY,meshtoon_frag:qY,points_vert:XY,points_frag:YY,shadow_vert:WY,shadow_frag:KY,sprite_vert:ZY,sprite_frag:QY},Yt={common:{diffuse:{value:new Zt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new oi},alphaMap:{value:null},alphaMapTransform:{value:new oi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new oi}},envmap:{envMap:{value:null},envMapRotation:{value:new oi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new oi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new oi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new oi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new oi},normalScale:{value:new wt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new oi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new oi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new oi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new oi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new oi},alphaTest:{value:0},uvTransform:{value:new oi}},sprite:{diffuse:{value:new Zt(16777215)},opacity:{value:1},center:{value:new wt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new oi},alphaMap:{value:null},alphaMapTransform:{value:new oi},alphaTest:{value:0}}},od={basic:{uniforms:gl([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.fog]),vertexShader:gi.meshbasic_vert,fragmentShader:gi.meshbasic_frag},lambert:{uniforms:gl([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new Zt(0)}}]),vertexShader:gi.meshlambert_vert,fragmentShader:gi.meshlambert_frag},phong:{uniforms:gl([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new Zt(0)},specular:{value:new Zt(1118481)},shininess:{value:30}}]),vertexShader:gi.meshphong_vert,fragmentShader:gi.meshphong_frag},standard:{uniforms:gl([Yt.common,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.roughnessmap,Yt.metalnessmap,Yt.fog,Yt.lights,{emissive:{value:new Zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gi.meshphysical_vert,fragmentShader:gi.meshphysical_frag},toon:{uniforms:gl([Yt.common,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.gradientmap,Yt.fog,Yt.lights,{emissive:{value:new Zt(0)}}]),vertexShader:gi.meshtoon_vert,fragmentShader:gi.meshtoon_frag},matcap:{uniforms:gl([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,{matcap:{value:null}}]),vertexShader:gi.meshmatcap_vert,fragmentShader:gi.meshmatcap_frag},points:{uniforms:gl([Yt.points,Yt.fog]),vertexShader:gi.points_vert,fragmentShader:gi.points_frag},dashed:{uniforms:gl([Yt.common,Yt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gi.linedashed_vert,fragmentShader:gi.linedashed_frag},depth:{uniforms:gl([Yt.common,Yt.displacementmap]),vertexShader:gi.depth_vert,fragmentShader:gi.depth_frag},normal:{uniforms:gl([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,{opacity:{value:1}}]),vertexShader:gi.meshnormal_vert,fragmentShader:gi.meshnormal_frag},sprite:{uniforms:gl([Yt.sprite,Yt.fog]),vertexShader:gi.sprite_vert,fragmentShader:gi.sprite_frag},background:{uniforms:{uvTransform:{value:new oi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:gi.background_vert,fragmentShader:gi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new oi}},vertexShader:gi.backgroundCube_vert,fragmentShader:gi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:gi.cube_vert,fragmentShader:gi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:gi.equirect_vert,fragmentShader:gi.equirect_frag},distanceRGBA:{uniforms:gl([Yt.common,Yt.displacementmap,{referencePosition:{value:new be},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:gi.distanceRGBA_vert,fragmentShader:gi.distanceRGBA_frag},shadow:{uniforms:gl([Yt.lights,Yt.fog,{color:{value:new Zt(0)},opacity:{value:1}}]),vertexShader:gi.shadow_vert,fragmentShader:gi.shadow_frag}};od.physical={uniforms:gl([od.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new oi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new oi},clearcoatNormalScale:{value:new wt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new oi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new oi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new oi},sheen:{value:0},sheenColor:{value:new Zt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new oi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new oi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new oi},transmissionSamplerSize:{value:new wt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new oi},attenuationDistance:{value:0},attenuationColor:{value:new Zt(0)},specularColor:{value:new Zt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new oi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new oi},anisotropyVector:{value:new wt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new oi}}]),vertexShader:gi.meshphysical_vert,fragmentShader:gi.meshphysical_frag};const Wb={r:0,b:0,g:0},Wm=new Wc,JY=new Fn;function $Y(n,e,t,i,a,s,r){const l=new Zt(0);let d=s===!0?0:1,f,g,x=null,b=0,_=null;function S(C){let D=C.isScene===!0?C.background:null;return D&&D.isTexture&&(D=(C.backgroundBlurriness>0?t:e).get(D)),D}function w(C){let D=!1;const P=S(C);P===null?E(l,d):P&&P.isColor&&(E(P,1),D=!0);const B=n.xr.getEnvironmentBlendMode();B==="additive"?i.buffers.color.setClear(0,0,0,1,r):B==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,r),(n.autoClear||D)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function M(C,D){const P=S(D);P&&(P.isCubeTexture||P.mapping===zv)?(g===void 0&&(g=new us(new Rg(1,1,1),new So({name:"BackgroundCubeMaterial",uniforms:Ev(od.backgroundCube.uniforms),vertexShader:od.backgroundCube.vertexShader,fragmentShader:od.backgroundCube.fragmentShader,side:Wo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(B,F,j){this.matrixWorld.copyPosition(j.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(g)),Wm.copy(D.backgroundRotation),Wm.x*=-1,Wm.y*=-1,Wm.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(Wm.y*=-1,Wm.z*=-1),g.material.uniforms.envMap.value=P,g.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(JY.makeRotationFromEuler(Wm)),g.material.toneMapped=qi.getTransfer(P.colorSpace)!==Ea,(x!==P||b!==P.version||_!==n.toneMapping)&&(g.material.needsUpdate=!0,x=P,b=P.version,_=n.toneMapping),g.layers.enableAll(),C.unshift(g,g.geometry,g.material,0,0,null)):P&&P.isTexture&&(f===void 0&&(f=new us(new If(2,2),new So({name:"BackgroundMaterial",uniforms:Ev(od.background.uniforms),vertexShader:od.background.vertexShader,fragmentShader:od.background.fragmentShader,side:Rf,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(f)),f.material.uniforms.t2D.value=P,f.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,f.material.toneMapped=qi.getTransfer(P.colorSpace)!==Ea,P.matrixAutoUpdate===!0&&P.updateMatrix(),f.material.uniforms.uvTransform.value.copy(P.matrix),(x!==P||b!==P.version||_!==n.toneMapping)&&(f.material.needsUpdate=!0,x=P,b=P.version,_=n.toneMapping),f.layers.enableAll(),C.unshift(f,f.geometry,f.material,0,0,null))}function E(C,D){C.getRGB(Wb,CO(n)),i.buffers.color.setClear(Wb.r,Wb.g,Wb.b,D,r)}function T(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(C,D=1){l.set(C),d=D,E(l,d)},getClearAlpha:function(){return d},setClearAlpha:function(C){d=C,E(l,d)},render:w,addToRenderList:M,dispose:T}}function eW(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},a=b(null);let s=a,r=!1;function l(I,W,Q,J,te){let oe=!1;const $=x(J,Q,W);s!==$&&(s=$,f(s.object)),oe=_(I,J,Q,te),oe&&S(I,J,Q,te),te!==null&&e.update(te,n.ELEMENT_ARRAY_BUFFER),(oe||r)&&(r=!1,D(I,W,Q,J),te!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(te).buffer))}function d(){return n.createVertexArray()}function f(I){return n.bindVertexArray(I)}function g(I){return n.deleteVertexArray(I)}function x(I,W,Q){const J=Q.wireframe===!0;let te=i[I.id];te===void 0&&(te={},i[I.id]=te);let oe=te[W.id];oe===void 0&&(oe={},te[W.id]=oe);let $=oe[J];return $===void 0&&($=b(d()),oe[J]=$),$}function b(I){const W=[],Q=[],J=[];for(let te=0;te<t;te++)W[te]=0,Q[te]=0,J[te]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:Q,attributeDivisors:J,object:I,attributes:{},index:null}}function _(I,W,Q,J){const te=s.attributes,oe=W.attributes;let $=0;const X=Q.getAttributes();for(const G in X)if(X[G].location>=0){const Y=te[G];let ne=oe[G];if(ne===void 0&&(G==="instanceMatrix"&&I.instanceMatrix&&(ne=I.instanceMatrix),G==="instanceColor"&&I.instanceColor&&(ne=I.instanceColor)),Y===void 0||Y.attribute!==ne||ne&&Y.data!==ne.data)return!0;$++}return s.attributesNum!==$||s.index!==J}function S(I,W,Q,J){const te={},oe=W.attributes;let $=0;const X=Q.getAttributes();for(const G in X)if(X[G].location>=0){let Y=oe[G];Y===void 0&&(G==="instanceMatrix"&&I.instanceMatrix&&(Y=I.instanceMatrix),G==="instanceColor"&&I.instanceColor&&(Y=I.instanceColor));const ne={};ne.attribute=Y,Y&&Y.data&&(ne.data=Y.data),te[G]=ne,$++}s.attributes=te,s.attributesNum=$,s.index=J}function w(){const I=s.newAttributes;for(let W=0,Q=I.length;W<Q;W++)I[W]=0}function M(I){E(I,0)}function E(I,W){const Q=s.newAttributes,J=s.enabledAttributes,te=s.attributeDivisors;Q[I]=1,J[I]===0&&(n.enableVertexAttribArray(I),J[I]=1),te[I]!==W&&(n.vertexAttribDivisor(I,W),te[I]=W)}function T(){const I=s.newAttributes,W=s.enabledAttributes;for(let Q=0,J=W.length;Q<J;Q++)W[Q]!==I[Q]&&(n.disableVertexAttribArray(Q),W[Q]=0)}function C(I,W,Q,J,te,oe,$){$===!0?n.vertexAttribIPointer(I,W,Q,te,oe):n.vertexAttribPointer(I,W,Q,J,te,oe)}function D(I,W,Q,J){w();const te=J.attributes,oe=Q.getAttributes(),$=W.defaultAttributeValues;for(const X in oe){const G=oe[X];if(G.location>=0){let ee=te[X];if(ee===void 0&&(X==="instanceMatrix"&&I.instanceMatrix&&(ee=I.instanceMatrix),X==="instanceColor"&&I.instanceColor&&(ee=I.instanceColor)),ee!==void 0){const Y=ee.normalized,ne=ee.itemSize,ue=e.get(ee);if(ue===void 0)continue;const de=ue.buffer,ie=ue.type,Me=ue.bytesPerElement,ye=ie===n.INT||ie===n.UNSIGNED_INT||ee.gpuType===w1;if(ee.isInterleavedBufferAttribute){const ae=ee.data,_e=ae.stride,Ke=ee.offset;if(ae.isInstancedInterleavedBuffer){for(let Ge=0;Ge<G.locationSize;Ge++)E(G.location+Ge,ae.meshPerAttribute);I.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let Ge=0;Ge<G.locationSize;Ge++)M(G.location+Ge);n.bindBuffer(n.ARRAY_BUFFER,de);for(let Ge=0;Ge<G.locationSize;Ge++)C(G.location+Ge,ne/G.locationSize,ie,Y,_e*Me,(Ke+ne/G.locationSize*Ge)*Me,ye)}else{if(ee.isInstancedBufferAttribute){for(let ae=0;ae<G.locationSize;ae++)E(G.location+ae,ee.meshPerAttribute);I.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let ae=0;ae<G.locationSize;ae++)M(G.location+ae);n.bindBuffer(n.ARRAY_BUFFER,de);for(let ae=0;ae<G.locationSize;ae++)C(G.location+ae,ne/G.locationSize,ie,Y,ne*Me,ne/G.locationSize*ae*Me,ye)}}else if($!==void 0){const Y=$[X];if(Y!==void 0)switch(Y.length){case 2:n.vertexAttrib2fv(G.location,Y);break;case 3:n.vertexAttrib3fv(G.location,Y);break;case 4:n.vertexAttrib4fv(G.location,Y);break;default:n.vertexAttrib1fv(G.location,Y)}}}}T()}function P(){j();for(const I in i){const W=i[I];for(const Q in W){const J=W[Q];for(const te in J)g(J[te].object),delete J[te];delete W[Q]}delete i[I]}}function B(I){if(i[I.id]===void 0)return;const W=i[I.id];for(const Q in W){const J=W[Q];for(const te in J)g(J[te].object),delete J[te];delete W[Q]}delete i[I.id]}function F(I){for(const W in i){const Q=i[W];if(Q[I.id]===void 0)continue;const J=Q[I.id];for(const te in J)g(J[te].object),delete J[te];delete Q[I.id]}}function j(){O(),r=!0,s!==a&&(s=a,f(s.object))}function O(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:l,reset:j,resetDefaultState:O,dispose:P,releaseStatesOfGeometry:B,releaseStatesOfProgram:F,initAttributes:w,enableAttribute:M,disableUnusedAttributes:T}}function tW(n,e,t){let i;function a(f){i=f}function s(f,g){n.drawArrays(i,f,g),t.update(g,i,1)}function r(f,g,x){x!==0&&(n.drawArraysInstanced(i,f,g,x),t.update(g,i,x))}function l(f,g,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,g,0,x);let _=0;for(let S=0;S<x;S++)_+=g[S];t.update(_,i,1)}function d(f,g,x,b){if(x===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let S=0;S<f.length;S++)r(f[S],g[S],b[S]);else{_.multiDrawArraysInstancedWEBGL(i,f,0,g,0,b,0,x);let S=0;for(let w=0;w<x;w++)S+=g[w]*b[w];t.update(S,i,1)}}this.setMode=a,this.render=s,this.renderInstances=r,this.renderMultiDraw=l,this.renderMultiDrawInstances=d}function nW(n,e,t,i){let a;function s(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");a=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function r(F){return!(F!==Vs&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(F){const j=F===Jr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(F!==bl&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==bs&&!j)}function d(F){if(F==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const g=d(f);g!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",g,"instead."),f=g);const x=t.logarithmicDepthBuffer===!0,b=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),_=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=n.getParameter(n.MAX_TEXTURE_SIZE),M=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),E=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),C=n.getParameter(n.MAX_VARYING_VECTORS),D=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),P=S>0,B=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:d,textureFormatReadable:r,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:x,reverseDepthBuffer:b,maxTextures:_,maxVertexTextures:S,maxTextureSize:w,maxCubemapSize:M,maxAttributes:E,maxVertexUniforms:T,maxVaryings:C,maxFragmentUniforms:D,vertexTextures:P,maxSamples:B}}function iW(n){const e=this;let t=null,i=0,a=!1,s=!1;const r=new sh,l=new oi,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(x,b){const _=x.length!==0||b||i!==0||a;return a=b,i=x.length,_},this.beginShadows=function(){s=!0,g(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(x,b){t=g(x,b,0)},this.setState=function(x,b,_){const S=x.clippingPlanes,w=x.clipIntersection,M=x.clipShadows,E=n.get(x);if(!a||S===null||S.length===0||s&&!M)s?g(null):f();else{const T=s?0:i,C=T*4;let D=E.clippingState||null;d.value=D,D=g(S,b,C,_);for(let P=0;P!==C;++P)D[P]=t[P];E.clippingState=D,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=T}};function f(){d.value!==t&&(d.value=t,d.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function g(x,b,_,S){const w=x!==null?x.length:0;let M=null;if(w!==0){if(M=d.value,S!==!0||M===null){const E=_+w*4,T=b.matrixWorldInverse;l.getNormalMatrix(T),(M===null||M.length<E)&&(M=new Float32Array(E));for(let C=0,D=_;C!==w;++C,D+=4)r.copy(x[C]).applyMatrix4(T,l),r.normal.toArray(M,D),M[D+3]=r.constant}d.value=M,d.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,M}}function aW(n){let e=new WeakMap;function t(r,l){return l===gv?r.mapping=xh:l===Xx&&(r.mapping=Xp),r}function i(r){if(r&&r.isTexture){const l=r.mapping;if(l===gv||l===Xx)if(e.has(r)){const d=e.get(r).texture;return t(d,r.mapping)}else{const d=r.image;if(d&&d.height>0){const f=new G3(d.height);return f.fromEquirectangularTexture(n,r),e.set(r,f),r.addEventListener("dispose",a),t(f.texture,r.mapping)}else return null}}return r}function a(r){const l=r.target;l.removeEventListener("dispose",a);const d=e.get(l);d!==void 0&&(e.delete(l),d.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const rv=4,o5=[.125,.215,.35,.446,.526,.582],ng=20,tM=new Cf,l5=new Zt;let nM=null,iM=0,aM=0,sM=!1;const tg=(1+Math.sqrt(5))/2,q0=1/tg,c5=[new be(-tg,q0,0),new be(tg,q0,0),new be(-q0,0,tg),new be(q0,0,tg),new be(0,tg,-q0),new be(0,tg,q0),new be(-1,1,-1),new be(1,1,-1),new be(-1,1,1),new be(1,1,1)],sW=new be;class MT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,a=100,s={}){const{size:r=256,position:l=sW}=s;nM=this._renderer.getRenderTarget(),iM=this._renderer.getActiveCubeFace(),aM=this._renderer.getActiveMipmapLevel(),sM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(r);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,i,a,d,l),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=h5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=d5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(nM,iM,aM),this._renderer.xr.enabled=sM,e.scissorTest=!1,Kb(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===xh||e.mapping===Xp?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),nM=this._renderer.getRenderTarget(),iM=this._renderer.getActiveCubeFace(),aM=this._renderer.getActiveMipmapLevel(),sM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Aa,minFilter:Aa,generateMipmaps:!1,type:Jr,format:Vs,colorSpace:fd,depthBuffer:!1},a=u5(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=u5(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=rW(s)),this._blurMaterial=oW(s,e,t)}return a}_compileMaterial(e){const t=new us(this._lodPlanes[0],e);this._renderer.compile(t,tM)}_sceneToCubeUV(e,t,i,a,s){const d=new Gs(90,1,t,i),f=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],x=this._renderer,b=x.autoClear,_=x.toneMapping;x.getClearColor(l5),x.toneMapping=fh,x.autoClear=!1;const S=new zf({name:"PMREM.Background",side:Wo,depthWrite:!1,depthTest:!1}),w=new us(new Rg,S);let M=!1;const E=e.background;E?E.isColor&&(S.color.copy(E),e.background=null,M=!0):(S.color.copy(l5),M=!0);for(let T=0;T<6;T++){const C=T%3;C===0?(d.up.set(0,f[T],0),d.position.set(s.x,s.y,s.z),d.lookAt(s.x+g[T],s.y,s.z)):C===1?(d.up.set(0,0,f[T]),d.position.set(s.x,s.y,s.z),d.lookAt(s.x,s.y+g[T],s.z)):(d.up.set(0,f[T],0),d.position.set(s.x,s.y,s.z),d.lookAt(s.x,s.y,s.z+g[T]));const D=this._cubeSize;Kb(a,C*D,T>2?D:0,D,D),x.setRenderTarget(a),M&&x.render(w,d),x.render(e,d)}w.geometry.dispose(),w.material.dispose(),x.toneMapping=_,x.autoClear=b,e.background=E}_textureToCubeUV(e,t){const i=this._renderer,a=e.mapping===xh||e.mapping===Xp;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=h5()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=d5());const s=a?this._cubemapMaterial:this._equirectMaterial,r=new us(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const d=this._cubeSize;Kb(t,0,0,3*d,2*d),i.setRenderTarget(t),i.render(r,tM)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const a=this._lodPlanes.length;for(let s=1;s<a;s++){const r=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=c5[(a-s-1)%c5.length];this._blur(e,s-1,s,r,l)}t.autoClear=i}_blur(e,t,i,a,s){const r=this._pingPongRenderTarget;this._halfBlur(e,r,t,i,a,"latitudinal",s),this._halfBlur(r,e,i,i,a,"longitudinal",s)}_halfBlur(e,t,i,a,s,r,l){const d=this._renderer,f=this._blurMaterial;r!=="latitudinal"&&r!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const g=3,x=new us(this._lodPlanes[a],f),b=f.uniforms,_=this._sizeLods[i]-1,S=isFinite(s)?Math.PI/(2*_):2*Math.PI/(2*ng-1),w=s/S,M=isFinite(s)?1+Math.floor(g*w):ng;M>ng&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${ng}`);const E=[];let T=0;for(let F=0;F<ng;++F){const j=F/w,O=Math.exp(-j*j/2);E.push(O),F===0?T+=O:F<M&&(T+=2*O)}for(let F=0;F<E.length;F++)E[F]=E[F]/T;b.envMap.value=e.texture,b.samples.value=M,b.weights.value=E,b.latitudinal.value=r==="latitudinal",l&&(b.poleAxis.value=l);const{_lodMax:C}=this;b.dTheta.value=S,b.mipInt.value=C-i;const D=this._sizeLods[a],P=3*D*(a>C-rv?a-C+rv:0),B=4*(this._cubeSize-D);Kb(t,P,B,3*D,2*D),d.setRenderTarget(t),d.render(x,tM)}}function rW(n){const e=[],t=[],i=[];let a=n;const s=n-rv+1+o5.length;for(let r=0;r<s;r++){const l=Math.pow(2,a);t.push(l);let d=1/l;r>n-rv?d=o5[r-n+rv-1]:r===0&&(d=0),i.push(d);const f=1/(l-2),g=-f,x=1+f,b=[g,g,x,g,x,x,g,g,x,x,g,x],_=6,S=6,w=3,M=2,E=1,T=new Float32Array(w*S*_),C=new Float32Array(M*S*_),D=new Float32Array(E*S*_);for(let B=0;B<_;B++){const F=B%3*2/3-1,j=B>2?0:-1,O=[F,j,0,F+2/3,j,0,F+2/3,j+1,0,F,j,0,F+2/3,j+1,0,F,j+1,0];T.set(O,w*S*B),C.set(b,M*S*B);const I=[B,B,B,B,B,B];D.set(I,E*S*B)}const P=new fi;P.setAttribute("position",new Ua(T,w)),P.setAttribute("uv",new Ua(C,M)),P.setAttribute("faceIndex",new Ua(D,E)),e.push(P),a>rv&&a--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function u5(n,e,t){const i=new sc(n,e,t);return i.texture.mapping=zv,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Kb(n,e,t,i,a){n.viewport.set(e,t,i,a),n.scissor.set(e,t,i,a)}function oW(n,e,t){const i=new Float32Array(ng),a=new be(0,1,0);return new So({name:"SphericalGaussianBlur",defines:{n:ng,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:fC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:hh,depthTest:!1,depthWrite:!1})}function d5(){return new So({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:fC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:hh,depthTest:!1,depthWrite:!1})}function h5(){return new So({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:fC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:hh,depthTest:!1,depthWrite:!1})}function fC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function lW(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const d=l.mapping,f=d===gv||d===Xx,g=d===xh||d===Xp;if(f||g){let x=e.get(l);const b=x!==void 0?x.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==b)return t===null&&(t=new MT(n)),x=f?t.fromEquirectangular(l,x):t.fromCubemap(l,x),x.texture.pmremVersion=l.pmremVersion,e.set(l,x),x.texture;if(x!==void 0)return x.texture;{const _=l.image;return f&&_&&_.height>0||g&&_&&a(_)?(t===null&&(t=new MT(n)),x=f?t.fromEquirectangular(l):t.fromCubemap(l),x.texture.pmremVersion=l.pmremVersion,e.set(l,x),l.addEventListener("dispose",s),x.texture):null}}}return l}function a(l){let d=0;const f=6;for(let g=0;g<f;g++)l[g]!==void 0&&d++;return d===f}function s(l){const d=l.target;d.removeEventListener("dispose",s);const f=e.get(d);f!==void 0&&(e.delete(d),f.dispose())}function r(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:r}}function cW(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let a;switch(i){case"WEBGL_depth_texture":a=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=n.getExtension(i)}return e[i]=a,a}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const a=t(i);return a===null&&lv("THREE.WebGLRenderer: "+i+" extension not supported."),a}}}function uW(n,e,t,i){const a={},s=new WeakMap;function r(x){const b=x.target;b.index!==null&&e.remove(b.index);for(const S in b.attributes)e.remove(b.attributes[S]);b.removeEventListener("dispose",r),delete a[b.id];const _=s.get(b);_&&(e.remove(_),s.delete(b)),i.releaseStatesOfGeometry(b),b.isInstancedBufferGeometry===!0&&delete b._maxInstanceCount,t.memory.geometries--}function l(x,b){return a[b.id]===!0||(b.addEventListener("dispose",r),a[b.id]=!0,t.memory.geometries++),b}function d(x){const b=x.attributes;for(const _ in b)e.update(b[_],n.ARRAY_BUFFER)}function f(x){const b=[],_=x.index,S=x.attributes.position;let w=0;if(_!==null){const T=_.array;w=_.version;for(let C=0,D=T.length;C<D;C+=3){const P=T[C+0],B=T[C+1],F=T[C+2];b.push(P,B,B,F,F,P)}}else if(S!==void 0){const T=S.array;w=S.version;for(let C=0,D=T.length/3-1;C<D;C+=3){const P=C+0,B=C+1,F=C+2;b.push(P,B,B,F,F,P)}}else return;const M=new(EO(b)?k3:F3)(b,1);M.version=w;const E=s.get(x);E&&e.remove(E),s.set(x,M)}function g(x){const b=s.get(x);if(b){const _=x.index;_!==null&&b.version<_.version&&f(x)}else f(x);return s.get(x)}return{get:l,update:d,getWireframeAttribute:g}}function dW(n,e,t){let i;function a(b){i=b}let s,r;function l(b){s=b.type,r=b.bytesPerElement}function d(b,_){n.drawElements(i,_,s,b*r),t.update(_,i,1)}function f(b,_,S){S!==0&&(n.drawElementsInstanced(i,_,s,b*r,S),t.update(_,i,S))}function g(b,_,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,_,0,s,b,0,S);let M=0;for(let E=0;E<S;E++)M+=_[E];t.update(M,i,1)}function x(b,_,S,w){if(S===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let E=0;E<b.length;E++)f(b[E]/r,_[E],w[E]);else{M.multiDrawElementsInstancedWEBGL(i,_,0,s,b,0,w,0,S);let E=0;for(let T=0;T<S;T++)E+=_[T]*w[T];t.update(E,i,1)}}this.setMode=a,this.setIndex=l,this.render=d,this.renderInstances=f,this.renderMultiDraw=g,this.renderMultiDrawInstances=x}function hW(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,r,l){switch(t.calls++,r){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);break}}function a(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:a,update:i}}function fW(n,e,t){const i=new WeakMap,a=new $i;function s(r,l,d){const f=r.morphTargetInfluences,g=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,x=g!==void 0?g.length:0;let b=i.get(l);if(b===void 0||b.count!==x){let I=function(){j.dispose(),i.delete(l),l.removeEventListener("dispose",I)};var _=I;b!==void 0&&b.texture.dispose();const S=l.morphAttributes.position!==void 0,w=l.morphAttributes.normal!==void 0,M=l.morphAttributes.color!==void 0,E=l.morphAttributes.position||[],T=l.morphAttributes.normal||[],C=l.morphAttributes.color||[];let D=0;S===!0&&(D=1),w===!0&&(D=2),M===!0&&(D=3);let P=l.attributes.position.count*D,B=1;P>e.maxTextureSize&&(B=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const F=new Float32Array(P*B*4*x),j=new u2(F,P,B,x);j.type=bs,j.needsUpdate=!0;const O=D*4;for(let W=0;W<x;W++){const Q=E[W],J=T[W],te=C[W],oe=P*B*4*W;for(let $=0;$<Q.count;$++){const X=$*O;S===!0&&(a.fromBufferAttribute(Q,$),F[oe+X+0]=a.x,F[oe+X+1]=a.y,F[oe+X+2]=a.z,F[oe+X+3]=0),w===!0&&(a.fromBufferAttribute(J,$),F[oe+X+4]=a.x,F[oe+X+5]=a.y,F[oe+X+6]=a.z,F[oe+X+7]=0),M===!0&&(a.fromBufferAttribute(te,$),F[oe+X+8]=a.x,F[oe+X+9]=a.y,F[oe+X+10]=a.z,F[oe+X+11]=te.itemSize===4?a.w:1)}}b={count:x,texture:j,size:new wt(P,B)},i.set(l,b),l.addEventListener("dispose",I)}if(r.isInstancedMesh===!0&&r.morphTexture!==null)d.getUniforms().setValue(n,"morphTexture",r.morphTexture,t);else{let S=0;for(let M=0;M<f.length;M++)S+=f[M];const w=l.morphTargetsRelative?1:1-S;d.getUniforms().setValue(n,"morphTargetBaseInfluence",w),d.getUniforms().setValue(n,"morphTargetInfluences",f)}d.getUniforms().setValue(n,"morphTargetsTexture",b.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",b.size)}return{update:s}}function pW(n,e,t,i){let a=new WeakMap;function s(d){const f=i.render.frame,g=d.geometry,x=e.get(d,g);if(a.get(x)!==f&&(e.update(x),a.set(x,f)),d.isInstancedMesh&&(d.hasEventListener("dispose",l)===!1&&d.addEventListener("dispose",l),a.get(d)!==f&&(t.update(d.instanceMatrix,n.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,n.ARRAY_BUFFER),a.set(d,f))),d.isSkinnedMesh){const b=d.skeleton;a.get(b)!==f&&(b.update(),a.set(b,f))}return x}function r(){a=new WeakMap}function l(d){const f=d.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:r}}const Cj=new Pa,f5=new Y3(1,1),Aj=new u2,Nj=new d2,Rj=new C1,p5=[],m5=[],g5=new Float32Array(16),v5=new Float32Array(9),y5=new Float32Array(4);function Bv(n,e,t){const i=n[0];if(i<=0||i>0)return n;const a=e*t;let s=p5[a];if(s===void 0&&(s=new Float32Array(a),p5[a]=s),e!==0){i.toArray(s,0);for(let r=1,l=0;r!==e;++r)l+=t,n[r].toArray(s,l)}return s}function Rr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Dr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function U2(n,e){let t=m5[e];t===void 0&&(t=new Int32Array(e),m5[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function mW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function gW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rr(t,e))return;n.uniform2fv(this.addr,e),Dr(t,e)}}function vW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Rr(t,e))return;n.uniform3fv(this.addr,e),Dr(t,e)}}function yW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rr(t,e))return;n.uniform4fv(this.addr,e),Dr(t,e)}}function xW(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Rr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Dr(t,e)}else{if(Rr(t,i))return;y5.set(i),n.uniformMatrix2fv(this.addr,!1,y5),Dr(t,i)}}function bW(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Rr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Dr(t,e)}else{if(Rr(t,i))return;v5.set(i),n.uniformMatrix3fv(this.addr,!1,v5),Dr(t,i)}}function _W(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Rr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Dr(t,e)}else{if(Rr(t,i))return;g5.set(i),n.uniformMatrix4fv(this.addr,!1,g5),Dr(t,i)}}function SW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function EW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rr(t,e))return;n.uniform2iv(this.addr,e),Dr(t,e)}}function wW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Rr(t,e))return;n.uniform3iv(this.addr,e),Dr(t,e)}}function MW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rr(t,e))return;n.uniform4iv(this.addr,e),Dr(t,e)}}function TW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function CW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rr(t,e))return;n.uniform2uiv(this.addr,e),Dr(t,e)}}function AW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Rr(t,e))return;n.uniform3uiv(this.addr,e),Dr(t,e)}}function NW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rr(t,e))return;n.uniform4uiv(this.addr,e),Dr(t,e)}}function RW(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a);let s;this.type===n.SAMPLER_2D_SHADOW?(f5.compareFunction=z3,s=f5):s=Cj,t.setTexture2D(e||s,a)}function DW(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTexture3D(e||Nj,a)}function OW(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTextureCube(e||Rj,a)}function jW(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTexture2DArray(e||Aj,a)}function PW(n){switch(n){case 5126:return mW;case 35664:return gW;case 35665:return vW;case 35666:return yW;case 35674:return xW;case 35675:return bW;case 35676:return _W;case 5124:case 35670:return SW;case 35667:case 35671:return EW;case 35668:case 35672:return wW;case 35669:case 35673:return MW;case 5125:return TW;case 36294:return CW;case 36295:return AW;case 36296:return NW;case 35678:case 36198:case 36298:case 36306:case 35682:return RW;case 35679:case 36299:case 36307:return DW;case 35680:case 36300:case 36308:case 36293:return OW;case 36289:case 36303:case 36311:case 36292:return jW}}function UW(n,e){n.uniform1fv(this.addr,e)}function LW(n,e){const t=Bv(e,this.size,2);n.uniform2fv(this.addr,t)}function zW(n,e){const t=Bv(e,this.size,3);n.uniform3fv(this.addr,t)}function IW(n,e){const t=Bv(e,this.size,4);n.uniform4fv(this.addr,t)}function BW(n,e){const t=Bv(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function FW(n,e){const t=Bv(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function kW(n,e){const t=Bv(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function HW(n,e){n.uniform1iv(this.addr,e)}function GW(n,e){n.uniform2iv(this.addr,e)}function VW(n,e){n.uniform3iv(this.addr,e)}function qW(n,e){n.uniform4iv(this.addr,e)}function XW(n,e){n.uniform1uiv(this.addr,e)}function YW(n,e){n.uniform2uiv(this.addr,e)}function WW(n,e){n.uniform3uiv(this.addr,e)}function KW(n,e){n.uniform4uiv(this.addr,e)}function ZW(n,e,t){const i=this.cache,a=e.length,s=U2(t,a);Rr(i,s)||(n.uniform1iv(this.addr,s),Dr(i,s));for(let r=0;r!==a;++r)t.setTexture2D(e[r]||Cj,s[r])}function QW(n,e,t){const i=this.cache,a=e.length,s=U2(t,a);Rr(i,s)||(n.uniform1iv(this.addr,s),Dr(i,s));for(let r=0;r!==a;++r)t.setTexture3D(e[r]||Nj,s[r])}function JW(n,e,t){const i=this.cache,a=e.length,s=U2(t,a);Rr(i,s)||(n.uniform1iv(this.addr,s),Dr(i,s));for(let r=0;r!==a;++r)t.setTextureCube(e[r]||Rj,s[r])}function $W(n,e,t){const i=this.cache,a=e.length,s=U2(t,a);Rr(i,s)||(n.uniform1iv(this.addr,s),Dr(i,s));for(let r=0;r!==a;++r)t.setTexture2DArray(e[r]||Aj,s[r])}function eK(n){switch(n){case 5126:return UW;case 35664:return LW;case 35665:return zW;case 35666:return IW;case 35674:return BW;case 35675:return FW;case 35676:return kW;case 5124:case 35670:return HW;case 35667:case 35671:return GW;case 35668:case 35672:return VW;case 35669:case 35673:return qW;case 5125:return XW;case 36294:return YW;case 36295:return WW;case 36296:return KW;case 35678:case 36198:case 36298:case 36306:case 35682:return ZW;case 35679:case 36299:case 36307:return QW;case 35680:case 36300:case 36308:case 36293:return JW;case 36289:case 36303:case 36311:case 36292:return $W}}class tK{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=PW(t.type)}}class nK{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=eK(t.type)}}class iK{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const a=this.seq;for(let s=0,r=a.length;s!==r;++s){const l=a[s];l.setValue(e,t[l.id],i)}}}const rM=/(\w+)(\])?(\[|\.)?/g;function x5(n,e){n.seq.push(e),n.map[e.id]=e}function aK(n,e,t){const i=n.name,a=i.length;for(rM.lastIndex=0;;){const s=rM.exec(i),r=rM.lastIndex;let l=s[1];const d=s[2]==="]",f=s[3];if(d&&(l=l|0),f===void 0||f==="["&&r+2===a){x5(t,f===void 0?new tK(l,n,e):new nK(l,n,e));break}else{let x=t.map[l];x===void 0&&(x=new iK(l),x5(t,x)),t=x}}}class T_{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let a=0;a<i;++a){const s=e.getActiveUniform(t,a),r=e.getUniformLocation(t,s.name);aK(s,r,this)}}setValue(e,t,i,a){const s=this.map[t];s!==void 0&&s.setValue(e,i,a)}setOptional(e,t,i){const a=t[i];a!==void 0&&this.setValue(e,i,a)}static upload(e,t,i,a){for(let s=0,r=t.length;s!==r;++s){const l=t[s],d=i[l.id];d.needsUpdate!==!1&&l.setValue(e,d.value,a)}}static seqWithValue(e,t){const i=[];for(let a=0,s=e.length;a!==s;++a){const r=e[a];r.id in t&&i.push(r)}return i}}function b5(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const sK=37297;let rK=0;function oK(n,e){const t=n.split(`
`),i=[],a=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let r=a;r<s;r++){const l=r+1;i.push(`${l===e?">":" "} ${l}: ${t[r]}`)}return i.join(`
`)}const _5=new oi;function lK(n){qi._getMatrix(_5,qi.workingColorSpace,n);const e=`mat3( ${_5.elements.map(t=>t.toFixed(4))} )`;switch(qi.getTransfer(n)){case Qx:return[e,"LinearTransferOETF"];case Ea:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function S5(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),a=n.getShaderInfoLog(e).trim();if(i&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const r=parseInt(s[1]);return t.toUpperCase()+`

`+a+`

`+oK(n.getShaderSource(e),r)}else return a}function cK(n,e){const t=lK(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function uK(n,e){let t;switch(e){case nO:t="Linear";break;case iO:t="Reinhard";break;case aO:t="Cineon";break;case N3:t="ACESFilmic";break;case rO:t="AgX";break;case oO:t="Neutral";break;case sO:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Zb=new be;function dK(){qi.getLuminanceCoefficients(Zb);const n=Zb.x.toFixed(4),e=Zb.y.toFixed(4),t=Zb.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function hK(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Mx).join(`
`)}function fK(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function pK(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const s=n.getActiveAttrib(e,a),r=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),t[r]={type:s.type,location:n.getAttribLocation(e,r),locationSize:l}}return t}function Mx(n){return n!==""}function E5(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function w5(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const mK=/^[ \t]*#include +<([\w\d./]+)>/gm;function TT(n){return n.replace(mK,vK)}const gK=new Map;function vK(n,e){let t=gi[e];if(t===void 0){const i=gK.get(e);if(i!==void 0)t=gi[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return TT(t)}const yK=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function M5(n){return n.replace(yK,xK)}function xK(n,e,t,i){let a="";for(let s=parseInt(e);s<parseInt(t);s++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return a}function T5(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function bK(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===n2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Ax?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===rd&&(e="SHADOWMAP_TYPE_VSM"),e}function _K(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case xh:case Xp:e="ENVMAP_TYPE_CUBE";break;case zv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function SK(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Xp:e="ENVMAP_MODE_REFRACTION";break}return e}function EK(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case E1:e="ENVMAP_BLENDING_MULTIPLY";break;case eO:e="ENVMAP_BLENDING_MIX";break;case tO:e="ENVMAP_BLENDING_ADD";break}return e}function wK(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function MK(n,e,t,i){const a=n.getContext(),s=t.defines;let r=t.vertexShader,l=t.fragmentShader;const d=bK(t),f=_K(t),g=SK(t),x=EK(t),b=wK(t),_=hK(t),S=fK(s),w=a.createProgram();let M,E,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Mx).join(`
`),M.length>0&&(M+=`
`),E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Mx).join(`
`),E.length>0&&(E+=`
`)):(M=[T5(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Mx).join(`
`),E=[T5(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+g:"",t.envMap?"#define "+x:"",b?"#define CUBEUV_TEXEL_WIDTH "+b.texelWidth:"",b?"#define CUBEUV_TEXEL_HEIGHT "+b.texelHeight:"",b?"#define CUBEUV_MAX_MIP "+b.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==fh?"#define TONE_MAPPING":"",t.toneMapping!==fh?gi.tonemapping_pars_fragment:"",t.toneMapping!==fh?uK("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",gi.colorspace_pars_fragment,cK("linearToOutputTexel",t.outputColorSpace),dK(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Mx).join(`
`)),r=TT(r),r=E5(r,t),r=w5(r,t),l=TT(l),l=E5(l,t),l=w5(l,t),r=M5(r),l=M5(l),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,M=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,E=["#define varying in",t.glslVersion===gT?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===gT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const C=T+M+r,D=T+E+l,P=b5(a,a.VERTEX_SHADER,C),B=b5(a,a.FRAGMENT_SHADER,D);a.attachShader(w,P),a.attachShader(w,B),t.index0AttributeName!==void 0?a.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&a.bindAttribLocation(w,0,"position"),a.linkProgram(w);function F(W){if(n.debug.checkShaderErrors){const Q=a.getProgramInfoLog(w).trim(),J=a.getShaderInfoLog(P).trim(),te=a.getShaderInfoLog(B).trim();let oe=!0,$=!0;if(a.getProgramParameter(w,a.LINK_STATUS)===!1)if(oe=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(a,w,P,B);else{const X=S5(a,P,"vertex"),G=S5(a,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(w,a.VALIDATE_STATUS)+`

Material Name: `+W.name+`
Material Type: `+W.type+`

Program Info Log: `+Q+`
`+X+`
`+G)}else Q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Q):(J===""||te==="")&&($=!1);$&&(W.diagnostics={runnable:oe,programLog:Q,vertexShader:{log:J,prefix:M},fragmentShader:{log:te,prefix:E}})}a.deleteShader(P),a.deleteShader(B),j=new T_(a,w),O=pK(a,w)}let j;this.getUniforms=function(){return j===void 0&&F(this),j};let O;this.getAttributes=function(){return O===void 0&&F(this),O};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=a.getProgramParameter(w,sK)),I},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=rK++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=P,this.fragmentShader=B,this}let TK=0;class CK{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,a=this._getShaderStage(t),s=this._getShaderStage(i),r=this._getShaderCacheForMaterial(e);return r.has(a)===!1&&(r.add(a),a.usedTimes++),r.has(s)===!1&&(r.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new AK(e),t.set(e,i)),i}}class AK{constructor(e){this.id=TK++,this.code=e,this.usedTimes=0}}function NK(n,e,t,i,a,s,r){const l=new Sv,d=new CK,f=new Set,g=[],x=a.logarithmicDepthBuffer,b=a.vertexTextures;let _=a.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(O){return f.add(O),O===0?"uv":`uv${O}`}function M(O,I,W,Q,J){const te=Q.fog,oe=J.geometry,$=O.isMeshStandardMaterial?Q.environment:null,X=(O.isMeshStandardMaterial?t:e).get(O.envMap||$),G=X&&X.mapping===zv?X.image.height:null,ee=S[O.type];O.precision!==null&&(_=a.getMaxPrecision(O.precision),_!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",_,"instead."));const Y=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,ne=Y!==void 0?Y.length:0;let ue=0;oe.morphAttributes.position!==void 0&&(ue=1),oe.morphAttributes.normal!==void 0&&(ue=2),oe.morphAttributes.color!==void 0&&(ue=3);let de,ie,Me,ye;if(ee){const Dn=od[ee];de=Dn.vertexShader,ie=Dn.fragmentShader}else de=O.vertexShader,ie=O.fragmentShader,d.update(O),Me=d.getVertexShaderID(O),ye=d.getFragmentShaderID(O);const ae=n.getRenderTarget(),_e=n.state.buffers.depth.getReversed(),Ke=J.isInstancedMesh===!0,Ge=J.isBatchedMesh===!0,st=!!O.map,ft=!!O.matcap,Pe=!!X,he=!!O.aoMap,ke=!!O.lightMap,Ee=!!O.bumpMap,Le=!!O.normalMap,Ie=!!O.displacementMap,Et=!!O.emissiveMap,ct=!!O.metalnessMap,At=!!O.roughnessMap,Pt=O.anisotropy>0,Se=O.clearcoat>0,se=O.dispersion>0,He=O.iridescence>0,Ve=O.sheen>0,Te=O.transmission>0,ze=Pt&&!!O.anisotropyMap,Nt=Se&&!!O.clearcoatMap,Dt=Se&&!!O.clearcoatNormalMap,Ft=Se&&!!O.clearcoatRoughnessMap,Xt=He&&!!O.iridescenceMap,gt=He&&!!O.iridescenceThicknessMap,Ot=Ve&&!!O.sheenColorMap,Wt=Ve&&!!O.sheenRoughnessMap,Ae=!!O.specularMap,Xe=!!O.specularColorMap,Mt=!!O.specularIntensityMap,Ne=Te&&!!O.transmissionMap,Qe=Te&&!!O.thicknessMap,bt=!!O.gradientMap,kt=!!O.alphaMap,jt=O.alphaTest>0,xt=!!O.alphaHash,Vt=!!O.extensions;let $t=fh;O.toneMapped&&(ae===null||ae.isXRRenderTarget===!0)&&($t=n.toneMapping);const Xn={shaderID:ee,shaderType:O.type,shaderName:O.name,vertexShader:de,fragmentShader:ie,defines:O.defines,customVertexShaderID:Me,customFragmentShaderID:ye,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:_,batching:Ge,batchingColor:Ge&&J._colorsTexture!==null,instancing:Ke,instancingColor:Ke&&J.instanceColor!==null,instancingMorph:Ke&&J.morphTexture!==null,supportsVertexTextures:b,outputColorSpace:ae===null?n.outputColorSpace:ae.isXRRenderTarget===!0?ae.texture.colorSpace:fd,alphaToCoverage:!!O.alphaToCoverage,map:st,matcap:ft,envMap:Pe,envMapMode:Pe&&X.mapping,envMapCubeUVHeight:G,aoMap:he,lightMap:ke,bumpMap:Ee,normalMap:Le,displacementMap:b&&Ie,emissiveMap:Et,normalMapObjectSpace:Le&&O.normalMapType===pO,normalMapTangentSpace:Le&&O.normalMapType===$p,metalnessMap:ct,roughnessMap:At,anisotropy:Pt,anisotropyMap:ze,clearcoat:Se,clearcoatMap:Nt,clearcoatNormalMap:Dt,clearcoatRoughnessMap:Ft,dispersion:se,iridescence:He,iridescenceMap:Xt,iridescenceThicknessMap:gt,sheen:Ve,sheenColorMap:Ot,sheenRoughnessMap:Wt,specularMap:Ae,specularColorMap:Xe,specularIntensityMap:Mt,transmission:Te,transmissionMap:Ne,thicknessMap:Qe,gradientMap:bt,opaque:O.transparent===!1&&O.blending===ug&&O.alphaToCoverage===!1,alphaMap:kt,alphaTest:jt,alphaHash:xt,combine:O.combine,mapUv:st&&w(O.map.channel),aoMapUv:he&&w(O.aoMap.channel),lightMapUv:ke&&w(O.lightMap.channel),bumpMapUv:Ee&&w(O.bumpMap.channel),normalMapUv:Le&&w(O.normalMap.channel),displacementMapUv:Ie&&w(O.displacementMap.channel),emissiveMapUv:Et&&w(O.emissiveMap.channel),metalnessMapUv:ct&&w(O.metalnessMap.channel),roughnessMapUv:At&&w(O.roughnessMap.channel),anisotropyMapUv:ze&&w(O.anisotropyMap.channel),clearcoatMapUv:Nt&&w(O.clearcoatMap.channel),clearcoatNormalMapUv:Dt&&w(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ft&&w(O.clearcoatRoughnessMap.channel),iridescenceMapUv:Xt&&w(O.iridescenceMap.channel),iridescenceThicknessMapUv:gt&&w(O.iridescenceThicknessMap.channel),sheenColorMapUv:Ot&&w(O.sheenColorMap.channel),sheenRoughnessMapUv:Wt&&w(O.sheenRoughnessMap.channel),specularMapUv:Ae&&w(O.specularMap.channel),specularColorMapUv:Xe&&w(O.specularColorMap.channel),specularIntensityMapUv:Mt&&w(O.specularIntensityMap.channel),transmissionMapUv:Ne&&w(O.transmissionMap.channel),thicknessMapUv:Qe&&w(O.thicknessMap.channel),alphaMapUv:kt&&w(O.alphaMap.channel),vertexTangents:!!oe.attributes.tangent&&(Le||Pt),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,pointsUvs:J.isPoints===!0&&!!oe.attributes.uv&&(st||kt),fog:!!te,useFog:O.fog===!0,fogExp2:!!te&&te.isFogExp2,flatShading:O.flatShading===!0&&O.wireframe===!1,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:x,reverseDepthBuffer:_e,skinning:J.isSkinnedMesh===!0,morphTargets:oe.morphAttributes.position!==void 0,morphNormals:oe.morphAttributes.normal!==void 0,morphColors:oe.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:ue,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:r.numPlanes,numClipIntersection:r.numIntersection,dithering:O.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:$t,decodeVideoTexture:st&&O.map.isVideoTexture===!0&&qi.getTransfer(O.map.colorSpace)===Ea,decodeVideoTextureEmissive:Et&&O.emissiveMap.isVideoTexture===!0&&qi.getTransfer(O.emissiveMap.colorSpace)===Ea,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===cd,flipSided:O.side===Wo,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:Vt&&O.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Vt&&O.extensions.multiDraw===!0||Ge)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return Xn.vertexUv1s=f.has(1),Xn.vertexUv2s=f.has(2),Xn.vertexUv3s=f.has(3),f.clear(),Xn}function E(O){const I=[];if(O.shaderID?I.push(O.shaderID):(I.push(O.customVertexShaderID),I.push(O.customFragmentShaderID)),O.defines!==void 0)for(const W in O.defines)I.push(W),I.push(O.defines[W]);return O.isRawShaderMaterial===!1&&(T(I,O),C(I,O),I.push(n.outputColorSpace)),I.push(O.customProgramCacheKey),I.join()}function T(O,I){O.push(I.precision),O.push(I.outputColorSpace),O.push(I.envMapMode),O.push(I.envMapCubeUVHeight),O.push(I.mapUv),O.push(I.alphaMapUv),O.push(I.lightMapUv),O.push(I.aoMapUv),O.push(I.bumpMapUv),O.push(I.normalMapUv),O.push(I.displacementMapUv),O.push(I.emissiveMapUv),O.push(I.metalnessMapUv),O.push(I.roughnessMapUv),O.push(I.anisotropyMapUv),O.push(I.clearcoatMapUv),O.push(I.clearcoatNormalMapUv),O.push(I.clearcoatRoughnessMapUv),O.push(I.iridescenceMapUv),O.push(I.iridescenceThicknessMapUv),O.push(I.sheenColorMapUv),O.push(I.sheenRoughnessMapUv),O.push(I.specularMapUv),O.push(I.specularColorMapUv),O.push(I.specularIntensityMapUv),O.push(I.transmissionMapUv),O.push(I.thicknessMapUv),O.push(I.combine),O.push(I.fogExp2),O.push(I.sizeAttenuation),O.push(I.morphTargetsCount),O.push(I.morphAttributeCount),O.push(I.numDirLights),O.push(I.numPointLights),O.push(I.numSpotLights),O.push(I.numSpotLightMaps),O.push(I.numHemiLights),O.push(I.numRectAreaLights),O.push(I.numDirLightShadows),O.push(I.numPointLightShadows),O.push(I.numSpotLightShadows),O.push(I.numSpotLightShadowsWithMaps),O.push(I.numLightProbes),O.push(I.shadowMapType),O.push(I.toneMapping),O.push(I.numClippingPlanes),O.push(I.numClipIntersection),O.push(I.depthPacking)}function C(O,I){l.disableAll(),I.supportsVertexTextures&&l.enable(0),I.instancing&&l.enable(1),I.instancingColor&&l.enable(2),I.instancingMorph&&l.enable(3),I.matcap&&l.enable(4),I.envMap&&l.enable(5),I.normalMapObjectSpace&&l.enable(6),I.normalMapTangentSpace&&l.enable(7),I.clearcoat&&l.enable(8),I.iridescence&&l.enable(9),I.alphaTest&&l.enable(10),I.vertexColors&&l.enable(11),I.vertexAlphas&&l.enable(12),I.vertexUv1s&&l.enable(13),I.vertexUv2s&&l.enable(14),I.vertexUv3s&&l.enable(15),I.vertexTangents&&l.enable(16),I.anisotropy&&l.enable(17),I.alphaHash&&l.enable(18),I.batching&&l.enable(19),I.dispersion&&l.enable(20),I.batchingColor&&l.enable(21),I.gradientMap&&l.enable(22),O.push(l.mask),l.disableAll(),I.fog&&l.enable(0),I.useFog&&l.enable(1),I.flatShading&&l.enable(2),I.logarithmicDepthBuffer&&l.enable(3),I.reverseDepthBuffer&&l.enable(4),I.skinning&&l.enable(5),I.morphTargets&&l.enable(6),I.morphNormals&&l.enable(7),I.morphColors&&l.enable(8),I.premultipliedAlpha&&l.enable(9),I.shadowMapEnabled&&l.enable(10),I.doubleSided&&l.enable(11),I.flipSided&&l.enable(12),I.useDepthPacking&&l.enable(13),I.dithering&&l.enable(14),I.transmission&&l.enable(15),I.sheen&&l.enable(16),I.opaque&&l.enable(17),I.pointsUvs&&l.enable(18),I.decodeVideoTexture&&l.enable(19),I.decodeVideoTextureEmissive&&l.enable(20),I.alphaToCoverage&&l.enable(21),O.push(l.mask)}function D(O){const I=S[O.type];let W;if(I){const Q=od[I];W=H3.clone(Q.uniforms)}else W=O.uniforms;return W}function P(O,I){let W;for(let Q=0,J=g.length;Q<J;Q++){const te=g[Q];if(te.cacheKey===I){W=te,++W.usedTimes;break}}return W===void 0&&(W=new MK(n,I,O,s),g.push(W)),W}function B(O){if(--O.usedTimes===0){const I=g.indexOf(O);g[I]=g[g.length-1],g.pop(),O.destroy()}}function F(O){d.remove(O)}function j(){d.dispose()}return{getParameters:M,getProgramCacheKey:E,getUniforms:D,acquireProgram:P,releaseProgram:B,releaseShaderCache:F,programs:g,dispose:j}}function RK(){let n=new WeakMap;function e(r){return n.has(r)}function t(r){let l=n.get(r);return l===void 0&&(l={},n.set(r,l)),l}function i(r){n.delete(r)}function a(r,l,d){n.get(r)[l]=d}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:a,dispose:s}}function DK(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function C5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function A5(){const n=[];let e=0;const t=[],i=[],a=[];function s(){e=0,t.length=0,i.length=0,a.length=0}function r(x,b,_,S,w,M){let E=n[e];return E===void 0?(E={id:x.id,object:x,geometry:b,material:_,groupOrder:S,renderOrder:x.renderOrder,z:w,group:M},n[e]=E):(E.id=x.id,E.object=x,E.geometry=b,E.material=_,E.groupOrder=S,E.renderOrder=x.renderOrder,E.z=w,E.group=M),e++,E}function l(x,b,_,S,w,M){const E=r(x,b,_,S,w,M);_.transmission>0?i.push(E):_.transparent===!0?a.push(E):t.push(E)}function d(x,b,_,S,w,M){const E=r(x,b,_,S,w,M);_.transmission>0?i.unshift(E):_.transparent===!0?a.unshift(E):t.unshift(E)}function f(x,b){t.length>1&&t.sort(x||DK),i.length>1&&i.sort(b||C5),a.length>1&&a.sort(b||C5)}function g(){for(let x=e,b=n.length;x<b;x++){const _=n[x];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:i,transparent:a,init:s,push:l,unshift:d,finish:g,sort:f}}function OK(){let n=new WeakMap;function e(i,a){const s=n.get(i);let r;return s===void 0?(r=new A5,n.set(i,[r])):a>=s.length?(r=new A5,s.push(r)):r=s[a],r}function t(){n=new WeakMap}return{get:e,dispose:t}}function jK(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new be,color:new Zt};break;case"SpotLight":t={position:new be,direction:new be,color:new Zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new be,color:new Zt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new be,skyColor:new Zt,groundColor:new Zt};break;case"RectAreaLight":t={color:new Zt,position:new be,halfWidth:new be,halfHeight:new be};break}return n[e.id]=t,t}}}function PK(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let UK=0;function LK(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function zK(n){const e=new jK,t=PK(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new be);const a=new be,s=new Fn,r=new Fn;function l(f){let g=0,x=0,b=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let _=0,S=0,w=0,M=0,E=0,T=0,C=0,D=0,P=0,B=0,F=0;f.sort(LK);for(let O=0,I=f.length;O<I;O++){const W=f[O],Q=W.color,J=W.intensity,te=W.distance,oe=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)g+=Q.r*J,x+=Q.g*J,b+=Q.b*J;else if(W.isLightProbe){for(let $=0;$<9;$++)i.probe[$].addScaledVector(W.sh.coefficients[$],J);F++}else if(W.isDirectionalLight){const $=e.get(W);if($.color.copy(W.color).multiplyScalar(W.intensity),W.castShadow){const X=W.shadow,G=t.get(W);G.shadowIntensity=X.intensity,G.shadowBias=X.bias,G.shadowNormalBias=X.normalBias,G.shadowRadius=X.radius,G.shadowMapSize=X.mapSize,i.directionalShadow[_]=G,i.directionalShadowMap[_]=oe,i.directionalShadowMatrix[_]=W.shadow.matrix,T++}i.directional[_]=$,_++}else if(W.isSpotLight){const $=e.get(W);$.position.setFromMatrixPosition(W.matrixWorld),$.color.copy(Q).multiplyScalar(J),$.distance=te,$.coneCos=Math.cos(W.angle),$.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),$.decay=W.decay,i.spot[w]=$;const X=W.shadow;if(W.map&&(i.spotLightMap[P]=W.map,P++,X.updateMatrices(W),W.castShadow&&B++),i.spotLightMatrix[w]=X.matrix,W.castShadow){const G=t.get(W);G.shadowIntensity=X.intensity,G.shadowBias=X.bias,G.shadowNormalBias=X.normalBias,G.shadowRadius=X.radius,G.shadowMapSize=X.mapSize,i.spotShadow[w]=G,i.spotShadowMap[w]=oe,D++}w++}else if(W.isRectAreaLight){const $=e.get(W);$.color.copy(Q).multiplyScalar(J),$.halfWidth.set(W.width*.5,0,0),$.halfHeight.set(0,W.height*.5,0),i.rectArea[M]=$,M++}else if(W.isPointLight){const $=e.get(W);if($.color.copy(W.color).multiplyScalar(W.intensity),$.distance=W.distance,$.decay=W.decay,W.castShadow){const X=W.shadow,G=t.get(W);G.shadowIntensity=X.intensity,G.shadowBias=X.bias,G.shadowNormalBias=X.normalBias,G.shadowRadius=X.radius,G.shadowMapSize=X.mapSize,G.shadowCameraNear=X.camera.near,G.shadowCameraFar=X.camera.far,i.pointShadow[S]=G,i.pointShadowMap[S]=oe,i.pointShadowMatrix[S]=W.shadow.matrix,C++}i.point[S]=$,S++}else if(W.isHemisphereLight){const $=e.get(W);$.skyColor.copy(W.color).multiplyScalar(J),$.groundColor.copy(W.groundColor).multiplyScalar(J),i.hemi[E]=$,E++}}M>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Yt.LTC_FLOAT_1,i.rectAreaLTC2=Yt.LTC_FLOAT_2):(i.rectAreaLTC1=Yt.LTC_HALF_1,i.rectAreaLTC2=Yt.LTC_HALF_2)),i.ambient[0]=g,i.ambient[1]=x,i.ambient[2]=b;const j=i.hash;(j.directionalLength!==_||j.pointLength!==S||j.spotLength!==w||j.rectAreaLength!==M||j.hemiLength!==E||j.numDirectionalShadows!==T||j.numPointShadows!==C||j.numSpotShadows!==D||j.numSpotMaps!==P||j.numLightProbes!==F)&&(i.directional.length=_,i.spot.length=w,i.rectArea.length=M,i.point.length=S,i.hemi.length=E,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=D+P-B,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=B,i.numLightProbes=F,j.directionalLength=_,j.pointLength=S,j.spotLength=w,j.rectAreaLength=M,j.hemiLength=E,j.numDirectionalShadows=T,j.numPointShadows=C,j.numSpotShadows=D,j.numSpotMaps=P,j.numLightProbes=F,i.version=UK++)}function d(f,g){let x=0,b=0,_=0,S=0,w=0;const M=g.matrixWorldInverse;for(let E=0,T=f.length;E<T;E++){const C=f[E];if(C.isDirectionalLight){const D=i.directional[x];D.direction.setFromMatrixPosition(C.matrixWorld),a.setFromMatrixPosition(C.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(M),x++}else if(C.isSpotLight){const D=i.spot[_];D.position.setFromMatrixPosition(C.matrixWorld),D.position.applyMatrix4(M),D.direction.setFromMatrixPosition(C.matrixWorld),a.setFromMatrixPosition(C.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(M),_++}else if(C.isRectAreaLight){const D=i.rectArea[S];D.position.setFromMatrixPosition(C.matrixWorld),D.position.applyMatrix4(M),r.identity(),s.copy(C.matrixWorld),s.premultiply(M),r.extractRotation(s),D.halfWidth.set(C.width*.5,0,0),D.halfHeight.set(0,C.height*.5,0),D.halfWidth.applyMatrix4(r),D.halfHeight.applyMatrix4(r),S++}else if(C.isPointLight){const D=i.point[b];D.position.setFromMatrixPosition(C.matrixWorld),D.position.applyMatrix4(M),b++}else if(C.isHemisphereLight){const D=i.hemi[w];D.direction.setFromMatrixPosition(C.matrixWorld),D.direction.transformDirection(M),w++}}}return{setup:l,setupView:d,state:i}}function N5(n){const e=new zK(n),t=[],i=[];function a(g){f.camera=g,t.length=0,i.length=0}function s(g){t.push(g)}function r(g){i.push(g)}function l(){e.setup(t)}function d(g){e.setupView(t,g)}const f={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:f,setupLights:l,setupLightsView:d,pushLight:s,pushShadow:r}}function IK(n){let e=new WeakMap;function t(a,s=0){const r=e.get(a);let l;return r===void 0?(l=new N5(n),e.set(a,[l])):s>=r.length?(l=new N5(n),r.push(l)):l=r[s],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const BK=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,FK=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function kK(n,e,t){let i=new Iv;const a=new wt,s=new wt,r=new $i,l=new D2({depthPacking:fO}),d=new tC,f={},g=t.maxTextureSize,x={[Rf]:Wo,[Wo]:Rf,[cd]:cd},b=new So({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new wt},radius:{value:4}},vertexShader:BK,fragmentShader:FK}),_=b.clone();_.defines.HORIZONTAL_PASS=1;const S=new fi;S.setAttribute("position",new Ua(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new us(S,b),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=n2;let E=this.type;this.render=function(B,F,j){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||B.length===0)return;const O=n.getRenderTarget(),I=n.getActiveCubeFace(),W=n.getActiveMipmapLevel(),Q=n.state;Q.setBlending(hh),Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);const J=E!==rd&&this.type===rd,te=E===rd&&this.type!==rd;for(let oe=0,$=B.length;oe<$;oe++){const X=B[oe],G=X.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",X,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;a.copy(G.mapSize);const ee=G.getFrameExtents();if(a.multiply(ee),s.copy(G.mapSize),(a.x>g||a.y>g)&&(a.x>g&&(s.x=Math.floor(g/ee.x),a.x=s.x*ee.x,G.mapSize.x=s.x),a.y>g&&(s.y=Math.floor(g/ee.y),a.y=s.y*ee.y,G.mapSize.y=s.y)),G.map===null||J===!0||te===!0){const ne=this.type!==rd?{minFilter:xo,magFilter:xo}:{};G.map!==null&&G.map.dispose(),G.map=new sc(a.x,a.y,ne),G.map.texture.name=X.name+".shadowMap",G.camera.updateProjectionMatrix()}n.setRenderTarget(G.map),n.clear();const Y=G.getViewportCount();for(let ne=0;ne<Y;ne++){const ue=G.getViewport(ne);r.set(s.x*ue.x,s.y*ue.y,s.x*ue.z,s.y*ue.w),Q.viewport(r),G.updateMatrices(X,ne),i=G.getFrustum(),D(F,j,G.camera,X,this.type)}G.isPointLightShadow!==!0&&this.type===rd&&T(G,j),G.needsUpdate=!1}E=this.type,M.needsUpdate=!1,n.setRenderTarget(O,I,W)};function T(B,F){const j=e.update(w);b.defines.VSM_SAMPLES!==B.blurSamples&&(b.defines.VSM_SAMPLES=B.blurSamples,_.defines.VSM_SAMPLES=B.blurSamples,b.needsUpdate=!0,_.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new sc(a.x,a.y)),b.uniforms.shadow_pass.value=B.map.texture,b.uniforms.resolution.value=B.mapSize,b.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(F,null,j,b,w,null),_.uniforms.shadow_pass.value=B.mapPass.texture,_.uniforms.resolution.value=B.mapSize,_.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(F,null,j,_,w,null)}function C(B,F,j,O){let I=null;const W=j.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(W!==void 0)I=W;else if(I=j.isPointLight===!0?d:l,n.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0||F.alphaToCoverage===!0){const Q=I.uuid,J=F.uuid;let te=f[Q];te===void 0&&(te={},f[Q]=te);let oe=te[J];oe===void 0&&(oe=I.clone(),te[J]=oe,F.addEventListener("dispose",P)),I=oe}if(I.visible=F.visible,I.wireframe=F.wireframe,O===rd?I.side=F.shadowSide!==null?F.shadowSide:F.side:I.side=F.shadowSide!==null?F.shadowSide:x[F.side],I.alphaMap=F.alphaMap,I.alphaTest=F.alphaToCoverage===!0?.5:F.alphaTest,I.map=F.map,I.clipShadows=F.clipShadows,I.clippingPlanes=F.clippingPlanes,I.clipIntersection=F.clipIntersection,I.displacementMap=F.displacementMap,I.displacementScale=F.displacementScale,I.displacementBias=F.displacementBias,I.wireframeLinewidth=F.wireframeLinewidth,I.linewidth=F.linewidth,j.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const Q=n.properties.get(I);Q.light=j}return I}function D(B,F,j,O,I){if(B.visible===!1)return;if(B.layers.test(F.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&I===rd)&&(!B.frustumCulled||i.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,B.matrixWorld);const J=e.update(B),te=B.material;if(Array.isArray(te)){const oe=J.groups;for(let $=0,X=oe.length;$<X;$++){const G=oe[$],ee=te[G.materialIndex];if(ee&&ee.visible){const Y=C(B,ee,O,I);B.onBeforeShadow(n,B,F,j,J,Y,G),n.renderBufferDirect(j,null,J,Y,B,G),B.onAfterShadow(n,B,F,j,J,Y,G)}}}else if(te.visible){const oe=C(B,te,O,I);B.onBeforeShadow(n,B,F,j,J,oe,null),n.renderBufferDirect(j,null,J,oe,B,null),B.onAfterShadow(n,B,F,j,J,oe,null)}}const Q=B.children;for(let J=0,te=Q.length;J<te;J++)D(Q[J],F,j,O,I)}function P(B){B.target.removeEventListener("dispose",P);for(const j in f){const O=f[j],I=B.target.uuid;I in O&&(O[I].dispose(),delete O[I])}}}const HK={[V_]:q_,[X_]:K_,[Y_]:Z_,[gg]:W_,[q_]:V_,[K_]:X_,[Z_]:Y_,[W_]:gg};function GK(n,e){function t(){let Ne=!1;const Qe=new $i;let bt=null;const kt=new $i(0,0,0,0);return{setMask:function(jt){bt!==jt&&!Ne&&(n.colorMask(jt,jt,jt,jt),bt=jt)},setLocked:function(jt){Ne=jt},setClear:function(jt,xt,Vt,$t,Xn){Xn===!0&&(jt*=$t,xt*=$t,Vt*=$t),Qe.set(jt,xt,Vt,$t),kt.equals(Qe)===!1&&(n.clearColor(jt,xt,Vt,$t),kt.copy(Qe))},reset:function(){Ne=!1,bt=null,kt.set(-1,0,0,0)}}}function i(){let Ne=!1,Qe=!1,bt=null,kt=null,jt=null;return{setReversed:function(xt){if(Qe!==xt){const Vt=e.get("EXT_clip_control");xt?Vt.clipControlEXT(Vt.LOWER_LEFT_EXT,Vt.ZERO_TO_ONE_EXT):Vt.clipControlEXT(Vt.LOWER_LEFT_EXT,Vt.NEGATIVE_ONE_TO_ONE_EXT),Qe=xt;const $t=jt;jt=null,this.setClear($t)}},getReversed:function(){return Qe},setTest:function(xt){xt?ae(n.DEPTH_TEST):_e(n.DEPTH_TEST)},setMask:function(xt){bt!==xt&&!Ne&&(n.depthMask(xt),bt=xt)},setFunc:function(xt){if(Qe&&(xt=HK[xt]),kt!==xt){switch(xt){case V_:n.depthFunc(n.NEVER);break;case q_:n.depthFunc(n.ALWAYS);break;case X_:n.depthFunc(n.LESS);break;case gg:n.depthFunc(n.LEQUAL);break;case Y_:n.depthFunc(n.EQUAL);break;case W_:n.depthFunc(n.GEQUAL);break;case K_:n.depthFunc(n.GREATER);break;case Z_:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}kt=xt}},setLocked:function(xt){Ne=xt},setClear:function(xt){jt!==xt&&(Qe&&(xt=1-xt),n.clearDepth(xt),jt=xt)},reset:function(){Ne=!1,bt=null,kt=null,jt=null,Qe=!1}}}function a(){let Ne=!1,Qe=null,bt=null,kt=null,jt=null,xt=null,Vt=null,$t=null,Xn=null;return{setTest:function(Dn){Ne||(Dn?ae(n.STENCIL_TEST):_e(n.STENCIL_TEST))},setMask:function(Dn){Qe!==Dn&&!Ne&&(n.stencilMask(Dn),Qe=Dn)},setFunc:function(Dn,ga,ta){(bt!==Dn||kt!==ga||jt!==ta)&&(n.stencilFunc(Dn,ga,ta),bt=Dn,kt=ga,jt=ta)},setOp:function(Dn,ga,ta){(xt!==Dn||Vt!==ga||$t!==ta)&&(n.stencilOp(Dn,ga,ta),xt=Dn,Vt=ga,$t=ta)},setLocked:function(Dn){Ne=Dn},setClear:function(Dn){Xn!==Dn&&(n.clearStencil(Dn),Xn=Dn)},reset:function(){Ne=!1,Qe=null,bt=null,kt=null,jt=null,xt=null,Vt=null,$t=null,Xn=null}}}const s=new t,r=new i,l=new a,d=new WeakMap,f=new WeakMap;let g={},x={},b=new WeakMap,_=[],S=null,w=!1,M=null,E=null,T=null,C=null,D=null,P=null,B=null,F=new Zt(0,0,0),j=0,O=!1,I=null,W=null,Q=null,J=null,te=null;const oe=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,X=0;const G=n.getParameter(n.VERSION);G.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(G)[1]),$=X>=1):G.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),$=X>=2);let ee=null,Y={};const ne=n.getParameter(n.SCISSOR_BOX),ue=n.getParameter(n.VIEWPORT),de=new $i().fromArray(ne),ie=new $i().fromArray(ue);function Me(Ne,Qe,bt,kt){const jt=new Uint8Array(4),xt=n.createTexture();n.bindTexture(Ne,xt),n.texParameteri(Ne,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Ne,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Vt=0;Vt<bt;Vt++)Ne===n.TEXTURE_3D||Ne===n.TEXTURE_2D_ARRAY?n.texImage3D(Qe,0,n.RGBA,1,1,kt,0,n.RGBA,n.UNSIGNED_BYTE,jt):n.texImage2D(Qe+Vt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,jt);return xt}const ye={};ye[n.TEXTURE_2D]=Me(n.TEXTURE_2D,n.TEXTURE_2D,1),ye[n.TEXTURE_CUBE_MAP]=Me(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ye[n.TEXTURE_2D_ARRAY]=Me(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ye[n.TEXTURE_3D]=Me(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),r.setClear(1),l.setClear(0),ae(n.DEPTH_TEST),r.setFunc(gg),Ee(!1),Le(cT),ae(n.CULL_FACE),he(hh);function ae(Ne){g[Ne]!==!0&&(n.enable(Ne),g[Ne]=!0)}function _e(Ne){g[Ne]!==!1&&(n.disable(Ne),g[Ne]=!1)}function Ke(Ne,Qe){return x[Ne]!==Qe?(n.bindFramebuffer(Ne,Qe),x[Ne]=Qe,Ne===n.DRAW_FRAMEBUFFER&&(x[n.FRAMEBUFFER]=Qe),Ne===n.FRAMEBUFFER&&(x[n.DRAW_FRAMEBUFFER]=Qe),!0):!1}function Ge(Ne,Qe){let bt=_,kt=!1;if(Ne){bt=b.get(Qe),bt===void 0&&(bt=[],b.set(Qe,bt));const jt=Ne.textures;if(bt.length!==jt.length||bt[0]!==n.COLOR_ATTACHMENT0){for(let xt=0,Vt=jt.length;xt<Vt;xt++)bt[xt]=n.COLOR_ATTACHMENT0+xt;bt.length=jt.length,kt=!0}}else bt[0]!==n.BACK&&(bt[0]=n.BACK,kt=!0);kt&&n.drawBuffers(bt)}function st(Ne){return S!==Ne?(n.useProgram(Ne),S=Ne,!0):!1}const ft={[Lp]:n.FUNC_ADD,[z8]:n.FUNC_SUBTRACT,[I8]:n.FUNC_REVERSE_SUBTRACT};ft[B8]=n.MIN,ft[F8]=n.MAX;const Pe={[k8]:n.ZERO,[H8]:n.ONE,[G8]:n.SRC_COLOR,[H_]:n.SRC_ALPHA,[K8]:n.SRC_ALPHA_SATURATE,[Y8]:n.DST_COLOR,[q8]:n.DST_ALPHA,[V8]:n.ONE_MINUS_SRC_COLOR,[G_]:n.ONE_MINUS_SRC_ALPHA,[W8]:n.ONE_MINUS_DST_COLOR,[X8]:n.ONE_MINUS_DST_ALPHA,[Z8]:n.CONSTANT_COLOR,[Q8]:n.ONE_MINUS_CONSTANT_COLOR,[J8]:n.CONSTANT_ALPHA,[$8]:n.ONE_MINUS_CONSTANT_ALPHA};function he(Ne,Qe,bt,kt,jt,xt,Vt,$t,Xn,Dn){if(Ne===hh){w===!0&&(_e(n.BLEND),w=!1);return}if(w===!1&&(ae(n.BLEND),w=!0),Ne!==L8){if(Ne!==M||Dn!==O){if((E!==Lp||D!==Lp)&&(n.blendEquation(n.FUNC_ADD),E=Lp,D=Lp),Dn)switch(Ne){case ug:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uT:n.blendFunc(n.ONE,n.ONE);break;case dT:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case hT:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ne);break}else switch(Ne){case ug:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uT:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case dT:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case hT:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",Ne);break}T=null,C=null,P=null,B=null,F.set(0,0,0),j=0,M=Ne,O=Dn}return}jt=jt||Qe,xt=xt||bt,Vt=Vt||kt,(Qe!==E||jt!==D)&&(n.blendEquationSeparate(ft[Qe],ft[jt]),E=Qe,D=jt),(bt!==T||kt!==C||xt!==P||Vt!==B)&&(n.blendFuncSeparate(Pe[bt],Pe[kt],Pe[xt],Pe[Vt]),T=bt,C=kt,P=xt,B=Vt),($t.equals(F)===!1||Xn!==j)&&(n.blendColor($t.r,$t.g,$t.b,Xn),F.copy($t),j=Xn),M=Ne,O=!1}function ke(Ne,Qe){Ne.side===cd?_e(n.CULL_FACE):ae(n.CULL_FACE);let bt=Ne.side===Wo;Qe&&(bt=!bt),Ee(bt),Ne.blending===ug&&Ne.transparent===!1?he(hh):he(Ne.blending,Ne.blendEquation,Ne.blendSrc,Ne.blendDst,Ne.blendEquationAlpha,Ne.blendSrcAlpha,Ne.blendDstAlpha,Ne.blendColor,Ne.blendAlpha,Ne.premultipliedAlpha),r.setFunc(Ne.depthFunc),r.setTest(Ne.depthTest),r.setMask(Ne.depthWrite),s.setMask(Ne.colorWrite);const kt=Ne.stencilWrite;l.setTest(kt),kt&&(l.setMask(Ne.stencilWriteMask),l.setFunc(Ne.stencilFunc,Ne.stencilRef,Ne.stencilFuncMask),l.setOp(Ne.stencilFail,Ne.stencilZFail,Ne.stencilZPass)),Et(Ne.polygonOffset,Ne.polygonOffsetFactor,Ne.polygonOffsetUnits),Ne.alphaToCoverage===!0?ae(n.SAMPLE_ALPHA_TO_COVERAGE):_e(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ee(Ne){I!==Ne&&(Ne?n.frontFace(n.CW):n.frontFace(n.CCW),I=Ne)}function Le(Ne){Ne!==j8?(ae(n.CULL_FACE),Ne!==W&&(Ne===cT?n.cullFace(n.BACK):Ne===P8?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):_e(n.CULL_FACE),W=Ne}function Ie(Ne){Ne!==Q&&($&&n.lineWidth(Ne),Q=Ne)}function Et(Ne,Qe,bt){Ne?(ae(n.POLYGON_OFFSET_FILL),(J!==Qe||te!==bt)&&(n.polygonOffset(Qe,bt),J=Qe,te=bt)):_e(n.POLYGON_OFFSET_FILL)}function ct(Ne){Ne?ae(n.SCISSOR_TEST):_e(n.SCISSOR_TEST)}function At(Ne){Ne===void 0&&(Ne=n.TEXTURE0+oe-1),ee!==Ne&&(n.activeTexture(Ne),ee=Ne)}function Pt(Ne,Qe,bt){bt===void 0&&(ee===null?bt=n.TEXTURE0+oe-1:bt=ee);let kt=Y[bt];kt===void 0&&(kt={type:void 0,texture:void 0},Y[bt]=kt),(kt.type!==Ne||kt.texture!==Qe)&&(ee!==bt&&(n.activeTexture(bt),ee=bt),n.bindTexture(Ne,Qe||ye[Ne]),kt.type=Ne,kt.texture=Qe)}function Se(){const Ne=Y[ee];Ne!==void 0&&Ne.type!==void 0&&(n.bindTexture(Ne.type,null),Ne.type=void 0,Ne.texture=void 0)}function se(){try{n.compressedTexImage2D(...arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}}function He(){try{n.compressedTexImage3D(...arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}}function Ve(){try{n.texSubImage2D(...arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}}function Te(){try{n.texSubImage3D(...arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}}function ze(){try{n.compressedTexSubImage2D(...arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}}function Nt(){try{n.compressedTexSubImage3D(...arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}}function Dt(){try{n.texStorage2D(...arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}}function Ft(){try{n.texStorage3D(...arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}}function Xt(){try{n.texImage2D(...arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}}function gt(){try{n.texImage3D(...arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}}function Ot(Ne){de.equals(Ne)===!1&&(n.scissor(Ne.x,Ne.y,Ne.z,Ne.w),de.copy(Ne))}function Wt(Ne){ie.equals(Ne)===!1&&(n.viewport(Ne.x,Ne.y,Ne.z,Ne.w),ie.copy(Ne))}function Ae(Ne,Qe){let bt=f.get(Qe);bt===void 0&&(bt=new WeakMap,f.set(Qe,bt));let kt=bt.get(Ne);kt===void 0&&(kt=n.getUniformBlockIndex(Qe,Ne.name),bt.set(Ne,kt))}function Xe(Ne,Qe){const kt=f.get(Qe).get(Ne);d.get(Qe)!==kt&&(n.uniformBlockBinding(Qe,kt,Ne.__bindingPointIndex),d.set(Qe,kt))}function Mt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),r.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),g={},ee=null,Y={},x={},b=new WeakMap,_=[],S=null,w=!1,M=null,E=null,T=null,C=null,D=null,P=null,B=null,F=new Zt(0,0,0),j=0,O=!1,I=null,W=null,Q=null,J=null,te=null,de.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),s.reset(),r.reset(),l.reset()}return{buffers:{color:s,depth:r,stencil:l},enable:ae,disable:_e,bindFramebuffer:Ke,drawBuffers:Ge,useProgram:st,setBlending:he,setMaterial:ke,setFlipSided:Ee,setCullFace:Le,setLineWidth:Ie,setPolygonOffset:Et,setScissorTest:ct,activeTexture:At,bindTexture:Pt,unbindTexture:Se,compressedTexImage2D:se,compressedTexImage3D:He,texImage2D:Xt,texImage3D:gt,updateUBOMapping:Ae,uniformBlockBinding:Xe,texStorage2D:Dt,texStorage3D:Ft,texSubImage2D:Ve,texSubImage3D:Te,compressedTexSubImage2D:ze,compressedTexSubImage3D:Nt,scissor:Ot,viewport:Wt,reset:Mt}}function VK(n,e,t,i,a,s,r){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new wt,g=new WeakMap;let x;const b=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(Se,se){return _?new OffscreenCanvas(Se,se):e1("canvas")}function w(Se,se,He){let Ve=1;const Te=Pt(Se);if((Te.width>He||Te.height>He)&&(Ve=He/Math.max(Te.width,Te.height)),Ve<1)if(typeof HTMLImageElement<"u"&&Se instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Se instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Se instanceof ImageBitmap||typeof VideoFrame<"u"&&Se instanceof VideoFrame){const ze=Math.floor(Ve*Te.width),Nt=Math.floor(Ve*Te.height);x===void 0&&(x=S(ze,Nt));const Dt=se?S(ze,Nt):x;return Dt.width=ze,Dt.height=Nt,Dt.getContext("2d").drawImage(Se,0,0,ze,Nt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+ze+"x"+Nt+")."),Dt}else return"data"in Se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),Se;return Se}function M(Se){return Se.generateMipmaps}function E(Se){n.generateMipmap(Se)}function T(Se){return Se.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:Se.isWebGL3DRenderTarget?n.TEXTURE_3D:Se.isWebGLArrayRenderTarget||Se.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function C(Se,se,He,Ve,Te=!1){if(Se!==null){if(n[Se]!==void 0)return n[Se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Se+"'")}let ze=se;if(se===n.RED&&(He===n.FLOAT&&(ze=n.R32F),He===n.HALF_FLOAT&&(ze=n.R16F),He===n.UNSIGNED_BYTE&&(ze=n.R8)),se===n.RED_INTEGER&&(He===n.UNSIGNED_BYTE&&(ze=n.R8UI),He===n.UNSIGNED_SHORT&&(ze=n.R16UI),He===n.UNSIGNED_INT&&(ze=n.R32UI),He===n.BYTE&&(ze=n.R8I),He===n.SHORT&&(ze=n.R16I),He===n.INT&&(ze=n.R32I)),se===n.RG&&(He===n.FLOAT&&(ze=n.RG32F),He===n.HALF_FLOAT&&(ze=n.RG16F),He===n.UNSIGNED_BYTE&&(ze=n.RG8)),se===n.RG_INTEGER&&(He===n.UNSIGNED_BYTE&&(ze=n.RG8UI),He===n.UNSIGNED_SHORT&&(ze=n.RG16UI),He===n.UNSIGNED_INT&&(ze=n.RG32UI),He===n.BYTE&&(ze=n.RG8I),He===n.SHORT&&(ze=n.RG16I),He===n.INT&&(ze=n.RG32I)),se===n.RGB_INTEGER&&(He===n.UNSIGNED_BYTE&&(ze=n.RGB8UI),He===n.UNSIGNED_SHORT&&(ze=n.RGB16UI),He===n.UNSIGNED_INT&&(ze=n.RGB32UI),He===n.BYTE&&(ze=n.RGB8I),He===n.SHORT&&(ze=n.RGB16I),He===n.INT&&(ze=n.RGB32I)),se===n.RGBA_INTEGER&&(He===n.UNSIGNED_BYTE&&(ze=n.RGBA8UI),He===n.UNSIGNED_SHORT&&(ze=n.RGBA16UI),He===n.UNSIGNED_INT&&(ze=n.RGBA32UI),He===n.BYTE&&(ze=n.RGBA8I),He===n.SHORT&&(ze=n.RGBA16I),He===n.INT&&(ze=n.RGBA32I)),se===n.RGB&&He===n.UNSIGNED_INT_5_9_9_9_REV&&(ze=n.RGB9_E5),se===n.RGBA){const Nt=Te?Qx:qi.getTransfer(Ve);He===n.FLOAT&&(ze=n.RGBA32F),He===n.HALF_FLOAT&&(ze=n.RGBA16F),He===n.UNSIGNED_BYTE&&(ze=Nt===Ea?n.SRGB8_ALPHA8:n.RGBA8),He===n.UNSIGNED_SHORT_4_4_4_4&&(ze=n.RGBA4),He===n.UNSIGNED_SHORT_5_5_5_1&&(ze=n.RGB5_A1)}return(ze===n.R16F||ze===n.R32F||ze===n.RG16F||ze===n.RG32F||ze===n.RGBA16F||ze===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ze}function D(Se,se){let He;return Se?se===null||se===bh||se===yv?He=n.DEPTH24_STENCIL8:se===bs?He=n.DEPTH32F_STENCIL8:se===vv&&(He=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):se===null||se===bh||se===yv?He=n.DEPTH_COMPONENT24:se===bs?He=n.DEPTH_COMPONENT32F:se===vv&&(He=n.DEPTH_COMPONENT16),He}function P(Se,se){return M(Se)===!0||Se.isFramebufferTexture&&Se.minFilter!==xo&&Se.minFilter!==Aa?Math.log2(Math.max(se.width,se.height))+1:Se.mipmaps!==void 0&&Se.mipmaps.length>0?Se.mipmaps.length:Se.isCompressedTexture&&Array.isArray(Se.image)?se.mipmaps.length:1}function B(Se){const se=Se.target;se.removeEventListener("dispose",B),j(se),se.isVideoTexture&&g.delete(se)}function F(Se){const se=Se.target;se.removeEventListener("dispose",F),I(se)}function j(Se){const se=i.get(Se);if(se.__webglInit===void 0)return;const He=Se.source,Ve=b.get(He);if(Ve){const Te=Ve[se.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&O(Se),Object.keys(Ve).length===0&&b.delete(He)}i.remove(Se)}function O(Se){const se=i.get(Se);n.deleteTexture(se.__webglTexture);const He=Se.source,Ve=b.get(He);delete Ve[se.__cacheKey],r.memory.textures--}function I(Se){const se=i.get(Se);if(Se.depthTexture&&(Se.depthTexture.dispose(),i.remove(Se.depthTexture)),Se.isWebGLCubeRenderTarget)for(let Ve=0;Ve<6;Ve++){if(Array.isArray(se.__webglFramebuffer[Ve]))for(let Te=0;Te<se.__webglFramebuffer[Ve].length;Te++)n.deleteFramebuffer(se.__webglFramebuffer[Ve][Te]);else n.deleteFramebuffer(se.__webglFramebuffer[Ve]);se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer[Ve])}else{if(Array.isArray(se.__webglFramebuffer))for(let Ve=0;Ve<se.__webglFramebuffer.length;Ve++)n.deleteFramebuffer(se.__webglFramebuffer[Ve]);else n.deleteFramebuffer(se.__webglFramebuffer);if(se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&n.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let Ve=0;Ve<se.__webglColorRenderbuffer.length;Ve++)se.__webglColorRenderbuffer[Ve]&&n.deleteRenderbuffer(se.__webglColorRenderbuffer[Ve]);se.__webglDepthRenderbuffer&&n.deleteRenderbuffer(se.__webglDepthRenderbuffer)}const He=Se.textures;for(let Ve=0,Te=He.length;Ve<Te;Ve++){const ze=i.get(He[Ve]);ze.__webglTexture&&(n.deleteTexture(ze.__webglTexture),r.memory.textures--),i.remove(He[Ve])}i.remove(Se)}let W=0;function Q(){W=0}function J(){const Se=W;return Se>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Se+" texture units while this GPU supports only "+a.maxTextures),W+=1,Se}function te(Se){const se=[];return se.push(Se.wrapS),se.push(Se.wrapT),se.push(Se.wrapR||0),se.push(Se.magFilter),se.push(Se.minFilter),se.push(Se.anisotropy),se.push(Se.internalFormat),se.push(Se.format),se.push(Se.type),se.push(Se.generateMipmaps),se.push(Se.premultiplyAlpha),se.push(Se.flipY),se.push(Se.unpackAlignment),se.push(Se.colorSpace),se.join()}function oe(Se,se){const He=i.get(Se);if(Se.isVideoTexture&&ct(Se),Se.isRenderTargetTexture===!1&&Se.version>0&&He.__version!==Se.version){const Ve=Se.image;if(Ve===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ve.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ye(He,Se,se);return}}t.bindTexture(n.TEXTURE_2D,He.__webglTexture,n.TEXTURE0+se)}function $(Se,se){const He=i.get(Se);if(Se.version>0&&He.__version!==Se.version){ye(He,Se,se);return}t.bindTexture(n.TEXTURE_2D_ARRAY,He.__webglTexture,n.TEXTURE0+se)}function X(Se,se){const He=i.get(Se);if(Se.version>0&&He.__version!==Se.version){ye(He,Se,se);return}t.bindTexture(n.TEXTURE_3D,He.__webglTexture,n.TEXTURE0+se)}function G(Se,se){const He=i.get(Se);if(Se.version>0&&He.__version!==Se.version){ae(He,Se,se);return}t.bindTexture(n.TEXTURE_CUBE_MAP,He.__webglTexture,n.TEXTURE0+se)}const ee={[Yx]:n.REPEAT,[fr]:n.CLAMP_TO_EDGE,[Wx]:n.MIRRORED_REPEAT},Y={[xo]:n.NEAREST,[R3]:n.NEAREST_MIPMAP_NEAREST,[iv]:n.NEAREST_MIPMAP_LINEAR,[Aa]:n.LINEAR,[Nx]:n.LINEAR_MIPMAP_NEAREST,[lh]:n.LINEAR_MIPMAP_LINEAR},ne={[mO]:n.NEVER,[_O]:n.ALWAYS,[gO]:n.LESS,[z3]:n.LEQUAL,[vO]:n.EQUAL,[bO]:n.GEQUAL,[yO]:n.GREATER,[xO]:n.NOTEQUAL};function ue(Se,se){if(se.type===bs&&e.has("OES_texture_float_linear")===!1&&(se.magFilter===Aa||se.magFilter===Nx||se.magFilter===iv||se.magFilter===lh||se.minFilter===Aa||se.minFilter===Nx||se.minFilter===iv||se.minFilter===lh)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(Se,n.TEXTURE_WRAP_S,ee[se.wrapS]),n.texParameteri(Se,n.TEXTURE_WRAP_T,ee[se.wrapT]),(Se===n.TEXTURE_3D||Se===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Se,n.TEXTURE_WRAP_R,ee[se.wrapR]),n.texParameteri(Se,n.TEXTURE_MAG_FILTER,Y[se.magFilter]),n.texParameteri(Se,n.TEXTURE_MIN_FILTER,Y[se.minFilter]),se.compareFunction&&(n.texParameteri(Se,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(Se,n.TEXTURE_COMPARE_FUNC,ne[se.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(se.magFilter===xo||se.minFilter!==iv&&se.minFilter!==lh||se.type===bs&&e.has("OES_texture_float_linear")===!1)return;if(se.anisotropy>1||i.get(se).__currentAnisotropy){const He=e.get("EXT_texture_filter_anisotropic");n.texParameterf(Se,He.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(se.anisotropy,a.getMaxAnisotropy())),i.get(se).__currentAnisotropy=se.anisotropy}}}function de(Se,se){let He=!1;Se.__webglInit===void 0&&(Se.__webglInit=!0,se.addEventListener("dispose",B));const Ve=se.source;let Te=b.get(Ve);Te===void 0&&(Te={},b.set(Ve,Te));const ze=te(se);if(ze!==Se.__cacheKey){Te[ze]===void 0&&(Te[ze]={texture:n.createTexture(),usedTimes:0},r.memory.textures++,He=!0),Te[ze].usedTimes++;const Nt=Te[Se.__cacheKey];Nt!==void 0&&(Te[Se.__cacheKey].usedTimes--,Nt.usedTimes===0&&O(se)),Se.__cacheKey=ze,Se.__webglTexture=Te[ze].texture}return He}function ie(Se,se,He){return Math.floor(Math.floor(Se/He)/se)}function Me(Se,se,He,Ve){const ze=Se.updateRanges;if(ze.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,se.width,se.height,He,Ve,se.data);else{ze.sort((gt,Ot)=>gt.start-Ot.start);let Nt=0;for(let gt=1;gt<ze.length;gt++){const Ot=ze[Nt],Wt=ze[gt],Ae=Ot.start+Ot.count,Xe=ie(Wt.start,se.width,4),Mt=ie(Ot.start,se.width,4);Wt.start<=Ae+1&&Xe===Mt&&ie(Wt.start+Wt.count-1,se.width,4)===Xe?Ot.count=Math.max(Ot.count,Wt.start+Wt.count-Ot.start):(++Nt,ze[Nt]=Wt)}ze.length=Nt+1;const Dt=n.getParameter(n.UNPACK_ROW_LENGTH),Ft=n.getParameter(n.UNPACK_SKIP_PIXELS),Xt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,se.width);for(let gt=0,Ot=ze.length;gt<Ot;gt++){const Wt=ze[gt],Ae=Math.floor(Wt.start/4),Xe=Math.ceil(Wt.count/4),Mt=Ae%se.width,Ne=Math.floor(Ae/se.width),Qe=Xe,bt=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Mt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Ne),t.texSubImage2D(n.TEXTURE_2D,0,Mt,Ne,Qe,bt,He,Ve,se.data)}Se.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Dt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Ft),n.pixelStorei(n.UNPACK_SKIP_ROWS,Xt)}}function ye(Se,se,He){let Ve=n.TEXTURE_2D;(se.isDataArrayTexture||se.isCompressedArrayTexture)&&(Ve=n.TEXTURE_2D_ARRAY),se.isData3DTexture&&(Ve=n.TEXTURE_3D);const Te=de(Se,se),ze=se.source;t.bindTexture(Ve,Se.__webglTexture,n.TEXTURE0+He);const Nt=i.get(ze);if(ze.version!==Nt.__version||Te===!0){t.activeTexture(n.TEXTURE0+He);const Dt=qi.getPrimaries(qi.workingColorSpace),Ft=se.colorSpace===Ef?null:qi.getPrimaries(se.colorSpace),Xt=se.colorSpace===Ef||Dt===Ft?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,se.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,se.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Xt);let gt=w(se.image,!1,a.maxTextureSize);gt=At(se,gt);const Ot=s.convert(se.format,se.colorSpace),Wt=s.convert(se.type);let Ae=C(se.internalFormat,Ot,Wt,se.colorSpace,se.isVideoTexture);ue(Ve,se);let Xe;const Mt=se.mipmaps,Ne=se.isVideoTexture!==!0,Qe=Nt.__version===void 0||Te===!0,bt=ze.dataReady,kt=P(se,gt);if(se.isDepthTexture)Ae=D(se.format===bv,se.type),Qe&&(Ne?t.texStorage2D(n.TEXTURE_2D,1,Ae,gt.width,gt.height):t.texImage2D(n.TEXTURE_2D,0,Ae,gt.width,gt.height,0,Ot,Wt,null));else if(se.isDataTexture)if(Mt.length>0){Ne&&Qe&&t.texStorage2D(n.TEXTURE_2D,kt,Ae,Mt[0].width,Mt[0].height);for(let jt=0,xt=Mt.length;jt<xt;jt++)Xe=Mt[jt],Ne?bt&&t.texSubImage2D(n.TEXTURE_2D,jt,0,0,Xe.width,Xe.height,Ot,Wt,Xe.data):t.texImage2D(n.TEXTURE_2D,jt,Ae,Xe.width,Xe.height,0,Ot,Wt,Xe.data);se.generateMipmaps=!1}else Ne?(Qe&&t.texStorage2D(n.TEXTURE_2D,kt,Ae,gt.width,gt.height),bt&&Me(se,gt,Ot,Wt)):t.texImage2D(n.TEXTURE_2D,0,Ae,gt.width,gt.height,0,Ot,Wt,gt.data);else if(se.isCompressedTexture)if(se.isCompressedArrayTexture){Ne&&Qe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,kt,Ae,Mt[0].width,Mt[0].height,gt.depth);for(let jt=0,xt=Mt.length;jt<xt;jt++)if(Xe=Mt[jt],se.format!==Vs)if(Ot!==null)if(Ne){if(bt)if(se.layerUpdates.size>0){const Vt=wT(Xe.width,Xe.height,se.format,se.type);for(const $t of se.layerUpdates){const Xn=Xe.data.subarray($t*Vt/Xe.data.BYTES_PER_ELEMENT,($t+1)*Vt/Xe.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,jt,0,0,$t,Xe.width,Xe.height,1,Ot,Xn)}se.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,jt,0,0,0,Xe.width,Xe.height,gt.depth,Ot,Xe.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,jt,Ae,Xe.width,Xe.height,gt.depth,0,Xe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ne?bt&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,jt,0,0,0,Xe.width,Xe.height,gt.depth,Ot,Wt,Xe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,jt,Ae,Xe.width,Xe.height,gt.depth,0,Ot,Wt,Xe.data)}else{Ne&&Qe&&t.texStorage2D(n.TEXTURE_2D,kt,Ae,Mt[0].width,Mt[0].height);for(let jt=0,xt=Mt.length;jt<xt;jt++)Xe=Mt[jt],se.format!==Vs?Ot!==null?Ne?bt&&t.compressedTexSubImage2D(n.TEXTURE_2D,jt,0,0,Xe.width,Xe.height,Ot,Xe.data):t.compressedTexImage2D(n.TEXTURE_2D,jt,Ae,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ne?bt&&t.texSubImage2D(n.TEXTURE_2D,jt,0,0,Xe.width,Xe.height,Ot,Wt,Xe.data):t.texImage2D(n.TEXTURE_2D,jt,Ae,Xe.width,Xe.height,0,Ot,Wt,Xe.data)}else if(se.isDataArrayTexture)if(Ne){if(Qe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,kt,Ae,gt.width,gt.height,gt.depth),bt)if(se.layerUpdates.size>0){const jt=wT(gt.width,gt.height,se.format,se.type);for(const xt of se.layerUpdates){const Vt=gt.data.subarray(xt*jt/gt.data.BYTES_PER_ELEMENT,(xt+1)*jt/gt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,xt,gt.width,gt.height,1,Ot,Wt,Vt)}se.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,gt.width,gt.height,gt.depth,Ot,Wt,gt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ae,gt.width,gt.height,gt.depth,0,Ot,Wt,gt.data);else if(se.isData3DTexture)Ne?(Qe&&t.texStorage3D(n.TEXTURE_3D,kt,Ae,gt.width,gt.height,gt.depth),bt&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,gt.width,gt.height,gt.depth,Ot,Wt,gt.data)):t.texImage3D(n.TEXTURE_3D,0,Ae,gt.width,gt.height,gt.depth,0,Ot,Wt,gt.data);else if(se.isFramebufferTexture){if(Qe)if(Ne)t.texStorage2D(n.TEXTURE_2D,kt,Ae,gt.width,gt.height);else{let jt=gt.width,xt=gt.height;for(let Vt=0;Vt<kt;Vt++)t.texImage2D(n.TEXTURE_2D,Vt,Ae,jt,xt,0,Ot,Wt,null),jt>>=1,xt>>=1}}else if(Mt.length>0){if(Ne&&Qe){const jt=Pt(Mt[0]);t.texStorage2D(n.TEXTURE_2D,kt,Ae,jt.width,jt.height)}for(let jt=0,xt=Mt.length;jt<xt;jt++)Xe=Mt[jt],Ne?bt&&t.texSubImage2D(n.TEXTURE_2D,jt,0,0,Ot,Wt,Xe):t.texImage2D(n.TEXTURE_2D,jt,Ae,Ot,Wt,Xe);se.generateMipmaps=!1}else if(Ne){if(Qe){const jt=Pt(gt);t.texStorage2D(n.TEXTURE_2D,kt,Ae,jt.width,jt.height)}bt&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ot,Wt,gt)}else t.texImage2D(n.TEXTURE_2D,0,Ae,Ot,Wt,gt);M(se)&&E(Ve),Nt.__version=ze.version,se.onUpdate&&se.onUpdate(se)}Se.__version=se.version}function ae(Se,se,He){if(se.image.length!==6)return;const Ve=de(Se,se),Te=se.source;t.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture,n.TEXTURE0+He);const ze=i.get(Te);if(Te.version!==ze.__version||Ve===!0){t.activeTexture(n.TEXTURE0+He);const Nt=qi.getPrimaries(qi.workingColorSpace),Dt=se.colorSpace===Ef?null:qi.getPrimaries(se.colorSpace),Ft=se.colorSpace===Ef||Nt===Dt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,se.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,se.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ft);const Xt=se.isCompressedTexture||se.image[0].isCompressedTexture,gt=se.image[0]&&se.image[0].isDataTexture,Ot=[];for(let xt=0;xt<6;xt++)!Xt&&!gt?Ot[xt]=w(se.image[xt],!0,a.maxCubemapSize):Ot[xt]=gt?se.image[xt].image:se.image[xt],Ot[xt]=At(se,Ot[xt]);const Wt=Ot[0],Ae=s.convert(se.format,se.colorSpace),Xe=s.convert(se.type),Mt=C(se.internalFormat,Ae,Xe,se.colorSpace),Ne=se.isVideoTexture!==!0,Qe=ze.__version===void 0||Ve===!0,bt=Te.dataReady;let kt=P(se,Wt);ue(n.TEXTURE_CUBE_MAP,se);let jt;if(Xt){Ne&&Qe&&t.texStorage2D(n.TEXTURE_CUBE_MAP,kt,Mt,Wt.width,Wt.height);for(let xt=0;xt<6;xt++){jt=Ot[xt].mipmaps;for(let Vt=0;Vt<jt.length;Vt++){const $t=jt[Vt];se.format!==Vs?Ae!==null?Ne?bt&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Vt,0,0,$t.width,$t.height,Ae,$t.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Vt,Mt,$t.width,$t.height,0,$t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ne?bt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Vt,0,0,$t.width,$t.height,Ae,Xe,$t.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Vt,Mt,$t.width,$t.height,0,Ae,Xe,$t.data)}}}else{if(jt=se.mipmaps,Ne&&Qe){jt.length>0&&kt++;const xt=Pt(Ot[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,kt,Mt,xt.width,xt.height)}for(let xt=0;xt<6;xt++)if(gt){Ne?bt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,0,0,Ot[xt].width,Ot[xt].height,Ae,Xe,Ot[xt].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,Mt,Ot[xt].width,Ot[xt].height,0,Ae,Xe,Ot[xt].data);for(let Vt=0;Vt<jt.length;Vt++){const Xn=jt[Vt].image[xt].image;Ne?bt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Vt+1,0,0,Xn.width,Xn.height,Ae,Xe,Xn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Vt+1,Mt,Xn.width,Xn.height,0,Ae,Xe,Xn.data)}}else{Ne?bt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,0,0,Ae,Xe,Ot[xt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,Mt,Ae,Xe,Ot[xt]);for(let Vt=0;Vt<jt.length;Vt++){const $t=jt[Vt];Ne?bt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Vt+1,0,0,Ae,Xe,$t.image[xt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Vt+1,Mt,Ae,Xe,$t.image[xt])}}}M(se)&&E(n.TEXTURE_CUBE_MAP),ze.__version=Te.version,se.onUpdate&&se.onUpdate(se)}Se.__version=se.version}function _e(Se,se,He,Ve,Te,ze){const Nt=s.convert(He.format,He.colorSpace),Dt=s.convert(He.type),Ft=C(He.internalFormat,Nt,Dt,He.colorSpace),Xt=i.get(se),gt=i.get(He);if(gt.__renderTarget=se,!Xt.__hasExternalTextures){const Ot=Math.max(1,se.width>>ze),Wt=Math.max(1,se.height>>ze);Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY?t.texImage3D(Te,ze,Ft,Ot,Wt,se.depth,0,Nt,Dt,null):t.texImage2D(Te,ze,Ft,Ot,Wt,0,Nt,Dt,null)}t.bindFramebuffer(n.FRAMEBUFFER,Se),Et(se)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ve,Te,gt.__webglTexture,0,Ie(se)):(Te===n.TEXTURE_2D||Te>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ve,Te,gt.__webglTexture,ze),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ke(Se,se,He){if(n.bindRenderbuffer(n.RENDERBUFFER,Se),se.depthBuffer){const Ve=se.depthTexture,Te=Ve&&Ve.isDepthTexture?Ve.type:null,ze=D(se.stencilBuffer,Te),Nt=se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Dt=Ie(se);Et(se)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Dt,ze,se.width,se.height):He?n.renderbufferStorageMultisample(n.RENDERBUFFER,Dt,ze,se.width,se.height):n.renderbufferStorage(n.RENDERBUFFER,ze,se.width,se.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Nt,n.RENDERBUFFER,Se)}else{const Ve=se.textures;for(let Te=0;Te<Ve.length;Te++){const ze=Ve[Te],Nt=s.convert(ze.format,ze.colorSpace),Dt=s.convert(ze.type),Ft=C(ze.internalFormat,Nt,Dt,ze.colorSpace),Xt=Ie(se);He&&Et(se)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Xt,Ft,se.width,se.height):Et(se)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Xt,Ft,se.width,se.height):n.renderbufferStorage(n.RENDERBUFFER,Ft,se.width,se.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ge(Se,se){if(se&&se.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,Se),!(se.depthTexture&&se.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ve=i.get(se.depthTexture);Ve.__renderTarget=se,(!Ve.__webglTexture||se.depthTexture.image.width!==se.width||se.depthTexture.image.height!==se.height)&&(se.depthTexture.image.width=se.width,se.depthTexture.image.height=se.height,se.depthTexture.needsUpdate=!0),oe(se.depthTexture,0);const Te=Ve.__webglTexture,ze=Ie(se);if(se.depthTexture.format===xv)Et(se)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Te,0,ze):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Te,0);else if(se.depthTexture.format===bv)Et(se)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Te,0,ze):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function st(Se){const se=i.get(Se),He=Se.isWebGLCubeRenderTarget===!0;if(se.__boundDepthTexture!==Se.depthTexture){const Ve=Se.depthTexture;if(se.__depthDisposeCallback&&se.__depthDisposeCallback(),Ve){const Te=()=>{delete se.__boundDepthTexture,delete se.__depthDisposeCallback,Ve.removeEventListener("dispose",Te)};Ve.addEventListener("dispose",Te),se.__depthDisposeCallback=Te}se.__boundDepthTexture=Ve}if(Se.depthTexture&&!se.__autoAllocateDepthBuffer){if(He)throw new Error("target.depthTexture not supported in Cube render targets");const Ve=Se.texture.mipmaps;Ve&&Ve.length>0?Ge(se.__webglFramebuffer[0],Se):Ge(se.__webglFramebuffer,Se)}else if(He){se.__webglDepthbuffer=[];for(let Ve=0;Ve<6;Ve++)if(t.bindFramebuffer(n.FRAMEBUFFER,se.__webglFramebuffer[Ve]),se.__webglDepthbuffer[Ve]===void 0)se.__webglDepthbuffer[Ve]=n.createRenderbuffer(),Ke(se.__webglDepthbuffer[Ve],Se,!1);else{const Te=Se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ze=se.__webglDepthbuffer[Ve];n.bindRenderbuffer(n.RENDERBUFFER,ze),n.framebufferRenderbuffer(n.FRAMEBUFFER,Te,n.RENDERBUFFER,ze)}}else{const Ve=Se.texture.mipmaps;if(Ve&&Ve.length>0?t.bindFramebuffer(n.FRAMEBUFFER,se.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,se.__webglFramebuffer),se.__webglDepthbuffer===void 0)se.__webglDepthbuffer=n.createRenderbuffer(),Ke(se.__webglDepthbuffer,Se,!1);else{const Te=Se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ze=se.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ze),n.framebufferRenderbuffer(n.FRAMEBUFFER,Te,n.RENDERBUFFER,ze)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function ft(Se,se,He){const Ve=i.get(Se);se!==void 0&&_e(Ve.__webglFramebuffer,Se,Se.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),He!==void 0&&st(Se)}function Pe(Se){const se=Se.texture,He=i.get(Se),Ve=i.get(se);Se.addEventListener("dispose",F);const Te=Se.textures,ze=Se.isWebGLCubeRenderTarget===!0,Nt=Te.length>1;if(Nt||(Ve.__webglTexture===void 0&&(Ve.__webglTexture=n.createTexture()),Ve.__version=se.version,r.memory.textures++),ze){He.__webglFramebuffer=[];for(let Dt=0;Dt<6;Dt++)if(se.mipmaps&&se.mipmaps.length>0){He.__webglFramebuffer[Dt]=[];for(let Ft=0;Ft<se.mipmaps.length;Ft++)He.__webglFramebuffer[Dt][Ft]=n.createFramebuffer()}else He.__webglFramebuffer[Dt]=n.createFramebuffer()}else{if(se.mipmaps&&se.mipmaps.length>0){He.__webglFramebuffer=[];for(let Dt=0;Dt<se.mipmaps.length;Dt++)He.__webglFramebuffer[Dt]=n.createFramebuffer()}else He.__webglFramebuffer=n.createFramebuffer();if(Nt)for(let Dt=0,Ft=Te.length;Dt<Ft;Dt++){const Xt=i.get(Te[Dt]);Xt.__webglTexture===void 0&&(Xt.__webglTexture=n.createTexture(),r.memory.textures++)}if(Se.samples>0&&Et(Se)===!1){He.__webglMultisampledFramebuffer=n.createFramebuffer(),He.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer);for(let Dt=0;Dt<Te.length;Dt++){const Ft=Te[Dt];He.__webglColorRenderbuffer[Dt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,He.__webglColorRenderbuffer[Dt]);const Xt=s.convert(Ft.format,Ft.colorSpace),gt=s.convert(Ft.type),Ot=C(Ft.internalFormat,Xt,gt,Ft.colorSpace,Se.isXRRenderTarget===!0),Wt=Ie(Se);n.renderbufferStorageMultisample(n.RENDERBUFFER,Wt,Ot,Se.width,Se.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Dt,n.RENDERBUFFER,He.__webglColorRenderbuffer[Dt])}n.bindRenderbuffer(n.RENDERBUFFER,null),Se.depthBuffer&&(He.__webglDepthRenderbuffer=n.createRenderbuffer(),Ke(He.__webglDepthRenderbuffer,Se,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ze){t.bindTexture(n.TEXTURE_CUBE_MAP,Ve.__webglTexture),ue(n.TEXTURE_CUBE_MAP,se);for(let Dt=0;Dt<6;Dt++)if(se.mipmaps&&se.mipmaps.length>0)for(let Ft=0;Ft<se.mipmaps.length;Ft++)_e(He.__webglFramebuffer[Dt][Ft],Se,se,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,Ft);else _e(He.__webglFramebuffer[Dt],Se,se,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,0);M(se)&&E(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Nt){for(let Dt=0,Ft=Te.length;Dt<Ft;Dt++){const Xt=Te[Dt],gt=i.get(Xt);t.bindTexture(n.TEXTURE_2D,gt.__webglTexture),ue(n.TEXTURE_2D,Xt),_e(He.__webglFramebuffer,Se,Xt,n.COLOR_ATTACHMENT0+Dt,n.TEXTURE_2D,0),M(Xt)&&E(n.TEXTURE_2D)}t.unbindTexture()}else{let Dt=n.TEXTURE_2D;if((Se.isWebGL3DRenderTarget||Se.isWebGLArrayRenderTarget)&&(Dt=Se.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Dt,Ve.__webglTexture),ue(Dt,se),se.mipmaps&&se.mipmaps.length>0)for(let Ft=0;Ft<se.mipmaps.length;Ft++)_e(He.__webglFramebuffer[Ft],Se,se,n.COLOR_ATTACHMENT0,Dt,Ft);else _e(He.__webglFramebuffer,Se,se,n.COLOR_ATTACHMENT0,Dt,0);M(se)&&E(Dt),t.unbindTexture()}Se.depthBuffer&&st(Se)}function he(Se){const se=Se.textures;for(let He=0,Ve=se.length;He<Ve;He++){const Te=se[He];if(M(Te)){const ze=T(Se),Nt=i.get(Te).__webglTexture;t.bindTexture(ze,Nt),E(ze),t.unbindTexture()}}}const ke=[],Ee=[];function Le(Se){if(Se.samples>0){if(Et(Se)===!1){const se=Se.textures,He=Se.width,Ve=Se.height;let Te=n.COLOR_BUFFER_BIT;const ze=Se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Nt=i.get(Se),Dt=se.length>1;if(Dt)for(let Xt=0;Xt<se.length;Xt++)t.bindFramebuffer(n.FRAMEBUFFER,Nt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Nt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Nt.__webglMultisampledFramebuffer);const Ft=Se.texture.mipmaps;Ft&&Ft.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Nt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Nt.__webglFramebuffer);for(let Xt=0;Xt<se.length;Xt++){if(Se.resolveDepthBuffer&&(Se.depthBuffer&&(Te|=n.DEPTH_BUFFER_BIT),Se.stencilBuffer&&Se.resolveStencilBuffer&&(Te|=n.STENCIL_BUFFER_BIT)),Dt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Nt.__webglColorRenderbuffer[Xt]);const gt=i.get(se[Xt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,gt,0)}n.blitFramebuffer(0,0,He,Ve,0,0,He,Ve,Te,n.NEAREST),d===!0&&(ke.length=0,Ee.length=0,ke.push(n.COLOR_ATTACHMENT0+Xt),Se.depthBuffer&&Se.resolveDepthBuffer===!1&&(ke.push(ze),Ee.push(ze),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Ee)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ke))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Dt)for(let Xt=0;Xt<se.length;Xt++){t.bindFramebuffer(n.FRAMEBUFFER,Nt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xt,n.RENDERBUFFER,Nt.__webglColorRenderbuffer[Xt]);const gt=i.get(se[Xt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Nt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xt,n.TEXTURE_2D,gt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Nt.__webglMultisampledFramebuffer)}else if(Se.depthBuffer&&Se.resolveDepthBuffer===!1&&d){const se=Se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[se])}}}function Ie(Se){return Math.min(a.maxSamples,Se.samples)}function Et(Se){const se=i.get(Se);return Se.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&se.__useRenderToTexture!==!1}function ct(Se){const se=r.render.frame;g.get(Se)!==se&&(g.set(Se,se),Se.update())}function At(Se,se){const He=Se.colorSpace,Ve=Se.format,Te=Se.type;return Se.isCompressedTexture===!0||Se.isVideoTexture===!0||He!==fd&&He!==Ef&&(qi.getTransfer(He)===Ea?(Ve!==Vs||Te!==bl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",He)),se}function Pt(Se){return typeof HTMLImageElement<"u"&&Se instanceof HTMLImageElement?(f.width=Se.naturalWidth||Se.width,f.height=Se.naturalHeight||Se.height):typeof VideoFrame<"u"&&Se instanceof VideoFrame?(f.width=Se.displayWidth,f.height=Se.displayHeight):(f.width=Se.width,f.height=Se.height),f}this.allocateTextureUnit=J,this.resetTextureUnits=Q,this.setTexture2D=oe,this.setTexture2DArray=$,this.setTexture3D=X,this.setTextureCube=G,this.rebindTextures=ft,this.setupRenderTarget=Pe,this.updateRenderTargetMipmap=he,this.updateMultisampleRenderTarget=Le,this.setupDepthRenderbuffer=st,this.setupFrameBufferTexture=_e,this.useMultisampledRTT=Et}function Dj(n,e){function t(i,a=Ef){let s;const r=qi.getTransfer(a);if(i===bl)return n.UNSIGNED_BYTE;if(i===s2)return n.UNSIGNED_SHORT_4_4_4_4;if(i===r2)return n.UNSIGNED_SHORT_5_5_5_1;if(i===D3)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===i2)return n.BYTE;if(i===a2)return n.SHORT;if(i===vv)return n.UNSIGNED_SHORT;if(i===w1)return n.INT;if(i===bh)return n.UNSIGNED_INT;if(i===bs)return n.FLOAT;if(i===Jr)return n.HALF_FLOAT;if(i===O3)return n.ALPHA;if(i===j3)return n.RGB;if(i===Vs)return n.RGBA;if(i===xv)return n.DEPTH_COMPONENT;if(i===bv)return n.DEPTH_STENCIL;if(i===M1)return n.RED;if(i===T1)return n.RED_INTEGER;if(i===P3)return n.RG;if(i===o2)return n.RG_INTEGER;if(i===l2)return n.RGBA_INTEGER;if(i===Rx||i===Dx||i===Ox||i===jx)if(r===Ea)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Rx)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Dx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Ox)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===jx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Rx)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Dx)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ox)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===jx)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Q_||i===J_||i===$_||i===eS)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Q_)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===J_)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===$_)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===eS)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===tS||i===nS||i===iS)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===tS||i===nS)return r===Ea?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===iS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===aS||i===sS||i===rS||i===oS||i===lS||i===cS||i===uS||i===dS||i===hS||i===fS||i===pS||i===mS||i===gS||i===vS)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===aS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===sS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===rS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===oS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===lS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===cS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===uS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===dS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===hS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===fS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===pS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===mS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===gS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===vS)return r===Ea?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Px||i===yS||i===xS)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Px)return r===Ea?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===yS)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===xS)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===U3||i===bS||i===_S||i===SS)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Px)return s.COMPRESSED_RED_RGTC1_EXT;if(i===bS)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===_S)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===SS)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===yv?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const qK=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,XK=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class YK{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const a=new Pa,s=e.properties.get(a);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=a}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new So({vertexShader:qK,fragmentShader:XK,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new us(new If(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WK extends wh{constructor(e,t){super();const i=this;let a=null,s=1,r=null,l="local-floor",d=1,f=null,g=null,x=null,b=null,_=null,S=null;const w=new YK,M=t.getContextAttributes();let E=null,T=null;const C=[],D=[],P=new wt;let B=null;const F=new Gs;F.viewport=new $i;const j=new Gs;j.viewport=new $i;const O=[F,j],I=new _j;let W=null,Q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let Me=C[ie];return Me===void 0&&(Me=new M_,C[ie]=Me),Me.getTargetRaySpace()},this.getControllerGrip=function(ie){let Me=C[ie];return Me===void 0&&(Me=new M_,C[ie]=Me),Me.getGripSpace()},this.getHand=function(ie){let Me=C[ie];return Me===void 0&&(Me=new M_,C[ie]=Me),Me.getHandSpace()};function J(ie){const Me=D.indexOf(ie.inputSource);if(Me===-1)return;const ye=C[Me];ye!==void 0&&(ye.update(ie.inputSource,ie.frame,f||r),ye.dispatchEvent({type:ie.type,data:ie.inputSource}))}function te(){a.removeEventListener("select",J),a.removeEventListener("selectstart",J),a.removeEventListener("selectend",J),a.removeEventListener("squeeze",J),a.removeEventListener("squeezestart",J),a.removeEventListener("squeezeend",J),a.removeEventListener("end",te),a.removeEventListener("inputsourceschange",oe);for(let ie=0;ie<C.length;ie++){const Me=D[ie];Me!==null&&(D[ie]=null,C[ie].disconnect(Me))}W=null,Q=null,w.reset(),e.setRenderTarget(E),_=null,b=null,x=null,a=null,T=null,de.stop(),i.isPresenting=!1,e.setPixelRatio(B),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){s=ie,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){l=ie,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||r},this.setReferenceSpace=function(ie){f=ie},this.getBaseLayer=function(){return b!==null?b:_},this.getBinding=function(){return x},this.getFrame=function(){return S},this.getSession=function(){return a},this.setSession=async function(ie){if(a=ie,a!==null){if(E=e.getRenderTarget(),a.addEventListener("select",J),a.addEventListener("selectstart",J),a.addEventListener("selectend",J),a.addEventListener("squeeze",J),a.addEventListener("squeezestart",J),a.addEventListener("squeezeend",J),a.addEventListener("end",te),a.addEventListener("inputsourceschange",oe),M.xrCompatible!==!0&&await t.makeXRCompatible(),B=e.getPixelRatio(),e.getSize(P),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ye=null,ae=null,_e=null;M.depth&&(_e=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ye=M.stencil?bv:xv,ae=M.stencil?yv:bh);const Ke={colorFormat:t.RGBA8,depthFormat:_e,scaleFactor:s};x=new XRWebGLBinding(a,t),b=x.createProjectionLayer(Ke),a.updateRenderState({layers:[b]}),e.setPixelRatio(1),e.setSize(b.textureWidth,b.textureHeight,!1),T=new sc(b.textureWidth,b.textureHeight,{format:Vs,type:bl,depthTexture:new Y3(b.textureWidth,b.textureHeight,ae,void 0,void 0,void 0,void 0,void 0,void 0,ye),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}else{const ye={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:s};_=new XRWebGLLayer(a,t,ye),a.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),T=new sc(_.framebufferWidth,_.framebufferHeight,{format:Vs,type:bl,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(d),f=null,r=await a.requestReferenceSpace(l),de.setContext(a),de.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function oe(ie){for(let Me=0;Me<ie.removed.length;Me++){const ye=ie.removed[Me],ae=D.indexOf(ye);ae>=0&&(D[ae]=null,C[ae].disconnect(ye))}for(let Me=0;Me<ie.added.length;Me++){const ye=ie.added[Me];let ae=D.indexOf(ye);if(ae===-1){for(let Ke=0;Ke<C.length;Ke++)if(Ke>=D.length){D.push(ye),ae=Ke;break}else if(D[Ke]===null){D[Ke]=ye,ae=Ke;break}if(ae===-1)break}const _e=C[ae];_e&&_e.connect(ye)}}const $=new be,X=new be;function G(ie,Me,ye){$.setFromMatrixPosition(Me.matrixWorld),X.setFromMatrixPosition(ye.matrixWorld);const ae=$.distanceTo(X),_e=Me.projectionMatrix.elements,Ke=ye.projectionMatrix.elements,Ge=_e[14]/(_e[10]-1),st=_e[14]/(_e[10]+1),ft=(_e[9]+1)/_e[5],Pe=(_e[9]-1)/_e[5],he=(_e[8]-1)/_e[0],ke=(Ke[8]+1)/Ke[0],Ee=Ge*he,Le=Ge*ke,Ie=ae/(-he+ke),Et=Ie*-he;if(Me.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(Et),ie.translateZ(Ie),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),_e[10]===-1)ie.projectionMatrix.copy(Me.projectionMatrix),ie.projectionMatrixInverse.copy(Me.projectionMatrixInverse);else{const ct=Ge+Ie,At=st+Ie,Pt=Ee-Et,Se=Le+(ae-Et),se=ft*st/At*ct,He=Pe*st/At*ct;ie.projectionMatrix.makePerspective(Pt,Se,se,He,ct,At),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}function ee(ie,Me){Me===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(Me.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(a===null)return;let Me=ie.near,ye=ie.far;w.texture!==null&&(w.depthNear>0&&(Me=w.depthNear),w.depthFar>0&&(ye=w.depthFar)),I.near=j.near=F.near=Me,I.far=j.far=F.far=ye,(W!==I.near||Q!==I.far)&&(a.updateRenderState({depthNear:I.near,depthFar:I.far}),W=I.near,Q=I.far),F.layers.mask=ie.layers.mask|2,j.layers.mask=ie.layers.mask|4,I.layers.mask=F.layers.mask|j.layers.mask;const ae=ie.parent,_e=I.cameras;ee(I,ae);for(let Ke=0;Ke<_e.length;Ke++)ee(_e[Ke],ae);_e.length===2?G(I,F,j):I.projectionMatrix.copy(F.projectionMatrix),Y(ie,I,ae)};function Y(ie,Me,ye){ye===null?ie.matrix.copy(Me.matrixWorld):(ie.matrix.copy(ye.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(Me.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(Me.projectionMatrix),ie.projectionMatrixInverse.copy(Me.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=_v*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(b===null&&_===null))return d},this.setFoveation=function(ie){d=ie,b!==null&&(b.fixedFoveation=ie),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=ie)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(I)};let ne=null;function ue(ie,Me){if(g=Me.getViewerPose(f||r),S=Me,g!==null){const ye=g.views;_!==null&&(e.setRenderTargetFramebuffer(T,_.framebuffer),e.setRenderTarget(T));let ae=!1;ye.length!==I.cameras.length&&(I.cameras.length=0,ae=!0);for(let Ge=0;Ge<ye.length;Ge++){const st=ye[Ge];let ft=null;if(_!==null)ft=_.getViewport(st);else{const he=x.getViewSubImage(b,st);ft=he.viewport,Ge===0&&(e.setRenderTargetTextures(T,he.colorTexture,he.depthStencilTexture),e.setRenderTarget(T))}let Pe=O[Ge];Pe===void 0&&(Pe=new Gs,Pe.layers.enable(Ge),Pe.viewport=new $i,O[Ge]=Pe),Pe.matrix.fromArray(st.transform.matrix),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.projectionMatrix.fromArray(st.projectionMatrix),Pe.projectionMatrixInverse.copy(Pe.projectionMatrix).invert(),Pe.viewport.set(ft.x,ft.y,ft.width,ft.height),Ge===0&&(I.matrix.copy(Pe.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),ae===!0&&I.cameras.push(Pe)}const _e=a.enabledFeatures;if(_e&&_e.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&x){const Ge=x.getDepthInformation(ye[0]);Ge&&Ge.isValid&&Ge.texture&&w.init(e,Ge,a.renderState)}}for(let ye=0;ye<C.length;ye++){const ae=D[ye],_e=C[ye];ae!==null&&_e!==void 0&&_e.update(ae,Me,f||r)}ne&&ne(ie,Me),Me.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Me}),S=null}const de=new Tj;de.setAnimationLoop(ue),this.setAnimationLoop=function(ie){ne=ie},this.dispose=function(){}}}const Km=new Wc,KK=new Fn;function ZK(n,e){function t(M,E){M.matrixAutoUpdate===!0&&M.updateMatrix(),E.value.copy(M.matrix)}function i(M,E){E.color.getRGB(M.fogColor.value,CO(n)),E.isFog?(M.fogNear.value=E.near,M.fogFar.value=E.far):E.isFogExp2&&(M.fogDensity.value=E.density)}function a(M,E,T,C,D){E.isMeshBasicMaterial||E.isMeshLambertMaterial?s(M,E):E.isMeshToonMaterial?(s(M,E),x(M,E)):E.isMeshPhongMaterial?(s(M,E),g(M,E)):E.isMeshStandardMaterial?(s(M,E),b(M,E),E.isMeshPhysicalMaterial&&_(M,E,D)):E.isMeshMatcapMaterial?(s(M,E),S(M,E)):E.isMeshDepthMaterial?s(M,E):E.isMeshDistanceMaterial?(s(M,E),w(M,E)):E.isMeshNormalMaterial?s(M,E):E.isLineBasicMaterial?(r(M,E),E.isLineDashedMaterial&&l(M,E)):E.isPointsMaterial?d(M,E,T,C):E.isSpriteMaterial?f(M,E):E.isShadowMaterial?(M.color.value.copy(E.color),M.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function s(M,E){M.opacity.value=E.opacity,E.color&&M.diffuse.value.copy(E.color),E.emissive&&M.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(M.map.value=E.map,t(E.map,M.mapTransform)),E.alphaMap&&(M.alphaMap.value=E.alphaMap,t(E.alphaMap,M.alphaMapTransform)),E.bumpMap&&(M.bumpMap.value=E.bumpMap,t(E.bumpMap,M.bumpMapTransform),M.bumpScale.value=E.bumpScale,E.side===Wo&&(M.bumpScale.value*=-1)),E.normalMap&&(M.normalMap.value=E.normalMap,t(E.normalMap,M.normalMapTransform),M.normalScale.value.copy(E.normalScale),E.side===Wo&&M.normalScale.value.negate()),E.displacementMap&&(M.displacementMap.value=E.displacementMap,t(E.displacementMap,M.displacementMapTransform),M.displacementScale.value=E.displacementScale,M.displacementBias.value=E.displacementBias),E.emissiveMap&&(M.emissiveMap.value=E.emissiveMap,t(E.emissiveMap,M.emissiveMapTransform)),E.specularMap&&(M.specularMap.value=E.specularMap,t(E.specularMap,M.specularMapTransform)),E.alphaTest>0&&(M.alphaTest.value=E.alphaTest);const T=e.get(E),C=T.envMap,D=T.envMapRotation;C&&(M.envMap.value=C,Km.copy(D),Km.x*=-1,Km.y*=-1,Km.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(Km.y*=-1,Km.z*=-1),M.envMapRotation.value.setFromMatrix4(KK.makeRotationFromEuler(Km)),M.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=E.reflectivity,M.ior.value=E.ior,M.refractionRatio.value=E.refractionRatio),E.lightMap&&(M.lightMap.value=E.lightMap,M.lightMapIntensity.value=E.lightMapIntensity,t(E.lightMap,M.lightMapTransform)),E.aoMap&&(M.aoMap.value=E.aoMap,M.aoMapIntensity.value=E.aoMapIntensity,t(E.aoMap,M.aoMapTransform))}function r(M,E){M.diffuse.value.copy(E.color),M.opacity.value=E.opacity,E.map&&(M.map.value=E.map,t(E.map,M.mapTransform))}function l(M,E){M.dashSize.value=E.dashSize,M.totalSize.value=E.dashSize+E.gapSize,M.scale.value=E.scale}function d(M,E,T,C){M.diffuse.value.copy(E.color),M.opacity.value=E.opacity,M.size.value=E.size*T,M.scale.value=C*.5,E.map&&(M.map.value=E.map,t(E.map,M.uvTransform)),E.alphaMap&&(M.alphaMap.value=E.alphaMap,t(E.alphaMap,M.alphaMapTransform)),E.alphaTest>0&&(M.alphaTest.value=E.alphaTest)}function f(M,E){M.diffuse.value.copy(E.color),M.opacity.value=E.opacity,M.rotation.value=E.rotation,E.map&&(M.map.value=E.map,t(E.map,M.mapTransform)),E.alphaMap&&(M.alphaMap.value=E.alphaMap,t(E.alphaMap,M.alphaMapTransform)),E.alphaTest>0&&(M.alphaTest.value=E.alphaTest)}function g(M,E){M.specular.value.copy(E.specular),M.shininess.value=Math.max(E.shininess,1e-4)}function x(M,E){E.gradientMap&&(M.gradientMap.value=E.gradientMap)}function b(M,E){M.metalness.value=E.metalness,E.metalnessMap&&(M.metalnessMap.value=E.metalnessMap,t(E.metalnessMap,M.metalnessMapTransform)),M.roughness.value=E.roughness,E.roughnessMap&&(M.roughnessMap.value=E.roughnessMap,t(E.roughnessMap,M.roughnessMapTransform)),E.envMap&&(M.envMapIntensity.value=E.envMapIntensity)}function _(M,E,T){M.ior.value=E.ior,E.sheen>0&&(M.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),M.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(M.sheenColorMap.value=E.sheenColorMap,t(E.sheenColorMap,M.sheenColorMapTransform)),E.sheenRoughnessMap&&(M.sheenRoughnessMap.value=E.sheenRoughnessMap,t(E.sheenRoughnessMap,M.sheenRoughnessMapTransform))),E.clearcoat>0&&(M.clearcoat.value=E.clearcoat,M.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(M.clearcoatMap.value=E.clearcoatMap,t(E.clearcoatMap,M.clearcoatMapTransform)),E.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap,t(E.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),E.clearcoatNormalMap&&(M.clearcoatNormalMap.value=E.clearcoatNormalMap,t(E.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),E.side===Wo&&M.clearcoatNormalScale.value.negate())),E.dispersion>0&&(M.dispersion.value=E.dispersion),E.iridescence>0&&(M.iridescence.value=E.iridescence,M.iridescenceIOR.value=E.iridescenceIOR,M.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(M.iridescenceMap.value=E.iridescenceMap,t(E.iridescenceMap,M.iridescenceMapTransform)),E.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=E.iridescenceThicknessMap,t(E.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),E.transmission>0&&(M.transmission.value=E.transmission,M.transmissionSamplerMap.value=T.texture,M.transmissionSamplerSize.value.set(T.width,T.height),E.transmissionMap&&(M.transmissionMap.value=E.transmissionMap,t(E.transmissionMap,M.transmissionMapTransform)),M.thickness.value=E.thickness,E.thicknessMap&&(M.thicknessMap.value=E.thicknessMap,t(E.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=E.attenuationDistance,M.attenuationColor.value.copy(E.attenuationColor)),E.anisotropy>0&&(M.anisotropyVector.value.set(E.anisotropy*Math.cos(E.anisotropyRotation),E.anisotropy*Math.sin(E.anisotropyRotation)),E.anisotropyMap&&(M.anisotropyMap.value=E.anisotropyMap,t(E.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=E.specularIntensity,M.specularColor.value.copy(E.specularColor),E.specularColorMap&&(M.specularColorMap.value=E.specularColorMap,t(E.specularColorMap,M.specularColorMapTransform)),E.specularIntensityMap&&(M.specularIntensityMap.value=E.specularIntensityMap,t(E.specularIntensityMap,M.specularIntensityMapTransform))}function S(M,E){E.matcap&&(M.matcap.value=E.matcap)}function w(M,E){const T=e.get(E).light;M.referencePosition.value.setFromMatrixPosition(T.matrixWorld),M.nearDistance.value=T.shadow.camera.near,M.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:a}}function QK(n,e,t,i){let a={},s={},r=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function d(T,C){const D=C.program;i.uniformBlockBinding(T,D)}function f(T,C){let D=a[T.id];D===void 0&&(S(T),D=g(T),a[T.id]=D,T.addEventListener("dispose",M));const P=C.program;i.updateUBOMapping(T,P);const B=e.render.frame;s[T.id]!==B&&(b(T),s[T.id]=B)}function g(T){const C=x();T.__bindingPointIndex=C;const D=n.createBuffer(),P=T.__size,B=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,D),n.bufferData(n.UNIFORM_BUFFER,P,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,C,D),D}function x(){for(let T=0;T<l;T++)if(r.indexOf(T)===-1)return r.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function b(T){const C=a[T.id],D=T.uniforms,P=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,C);for(let B=0,F=D.length;B<F;B++){const j=Array.isArray(D[B])?D[B]:[D[B]];for(let O=0,I=j.length;O<I;O++){const W=j[O];if(_(W,B,O,P)===!0){const Q=W.__offset,J=Array.isArray(W.value)?W.value:[W.value];let te=0;for(let oe=0;oe<J.length;oe++){const $=J[oe],X=w($);typeof $=="number"||typeof $=="boolean"?(W.__data[0]=$,n.bufferSubData(n.UNIFORM_BUFFER,Q+te,W.__data)):$.isMatrix3?(W.__data[0]=$.elements[0],W.__data[1]=$.elements[1],W.__data[2]=$.elements[2],W.__data[3]=0,W.__data[4]=$.elements[3],W.__data[5]=$.elements[4],W.__data[6]=$.elements[5],W.__data[7]=0,W.__data[8]=$.elements[6],W.__data[9]=$.elements[7],W.__data[10]=$.elements[8],W.__data[11]=0):($.toArray(W.__data,te),te+=X.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Q,W.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function _(T,C,D,P){const B=T.value,F=C+"_"+D;if(P[F]===void 0)return typeof B=="number"||typeof B=="boolean"?P[F]=B:P[F]=B.clone(),!0;{const j=P[F];if(typeof B=="number"||typeof B=="boolean"){if(j!==B)return P[F]=B,!0}else if(j.equals(B)===!1)return j.copy(B),!0}return!1}function S(T){const C=T.uniforms;let D=0;const P=16;for(let F=0,j=C.length;F<j;F++){const O=Array.isArray(C[F])?C[F]:[C[F]];for(let I=0,W=O.length;I<W;I++){const Q=O[I],J=Array.isArray(Q.value)?Q.value:[Q.value];for(let te=0,oe=J.length;te<oe;te++){const $=J[te],X=w($),G=D%P,ee=G%X.boundary,Y=G+ee;D+=ee,Y!==0&&P-Y<X.storage&&(D+=P-Y),Q.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),Q.__offset=D,D+=X.storage}}}const B=D%P;return B>0&&(D+=P-B),T.__size=D,T.__cache={},this}function w(T){const C={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(C.boundary=4,C.storage=4):T.isVector2?(C.boundary=8,C.storage=8):T.isVector3||T.isColor?(C.boundary=16,C.storage=12):T.isVector4?(C.boundary=16,C.storage=16):T.isMatrix3?(C.boundary=48,C.storage=48):T.isMatrix4?(C.boundary=64,C.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),C}function M(T){const C=T.target;C.removeEventListener("dispose",M);const D=r.indexOf(C.__bindingPointIndex);r.splice(D,1),n.deleteBuffer(a[C.id]),delete a[C.id],delete s[C.id]}function E(){for(const T in a)n.deleteBuffer(a[T]);r=[],a={},s={}}return{bind:d,update:f,dispose:E}}class pC{constructor(e={}){const{canvas:t=wO(),context:i=null,depth:a=!0,stencil:s=!1,alpha:r=!1,antialias:l=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:f=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:x=!1,reverseDepthBuffer:b=!1}=e;this.isWebGLRenderer=!0;let _;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=i.getContextAttributes().alpha}else _=r;const S=new Uint32Array(4),w=new Int32Array(4);let M=null,E=null;const T=[],C=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=fh,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const D=this;let P=!1;this._outputColorSpace=yo;let B=0,F=0,j=null,O=-1,I=null;const W=new $i,Q=new $i;let J=null;const te=new Zt(0);let oe=0,$=t.width,X=t.height,G=1,ee=null,Y=null;const ne=new $i(0,0,$,X),ue=new $i(0,0,$,X);let de=!1;const ie=new Iv;let Me=!1,ye=!1;const ae=new Fn,_e=new Fn,Ke=new be,Ge=new $i,st={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ft=!1;function Pe(){return j===null?G:1}let he=i;function ke(ce,we){return t.getContext(ce,we)}try{const ce={alpha:!0,depth:a,stencil:s,antialias:l,premultipliedAlpha:d,preserveDrawingBuffer:f,powerPreference:g,failIfMajorPerformanceCaveat:x};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Lv}`),t.addEventListener("webglcontextlost",kt,!1),t.addEventListener("webglcontextrestored",jt,!1),t.addEventListener("webglcontextcreationerror",xt,!1),he===null){const we="webgl2";if(he=ke(we,ce),he===null)throw ke(we)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ce){throw console.error("THREE.WebGLRenderer: "+ce.message),ce}let Ee,Le,Ie,Et,ct,At,Pt,Se,se,He,Ve,Te,ze,Nt,Dt,Ft,Xt,gt,Ot,Wt,Ae,Xe,Mt,Ne;function Qe(){Ee=new cW(he),Ee.init(),Xe=new Dj(he,Ee),Le=new nW(he,Ee,e,Xe),Ie=new GK(he,Ee),Le.reverseDepthBuffer&&b&&Ie.buffers.depth.setReversed(!0),Et=new hW(he),ct=new RK,At=new VK(he,Ee,Ie,ct,Le,Xe,Et),Pt=new aW(D),Se=new lW(D),se=new yq(he),Mt=new eW(he,se),He=new uW(he,se,Et,Mt),Ve=new pW(he,He,se,Et),Ot=new fW(he,Le,At),Ft=new iW(ct),Te=new NK(D,Pt,Se,Ee,Le,Mt,Ft),ze=new ZK(D,ct),Nt=new OK,Dt=new IK(Ee),gt=new $Y(D,Pt,Se,Ie,Ve,_,d),Xt=new kK(D,Ve,Le),Ne=new QK(he,Et,Le,Ie),Wt=new tW(he,Ee,Et),Ae=new dW(he,Ee,Et),Et.programs=Te.programs,D.capabilities=Le,D.extensions=Ee,D.properties=ct,D.renderLists=Nt,D.shadowMap=Xt,D.state=Ie,D.info=Et}Qe();const bt=new WK(D,he);this.xr=bt,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const ce=Ee.get("WEBGL_lose_context");ce&&ce.loseContext()},this.forceContextRestore=function(){const ce=Ee.get("WEBGL_lose_context");ce&&ce.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(ce){ce!==void 0&&(G=ce,this.setSize($,X,!1))},this.getSize=function(ce){return ce.set($,X)},this.setSize=function(ce,we,Re=!0){if(bt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}$=ce,X=we,t.width=Math.floor(ce*G),t.height=Math.floor(we*G),Re===!0&&(t.style.width=ce+"px",t.style.height=we+"px"),this.setViewport(0,0,ce,we)},this.getDrawingBufferSize=function(ce){return ce.set($*G,X*G).floor()},this.setDrawingBufferSize=function(ce,we,Re){$=ce,X=we,G=Re,t.width=Math.floor(ce*Re),t.height=Math.floor(we*Re),this.setViewport(0,0,ce,we)},this.getCurrentViewport=function(ce){return ce.copy(W)},this.getViewport=function(ce){return ce.copy(ne)},this.setViewport=function(ce,we,Re,De){ce.isVector4?ne.set(ce.x,ce.y,ce.z,ce.w):ne.set(ce,we,Re,De),Ie.viewport(W.copy(ne).multiplyScalar(G).round())},this.getScissor=function(ce){return ce.copy(ue)},this.setScissor=function(ce,we,Re,De){ce.isVector4?ue.set(ce.x,ce.y,ce.z,ce.w):ue.set(ce,we,Re,De),Ie.scissor(Q.copy(ue).multiplyScalar(G).round())},this.getScissorTest=function(){return de},this.setScissorTest=function(ce){Ie.setScissorTest(de=ce)},this.setOpaqueSort=function(ce){ee=ce},this.setTransparentSort=function(ce){Y=ce},this.getClearColor=function(ce){return ce.copy(gt.getClearColor())},this.setClearColor=function(){gt.setClearColor(...arguments)},this.getClearAlpha=function(){return gt.getClearAlpha()},this.setClearAlpha=function(){gt.setClearAlpha(...arguments)},this.clear=function(ce=!0,we=!0,Re=!0){let De=0;if(ce){let Be=!1;if(j!==null){const Je=j.texture.format;Be=Je===l2||Je===o2||Je===T1}if(Be){const Je=j.texture.type,dt=Je===bl||Je===bh||Je===vv||Je===yv||Je===s2||Je===r2,_t=gt.getClearColor(),vt=gt.getClearAlpha(),Ut=_t.r,Ht=_t.g,Gt=_t.b;dt?(S[0]=Ut,S[1]=Ht,S[2]=Gt,S[3]=vt,he.clearBufferuiv(he.COLOR,0,S)):(w[0]=Ut,w[1]=Ht,w[2]=Gt,w[3]=vt,he.clearBufferiv(he.COLOR,0,w))}else De|=he.COLOR_BUFFER_BIT}we&&(De|=he.DEPTH_BUFFER_BIT),Re&&(De|=he.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),he.clear(De)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",kt,!1),t.removeEventListener("webglcontextrestored",jt,!1),t.removeEventListener("webglcontextcreationerror",xt,!1),gt.dispose(),Nt.dispose(),Dt.dispose(),ct.dispose(),Pt.dispose(),Se.dispose(),Ve.dispose(),Mt.dispose(),Ne.dispose(),Te.dispose(),bt.dispose(),bt.removeEventListener("sessionstart",la),bt.removeEventListener("sessionend",Va),Na.stop()};function kt(ce){ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function jt(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const ce=Et.autoReset,we=Xt.enabled,Re=Xt.autoUpdate,De=Xt.needsUpdate,Be=Xt.type;Qe(),Et.autoReset=ce,Xt.enabled=we,Xt.autoUpdate=Re,Xt.needsUpdate=De,Xt.type=Be}function xt(ce){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ce.statusMessage)}function Vt(ce){const we=ce.target;we.removeEventListener("dispose",Vt),$t(we)}function $t(ce){Xn(ce),ct.remove(ce)}function Xn(ce){const we=ct.get(ce).programs;we!==void 0&&(we.forEach(function(Re){Te.releaseProgram(Re)}),ce.isShaderMaterial&&Te.releaseShaderCache(ce))}this.renderBufferDirect=function(ce,we,Re,De,Be,Je){we===null&&(we=st);const dt=Be.isMesh&&Be.matrixWorld.determinant()<0,_t=Ue(ce,we,Re,De,Be);Ie.setMaterial(De,dt);let vt=Re.index,Ut=1;if(De.wireframe===!0){if(vt=He.getWireframeAttribute(Re),vt===void 0)return;Ut=2}const Ht=Re.drawRange,Gt=Re.attributes.position;let an=Ht.start*Ut,sn=(Ht.start+Ht.count)*Ut;Je!==null&&(an=Math.max(an,Je.start*Ut),sn=Math.min(sn,(Je.start+Je.count)*Ut)),vt!==null?(an=Math.max(an,0),sn=Math.min(sn,vt.count)):Gt!=null&&(an=Math.max(an,0),sn=Math.min(sn,Gt.count));const Ln=sn-an;if(Ln<0||Ln===1/0)return;Mt.setup(Be,De,_t,Re,vt);let Kt,Sn=Wt;if(vt!==null&&(Kt=se.get(vt),Sn=Ae,Sn.setIndex(Kt)),Be.isMesh)De.wireframe===!0?(Ie.setLineWidth(De.wireframeLinewidth*Pe()),Sn.setMode(he.LINES)):Sn.setMode(he.TRIANGLES);else if(Be.isLine){let Qt=De.linewidth;Qt===void 0&&(Qt=1),Ie.setLineWidth(Qt*Pe()),Be.isLineSegments?Sn.setMode(he.LINES):Be.isLineLoop?Sn.setMode(he.LINE_LOOP):Sn.setMode(he.LINE_STRIP)}else Be.isPoints?Sn.setMode(he.POINTS):Be.isSprite&&Sn.setMode(he.TRIANGLES);if(Be.isBatchedMesh)if(Be._multiDrawInstances!==null)lv("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Sn.renderMultiDrawInstances(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount,Be._multiDrawInstances);else if(Ee.get("WEBGL_multi_draw"))Sn.renderMultiDraw(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount);else{const Qt=Be._multiDrawStarts,vi=Be._multiDrawCounts,En=Be._multiDrawCount,Tn=vt?se.get(vt).bytesPerElement:1,na=ct.get(De).currentProgram.getUniforms();for(let yn=0;yn<En;yn++)na.setValue(he,"_gl_DrawID",yn),Sn.render(Qt[yn]/Tn,vi[yn])}else if(Be.isInstancedMesh)Sn.renderInstances(an,Ln,Be.count);else if(Re.isInstancedBufferGeometry){const Qt=Re._maxInstanceCount!==void 0?Re._maxInstanceCount:1/0,vi=Math.min(Re.instanceCount,Qt);Sn.renderInstances(an,Ln,vi)}else Sn.render(an,Ln)};function Dn(ce,we,Re){ce.transparent===!0&&ce.side===cd&&ce.forceSinglePass===!1?(ce.side=Wo,ce.needsUpdate=!0,Pi(ce,we,Re),ce.side=Rf,ce.needsUpdate=!0,Pi(ce,we,Re),ce.side=cd):Pi(ce,we,Re)}this.compile=function(ce,we,Re=null){Re===null&&(Re=ce),E=Dt.get(Re),E.init(we),C.push(E),Re.traverseVisible(function(Be){Be.isLight&&Be.layers.test(we.layers)&&(E.pushLight(Be),Be.castShadow&&E.pushShadow(Be))}),ce!==Re&&ce.traverseVisible(function(Be){Be.isLight&&Be.layers.test(we.layers)&&(E.pushLight(Be),Be.castShadow&&E.pushShadow(Be))}),E.setupLights();const De=new Set;return ce.traverse(function(Be){if(!(Be.isMesh||Be.isPoints||Be.isLine||Be.isSprite))return;const Je=Be.material;if(Je)if(Array.isArray(Je))for(let dt=0;dt<Je.length;dt++){const _t=Je[dt];Dn(_t,Re,Be),De.add(_t)}else Dn(Je,Re,Be),De.add(Je)}),E=C.pop(),De},this.compileAsync=function(ce,we,Re=null){const De=this.compile(ce,we,Re);return new Promise(Be=>{function Je(){if(De.forEach(function(dt){ct.get(dt).currentProgram.isReady()&&De.delete(dt)}),De.size===0){Be(ce);return}setTimeout(Je,10)}Ee.get("KHR_parallel_shader_compile")!==null?Je():setTimeout(Je,10)})};let ga=null;function ta(ce){ga&&ga(ce)}function la(){Na.stop()}function Va(){Na.start()}const Na=new Tj;Na.setAnimationLoop(ta),typeof self<"u"&&Na.setContext(self),this.setAnimationLoop=function(ce){ga=ce,bt.setAnimationLoop(ce),ce===null?Na.stop():Na.start()},bt.addEventListener("sessionstart",la),bt.addEventListener("sessionend",Va),this.render=function(ce,we){if(we!==void 0&&we.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(ce.matrixWorldAutoUpdate===!0&&ce.updateMatrixWorld(),we.parent===null&&we.matrixWorldAutoUpdate===!0&&we.updateMatrixWorld(),bt.enabled===!0&&bt.isPresenting===!0&&(bt.cameraAutoUpdate===!0&&bt.updateCamera(we),we=bt.getCamera()),ce.isScene===!0&&ce.onBeforeRender(D,ce,we,j),E=Dt.get(ce,C.length),E.init(we),C.push(E),_e.multiplyMatrices(we.projectionMatrix,we.matrixWorldInverse),ie.setFromProjectionMatrix(_e),ye=this.localClippingEnabled,Me=Ft.init(this.clippingPlanes,ye),M=Nt.get(ce,T.length),M.init(),T.push(M),bt.enabled===!0&&bt.isPresenting===!0){const Je=D.xr.getDepthSensingMesh();Je!==null&&_s(Je,we,-1/0,D.sortObjects)}_s(ce,we,0,D.sortObjects),M.finish(),D.sortObjects===!0&&M.sort(ee,Y),ft=bt.enabled===!1||bt.isPresenting===!1||bt.hasDepthSensing()===!1,ft&&gt.addToRenderList(M,ce),this.info.render.frame++,Me===!0&&Ft.beginShadows();const Re=E.state.shadowsArray;Xt.render(Re,ce,we),Me===!0&&Ft.endShadows(),this.info.autoReset===!0&&this.info.reset();const De=M.opaque,Be=M.transmissive;if(E.setupLights(),we.isArrayCamera){const Je=we.cameras;if(Be.length>0)for(let dt=0,_t=Je.length;dt<_t;dt++){const vt=Je[dt];Ra(De,Be,ce,vt)}ft&&gt.render(ce);for(let dt=0,_t=Je.length;dt<_t;dt++){const vt=Je[dt];to(M,ce,vt,vt.viewport)}}else Be.length>0&&Ra(De,Be,ce,we),ft&&gt.render(ce),to(M,ce,we);j!==null&&F===0&&(At.updateMultisampleRenderTarget(j),At.updateRenderTargetMipmap(j)),ce.isScene===!0&&ce.onAfterRender(D,ce,we),Mt.resetDefaultState(),O=-1,I=null,C.pop(),C.length>0?(E=C[C.length-1],Me===!0&&Ft.setGlobalState(D.clippingPlanes,E.state.camera)):E=null,T.pop(),T.length>0?M=T[T.length-1]:M=null};function _s(ce,we,Re,De){if(ce.visible===!1)return;if(ce.layers.test(we.layers)){if(ce.isGroup)Re=ce.renderOrder;else if(ce.isLOD)ce.autoUpdate===!0&&ce.update(we);else if(ce.isLight)E.pushLight(ce),ce.castShadow&&E.pushShadow(ce);else if(ce.isSprite){if(!ce.frustumCulled||ie.intersectsSprite(ce)){De&&Ge.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(_e);const dt=Ve.update(ce),_t=ce.material;_t.visible&&M.push(ce,dt,_t,Re,Ge.z,null)}}else if((ce.isMesh||ce.isLine||ce.isPoints)&&(!ce.frustumCulled||ie.intersectsObject(ce))){const dt=Ve.update(ce),_t=ce.material;if(De&&(ce.boundingSphere!==void 0?(ce.boundingSphere===null&&ce.computeBoundingSphere(),Ge.copy(ce.boundingSphere.center)):(dt.boundingSphere===null&&dt.computeBoundingSphere(),Ge.copy(dt.boundingSphere.center)),Ge.applyMatrix4(ce.matrixWorld).applyMatrix4(_e)),Array.isArray(_t)){const vt=dt.groups;for(let Ut=0,Ht=vt.length;Ut<Ht;Ut++){const Gt=vt[Ut],an=_t[Gt.materialIndex];an&&an.visible&&M.push(ce,dt,an,Re,Ge.z,Gt)}}else _t.visible&&M.push(ce,dt,_t,Re,Ge.z,null)}}const Je=ce.children;for(let dt=0,_t=Je.length;dt<_t;dt++)_s(Je[dt],we,Re,De)}function to(ce,we,Re,De){const Be=ce.opaque,Je=ce.transmissive,dt=ce.transparent;E.setupLightsView(Re),Me===!0&&Ft.setGlobalState(D.clippingPlanes,Re),De&&Ie.viewport(W.copy(De)),Be.length>0&&un(Be,we,Re),Je.length>0&&un(Je,we,Re),dt.length>0&&un(dt,we,Re),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function Ra(ce,we,Re,De){if((Re.isScene===!0?Re.overrideMaterial:null)!==null)return;E.state.transmissionRenderTarget[De.id]===void 0&&(E.state.transmissionRenderTarget[De.id]=new sc(1,1,{generateMipmaps:!0,type:Ee.has("EXT_color_buffer_half_float")||Ee.has("EXT_color_buffer_float")?Jr:bl,minFilter:lh,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:qi.workingColorSpace}));const Je=E.state.transmissionRenderTarget[De.id],dt=De.viewport||W;Je.setSize(dt.z*D.transmissionResolutionScale,dt.w*D.transmissionResolutionScale);const _t=D.getRenderTarget(),vt=D.getActiveCubeFace(),Ut=D.getActiveMipmapLevel();D.setRenderTarget(Je),D.getClearColor(te),oe=D.getClearAlpha(),oe<1&&D.setClearColor(16777215,.5),D.clear(),ft&&gt.render(Re);const Ht=D.toneMapping;D.toneMapping=fh;const Gt=De.viewport;if(De.viewport!==void 0&&(De.viewport=void 0),E.setupLightsView(De),Me===!0&&Ft.setGlobalState(D.clippingPlanes,De),un(ce,Re,De),At.updateMultisampleRenderTarget(Je),At.updateRenderTargetMipmap(Je),Ee.has("WEBGL_multisampled_render_to_texture")===!1){let an=!1;for(let sn=0,Ln=we.length;sn<Ln;sn++){const Kt=we[sn],Sn=Kt.object,Qt=Kt.geometry,vi=Kt.material,En=Kt.group;if(vi.side===cd&&Sn.layers.test(De.layers)){const Tn=vi.side;vi.side=Wo,vi.needsUpdate=!0,Ss(Sn,Re,De,Qt,vi,En),vi.side=Tn,vi.needsUpdate=!0,an=!0}}an===!0&&(At.updateMultisampleRenderTarget(Je),At.updateRenderTargetMipmap(Je))}D.setRenderTarget(_t,vt,Ut),D.setClearColor(te,oe),Gt!==void 0&&(De.viewport=Gt),D.toneMapping=Ht}function un(ce,we,Re){const De=we.isScene===!0?we.overrideMaterial:null;for(let Be=0,Je=ce.length;Be<Je;Be++){const dt=ce[Be],_t=dt.object,vt=dt.geometry,Ut=dt.group;let Ht=dt.material;Ht.allowOverride===!0&&De!==null&&(Ht=De),_t.layers.test(Re.layers)&&Ss(_t,we,Re,vt,Ht,Ut)}}function Ss(ce,we,Re,De,Be,Je){ce.onBeforeRender(D,we,Re,De,Be,Je),ce.modelViewMatrix.multiplyMatrices(Re.matrixWorldInverse,ce.matrixWorld),ce.normalMatrix.getNormalMatrix(ce.modelViewMatrix),Be.onBeforeRender(D,we,Re,De,ce,Je),Be.transparent===!0&&Be.side===cd&&Be.forceSinglePass===!1?(Be.side=Wo,Be.needsUpdate=!0,D.renderBufferDirect(Re,we,De,Be,ce,Je),Be.side=Rf,Be.needsUpdate=!0,D.renderBufferDirect(Re,we,De,Be,ce,Je),Be.side=cd):D.renderBufferDirect(Re,we,De,Be,ce,Je),ce.onAfterRender(D,we,Re,De,Be,Je)}function Pi(ce,we,Re){we.isScene!==!0&&(we=st);const De=ct.get(ce),Be=E.state.lights,Je=E.state.shadowsArray,dt=Be.state.version,_t=Te.getParameters(ce,Be.state,Je,we,Re),vt=Te.getProgramCacheKey(_t);let Ut=De.programs;De.environment=ce.isMeshStandardMaterial?we.environment:null,De.fog=we.fog,De.envMap=(ce.isMeshStandardMaterial?Se:Pt).get(ce.envMap||De.environment),De.envMapRotation=De.environment!==null&&ce.envMap===null?we.environmentRotation:ce.envMapRotation,Ut===void 0&&(ce.addEventListener("dispose",Vt),Ut=new Map,De.programs=Ut);let Ht=Ut.get(vt);if(Ht!==void 0){if(De.currentProgram===Ht&&De.lightsStateVersion===dt)return ve(ce,_t),Ht}else _t.uniforms=Te.getUniforms(ce),ce.onBeforeCompile(_t,D),Ht=Te.acquireProgram(_t,vt),Ut.set(vt,Ht),De.uniforms=_t.uniforms;const Gt=De.uniforms;return(!ce.isShaderMaterial&&!ce.isRawShaderMaterial||ce.clipping===!0)&&(Gt.clippingPlanes=Ft.uniform),ve(ce,_t),De.needsLights=at(ce),De.lightsStateVersion=dt,De.needsLights&&(Gt.ambientLightColor.value=Be.state.ambient,Gt.lightProbe.value=Be.state.probe,Gt.directionalLights.value=Be.state.directional,Gt.directionalLightShadows.value=Be.state.directionalShadow,Gt.spotLights.value=Be.state.spot,Gt.spotLightShadows.value=Be.state.spotShadow,Gt.rectAreaLights.value=Be.state.rectArea,Gt.ltc_1.value=Be.state.rectAreaLTC1,Gt.ltc_2.value=Be.state.rectAreaLTC2,Gt.pointLights.value=Be.state.point,Gt.pointLightShadows.value=Be.state.pointShadow,Gt.hemisphereLights.value=Be.state.hemi,Gt.directionalShadowMap.value=Be.state.directionalShadowMap,Gt.directionalShadowMatrix.value=Be.state.directionalShadowMatrix,Gt.spotShadowMap.value=Be.state.spotShadowMap,Gt.spotLightMatrix.value=Be.state.spotLightMatrix,Gt.spotLightMap.value=Be.state.spotLightMap,Gt.pointShadowMap.value=Be.state.pointShadowMap,Gt.pointShadowMatrix.value=Be.state.pointShadowMatrix),De.currentProgram=Ht,De.uniformsList=null,Ht}function le(ce){if(ce.uniformsList===null){const we=ce.currentProgram.getUniforms();ce.uniformsList=T_.seqWithValue(we.seq,ce.uniforms)}return ce.uniformsList}function ve(ce,we){const Re=ct.get(ce);Re.outputColorSpace=we.outputColorSpace,Re.batching=we.batching,Re.batchingColor=we.batchingColor,Re.instancing=we.instancing,Re.instancingColor=we.instancingColor,Re.instancingMorph=we.instancingMorph,Re.skinning=we.skinning,Re.morphTargets=we.morphTargets,Re.morphNormals=we.morphNormals,Re.morphColors=we.morphColors,Re.morphTargetsCount=we.morphTargetsCount,Re.numClippingPlanes=we.numClippingPlanes,Re.numIntersection=we.numClipIntersection,Re.vertexAlphas=we.vertexAlphas,Re.vertexTangents=we.vertexTangents,Re.toneMapping=we.toneMapping}function Ue(ce,we,Re,De,Be){we.isScene!==!0&&(we=st),At.resetTextureUnits();const Je=we.fog,dt=De.isMeshStandardMaterial?we.environment:null,_t=j===null?D.outputColorSpace:j.isXRRenderTarget===!0?j.texture.colorSpace:fd,vt=(De.isMeshStandardMaterial?Se:Pt).get(De.envMap||dt),Ut=De.vertexColors===!0&&!!Re.attributes.color&&Re.attributes.color.itemSize===4,Ht=!!Re.attributes.tangent&&(!!De.normalMap||De.anisotropy>0),Gt=!!Re.morphAttributes.position,an=!!Re.morphAttributes.normal,sn=!!Re.morphAttributes.color;let Ln=fh;De.toneMapped&&(j===null||j.isXRRenderTarget===!0)&&(Ln=D.toneMapping);const Kt=Re.morphAttributes.position||Re.morphAttributes.normal||Re.morphAttributes.color,Sn=Kt!==void 0?Kt.length:0,Qt=ct.get(De),vi=E.state.lights;if(Me===!0&&(ye===!0||ce!==I)){const ia=ce===I&&De.id===O;Ft.setState(De,ce,ia)}let En=!1;De.version===Qt.__version?(Qt.needsLights&&Qt.lightsStateVersion!==vi.state.version||Qt.outputColorSpace!==_t||Be.isBatchedMesh&&Qt.batching===!1||!Be.isBatchedMesh&&Qt.batching===!0||Be.isBatchedMesh&&Qt.batchingColor===!0&&Be.colorTexture===null||Be.isBatchedMesh&&Qt.batchingColor===!1&&Be.colorTexture!==null||Be.isInstancedMesh&&Qt.instancing===!1||!Be.isInstancedMesh&&Qt.instancing===!0||Be.isSkinnedMesh&&Qt.skinning===!1||!Be.isSkinnedMesh&&Qt.skinning===!0||Be.isInstancedMesh&&Qt.instancingColor===!0&&Be.instanceColor===null||Be.isInstancedMesh&&Qt.instancingColor===!1&&Be.instanceColor!==null||Be.isInstancedMesh&&Qt.instancingMorph===!0&&Be.morphTexture===null||Be.isInstancedMesh&&Qt.instancingMorph===!1&&Be.morphTexture!==null||Qt.envMap!==vt||De.fog===!0&&Qt.fog!==Je||Qt.numClippingPlanes!==void 0&&(Qt.numClippingPlanes!==Ft.numPlanes||Qt.numIntersection!==Ft.numIntersection)||Qt.vertexAlphas!==Ut||Qt.vertexTangents!==Ht||Qt.morphTargets!==Gt||Qt.morphNormals!==an||Qt.morphColors!==sn||Qt.toneMapping!==Ln||Qt.morphTargetsCount!==Sn)&&(En=!0):(En=!0,Qt.__version=De.version);let Tn=Qt.currentProgram;En===!0&&(Tn=Pi(De,we,Be));let na=!1,yn=!1,$n=!1;const Gn=Tn.getUniforms(),ha=Qt.uniforms;if(Ie.useProgram(Tn.program)&&(na=!0,yn=!0,$n=!0),De.id!==O&&(O=De.id,yn=!0),na||I!==ce){Ie.buffers.depth.getReversed()?(ae.copy(ce.projectionMatrix),HH(ae),GH(ae),Gn.setValue(he,"projectionMatrix",ae)):Gn.setValue(he,"projectionMatrix",ce.projectionMatrix),Gn.setValue(he,"viewMatrix",ce.matrixWorldInverse);const ds=Gn.map.cameraPosition;ds!==void 0&&ds.setValue(he,Ke.setFromMatrixPosition(ce.matrixWorld)),Le.logarithmicDepthBuffer&&Gn.setValue(he,"logDepthBufFC",2/(Math.log(ce.far+1)/Math.LN2)),(De.isMeshPhongMaterial||De.isMeshToonMaterial||De.isMeshLambertMaterial||De.isMeshBasicMaterial||De.isMeshStandardMaterial||De.isShaderMaterial)&&Gn.setValue(he,"isOrthographic",ce.isOrthographicCamera===!0),I!==ce&&(I=ce,yn=!0,$n=!0)}if(Be.isSkinnedMesh){Gn.setOptional(he,Be,"bindMatrix"),Gn.setOptional(he,Be,"bindMatrixInverse");const ia=Be.skeleton;ia&&(ia.boneTexture===null&&ia.computeBoneTexture(),Gn.setValue(he,"boneTexture",ia.boneTexture,At))}Be.isBatchedMesh&&(Gn.setOptional(he,Be,"batchingTexture"),Gn.setValue(he,"batchingTexture",Be._matricesTexture,At),Gn.setOptional(he,Be,"batchingIdTexture"),Gn.setValue(he,"batchingIdTexture",Be._indirectTexture,At),Gn.setOptional(he,Be,"batchingColorTexture"),Be._colorsTexture!==null&&Gn.setValue(he,"batchingColorTexture",Be._colorsTexture,At));const Ei=Re.morphAttributes;if((Ei.position!==void 0||Ei.normal!==void 0||Ei.color!==void 0)&&Ot.update(Be,Re,Tn),(yn||Qt.receiveShadow!==Be.receiveShadow)&&(Qt.receiveShadow=Be.receiveShadow,Gn.setValue(he,"receiveShadow",Be.receiveShadow)),De.isMeshGouraudMaterial&&De.envMap!==null&&(ha.envMap.value=vt,ha.flipEnvMap.value=vt.isCubeTexture&&vt.isRenderTargetTexture===!1?-1:1),De.isMeshStandardMaterial&&De.envMap===null&&we.environment!==null&&(ha.envMapIntensity.value=we.environmentIntensity),yn&&(Gn.setValue(he,"toneMappingExposure",D.toneMappingExposure),Qt.needsLights&&tt(ha,$n),Je&&De.fog===!0&&ze.refreshFogUniforms(ha,Je),ze.refreshMaterialUniforms(ha,De,G,X,E.state.transmissionRenderTarget[ce.id]),T_.upload(he,le(Qt),ha,At)),De.isShaderMaterial&&De.uniformsNeedUpdate===!0&&(T_.upload(he,le(Qt),ha,At),De.uniformsNeedUpdate=!1),De.isSpriteMaterial&&Gn.setValue(he,"center",Be.center),Gn.setValue(he,"modelViewMatrix",Be.modelViewMatrix),Gn.setValue(he,"normalMatrix",Be.normalMatrix),Gn.setValue(he,"modelMatrix",Be.matrixWorld),De.isShaderMaterial||De.isRawShaderMaterial){const ia=De.uniformsGroups;for(let ds=0,Xs=ia.length;ds<Xs;ds++){const wo=ia[ds];Ne.update(wo,Tn),Ne.bind(wo,Tn)}}return Tn}function tt(ce,we){ce.ambientLightColor.needsUpdate=we,ce.lightProbe.needsUpdate=we,ce.directionalLights.needsUpdate=we,ce.directionalLightShadows.needsUpdate=we,ce.pointLights.needsUpdate=we,ce.pointLightShadows.needsUpdate=we,ce.spotLights.needsUpdate=we,ce.spotLightShadows.needsUpdate=we,ce.rectAreaLights.needsUpdate=we,ce.hemisphereLights.needsUpdate=we}function at(ce){return ce.isMeshLambertMaterial||ce.isMeshToonMaterial||ce.isMeshPhongMaterial||ce.isMeshStandardMaterial||ce.isShadowMaterial||ce.isShaderMaterial&&ce.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return j},this.setRenderTargetTextures=function(ce,we,Re){const De=ct.get(ce);De.__autoAllocateDepthBuffer=ce.resolveDepthBuffer===!1,De.__autoAllocateDepthBuffer===!1&&(De.__useRenderToTexture=!1),ct.get(ce.texture).__webglTexture=we,ct.get(ce.depthTexture).__webglTexture=De.__autoAllocateDepthBuffer?void 0:Re,De.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ce,we){const Re=ct.get(ce);Re.__webglFramebuffer=we,Re.__useDefaultFramebuffer=we===void 0};const ut=he.createFramebuffer();this.setRenderTarget=function(ce,we=0,Re=0){j=ce,B=we,F=Re;let De=!0,Be=null,Je=!1,dt=!1;if(ce){const vt=ct.get(ce);if(vt.__useDefaultFramebuffer!==void 0)Ie.bindFramebuffer(he.FRAMEBUFFER,null),De=!1;else if(vt.__webglFramebuffer===void 0)At.setupRenderTarget(ce);else if(vt.__hasExternalTextures)At.rebindTextures(ce,ct.get(ce.texture).__webglTexture,ct.get(ce.depthTexture).__webglTexture);else if(ce.depthBuffer){const Gt=ce.depthTexture;if(vt.__boundDepthTexture!==Gt){if(Gt!==null&&ct.has(Gt)&&(ce.width!==Gt.image.width||ce.height!==Gt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");At.setupDepthRenderbuffer(ce)}}const Ut=ce.texture;(Ut.isData3DTexture||Ut.isDataArrayTexture||Ut.isCompressedArrayTexture)&&(dt=!0);const Ht=ct.get(ce).__webglFramebuffer;ce.isWebGLCubeRenderTarget?(Array.isArray(Ht[we])?Be=Ht[we][Re]:Be=Ht[we],Je=!0):ce.samples>0&&At.useMultisampledRTT(ce)===!1?Be=ct.get(ce).__webglMultisampledFramebuffer:Array.isArray(Ht)?Be=Ht[Re]:Be=Ht,W.copy(ce.viewport),Q.copy(ce.scissor),J=ce.scissorTest}else W.copy(ne).multiplyScalar(G).floor(),Q.copy(ue).multiplyScalar(G).floor(),J=de;if(Re!==0&&(Be=ut),Ie.bindFramebuffer(he.FRAMEBUFFER,Be)&&De&&Ie.drawBuffers(ce,Be),Ie.viewport(W),Ie.scissor(Q),Ie.setScissorTest(J),Je){const vt=ct.get(ce.texture);he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_CUBE_MAP_POSITIVE_X+we,vt.__webglTexture,Re)}else if(dt){const vt=ct.get(ce.texture),Ut=we;he.framebufferTextureLayer(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,vt.__webglTexture,Re,Ut)}else if(ce!==null&&Re!==0){const vt=ct.get(ce.texture);he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_2D,vt.__webglTexture,Re)}O=-1},this.readRenderTargetPixels=function(ce,we,Re,De,Be,Je,dt,_t=0){if(!(ce&&ce.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let vt=ct.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&dt!==void 0&&(vt=vt[dt]),vt){Ie.bindFramebuffer(he.FRAMEBUFFER,vt);try{const Ut=ce.textures[_t],Ht=Ut.format,Gt=Ut.type;if(!Le.textureFormatReadable(Ht)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Le.textureTypeReadable(Gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}we>=0&&we<=ce.width-De&&Re>=0&&Re<=ce.height-Be&&(ce.textures.length>1&&he.readBuffer(he.COLOR_ATTACHMENT0+_t),he.readPixels(we,Re,De,Be,Xe.convert(Ht),Xe.convert(Gt),Je))}finally{const Ut=j!==null?ct.get(j).__webglFramebuffer:null;Ie.bindFramebuffer(he.FRAMEBUFFER,Ut)}}},this.readRenderTargetPixelsAsync=async function(ce,we,Re,De,Be,Je,dt,_t=0){if(!(ce&&ce.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let vt=ct.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&dt!==void 0&&(vt=vt[dt]),vt)if(we>=0&&we<=ce.width-De&&Re>=0&&Re<=ce.height-Be){Ie.bindFramebuffer(he.FRAMEBUFFER,vt);const Ut=ce.textures[_t],Ht=Ut.format,Gt=Ut.type;if(!Le.textureFormatReadable(Ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Le.textureTypeReadable(Gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const an=he.createBuffer();he.bindBuffer(he.PIXEL_PACK_BUFFER,an),he.bufferData(he.PIXEL_PACK_BUFFER,Je.byteLength,he.STREAM_READ),ce.textures.length>1&&he.readBuffer(he.COLOR_ATTACHMENT0+_t),he.readPixels(we,Re,De,Be,Xe.convert(Ht),Xe.convert(Gt),0);const sn=j!==null?ct.get(j).__webglFramebuffer:null;Ie.bindFramebuffer(he.FRAMEBUFFER,sn);const Ln=he.fenceSync(he.SYNC_GPU_COMMANDS_COMPLETE,0);return he.flush(),await kH(he,Ln,4),he.bindBuffer(he.PIXEL_PACK_BUFFER,an),he.getBufferSubData(he.PIXEL_PACK_BUFFER,0,Je),he.deleteBuffer(an),he.deleteSync(Ln),Je}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ce,we=null,Re=0){const De=Math.pow(2,-Re),Be=Math.floor(ce.image.width*De),Je=Math.floor(ce.image.height*De),dt=we!==null?we.x:0,_t=we!==null?we.y:0;At.setTexture2D(ce,0),he.copyTexSubImage2D(he.TEXTURE_2D,Re,0,0,dt,_t,Be,Je),Ie.unbindTexture()};const Lt=he.createFramebuffer(),mt=he.createFramebuffer();this.copyTextureToTexture=function(ce,we,Re=null,De=null,Be=0,Je=null){Je===null&&(Be!==0?(lv("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Je=Be,Be=0):Je=0);let dt,_t,vt,Ut,Ht,Gt,an,sn,Ln;const Kt=ce.isCompressedTexture?ce.mipmaps[Je]:ce.image;if(Re!==null)dt=Re.max.x-Re.min.x,_t=Re.max.y-Re.min.y,vt=Re.isBox3?Re.max.z-Re.min.z:1,Ut=Re.min.x,Ht=Re.min.y,Gt=Re.isBox3?Re.min.z:0;else{const Ei=Math.pow(2,-Be);dt=Math.floor(Kt.width*Ei),_t=Math.floor(Kt.height*Ei),ce.isDataArrayTexture?vt=Kt.depth:ce.isData3DTexture?vt=Math.floor(Kt.depth*Ei):vt=1,Ut=0,Ht=0,Gt=0}De!==null?(an=De.x,sn=De.y,Ln=De.z):(an=0,sn=0,Ln=0);const Sn=Xe.convert(we.format),Qt=Xe.convert(we.type);let vi;we.isData3DTexture?(At.setTexture3D(we,0),vi=he.TEXTURE_3D):we.isDataArrayTexture||we.isCompressedArrayTexture?(At.setTexture2DArray(we,0),vi=he.TEXTURE_2D_ARRAY):(At.setTexture2D(we,0),vi=he.TEXTURE_2D),he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,we.flipY),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,we.premultiplyAlpha),he.pixelStorei(he.UNPACK_ALIGNMENT,we.unpackAlignment);const En=he.getParameter(he.UNPACK_ROW_LENGTH),Tn=he.getParameter(he.UNPACK_IMAGE_HEIGHT),na=he.getParameter(he.UNPACK_SKIP_PIXELS),yn=he.getParameter(he.UNPACK_SKIP_ROWS),$n=he.getParameter(he.UNPACK_SKIP_IMAGES);he.pixelStorei(he.UNPACK_ROW_LENGTH,Kt.width),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,Kt.height),he.pixelStorei(he.UNPACK_SKIP_PIXELS,Ut),he.pixelStorei(he.UNPACK_SKIP_ROWS,Ht),he.pixelStorei(he.UNPACK_SKIP_IMAGES,Gt);const Gn=ce.isDataArrayTexture||ce.isData3DTexture,ha=we.isDataArrayTexture||we.isData3DTexture;if(ce.isDepthTexture){const Ei=ct.get(ce),ia=ct.get(we),ds=ct.get(Ei.__renderTarget),Xs=ct.get(ia.__renderTarget);Ie.bindFramebuffer(he.READ_FRAMEBUFFER,ds.__webglFramebuffer),Ie.bindFramebuffer(he.DRAW_FRAMEBUFFER,Xs.__webglFramebuffer);for(let wo=0;wo<vt;wo++)Gn&&(he.framebufferTextureLayer(he.READ_FRAMEBUFFER,he.COLOR_ATTACHMENT0,ct.get(ce).__webglTexture,Be,Gt+wo),he.framebufferTextureLayer(he.DRAW_FRAMEBUFFER,he.COLOR_ATTACHMENT0,ct.get(we).__webglTexture,Je,Ln+wo)),he.blitFramebuffer(Ut,Ht,dt,_t,an,sn,dt,_t,he.DEPTH_BUFFER_BIT,he.NEAREST);Ie.bindFramebuffer(he.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(he.DRAW_FRAMEBUFFER,null)}else if(Be!==0||ce.isRenderTargetTexture||ct.has(ce)){const Ei=ct.get(ce),ia=ct.get(we);Ie.bindFramebuffer(he.READ_FRAMEBUFFER,Lt),Ie.bindFramebuffer(he.DRAW_FRAMEBUFFER,mt);for(let ds=0;ds<vt;ds++)Gn?he.framebufferTextureLayer(he.READ_FRAMEBUFFER,he.COLOR_ATTACHMENT0,Ei.__webglTexture,Be,Gt+ds):he.framebufferTexture2D(he.READ_FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_2D,Ei.__webglTexture,Be),ha?he.framebufferTextureLayer(he.DRAW_FRAMEBUFFER,he.COLOR_ATTACHMENT0,ia.__webglTexture,Je,Ln+ds):he.framebufferTexture2D(he.DRAW_FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_2D,ia.__webglTexture,Je),Be!==0?he.blitFramebuffer(Ut,Ht,dt,_t,an,sn,dt,_t,he.COLOR_BUFFER_BIT,he.NEAREST):ha?he.copyTexSubImage3D(vi,Je,an,sn,Ln+ds,Ut,Ht,dt,_t):he.copyTexSubImage2D(vi,Je,an,sn,Ut,Ht,dt,_t);Ie.bindFramebuffer(he.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(he.DRAW_FRAMEBUFFER,null)}else ha?ce.isDataTexture||ce.isData3DTexture?he.texSubImage3D(vi,Je,an,sn,Ln,dt,_t,vt,Sn,Qt,Kt.data):we.isCompressedArrayTexture?he.compressedTexSubImage3D(vi,Je,an,sn,Ln,dt,_t,vt,Sn,Kt.data):he.texSubImage3D(vi,Je,an,sn,Ln,dt,_t,vt,Sn,Qt,Kt):ce.isDataTexture?he.texSubImage2D(he.TEXTURE_2D,Je,an,sn,dt,_t,Sn,Qt,Kt.data):ce.isCompressedTexture?he.compressedTexSubImage2D(he.TEXTURE_2D,Je,an,sn,Kt.width,Kt.height,Sn,Kt.data):he.texSubImage2D(he.TEXTURE_2D,Je,an,sn,dt,_t,Sn,Qt,Kt);he.pixelStorei(he.UNPACK_ROW_LENGTH,En),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,Tn),he.pixelStorei(he.UNPACK_SKIP_PIXELS,na),he.pixelStorei(he.UNPACK_SKIP_ROWS,yn),he.pixelStorei(he.UNPACK_SKIP_IMAGES,$n),Je===0&&we.generateMipmaps&&he.generateMipmap(vi),Ie.unbindTexture()},this.copyTextureToTexture3D=function(ce,we,Re=null,De=null,Be=0){return lv('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ce,we,Re,De,Be)},this.initRenderTarget=function(ce){ct.get(ce).__webglFramebuffer===void 0&&At.setupRenderTarget(ce)},this.initTexture=function(ce){ce.isCubeTexture?At.setTextureCube(ce,0):ce.isData3DTexture?At.setTexture3D(ce,0):ce.isDataArrayTexture||ce.isCompressedArrayTexture?At.setTexture2DArray(ce,0):At.setTexture2D(ce,0),Ie.unbindTexture()},this.resetState=function(){B=0,F=0,j=null,Ie.reset(),Mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return vu}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=qi._getDrawingBufferColorSpace(e),t.unpackColorSpace=qi._getUnpackColorSpace()}}const JK=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:N3,AddEquation:Lp,AddOperation:tO,AdditiveAnimationBlendMode:L3,AdditiveBlending:uT,AgXToneMapping:rO,AlphaFormat:O3,AlwaysCompare:_O,AlwaysDepth:q_,AlwaysStencilFunc:mT,AmbientLight:mj,AnimationAction:wj,AnimationClip:r1,AnimationLoader:mV,AnimationMixer:HV,AnimationObjectGroup:FV,AnimationUtils:dV,ArcCurve:BO,ArrayCamera:_j,ArrowHelper:cq,AttachedBindMode:fT,Audio:Sj,AudioAnalyser:RV,AudioContext:oC,AudioListener:CV,AudioLoader:wV,AxesHelper:uq,BackSide:Wo,BasicDepthPacking:hO,BasicShadowMap:U8,BatchedMesh:PO,Bone:q3,BooleanKeyframeTrack:Dg,Box2:KV,Box3:pr,Box3Helper:oq,BoxGeometry:Rg,BoxHelper:rq,BufferAttribute:Ua,BufferGeometry:fi,BufferGeometryLoader:bj,ByteType:i2,Cache:ch,Camera:h2,CameraHelper:sq,CanvasTexture:PG,CapsuleGeometry:x2,CatmullRomCurve3:FO,CineonToneMapping:aO,CircleGeometry:b2,ClampToEdgeWrapping:fr,Clock:lC,Color:Zt,ColorKeyframeTrack:aC,ColorManagement:qi,CompressedArrayTexture:OG,CompressedCubeTexture:jG,CompressedTexture:y2,CompressedTextureLoader:gV,ConeGeometry:R1,ConstantAlphaFactor:J8,ConstantColorFactor:Z8,Controls:hq,CubeCamera:AO,CubeReflectionMapping:xh,CubeRefractionMapping:Xp,CubeTexture:C1,CubeTextureLoader:uj,CubeUVReflectionMapping:zv,CubicBezierCurve:K3,CubicBezierCurve3:kO,CubicInterpolant:rj,CullFaceBack:cT,CullFaceFront:P8,CullFaceFrontBack:Hk,CullFaceNone:j8,Curve:yd,CurvePath:GO,CustomBlending:L8,CustomToneMapping:sO,CylinderGeometry:N1,Cylindrical:WV,Data3DTexture:d2,DataArrayTexture:u2,DataTexture:dd,DataTextureLoader:sC,DataUtils:rg,DecrementStencilOp:tH,DecrementWrapStencilOp:iH,DefaultLoadingManager:cj,DepthFormat:xv,DepthStencilFormat:bv,DepthTexture:Y3,DetachedBindMode:lO,DirectionalLight:pj,DirectionalLightHelper:aq,DiscreteInterpolant:oj,DodecahedronGeometry:_2,DoubleSide:cd,DstAlphaFactor:q8,DstColorFactor:Y8,DynamicCopyUsage:yH,DynamicDrawUsage:hH,DynamicReadUsage:mH,EdgesGeometry:IO,EllipseCurve:S2,EqualCompare:vO,EqualDepth:Y_,EqualStencilFunc:oH,EquirectangularReflectionMapping:gv,EquirectangularRefractionMapping:Xx,Euler:Wc,EventDispatcher:wh,ExtrudeGeometry:E2,FileLoader:Vc,Float16BufferAttribute:uG,Float32BufferAttribute:cn,FloatType:bs,Fog:p2,FogExp2:f2,FramebufferTexture:DG,FrontSide:Rf,Frustum:Iv,FrustumArray:v2,GLBufferAttribute:YV,GLSL1:bH,GLSL3:gT,GreaterCompare:yO,GreaterDepth:K_,GreaterEqualCompare:bO,GreaterEqualDepth:W_,GreaterEqualStencilFunc:dH,GreaterStencilFunc:cH,GridHelper:nq,Group:sv,HalfFloatType:Jr,HemisphereLight:dj,HemisphereLightHelper:tq,IcosahedronGeometry:D1,ImageBitmapLoader:EV,ImageLoader:o1,ImageUtils:MO,IncrementStencilOp:eH,IncrementWrapStencilOp:nH,InstancedBufferAttribute:wv,InstancedBufferGeometry:xj,InstancedInterleavedBuffer:XV,InstancedMesh:jO,Int16BufferAttribute:lG,Int32BufferAttribute:cG,Int8BufferAttribute:sG,IntType:w1,InterleavedBuffer:m2,InterleavedBufferAttribute:vg,Interpolant:P1,InterpolateDiscrete:Kx,InterpolateLinear:ES,InterpolateSmooth:w_,InterpolationSamplingMode:EH,InterpolationSamplingType:SH,InvertStencilOp:aH,KeepStencilOp:eg,KeyframeTrack:xu,LOD:DO,LatheGeometry:w2,Layers:Sv,LessCompare:gO,LessDepth:X_,LessEqualCompare:z3,LessEqualDepth:gg,LessEqualStencilFunc:lH,LessStencilFunc:rH,Light:tm,LightProbe:yj,Line:Yp,Line3:ZV,LineBasicMaterial:Sl,LineCurve:Z3,LineCurve3:HO,LineDashedMaterial:ij,LineLoop:UO,LineSegments:Mh,LinearFilter:Aa,LinearInterpolant:iC,LinearMipMapLinearFilter:pT,LinearMipMapNearestFilter:qk,LinearMipmapLinearFilter:lh,LinearMipmapNearestFilter:Nx,LinearSRGBColorSpace:fd,LinearToneMapping:nO,LinearTransfer:Qx,Loader:El,LoaderUtils:_T,LoadingManager:O2,LoopOnce:cO,LoopPingPong:dO,LoopRepeat:uO,MOUSE:Jm,Material:$o,MaterialLoader:j2,MathUtils:SO,Matrix2:hC,Matrix3:oi,Matrix4:Fn,MaxEquation:F8,Mesh:us,MeshBasicMaterial:zf,MeshDepthMaterial:D2,MeshDistanceMaterial:tC,MeshLambertMaterial:tj,MeshMatcapMaterial:nj,MeshNormalMaterial:ej,MeshPhongMaterial:JO,MeshPhysicalMaterial:QO,MeshStandardMaterial:eC,MeshToonMaterial:$O,MinEquation:B8,MirroredRepeatWrapping:Wx,MixOperation:eO,MultiplyBlending:hT,MultiplyOperation:E1,NearestFilter:xo,NearestMipMapLinearFilter:Vk,NearestMipMapNearestFilter:Gk,NearestMipmapLinearFilter:iv,NearestMipmapNearestFilter:R3,NeutralToneMapping:oO,NeverCompare:mO,NeverDepth:V_,NeverStencilFunc:sH,NoBlending:hh,NoColorSpace:Ef,NoToneMapping:fh,NormalAnimationBlendMode:c2,NormalBlending:ug,NotEqualCompare:xO,NotEqualDepth:Z_,NotEqualStencilFunc:uH,NumberKeyframeTrack:a1,Object3D:ea,ObjectLoader:_V,ObjectSpaceNormalMap:pO,OctahedronGeometry:O1,OneFactor:H8,OneMinusConstantAlphaFactor:$8,OneMinusConstantColorFactor:Q8,OneMinusDstAlphaFactor:X8,OneMinusDstColorFactor:W8,OneMinusSrcAlphaFactor:G_,OneMinusSrcColorFactor:V8,OrthographicCamera:Cf,PCFShadowMap:n2,PCFSoftShadowMap:Ax,PMREMGenerator:MT,Path:CS,PerspectiveCamera:Gs,Plane:sh,PlaneGeometry:If,PlaneHelper:lq,PointLight:fj,PointLightHelper:$V,Points:LO,PointsMaterial:X3,PolarGridHelper:iq,PolyhedronGeometry:em,PositionalAudio:NV,PropertyBinding:Ji,PropertyMixer:Ej,QuadraticBezierCurve:Q3,QuadraticBezierCurve3:J3,Quaternion:Ko,QuaternionKeyframeTrack:U1,QuaternionLinearInterpolant:lj,RED_GREEN_RGTC2_Format:_S,RED_RGTC1_Format:U3,REVISION:Lv,RGBADepthPacking:fO,RGBAFormat:Vs,RGBAIntegerFormat:l2,RGBA_ASTC_10x10_Format:mS,RGBA_ASTC_10x5_Format:hS,RGBA_ASTC_10x6_Format:fS,RGBA_ASTC_10x8_Format:pS,RGBA_ASTC_12x10_Format:gS,RGBA_ASTC_12x12_Format:vS,RGBA_ASTC_4x4_Format:aS,RGBA_ASTC_5x4_Format:sS,RGBA_ASTC_5x5_Format:rS,RGBA_ASTC_6x5_Format:oS,RGBA_ASTC_6x6_Format:lS,RGBA_ASTC_8x5_Format:cS,RGBA_ASTC_8x6_Format:uS,RGBA_ASTC_8x8_Format:dS,RGBA_BPTC_Format:Px,RGBA_ETC2_EAC_Format:iS,RGBA_PVRTC_2BPPV1_Format:eS,RGBA_PVRTC_4BPPV1_Format:$_,RGBA_S3TC_DXT1_Format:Dx,RGBA_S3TC_DXT3_Format:Ox,RGBA_S3TC_DXT5_Format:jx,RGBDepthPacking:Zk,RGBFormat:j3,RGBIntegerFormat:Xk,RGB_BPTC_SIGNED_Format:yS,RGB_BPTC_UNSIGNED_Format:xS,RGB_ETC1_Format:tS,RGB_ETC2_Format:nS,RGB_PVRTC_2BPPV1_Format:J_,RGB_PVRTC_4BPPV1_Format:Q_,RGB_S3TC_DXT1_Format:Rx,RGDepthPacking:Qk,RGFormat:P3,RGIntegerFormat:o2,RawShaderMaterial:ZO,Ray:Ng,Raycaster:dC,RectAreaLight:gj,RedFormat:M1,RedIntegerFormat:T1,ReinhardToneMapping:iO,RenderTarget:B3,RenderTarget3D:GV,RepeatWrapping:Yx,ReplaceStencilOp:$k,ReverseSubtractEquation:I8,RingGeometry:M2,SIGNED_RED_GREEN_RGTC2_Format:SS,SIGNED_RED_RGTC1_Format:bS,SRGBColorSpace:yo,SRGBTransfer:Ea,Scene:A1,ShaderChunk:gi,ShaderLib:od,ShaderMaterial:So,ShadowMaterial:KO,Shape:hg,ShapeGeometry:T2,ShapePath:dq,ShapeUtils:ud,ShortType:a2,Skeleton:g2,SkeletonHelper:JV,SkinnedMesh:OO,Source:zp,Sphere:bo,SphereGeometry:j1,Spherical:ET,SphericalHarmonics3:vj,SplineCurve:$3,SpotLight:hj,SpotLightHelper:QV,Sprite:RO,SpriteMaterial:V3,SrcAlphaFactor:H_,SrcAlphaSaturateFactor:K8,SrcColorFactor:G8,StaticCopyUsage:vH,StaticDrawUsage:Jx,StaticReadUsage:pH,StereoCamera:MV,StreamCopyUsage:xH,StreamDrawUsage:fH,StreamReadUsage:gH,StringKeyframeTrack:Og,SubtractEquation:z8,SubtractiveBlending:dT,TOUCH:$m,TangentSpaceNormalMap:$p,TetrahedronGeometry:C2,Texture:Pa,TextureLoader:vV,TextureUtils:vq,TimestampQuery:_H,TorusGeometry:A2,TorusKnotGeometry:N2,Triangle:nc,TriangleFanDrawMode:Kk,TriangleStripDrawMode:Wk,TrianglesDrawMode:Yk,TubeGeometry:R2,UVMapping:qp,Uint16BufferAttribute:F3,Uint32BufferAttribute:k3,Uint8BufferAttribute:rG,Uint8ClampedBufferAttribute:oG,Uniform:P2,UniformsGroup:qV,UniformsLib:Yt,UniformsUtils:H3,UnsignedByteType:bl,UnsignedInt248Type:yv,UnsignedInt5999Type:D3,UnsignedIntType:bh,UnsignedShort4444Type:s2,UnsignedShort5551Type:r2,UnsignedShortType:vv,VSMShadowMap:rd,Vector2:wt,Vector3:be,Vector4:$i,VectorKeyframeTrack:s1,VideoFrameTexture:RG,VideoTexture:zO,WebGL3DRenderTarget:WH,WebGLArrayRenderTarget:YH,WebGLCoordinateSystem:vu,WebGLCubeRenderTarget:G3,WebGLRenderTarget:sc,WebGLRenderer:pC,WebGLUtils:Dj,WebGPUCoordinateSystem:$x,WebXRController:M_,WireframeGeometry:WO,WrapAroundEnding:Zx,ZeroCurvatureEnding:ag,ZeroFactor:k8,ZeroSlopeEnding:sg,ZeroStencilOp:Jk,createCanvasElement:wO},Symbol.toStringTag,{value:"Module"}));var oM={exports:{}},lM={},cM={exports:{}},uM={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R5;function $K(){if(R5)return uM;R5=1;var n=Lf();function e(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,a=n.useEffect,s=n.useLayoutEffect,r=n.useDebugValue;function l(x,b){var _=b(),S=i({inst:{value:_,getSnapshot:b}}),w=S[0].inst,M=S[1];return s(function(){w.value=_,w.getSnapshot=b,d(w)&&M({inst:w})},[x,_,b]),a(function(){return d(w)&&M({inst:w}),x(function(){d(w)&&M({inst:w})})},[x]),r(_),_}function d(x){var b=x.getSnapshot;x=x.value;try{var _=b();return!t(x,_)}catch{return!0}}function f(x,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return uM.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,uM}var D5;function eZ(){return D5||(D5=1,cM.exports=$K()),cM.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O5;function tZ(){if(O5)return lM;O5=1;var n=Lf(),e=eZ();function t(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var i=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=n.useRef,r=n.useEffect,l=n.useMemo,d=n.useDebugValue;return lM.useSyncExternalStoreWithSelector=function(f,g,x,b,_){var S=s(null);if(S.current===null){var w={hasValue:!1,value:null};S.current=w}else w=S.current;S=l(function(){function E(B){if(!T){if(T=!0,C=B,B=b(B),_!==void 0&&w.hasValue){var F=w.value;if(_(F,B))return D=F}return D=B}if(F=D,i(C,B))return F;var j=b(B);return _!==void 0&&_(F,j)?(C=B,F):(C=B,D=j)}var T=!1,C,D,P=x===void 0?null:x;return[function(){return E(g())},P===null?void 0:function(){return E(P())}]},[g,x,b,_]);var M=a(f,S[0],S[1]);return r(function(){w.hasValue=!0,w.value=M},[M]),d(M),M},lM}var j5;function nZ(){return j5||(j5=1,oM.exports=tZ()),oM.exports}var iZ=nZ();const aZ=Uf(iZ),{useSyncExternalStoreWithSelector:sZ}=aZ,rZ=n=>n;function oZ(n,e=rZ,t){const i=sZ(n.subscribe,n.getState,n.getInitialState,e,t);return di.useDebugValue(i),i}const P5=(n,e)=>{const t=R8(n),i=(a,s=e)=>oZ(t,a,s);return Object.assign(i,t),i},Oj=(n,e)=>n?P5(n,e):P5,lZ=n=>typeof n=="object"&&typeof n.then=="function",lg=[];function jj(n,e,t=(i,a)=>i===a){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let a=0;a<i;a++)if(!t(n[a],e[a]))return!1;return!0}function Pj(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of lg)if(jj(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const a={keys:e,equal:i.equal,remove:()=>{const s=lg.indexOf(a);s!==-1&&lg.splice(s,1)},promise:(lZ(n)?n:n(...e)).then(s=>{a.response=s,i.lifespan&&i.lifespan>0&&(a.timeout=setTimeout(a.remove,i.lifespan))}).catch(s=>a.error=s)};if(lg.push(a),!t)throw a.promise}const cZ=(n,e,t)=>Pj(n,e,!1,t),uZ=(n,e,t)=>void Pj(n,e,!0,t),dZ=n=>{if(n===void 0||n.length===0)lg.splice(0,lg.length);else{const e=lg.find(t=>jj(n,t.keys,t.equal));e&&e.remove()}};var dM={exports:{}},hM={exports:{}},fM={exports:{}},pM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U5;function hZ(){return U5||(U5=1,function(n){function e($,X){var G=$.length;$.push(X);e:for(;0<G;){var ee=G-1>>>1,Y=$[ee];if(0<a(Y,X))$[ee]=X,$[G]=Y,G=ee;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var X=$[0],G=$.pop();if(G!==X){$[0]=G;e:for(var ee=0,Y=$.length,ne=Y>>>1;ee<ne;){var ue=2*(ee+1)-1,de=$[ue],ie=ue+1,Me=$[ie];if(0>a(de,G))ie<Y&&0>a(Me,de)?($[ee]=Me,$[ie]=G,ee=ie):($[ee]=de,$[ue]=G,ee=ue);else if(ie<Y&&0>a(Me,G))$[ee]=Me,$[ie]=G,ee=ie;else break e}}return X}function a($,X){var G=$.sortIndex-X.sortIndex;return G!==0?G:$.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var r=Date,l=r.now();n.unstable_now=function(){return r.now()-l}}var d=[],f=[],g=1,x=null,b=3,_=!1,S=!1,w=!1,M=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function C($){for(var X=t(f);X!==null;){if(X.callback===null)i(f);else if(X.startTime<=$)i(f),X.sortIndex=X.expirationTime,e(d,X);else break;X=t(f)}}function D($){if(w=!1,C($),!S)if(t(d)!==null)S=!0,te();else{var X=t(f);X!==null&&oe(D,X.startTime-$)}}var P=!1,B=-1,F=5,j=-1;function O(){return!(n.unstable_now()-j<F)}function I(){if(P){var $=n.unstable_now();j=$;var X=!0;try{e:{S=!1,w&&(w=!1,E(B),B=-1),_=!0;var G=b;try{t:{for(C($),x=t(d);x!==null&&!(x.expirationTime>$&&O());){var ee=x.callback;if(typeof ee=="function"){x.callback=null,b=x.priorityLevel;var Y=ee(x.expirationTime<=$);if($=n.unstable_now(),typeof Y=="function"){x.callback=Y,C($),X=!0;break t}x===t(d)&&i(d),C($)}else i(d);x=t(d)}if(x!==null)X=!0;else{var ne=t(f);ne!==null&&oe(D,ne.startTime-$),X=!1}}break e}finally{x=null,b=G,_=!1}X=void 0}}finally{X?W():P=!1}}}var W;if(typeof T=="function")W=function(){T(I)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,J=Q.port2;Q.port1.onmessage=I,W=function(){J.postMessage(null)}}else W=function(){M(I,0)};function te(){P||(P=!0,W())}function oe($,X){B=M(function(){$(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){S||_||(S=!0,te())},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function($){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var G=b;b=X;try{return $()}finally{b=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var G=b;b=$;try{return X()}finally{b=G}},n.unstable_scheduleCallback=function($,X,G){var ee=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,$){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=G+Y,$={id:g++,callback:X,priorityLevel:$,startTime:G,expirationTime:Y,sortIndex:-1},G>ee?($.sortIndex=G,e(f,$),t(d)===null&&$===t(f)&&(w?(E(B),B=-1):w=!0,oe(D,G-ee))):($.sortIndex=Y,e(d,$),S||_||(S=!0,te())),$},n.unstable_shouldYield=O,n.unstable_wrapCallback=function($){var X=b;return function(){var G=b;b=X;try{return $.apply(this,arguments)}finally{b=G}}}}(pM)),pM}var L5;function Uj(){return L5||(L5=1,fM.exports=hZ()),fM.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z5;function fZ(){return z5||(z5=1,function(n){n.exports=function(e){function t(p,v,R,z){return new tp(p,v,R,z)}function i(){}function a(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)v+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(p){return p===null||typeof p!="object"?null:(p=sl&&p[sl]||p["@@iterator"],typeof p=="function"?p:null)}function r(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===Kh?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case kn:return"Fragment";case Fr:return"Portal";case Js:return"Profiler";case Wh:return"StrictMode";case wc:return"Suspense";case Iu:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case kr:return(p.displayName||"Context")+".Provider";case pm:return(p._context.displayName||"Context")+".Consumer";case Fl:var v=p.render;return p=p.displayName,p||(p=v.displayName||v.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case Hd:return v=p.displayName||null,v!==null?v:r(p.type)||"Memo";case Do:v=p._payload,p=p._init;try{return r(p(v))}catch{}}return null}function l(p){if(Oo===void 0)try{throw Error()}catch(R){var v=R.stack.trim().match(/\n( *(at )?)/);Oo=v&&v[1]||"",$s=-1<R.stack.indexOf(`
    at`)?" (<anonymous>)":-1<R.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oo+p+$s}function d(p,v){if(!p||Tc)return"";Tc=!0;var R=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var z={DetermineComponentFrameRoot:function(){try{if(v){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(U){var N=U}Reflect.construct(p,[],m)}else{try{m.call()}catch(U){N=U}p.call(m.prototype)}}else{try{throw Error()}catch(U){N=U}(m=p())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(U){if(U&&N&&typeof U.stack=="string")return[U.stack,N.stack]}return[null,null]}};z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var V=Object.getOwnPropertyDescriptor(z.DetermineComponentFrameRoot,"name");V&&V.configurable&&Object.defineProperty(z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Z=z.DetermineComponentFrameRoot(),ge=Z[0],je=Z[1];if(ge&&je){var We=ge.split(`
`),yt=je.split(`
`);for(V=z=0;z<We.length&&!We[z].includes("DetermineComponentFrameRoot");)z++;for(;V<yt.length&&!yt[V].includes("DetermineComponentFrameRoot");)V++;if(z===We.length||V===yt.length)for(z=We.length-1,V=yt.length-1;1<=z&&0<=V&&We[z]!==yt[V];)V--;for(;1<=z&&0<=V;z--,V--)if(We[z]!==yt[V]){if(z!==1||V!==1)do if(z--,V--,0>V||We[z]!==yt[V]){var h=`
`+We[z].replace(" at new "," at ");return p.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",p.displayName)),h}while(1<=z&&0<=V);break}}}finally{Tc=!1,Error.prepareStackTrace=R}return(R=p?p.displayName||p.name:"")?l(R):""}function f(p){switch(p.tag){case 26:case 27:case 5:return l(p.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return p=d(p.type,!1),p;case 11:return p=d(p.type.render,!1),p;case 1:return p=d(p.type,!0),p;default:return""}}function g(p){try{var v="";do v+=f(p),p=p.return;while(p);return v}catch(R){return`
Error generating stack: `+R.message+`
`+R.stack}}function x(p){var v=p,R=p;if(p.alternate)for(;v.return;)v=v.return;else{p=v;do v=p,(v.flags&4098)!==0&&(R=v.return),p=v.return;while(p)}return v.tag===3?R:null}function b(p){if(x(p)!==p)throw Error(a(188))}function _(p){var v=p.alternate;if(!v){if(v=x(p),v===null)throw Error(a(188));return v!==p?null:p}for(var R=p,z=v;;){var V=R.return;if(V===null)break;var Z=V.alternate;if(Z===null){if(z=V.return,z!==null){R=z;continue}break}if(V.child===Z.child){for(Z=V.child;Z;){if(Z===R)return b(V),p;if(Z===z)return b(V),v;Z=Z.sibling}throw Error(a(188))}if(R.return!==z.return)R=V,z=Z;else{for(var ge=!1,je=V.child;je;){if(je===R){ge=!0,R=V,z=Z;break}if(je===z){ge=!0,z=V,R=Z;break}je=je.sibling}if(!ge){for(je=Z.child;je;){if(je===R){ge=!0,R=Z,z=V;break}if(je===z){ge=!0,z=Z,R=V;break}je=je.sibling}if(!ge)throw Error(a(189))}}if(R.alternate!==z)throw Error(a(190))}if(R.tag!==3)throw Error(a(188));return R.stateNode.current===R?p:v}function S(p){var v=p.tag;if(v===5||v===26||v===27||v===6)return p;for(p=p.child;p!==null;){if(v=S(p),v!==null)return v;p=p.sibling}return null}function w(p){var v=p.tag;if(v===5||v===26||v===27||v===6)return p;for(p=p.child;p!==null;){if(p.tag!==4&&(v=w(p),v!==null))return v;p=p.sibling}return null}function M(p){return{current:p}}function E(p){0>Vl||(p.current=ii[Vl],ii[Vl]=null,Vl--)}function T(p,v){Vl++,ii[Vl]=p.current,p.current=v}function C(p){return p>>>=0,p===0?32:31-(Om(p)/ku|0)|0}function D(p){var v=p&42;if(v!==0)return v;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function P(p,v){var R=p.pendingLanes;if(R===0)return 0;var z=0,V=p.suspendedLanes,Z=p.pingedLanes,ge=p.warmLanes;p=p.finishedLanes!==0;var je=R&134217727;return je!==0?(R=je&~V,R!==0?z=D(R):(Z&=je,Z!==0?z=D(Z):p||(ge=je&~ge,ge!==0&&(z=D(ge))))):(je=R&~V,je!==0?z=D(je):Z!==0?z=D(Z):p||(ge=R&~ge,ge!==0&&(z=D(ge)))),z===0?0:v!==0&&v!==z&&(v&V)===0&&(V=z&-z,ge=v&-v,V>=ge||V===32&&(ge&4194176)!==0)?v:z}function B(p,v){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&v)===0}function F(p,v){switch(p){case 1:case 2:case 4:case 8:return v+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j(){var p=Po;return Po<<=1,(Po&4194176)===0&&(Po=128),p}function O(){var p=Uo;return Uo<<=1,(Uo&62914560)===0&&(Uo=4194304),p}function I(p){for(var v=[],R=0;31>R;R++)v.push(p);return v}function W(p,v){p.pendingLanes|=v,v!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function Q(p,v,R,z,V,Z){var ge=p.pendingLanes;p.pendingLanes=R,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=R,p.entangledLanes&=R,p.errorRecoveryDisabledLanes&=R,p.shellSuspendCounter=0;var je=p.entanglements,We=p.expirationTimes,yt=p.hiddenUpdates;for(R=ge&~R;0<R;){var h=31-tr(R),m=1<<h;je[h]=0,We[h]=-1;var N=yt[h];if(N!==null)for(yt[h]=null,h=0;h<N.length;h++){var U=N[h];U!==null&&(U.lane&=-536870913)}R&=~m}z!==0&&J(p,z,0),Z!==0&&V===0&&p.tag!==0&&(p.suspendedLanes|=Z&~(ge&~v))}function J(p,v,R){p.pendingLanes|=v,p.suspendedLanes&=~v;var z=31-tr(v);p.entangledLanes|=v,p.entanglements[z]=p.entanglements[z]|1073741824|R&4194218}function te(p,v){var R=p.entangledLanes|=v;for(p=p.entanglements;R;){var z=31-tr(R),V=1<<z;V&v|p[z]&v&&(p[z]|=v),R&=~V}}function oe(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function $(p){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Wa,p,void 0,(p.current.flags&128)===128)}catch{}}function X(p){if(typeof b0=="function"&&sa(p),Vr&&typeof Vr.setStrictMode=="function")try{Vr.setStrictMode(Wa,p)}catch{}}function G(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}function ee(p,v){if(typeof p=="object"&&p!==null){var R=jm.get(p);return R!==void 0?R:(v={value:p,source:v,stack:g(v)},jm.set(p,v),v)}return{value:p,source:v,stack:g(v)}}function Y(p,v){Gu[Vu++]=As,Gu[Vu++]=ul,ul=p,As=v}function ne(p,v,R){Sr[qr++]=Lo,Sr[qr++]=ar,Sr[qr++]=Xl,Xl=p;var z=Lo;p=ar;var V=32-tr(z)-1;z&=~(1<<V),R+=1;var Z=32-tr(v)+V;if(30<Z){var ge=V-V%5;Z=(z&(1<<ge)-1).toString(32),z>>=ge,V-=ge,Lo=1<<32-tr(v)+V|R<<V|z,ar=Z+p}else Lo=1<<Z|R<<V|z,ar=p}function ue(p){p.return!==null&&(Y(p,1),ne(p,1,0))}function de(p){for(;p===ul;)ul=Gu[--Vu],Gu[Vu]=null,As=Gu[--Vu],Gu[Vu]=null;for(;p===Xl;)Xl=Sr[--qr],Sr[qr]=null,ar=Sr[--qr],Sr[qr]=null,Lo=Sr[--qr],Sr[qr]=null}function ie(p,v){T(oo,v),T(Dc,p),T(Da,null),p=qg(v),E(Da),T(Da,p)}function Me(){E(Da),E(Dc),E(oo)}function ye(p){p.memoizedState!==null&&T(Ns,p);var v=Da.current,R=Vd(v,p.type);v!==R&&(T(Dc,p),T(Da,R))}function ae(p){Dc.current===p&&(E(Da),E(Dc)),Ns.current===p&&(E(Ns),er?ll._currentValue=Nc:ll._currentValue2=Nc)}function _e(p){var v=Error(a(418,""));throw Pe(ee(v,p)),Oc}function Ke(p,v){if(!Ba)throw Error(a(175));h0(p.stateNode,p.type,p.memoizedProps,v,p)||_e(p)}function Ge(p){for(ra=p.return;ra;)switch(ra.tag){case 3:case 27:Mi=!0;return;case 5:case 13:Mi=!1;return;default:ra=ra.return}}function st(p){if(!Ba||p!==ra)return!1;if(!Kn)return Ge(p),Kn=!0,!1;var v=!1;if(aa?p.tag!==3&&p.tag!==27&&(p.tag!==5||hp(p.type)&&!Wn(p.type,p.memoizedProps))&&(v=!0):p.tag!==3&&(p.tag!==5||hp(p.type)&&!Wn(p.type,p.memoizedProps))&&(v=!0),v&&ka&&_e(p),Ge(p),p.tag===13){if(!Ba)throw Error(a(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(a(317));ka=p0(p)}else ka=ra?Tm(p.stateNode):null;return!0}function ft(){Ba&&(ka=ra=null,Kn=!1)}function Pe(p){ss===null?ss=[p]:ss.push(p)}function he(){for(var p=Yl,v=xa=Yl=0;v<p;){var R=ms[v];ms[v++]=null;var z=ms[v];ms[v++]=null;var V=ms[v];ms[v++]=null;var Z=ms[v];if(ms[v++]=null,z!==null&&V!==null){var ge=z.pending;ge===null?V.next=V:(V.next=ge.next,ge.next=V),z.pending=V}Z!==0&&Ie(R,V,Z)}}function ke(p,v,R,z){ms[Yl++]=p,ms[Yl++]=v,ms[Yl++]=R,ms[Yl++]=z,xa|=z,p.lanes|=z,p=p.alternate,p!==null&&(p.lanes|=z)}function Ee(p,v,R,z){return ke(p,v,R,z),Et(p)}function Le(p,v){return ke(p,null,null,v),Et(p)}function Ie(p,v,R){p.lanes|=R;var z=p.alternate;z!==null&&(z.lanes|=R);for(var V=!1,Z=p.return;Z!==null;)Z.childLanes|=R,z=Z.alternate,z!==null&&(z.childLanes|=R),Z.tag===22&&(p=Z.stateNode,p===null||p._visibility&1||(V=!0)),p=Z,Z=Z.return;V&&v!==null&&p.tag===3&&(Z=p.stateNode,V=31-tr(R),Z=Z.hiddenUpdates,p=Z[V],p===null?Z[V]=[v]:p.push(v),v.lane=R|536870912)}function Et(p){if(50<Jl)throw Jl=0,Ju=null,Error(a(185));for(var v=p.return;v!==null;)p=v,v=p.return;return p.tag===3?p.stateNode:null}function ct(p){p!==ai&&p.next===null&&(ai===null?Ha=ai=p:ai=ai.next=p),bi=!0,lo||(lo=!0,Ve(Pt))}function At(p,v){if(!cf&&bi){cf=!0;do for(var R=!1,z=Ha;z!==null;){if(p!==0){var V=z.pendingLanes;if(V===0)var Z=0;else{var ge=z.suspendedLanes,je=z.pingedLanes;Z=(1<<31-tr(42|p)+1)-1,Z&=V&~(ge&~je),Z=Z&201326677?Z&201326677|1:Z?Z|2:0}Z!==0&&(R=!0,He(z,Z))}else Z=ri,Z=P(z,z===Di?Z:0),(Z&3)===0||B(z,Z)||(R=!0,He(z,Z));z=z.next}while(R);cf=!1}}function Pt(){bi=lo=!1;var p=0;Rs!==0&&(Yg()&&(p=Rs),Rs=0);for(var v=_r(),R=null,z=Ha;z!==null;){var V=z.next,Z=Se(z,v);Z===0?(z.next=null,R===null?Ha=V:R.next=V,V===null&&(ai=R)):(R=z,(p!==0||(Z&3)!==0)&&(bi=!0)),z=V}At(p)}function Se(p,v){for(var R=p.suspendedLanes,z=p.pingedLanes,V=p.expirationTimes,Z=p.pendingLanes&-62914561;0<Z;){var ge=31-tr(Z),je=1<<ge,We=V[ge];We===-1?((je&R)===0||(je&z)!==0)&&(V[ge]=F(je,v)):We<=v&&(p.expiredLanes|=je),Z&=~je}if(v=Di,R=ri,R=P(p,p===v?R:0),z=p.callbackNode,R===0||p===v&&Hi===2||p.cancelPendingCommit!==null)return z!==null&&z!==null&&nr(z),p.callbackNode=null,p.callbackPriority=0;if((R&3)===0||B(p,R)){if(v=R&-R,v===p.callbackPriority)return v;switch(z!==null&&nr(z),oe(R)){case 2:case 8:R=lf;break;case 32:R=Zd;break;case 268435456:R=ey;break;default:R=Zd}return z=se.bind(null,p),R=ql(R,z),p.callbackPriority=v,p.callbackNode=R,v}return z!==null&&z!==null&&nr(z),p.callbackPriority=2,p.callbackNode=null,2}function se(p,v){var R=p.callbackNode;if(zr()&&p.callbackNode!==R)return null;var z=ri;return z=P(p,p===Di?z:0),z===0?null:(Ll(p,z,v),Se(p,_r()),p.callbackNode!=null&&p.callbackNode===R?se.bind(null,p):null)}function He(p,v){if(zr())return null;Ll(p,v,!0)}function Ve(p){vm?Hr(function(){(Ri&6)!==0?ql(Hu,p):p()}):ql(Hu,p)}function Te(){return Rs===0&&(Rs=j()),Rs}function ze(p,v){if(jc===null){var R=jc=[];co=0,Qa=Te(),qu={status:"pending",value:void 0,then:function(z){R.push(z)}}}return co++,v.then(Nt,Nt),v}function Nt(){if(--co===0&&jc!==null){qu!==null&&(qu.status="fulfilled");var p=jc;jc=null,Qa=0,qu=null;for(var v=0;v<p.length;v++)(0,p[v])()}}function Dt(p,v){var R=[],z={status:"pending",value:null,reason:null,then:function(V){R.push(V)}};return p.then(function(){z.status="fulfilled",z.value=v;for(var V=0;V<R.length;V++)(0,R[V])(v)},function(V){for(z.status="rejected",z.reason=V,V=0;V<R.length;V++)(0,R[V])(void 0)}),z}function Ft(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xt(p,v){p=p.updateQueue,v.updateQueue===p&&(v.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function gt(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Ot(p,v,R){var z=p.updateQueue;if(z===null)return null;if(z=z.shared,(Ri&2)!==0){var V=z.pending;return V===null?v.next=v:(v.next=V.next,V.next=v),z.pending=v,v=Et(p),Ie(p,null,R),v}return ke(p,z,v,R),Et(p)}function Wt(p,v,R){if(v=v.updateQueue,v!==null&&(v=v.shared,(R&4194176)!==0)){var z=v.lanes;z&=p.pendingLanes,R|=z,v.lanes=R,te(p,R)}}function Ae(p,v){var R=p.updateQueue,z=p.alternate;if(z!==null&&(z=z.updateQueue,R===z)){var V=null,Z=null;if(R=R.firstBaseUpdate,R!==null){do{var ge={lane:R.lane,tag:R.tag,payload:R.payload,callback:null,next:null};Z===null?V=Z=ge:Z=Z.next=ge,R=R.next}while(R!==null);Z===null?V=Z=v:Z=Z.next=v}else V=Z=v;R={baseState:z.baseState,firstBaseUpdate:V,lastBaseUpdate:Z,shared:z.shared,callbacks:z.callbacks},p.updateQueue=R;return}p=R.lastBaseUpdate,p===null?R.firstBaseUpdate=v:p.next=v,R.lastBaseUpdate=v}function Xe(){if(Xu){var p=qu;if(p!==null)throw p}}function Mt(p,v,R,z){Xu=!1;var V=p.updateQueue;Pc=!1;var Z=V.firstBaseUpdate,ge=V.lastBaseUpdate,je=V.shared.pending;if(je!==null){V.shared.pending=null;var We=je,yt=We.next;We.next=null,ge===null?Z=yt:ge.next=yt,ge=We;var h=p.alternate;h!==null&&(h=h.updateQueue,je=h.lastBaseUpdate,je!==ge&&(je===null?h.firstBaseUpdate=yt:je.next=yt,h.lastBaseUpdate=We))}if(Z!==null){var m=V.baseState;ge=0,h=yt=We=null,je=Z;do{var N=je.lane&-536870913,U=N!==je.lane;if(U?(ri&N)===N:(z&N)===N){N!==0&&N===Qa&&(Xu=!0),h!==null&&(h=h.next={lane:0,tag:je.tag,payload:je.payload,callback:null,next:null});e:{var q=p,K=je;N=v;var xe=R;switch(K.tag){case 1:if(q=K.payload,typeof q=="function"){m=q.call(xe,m,N);break e}m=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=K.payload,N=typeof q=="function"?q.call(xe,m,N):q,N==null)break e;m=Yh({},m,N);break e;case 2:Pc=!0}}N=je.callback,N!==null&&(p.flags|=64,U&&(p.flags|=8192),U=V.callbacks,U===null?V.callbacks=[N]:U.push(N))}else U={lane:N,tag:je.tag,payload:je.payload,callback:je.callback,next:null},h===null?(yt=h=U,We=m):h=h.next=U,ge|=N;if(je=je.next,je===null){if(je=V.shared.pending,je===null)break;U=je,je=U.next,U.next=null,V.lastBaseUpdate=U,V.shared.pending=null}}while(!0);h===null&&(We=m),V.baseState=We,V.firstBaseUpdate=yt,V.lastBaseUpdate=h,Z===null&&(V.shared.lanes=0),jn|=ge,p.lanes=ge,p.memoizedState=m}}function Ne(p,v){if(typeof p!="function")throw Error(a(191,p));p.call(v)}function Qe(p,v){var R=p.callbacks;if(R!==null)for(p.callbacks=null,p=0;p<R.length;p++)Ne(R[p],v)}function bt(p,v){if(ir(p,v))return!0;if(typeof p!="object"||p===null||typeof v!="object"||v===null)return!1;var R=Object.keys(p),z=Object.keys(v);if(R.length!==z.length)return!1;for(z=0;z<R.length;z++){var V=R[z];if(!Bi.call(v,V)||!ir(p[V],v[V]))return!1}return!0}function kt(p){return p=p.status,p==="fulfilled"||p==="rejected"}function jt(){}function xt(p,v,R){switch(R=p[R],R===void 0?p.push(v):R!==v&&(v.then(jt,jt),v=R),v.status){case"fulfilled":return v.value;case"rejected":throw p=v.reason,p===Uc?Error(a(483)):p;default:if(typeof v.status=="string")v.then(jt,jt);else{if(p=Di,p!==null&&100<p.shellSuspendCounter)throw Error(a(482));p=v,p.status="pending",p.then(function(z){if(v.status==="pending"){var V=v;V.status="fulfilled",V.value=z}},function(z){if(v.status==="pending"){var V=v;V.status="rejected",V.reason=z}})}switch(v.status){case"fulfilled":return v.value;case"rejected":throw p=v.reason,p===Uc?Error(a(483)):p}throw dl=v,Uc}}function Vt(){if(dl===null)throw Error(a(459));var p=dl;return dl=null,p}function $t(p){var v=uo;return uo+=1,Kl===null&&(Kl=[]),xt(Kl,p,v)}function Xn(p,v){v=v.props.ref,p.ref=v!==void 0?v:null}function Dn(p,v){throw v.$$typeof===Vg?Error(a(525)):(p=Object.prototype.toString.call(v),Error(a(31,p==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":p)))}function ga(p){var v=p._init;return v(p._payload)}function ta(p){function v(fe,pe){if(p){var Ce=fe.deletions;Ce===null?(fe.deletions=[pe],fe.flags|=16):Ce.push(pe)}}function R(fe,pe){if(!p)return null;for(;pe!==null;)v(fe,pe),pe=pe.sibling;return null}function z(fe){for(var pe=new Map;fe!==null;)fe.key!==null?pe.set(fe.key,fe):pe.set(fe.index,fe),fe=fe.sibling;return pe}function V(fe,pe){return fe=Ir(fe,pe),fe.index=0,fe.sibling=null,fe}function Z(fe,pe,Ce){return fe.index=Ce,p?(Ce=fe.alternate,Ce!==null?(Ce=Ce.index,Ce<pe?(fe.flags|=33554434,pe):Ce):(fe.flags|=33554434,pe)):(fe.flags|=1048576,pe)}function ge(fe){return p&&fe.alternate===null&&(fe.flags|=33554434),fe}function je(fe,pe,Ce,qe){return pe===null||pe.tag!==6?(pe=np(Ce,fe.mode,qe),pe.return=fe,pe):(pe=V(pe,Ce),pe.return=fe,pe)}function We(fe,pe,Ce,qe){var pt=Ce.type;return pt===kn?h(fe,pe,Ce.props.children,qe,Ce.key):pe!==null&&(pe.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===Do&&ga(pt)===pe.type)?(pe=V(pe,Ce.props),Xn(pe,Ce),pe.return=fe,pe):(pe=al(Ce.type,Ce.key,Ce.props,null,fe.mode,qe),Xn(pe,Ce),pe.return=fe,pe)}function yt(fe,pe,Ce,qe){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Ce.containerInfo||pe.stateNode.implementation!==Ce.implementation?(pe=hm(Ce,fe.mode,qe),pe.return=fe,pe):(pe=V(pe,Ce.children||[]),pe.return=fe,pe)}function h(fe,pe,Ce,qe,pt){return pe===null||pe.tag!==7?(pe=Xa(Ce,fe.mode,qe,pt),pe.return=fe,pe):(pe=V(pe,Ce),pe.return=fe,pe)}function m(fe,pe,Ce){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return pe=np(""+pe,fe.mode,Ce),pe.return=fe,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case kd:return Ce=al(pe.type,pe.key,pe.props,null,fe.mode,Ce),Xn(Ce,pe),Ce.return=fe,Ce;case Fr:return pe=hm(pe,fe.mode,Ce),pe.return=fe,pe;case Do:var qe=pe._init;return pe=qe(pe._payload),m(fe,pe,Ce)}if(Gd(pe)||s(pe))return pe=Xa(pe,fe.mode,Ce,null),pe.return=fe,pe;if(typeof pe.then=="function")return m(fe,$t(pe),Ce);if(pe.$$typeof===kr)return m(fe,Cu(fe,pe),Ce);Dn(fe,pe)}return null}function N(fe,pe,Ce,qe){var pt=pe!==null?pe.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return pt!==null?null:je(fe,pe,""+Ce,qe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case kd:return Ce.key===pt?We(fe,pe,Ce,qe):null;case Fr:return Ce.key===pt?yt(fe,pe,Ce,qe):null;case Do:return pt=Ce._init,Ce=pt(Ce._payload),N(fe,pe,Ce,qe)}if(Gd(Ce)||s(Ce))return pt!==null?null:h(fe,pe,Ce,qe,null);if(typeof Ce.then=="function")return N(fe,pe,$t(Ce),qe);if(Ce.$$typeof===kr)return N(fe,pe,Cu(fe,Ce),qe);Dn(fe,Ce)}return null}function U(fe,pe,Ce,qe,pt){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return fe=fe.get(Ce)||null,je(pe,fe,""+qe,pt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case kd:return fe=fe.get(qe.key===null?Ce:qe.key)||null,We(pe,fe,qe,pt);case Fr:return fe=fe.get(qe.key===null?Ce:qe.key)||null,yt(pe,fe,qe,pt);case Do:var It=qe._init;return qe=It(qe._payload),U(fe,pe,Ce,qe,pt)}if(Gd(qe)||s(qe))return fe=fe.get(Ce)||null,h(pe,fe,qe,pt,null);if(typeof qe.then=="function")return U(fe,pe,Ce,$t(qe),pt);if(qe.$$typeof===kr)return U(fe,pe,Ce,Cu(pe,qe),pt);Dn(pe,qe)}return null}function q(fe,pe,Ce,qe){for(var pt=null,It=null,Bt=pe,Vn=pe=0,Sa=null;Bt!==null&&Vn<Ce.length;Vn++){Bt.index>Vn?(Sa=Bt,Bt=null):Sa=Bt.sibling;var qn=N(fe,Bt,Ce[Vn],qe);if(qn===null){Bt===null&&(Bt=Sa);break}p&&Bt&&qn.alternate===null&&v(fe,Bt),pe=Z(qn,pe,Vn),It===null?pt=qn:It.sibling=qn,It=qn,Bt=Sa}if(Vn===Ce.length)return R(fe,Bt),Kn&&Y(fe,Vn),pt;if(Bt===null){for(;Vn<Ce.length;Vn++)Bt=m(fe,Ce[Vn],qe),Bt!==null&&(pe=Z(Bt,pe,Vn),It===null?pt=Bt:It.sibling=Bt,It=Bt);return Kn&&Y(fe,Vn),pt}for(Bt=z(Bt);Vn<Ce.length;Vn++)Sa=U(Bt,fe,Vn,Ce[Vn],qe),Sa!==null&&(p&&Sa.alternate!==null&&Bt.delete(Sa.key===null?Vn:Sa.key),pe=Z(Sa,pe,Vn),It===null?pt=Sa:It.sibling=Sa,It=Sa);return p&&Bt.forEach(function($e){return v(fe,$e)}),Kn&&Y(fe,Vn),pt}function K(fe,pe,Ce,qe){if(Ce==null)throw Error(a(151));for(var pt=null,It=null,Bt=pe,Vn=pe=0,Sa=null,qn=Ce.next();Bt!==null&&!qn.done;Vn++,qn=Ce.next()){Bt.index>Vn?(Sa=Bt,Bt=null):Sa=Bt.sibling;var $e=N(fe,Bt,qn.value,qe);if($e===null){Bt===null&&(Bt=Sa);break}p&&Bt&&$e.alternate===null&&v(fe,Bt),pe=Z($e,pe,Vn),It===null?pt=$e:It.sibling=$e,It=$e,Bt=Sa}if(qn.done)return R(fe,Bt),Kn&&Y(fe,Vn),pt;if(Bt===null){for(;!qn.done;Vn++,qn=Ce.next())qn=m(fe,qn.value,qe),qn!==null&&(pe=Z(qn,pe,Vn),It===null?pt=qn:It.sibling=qn,It=qn);return Kn&&Y(fe,Vn),pt}for(Bt=z(Bt);!qn.done;Vn++,qn=Ce.next())qn=U(Bt,fe,Vn,qn.value,qe),qn!==null&&(p&&qn.alternate!==null&&Bt.delete(qn.key===null?Vn:qn.key),pe=Z(qn,pe,Vn),It===null?pt=qn:It.sibling=qn,It=qn);return p&&Bt.forEach(function(Ye){return v(fe,Ye)}),Kn&&Y(fe,Vn),pt}function xe(fe,pe,Ce,qe){if(typeof Ce=="object"&&Ce!==null&&Ce.type===kn&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case kd:e:{for(var pt=Ce.key;pe!==null;){if(pe.key===pt){if(pt=Ce.type,pt===kn){if(pe.tag===7){R(fe,pe.sibling),qe=V(pe,Ce.props.children),qe.return=fe,fe=qe;break e}}else if(pe.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===Do&&ga(pt)===pe.type){R(fe,pe.sibling),qe=V(pe,Ce.props),Xn(qe,Ce),qe.return=fe,fe=qe;break e}R(fe,pe);break}else v(fe,pe);pe=pe.sibling}Ce.type===kn?(qe=Xa(Ce.props.children,fe.mode,qe,Ce.key),qe.return=fe,fe=qe):(qe=al(Ce.type,Ce.key,Ce.props,null,fe.mode,qe),Xn(qe,Ce),qe.return=fe,fe=qe)}return ge(fe);case Fr:e:{for(pt=Ce.key;pe!==null;){if(pe.key===pt)if(pe.tag===4&&pe.stateNode.containerInfo===Ce.containerInfo&&pe.stateNode.implementation===Ce.implementation){R(fe,pe.sibling),qe=V(pe,Ce.children||[]),qe.return=fe,fe=qe;break e}else{R(fe,pe);break}else v(fe,pe);pe=pe.sibling}qe=hm(Ce,fe.mode,qe),qe.return=fe,fe=qe}return ge(fe);case Do:return pt=Ce._init,Ce=pt(Ce._payload),xe(fe,pe,Ce,qe)}if(Gd(Ce))return q(fe,pe,Ce,qe);if(s(Ce)){if(pt=s(Ce),typeof pt!="function")throw Error(a(150));return Ce=pt.call(Ce),K(fe,pe,Ce,qe)}if(typeof Ce.then=="function")return xe(fe,pe,$t(Ce),qe);if(Ce.$$typeof===kr)return xe(fe,pe,Cu(fe,Ce),qe);Dn(fe,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,pe!==null&&pe.tag===6?(R(fe,pe.sibling),qe=V(pe,Ce),qe.return=fe,fe=qe):(R(fe,pe),qe=np(Ce,fe.mode,qe),qe.return=fe,fe=qe),ge(fe)):R(fe,pe)}return function(fe,pe,Ce,qe){try{uo=0;var pt=xe(fe,pe,Ce,qe);return Kl=null,pt}catch(Bt){if(Bt===Uc)throw Bt;var It=t(29,Bt,null,fe.mode);return It.lanes=qe,It.return=fe,It}finally{}}}function la(p,v){p=ei,T(hl,p),T(Fi,v),ei=p|v.baseLanes}function Va(){T(hl,ei),T(Fi,Fi.current)}function Na(){ei=hl.current,E(Fi),E(hl)}function _s(p){var v=p.alternate;T(gs,gs.current&1),T(Xr,p),Ai===null&&(v===null||Fi.current!==null||v.memoizedState!==null)&&(Ai=p)}function to(p){if(p.tag===22){if(T(gs,gs.current),T(Xr,p),Ai===null){var v=p.alternate;v!==null&&v.memoizedState!==null&&(Ai=p)}}else Ra()}function Ra(){T(gs,gs.current),T(Xr,Xr.current)}function un(p){E(Xr),Ai===p&&(Ai=null),E(gs)}function Ss(p){for(var v=p;v!==null;){if(v.tag===13){var R=v.memoizedState;if(R!==null&&(R=R.dehydrated,R===null||cp(R)||nf(R)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}function Pi(){throw Error(a(321))}function le(p,v){if(v===null)return!1;for(var R=0;R<v.length&&R<p.length;R++)if(!ir(p[R],v[R]))return!1;return!0}function ve(p,v,R,z,V,Z){return ho=Z,Zn=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,Mn.H=p===null||p.memoizedState===null?On:Qn,fo=!1,Z=R(z,V),fo=!1,Ds&&(Z=tt(v,R,z,V)),Ue(p),Z}function Ue(p){Mn.H=Qi;var v=mn!==null&&mn.next!==null;if(ho=0,xi=mn=Zn=null,Ls=!1,Yr=0,rs=null,v)throw Error(a(300));p===null||Yi||(p=p.dependencies,p!==null&&Od(p)&&(Yi=!0))}function tt(p,v,R,z){Zn=p;var V=0;do{if(Ds&&(rs=null),Yr=0,Ds=!1,25<=V)throw Error(a(301));if(V+=1,xi=mn=null,p.updateQueue!=null){var Z=p.updateQueue;Z.lastEffect=null,Z.events=null,Z.stores=null,Z.memoCache!=null&&(Z.memoCache.index=0)}Mn.H=Ui,Z=v(R,z)}while(Ds);return Z}function at(){var p=Mn.H,v=p.useState()[0];return v=typeof v.then=="function"?Re(v):v,p=p.useState()[0],(mn!==null?mn.memoizedState:null)!==p&&(Zn.flags|=1024),v}function ut(){var p=Qd!==0;return Qd=0,p}function Lt(p,v,R){v.updateQueue=p.updateQueue,v.flags&=-2053,p.lanes&=~R}function mt(p){if(Ls){for(p=p.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Ls=!1}ho=0,xi=mn=Zn=null,Ds=!1,Yr=Qd=0,rs=null}function ce(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xi===null?Zn.memoizedState=xi=p:xi=xi.next=p,xi}function we(){if(mn===null){var p=Zn.alternate;p=p!==null?p.memoizedState:null}else p=mn.next;var v=xi===null?Zn.memoizedState:xi.next;if(v!==null)xi=v,mn=p;else{if(p===null)throw Zn.alternate===null?Error(a(467)):Error(a(310));mn=p,p={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},xi===null?Zn.memoizedState=xi=p:xi=xi.next=p}return xi}function Re(p){var v=Yr;return Yr+=1,rs===null&&(rs=[]),p=xt(rs,p,v),v=Zn,(xi===null?v.memoizedState:xi.next)===null&&(v=v.alternate,Mn.H=v===null||v.memoizedState===null?On:Qn),p}function De(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Re(p);if(p.$$typeof===kr)return hs(p)}throw Error(a(438,String(p)))}function Be(p){var v=null,R=Zn.updateQueue;if(R!==null&&(v=R.memoCache),v==null){var z=Zn.alternate;z!==null&&(z=z.updateQueue,z!==null&&(z=z.memoCache,z!=null&&(v={data:z.data.map(function(V){return V.slice()}),index:0})))}if(v==null&&(v={data:[],index:0}),R===null&&(R=Wu(),Zn.updateQueue=R),R.memoCache=v,R=v.data[v.index],R===void 0)for(R=v.data[v.index]=Array(p),z=0;z<p;z++)R[z]=Mc;return v.index++,R}function Je(p,v){return typeof v=="function"?v(p):v}function dt(p){var v=we();return _t(v,mn,p)}function _t(p,v,R){var z=p.queue;if(z===null)throw Error(a(311));z.lastRenderedReducer=R;var V=p.baseQueue,Z=z.pending;if(Z!==null){if(V!==null){var ge=V.next;V.next=Z.next,Z.next=ge}v.baseQueue=V=Z,z.pending=null}if(Z=p.baseState,V===null)p.memoizedState=Z;else{v=V.next;var je=ge=null,We=null,yt=v,h=!1;do{var m=yt.lane&-536870913;if(m!==yt.lane?(ri&m)===m:(ho&m)===m){var N=yt.revertLane;if(N===0)We!==null&&(We=We.next={lane:0,revertLane:0,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null}),m===Qa&&(h=!0);else if((ho&N)===N){yt=yt.next,N===Qa&&(h=!0);continue}else m={lane:0,revertLane:yt.revertLane,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null},We===null?(je=We=m,ge=Z):We=We.next=m,Zn.lanes|=N,jn|=N;m=yt.action,fo&&R(Z,m),Z=yt.hasEagerState?yt.eagerState:R(Z,m)}else N={lane:m,revertLane:yt.revertLane,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null},We===null?(je=We=N,ge=Z):We=We.next=N,Zn.lanes|=m,jn|=m;yt=yt.next}while(yt!==null&&yt!==v);if(We===null?ge=Z:We.next=je,!ir(Z,p.memoizedState)&&(Yi=!0,h&&(R=qu,R!==null)))throw R;p.memoizedState=Z,p.baseState=ge,p.baseQueue=We,z.lastRenderedState=Z}return V===null&&(z.lanes=0),[p.memoizedState,z.dispatch]}function vt(p){var v=we(),R=v.queue;if(R===null)throw Error(a(311));R.lastRenderedReducer=p;var z=R.dispatch,V=R.pending,Z=v.memoizedState;if(V!==null){R.pending=null;var ge=V=V.next;do Z=p(Z,ge.action),ge=ge.next;while(ge!==V);ir(Z,v.memoizedState)||(Yi=!0),v.memoizedState=Z,v.baseQueue===null&&(v.baseState=Z),R.lastRenderedState=Z}return[Z,z]}function Ut(p,v,R){var z=Zn,V=we(),Z=Kn;if(Z){if(R===void 0)throw Error(a(407));R=R()}else R=v();var ge=!ir((mn||V).memoizedState,R);if(ge&&(V.memoizedState=R,Yi=!0),V=V.queue,Bf(an.bind(null,z,V,p),[p]),V.getSnapshot!==v||ge||xi!==null&&xi.memoizedState.tag&1){if(z.flags|=2048,Xs(9,Gt.bind(null,z,V,R,v),{destroy:void 0},null),Di===null)throw Error(a(349));Z||(ho&60)!==0||Ht(z,v,R)}return R}function Ht(p,v,R){p.flags|=16384,p={getSnapshot:v,value:R},v=Zn.updateQueue,v===null?(v=Wu(),Zn.updateQueue=v,v.stores=[p]):(R=v.stores,R===null?v.stores=[p]:R.push(p))}function Gt(p,v,R,z){v.value=R,v.getSnapshot=z,sn(v)&&Ln(p)}function an(p,v,R){return R(function(){sn(v)&&Ln(p)})}function sn(p){var v=p.getSnapshot;p=p.value;try{var R=v();return!ir(p,R)}catch{return!0}}function Ln(p){var v=Le(p,2);v!==null&&ns(v,p,2)}function Kt(p){var v=ce();if(typeof p=="function"){var R=p;if(p=R(),fo){X(!0);try{R()}finally{X(!1)}}}return v.memoizedState=v.baseState=p,v.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Je,lastRenderedState:p},v}function Sn(p,v,R,z){return p.baseState=R,_t(p,mn,typeof z=="function"?z:Je)}function Qt(p,v,R,z,V){if(Md(p))throw Error(a(485));if(p=v.action,p!==null){var Z={payload:V,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ge){Z.listeners.push(ge)}};Mn.T!==null?R(!0):Z.isTransition=!1,z(Z),R=v.pending,R===null?(Z.next=v.pending=Z,vi(v,Z)):(Z.next=R.next,v.pending=R.next=Z)}}function vi(p,v){var R=v.action,z=v.payload,V=p.state;if(v.isTransition){var Z=Mn.T,ge={};Mn.T=ge;try{var je=R(V,z),We=Mn.S;We!==null&&We(ge,je),En(p,v,je)}catch(yt){na(p,v,yt)}finally{Mn.T=Z}}else try{Z=R(V,z),En(p,v,Z)}catch(yt){na(p,v,yt)}}function En(p,v,R){R!==null&&typeof R=="object"&&typeof R.then=="function"?R.then(function(z){Tn(p,v,z)},function(z){return na(p,v,z)}):Tn(p,v,R)}function Tn(p,v,R){v.status="fulfilled",v.value=R,yn(v),p.state=R,v=p.pending,v!==null&&(R=v.next,R===v?p.pending=null:(R=R.next,v.next=R,vi(p,R)))}function na(p,v,R){var z=p.pending;if(p.pending=null,z!==null){z=z.next;do v.status="rejected",v.reason=R,yn(v),v=v.next;while(v!==z)}p.action=null}function yn(p){p=p.listeners;for(var v=0;v<p.length;v++)(0,p[v])()}function $n(p,v){return v}function Gn(p,v){if(Kn){var R=Di.formState;if(R!==null){e:{var z=Zn;if(Kn){if(ka){var V=af(ka,Mi);if(V){ka=Tm(V),z=up(V);break e}}_e(z)}z=!1}z&&(v=R[0])}}R=ce(),R.memoizedState=R.baseState=v,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:v},R.queue=z,R=kf.bind(null,Zn,z),z.dispatch=R,z=Kt(!1);var Z=Eu.bind(null,Zn,!1,z.queue);return z=ce(),V={state:v,dispatch:null,action:p,pending:null},z.queue=V,R=Qt.bind(null,Zn,V,Z,R),V.dispatch=R,z.memoizedState=p,[v,R,!1]}function ha(p){var v=we();return Ei(v,mn,p)}function Ei(p,v,R){v=_t(p,v,$n)[0],p=dt(Je)[0],v=typeof v=="object"&&v!==null&&typeof v.then=="function"?Re(v):v;var z=we(),V=z.queue,Z=V.dispatch;return R!==z.memoizedState&&(Zn.flags|=2048,Xs(9,ia.bind(null,V,R),{destroy:void 0},null)),[v,Z,p]}function ia(p,v){p.action=v}function ds(p){var v=we(),R=mn;if(R!==null)return Ei(v,R,p);we(),v=v.memoizedState,R=we();var z=R.queue.dispatch;return R.memoizedState=p,[v,z,!1]}function Xs(p,v,R,z){return p={tag:p,create:v,inst:R,deps:z,next:null},v=Zn.updateQueue,v===null&&(v=Wu(),Zn.updateQueue=v),R=v.lastEffect,R===null?v.lastEffect=p.next=p:(z=R.next,R.next=p,p.next=z,v.lastEffect=p),p}function wo(){return we().memoizedState}function _d(p,v,R,z){var V=ce();Zn.flags|=p,V.memoizedState=Xs(1|v,R,{destroy:void 0},z===void 0?null:z)}function Sd(p,v,R,z){var V=we();z=z===void 0?null:z;var Z=V.memoizedState.inst;mn!==null&&z!==null&&le(z,mn.memoizedState.deps)?V.memoizedState=Xs(v,R,Z,z):(Zn.flags|=p,V.memoizedState=Xs(1|v,R,Z,z))}function Ah(p,v){_d(8390656,8,p,v)}function Bf(p,v){Sd(2048,8,p,v)}function am(p,v){return Sd(4,2,p,v)}function Nh(p,v){return Sd(4,4,p,v)}function Rh(p,v){if(typeof v=="function"){p=p();var R=v(p);return function(){typeof R=="function"?R():v(null)}}if(v!=null)return p=p(),v.current=p,function(){v.current=null}}function rc(p,v,R){R=R!=null?R.concat([p]):null,Sd(4,4,Rh.bind(null,v,p),R)}function el(){}function Kc(p,v){var R=we();v=v===void 0?null:v;var z=R.memoizedState;return v!==null&&le(v,z[1])?z[0]:(R.memoizedState=[p,v],p)}function Ed(p,v){var R=we();v=v===void 0?null:v;var z=R.memoizedState;if(v!==null&&le(v,z[1]))return z[0];if(z=p(),fo){X(!0);try{p()}finally{X(!1)}}return R.memoizedState=[z,v],z}function oc(p,v,R){return R===void 0||(ho&1073741824)!==0?p.memoizedState=v:(p.memoizedState=R,p=Gh(),Zn.lanes|=p,jn|=p,R)}function Ff(p,v,R,z){return ir(R,v)?R:Fi.current!==null?(p=oc(p,R,z),ir(p,v)||(Yi=!0),p):(ho&42)===0?(Yi=!0,p.memoizedState=R):(p=Gh(),Zn.lanes|=p,jn|=p,v)}function _u(p,v,R,z,V){var Z=is();Fa(Z!==0&&8>Z?Z:8);var ge=Mn.T,je={};Mn.T=je,Eu(p,!1,v,R);try{var We=V(),yt=Mn.S;if(yt!==null&&yt(je,We),We!==null&&typeof We=="object"&&typeof We.then=="function"){var h=Dt(We,z);Tl(p,v,h,qa(p))}else Tl(p,v,z,qa(p))}catch(m){Tl(p,v,{then:function(){},status:"rejected",reason:m},qa())}finally{Fa(Z),Mn.T=ge}}function tl(p){var v=p.memoizedState;if(v!==null)return v;v={memoizedState:Nc,baseState:Nc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Je,lastRenderedState:Nc},next:null};var R={};return v.next={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Je,lastRenderedState:R},next:null},p.memoizedState=v,p=p.alternate,p!==null&&(p.memoizedState=v),v}function wd(){return hs(ll)}function Su(){return we().memoizedState}function Ml(){return we().memoizedState}function Dh(p){for(var v=p.return;v!==null;){switch(v.tag){case 24:case 3:var R=qa();p=gt(R);var z=Ot(v,p,R);z!==null&&(ns(z,v,R),Wt(z,v,R)),v={cache:Dl()},p.payload=v;return}v=v.return}}function Oh(p,v,R){var z=qa();R={lane:z,revertLane:0,action:R,hasEagerState:!1,eagerState:null,next:null},Md(p)?Ys(v,R):(R=Ee(p,v,R,z),R!==null&&(ns(R,p,z),Cl(R,v,z)))}function kf(p,v,R){var z=qa();Tl(p,v,R,z)}function Tl(p,v,R,z){var V={lane:z,revertLane:0,action:R,hasEagerState:!1,eagerState:null,next:null};if(Md(p))Ys(v,V);else{var Z=p.alternate;if(p.lanes===0&&(Z===null||Z.lanes===0)&&(Z=v.lastRenderedReducer,Z!==null))try{var ge=v.lastRenderedState,je=Z(ge,R);if(V.hasEagerState=!0,V.eagerState=je,ir(je,ge))return ke(p,v,V,0),Di===null&&he(),!1}catch{}finally{}if(R=Ee(p,v,V,z),R!==null)return ns(R,p,z),Cl(R,v,z),!0}return!1}function Eu(p,v,R,z){if(z={lane:2,revertLane:Te(),action:z,hasEagerState:!1,eagerState:null,next:null},Md(p)){if(v)throw Error(a(479))}else v=Ee(p,R,z,2),v!==null&&ns(v,p,2)}function Md(p){var v=p.alternate;return p===Zn||v!==null&&v===Zn}function Ys(p,v){Ds=Ls=!0;var R=p.pending;R===null?v.next=v:(v.next=R.next,R.next=v),p.pending=v}function Cl(p,v,R){if((R&4194176)!==0){var z=v.lanes;z&=p.pendingLanes,R|=z,v.lanes=R,te(p,R)}}function wu(p,v,R,z){v=p.memoizedState,R=R(z,v),R=R==null?v:Yh({},v,R),p.memoizedState=R,p.lanes===0&&(p.updateQueue.baseState=R)}function Mu(p,v,R,z,V,Z,ge){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(z,Z,ge):v.prototype&&v.prototype.isPureReactComponent?!bt(R,z)||!bt(V,Z):!0}function Lg(p,v,R,z){p=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(R,z),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(R,z),v.state!==p&&po.enqueueReplaceState(v,v.state,null)}function lc(p,v){var R=v;if("ref"in v){R={};for(var z in v)z!=="ref"&&(R[z]=v[z])}if(p=p.defaultProps){R===v&&(R=Yh({},R));for(var V in p)R[V]===void 0&&(R[V]=p[V])}return R}function Tu(p,v){try{var R=p.onUncaughtError;R(v.value,{componentStack:v.stack})}catch(z){setTimeout(function(){throw z})}}function Al(p,v,R){try{var z=p.onCaughtError;z(R.value,{componentStack:R.stack,errorBoundary:v.tag===1?v.stateNode:null})}catch(V){setTimeout(function(){throw V})}}function Zc(p,v,R){return R=gt(R),R.tag=3,R.payload={element:null},R.callback=function(){Tu(p,v)},R}function Td(p){return p=gt(p),p.tag=3,p}function sm(p,v,R,z){var V=R.type.getDerivedStateFromError;if(typeof V=="function"){var Z=z.value;p.payload=function(){return V(Z)},p.callback=function(){Al(v,R,z)}}var ge=R.stateNode;ge!==null&&typeof ge.componentDidCatch=="function"&&(p.callback=function(){Al(v,R,z),typeof V!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var je=z.stack;this.componentDidCatch(z.value,{componentStack:je!==null?je:""})})}function zg(p,v,R,z,V){if(R.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){if(v=R.alternate,v!==null&&Dd(v,R,V,!0),R=Xr.current,R!==null){switch(R.tag){case 13:return Ai===null?Lr():R.alternate===null&&en===0&&(en=3),R.flags&=-257,R.flags|=65536,R.lanes=V,z===Yu?R.flags|=16384:(v=R.updateQueue,v===null?R.updateQueue=new Set([z]):v.add(z),au(p,z,V)),!1;case 22:return R.flags|=65536,z===Yu?R.flags|=16384:(v=R.updateQueue,v===null?(v={transitions:null,markerInstances:null,retryQueue:new Set([z])},R.updateQueue=v):(R=v.retryQueue,R===null?v.retryQueue=new Set([z]):R.add(z)),au(p,z,V)),!1}throw Error(a(435,R.tag))}return au(p,z,V),Lr(),!1}if(Kn)return v=Xr.current,v!==null?((v.flags&65536)===0&&(v.flags|=256),v.flags|=65536,v.lanes=V,z!==Oc&&(p=Error(a(422),{cause:z}),Pe(ee(p,R)))):(z!==Oc&&(v=Error(a(423),{cause:z}),Pe(ee(v,R))),p=p.current.alternate,p.flags|=65536,V&=-V,p.lanes|=V,z=ee(z,R),V=Zc(p.stateNode,z,V),Ae(p,V),en!==4&&(en=2)),!1;var Z=Error(a(520),{cause:z});if(Z=ee(Z,R),zc===null?zc=[Z]:zc.push(Z),en!==4&&(en=2),v===null)return!0;z=ee(z,R),R=v;do{switch(R.tag){case 3:return R.flags|=65536,p=V&-V,R.lanes|=p,p=Zc(R.stateNode,z,p),Ae(R,p),!1;case 1:if(v=R.type,Z=R.stateNode,(R.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(ys===null||!ys.has(Z))))return R.flags|=65536,V&=-V,R.lanes|=V,V=Td(V),sm(V,p,R,z),Ae(R,V),!1}R=R.return}while(R!==null);return!1}function es(p,v,R,z){v.child=p===null?Io(v,null,R,z):zo(v,p.child,R,z)}function Qc(p,v,R,z,V){R=R.render;var Z=v.ref;if("ref"in z){var ge={};for(var je in z)je!=="ref"&&(ge[je]=z[je])}else ge=z;return hc(v),z=ve(p,v,R,ge,Z,V),je=ut(),p!==null&&!Yi?(Lt(p,v,V),va(p,v,V)):(Kn&&je&&ue(v),v.flags|=1,es(p,v,z,V),v.child)}function jh(p,v,R,z,V){if(p===null){var Z=R.type;return typeof Z=="function"&&!Ci(Z)&&Z.defaultProps===void 0&&R.compare===null?(v.tag=15,v.type=Z,rm(p,v,Z,z,V)):(p=al(R.type,null,z,v,v.mode,V),p.ref=v.ref,p.return=v,v.child=p)}if(Z=p.child,!Xf(p,V)){var ge=Z.memoizedProps;if(R=R.compare,R=R!==null?R:bt,R(ge,z)&&p.ref===v.ref)return va(p,v,V)}return v.flags|=1,p=Ir(Z,z),p.ref=v.ref,p.return=v,v.child=p}function rm(p,v,R,z,V){if(p!==null){var Z=p.memoizedProps;if(bt(Z,z)&&p.ref===v.ref)if(Yi=!1,v.pendingProps=z=Z,Xf(p,V))(p.flags&131072)!==0&&(Yi=!0);else return v.lanes=p.lanes,va(p,v,V)}return nl(p,v,R,z,V)}function om(p,v,R){var z=v.pendingProps,V=z.children,Z=(v.stateNode._pendingVisibility&2)!==0,ge=p!==null?p.memoizedState:null;if(Cd(p,v),z.mode==="hidden"||Z){if((v.flags&128)!==0){if(z=ge!==null?ge.baseLanes|R:R,p!==null){for(V=v.child=p.child,Z=0;V!==null;)Z=Z|V.lanes|V.childLanes,V=V.sibling;v.childLanes=Z&~z}else v.childLanes=0,v.child=null;return cc(p,v,z,R)}if((R&536870912)!==0)v.memoizedState={baseLanes:0,cachePool:null},p!==null&&Lh(v,ge!==null?ge.cachePool:null),ge!==null?la(v,ge):Va(),to(v);else return v.lanes=v.childLanes=536870912,cc(p,v,ge!==null?ge.baseLanes|R:R,R)}else ge!==null?(Lh(v,ge.cachePool),la(v,ge),Ra(),v.memoizedState=null):(p!==null&&Lh(v,null),Va(),Ra());return es(p,v,V,R),v.child}function cc(p,v,R,z){var V=Uh();return V=V===null?null:{parent:er?ki._currentValue:ki._currentValue2,pool:V},v.memoizedState={baseLanes:R,cachePool:V},p!==null&&Lh(v,null),Va(),to(v),p!==null&&Dd(p,v,z,!0),null}function Cd(p,v){var R=v.ref;if(R===null)p!==null&&p.ref!==null&&(v.flags|=2097664);else{if(typeof R!="function"&&typeof R!="object")throw Error(a(284));(p===null||p.ref!==R)&&(v.flags|=2097664)}}function nl(p,v,R,z,V){return hc(v),R=ve(p,v,R,z,void 0,V),z=ut(),p!==null&&!Yi?(Lt(p,v,V),va(p,v,V)):(Kn&&z&&ue(v),v.flags|=1,es(p,v,R,V),v.child)}function Nl(p,v,R,z,V,Z){return hc(v),v.updateQueue=null,R=tt(v,z,R,V),Ue(p),z=ut(),p!==null&&!Yi?(Lt(p,v,Z),va(p,v,Z)):(Kn&&z&&ue(v),v.flags|=1,es(p,v,R,Z),v.child)}function Ph(p,v,R,z,V){if(hc(v),v.stateNode===null){var Z=lu,ge=R.contextType;typeof ge=="object"&&ge!==null&&(Z=hs(ge)),Z=new R(z,Z),v.memoizedState=Z.state!==null&&Z.state!==void 0?Z.state:null,Z.updater=po,v.stateNode=Z,Z._reactInternals=v,Z=v.stateNode,Z.props=z,Z.state=v.memoizedState,Z.refs={},Ft(v),ge=R.contextType,Z.context=typeof ge=="object"&&ge!==null?hs(ge):lu,Z.state=v.memoizedState,ge=R.getDerivedStateFromProps,typeof ge=="function"&&(wu(v,R,ge,z),Z.state=v.memoizedState),typeof R.getDerivedStateFromProps=="function"||typeof Z.getSnapshotBeforeUpdate=="function"||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(ge=Z.state,typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount(),ge!==Z.state&&po.enqueueReplaceState(Z,Z.state,null),Mt(v,z,Z,V),Xe(),Z.state=v.memoizedState),typeof Z.componentDidMount=="function"&&(v.flags|=4194308),z=!0}else if(p===null){Z=v.stateNode;var je=v.memoizedProps,We=lc(R,je);Z.props=We;var yt=Z.context,h=R.contextType;ge=lu,typeof h=="object"&&h!==null&&(ge=hs(h));var m=R.getDerivedStateFromProps;h=typeof m=="function"||typeof Z.getSnapshotBeforeUpdate=="function",je=v.pendingProps!==je,h||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(je||yt!==ge)&&Lg(v,Z,z,ge),Pc=!1;var N=v.memoizedState;Z.state=N,Mt(v,z,Z,V),Xe(),yt=v.memoizedState,je||N!==yt||Pc?(typeof m=="function"&&(wu(v,R,m,z),yt=v.memoizedState),(We=Pc||Mu(v,R,We,z,N,yt,ge))?(h||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(v.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=z,v.memoizedState=yt),Z.props=z,Z.state=yt,Z.context=ge,z=We):(typeof Z.componentDidMount=="function"&&(v.flags|=4194308),z=!1)}else{Z=v.stateNode,Xt(p,v),ge=v.memoizedProps,h=lc(R,ge),Z.props=h,m=v.pendingProps,N=Z.context,yt=R.contextType,We=lu,typeof yt=="object"&&yt!==null&&(We=hs(yt)),je=R.getDerivedStateFromProps,(yt=typeof je=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ge!==m||N!==We)&&Lg(v,Z,z,We),Pc=!1,N=v.memoizedState,Z.state=N,Mt(v,z,Z,V),Xe();var U=v.memoizedState;ge!==m||N!==U||Pc||p!==null&&p.dependencies!==null&&Od(p.dependencies)?(typeof je=="function"&&(wu(v,R,je,z),U=v.memoizedState),(h=Pc||Mu(v,R,h,z,N,U,We)||p!==null&&p.dependencies!==null&&Od(p.dependencies))?(yt||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(z,U,We),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(z,U,We)),typeof Z.componentDidUpdate=="function"&&(v.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof Z.componentDidUpdate!="function"||ge===p.memoizedProps&&N===p.memoizedState||(v.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ge===p.memoizedProps&&N===p.memoizedState||(v.flags|=1024),v.memoizedProps=z,v.memoizedState=U),Z.props=z,Z.state=U,Z.context=We,z=h):(typeof Z.componentDidUpdate!="function"||ge===p.memoizedProps&&N===p.memoizedState||(v.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ge===p.memoizedProps&&N===p.memoizedState||(v.flags|=1024),z=!1)}return Z=z,Cd(p,v),z=(v.flags&128)!==0,Z||z?(Z=v.stateNode,R=z&&typeof R.getDerivedStateFromError!="function"?null:Z.render(),v.flags|=1,p!==null&&z?(v.child=zo(v,p.child,null,V),v.child=zo(v,null,R,V)):es(p,v,R,V),v.memoizedState=Z.state,p=v.child):p=va(p,v,V),p}function Hf(p,v,R,z){return ft(),v.flags|=256,es(p,v,R,z),v.child}function Gf(p){return{baseLanes:p,cachePool:zh()}}function Ad(p,v,R){return p=p!==null?p.childLanes&~R:0,v&&(p|=os),p}function Jc(p,v,R){var z=v.pendingProps,V=!1,Z=(v.flags&128)!==0,ge;if((ge=Z)||(ge=p!==null&&p.memoizedState===null?!1:(gs.current&2)!==0),ge&&(V=!0,v.flags&=-129),ge=(v.flags&32)!==0,v.flags&=-33,p===null){if(Kn){if(V?_s(v):Ra(),Kn){var je=ka,We;(We=je)&&(je=d0(je,Mi),je!==null?(v.memoizedState={dehydrated:je,treeContext:Xl!==null?{id:Lo,overflow:ar}:null,retryLane:536870912},We=t(18,null,null,0),We.stateNode=je,We.return=v,v.child=We,ra=v,ka=null,We=!0):We=!1),We||_e(v)}if(je=v.memoizedState,je!==null&&(je=je.dehydrated,je!==null))return nf(je)?v.lanes=16:v.lanes=536870912,null;un(v)}return je=z.children,z=z.fallback,V?(Ra(),V=v.mode,je=Vf({mode:"hidden",children:je},V),z=Xa(z,V,R,null),je.return=v,z.return=v,je.sibling=z,v.child=je,V=v.child,V.memoizedState=Gf(R),V.childLanes=Ad(p,ge,R),v.memoizedState=cu,z):(_s(v),Nd(v,je))}if(We=p.memoizedState,We!==null&&(je=We.dehydrated,je!==null)){if(Z)v.flags&256?(_s(v),v.flags&=-257,v=Rd(p,v,R)):v.memoizedState!==null?(Ra(),v.child=p.child,v.flags|=128,v=null):(Ra(),V=z.fallback,je=v.mode,z=Vf({mode:"visible",children:z.children},je),V=Xa(V,je,R,null),V.flags|=2,z.return=v,V.return=v,z.sibling=V,v.child=z,zo(v,p.child,null,R),z=v.child,z.memoizedState=Gf(R),z.childLanes=Ad(p,ge,R),v.memoizedState=cu,v=V);else if(_s(v),nf(je))ge=wm(je).digest,z=Error(a(419)),z.stack="",z.digest=ge,Pe({value:z,source:null,stack:null}),v=Rd(p,v,R);else if(Yi||Dd(p,v,R,!1),ge=(R&p.childLanes)!==0,Yi||ge){if(ge=Di,ge!==null){if(z=R&-R,(z&42)!==0)z=1;else switch(z){case 2:z=1;break;case 8:z=4;break;case 32:z=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:z=64;break;case 268435456:z=134217728;break;default:z=0}if(z=(z&(ge.suspendedLanes|R))!==0?0:z,z!==0&&z!==We.retryLane)throw We.retryLane=z,Le(p,z),ns(ge,p,z),Zl}cp(je)||Lr(),v=Rd(p,v,R)}else cp(je)?(v.flags|=128,v.child=p.child,v=zl.bind(null,p),Mm(je,v),v=null):(p=We.treeContext,Ba&&(ka=c0(je),ra=v,Kn=!0,ss=null,Mi=!1,p!==null&&(Sr[qr++]=Lo,Sr[qr++]=ar,Sr[qr++]=Xl,Lo=p.id,ar=p.overflow,Xl=v)),v=Nd(v,z.children),v.flags|=4096);return v}return V?(Ra(),V=z.fallback,je=v.mode,We=p.child,Z=We.sibling,z=Ir(We,{mode:"hidden",children:z.children}),z.subtreeFlags=We.subtreeFlags&31457280,Z!==null?V=Ir(Z,V):(V=Xa(V,je,R,null),V.flags|=2),V.return=v,z.return=v,z.sibling=V,v.child=z,z=V,V=v.child,je=p.child.memoizedState,je===null?je=Gf(R):(We=je.cachePool,We!==null?(Z=er?ki._currentValue:ki._currentValue2,We=We.parent!==Z?{parent:Z,pool:Z}:We):We=zh(),je={baseLanes:je.baseLanes|R,cachePool:We}),V.memoizedState=je,V.childLanes=Ad(p,ge,R),v.memoizedState=cu,z):(_s(v),R=p.child,p=R.sibling,R=Ir(R,{mode:"visible",children:z.children}),R.return=v,R.sibling=null,p!==null&&(ge=v.deletions,ge===null?(v.deletions=[p],v.flags|=16):ge.push(p)),v.child=R,v.memoizedState=null,R)}function Nd(p,v){return v=Vf({mode:"visible",children:v},p.mode),v.return=p,p.child=v}function Vf(p,v){return Xh(p,v,0,null)}function Rd(p,v,R){return zo(v,p.child,null,R),p=Nd(v,v.pendingProps.children),p.flags|=2,v.memoizedState=null,p}function lm(p,v,R){p.lanes|=v;var z=p.alternate;z!==null&&(z.lanes|=v),$c(p.return,v,R)}function qf(p,v,R,z,V){var Z=p.memoizedState;Z===null?p.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:z,tail:R,tailMode:V}:(Z.isBackwards=v,Z.rendering=null,Z.renderingStartTime=0,Z.last=z,Z.tail=R,Z.tailMode=V)}function Ig(p,v,R){var z=v.pendingProps,V=z.revealOrder,Z=z.tail;if(es(p,v,z.children,R),z=gs.current,(z&2)!==0)z=z&1|2,v.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=v.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&lm(p,R,v);else if(p.tag===19)lm(p,R,v);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===v)break e;for(;p.sibling===null;){if(p.return===null||p.return===v)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}z&=1}switch(T(gs,z),V){case"forwards":for(R=v.child,V=null;R!==null;)p=R.alternate,p!==null&&Ss(p)===null&&(V=R),R=R.sibling;R=V,R===null?(V=v.child,v.child=null):(V=R.sibling,R.sibling=null),qf(v,!1,V,R,Z);break;case"backwards":for(R=null,V=v.child,v.child=null;V!==null;){if(p=V.alternate,p!==null&&Ss(p)===null){v.child=V;break}p=V.sibling,V.sibling=R,R=V,V=p}qf(v,!0,R,null,Z);break;case"together":qf(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function va(p,v,R){if(p!==null&&(v.dependencies=p.dependencies),jn|=v.lanes,(R&v.childLanes)===0)if(p!==null){if(Dd(p,v,R,!1),(R&v.childLanes)===0)return null}else return null;if(p!==null&&v.child!==p.child)throw Error(a(153));if(v.child!==null){for(p=v.child,R=Ir(p,p.pendingProps),v.child=R,R.return=v;p.sibling!==null;)p=p.sibling,R=R.sibling=Ir(p,p.pendingProps),R.return=v;R.sibling=null}return v.child}function Xf(p,v){return(p.lanes&v)!==0?!0:(p=p.dependencies,!!(p!==null&&Od(p)))}function Bg(p,v,R){switch(v.tag){case 3:ie(v,v.stateNode.containerInfo),uc(v,ki,p.memoizedState.cache),ft();break;case 27:case 5:ye(v);break;case 4:ie(v,v.stateNode.containerInfo);break;case 10:uc(v,v.type,v.memoizedProps.value);break;case 13:var z=v.memoizedState;if(z!==null)return z.dehydrated!==null?(_s(v),v.flags|=128,null):(R&v.child.childLanes)!==0?Jc(p,v,R):(_s(v),p=va(p,v,R),p!==null?p.sibling:null);_s(v);break;case 19:var V=(p.flags&128)!==0;if(z=(R&v.childLanes)!==0,z||(Dd(p,v,R,!1),z=(R&v.childLanes)!==0),V){if(z)return Ig(p,v,R);v.flags|=128}if(V=v.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),T(gs,gs.current),z)break;return null;case 22:case 23:return v.lanes=0,om(p,v,R);case 24:uc(v,ki,p.memoizedState.cache)}return va(p,v,R)}function cm(p,v,R){if(p!==null)if(p.memoizedProps!==v.pendingProps)Yi=!0;else{if(!Xf(p,R)&&(v.flags&128)===0)return Yi=!1,Bg(p,v,R);Yi=(p.flags&131072)!==0}else Yi=!1,Kn&&(v.flags&1048576)!==0&&ne(v,As,v.index);switch(v.lanes=0,v.tag){case 16:e:{p=v.pendingProps;var z=v.elementType,V=z._init;if(z=V(z._payload),v.type=z,typeof z=="function")Ci(z)?(p=lc(z,p),v.tag=1,v=Ph(null,v,z,p,R)):(v.tag=0,v=nl(null,v,z,p,R));else{if(z!=null){if(V=z.$$typeof,V===Fl){v.tag=11,v=Qc(null,v,z,p,R);break e}else if(V===Hd){v.tag=14,v=jh(null,v,z,p,R);break e}}throw v=r(z)||z,Error(a(306,v,""))}}return v;case 0:return nl(p,v,v.type,v.pendingProps,R);case 1:return z=v.type,V=lc(z,v.pendingProps),Ph(p,v,z,V,R);case 3:e:{if(ie(v,v.stateNode.containerInfo),p===null)throw Error(a(387));var Z=v.pendingProps;V=v.memoizedState,z=V.element,Xt(p,v),Mt(v,Z,null,R);var ge=v.memoizedState;if(Z=ge.cache,uc(v,ki,Z),Z!==V.cache&&dc(v,[ki],R,!0),Xe(),Z=ge.element,Ba&&V.isDehydrated)if(V={element:Z,isDehydrated:!1,cache:ge.cache},v.updateQueue.baseState=V,v.memoizedState=V,v.flags&256){v=Hf(p,v,Z,R);break e}else if(Z!==z){z=ee(Error(a(424)),v),Pe(z),v=Hf(p,v,Z,R);break e}else for(Ba&&(ka=l0(v.stateNode.containerInfo),ra=v,Kn=!0,ss=null,Mi=!0),R=Io(v,null,Z,R),v.child=R;R;)R.flags=R.flags&-3|4096,R=R.sibling;else{if(ft(),Z===z){v=va(p,v,R);break e}es(p,v,Z,R)}v=v.child}return v;case 26:if(ro)return Cd(p,v),p===null?(R=mp(v.type,null,v.pendingProps,null))?v.memoizedState=R:Kn||(v.stateNode=of(v.type,v.pendingProps,oo.current,v)):v.memoizedState=mp(v.type,p.memoizedProps,v.pendingProps,p.memoizedState),null;case 27:if(aa)return ye(v),p===null&&aa&&Kn&&(z=v.stateNode=cl(v.type,v.pendingProps,oo.current,Da.current,!1),ra=v,Mi=!0,ka=dp(z)),z=v.pendingProps.children,p!==null||Kn?es(p,v,z,R):v.child=zo(v,null,z,R),Cd(p,v),v.child;case 5:return p===null&&Kn&&(fp(v.type,v.pendingProps,Da.current),(V=z=ka)&&(z=u0(z,v.type,v.pendingProps,Mi),z!==null?(v.stateNode=z,ra=v,ka=dp(z),Mi=!1,V=!0):V=!1),V||_e(v)),ye(v),V=v.type,Z=v.pendingProps,ge=p!==null?p.memoizedProps:null,z=Z.children,Wn(V,Z)?z=null:ge!==null&&Wn(V,ge)&&(v.flags|=32),v.memoizedState!==null&&(V=ve(p,v,at,null,null,R),er?ll._currentValue=V:ll._currentValue2=V),Cd(p,v),es(p,v,z,R),v.child;case 6:return p===null&&Kn&&(g0(v.pendingProps,Da.current),(p=R=ka)&&(R=Cm(R,v.pendingProps,Mi),R!==null?(v.stateNode=R,ra=v,ka=null,p=!0):p=!1),p||_e(v)),null;case 13:return Jc(p,v,R);case 4:return ie(v,v.stateNode.containerInfo),z=v.pendingProps,p===null?v.child=zo(v,null,z,R):es(p,v,z,R),v.child;case 11:return Qc(p,v,v.type,v.pendingProps,R);case 7:return es(p,v,v.pendingProps,R),v.child;case 8:return es(p,v,v.pendingProps.children,R),v.child;case 12:return es(p,v,v.pendingProps.children,R),v.child;case 10:return z=v.pendingProps,uc(v,v.type,z.value),es(p,v,z.children,R),v.child;case 9:return V=v.type._context,z=v.pendingProps.children,hc(v),V=hs(V),z=z(V),v.flags|=1,es(p,v,z,R),v.child;case 14:return jh(p,v,v.type,v.pendingProps,R);case 15:return rm(p,v,v.type,v.pendingProps,R);case 19:return Ig(p,v,R);case 22:return om(p,v,R);case 24:return hc(v),z=hs(ki),p===null?(V=Uh(),V===null&&(V=Di,Z=Dl(),V.pooledCache=Z,Z.refCount++,Z!==null&&(V.pooledCacheLanes|=R),V=Z),v.memoizedState={parent:z,cache:V},Ft(v),uc(v,ki,V)):((p.lanes&R)!==0&&(Xt(p,v),Mt(v,null,null,R),Xe()),V=p.memoizedState,Z=v.memoizedState,V.parent!==z?(V={parent:z,cache:z},v.memoizedState=V,v.lanes===0&&(v.memoizedState=v.updateQueue.baseState=V),uc(v,ki,z)):(z=Z.cache,uc(v,ki,z),z!==V.cache&&dc(v,[ki],R,!0))),es(p,v,v.pendingProps.children,R),v.child;case 29:throw v.pendingProps}throw Error(a(156,v.tag))}function uc(p,v,R){er?(T(Wr,v._currentValue),v._currentValue=R):(T(Wr,v._currentValue2),v._currentValue2=R)}function Rl(p){var v=Wr.current;er?p._currentValue=v:p._currentValue2=v,E(Wr)}function $c(p,v,R){for(;p!==null;){var z=p.alternate;if((p.childLanes&v)!==v?(p.childLanes|=v,z!==null&&(z.childLanes|=v)):z!==null&&(z.childLanes&v)!==v&&(z.childLanes|=v),p===R)break;p=p.return}}function dc(p,v,R,z){var V=p.child;for(V!==null&&(V.return=p);V!==null;){var Z=V.dependencies;if(Z!==null){var ge=V.child;Z=Z.firstContext;e:for(;Z!==null;){var je=Z;Z=V;for(var We=0;We<v.length;We++)if(je.context===v[We]){Z.lanes|=R,je=Z.alternate,je!==null&&(je.lanes|=R),$c(Z.return,R,p),z||(ge=null);break e}Z=je.next}}else if(V.tag===18){if(ge=V.return,ge===null)throw Error(a(341));ge.lanes|=R,Z=ge.alternate,Z!==null&&(Z.lanes|=R),$c(ge,R,p),ge=null}else ge=V.child;if(ge!==null)ge.return=V;else for(ge=V;ge!==null;){if(ge===p){ge=null;break}if(V=ge.sibling,V!==null){V.return=ge.return,ge=V;break}ge=ge.return}V=ge}}function Dd(p,v,R,z){p=null;for(var V=v,Z=!1;V!==null;){if(!Z){if((V.flags&524288)!==0)Z=!0;else if((V.flags&262144)!==0)break}if(V.tag===10){var ge=V.alternate;if(ge===null)throw Error(a(387));if(ge=ge.memoizedProps,ge!==null){var je=V.type;ir(V.pendingProps.value,ge.value)||(p!==null?p.push(je):p=[je])}}else if(V===Ns.current){if(ge=V.alternate,ge===null)throw Error(a(387));ge.memoizedState.memoizedState!==V.memoizedState.memoizedState&&(p!==null?p.push(ll):p=[ll])}V=V.return}p!==null&&dc(v,p,R,z),v.flags|=262144}function Od(p){for(p=p.firstContext;p!==null;){var v=p.context;if(!ir(er?v._currentValue:v._currentValue2,p.memoizedValue))return!0;p=p.next}return!1}function hc(p){fl=p,rr=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function hs(p){return Yf(fl,p)}function Cu(p,v){return fl===null&&hc(p),Yf(p,v)}function Yf(p,v){var R=er?v._currentValue:v._currentValue2;if(v={context:v,memoizedValue:R,next:null},rr===null){if(p===null)throw Error(a(308));rr=v,p.dependencies={lanes:0,firstContext:v},p.flags|=524288}else rr=rr.next=v;return R}function Dl(){return{controller:new Ku,data:new Map,refCount:0}}function eu(p){p.refCount--,p.refCount===0&&Pm(_0,function(){p.controller.abort()})}function Uh(){var p=Er.current;return p!==null?p:Di.pooledCache}function Lh(p,v){v===null?T(Er,Er.current):T(Er,v.pool)}function zh(){var p=Uh();return p===null?null:{parent:er?ki._currentValue:ki._currentValue2,pool:p}}function mr(p){p.flags|=4}function Or(p,v){if(p!==null&&p.child===v.child)return!1;if((v.flags&16)!==0)return!0;for(p=v.child;p!==null;){if((p.flags&13878)!==0||(p.subtreeFlags&13878)!==0)return!0;p=p.sibling}return!1}function fc(p,v,R,z){if(ps)for(R=v.child;R!==null;){if(R.tag===5||R.tag===6)Jh(p,R.stateNode);else if(!(R.tag===4||aa&&R.tag===27)&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===v)break;for(;R.sibling===null;){if(R.return===null||R.return===v)return;R=R.return}R.sibling.return=R.return,R=R.sibling}else if(jo)for(var V=v.child;V!==null;){if(V.tag===5){var Z=V.stateNode;R&&z&&(Z=op(Z,V.type,V.memoizedProps)),Jh(p,Z)}else if(V.tag===6)Z=V.stateNode,R&&z&&(Z=lp(Z,V.memoizedProps)),Jh(p,Z);else if(V.tag!==4){if(V.tag===22&&V.memoizedState!==null)Z=V.child,Z!==null&&(Z.return=V),fc(p,V,!0,!0);else if(V.child!==null){V.child.return=V,V=V.child;continue}}if(V===v)break;for(;V.sibling===null;){if(V.return===null||V.return===v)return;V=V.return}V.sibling.return=V.return,V=V.sibling}}function Fg(p,v,R,z){if(jo)for(var V=v.child;V!==null;){if(V.tag===5){var Z=V.stateNode;R&&z&&(Z=op(Z,V.type,V.memoizedProps)),Em(p,Z)}else if(V.tag===6)Z=V.stateNode,R&&z&&(Z=lp(Z,V.memoizedProps)),Em(p,Z);else if(V.tag!==4){if(V.tag===22&&V.memoizedState!==null)Z=V.child,Z!==null&&(Z.return=V),Fg(p,V,!(V.memoizedProps!==null&&V.memoizedProps.mode==="manual"),!0);else if(V.child!==null){V.child.return=V,V=V.child;continue}}if(V===v)break;for(;V.sibling===null;){if(V.return===null||V.return===v)return;V=V.return}V.sibling.return=V.return,V=V.sibling}}function jd(p,v){if(jo&&Or(p,v)){p=v.stateNode;var R=p.containerInfo,z=tf();Fg(z,v,!1,!1),p.pendingChildren=z,mr(v),rp(R,z)}}function Ws(p,v,R,z){if(ps)p.memoizedProps!==z&&mr(v);else if(jo){var V=p.stateNode,Z=p.memoizedProps;if((p=Or(p,v))||Z!==z){var ge=Da.current;Z=Yd(V,R,Z,z,!p,null),Z===V?v.stateNode=V:(Ac(Z,R,z,ge)&&mr(v),v.stateNode=Z,p?fc(Z,v,!1,!1):mr(v))}else v.stateNode=V}}function Ih(p,v,R){if(ol(v,R)){if(p.flags|=16777216,!sp(v,R))if(yr())p.flags|=8192;else throw dl=Yu,Wl}else p.flags&=-16777217}function Pd(p,v){if(Rm(v)){if(p.flags|=16777216,!Fu(v))if(yr())p.flags|=8192;else throw dl=Yu,Wl}else p.flags&=-16777217}function Au(p,v){v!==null&&(p.flags|=4),p.flags&16384&&(v=p.tag!==22?O():536870912,p.lanes|=v,wr|=v)}function Nu(p,v){if(!Kn)switch(p.tailMode){case"hidden":v=p.tail;for(var R=null;v!==null;)v.alternate!==null&&(R=v),v=v.sibling;R===null?p.tail=null:R.sibling=null;break;case"collapsed":R=p.tail;for(var z=null;R!==null;)R.alternate!==null&&(z=R),R=R.sibling;z===null?v||p.tail===null?p.tail=null:p.tail.sibling=null:z.sibling=null}}function fa(p){var v=p.alternate!==null&&p.alternate.child===p.child,R=0,z=0;if(v)for(var V=p.child;V!==null;)R|=V.lanes|V.childLanes,z|=V.subtreeFlags&31457280,z|=V.flags&31457280,V.return=p,V=V.sibling;else for(V=p.child;V!==null;)R|=V.lanes|V.childLanes,z|=V.subtreeFlags,z|=V.flags,V.return=p,V=V.sibling;return p.subtreeFlags|=z,p.childLanes=R,v}function Wf(p,v,R){var z=v.pendingProps;switch(de(v),v.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fa(v),null;case 1:return fa(v),null;case 3:return R=v.stateNode,z=null,p!==null&&(z=p.memoizedState.cache),v.memoizedState.cache!==z&&(v.flags|=2048),Rl(ki),Me(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(p===null||p.child===null)&&(st(v)?mr(v):p===null||p.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,ss!==null&&(Bd(ss),ss=null))),jd(p,v),fa(v),null;case 26:if(ro){R=v.type;var V=v.memoizedState;return p===null?(mr(v),V!==null?(fa(v),Pd(v,V)):(fa(v),Ih(v,R,z))):V?V!==p.memoizedState?(mr(v),fa(v),Pd(v,V)):(fa(v),v.flags&=-16777217):(ps?p.memoizedProps!==z&&mr(v):Ws(p,v,R,z),fa(v),Ih(v,R,z)),null}case 27:if(aa){if(ae(v),R=oo.current,V=v.type,p!==null&&v.stateNode!=null)ps?p.memoizedProps!==z&&mr(v):Ws(p,v,V,z);else{if(!z){if(v.stateNode===null)throw Error(a(166));return fa(v),null}p=Da.current,st(v)?Ke(v,p):(p=cl(V,z,R,p,!0),v.stateNode=p,mr(v))}return fa(v),null}case 5:if(ae(v),R=v.type,p!==null&&v.stateNode!=null)Ws(p,v,R,z);else{if(!z){if(v.stateNode===null)throw Error(a(166));return fa(v),null}p=Da.current,st(v)?Ke(v,p):(V=mm(R,z,oo.current,p,v),fc(V,v,!1,!1),v.stateNode=V,Ac(V,R,z,p)&&mr(v))}return fa(v),Ih(v,v.type,v.pendingProps),null;case 6:if(p&&v.stateNode!=null)R=p.memoizedProps,ps?R!==z&&mr(v):jo&&(R!==z?(v.stateNode=Zi(z,oo.current,Da.current,v),mr(v)):v.stateNode=p.stateNode);else{if(typeof z!="string"&&v.stateNode===null)throw Error(a(166));if(p=oo.current,R=Da.current,st(v)){if(!Ba)throw Error(a(176));if(p=v.stateNode,R=v.memoizedProps,z=null,V=ra,V!==null)switch(V.tag){case 27:case 5:z=V.memoizedProps}Am(p,R,v,z)||_e(v)}else v.stateNode=Zi(z,p,R,v)}return fa(v),null;case 13:if(z=v.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(V=st(v),z!==null&&z.dehydrated!==null){if(p===null){if(!V)throw Error(a(318));if(!Ba)throw Error(a(344));if(V=v.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(a(317));f0(V,v)}else ft(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;fa(v),V=!1}else ss!==null&&(Bd(ss),ss=null),V=!0;if(!V)return v.flags&256?(un(v),v):(un(v),null)}if(un(v),(v.flags&128)!==0)return v.lanes=R,v;if(R=z!==null,p=p!==null&&p.memoizedState!==null,R){z=v.child,V=null,z.alternate!==null&&z.alternate.memoizedState!==null&&z.alternate.memoizedState.cachePool!==null&&(V=z.alternate.memoizedState.cachePool.pool);var Z=null;z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(Z=z.memoizedState.cachePool.pool),Z!==V&&(z.flags|=2048)}return R!==p&&R&&(v.child.flags|=8192),Au(v,v.updateQueue),fa(v),null;case 4:return Me(),jd(p,v),p===null&&yi(v.stateNode.containerInfo),fa(v),null;case 10:return Rl(v.type),fa(v),null;case 19:if(E(gs),V=v.memoizedState,V===null)return fa(v),null;if(z=(v.flags&128)!==0,Z=V.rendering,Z===null)if(z)Nu(V,!1);else{if(en!==0||p!==null&&(p.flags&128)!==0)for(p=v.child;p!==null;){if(Z=Ss(p),Z!==null){for(v.flags|=128,Nu(V,!1),p=Z.updateQueue,v.updateQueue=p,Au(v,p),v.subtreeFlags=0,p=R,R=v.child;R!==null;)qh(R,p),R=R.sibling;return T(gs,gs.current&1|2),v.child}p=p.sibling}V.tail!==null&&_r()>Fo&&(v.flags|=128,z=!0,Nu(V,!1),v.lanes=4194304)}else{if(!z)if(p=Ss(Z),p!==null){if(v.flags|=128,z=!0,p=p.updateQueue,v.updateQueue=p,Au(v,p),Nu(V,!0),V.tail===null&&V.tailMode==="hidden"&&!Z.alternate&&!Kn)return fa(v),null}else 2*_r()-V.renderingStartTime>Fo&&R!==536870912&&(v.flags|=128,z=!0,Nu(V,!1),v.lanes=4194304);V.isBackwards?(Z.sibling=v.child,v.child=Z):(p=V.last,p!==null?p.sibling=Z:v.child=Z,V.last=Z)}return V.tail!==null?(v=V.tail,V.rendering=v,V.tail=v.sibling,V.renderingStartTime=_r(),v.sibling=null,p=gs.current,T(gs,z?p&1|2:p&1),v):(fa(v),null);case 22:case 23:return un(v),Na(),z=v.memoizedState!==null,p!==null?p.memoizedState!==null!==z&&(v.flags|=8192):z&&(v.flags|=8192),z?(R&536870912)!==0&&(v.flags&128)===0&&(fa(v),v.subtreeFlags&6&&(v.flags|=8192)):fa(v),R=v.updateQueue,R!==null&&Au(v,R.retryQueue),R=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(R=p.memoizedState.cachePool.pool),z=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(z=v.memoizedState.cachePool.pool),z!==R&&(v.flags|=2048),p!==null&&E(Er),null;case 24:return R=null,p!==null&&(R=p.memoizedState.cache),v.memoizedState.cache!==R&&(v.flags|=2048),Rl(ki),fa(v),null;case 25:return null}throw Error(a(156,v.tag))}function kg(p,v){switch(de(v),v.tag){case 1:return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 3:return Rl(ki),Me(),p=v.flags,(p&65536)!==0&&(p&128)===0?(v.flags=p&-65537|128,v):null;case 26:case 27:case 5:return ae(v),null;case 13:if(un(v),p=v.memoizedState,p!==null&&p.dehydrated!==null){if(v.alternate===null)throw Error(a(340));ft()}return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 19:return E(gs),null;case 4:return Me(),null;case 10:return Rl(v.type),null;case 22:case 23:return un(v),Na(),p!==null&&E(Er),p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 24:return Rl(ki),null;case 25:return null;default:return null}}function Bh(p,v){switch(de(v),v.tag){case 3:Rl(ki),Me();break;case 26:case 27:case 5:ae(v);break;case 4:Me();break;case 13:un(v);break;case 19:E(gs);break;case 10:Rl(v.type);break;case 22:case 23:un(v),Na(),p!==null&&E(Er);break;case 24:Rl(ki)}}function pc(p,v){try{var R=v.updateQueue,z=R!==null?R.lastEffect:null;if(z!==null){var V=z.next;R=V;do{if((R.tag&p)===p){z=void 0;var Z=R.create,ge=R.inst;z=Z(),ge.destroy=z}R=R.next}while(R!==V)}}catch(je){Ii(v,v.return,je)}}function Xi(p,v,R){try{var z=v.updateQueue,V=z!==null?z.lastEffect:null;if(V!==null){var Z=V.next;z=Z;do{if((z.tag&p)===p){var ge=z.inst,je=ge.destroy;if(je!==void 0){ge.destroy=void 0,V=v;var We=R;try{je()}catch(yt){Ii(V,We,yt)}}}z=z.next}while(z!==Z)}}catch(yt){Ii(v,v.return,yt)}}function Hg(p){var v=p.updateQueue;if(v!==null){var R=p.stateNode;try{Qe(v,R)}catch(z){Ii(p,p.return,z)}}}function jr(p,v,R){R.props=lc(p.type,p.memoizedProps),R.state=p.memoizedState;try{R.componentWillUnmount()}catch(z){Ii(p,v,z)}}function Mo(p,v){try{var R=p.ref;if(R!==null){var z=p.stateNode;switch(p.tag){case 26:case 27:case 5:var V=hn(z);break;default:V=z}typeof R=="function"?p.refCleanup=R(V):R.current=V}}catch(Z){Ii(p,v,Z)}}function Es(p,v){var R=p.ref,z=p.refCleanup;if(R!==null)if(typeof z=="function")try{z()}catch(V){Ii(p,v,V)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof R=="function")try{R(null)}catch(V){Ii(p,v,V)}else R.current=null}function Ol(p){var v=p.type,R=p.memoizedProps,z=p.stateNode;try{Qv(z,v,R,p)}catch(V){Ii(p,p.return,V)}}function Kf(p,v,R){try{$g(p.stateNode,p.type,R,v,p)}catch(z){Ii(p,p.return,z)}}function Zf(p){return p.tag===5||p.tag===3||(ro?p.tag===26:!1)||(aa?p.tag===27:!1)||p.tag===4}function mc(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||Zf(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&(!aa||p.tag!==27)&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function To(p,v,R){var z=p.tag;if(z===5||z===6)p=p.stateNode,v?t0(R,p,v):bm(R,p);else if(!(z===4||aa&&z===27)&&(p=p.child,p!==null))for(To(p,v,R),p=p.sibling;p!==null;)To(p,v,R),p=p.sibling}function jl(p,v,R){var z=p.tag;if(z===5||z===6)p=p.stateNode,v?e0(R,p,v):Xd(R,p);else if(!(z===4||aa&&z===27)&&(p=p.child,p!==null))for(jl(p,v,R),p=p.sibling;p!==null;)jl(p,v,R),p=p.sibling}function Ud(p,v,R){p=p.containerInfo;try{Wd(p,R)}catch(z){Ii(v,v.return,z)}}function Ld(p,v){for(Qh(p.containerInfo),zn=v;zn!==null;)if(p=zn,v=p.child,(p.subtreeFlags&1028)!==0&&v!==null)v.return=p,zn=v;else for(;zn!==null;){p=zn;var R=p.alternate;switch(v=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((v&1024)!==0&&R!==null){v=void 0;var z=p,V=R.memoizedProps;R=R.memoizedState;var Z=z.stateNode;try{var ge=lc(z.type,V,z.elementType===z.type);v=Z.getSnapshotBeforeUpdate(ge,R),Z.__reactInternalSnapshotBeforeUpdate=v}catch(je){Ii(z,z.return,je)}}break;case 3:(v&1024)!==0&&ps&&o0(p.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((v&1024)!==0)throw Error(a(163))}if(v=p.sibling,v!==null){v.return=p.return,zn=v;break}zn=p.return}return ge=si,si=!1,ge}function zd(p,v,R){var z=R.flags;switch(R.tag){case 0:case 11:case 15:vc(p,R),z&4&&pc(5,R);break;case 1:if(vc(p,R),z&4)if(p=R.stateNode,v===null)try{p.componentDidMount()}catch(je){Ii(R,R.return,je)}else{var V=lc(R.type,v.memoizedProps);v=v.memoizedState;try{p.componentDidUpdate(V,v,p.__reactInternalSnapshotBeforeUpdate)}catch(je){Ii(R,R.return,je)}}z&64&&Hg(R),z&512&&Mo(R,R.return);break;case 3:if(vc(p,R),z&64&&(z=R.updateQueue,z!==null)){if(p=null,R.child!==null)switch(R.child.tag){case 27:case 5:p=hn(R.child.stateNode);break;case 1:p=R.child.stateNode}try{Qe(z,p)}catch(je){Ii(R,R.return,je)}}break;case 26:if(ro){vc(p,R),z&512&&Mo(R,R.return);break}case 27:case 5:vc(p,R),v===null&&z&4&&Ol(R),z&512&&Mo(R,R.return);break;case 12:vc(p,R);break;case 13:vc(p,R),z&4&&kh(p,R);break;case 22:if(V=R.memoizedState!==null||pl,!V){v=v!==null&&v.memoizedState!==null||Ni;var Z=pl,ge=Ni;pl=V,(Ni=v)&&!ge?La(p,R,(R.subtreeFlags&8772)!==0):vc(p,R),pl=Z,Ni=ge}z&512&&(R.memoizedProps.mode==="manual"?Mo(R,R.return):Es(R,R.return));break;default:vc(p,R)}}function Fh(p){var v=p.alternate;v!==null&&(p.alternate=null,Fh(v)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(v=p.stateNode,v!==null&&Cs(v)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function ts(p,v,R){for(R=R.child;R!==null;)gc(p,v,R),R=R.sibling}function gc(p,v,R){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Wa,R)}catch{}switch(R.tag){case 26:if(ro){Ni||Es(R,v),ts(p,v,R),R.memoizedState?Bu(R.memoizedState):R.stateNode&&ru(R.stateNode);break}case 27:if(aa){Ni||Es(R,v);var z=gn,V=dn;gn=R.stateNode,ts(p,v,R),Rc(R.stateNode),gn=z,dn=V;break}case 5:Ni||Es(R,v);case 6:if(ps){if(z=gn,V=dn,gn=null,ts(p,v,R),gn=z,dn=V,gn!==null)if(dn)try{n0(gn,R.stateNode)}catch(Z){Ii(R,v,Z)}else try{_m(gn,R.stateNode)}catch(Z){Ii(R,v,Z)}}else ts(p,v,R);break;case 18:ps&&gn!==null&&(dn?sf(gn,R.stateNode):m0(gn,R.stateNode));break;case 4:ps?(z=gn,V=dn,gn=R.stateNode.containerInfo,dn=!0,ts(p,v,R),gn=z,dn=V):(jo&&Ud(R.stateNode,R,tf()),ts(p,v,R));break;case 0:case 11:case 14:case 15:Ni||Xi(2,R,v),Ni||Xi(4,R,v),ts(p,v,R);break;case 1:Ni||(Es(R,v),z=R.stateNode,typeof z.componentWillUnmount=="function"&&jr(R,v,z)),ts(p,v,R);break;case 21:ts(p,v,R);break;case 22:Ni||Es(R,v),Ni=(z=Ni)||R.memoizedState!==null,ts(p,v,R),Ni=z;break;default:ts(p,v,R)}}function kh(p,v){if(Ba&&v.memoizedState===null&&(p=v.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{$v(p)}catch(R){Ii(v,v.return,R)}}function Gg(p){switch(p.tag){case 13:case 19:var v=p.stateNode;return v===null&&(v=p.stateNode=new Cn),v;case 22:return p=p.stateNode,v=p._retryCache,v===null&&(v=p._retryCache=new Cn),v;default:throw Error(a(435,p.tag))}}function Pl(p,v){var R=Gg(p);v.forEach(function(z){var V=No.bind(null,p,z);R.has(z)||(R.add(z),z.then(V,V))})}function Ks(p,v){var R=v.deletions;if(R!==null)for(var z=0;z<R.length;z++){var V=R[z],Z=p,ge=v;if(ps){var je=ge;e:for(;je!==null;){switch(je.tag){case 27:case 5:gn=je.stateNode,dn=!1;break e;case 3:gn=je.stateNode.containerInfo,dn=!0;break e;case 4:gn=je.stateNode.containerInfo,dn=!0;break e}je=je.return}if(gn===null)throw Error(a(160));gc(Z,ge,V),gn=null,dn=!1}else gc(Z,ge,V);Z=V.alternate,Z!==null&&(Z.return=null),V.return=null}if(v.subtreeFlags&13878)for(v=v.child;v!==null;)no(v,p),v=v.sibling}function no(p,v){var R=p.alternate,z=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Ks(v,p),Zs(p),z&4&&(Xi(3,p,p.return),pc(3,p),Xi(5,p,p.return));break;case 1:Ks(v,p),Zs(p),z&512&&(Ni||R===null||Es(R,R.return)),z&64&&pl&&(p=p.updateQueue,p!==null&&(z=p.callbacks,z!==null&&(R=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=R===null?z:R.concat(z))));break;case 26:if(ro){var V=ba;Ks(v,p),Zs(p),z&512&&(Ni||R===null||Es(R,R.return)),z&4&&(z=R!==null?R.memoizedState:null,v=p.memoizedState,R===null?v===null?p.stateNode===null?p.stateNode=br(V,p.type,p.memoizedProps,p):Kd(V,p.type,p.stateNode):p.stateNode=v0(V,v,p.memoizedProps):z!==v?(z===null?R.stateNode!==null&&ru(R.stateNode):Bu(z),v===null?Kd(V,p.type,p.stateNode):v0(V,v,p.memoizedProps)):v===null&&p.stateNode!==null&&Kf(p,p.memoizedProps,R.memoizedProps));break}case 27:if(aa&&z&4&&p.alternate===null){V=p.stateNode;var Z=p.memoizedProps;try{ou(V),y0(p.type,Z,V,p)}catch(h){Ii(p,p.return,h)}}case 5:if(Ks(v,p),Zs(p),z&512&&(Ni||R===null||Es(R,R.return)),ps){if(p.flags&32){v=p.stateNode;try{Sm(v)}catch(h){Ii(p,p.return,h)}}z&4&&p.stateNode!=null&&(v=p.memoizedProps,Kf(p,v,R!==null?R.memoizedProps:v)),z&1024&&(Bo=!0)}break;case 6:if(Ks(v,p),Zs(p),z&4&&ps){if(p.stateNode===null)throw Error(a(162));z=p.memoizedProps,R=R!==null?R.memoizedProps:z,v=p.stateNode;try{Jg(v,R,z)}catch(h){Ii(p,p.return,h)}}break;case 3:if(ro?(Nm(),V=ba,ba=pp(v.containerInfo),Ks(v,p),ba=V):Ks(v,p),Zs(p),z&4){if(ps&&Ba&&R!==null&&R.memoizedState.isDehydrated)try{Jv(v.containerInfo)}catch(h){Ii(p,p.return,h)}if(jo){z=v.containerInfo,R=v.pendingChildren;try{Wd(z,R)}catch(h){Ii(p,p.return,h)}}}Bo&&(Bo=!1,um(p));break;case 4:ro?(R=ba,ba=pp(p.stateNode.containerInfo),Ks(v,p),Zs(p),ba=R):(Ks(v,p),Zs(p)),z&4&&jo&&Ud(p.stateNode,p,p.stateNode.pendingChildren);break;case 12:Ks(v,p),Zs(p);break;case 13:Ks(v,p),Zs(p),p.child.flags&8192&&p.memoizedState!==null!=(R!==null&&R.memoizedState!==null)&&(Ka=_r()),z&4&&(z=p.updateQueue,z!==null&&(p.updateQueue=null,Pl(p,z)));break;case 22:z&512&&(Ni||R===null||Es(R,R.return)),V=p.memoizedState!==null;var ge=R!==null&&R.memoizedState!==null,je=pl,We=Ni;if(pl=je||V,Ni=We||ge,Ks(v,p),Ni=We,pl=je,Zs(p),v=p.stateNode,v._current=p,v._visibility&=-3,v._visibility|=v._pendingVisibility&2,z&8192&&(v._visibility=V?v._visibility&-2:v._visibility|1,V&&(v=pl||Ni,R===null||ge||v||tu(p)),ps&&(p.memoizedProps===null||p.memoizedProps.mode!=="manual"))){e:if(R=null,ps)for(v=p;;){if(v.tag===5||ro&&v.tag===26||aa&&v.tag===27){if(R===null){ge=R=v;try{Z=ge.stateNode,V?i0(Z):s0(ge.stateNode,ge.memoizedProps)}catch(h){Ii(ge,ge.return,h)}}}else if(v.tag===6){if(R===null){ge=v;try{var yt=ge.stateNode;V?a0(yt):r0(yt,ge.memoizedProps)}catch(h){Ii(ge,ge.return,h)}}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===p)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break e;for(;v.sibling===null;){if(v.return===null||v.return===p)break e;R===v&&(R=null),v=v.return}R===v&&(R=null),v.sibling.return=v.return,v=v.sibling}}z&4&&(z=p.updateQueue,z!==null&&(R=z.retryQueue,R!==null&&(z.retryQueue=null,Pl(p,R))));break;case 19:Ks(v,p),Zs(p),z&4&&(z=p.updateQueue,z!==null&&(p.updateQueue=null,Pl(p,z)));break;case 21:break;default:Ks(v,p),Zs(p)}}function Zs(p){var v=p.flags;if(v&2){try{if(ps&&(!aa||p.tag!==27)){e:{for(var R=p.return;R!==null;){if(Zf(R)){var z=R;break e}R=R.return}throw Error(a(160))}switch(z.tag){case 27:if(aa){var V=z.stateNode,Z=mc(p);jl(p,Z,V);break}case 5:var ge=z.stateNode;z.flags&32&&(Sm(ge),z.flags&=-33);var je=mc(p);jl(p,je,ge);break;case 3:case 4:var We=z.stateNode.containerInfo,yt=mc(p);To(p,yt,We);break;default:throw Error(a(161))}}}catch(h){Ii(p,p.return,h)}p.flags&=-3}v&4096&&(p.flags&=-4097)}function um(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var v=p;um(v),v.tag===5&&v.flags&1024&&ef(v.stateNode),p=p.sibling}}function vc(p,v){if(v.subtreeFlags&8772)for(v=v.child;v!==null;)zd(p,v.alternate,v),v=v.sibling}function tu(p){for(p=p.child;p!==null;){var v=p;switch(v.tag){case 0:case 11:case 14:case 15:Xi(4,v,v.return),tu(v);break;case 1:Es(v,v.return);var R=v.stateNode;typeof R.componentWillUnmount=="function"&&jr(v,v.return,R),tu(v);break;case 26:case 27:case 5:Es(v,v.return),tu(v);break;case 22:Es(v,v.return),v.memoizedState===null&&tu(v);break;default:tu(v)}p=p.sibling}}function La(p,v,R){for(R=R&&(v.subtreeFlags&8772)!==0,v=v.child;v!==null;){var z=v.alternate,V=p,Z=v,ge=Z.flags;switch(Z.tag){case 0:case 11:case 15:La(V,Z,R),pc(4,Z);break;case 1:if(La(V,Z,R),z=Z,V=z.stateNode,typeof V.componentDidMount=="function")try{V.componentDidMount()}catch(yt){Ii(z,z.return,yt)}if(z=Z,V=z.updateQueue,V!==null){var je=z.stateNode;try{var We=V.shared.hiddenCallbacks;if(We!==null)for(V.shared.hiddenCallbacks=null,V=0;V<We.length;V++)Ne(We[V],je)}catch(yt){Ii(z,z.return,yt)}}R&&ge&64&&Hg(Z),Mo(Z,Z.return);break;case 26:case 27:case 5:La(V,Z,R),R&&z===null&&ge&4&&Ol(Z),Mo(Z,Z.return);break;case 12:La(V,Z,R);break;case 13:La(V,Z,R),R&&ge&4&&kh(V,Z);break;case 22:Z.memoizedState===null&&La(V,Z,R),Mo(Z,Z.return);break;default:La(V,Z,R)}v=v.sibling}}function Hh(p,v){var R=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(R=p.memoizedState.cachePool.pool),p=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(p=v.memoizedState.cachePool.pool),p!==R&&(p!=null&&p.refCount++,R!=null&&eu(R))}function ws(p,v){p=null,v.alternate!==null&&(p=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==p&&(v.refCount++,p!=null&&eu(p))}function fs(p,v,R,z){if(v.subtreeFlags&10256)for(v=v.child;v!==null;)Ul(p,v,R,z),v=v.sibling}function Ul(p,v,R,z){var V=v.flags;switch(v.tag){case 0:case 11:case 15:fs(p,v,R,z),V&2048&&pc(9,v);break;case 3:fs(p,v,R,z),V&2048&&(p=null,v.alternate!==null&&(p=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==p&&(v.refCount++,p!=null&&eu(p)));break;case 12:if(V&2048){fs(p,v,R,z),p=v.stateNode;try{var Z=v.memoizedProps,ge=Z.id,je=Z.onPostCommit;typeof je=="function"&&je(ge,v.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(We){Ii(v,v.return,We)}}else fs(p,v,R,z);break;case 23:break;case 22:Z=v.stateNode,v.memoizedState!==null?Z._visibility&4?fs(p,v,R,z):Ia(p,v):Z._visibility&4?fs(p,v,R,z):(Z._visibility|=4,za(p,v,R,z,(v.subtreeFlags&10256)!==0)),V&2048&&Hh(v.alternate,v);break;case 24:fs(p,v,R,z),V&2048&&ws(v.alternate,v);break;default:fs(p,v,R,z)}}function za(p,v,R,z,V){for(V=V&&(v.subtreeFlags&10256)!==0,v=v.child;v!==null;){var Z=p,ge=v,je=R,We=z,yt=ge.flags;switch(ge.tag){case 0:case 11:case 15:za(Z,ge,je,We,V),pc(8,ge);break;case 23:break;case 22:var h=ge.stateNode;ge.memoizedState!==null?h._visibility&4?za(Z,ge,je,We,V):Ia(Z,ge):(h._visibility|=4,za(Z,ge,je,We,V)),V&&yt&2048&&Hh(ge.alternate,ge);break;case 24:za(Z,ge,je,We,V),V&&yt&2048&&ws(ge.alternate,ge);break;default:za(Z,ge,je,We,V)}v=v.sibling}}function Ia(p,v){if(v.subtreeFlags&10256)for(v=v.child;v!==null;){var R=p,z=v,V=z.flags;switch(z.tag){case 22:Ia(R,z),V&2048&&Hh(z.alternate,z);break;case 24:Ia(R,z),V&2048&&ws(z.alternate,z);break;default:Ia(R,z)}v=v.sibling}}function Pr(p){if(p.subtreeFlags&Ja)for(p=p.child;p!==null;)Id(p),p=p.sibling}function Id(p){switch(p.tag){case 26:Pr(p),p.flags&Ja&&(p.memoizedState!==null?Dm(ba,p.memoizedState,p.memoizedProps):xr(p.type,p.memoizedProps));break;case 5:Pr(p),p.flags&Ja&&xr(p.type,p.memoizedProps);break;case 3:case 4:if(ro){var v=ba;ba=pp(p.stateNode.containerInfo),Pr(p),ba=v}else Pr(p);break;case 22:p.memoizedState===null&&(v=p.alternate,v!==null&&v.memoizedState!==null?(v=Ja,Ja=16777216,Pr(p),Ja=v):Pr(p));break;default:Pr(p)}}function Ur(p){var v=p.alternate;if(v!==null&&(p=v.child,p!==null)){v.child=null;do v=p.sibling,p.sibling=null,p=v;while(p!==null)}}function yc(p){var v=p.deletions;if((p.flags&16)!==0){if(v!==null)for(var R=0;R<v.length;R++){var z=v[R];zn=z,bc(z,p)}Ur(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)xc(p),p=p.sibling}function xc(p){switch(p.tag){case 0:case 11:case 15:yc(p),p.flags&2048&&Xi(9,p,p.return);break;case 3:yc(p);break;case 12:yc(p);break;case 22:var v=p.stateNode;p.memoizedState!==null&&v._visibility&4&&(p.return===null||p.return.tag!==13)?(v._visibility&=-5,io(p)):yc(p);break;default:yc(p)}}function io(p){var v=p.deletions;if((p.flags&16)!==0){if(v!==null)for(var R=0;R<v.length;R++){var z=v[R];zn=z,bc(z,p)}Ur(p)}for(p=p.child;p!==null;){switch(v=p,v.tag){case 0:case 11:case 15:Xi(8,v,v.return),io(v);break;case 22:R=v.stateNode,R._visibility&4&&(R._visibility&=-5,io(v));break;default:io(v)}p=p.sibling}}function bc(p,v){for(;zn!==null;){var R=zn;switch(R.tag){case 0:case 11:case 15:Xi(8,R,v);break;case 23:case 22:if(R.memoizedState!==null&&R.memoizedState.cachePool!==null){var z=R.memoizedState.cachePool.pool;z!=null&&z.refCount++}break;case 24:eu(R.memoizedState.cache)}if(z=R.child,z!==null)z.return=R,zn=z;else e:for(R=p;zn!==null;){z=zn;var V=z.sibling,Z=z.return;if(Fh(z),z===R){zn=null;break e}if(V!==null){V.return=Z,zn=V;break e}zn=Z}}}function Ru(p){var v=kl(p);if(v!=null){if(typeof v.memoizedProps["data-testname"]!="string")throw Error(a(364));return v}if(p=ym(p),p===null)throw Error(a(362));return p.stateNode.current}function _c(p,v){var R=p.tag;switch(v.$$typeof){case uu:if(p.type===v.value)return!0;break;case mo:e:{for(v=v.value,p=[p,0],R=0;R<p.length;){var z=p[R++],V=z.tag,Z=p[R++],ge=v[Z];if(V!==5&&V!==26&&V!==27||!Hl(z)){for(;ge!=null&&_c(z,ge);)Z++,ge=v[Z];if(Z===v.length){v=!0;break e}else for(z=z.child;z!==null;)p.push(z,Z),z=z.sibling}}v=!1}return v;case Jn:if((R===5||R===26||R===27)&&Kg(p.stateNode,v.value))return!0;break;case Ga:if((R===5||R===6||R===26||R===27)&&(p=Wg(p),p!==null&&0<=p.indexOf(v.value)))return!0;break;case Wi:if((R===5||R===26||R===27)&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===v.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Du(p){switch(p.$$typeof){case uu:return"<"+(r(p.value)||"Unknown")+">";case mo:return":has("+(Du(p)||"")+")";case Jn:return'[role="'+p.value+'"]';case Ga:return'"'+p.value+'"';case Wi:return'[data-testname="'+p.value+'"]';default:throw Error(a(365))}}function gr(p,v){var R=[];p=[p,0];for(var z=0;z<p.length;){var V=p[z++],Z=V.tag,ge=p[z++],je=v[ge];if(Z!==5&&Z!==26&&Z!==27||!Hl(V)){for(;je!=null&&_c(V,je);)ge++,je=v[ge];if(ge===v.length)R.push(V);else for(V=V.child;V!==null;)p.push(V,ge),V=V.sibling}}return R}function nu(p,v){if(!Gr)throw Error(a(363));p=Ru(p),p=gr(p,v),v=[],p=Array.from(p);for(var R=0;R<p.length;){var z=p[R++],V=z.tag;if(V===5||V===26||V===27)Hl(z)||v.push(z.stateNode);else for(z=z.child;z!==null;)p.push(z),z=z.sibling}return v}function qa(){if((Ri&2)!==0&&ri!==0)return ri&-ri;if(Mn.T!==null){var p=Qa;return p!==0?p:Te()}return Xg()}function Gh(){os===0&&(os=(ri&536870912)===0||Kn?j():536870912);var p=Xr.current;return p!==null&&(p.flags|=32),os}function ns(p,v,R){(p===Di&&Hi===2||p.cancelPendingCommit!==null)&&(Ts(p,0),vr(p,ri,os,!1)),W(p,R),((Ri&2)===0||p!==Di)&&(p===Di&&((Ri&2)===0&&(pi|=R),en===4&&vr(p,ri,os,!1)),ct(p))}function Ll(p,v,R){if((Ri&6)!==0)throw Error(a(327));var z=!R&&(v&60)===0&&(v&p.expiredLanes)===0||B(p,v),V=z?Jf(p,v):Vh(p,v,!0),Z=z;do{if(V===0){go&&!z&&vr(p,v,0,!1);break}else if(V===6)vr(p,v,0,!or);else{if(R=p.current.alternate,Z&&!Ms(R)){V=Vh(p,v,!1),Z=!1;continue}if(V===2){if(Z=v,p.errorRecoveryDisabledLanes&Z)var ge=0;else ge=p.pendingLanes&-536870913,ge=ge!==0?ge:ge&536870912?536870912:0;if(ge!==0){v=ge;e:{var je=p;V=zc;var We=Ba&&je.current.memoizedState.isDehydrated;if(We&&(Ts(je,ge).flags|=256),ge=Vh(je,ge,!1),ge!==2){if(bn&&!We){je.errorRecoveryDisabledLanes|=Z,pi|=Z,V=4;break e}Z=Ki,Ki=V,Z!==null&&Bd(Z)}V=ge}if(Z=!1,V!==2)continue}}if(V===1){Ts(p,0),vr(p,v,0,!0);break}e:{switch(z=p,V){case 0:case 1:throw Error(a(345));case 4:if((v&4194176)===v){vr(z,v,os,!or);break e}break;case 2:Ki=null;break;case 3:case 5:break;default:throw Error(a(329))}if(z.finishedWork=R,z.finishedLanes=v,(v&62914560)===v&&(Z=Ka+300-_r(),10<Z)){if(vr(z,v,os,!or),P(z,0)!==0)break e;z.timeoutHandle=Ya(Fd.bind(null,z,R,Ki,Qu,_a,v,os,pi,wr,or,2,-0,0),Z);break e}Fd(z,R,Ki,Qu,_a,v,os,pi,wr,or,0,-0,0)}}break}while(!0);ct(p)}function Bd(p){Ki===null?Ki=p:Ki.push.apply(Ki,p)}function Fd(p,v,R,z,V,Z,ge,je,We,yt,h,m,N){var U=v.subtreeFlags;if((U&8192||(U&16785408)===16785408)&&(gm(),Id(v),v=as(),v!==null)){p.cancelPendingCommit=v(Sc.bind(null,p,R,z,V,ge,je,We,1,m,N)),vr(p,Z,ge,!yt);return}Sc(p,R,z,V,ge,je,We,h,m,N)}function Ms(p){for(var v=p;;){var R=v.tag;if((R===0||R===11||R===15)&&v.flags&16384&&(R=v.updateQueue,R!==null&&(R=R.stores,R!==null)))for(var z=0;z<R.length;z++){var V=R[z],Z=V.getSnapshot;V=V.value;try{if(!ir(Z(),V))return!1}catch{return!1}}if(R=v.child,v.subtreeFlags&16384&&R!==null)R.return=v,v=R;else{if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function vr(p,v,R,z){v&=~Bs,v&=~pi,p.suspendedLanes|=v,p.pingedLanes&=~v,z&&(p.warmLanes|=v),z=p.expirationTimes;for(var V=v;0<V;){var Z=31-tr(V),ge=1<<Z;z[Z]=-1,V&=~ge}R!==0&&J(p,R,v)}function Us(){return(Ri&6)===0?(At(0),!1):!0}function Ou(){if(xn!==null){if(Hi===0)var p=xn.return;else p=xn,rr=fl=null,mt(p),Kl=null,uo=0,p=xn;for(;p!==null;)Bh(p.alternate,p),p=p.return;xn=null}}function Ts(p,v){p.finishedWork=null,p.finishedLanes=0;var R=p.timeoutHandle;R!==rl&&(p.timeoutHandle=rl,$h(R)),R=p.cancelPendingCommit,R!==null&&(p.cancelPendingCommit=null,R()),Ou(),Di=p,xn=R=Ir(p.current,null),ri=v,Hi=0,vs=null,or=!1,go=B(p,v),bn=!1,wr=os=Bs=pi=jn=en=0,Ki=zc=null,_a=!1,(v&8)!==0&&(v|=v&32);var z=p.entangledLanes;if(z!==0)for(p=p.entanglements,z&=v;0<z;){var V=31-tr(z),Z=1<<V;v|=p[V],z&=~Z}return ei=v,he(),R}function ao(p,v){Zn=null,Mn.H=Qi,v===Uc?(v=Vt(),Hi=3):v===Wl?(v=Vt(),Hi=4):Hi=v===Zl?8:v!==null&&typeof v=="object"&&typeof v.then=="function"?6:1,vs=v,xn===null&&(en=1,Tu(p,ee(v,p.current)))}function yr(){var p=Xr.current;return p===null?!0:(ri&4194176)===ri?Ai===null:(ri&62914560)===ri||(ri&536870912)!==0?p===Ai:!1}function il(){var p=Mn.H;return Mn.H=Qi,p===null?Qi:p}function Co(){var p=Mn.A;return Mn.A=pa,p}function Lr(){en=4,or||(ri&4194176)!==ri&&Xr.current!==null||(go=!0),(jn&134217727)===0&&(pi&134217727)===0||Di===null||vr(Di,ri,os,!1)}function Vh(p,v,R){var z=Ri;Ri|=2;var V=il(),Z=Co();(Di!==p||ri!==v)&&(Qu=null,Ts(p,v)),v=!1;var ge=en;e:do try{if(Hi!==0&&xn!==null){var je=xn,We=vs;switch(Hi){case 8:Ou(),ge=6;break e;case 3:case 2:case 6:Xr.current===null&&(v=!0);var yt=Hi;if(Hi=0,vs=null,Ao(p,je,We,yt),R&&go){ge=0;break e}break;default:yt=Hi,Hi=0,vs=null,Ao(p,je,We,yt)}}Qf(),ge=en;break}catch(h){ao(p,h)}while(!0);return v&&p.shellSuspendCounter++,rr=fl=null,Ri=z,Mn.H=V,Mn.A=Z,xn===null&&(Di=null,ri=0,he()),ge}function Qf(){for(;xn!==null;)ya(xn)}function Jf(p,v){var R=Ri;Ri|=2;var z=il(),V=Co();Di!==p||ri!==v?(Qu=null,Fo=_r()+500,Ts(p,v)):go=B(p,v);e:do try{if(Hi!==0&&xn!==null){v=xn;var Z=vs;t:switch(Hi){case 1:Hi=0,vs=null,Ao(p,v,Z,1);break;case 2:if(kt(Z)){Hi=0,vs=null,wi(v);break}v=function(){Hi===2&&Di===p&&(Hi=7),ct(p)},Z.then(v,v);break e;case 3:Hi=7;break e;case 4:Hi=5;break e;case 7:kt(Z)?(Hi=0,vs=null,wi(v)):(Hi=0,vs=null,Ao(p,v,Z,7));break;case 5:var ge=null;switch(xn.tag){case 26:ge=xn.memoizedState;case 5:case 27:var je=xn,We=je.type,yt=je.pendingProps;if(ge?Fu(ge):sp(We,yt)){Hi=0,vs=null;var h=je.sibling;if(h!==null)xn=h;else{var m=je.return;m!==null?(xn=m,so(m)):xn=null}break t}}Hi=0,vs=null,Ao(p,v,Z,5);break;case 6:Hi=0,vs=null,Ao(p,v,Z,6);break;case 8:Ou(),en=6;break e;default:throw Error(a(462))}}Qs();break}catch(N){ao(p,N)}while(!0);return rr=fl=null,Mn.H=z,Mn.A=V,Ri=R,xn!==null?0:(Di=null,ri=0,he(),en)}function Qs(){for(;xn!==null&&!x0();)ya(xn)}function ya(p){var v=cm(p.alternate,p,ei);p.memoizedProps=p.pendingProps,v===null?so(p):xn=v}function wi(p){var v=p,R=v.alternate;switch(v.tag){case 15:case 0:v=Nl(R,v,v.pendingProps,v.type,void 0,ri);break;case 11:v=Nl(R,v,v.pendingProps,v.type.render,v.ref,ri);break;case 5:mt(v);default:Bh(R,v),v=xn=qh(v,ei),v=cm(R,v,ei)}p.memoizedProps=p.pendingProps,v===null?so(p):xn=v}function Ao(p,v,R,z){rr=fl=null,mt(v),Kl=null,uo=0;var V=v.return;try{if(zg(p,V,v,R,ri)){en=1,Tu(p,ee(R,p.current)),xn=null;return}}catch(Z){if(V!==null)throw xn=V,Z;en=1,Tu(p,ee(R,p.current)),xn=null;return}v.flags&32768?(Kn||z===1?p=!0:go||(ri&536870912)!==0?p=!1:(or=p=!0,(z===2||z===3||z===6)&&(z=Xr.current,z!==null&&z.tag===13&&(z.flags|=16384))),$f(v,p)):so(v)}function so(p){var v=p;do{if((v.flags&32768)!==0){$f(v,or);return}p=v.return;var R=Wf(v.alternate,v,ei);if(R!==null){xn=R;return}if(v=v.sibling,v!==null){xn=v;return}xn=v=p}while(v!==null);en===0&&(en=5)}function $f(p,v){do{var R=kg(p.alternate,p);if(R!==null){R.flags&=32767,xn=R;return}if(R=p.return,R!==null&&(R.flags|=32768,R.subtreeFlags=0,R.deletions=null),!v&&(p=p.sibling,p!==null)){xn=p;return}xn=p=R}while(p!==null);en=6,xn=null}function Sc(p,v,R,z,V,Z,ge,je,We,yt){var h=Mn.T,m=is();try{Fa(2),Mn.T=null,dm(p,v,R,z,m,V,Z,ge,je,We,yt)}finally{Mn.T=h,Fa(m)}}function dm(p,v,R,z,V,Z,ge,je){do zr();while(Kr!==null);if((Ri&6)!==0)throw Error(a(327));var We=p.finishedWork;if(z=p.finishedLanes,We===null)return null;if(p.finishedWork=null,p.finishedLanes=0,We===p.current)throw Error(a(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var yt=We.lanes|We.childLanes;if(yt|=xa,Q(p,z,yt,Z,ge,je),p===Di&&(xn=Di=null,ri=0),(We.subtreeFlags&10256)===0&&(We.flags&10256)===0||lr||(lr=!0,Ql=yt,Jd=R,Il(Zd,function(){return zr(),null})),R=(We.flags&15990)!==0,(We.subtreeFlags&15990)!==0||R?(R=Mn.T,Mn.T=null,Z=is(),Fa(2),ge=Ri,Ri|=4,Ld(p,We),no(We,p),qd(p.containerInfo),p.current=We,zd(p,We.alternate,We),gp(),Ri=ge,Fa(Z),Mn.T=R):p.current=We,lr?(lr=!1,Kr=p,ls=z):iu(p,yt),yt=p.pendingLanes,yt===0&&(ys=null),$(We.stateNode),ct(p),v!==null)for(V=p.onRecoverableError,We=0;We<v.length;We++)yt=v[We],V(yt.value,{componentStack:yt.stack});return(ls&3)!==0&&zr(),yt=p.pendingLanes,(z&4194218)!==0&&(yt&42)!==0?p===Ju?Jl++:(Jl=0,Ju=p):Jl=0,At(0),null}function iu(p,v){(p.pooledCacheLanes&=v)===0&&(v=p.pooledCache,v!=null&&(p.pooledCache=null,eu(v)))}function zr(){if(Kr!==null){var p=Kr,v=Ql;Ql=0;var R=oe(ls),z=32>R?32:R;R=Mn.T;var V=is();try{if(Fa(z),Mn.T=null,Kr===null)var Z=!1;else{z=Jd,Jd=null;var ge=Kr,je=ls;if(Kr=null,ls=0,(Ri&6)!==0)throw Error(a(331));var We=Ri;if(Ri|=4,xc(ge.current),Ul(ge,ge.current,je,z),Ri=We,At(0,!1),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Wa,ge)}catch{}Z=!0}return Z}finally{Fa(V),Mn.T=R,iu(p,v)}}return!1}function ju(p,v,R){v=ee(R,v),v=Zc(p.stateNode,v,2),p=Ot(p,v,2),p!==null&&(W(p,2),ct(p))}function Ii(p,v,R){if(p.tag===3)ju(p,p,R);else for(;v!==null;){if(v.tag===3){ju(v,p,R);break}else if(v.tag===1){var z=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(ys===null||!ys.has(z))){p=ee(R,p),R=Td(2),z=Ot(v,R,2),z!==null&&(sm(R,z,v,p),W(z,2),ct(z));break}}v=v.return}}function au(p,v,R){var z=p.pingCache;if(z===null){z=p.pingCache=new Is;var V=new Set;z.set(v,V)}else V=z.get(v),V===void 0&&(V=new Set,z.set(v,V));V.has(R)||(bn=!0,V.add(R),p=ep.bind(null,p,v,R),v.then(p,p))}function ep(p,v,R){var z=p.pingCache;z!==null&&z.delete(v),p.pingedLanes|=p.suspendedLanes&R,p.warmLanes&=~R,Di===p&&(ri&R)===R&&(en===4||en===3&&(ri&62914560)===ri&&300>_r()-Ka?(Ri&2)===0&&Ts(p,0):Bs|=R,wr===ri&&(wr=0)),ct(p)}function Ec(p,v){v===0&&(v=O()),p=Le(p,v),p!==null&&(W(p,v),ct(p))}function zl(p){var v=p.memoizedState,R=0;v!==null&&(R=v.retryLane),Ec(p,R)}function No(p,v){var R=0;switch(p.tag){case 13:var z=p.stateNode,V=p.memoizedState;V!==null&&(R=V.retryLane);break;case 19:z=p.stateNode;break;case 22:z=p.stateNode._retryCache;break;default:throw Error(a(314))}z!==null&&z.delete(v),Ec(p,R)}function Il(p,v){return ql(p,v)}function tp(p,v,R,z){this.tag=p,this.key=R,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Ir(p,v){var R=p.alternate;return R===null?(R=t(p.tag,v,p.key,p.mode),R.elementType=p.elementType,R.type=p.type,R.stateNode=p.stateNode,R.alternate=p,p.alternate=R):(R.pendingProps=v,R.type=p.type,R.flags=0,R.subtreeFlags=0,R.deletions=null),R.flags=p.flags&31457280,R.childLanes=p.childLanes,R.lanes=p.lanes,R.child=p.child,R.memoizedProps=p.memoizedProps,R.memoizedState=p.memoizedState,R.updateQueue=p.updateQueue,v=p.dependencies,R.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},R.sibling=p.sibling,R.index=p.index,R.ref=p.ref,R.refCleanup=p.refCleanup,R}function qh(p,v){p.flags&=31457282;var R=p.alternate;return R===null?(p.childLanes=0,p.lanes=v,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=R.childLanes,p.lanes=R.lanes,p.child=R.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=R.memoizedProps,p.memoizedState=R.memoizedState,p.updateQueue=R.updateQueue,p.type=R.type,v=R.dependencies,p.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),p}function al(p,v,R,z,V,Z){var ge=0;if(z=p,typeof p=="function")Ci(p)&&(ge=1);else if(typeof p=="string")ge=ro&&aa?rf(p,R,Da.current)?26:Gl(p)?27:5:ro?rf(p,R,Da.current)?26:5:aa&&Gl(p)?27:5;else e:switch(p){case kn:return Xa(R.children,V,Z,v);case Wh:ge=8,V|=24;break;case Js:return p=t(12,R,v,V|2),p.elementType=Js,p.lanes=Z,p;case wc:return p=t(13,R,v,V),p.elementType=wc,p.lanes=Z,p;case Iu:return p=t(19,R,v,V),p.elementType=Iu,p.lanes=Z,p;case ip:return Xh(R,V,Z,v);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case zu:case kr:ge=10;break e;case pm:ge=9;break e;case Fl:ge=11;break e;case Hd:ge=14;break e;case Do:ge=16,z=null;break e}ge=29,R=Error(a(130,p===null?"null":typeof p,"")),z=null}return v=t(ge,R,v,V),v.elementType=p,v.type=z,v.lanes=Z,v}function Xa(p,v,R,z){return p=t(7,p,z,v),p.lanes=R,p}function Xh(p,v,R,z){p=t(22,p,z,v),p.elementType=ip,p.lanes=R;var V={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var Z=V._current;if(Z===null)throw Error(a(456));if((V._pendingVisibility&2)===0){var ge=Le(Z,2);ge!==null&&(V._pendingVisibility|=2,ns(ge,Z,2))}},attach:function(){var Z=V._current;if(Z===null)throw Error(a(456));if((V._pendingVisibility&2)!==0){var ge=Le(Z,2);ge!==null&&(V._pendingVisibility&=-3,ns(ge,Z,2))}}};return p.stateNode=V,p}function np(p,v,R){return p=t(6,p,null,v),p.lanes=R,p}function hm(p,v,R){return v=t(4,p.children!==null?p.children:[],p.key,v),v.lanes=R,v.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},v}function fm(p,v,R,z,V,Z,ge,je){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=rl,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=z,this.onUncaughtError=V,this.onCaughtError=Z,this.onRecoverableError=ge,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=je,this.incompleteTransitions=new Map}function Bl(p,v,R,z,V,Z,ge,je,We,yt,h,m){return p=new fm(p,v,R,ge,je,We,yt,m),v=1,Z===!0&&(v|=24),Z=t(3,null,null,v),p.current=Z,Z.stateNode=p,v=Dl(),v.refCount++,p.pooledCache=v,v.refCount++,Z.memoizedState={element:z,isDehydrated:R,cache:v},Ft(Z),p}function Za(p){return p?(p=lu,p):lu}function Pu(p){var v=p._reactInternals;if(v===void 0)throw typeof p.render=="function"?Error(a(188)):(p=Object.keys(p).join(","),Error(a(268,p)));return p=_(v),p=p!==null?S(p):null,p===null?null:hn(p.stateNode)}function Ro(p,v,R,z,V,Z){V=Za(V),z.context===null?z.context=V:z.pendingContext=V,z=gt(v),z.payload={element:R},Z=Z===void 0?null:Z,Z!==null&&(z.callback=Z),R=Ot(p,z,v),R!==null&&(ns(R,p,v),Wt(R,p,v))}function su(p,v){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var R=p.retryLane;p.retryLane=R!==0&&R<v?R:v}}function Uu(p,v){su(p,v),(p=p.alternate)&&su(p,v)}var Yn={},Lu=Lf(),Br=Uj(),Yh=Object.assign,Vg=Symbol.for("react.element"),kd=Symbol.for("react.transitional.element"),Fr=Symbol.for("react.portal"),kn=Symbol.for("react.fragment"),Wh=Symbol.for("react.strict_mode"),Js=Symbol.for("react.profiler"),zu=Symbol.for("react.provider"),pm=Symbol.for("react.consumer"),kr=Symbol.for("react.context"),Fl=Symbol.for("react.forward_ref"),wc=Symbol.for("react.suspense"),Iu=Symbol.for("react.suspense_list"),Hd=Symbol.for("react.memo"),Do=Symbol.for("react.lazy"),ip=Symbol.for("react.offscreen"),Mc=Symbol.for("react.memo_cache_sentinel"),sl=Symbol.iterator,Kh=Symbol.for("react.client.reference"),Mn=Lu.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oo,$s,Tc=!1,Gd=Array.isArray,ap=e.rendererVersion,Zh=e.rendererPackageName,Cc=e.extraDevToolsConfig,hn=e.getPublicInstance,qg=e.getRootHostContext,Vd=e.getChildHostContext,Qh=e.prepareForCommit,qd=e.resetAfterCommit,mm=e.createInstance,Jh=e.appendInitialChild,Ac=e.finalizeInitialChildren,Wn=e.shouldSetTextContent,Zi=e.createTextInstance,Ya=e.scheduleTimeout,$h=e.cancelTimeout,rl=e.noTimeout,er=e.isPrimaryRenderer;e.warnsIfNotActing;var ps=e.supportsMutation,jo=e.supportsPersistence,Ba=e.supportsHydration,kl=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var yi=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Fa=e.setCurrentUpdatePriority,is=e.getCurrentUpdatePriority,Xg=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Yg=e.shouldAttemptEagerTransition,Cs=e.detachDeletedInstance;e.requestPostPaintCallback;var ol=e.maySuspendCommit,sp=e.preloadInstance,gm=e.startSuspendingCommit,xr=e.suspendInstance,as=e.waitForCommitToBeReady,Nc=e.NotPendingTransition,ll=e.HostTransitionContext,ef=e.resetFormInstance;e.bindToConsole;var vm=e.supportsMicrotasks,Hr=e.scheduleMicrotask,Gr=e.supportsTestSelectors,ym=e.findFiberRoot,xm=e.getBoundingRect,Wg=e.getTextContent,Hl=e.isHiddenSubtree,Kg=e.matchAccessibilityRole,Zg=e.setFocusIfFocusable,Qg=e.setupIntersectionObserver,Xd=e.appendChild,bm=e.appendChildToContainer,Jg=e.commitTextUpdate,Qv=e.commitMount,$g=e.commitUpdate,e0=e.insertBefore,t0=e.insertInContainerBefore,_m=e.removeChild,n0=e.removeChildFromContainer,Sm=e.resetTextContent,i0=e.hideInstance,a0=e.hideTextInstance,s0=e.unhideInstance,r0=e.unhideTextInstance,o0=e.clearContainer,Yd=e.cloneInstance,tf=e.createContainerChildSet,Em=e.appendChildToContainerChildSet,rp=e.finalizeContainerChildren,Wd=e.replaceContainerChildren,op=e.cloneHiddenInstance,lp=e.cloneHiddenTextInstance,cp=e.isSuspenseInstancePending,nf=e.isSuspenseInstanceFallback,wm=e.getSuspenseInstanceFallbackErrorDetails,Mm=e.registerSuspenseInstanceRetry,af=e.canHydrateFormStateMarker,up=e.isFormStateMarkerMatching,Tm=e.getNextHydratableSibling,dp=e.getFirstHydratableChild,l0=e.getFirstHydratableChildWithinContainer,c0=e.getFirstHydratableChildWithinSuspenseInstance,u0=e.canHydrateInstance,Cm=e.canHydrateTextInstance,d0=e.canHydrateSuspenseInstance,h0=e.hydrateInstance,Am=e.hydrateTextInstance,f0=e.hydrateSuspenseInstance,p0=e.getNextHydratableInstanceAfterSuspenseInstance,Jv=e.commitHydratedContainer,$v=e.commitHydratedSuspenseInstance,m0=e.clearSuspenseBoundary,sf=e.clearSuspenseBoundaryFromContainer,hp=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var fp=e.validateHydratableInstance,g0=e.validateHydratableTextInstance,ro=e.supportsResources,rf=e.isHostHoistableType,pp=e.getHoistableRoot,mp=e.getResource,v0=e.acquireResource,Bu=e.releaseResource,br=e.hydrateHoistable,Kd=e.mountHoistable,ru=e.unmountHoistable,of=e.createHoistableInstance,Nm=e.prepareToCommitHoistables,Rm=e.mayResourceSuspendCommit,Fu=e.preloadResource,Dm=e.suspendResource,aa=e.supportsSingletons,cl=e.resolveSingletonInstance,ou=e.clearSingleton,y0=e.acquireSingletonInstance,Rc=e.releaseSingletonInstance,Gl=e.isHostSingletonType,ii=[],Vl=-1,lu={},tr=Math.clz32?Math.clz32:C,Om=Math.log,ku=Math.LN2,Po=128,Uo=4194304,ql=Br.unstable_scheduleCallback,nr=Br.unstable_cancelCallback,x0=Br.unstable_shouldYield,gp=Br.unstable_requestPaint,_r=Br.unstable_now,Hu=Br.unstable_ImmediatePriority,lf=Br.unstable_UserBlockingPriority,Zd=Br.unstable_NormalPriority,ey=Br.unstable_IdlePriority,b0=Br.log,sa=Br.unstable_setDisableYieldValue,Wa=null,Vr=null,ir=typeof Object.is=="function"?Object.is:G,jm=new WeakMap,Gu=[],Vu=0,ul=null,As=0,Sr=[],qr=0,Xl=null,Lo=1,ar="",Da=M(null),Dc=M(null),oo=M(null),Ns=M(null),ra=null,ka=null,Kn=!1,ss=null,Mi=!1,Oc=Error(a(519)),ms=[],Yl=0,xa=0,Ha=null,ai=null,lo=!1,bi=!1,cf=!1,Rs=0,jc=null,co=0,Qa=0,qu=null,Pc=!1,Xu=!1,Bi=Object.prototype.hasOwnProperty,Uc=Error(a(460)),Wl=Error(a(474)),Yu={then:function(){}},dl=null,Kl=null,uo=0,zo=ta(!0),Io=ta(!1),Fi=M(null),hl=M(0),Xr=M(null),Ai=null,gs=M(0),ho=0,Zn=null,mn=null,xi=null,Ls=!1,Ds=!1,fo=!1,Qd=0,Yr=0,rs=null,sr=0,Wu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Qi={readContext:hs,use:De,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useLayoutEffect:Pi,useInsertionEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useSyncExternalStore:Pi,useId:Pi};Qi.useCacheRefresh=Pi,Qi.useMemoCache=Pi,Qi.useHostTransitionStatus=Pi,Qi.useFormState=Pi,Qi.useActionState=Pi,Qi.useOptimistic=Pi;var On={readContext:hs,use:De,useCallback:function(p,v){return ce().memoizedState=[p,v===void 0?null:v],p},useContext:hs,useEffect:Ah,useImperativeHandle:function(p,v,R){R=R!=null?R.concat([p]):null,_d(4194308,4,Rh.bind(null,v,p),R)},useLayoutEffect:function(p,v){return _d(4194308,4,p,v)},useInsertionEffect:function(p,v){_d(4,2,p,v)},useMemo:function(p,v){var R=ce();v=v===void 0?null:v;var z=p();if(fo){X(!0);try{p()}finally{X(!1)}}return R.memoizedState=[z,v],z},useReducer:function(p,v,R){var z=ce();if(R!==void 0){var V=R(v);if(fo){X(!0);try{R(v)}finally{X(!1)}}}else V=v;return z.memoizedState=z.baseState=V,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:V},z.queue=p,p=p.dispatch=Oh.bind(null,Zn,p),[z.memoizedState,p]},useRef:function(p){var v=ce();return p={current:p},v.memoizedState=p},useState:function(p){p=Kt(p);var v=p.queue,R=kf.bind(null,Zn,v);return v.dispatch=R,[p.memoizedState,R]},useDebugValue:el,useDeferredValue:function(p,v){var R=ce();return oc(R,p,v)},useTransition:function(){var p=Kt(!1);return p=_u.bind(null,Zn,p.queue,!0,!1),ce().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,v,R){var z=Zn,V=ce();if(Kn){if(R===void 0)throw Error(a(407));R=R()}else{if(R=v(),Di===null)throw Error(a(349));(ri&60)!==0||Ht(z,v,R)}V.memoizedState=R;var Z={value:R,getSnapshot:v};return V.queue=Z,Ah(an.bind(null,z,Z,p),[p]),z.flags|=2048,Xs(9,Gt.bind(null,z,Z,R,v),{destroy:void 0},null),R},useId:function(){var p=ce(),v=Di.identifierPrefix;if(Kn){var R=ar,z=Lo;R=(z&~(1<<32-tr(z)-1)).toString(32)+R,v=":"+v+"R"+R,R=Qd++,0<R&&(v+="H"+R.toString(32)),v+=":"}else R=sr++,v=":"+v+"r"+R.toString(32)+":";return p.memoizedState=v},useCacheRefresh:function(){return ce().memoizedState=Dh.bind(null,Zn)}};On.useMemoCache=Be,On.useHostTransitionStatus=wd,On.useFormState=Gn,On.useActionState=Gn,On.useOptimistic=function(p){var v=ce();v.memoizedState=v.baseState=p;var R={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return v.queue=R,v=Eu.bind(null,Zn,!0,R),R.dispatch=v,[p,v]};var Qn={readContext:hs,use:De,useCallback:Kc,useContext:hs,useEffect:Bf,useImperativeHandle:rc,useInsertionEffect:am,useLayoutEffect:Nh,useMemo:Ed,useReducer:dt,useRef:wo,useState:function(){return dt(Je)},useDebugValue:el,useDeferredValue:function(p,v){var R=we();return Ff(R,mn.memoizedState,p,v)},useTransition:function(){var p=dt(Je)[0],v=we().memoizedState;return[typeof p=="boolean"?p:Re(p),v]},useSyncExternalStore:Ut,useId:Su};Qn.useCacheRefresh=Ml,Qn.useMemoCache=Be,Qn.useHostTransitionStatus=wd,Qn.useFormState=ha,Qn.useActionState=ha,Qn.useOptimistic=function(p,v){var R=we();return Sn(R,mn,p,v)};var Ui={readContext:hs,use:De,useCallback:Kc,useContext:hs,useEffect:Bf,useImperativeHandle:rc,useInsertionEffect:am,useLayoutEffect:Nh,useMemo:Ed,useReducer:vt,useRef:wo,useState:function(){return vt(Je)},useDebugValue:el,useDeferredValue:function(p,v){var R=we();return mn===null?oc(R,p,v):Ff(R,mn.memoizedState,p,v)},useTransition:function(){var p=vt(Je)[0],v=we().memoizedState;return[typeof p=="boolean"?p:Re(p),v]},useSyncExternalStore:Ut,useId:Su};Ui.useCacheRefresh=Ml,Ui.useMemoCache=Be,Ui.useHostTransitionStatus=wd,Ui.useFormState=ds,Ui.useActionState=ds,Ui.useOptimistic=function(p,v){var R=we();return mn!==null?Sn(R,mn,p,v):(R.baseState=p,[p,R.queue.dispatch])};var po={isMounted:function(p){return(p=p._reactInternals)?x(p)===p:!1},enqueueSetState:function(p,v,R){p=p._reactInternals;var z=qa(),V=gt(z);V.payload=v,R!=null&&(V.callback=R),v=Ot(p,V,z),v!==null&&(ns(v,p,z),Wt(v,p,z))},enqueueReplaceState:function(p,v,R){p=p._reactInternals;var z=qa(),V=gt(z);V.tag=1,V.payload=v,R!=null&&(V.callback=R),v=Ot(p,V,z),v!==null&&(ns(v,p,z),Wt(v,p,z))},enqueueForceUpdate:function(p,v){p=p._reactInternals;var R=qa(),z=gt(R);z.tag=2,v!=null&&(z.callback=v),v=Ot(p,z,R),v!==null&&(ns(v,p,R),Wt(v,p,R))}},Lc=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var v=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(v))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},Zl=Error(a(461)),Yi=!1,cu={dehydrated:null,treeContext:null,retryLane:0},Wr=M(null),fl=null,rr=null,Ku=typeof AbortController<"u"?AbortController:function(){var p=[],v=this.signal={aborted:!1,addEventListener:function(R,z){p.push(z)}};this.abort=function(){v.aborted=!0,p.forEach(function(R){return R()})}},Pm=Br.unstable_scheduleCallback,_0=Br.unstable_NormalPriority,ki={$$typeof:kr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Zu=Mn.S;Mn.S=function(p,v){typeof v=="object"&&v!==null&&typeof v.then=="function"&&ze(p,v),Zu!==null&&Zu(p,v)};var Er=M(null),pl=!1,Ni=!1,Bo=!1,Cn=typeof WeakSet=="function"?WeakSet:Set,zn=null,si=!1,gn=null,dn=!1,ba=null,Ja=8192,pa={getCacheForType:function(p){var v=hs(ki),R=v.data.get(p);return R===void 0&&(R=p(),v.data.set(p,R)),R}},uu=0,mo=1,Jn=2,Wi=3,Ga=4;if(typeof Symbol=="function"&&Symbol.for){var zs=Symbol.for;uu=zs("selector.component"),mo=zs("selector.has_pseudo_class"),Jn=zs("selector.role"),Wi=zs("selector.test_id"),Ga=zs("selector.text")}var Is=typeof WeakMap=="function"?WeakMap:Map,Ri=0,Di=null,xn=null,ri=0,Hi=0,vs=null,or=!1,go=!1,bn=!1,ei=0,en=0,jn=0,pi=0,Bs=0,os=0,wr=0,zc=null,Ki=null,_a=!1,Ka=0,Fo=1/0,Qu=null,ys=null,lr=!1,Kr=null,ls=0,Ql=0,Jd=null,Jl=0,Ju=null;return Yn.attemptContinuousHydration=function(p){if(p.tag===13){var v=Le(p,67108864);v!==null&&ns(v,p,67108864),Uu(p,67108864)}},Yn.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var v=qa(),R=Le(p,v);R!==null&&ns(R,p,v),Uu(p,v)}},Yn.attemptSynchronousHydration=function(p){switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=D(p.pendingLanes);if(v!==0){for(p.pendingLanes|=2,p.entangledLanes|=2;v;){var R=1<<31-tr(v);p.entanglements[1]|=R,v&=~R}ct(p),(Ri&6)===0&&(Fo=_r()+500,At(0))}}break;case 13:v=Le(p,2),v!==null&&ns(v,p,2),Us(),Uu(p,2)}},Yn.batchedUpdates=function(p,v){return p(v)},Yn.createComponentSelector=function(p){return{$$typeof:uu,value:p}},Yn.createContainer=function(p,v,R,z,V,Z,ge,je,We,yt){return Bl(p,v,!1,null,R,z,Z,ge,je,We,yt,null)},Yn.createHasPseudoClassSelector=function(p){return{$$typeof:mo,value:p}},Yn.createHydrationContainer=function(p,v,R,z,V,Z,ge,je,We,yt,h,m,N){return p=Bl(R,z,!0,p,V,Z,je,We,yt,h,m,N),p.context=Za(null),R=p.current,z=qa(),V=gt(z),V.callback=v??null,Ot(R,V,z),p.current.lanes=z,W(p,z),ct(p),p},Yn.createPortal=function(p,v,R){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fr,key:z==null?null:""+z,children:p,containerInfo:v,implementation:R}},Yn.createRoleSelector=function(p){return{$$typeof:Jn,value:p}},Yn.createTestNameSelector=function(p){return{$$typeof:Wi,value:p}},Yn.createTextSelector=function(p){return{$$typeof:Ga,value:p}},Yn.defaultOnCaughtError=function(p){console.error(p)},Yn.defaultOnRecoverableError=function(p){Lc(p)},Yn.defaultOnUncaughtError=function(p){Lc(p)},Yn.deferredUpdates=function(p){var v=Mn.T,R=is();try{return Fa(32),Mn.T=null,p()}finally{Fa(R),Mn.T=v}},Yn.discreteUpdates=function(p,v,R,z,V){var Z=Mn.T,ge=is();try{return Fa(2),Mn.T=null,p(v,R,z,V)}finally{Fa(ge),Mn.T=Z,Ri===0&&(Fo=_r()+500)}},Yn.findAllNodes=nu,Yn.findBoundingRects=function(p,v){if(!Gr)throw Error(a(363));v=nu(p,v),p=[];for(var R=0;R<v.length;R++)p.push(xm(v[R]));for(v=p.length-1;0<v;v--){R=p[v];for(var z=R.x,V=z+R.width,Z=R.y,ge=Z+R.height,je=v-1;0<=je;je--)if(v!==je){var We=p[je],yt=We.x,h=yt+We.width,m=We.y,N=m+We.height;if(z>=yt&&Z>=m&&V<=h&&ge<=N){p.splice(v,1);break}else if(z!==yt||R.width!==We.width||N<Z||m>ge){if(!(Z!==m||R.height!==We.height||h<z||yt>V)){yt>z&&(We.width+=yt-z,We.x=z),h<V&&(We.width=V-yt),p.splice(v,1);break}}else{m>Z&&(We.height+=m-Z,We.y=Z),N<ge&&(We.height=ge-m),p.splice(v,1);break}}}return p},Yn.findHostInstance=Pu,Yn.findHostInstanceWithNoPortals=function(p){return p=_(p),p=p!==null?w(p):null,p===null?null:hn(p.stateNode)},Yn.findHostInstanceWithWarning=function(p){return Pu(p)},Yn.flushPassiveEffects=zr,Yn.flushSyncFromReconciler=function(p){var v=Ri;Ri|=1;var R=Mn.T,z=is();try{if(Fa(2),Mn.T=null,p)return p()}finally{Fa(z),Mn.T=R,Ri=v,(Ri&6)===0&&At(0)}},Yn.flushSyncWork=Us,Yn.focusWithin=function(p,v){if(!Gr)throw Error(a(363));for(p=Ru(p),v=gr(p,v),v=Array.from(v),p=0;p<v.length;){var R=v[p++],z=R.tag;if(!Hl(R)){if((z===5||z===26||z===27)&&Zg(R.stateNode))return!0;for(R=R.child;R!==null;)v.push(R),R=R.sibling}}return!1},Yn.getFindAllNodesFailureDescription=function(p,v){if(!Gr)throw Error(a(363));var R=0,z=[];p=[Ru(p),0];for(var V=0;V<p.length;){var Z=p[V++],ge=Z.tag,je=p[V++],We=v[je];if((ge!==5&&ge!==26&&ge!==27||!Hl(Z))&&(_c(Z,We)&&(z.push(Du(We)),je++,je>R&&(R=je)),je<v.length))for(Z=Z.child;Z!==null;)p.push(Z,je),Z=Z.sibling}if(R<v.length){for(p=[];R<v.length;R++)p.push(Du(v[R]));return`findAllNodes was able to match part of the selector:
  `+(z.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},Yn.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 27:case 5:return hn(p.child.stateNode);default:return p.child.stateNode}},Yn.injectIntoDevTools=function(){var p={bundleType:0,version:ap,rendererPackageName:Zh,currentDispatcherRef:Mn,findFiberByHostInstance:kl,reconcilerVersion:"19.0.0"};if(Cc!==null&&(p.rendererConfig=Cc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(v.isDisabled||!v.supportsFiber)p=!0;else{try{Wa=v.inject(p),Vr=v}catch{}p=!!v.checkDCE}}return p},Yn.isAlreadyRendering=function(){return!1},Yn.observeVisibleRects=function(p,v,R,z){if(!Gr)throw Error(a(363));p=nu(p,v);var V=Qg(p,R,z).disconnect;return{disconnect:function(){V()}}},Yn.shouldError=function(){return null},Yn.shouldSuspend=function(){return!1},Yn.startHostTransition=function(p,v,R,z){if(p.tag!==5)throw Error(a(476));var V=tl(p).queue;_u(p,V,v,Nc,R===null?i:function(){var Z=tl(p).next.queue;return Tl(p,Z,{},qa()),R(z)})},Yn.updateContainer=function(p,v,R,z){var V=v.current,Z=qa();return Ro(V,Z,p,v,R,z),Z},Yn.updateContainerSync=function(p,v,R,z){return v.tag===0&&zr(),Ro(v.current,2,p,v,R,z),2},Yn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(hM)),hM.exports}var I5;function pZ(){return I5||(I5=1,dM.exports=fZ()),dM.exports}var mZ=pZ();const gZ=Uf(mZ);var B5=Uj();function Lj(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const zj=n=>n&&n.isOrthographicCamera,vZ=n=>n&&n.hasOwnProperty("current"),yZ=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),L1=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?k.useLayoutEffect:k.useEffect;function mC(n){const e=k.useRef(n);return L1(()=>void(e.current=n),[n]),e}function xZ(){const n=A8(),e=N8();return k.useMemo(()=>({children:t})=>{const a=!!y3(n,!0,s=>s.type===k.StrictMode)?k.StrictMode:k.Fragment;return c.jsx(a,{children:c.jsx(e,{children:t})})},[n,e])}function bZ({set:n}){return L1(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const _Z=(n=>(n=class extends k.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function Ij(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function X0(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const cs={obj:n=>n===Object(n)&&!cs.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:a=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(cs.str(n)||cs.num(n)||cs.boo(n))return n===e;const s=cs.obj(n);if(s&&i==="reference")return n===e;const r=cs.arr(n);if(r&&t==="reference")return n===e;if((r||s)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(l in a?e:n)if(!cs.equ(n[l],e[l],{strict:a,objects:"reference"}))return!1}else for(l in a?e:n)if(n[l]!==e[l])return!1;if(cs.und(l)){if(r&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function SZ(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function EZ(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const Bj=["children","key","ref"];function wZ(n){const e={};for(const t in n)Bj.includes(t)||(e[t]=n[t]);return e}function AS(n,e,t,i){const a=n;let s=a?.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:wZ(i),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=s)),s}function l1(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const a of e.split("-")){var i;e=a,n=t,t=(i=t)==null?void 0:i[e]}return{root:n,key:e,target:t}}const F5=/-\d+$/;function NS(n,e){if(cs.str(e.props.attach)){if(F5.test(e.props.attach)){const a=e.props.attach.replace(F5,""),{root:s,key:r}=l1(n.object,a);Array.isArray(s[r])||(s[r]=[])}const{root:t,key:i}=l1(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else cs.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function RS(n,e){if(cs.str(e.props.attach)){const{root:t,key:i}=l1(n.object,e.props.attach),a=e.previousAttach;a===void 0?delete t[i]:t[i]=a}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const CT=[...Bj,"args","dispose","attach","object","onUpdate","dispose"],k5=new Map;function MZ(n){let e=k5.get(n.constructor);try{e||(e=new n.constructor,k5.set(n.constructor,e))}catch{}return e}function TZ(n,e){const t={};for(const i in e)if(!CT.includes(i)&&!cs.equ(e[i],n.props[i])){t[i]=e[i];for(const a in e)a.startsWith(`${i}-`)&&(t[a]=e[a])}for(const i in n.props){if(CT.includes(i)||e.hasOwnProperty(i))continue;const{root:a,key:s}=l1(n.object,i);if(a.constructor&&a.constructor.length===0){const r=MZ(a);cs.und(r)||(t[s]=r[s])}else t[s]=0}return t}const CZ=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],AZ=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function rh(n,e){var t;const i=n.__r3f,a=i&&Lj(i).getState(),s=i?.eventCount;for(const l in e){let d=e[l];if(CT.includes(l))continue;if(i&&AZ.test(l)){typeof d=="function"?i.handlers[l]=d:delete i.handlers[l],i.eventCount=Object.keys(i.handlers).length;continue}if(d===void 0)continue;let{root:f,key:g,target:x}=l1(n,l);if(x instanceof Sv&&d instanceof Sv)x.mask=d.mask;else if(x instanceof Zt&&yZ(d))x.set(d);else if(x!==null&&typeof x=="object"&&typeof x.set=="function"&&typeof x.copy=="function"&&d!=null&&d.constructor&&x.constructor===d.constructor)x.copy(d);else if(x!==null&&typeof x=="object"&&typeof x.set=="function"&&Array.isArray(d))typeof x.fromArray=="function"?x.fromArray(d):x.set(...d);else if(x!==null&&typeof x=="object"&&typeof x.set=="function"&&typeof d=="number")typeof x.setScalar=="function"?x.setScalar(d):x.set(d);else{var r;f[g]=d,a&&!a.linear&&CZ.includes(g)&&(r=f[g])!=null&&r.isTexture&&f[g].format===Vs&&f[g].type===bl&&(f[g].colorSpace=yo)}}if(i!=null&&i.parent&&a!=null&&a.internal&&(t=i.object)!=null&&t.isObject3D&&s!==i.eventCount){const l=i.object,d=a.internal.interaction.indexOf(l);d>-1&&a.internal.interaction.splice(d,1),i.eventCount&&l.raycast!==null&&a.internal.interaction.push(l)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Fv(i),n}function Fv(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function Fj(n,e){n.manual||(zj(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const vl=n=>n?.isObject3D;function Qb(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function kj(n,e,t,i){const a=t.get(e);a&&(t.delete(e),t.size===0&&(n.delete(i),a.target.releasePointerCapture(i)))}function NZ(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,a)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(a)}),t.capturedMap.forEach((i,a)=>{kj(t.capturedMap,e,i,a)})}function RZ(n){function e(d){const{internal:f}=n.getState(),g=d.offsetX-f.initialClick[0],x=d.offsetY-f.initialClick[1];return Math.round(Math.sqrt(g*g+x*x))}function t(d){return d.filter(f=>["Move","Over","Enter","Out","Leave"].some(g=>{var x;return(x=f.__r3f)==null?void 0:x.handlers["onPointer"+g]}))}function i(d,f){const g=n.getState(),x=new Set,b=[],_=f?f(g.internal.interaction):g.internal.interaction;for(let E=0;E<_.length;E++){const T=X0(_[E]);T&&(T.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(d,g);function S(E){const T=X0(E);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var C;T.events.compute==null||T.events.compute(d,T,(C=T.previousRoot)==null?void 0:C.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(E,!0):[]}let w=_.flatMap(S).sort((E,T)=>{const C=X0(E.object),D=X0(T.object);return!C||!D?E.distance-T.distance:D.events.priority-C.events.priority||E.distance-T.distance}).filter(E=>{const T=Qb(E);return x.has(T)?!1:(x.add(T),!0)});g.events.filter&&(w=g.events.filter(w,g));for(const E of w){let T=E.object;for(;T;){var M;(M=T.__r3f)!=null&&M.eventCount&&b.push({...E,eventObject:T}),T=T.parent}}if("pointerId"in d&&g.internal.capturedMap.has(d.pointerId))for(let E of g.internal.capturedMap.get(d.pointerId).values())x.has(Qb(E.intersection))||b.push(E.intersection);return b}function a(d,f,g,x){if(d.length){const b={stopped:!1};for(const _ of d){let S=X0(_.object);if(S||_.object.traverseAncestors(w=>{const M=X0(w);if(M)return S=M,!1}),S){const{raycaster:w,pointer:M,camera:E,internal:T}=S,C=new be(M.x,M.y,0).unproject(E),D=O=>{var I,W;return(I=(W=T.capturedMap.get(O))==null?void 0:W.has(_.eventObject))!=null?I:!1},P=O=>{const I={intersection:_,target:f.target};T.capturedMap.has(O)?T.capturedMap.get(O).set(_.eventObject,I):T.capturedMap.set(O,new Map([[_.eventObject,I]])),f.target.setPointerCapture(O)},B=O=>{const I=T.capturedMap.get(O);I&&kj(T.capturedMap,_.eventObject,I,O)};let F={};for(let O in f){let I=f[O];typeof I!="function"&&(F[O]=I)}let j={..._,...F,pointer:M,intersections:d,stopped:b.stopped,delta:g,unprojectedPoint:C,ray:w.ray,camera:E,stopPropagation(){const O="pointerId"in f&&T.capturedMap.get(f.pointerId);if((!O||O.has(_.eventObject))&&(j.stopped=b.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(I=>I.eventObject===_.eventObject))){const I=d.slice(0,d.indexOf(_));s([...I,_])}},target:{hasPointerCapture:D,setPointerCapture:P,releasePointerCapture:B},currentTarget:{hasPointerCapture:D,setPointerCapture:P,releasePointerCapture:B},nativeEvent:f};if(x(j),b.stopped===!0)break}}}return d}function s(d){const{internal:f}=n.getState();for(const g of f.hovered.values())if(!d.length||!d.find(x=>x.object===g.object&&x.index===g.index&&x.instanceId===g.instanceId)){const b=g.eventObject.__r3f;if(f.hovered.delete(Qb(g)),b!=null&&b.eventCount){const _=b.handlers,S={...g,intersections:d};_.onPointerOut==null||_.onPointerOut(S),_.onPointerLeave==null||_.onPointerLeave(S)}}}function r(d,f){for(let g=0;g<f.length;g++){const x=f[g].__r3f;x==null||x.handlers.onPointerMissed==null||x.handlers.onPointerMissed(d)}}function l(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:g}=n.getState();"pointerId"in f&&g.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(f.pointerId)&&(g.capturedMap.delete(f.pointerId),s([]))})}}return function(g){const{onPointerMissed:x,internal:b}=n.getState();b.lastEvent.current=g;const _=d==="onPointerMove",S=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",M=i(g,_?t:void 0),E=S?e(g):0;d==="onPointerDown"&&(b.initialClick=[g.offsetX,g.offsetY],b.initialHits=M.map(C=>C.eventObject)),S&&!M.length&&E<=2&&(r(g,b.interaction),x&&x(g)),_&&s(M);function T(C){const D=C.eventObject,P=D.__r3f;if(!(P!=null&&P.eventCount))return;const B=P.handlers;if(_){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const F=Qb(C),j=b.hovered.get(F);j?j.stopped&&C.stopPropagation():(b.hovered.set(F,C),B.onPointerOver==null||B.onPointerOver(C),B.onPointerEnter==null||B.onPointerEnter(C))}B.onPointerMove==null||B.onPointerMove(C)}else{const F=B[d];F?(!S||b.initialHits.includes(D))&&(r(g,b.interaction.filter(j=>!b.initialHits.includes(j))),F(C)):S&&b.initialHits.includes(D)&&r(g,b.interaction.filter(j=>!b.initialHits.includes(j)))}}a(M,g,E,T)}}return{handlePointer:l}}const H5=n=>!!(n!=null&&n.render),gC=k.createContext(null),DZ=(n,e)=>{const t=Oj((l,d)=>{const f=new be,g=new be,x=new be;function b(E=d().camera,T=g,C=d().size){const{width:D,height:P,top:B,left:F}=C,j=D/P;T.isVector3?x.copy(T):x.set(...T);const O=E.getWorldPosition(f).distanceTo(x);if(zj(E))return{width:D/E.zoom,height:P/E.zoom,top:B,left:F,factor:1,distance:O,aspect:j};{const I=E.fov*Math.PI/180,W=2*Math.tan(I/2)*O,Q=W*(D/P);return{width:Q,height:W,top:B,left:F,factor:D/Q,distance:O,aspect:j}}}let _;const S=E=>l(T=>({performance:{...T.performance,current:E}})),w=new wt;return{set:l,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(E=1)=>n(d(),E),advance:(E,T)=>e(E,T,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new lC,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const E=d();_&&clearTimeout(_),E.performance.current!==E.performance.min&&S(E.performance.min),_=setTimeout(()=>S(d().performance.max),E.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:b},setEvents:E=>l(T=>({...T,events:{...T.events,...E}})),setSize:(E,T,C=0,D=0)=>{const P=d().camera,B={width:E,height:T,top:C,left:D};l(F=>({size:B,viewport:{...F.viewport,...b(P,g,B)}}))},setDpr:E=>l(T=>{const C=Ij(E);return{viewport:{...T.viewport,dpr:C,initialDpr:T.viewport.initialDpr||C}}}),setFrameloop:(E="always")=>{const T=d().clock;T.stop(),T.elapsedTime=0,E!=="never"&&(T.start(),T.elapsedTime=0),l(()=>({frameloop:E}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:k.createRef(),active:!1,frames:0,priority:0,subscribe:(E,T,C)=>{const D=d().internal;return D.priority=D.priority+(T>0?1:0),D.subscribers.push({ref:E,priority:T,store:C}),D.subscribers=D.subscribers.sort((P,B)=>P.priority-B.priority),()=>{const P=d().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(T>0?1:0),P.subscribers=P.subscribers.filter(B=>B.ref!==E))}}}}}),i=t.getState();let a=i.size,s=i.viewport.dpr,r=i.camera;return t.subscribe(()=>{const{camera:l,size:d,viewport:f,gl:g,set:x}=t.getState();if(d.width!==a.width||d.height!==a.height||f.dpr!==s){a=d,s=f.dpr,Fj(l,d),f.dpr>0&&g.setPixelRatio(f.dpr);const b=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(d.width,d.height,b)}l!==r&&(r=l,x(b=>({viewport:{...b.viewport,...b.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};function vC(){const n=k.useContext(gC);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function qo(n=t=>t,e){return vC()(n,e)}function L2(n,e=0){const t=vC(),i=t.getState().internal.subscribe,a=mC(n);return L1(()=>i(a,e,t),[e,i,t]),null}const G5=new WeakMap,OZ=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function Hj(n,e){return function(t,...i){let a;return OZ(t)?(a=G5.get(t),a||(a=new t,G5.set(t,a))):a=t,n&&n(a),Promise.all(i.map(s=>new Promise((r,l)=>a.load(s,d=>{vl(d?.scene)&&Object.assign(d,SZ(d.scene)),r(d)},e,d=>l(new Error(`Could not load ${s}: ${d?.message}`))))))}}function Tv(n,e,t,i){const a=Array.isArray(e)?e:[e],s=cZ(Hj(t,i),[n,...a],{equal:cs.equ});return Array.isArray(e)?s:s[0]}Tv.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return uZ(Hj(t),[n,...i])};Tv.clear=function(n,e){const t=Array.isArray(e)?e:[e];return dZ([n,...t])};function jZ(n){const e=gZ(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:k.version}),e}const Gj=0,Cv={},PZ=/^three(?=[A-Z])/,z2=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let UZ=0;const LZ=n=>typeof n=="function";function yC(n){if(LZ(n)){const e=`${UZ++}`;return Cv[e]=n,e}else Object.assign(Cv,n)}function Vj(n,e){const t=z2(n),i=Cv[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function zZ(n,e,t){var i;return n=z2(n)in Cv?n:n.replace(PZ,""),Vj(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,AS(e.object,t,n,e)}function IZ(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?RS(n.parent,n):vl(n.object)&&(n.object.visible=!1),n.isHidden=!0,Fv(n)}}function qj(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?NS(n.parent,n):vl(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Fv(n)}}function xC(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var a,s;const r=Cv[z2(e.type)];e.object=(a=e.props.object)!=null?a:new r(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(rh(e.object,e.props),e.props.attach)NS(n,e);else if(vl(e.object)&&vl(n.object)){const r=n.object.children.indexOf(t?.object);if(t&&r!==-1){const l=n.object.children.indexOf(e.object);if(l!==-1){n.object.children.splice(l,1);const d=l<r?r-1:r;n.object.children.splice(d,0,e.object)}else e.object.parent=n.object,n.object.children.splice(r,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const r of e.children)xC(e,r);Fv(e)}}function mM(n,e){e&&(e.parent=n,n.children.push(e),xC(n,e))}function V5(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),xC(n,e,t)}function Xj(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():B5.unstable_scheduleCallback(B5.unstable_IdlePriority,e)}}function AT(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?RS(n,e):vl(e.object)&&vl(n.object)&&(n.object.remove(e.object),NZ(Lj(e),e.object));const a=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const r=e.children[s];AT(e,r,a)}e.children.length=0,delete e.object.__r3f,a&&e.type!=="primitive"&&e.object.type!=="Scene"&&Xj(e.object),t===void 0&&Fv(e)}function BZ(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const C_=[];function FZ(){for(const[t]of C_){const i=t.parent;if(i){t.props.attach?RS(i,t):vl(t.object)&&vl(i.object)&&i.object.remove(t.object);for(const a of t.children)a.props.attach?RS(t,a):vl(a.object)&&vl(t.object)&&t.object.remove(a.object)}t.isHidden&&qj(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&Xj(t.object)}for(const[t,i,a]of C_){t.props=i;const s=t.parent;if(s){var n,e;const r=Cv[z2(t.type)];t.object=(n=t.props.object)!=null?n:new r(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,BZ(a,t.object),rh(t.object,t.props),t.props.attach?NS(s,t):vl(t.object)&&vl(s.object)&&s.object.add(t.object);for(const l of t.children)l.props.attach?NS(t,l):vl(l.object)&&vl(t.object)&&t.object.add(l.object);Fv(t)}}C_.length=0}const gM=()=>{},q5={};let Jb=Gj;const kZ=0,HZ=4,DS=jZ({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:zZ,removeChild:AT,appendChild:mM,appendInitialChild:mM,insertBefore:V5,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||mM(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||AT(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||V5(i,e,t)},getRootHostContext:()=>q5,getChildHostContext:()=>q5,commitUpdate(n,e,t,i,a){var s,r,l;Vj(e,i);let d=!1;if((n.type==="primitive"&&t.object!==i.object||((s=i.args)==null?void 0:s.length)!==((r=t.args)==null?void 0:r.length)||(l=i.args)!=null&&l.some((g,x)=>{var b;return g!==((b=t.args)==null?void 0:b[x])}))&&(d=!0),d)C_.push([n,{...i},a]);else{const g=TZ(n,i);Object.keys(g).length&&(Object.assign(n.props,g),rh(n.object,g))}(a.sibling===null||(a.flags&HZ)===kZ)&&FZ()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>AS(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:IZ,unhideInstance:qj,createTextInstance:gM,hideTextInstance:gM,unhideTextInstance:gM,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:k.createContext(null),setCurrentUpdatePriority(n){Jb=n},getCurrentUpdatePriority(){return Jb},resolveUpdatePriority(){var n;if(Jb!==Gj)return Jb;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return E_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return E_.ContinuousEventPriority;default:return E_.DefaultEventPriority}},resetFormInstance(){}}),xg=new Map,Y0={objects:"shallow",strict:!1};function GZ(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:a,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:a,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function VZ(n){const e=xg.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,s=i||DZ(DT,Y5),r=t||DS.createContainer(s,E_.ConcurrentRoot,null,!1,null,"",a,a,a,null);e||xg.set(n,{fiber:r,store:s});let l,d,f=!1,g=null;return{async configure(x={}){let b;g=new Promise(ne=>b=ne);let{gl:_,size:S,scene:w,events:M,onCreated:E,shadows:T=!1,linear:C=!1,flat:D=!1,legacy:P=!1,orthographic:B=!1,frameloop:F="always",dpr:j=[1,2],performance:O,raycaster:I,camera:W,onPointerMissed:Q}=x,J=s.getState(),te=J.gl;if(!J.gl){const ne={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},ue=typeof _=="function"?await _(ne):_;H5(ue)?te=ue:te=new pC({...ne,..._}),J.set({gl:te})}let oe=J.raycaster;oe||J.set({raycaster:oe=new dC});const{params:$,...X}=I||{};if(cs.equ(X,oe,Y0)||rh(oe,{...X}),cs.equ($,oe.params,Y0)||rh(oe,{params:{...oe.params,...$}}),!J.camera||J.camera===d&&!cs.equ(d,W,Y0)){d=W;const ne=W?.isCamera,ue=ne?W:B?new Cf(0,0,0,0,.1,1e3):new Gs(75,0,.1,1e3);ne||(ue.position.z=5,W&&(rh(ue,W),ue.manual||("aspect"in W||"left"in W||"right"in W||"bottom"in W||"top"in W)&&(ue.manual=!0,ue.updateProjectionMatrix())),!J.camera&&!(W!=null&&W.rotation)&&ue.lookAt(0,0,0)),J.set({camera:ue}),oe.camera=ue}if(!J.scene){let ne;w!=null&&w.isScene?(ne=w,AS(ne,s,"",{})):(ne=new A1,AS(ne,s,"",{}),w&&rh(ne,w)),J.set({scene:ne})}M&&!J.events.handlers&&J.set({events:M(s)});const G=GZ(n,S);if(cs.equ(G,J.size,Y0)||J.setSize(G.width,G.height,G.top,G.left),j&&J.viewport.dpr!==Ij(j)&&J.setDpr(j),J.frameloop!==F&&J.setFrameloop(F),J.onPointerMissed||J.set({onPointerMissed:Q}),O&&!cs.equ(O,J.performance,Y0)&&J.set(ne=>({performance:{...ne.performance,...O}})),!J.xr){var ee;const ne=(ie,Me)=>{const ye=s.getState();ye.frameloop!=="never"&&Y5(ie,!0,ye,Me)},ue=()=>{const ie=s.getState();ie.gl.xr.enabled=ie.gl.xr.isPresenting,ie.gl.xr.setAnimationLoop(ie.gl.xr.isPresenting?ne:null),ie.gl.xr.isPresenting||DT(ie)},de={connect(){const ie=s.getState().gl;ie.xr.addEventListener("sessionstart",ue),ie.xr.addEventListener("sessionend",ue)},disconnect(){const ie=s.getState().gl;ie.xr.removeEventListener("sessionstart",ue),ie.xr.removeEventListener("sessionend",ue)}};typeof((ee=te.xr)==null?void 0:ee.addEventListener)=="function"&&de.connect(),J.set({xr:de})}if(te.shadowMap){const ne=te.shadowMap.enabled,ue=te.shadowMap.type;if(te.shadowMap.enabled=!!T,cs.boo(T))te.shadowMap.type=Ax;else if(cs.str(T)){var Y;const de={basic:U8,percentage:n2,soft:Ax,variance:rd};te.shadowMap.type=(Y=de[T])!=null?Y:Ax}else cs.obj(T)&&Object.assign(te.shadowMap,T);(ne!==te.shadowMap.enabled||ue!==te.shadowMap.type)&&(te.shadowMap.needsUpdate=!0)}return qi.enabled=!P,f||(te.outputColorSpace=C?fd:yo,te.toneMapping=D?fh:N3),J.legacy!==P&&J.set(()=>({legacy:P})),J.linear!==C&&J.set(()=>({linear:C})),J.flat!==D&&J.set(()=>({flat:D})),_&&!cs.fun(_)&&!H5(_)&&!cs.equ(_,te,Y0)&&rh(te,_),l=E,f=!0,b(),this},render(x){return!f&&!g&&this.configure(),g.then(()=>{DS.updateContainer(c.jsx(qZ,{store:s,children:x,onCreated:l,rootElement:n}),r,null,()=>{})}),s},unmount(){Yj(n)}}}function qZ({store:n,children:e,onCreated:t,rootElement:i}){return L1(()=>{const a=n.getState();a.set(s=>({internal:{...s.internal,active:!0}})),t&&t(a),n.getState().events.connected||a.events.connect==null||a.events.connect(i)},[]),c.jsx(gC.Provider,{value:n,children:e})}function Yj(n,e){const t=xg.get(n),i=t?.fiber;if(i){const a=t?.store.getState();a&&(a.internal.active=!1),DS.updateContainer(null,i,null,()=>{a&&setTimeout(()=>{try{var s,r,l,d;a.events.disconnect==null||a.events.disconnect(),(s=a.gl)==null||(r=s.renderLists)==null||r.dispose==null||r.dispose(),(l=a.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(d=a.gl)!=null&&d.xr&&a.xr.disconnect(),EZ(a.scene),xg.delete(n)}catch{}},500)})}}function XZ(n,e,t){return c.jsx(YZ,{children:n,container:e,state:t})}function YZ({state:n={},children:e,container:t}){const{events:i,size:a,...s}=n,r=vC(),[l]=k.useState(()=>new dC),[d]=k.useState(()=>new wt),f=mC((x,b)=>{let _;if(b.camera&&a){const S=b.camera;_=x.viewport.getCurrentViewport(S,new be,a),S!==x.camera&&Fj(S,a)}return{...x,...b,scene:t,raycaster:l,pointer:d,mouse:d,previousRoot:r,events:{...x.events,...b.events,...i},size:{...x.size,...a},viewport:{...x.viewport,..._},setEvents:S=>b.set(w=>({...w,events:{...w.events,...S}}))}}),g=k.useMemo(()=>{const x=Oj((_,S)=>({...s,set:_,get:S})),b=_=>x.setState(S=>f.current(_,S));return b(r.getState()),r.subscribe(b),x},[r,t]);return c.jsx(c.Fragment,{children:DS.createPortal(c.jsx(gC.Provider,{value:g,children:e}),g,null)})}const WZ=new Set,KZ=new Set,ZZ=new Set;function vM(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Ix(n,e){switch(n){case"before":return vM(WZ,e);case"after":return vM(KZ,e);case"tail":return vM(ZZ,e)}}let yM,xM;function NT(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),yM=e.internal.subscribers;for(let a=0;a<yM.length;a++)xM=yM[a],xM.ref.current(xM.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let OS=!1,RT=!1,bM,X5,W0;function Wj(n){X5=requestAnimationFrame(Wj),OS=!0,bM=0,Ix("before",n),RT=!0;for(const t of xg.values()){var e;W0=t.store.getState(),W0.internal.active&&(W0.frameloop==="always"||W0.internal.frames>0)&&!((e=W0.gl.xr)!=null&&e.isPresenting)&&(bM+=NT(n,W0))}if(RT=!1,Ix("after",n),bM===0)return Ix("tail",n),OS=!1,cancelAnimationFrame(X5)}function DT(n,e=1){var t;if(!n)return xg.forEach(i=>DT(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):RT?n.internal.frames=2:n.internal.frames=1,OS||(OS=!0,requestAnimationFrame(Wj)))}function Y5(n,e=!0,t,i){if(e&&Ix("before",n),t)NT(n,t,i);else for(const a of xg.values())NT(n,a.store.getState());e&&Ix("after",n)}const _M={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function QZ(n){const{handlePointer:e}=RZ(n);return{priority:1,enabled:!0,compute(t,i,a){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(_M).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:a}=n.getState();(t=a.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(a.lastEvent.current)},connect:t=>{const{set:i,events:a}=n.getState();if(a.disconnect==null||a.disconnect(),i(s=>({events:{...s.events,connected:t}})),a.handlers)for(const s in a.handlers){const r=a.handlers[s],[l,d]=_M[s];t.addEventListener(l,r,{passive:d})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const a in i.handlers){const s=i.handlers[a],[r]=_M[a];i.connected.removeEventListener(r,s)}t(a=>({events:{...a.events,connected:void 0}}))}}}}function W5(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function JZ({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const a=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,r]=k.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=k.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),d=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,g=k.useRef(!1);k.useEffect(()=>(g.current=!0,()=>void(g.current=!1)));const[x,b,_]=k.useMemo(()=>{const E=()=>{if(!l.current.element)return;const{left:T,top:C,width:D,height:P,bottom:B,right:F,x:j,y:O}=l.current.element.getBoundingClientRect(),I={left:T,top:C,width:D,height:P,bottom:B,right:F,x:j,y:O};l.current.element instanceof HTMLElement&&i&&(I.height=l.current.element.offsetHeight,I.width=l.current.element.offsetWidth),Object.freeze(I),g.current&&!nQ(l.current.lastBounds,I)&&r(l.current.lastBounds=I)};return[E,f?W5(E,f):E,d?W5(E,d):E]},[r,i,d,f]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function w(){l.current.element&&(l.current.resizeObserver=new a(_),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(E=>E.addEventListener("scroll",_,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const M=E=>{!E||E===l.current.element||(S(),l.current.element=E,l.current.scrollContainers=Kj(E),w())};return eQ(_,!!e),$Z(b),k.useEffect(()=>{S(),w()},[e,_,b]),k.useEffect(()=>S,[]),[M,s,x]}function $Z(n){k.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function eQ(n,e){k.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Kj(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:a}=window.getComputedStyle(n);return[t,i,a].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...Kj(n.parentElement)]}const tQ=["x","y","top","bottom","left","right","width","height"],nQ=(n,e)=>tQ.every(t=>n[t]===e[t]);function iQ({ref:n,children:e,fallback:t,resize:i,style:a,gl:s,events:r=QZ,eventSource:l,eventPrefix:d,shadows:f,linear:g,flat:x,legacy:b,orthographic:_,frameloop:S,dpr:w,performance:M,raycaster:E,camera:T,scene:C,onPointerMissed:D,onCreated:P,...B}){k.useMemo(()=>yC(JK),[]);const F=xZ(),[j,O]=JZ({scroll:!0,debounce:{scroll:50,resize:0},...i}),I=k.useRef(null),W=k.useRef(null);k.useImperativeHandle(n,()=>I.current);const Q=mC(D),[J,te]=k.useState(!1),[oe,$]=k.useState(!1);if(J)throw J;if(oe)throw oe;const X=k.useRef(null);L1(()=>{const ee=I.current;if(O.width>0&&O.height>0&&ee){X.current||(X.current=VZ(ee));async function Y(){await X.current.configure({gl:s,scene:C,events:r,shadows:f,linear:g,flat:x,legacy:b,orthographic:_,frameloop:S,dpr:w,performance:M,raycaster:E,camera:T,size:O,onPointerMissed:(...ne)=>Q.current==null?void 0:Q.current(...ne),onCreated:ne=>{ne.events.connect==null||ne.events.connect(l?vZ(l)?l.current:l:W.current),d&&ne.setEvents({compute:(ue,de)=>{const ie=ue[d+"X"],Me=ue[d+"Y"];de.pointer.set(ie/de.size.width*2-1,-(Me/de.size.height)*2+1),de.raycaster.setFromCamera(de.pointer,de.camera)}}),P?.(ne)}}),X.current.render(c.jsx(F,{children:c.jsx(_Z,{set:$,children:c.jsx(k.Suspense,{fallback:c.jsx(bZ,{set:te}),children:e??null})})}))}Y()}}),k.useEffect(()=>{const ee=I.current;if(ee)return()=>Yj(ee)},[]);const G=l?"none":"auto";return c.jsx("div",{ref:W,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:G,...a},...B,children:c.jsx("div",{ref:j,style:{width:"100%",height:"100%"},children:c.jsx("canvas",{ref:I,style:{display:"block"},children:t})})})}function Zj(n){return c.jsx(b3,{children:c.jsx(iQ,{...n})})}function Wp(){return Wp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Wp.apply(null,arguments)}function Qj(n,e){let t;try{t=n()}catch{return}return{getItem:a=>{var s;const r=d=>d===null?null:JSON.parse(d,void 0),l=(s=t.getItem(a))!=null?s:null;return l instanceof Promise?l.then(r):r(l)},setItem:(a,s)=>t.setItem(a,JSON.stringify(s,void 0)),removeItem:a=>t.removeItem(a)}}const OT=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(i){return OT(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return OT(i)(t)}}}},aQ=(n,e)=>(t,i,a)=>{let s={storage:Qj(()=>localStorage),partialize:w=>w,version:0,merge:(w,M)=>({...M,...w}),...e},r=!1;const l=new Set,d=new Set;let f=s.storage;if(!f)return n((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...w)},i,a);const g=()=>{const w=s.partialize({...i()});return f.setItem(s.name,{state:w,version:s.version})},x=a.setState;a.setState=(w,M)=>{x(w,M),g()};const b=n((...w)=>{t(...w),g()},i,a);a.getInitialState=()=>b;let _;const S=()=>{var w,M;if(!f)return;r=!1,l.forEach(T=>{var C;return T((C=i())!=null?C:b)});const E=((M=s.onRehydrateStorage)==null?void 0:M.call(s,(w=i())!=null?w:b))||void 0;return OT(f.getItem.bind(f))(s.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==s.version){if(s.migrate){const C=s.migrate(T.state,T.version);return C instanceof Promise?C.then(D=>[!0,D]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var C;const[D,P]=T;if(_=s.merge(P,(C=i())!=null?C:b),t(_,!0),D)return g()}).then(()=>{E?.(_,void 0),_=i(),r=!0,d.forEach(T=>T(_))}).catch(T=>{E?.(void 0,T)})};return a.persist={setOptions:w=>{s={...s,...w},w.storage&&(f=w.storage)},clearStorage:()=>{f?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>S(),hasHydrated:()=>r,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(d.add(w),()=>{d.delete(w)})},s.skipHydration||S(),_||b},Jj=aQ,$j=parseInt(Lv.replace(/\D+/g,""));var gu=Uint8Array,Ip=Uint16Array,jT=Uint32Array,eP=new gu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tP=new gu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sQ=new gu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nP=function(n,e){for(var t=new Ip(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var a=new jT(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)a[s]=s-t[i]<<5|i;return[t,a]},iP=nP(eP,2),aP=iP[0],rQ=iP[1];aP[28]=258,rQ[258]=28;var oQ=nP(tP,0),lQ=oQ[0],PT=new Ip(32768);for(var $a=0;$a<32768;++$a){var Dp=($a&43690)>>>1|($a&21845)<<1;Dp=(Dp&52428)>>>2|(Dp&13107)<<2,Dp=(Dp&61680)>>>4|(Dp&3855)<<4,PT[$a]=((Dp&65280)>>>8|(Dp&255)<<8)>>>1}var Bx=function(n,e,t){for(var i=n.length,a=0,s=new Ip(e);a<i;++a)++s[n[a]-1];var r=new Ip(e);for(a=0;a<e;++a)r[a]=r[a-1]+s[a-1]<<1;var l;if(t){l=new Ip(1<<e);var d=15-e;for(a=0;a<i;++a)if(n[a])for(var f=a<<4|n[a],g=e-n[a],x=r[n[a]-1]++<<g,b=x|(1<<g)-1;x<=b;++x)l[PT[x]>>>d]=f}else for(l=new Ip(i),a=0;a<i;++a)n[a]&&(l[a]=PT[r[n[a]-1]++]>>>15-n[a]);return l},z1=new gu(288);for(var $a=0;$a<144;++$a)z1[$a]=8;for(var $a=144;$a<256;++$a)z1[$a]=9;for(var $a=256;$a<280;++$a)z1[$a]=7;for(var $a=280;$a<288;++$a)z1[$a]=8;var sP=new gu(32);for(var $a=0;$a<32;++$a)sP[$a]=5;var cQ=Bx(z1,9,1),uQ=Bx(sP,5,1),SM=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ad=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},EM=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},dQ=function(n){return(n/8|0)+(n&7&&1)},hQ=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Ip?Ip:n instanceof jT?jT:gu)(t-e);return i.set(n.subarray(e,t)),i},fQ=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new gu(0);var a=!e||t,s=!t||t.i;t||(t={}),e||(e=new gu(i*3));var r=function(ye){var ae=e.length;if(ye>ae){var _e=new gu(Math.max(ae*2,ye));_e.set(e),e=_e}},l=t.f||0,d=t.p||0,f=t.b||0,g=t.l,x=t.d,b=t.m,_=t.n,S=i*8;do{if(!g){t.f=l=ad(n,d,1);var w=ad(n,d+1,3);if(d+=3,w)if(w==1)g=cQ,x=uQ,b=9,_=5;else if(w==2){var C=ad(n,d,31)+257,D=ad(n,d+10,15)+4,P=C+ad(n,d+5,31)+1;d+=14;for(var B=new gu(P),F=new gu(19),j=0;j<D;++j)F[sQ[j]]=ad(n,d+j*3,7);d+=D*3;for(var O=SM(F),I=(1<<O)-1,W=Bx(F,O,1),j=0;j<P;){var Q=W[ad(n,d,I)];d+=Q&15;var M=Q>>>4;if(M<16)B[j++]=M;else{var J=0,te=0;for(M==16?(te=3+ad(n,d,3),d+=2,J=B[j-1]):M==17?(te=3+ad(n,d,7),d+=3):M==18&&(te=11+ad(n,d,127),d+=7);te--;)B[j++]=J}}var oe=B.subarray(0,C),$=B.subarray(C);b=SM(oe),_=SM($),g=Bx(oe,b,1),x=Bx($,_,1)}else throw"invalid block type";else{var M=dQ(d)+4,E=n[M-4]|n[M-3]<<8,T=M+E;if(T>i){if(s)throw"unexpected EOF";break}a&&r(f+E),e.set(n.subarray(M,T),f),t.b=f+=E,t.p=d=T*8;continue}if(d>S){if(s)throw"unexpected EOF";break}}a&&r(f+131072);for(var X=(1<<b)-1,G=(1<<_)-1,ee=d;;ee=d){var J=g[EM(n,d)&X],Y=J>>>4;if(d+=J&15,d>S){if(s)throw"unexpected EOF";break}if(!J)throw"invalid length/literal";if(Y<256)e[f++]=Y;else if(Y==256){ee=d,g=null;break}else{var ne=Y-254;if(Y>264){var j=Y-257,ue=eP[j];ne=ad(n,d,(1<<ue)-1)+aP[j],d+=ue}var de=x[EM(n,d)&G],ie=de>>>4;if(!de)throw"invalid distance";d+=de&15;var $=lQ[ie];if(ie>3){var ue=tP[ie];$+=EM(n,d)&(1<<ue)-1,d+=ue}if(d>S){if(s)throw"unexpected EOF";break}a&&r(f+131072);for(var Me=f+ne;f<Me;f+=4)e[f]=e[f-$],e[f+1]=e[f+1-$],e[f+2]=e[f+2-$],e[f+3]=e[f+3-$];f=Me}}t.l=g,t.p=ee,t.b=f,g&&(l=1,t.m=b,t.d=x,t.n=_)}while(!l);return f==e.length?e:hQ(e,0,f)},pQ=new gu(0),mQ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function $b(n,e){return fQ((mQ(n),n.subarray(2,-4)),e)}var gQ=typeof TextDecoder<"u"&&new TextDecoder,vQ=0;try{gQ.decode(pQ,{stream:!0}),vQ=1}catch{}const yQ=n=>n&&n.isCubeTexture;class xQ extends us{constructor(e,t){var i,a;const s=yQ(e),l=((a=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?a:1024)/4,d=Math.floor(Math.log2(l)),f=Math.pow(2,d),g=3*Math.max(f,112),x=4*f,b=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/g}`,`#define CUBEUV_TEXEL_HEIGHT ${1/x}`,`#define CUBEUV_MAX_MIP ${d}.0`],_=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,S=b.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${$j>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,w={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},M=new D1(1,16),E=new So({uniforms:w,fragmentShader:S,vertexShader:_,side:cd});super(M,E)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var bQ=Object.defineProperty,_Q=(n,e,t)=>e in n?bQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,SQ=(n,e,t)=>(_Q(n,e+"",t),t);class EQ{constructor(){SQ(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const s=a.indexOf(t);s!==-1&&a.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const a=i.slice(0);for(let s=0,r=a.length;s<r;s++)a[s].call(this,e);e.target=null}}}var wQ=Object.defineProperty,MQ=(n,e,t)=>e in n?wQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,An=(n,e,t)=>(MQ(n,typeof e!="symbol"?e+"":e,t),t);const e_=new Ng,K5=new sh,TQ=Math.cos(70*(Math.PI/180)),Z5=(n,e)=>(n%e+e)%e;let CQ=class extends EQ{constructor(e,t){super(),An(this,"object"),An(this,"domElement"),An(this,"enabled",!0),An(this,"target",new be),An(this,"minDistance",0),An(this,"maxDistance",1/0),An(this,"minZoom",0),An(this,"maxZoom",1/0),An(this,"minPolarAngle",0),An(this,"maxPolarAngle",Math.PI),An(this,"minAzimuthAngle",-1/0),An(this,"maxAzimuthAngle",1/0),An(this,"enableDamping",!1),An(this,"dampingFactor",.05),An(this,"enableZoom",!0),An(this,"zoomSpeed",1),An(this,"enableRotate",!0),An(this,"rotateSpeed",1),An(this,"enablePan",!0),An(this,"panSpeed",1),An(this,"screenSpacePanning",!0),An(this,"keyPanSpeed",7),An(this,"zoomToCursor",!1),An(this,"autoRotate",!1),An(this,"autoRotateSpeed",2),An(this,"reverseOrbit",!1),An(this,"reverseHorizontalOrbit",!1),An(this,"reverseVerticalOrbit",!1),An(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),An(this,"mouseButtons",{LEFT:Jm.ROTATE,MIDDLE:Jm.DOLLY,RIGHT:Jm.PAN}),An(this,"touches",{ONE:$m.ROTATE,TWO:$m.DOLLY_PAN}),An(this,"target0"),An(this,"position0"),An(this,"zoom0"),An(this,"_domElementKeyEvents",null),An(this,"getPolarAngle"),An(this,"getAzimuthalAngle"),An(this,"setPolarAngle"),An(this,"setAzimuthalAngle"),An(this,"getDistance"),An(this,"getZoomScale"),An(this,"listenToKeyEvents"),An(this,"stopListenToKeyEvents"),An(this,"saveState"),An(this,"reset"),An(this,"update"),An(this,"connect"),An(this,"dispose"),An(this,"dollyIn"),An(this,"dollyOut"),An(this,"getScale"),An(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=Ae=>{let Xe=Z5(Ae,2*Math.PI),Mt=g.phi;Mt<0&&(Mt+=2*Math.PI),Xe<0&&(Xe+=2*Math.PI);let Ne=Math.abs(Xe-Mt);2*Math.PI-Ne<Ne&&(Xe<Mt?Xe+=2*Math.PI:Mt+=2*Math.PI),x.phi=Xe-Mt,i.update()},this.setAzimuthalAngle=Ae=>{let Xe=Z5(Ae,2*Math.PI),Mt=g.theta;Mt<0&&(Mt+=2*Math.PI),Xe<0&&(Xe+=2*Math.PI);let Ne=Math.abs(Xe-Mt);2*Math.PI-Ne<Ne&&(Xe<Mt?Xe+=2*Math.PI:Mt+=2*Math.PI),x.theta=Xe-Mt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=Ae=>{Ae.addEventListener("keydown",ze),this._domElementKeyEvents=Ae},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ze),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(a),i.update(),d=l.NONE},this.update=(()=>{const Ae=new be,Xe=new be(0,1,0),Mt=new Ko().setFromUnitVectors(e.up,Xe),Ne=Mt.clone().invert(),Qe=new be,bt=new Ko,kt=2*Math.PI;return function(){const xt=i.object.position;Mt.setFromUnitVectors(e.up,Xe),Ne.copy(Mt).invert(),Ae.copy(xt).sub(i.target),Ae.applyQuaternion(Mt),g.setFromVector3(Ae),i.autoRotate&&d===l.NONE&&te(Q()),i.enableDamping?(g.theta+=x.theta*i.dampingFactor,g.phi+=x.phi*i.dampingFactor):(g.theta+=x.theta,g.phi+=x.phi);let Vt=i.minAzimuthAngle,$t=i.maxAzimuthAngle;isFinite(Vt)&&isFinite($t)&&(Vt<-Math.PI?Vt+=kt:Vt>Math.PI&&(Vt-=kt),$t<-Math.PI?$t+=kt:$t>Math.PI&&($t-=kt),Vt<=$t?g.theta=Math.max(Vt,Math.min($t,g.theta)):g.theta=g.theta>(Vt+$t)/2?Math.max(Vt,g.theta):Math.min($t,g.theta)),g.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,g.phi)),g.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(_,i.dampingFactor):i.target.add(_),i.zoomToCursor&&O||i.object.isOrthographicCamera?g.radius=de(g.radius):g.radius=de(g.radius*b),Ae.setFromSpherical(g),Ae.applyQuaternion(Ne),xt.copy(i.target).add(Ae),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(x.theta*=1-i.dampingFactor,x.phi*=1-i.dampingFactor,_.multiplyScalar(1-i.dampingFactor)):(x.set(0,0,0),_.set(0,0,0));let Xn=!1;if(i.zoomToCursor&&O){let Dn=null;if(i.object instanceof Gs&&i.object.isPerspectiveCamera){const ga=Ae.length();Dn=de(ga*b);const ta=ga-Dn;i.object.position.addScaledVector(F,ta),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const ga=new be(j.x,j.y,0);ga.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/b)),i.object.updateProjectionMatrix(),Xn=!0;const ta=new be(j.x,j.y,0);ta.unproject(i.object),i.object.position.sub(ta).add(ga),i.object.updateMatrixWorld(),Dn=Ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Dn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Dn).add(i.object.position):(e_.origin.copy(i.object.position),e_.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(e_.direction))<TQ?e.lookAt(i.target):(K5.setFromNormalAndCoplanarPoint(i.object.up,i.target),e_.intersectPlane(K5,i.target))))}else i.object instanceof Cf&&i.object.isOrthographicCamera&&(Xn=b!==1,Xn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/b)),i.object.updateProjectionMatrix()));return b=1,O=!1,Xn||Qe.distanceToSquared(i.object.position)>f||8*(1-bt.dot(i.object.quaternion))>f?(i.dispatchEvent(a),Qe.copy(i.object.position),bt.copy(i.object.quaternion),Xn=!1,!0):!1}})(),this.connect=Ae=>{i.domElement=Ae,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ft),i.domElement.addEventListener("pointerdown",Pt),i.domElement.addEventListener("pointercancel",se),i.domElement.addEventListener("wheel",Te)},this.dispose=()=>{var Ae,Xe,Mt,Ne,Qe,bt;i.domElement&&(i.domElement.style.touchAction="auto"),(Ae=i.domElement)==null||Ae.removeEventListener("contextmenu",Ft),(Xe=i.domElement)==null||Xe.removeEventListener("pointerdown",Pt),(Mt=i.domElement)==null||Mt.removeEventListener("pointercancel",se),(Ne=i.domElement)==null||Ne.removeEventListener("wheel",Te),(Qe=i.domElement)==null||Qe.ownerDocument.removeEventListener("pointermove",Se),(bt=i.domElement)==null||bt.ownerDocument.removeEventListener("pointerup",se),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ze)};const i=this,a={type:"change"},s={type:"start"},r={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=l.NONE;const f=1e-6,g=new ET,x=new ET;let b=1;const _=new be,S=new wt,w=new wt,M=new wt,E=new wt,T=new wt,C=new wt,D=new wt,P=new wt,B=new wt,F=new be,j=new wt;let O=!1;const I=[],W={};function Q(){return 2*Math.PI/60/60*i.autoRotateSpeed}function J(){return Math.pow(.95,i.zoomSpeed)}function te(Ae){i.reverseOrbit||i.reverseHorizontalOrbit?x.theta+=Ae:x.theta-=Ae}function oe(Ae){i.reverseOrbit||i.reverseVerticalOrbit?x.phi+=Ae:x.phi-=Ae}const $=(()=>{const Ae=new be;return function(Mt,Ne){Ae.setFromMatrixColumn(Ne,0),Ae.multiplyScalar(-Mt),_.add(Ae)}})(),X=(()=>{const Ae=new be;return function(Mt,Ne){i.screenSpacePanning===!0?Ae.setFromMatrixColumn(Ne,1):(Ae.setFromMatrixColumn(Ne,0),Ae.crossVectors(i.object.up,Ae)),Ae.multiplyScalar(Mt),_.add(Ae)}})(),G=(()=>{const Ae=new be;return function(Mt,Ne){const Qe=i.domElement;if(Qe&&i.object instanceof Gs&&i.object.isPerspectiveCamera){const bt=i.object.position;Ae.copy(bt).sub(i.target);let kt=Ae.length();kt*=Math.tan(i.object.fov/2*Math.PI/180),$(2*Mt*kt/Qe.clientHeight,i.object.matrix),X(2*Ne*kt/Qe.clientHeight,i.object.matrix)}else Qe&&i.object instanceof Cf&&i.object.isOrthographicCamera?($(Mt*(i.object.right-i.object.left)/i.object.zoom/Qe.clientWidth,i.object.matrix),X(Ne*(i.object.top-i.object.bottom)/i.object.zoom/Qe.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function ee(Ae){i.object instanceof Gs&&i.object.isPerspectiveCamera||i.object instanceof Cf&&i.object.isOrthographicCamera?b=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Y(Ae){ee(b/Ae)}function ne(Ae){ee(b*Ae)}function ue(Ae){if(!i.zoomToCursor||!i.domElement)return;O=!0;const Xe=i.domElement.getBoundingClientRect(),Mt=Ae.clientX-Xe.left,Ne=Ae.clientY-Xe.top,Qe=Xe.width,bt=Xe.height;j.x=Mt/Qe*2-1,j.y=-(Ne/bt)*2+1,F.set(j.x,j.y,1).unproject(i.object).sub(i.object.position).normalize()}function de(Ae){return Math.max(i.minDistance,Math.min(i.maxDistance,Ae))}function ie(Ae){S.set(Ae.clientX,Ae.clientY)}function Me(Ae){ue(Ae),D.set(Ae.clientX,Ae.clientY)}function ye(Ae){E.set(Ae.clientX,Ae.clientY)}function ae(Ae){w.set(Ae.clientX,Ae.clientY),M.subVectors(w,S).multiplyScalar(i.rotateSpeed);const Xe=i.domElement;Xe&&(te(2*Math.PI*M.x/Xe.clientHeight),oe(2*Math.PI*M.y/Xe.clientHeight)),S.copy(w),i.update()}function _e(Ae){P.set(Ae.clientX,Ae.clientY),B.subVectors(P,D),B.y>0?Y(J()):B.y<0&&ne(J()),D.copy(P),i.update()}function Ke(Ae){T.set(Ae.clientX,Ae.clientY),C.subVectors(T,E).multiplyScalar(i.panSpeed),G(C.x,C.y),E.copy(T),i.update()}function Ge(Ae){ue(Ae),Ae.deltaY<0?ne(J()):Ae.deltaY>0&&Y(J()),i.update()}function st(Ae){let Xe=!1;switch(Ae.code){case i.keys.UP:G(0,i.keyPanSpeed),Xe=!0;break;case i.keys.BOTTOM:G(0,-i.keyPanSpeed),Xe=!0;break;case i.keys.LEFT:G(i.keyPanSpeed,0),Xe=!0;break;case i.keys.RIGHT:G(-i.keyPanSpeed,0),Xe=!0;break}Xe&&(Ae.preventDefault(),i.update())}function ft(){if(I.length==1)S.set(I[0].pageX,I[0].pageY);else{const Ae=.5*(I[0].pageX+I[1].pageX),Xe=.5*(I[0].pageY+I[1].pageY);S.set(Ae,Xe)}}function Pe(){if(I.length==1)E.set(I[0].pageX,I[0].pageY);else{const Ae=.5*(I[0].pageX+I[1].pageX),Xe=.5*(I[0].pageY+I[1].pageY);E.set(Ae,Xe)}}function he(){const Ae=I[0].pageX-I[1].pageX,Xe=I[0].pageY-I[1].pageY,Mt=Math.sqrt(Ae*Ae+Xe*Xe);D.set(0,Mt)}function ke(){i.enableZoom&&he(),i.enablePan&&Pe()}function Ee(){i.enableZoom&&he(),i.enableRotate&&ft()}function Le(Ae){if(I.length==1)w.set(Ae.pageX,Ae.pageY);else{const Mt=Wt(Ae),Ne=.5*(Ae.pageX+Mt.x),Qe=.5*(Ae.pageY+Mt.y);w.set(Ne,Qe)}M.subVectors(w,S).multiplyScalar(i.rotateSpeed);const Xe=i.domElement;Xe&&(te(2*Math.PI*M.x/Xe.clientHeight),oe(2*Math.PI*M.y/Xe.clientHeight)),S.copy(w)}function Ie(Ae){if(I.length==1)T.set(Ae.pageX,Ae.pageY);else{const Xe=Wt(Ae),Mt=.5*(Ae.pageX+Xe.x),Ne=.5*(Ae.pageY+Xe.y);T.set(Mt,Ne)}C.subVectors(T,E).multiplyScalar(i.panSpeed),G(C.x,C.y),E.copy(T)}function Et(Ae){const Xe=Wt(Ae),Mt=Ae.pageX-Xe.x,Ne=Ae.pageY-Xe.y,Qe=Math.sqrt(Mt*Mt+Ne*Ne);P.set(0,Qe),B.set(0,Math.pow(P.y/D.y,i.zoomSpeed)),Y(B.y),D.copy(P)}function ct(Ae){i.enableZoom&&Et(Ae),i.enablePan&&Ie(Ae)}function At(Ae){i.enableZoom&&Et(Ae),i.enableRotate&&Le(Ae)}function Pt(Ae){var Xe,Mt;i.enabled!==!1&&(I.length===0&&((Xe=i.domElement)==null||Xe.ownerDocument.addEventListener("pointermove",Se),(Mt=i.domElement)==null||Mt.ownerDocument.addEventListener("pointerup",se)),Xt(Ae),Ae.pointerType==="touch"?Nt(Ae):He(Ae))}function Se(Ae){i.enabled!==!1&&(Ae.pointerType==="touch"?Dt(Ae):Ve(Ae))}function se(Ae){var Xe,Mt,Ne;gt(Ae),I.length===0&&((Xe=i.domElement)==null||Xe.releasePointerCapture(Ae.pointerId),(Mt=i.domElement)==null||Mt.ownerDocument.removeEventListener("pointermove",Se),(Ne=i.domElement)==null||Ne.ownerDocument.removeEventListener("pointerup",se)),i.dispatchEvent(r),d=l.NONE}function He(Ae){let Xe;switch(Ae.button){case 0:Xe=i.mouseButtons.LEFT;break;case 1:Xe=i.mouseButtons.MIDDLE;break;case 2:Xe=i.mouseButtons.RIGHT;break;default:Xe=-1}switch(Xe){case Jm.DOLLY:if(i.enableZoom===!1)return;Me(Ae),d=l.DOLLY;break;case Jm.ROTATE:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(i.enablePan===!1)return;ye(Ae),d=l.PAN}else{if(i.enableRotate===!1)return;ie(Ae),d=l.ROTATE}break;case Jm.PAN:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(i.enableRotate===!1)return;ie(Ae),d=l.ROTATE}else{if(i.enablePan===!1)return;ye(Ae),d=l.PAN}break;default:d=l.NONE}d!==l.NONE&&i.dispatchEvent(s)}function Ve(Ae){if(i.enabled!==!1)switch(d){case l.ROTATE:if(i.enableRotate===!1)return;ae(Ae);break;case l.DOLLY:if(i.enableZoom===!1)return;_e(Ae);break;case l.PAN:if(i.enablePan===!1)return;Ke(Ae);break}}function Te(Ae){i.enabled===!1||i.enableZoom===!1||d!==l.NONE&&d!==l.ROTATE||(Ae.preventDefault(),i.dispatchEvent(s),Ge(Ae),i.dispatchEvent(r))}function ze(Ae){i.enabled===!1||i.enablePan===!1||st(Ae)}function Nt(Ae){switch(Ot(Ae),I.length){case 1:switch(i.touches.ONE){case $m.ROTATE:if(i.enableRotate===!1)return;ft(),d=l.TOUCH_ROTATE;break;case $m.PAN:if(i.enablePan===!1)return;Pe(),d=l.TOUCH_PAN;break;default:d=l.NONE}break;case 2:switch(i.touches.TWO){case $m.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ke(),d=l.TOUCH_DOLLY_PAN;break;case $m.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ee(),d=l.TOUCH_DOLLY_ROTATE;break;default:d=l.NONE}break;default:d=l.NONE}d!==l.NONE&&i.dispatchEvent(s)}function Dt(Ae){switch(Ot(Ae),d){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;Le(Ae),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;Ie(Ae),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ct(Ae),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;At(Ae),i.update();break;default:d=l.NONE}}function Ft(Ae){i.enabled!==!1&&Ae.preventDefault()}function Xt(Ae){I.push(Ae)}function gt(Ae){delete W[Ae.pointerId];for(let Xe=0;Xe<I.length;Xe++)if(I[Xe].pointerId==Ae.pointerId){I.splice(Xe,1);return}}function Ot(Ae){let Xe=W[Ae.pointerId];Xe===void 0&&(Xe=new wt,W[Ae.pointerId]=Xe),Xe.set(Ae.pageX,Ae.pageY)}function Wt(Ae){const Xe=Ae.pointerId===I[0].pointerId?I[1]:I[0];return W[Xe.pointerId]}this.dollyIn=(Ae=J())=>{ne(Ae),i.update()},this.dollyOut=(Ae=J())=>{Y(Ae),i.update()},this.getScale=()=>b,this.setScale=Ae=>{ee(Ae),i.update()},this.getZoomScale=()=>J(),t!==void 0&&this.connect(t),this.update()}};const AQ={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},NQ={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class RQ extends sC{constructor(e){super(e),this.type=Jr}parse(e){const r=function(j,O){switch(j){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(O||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(O||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(O||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(O||""))}},x=function(j,O,I){O=O||1024;let Q=j.pos,J=-1,te=0,oe="",$=String.fromCharCode.apply(null,new Uint16Array(j.subarray(Q,Q+128)));for(;0>(J=$.indexOf(`
`))&&te<O&&Q<j.byteLength;)oe+=$,te+=$.length,Q+=128,$+=String.fromCharCode.apply(null,new Uint16Array(j.subarray(Q,Q+128)));return-1<J?(j.pos+=te+J+1,oe+$.slice(0,J)):!1},b=function(j){const O=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,W=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Q=/^\s*FORMAT=(\S+)\s*$/,J=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,te={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let oe,$;for((j.pos>=j.byteLength||!(oe=x(j)))&&r(1,"no header found"),($=oe.match(O))||r(3,"bad initial token"),te.valid|=1,te.programtype=$[1],te.string+=oe+`
`;oe=x(j),oe!==!1;){if(te.string+=oe+`
`,oe.charAt(0)==="#"){te.comments+=oe+`
`;continue}if(($=oe.match(I))&&(te.gamma=parseFloat($[1])),($=oe.match(W))&&(te.exposure=parseFloat($[1])),($=oe.match(Q))&&(te.valid|=2,te.format=$[1]),($=oe.match(J))&&(te.valid|=4,te.height=parseInt($[1],10),te.width=parseInt($[2],10)),te.valid&2&&te.valid&4)break}return te.valid&2||r(3,"missing format specifier"),te.valid&4||r(3,"missing image size specifier"),te},_=function(j,O,I){const W=O;if(W<8||W>32767||j[0]!==2||j[1]!==2||j[2]&128)return new Uint8Array(j);W!==(j[2]<<8|j[3])&&r(3,"wrong scanline width");const Q=new Uint8Array(4*O*I);Q.length||r(4,"unable to allocate buffer space");let J=0,te=0;const oe=4*W,$=new Uint8Array(4),X=new Uint8Array(oe);let G=I;for(;G>0&&te<j.byteLength;){te+4>j.byteLength&&r(1),$[0]=j[te++],$[1]=j[te++],$[2]=j[te++],$[3]=j[te++],($[0]!=2||$[1]!=2||($[2]<<8|$[3])!=W)&&r(3,"bad rgbe scanline format");let ee=0,Y;for(;ee<oe&&te<j.byteLength;){Y=j[te++];const ue=Y>128;if(ue&&(Y-=128),(Y===0||ee+Y>oe)&&r(3,"bad scanline data"),ue){const de=j[te++];for(let ie=0;ie<Y;ie++)X[ee++]=de}else X.set(j.subarray(te,te+Y),ee),ee+=Y,te+=Y}const ne=W;for(let ue=0;ue<ne;ue++){let de=0;Q[J]=X[ue+de],de+=W,Q[J+1]=X[ue+de],de+=W,Q[J+2]=X[ue+de],de+=W,Q[J+3]=X[ue+de],J+=4}G--}return Q},S=function(j,O,I,W){const Q=j[O+3],J=Math.pow(2,Q-128)/255;I[W+0]=j[O+0]*J,I[W+1]=j[O+1]*J,I[W+2]=j[O+2]*J,I[W+3]=1},w=function(j,O,I,W){const Q=j[O+3],J=Math.pow(2,Q-128)/255;I[W+0]=rg.toHalfFloat(Math.min(j[O+0]*J,65504)),I[W+1]=rg.toHalfFloat(Math.min(j[O+1]*J,65504)),I[W+2]=rg.toHalfFloat(Math.min(j[O+2]*J,65504)),I[W+3]=rg.toHalfFloat(1)},M=new Uint8Array(e);M.pos=0;const E=b(M),T=E.width,C=E.height,D=_(M.subarray(M.pos),T,C);let P,B,F;switch(this.type){case bs:F=D.length/4;const j=new Float32Array(F*4);for(let I=0;I<F;I++)S(D,I*4,j,I*4);P=j,B=bs;break;case Jr:F=D.length/4;const O=new Uint16Array(F*4);for(let I=0;I<F;I++)w(D,I*4,O,I*4);P=O,B=Jr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:T,height:C,data:P,header:E.string,gamma:E.gamma,exposure:E.exposure,type:B}}setDataType(e){return this.type=e,this}load(e,t,i,a){function s(r,l){switch(r.type){case bs:case Jr:"colorSpace"in r?r.colorSpace="srgb-linear":r.encoding=3e3,r.minFilter=Aa,r.magFilter=Aa,r.generateMipmaps=!1,r.flipY=!0;break}t&&t(r,l)}return super.load(e,s,i,a)}}const mx=$j>=152;class DQ extends sC{constructor(e){super(e),this.type=Jr}parse(e){const O=Math.pow(2.7182818,2.2);function I(le,ve){for(var Ue=0,tt=0;tt<65536;++tt)(tt==0||le[tt>>3]&1<<(tt&7))&&(ve[Ue++]=tt);for(var at=Ue-1;Ue<65536;)ve[Ue++]=0;return at}function W(le){for(var ve=0;ve<16384;ve++)le[ve]={},le[ve].len=0,le[ve].lit=0,le[ve].p=null}const Q={l:0,c:0,lc:0};function J(le,ve,Ue,tt,at){for(;Ue<le;)ve=ve<<8|Wt(tt,at),Ue+=8;Ue-=le,Q.l=ve>>Ue&(1<<le)-1,Q.c=ve,Q.lc=Ue}const te=new Array(59);function oe(le){for(var ve=0;ve<=58;++ve)te[ve]=0;for(var ve=0;ve<65537;++ve)te[le[ve]]+=1;for(var Ue=0,ve=58;ve>0;--ve){var tt=Ue+te[ve]>>1;te[ve]=Ue,Ue=tt}for(var ve=0;ve<65537;++ve){var at=le[ve];at>0&&(le[ve]=at|te[at]++<<6)}}function $(le,ve,Ue,tt,at,ut,Lt){for(var mt=Ue,ce=0,we=0;at<=ut;at++){if(mt.value-Ue.value>tt)return!1;J(6,ce,we,le,mt);var Re=Q.l;if(ce=Q.c,we=Q.lc,Lt[at]=Re,Re==63){if(mt.value-Ue.value>tt)throw"Something wrong with hufUnpackEncTable";J(8,ce,we,le,mt);var De=Q.l+6;if(ce=Q.c,we=Q.lc,at+De>ut+1)throw"Something wrong with hufUnpackEncTable";for(;De--;)Lt[at++]=0;at--}else if(Re>=59){var De=Re-59+2;if(at+De>ut+1)throw"Something wrong with hufUnpackEncTable";for(;De--;)Lt[at++]=0;at--}}oe(Lt)}function X(le){return le&63}function G(le){return le>>6}function ee(le,ve,Ue,tt){for(;ve<=Ue;ve++){var at=G(le[ve]),ut=X(le[ve]);if(at>>ut)throw"Invalid table entry";if(ut>14){var Lt=tt[at>>ut-14];if(Lt.len)throw"Invalid table entry";if(Lt.lit++,Lt.p){var mt=Lt.p;Lt.p=new Array(Lt.lit);for(var ce=0;ce<Lt.lit-1;++ce)Lt.p[ce]=mt[ce]}else Lt.p=new Array(1);Lt.p[Lt.lit-1]=ve}else if(ut)for(var we=0,ce=1<<14-ut;ce>0;ce--){var Lt=tt[(at<<14-ut)+we];if(Lt.len||Lt.p)throw"Invalid table entry";Lt.len=ut,Lt.lit=ve,we++}}return!0}const Y={c:0,lc:0};function ne(le,ve,Ue,tt){le=le<<8|Wt(Ue,tt),ve+=8,Y.c=le,Y.lc=ve}const ue={c:0,lc:0};function de(le,ve,Ue,tt,at,ut,Lt,mt,ce,we){if(le==ve){tt<8&&(ne(Ue,tt,at,Lt),Ue=Y.c,tt=Y.lc),tt-=8;var Re=Ue>>tt,Re=new Uint8Array([Re])[0];if(ce.value+Re>we)return!1;for(var De=mt[ce.value-1];Re-- >0;)mt[ce.value++]=De}else if(ce.value<we)mt[ce.value++]=le;else return!1;ue.c=Ue,ue.lc=tt}function ie(le){return le&65535}function Me(le){var ve=ie(le);return ve>32767?ve-65536:ve}const ye={a:0,b:0};function ae(le,ve){var Ue=Me(le),tt=Me(ve),at=tt,ut=Ue+(at&1)+(at>>1),Lt=ut,mt=ut-at;ye.a=Lt,ye.b=mt}function _e(le,ve){var Ue=ie(le),tt=ie(ve),at=Ue-(tt>>1)&65535,ut=tt+at-32768&65535;ye.a=ut,ye.b=at}function Ke(le,ve,Ue,tt,at,ut,Lt){for(var mt=Lt<16384,ce=Ue>at?at:Ue,we=1,Re;we<=ce;)we<<=1;for(we>>=1,Re=we,we>>=1;we>=1;){for(var De=0,Be=De+ut*(at-Re),Je=ut*we,dt=ut*Re,_t=tt*we,vt=tt*Re,Ut,Ht,Gt,an;De<=Be;De+=dt){for(var sn=De,Ln=De+tt*(Ue-Re);sn<=Ln;sn+=vt){var Kt=sn+_t,Sn=sn+Je,Qt=Sn+_t;mt?(ae(le[sn+ve],le[Sn+ve]),Ut=ye.a,Gt=ye.b,ae(le[Kt+ve],le[Qt+ve]),Ht=ye.a,an=ye.b,ae(Ut,Ht),le[sn+ve]=ye.a,le[Kt+ve]=ye.b,ae(Gt,an),le[Sn+ve]=ye.a,le[Qt+ve]=ye.b):(_e(le[sn+ve],le[Sn+ve]),Ut=ye.a,Gt=ye.b,_e(le[Kt+ve],le[Qt+ve]),Ht=ye.a,an=ye.b,_e(Ut,Ht),le[sn+ve]=ye.a,le[Kt+ve]=ye.b,_e(Gt,an),le[Sn+ve]=ye.a,le[Qt+ve]=ye.b)}if(Ue&we){var Sn=sn+Je;mt?ae(le[sn+ve],le[Sn+ve]):_e(le[sn+ve],le[Sn+ve]),Ut=ye.a,le[Sn+ve]=ye.b,le[sn+ve]=Ut}}if(at&we)for(var sn=De,Ln=De+tt*(Ue-Re);sn<=Ln;sn+=vt){var Kt=sn+_t;mt?ae(le[sn+ve],le[Kt+ve]):_e(le[sn+ve],le[Kt+ve]),Ut=ye.a,le[Kt+ve]=ye.b,le[sn+ve]=Ut}Re=we,we>>=1}return De}function Ge(le,ve,Ue,tt,at,ut,Lt,mt,ce,we){for(var Re=0,De=0,Be=mt,Je=Math.trunc(at.value+(ut+7)/8);at.value<Je;)for(ne(Re,De,Ue,at),Re=Y.c,De=Y.lc;De>=14;){var dt=Re>>De-14&16383,_t=ve[dt];if(_t.len)De-=_t.len,de(_t.lit,Lt,Re,De,Ue,tt,at,ce,we,Be),Re=ue.c,De=ue.lc;else{if(!_t.p)throw"hufDecode issues";var vt;for(vt=0;vt<_t.lit;vt++){for(var Ut=X(le[_t.p[vt]]);De<Ut&&at.value<Je;)ne(Re,De,Ue,at),Re=Y.c,De=Y.lc;if(De>=Ut&&G(le[_t.p[vt]])==(Re>>De-Ut&(1<<Ut)-1)){De-=Ut,de(_t.p[vt],Lt,Re,De,Ue,tt,at,ce,we,Be),Re=ue.c,De=ue.lc;break}}if(vt==_t.lit)throw"hufDecode issues"}}var Ht=8-ut&7;for(Re>>=Ht,De-=Ht;De>0;){var _t=ve[Re<<14-De&16383];if(_t.len)De-=_t.len,de(_t.lit,Lt,Re,De,Ue,tt,at,ce,we,Be),Re=ue.c,De=ue.lc;else throw"hufDecode issues"}return!0}function st(le,ve,Ue,tt,at,ut){var Lt={value:0},mt=Ue.value,ce=Ot(ve,Ue),we=Ot(ve,Ue);Ue.value+=4;var Re=Ot(ve,Ue);if(Ue.value+=4,ce<0||ce>=65537||we<0||we>=65537)throw"Something wrong with HUF_ENCSIZE";var De=new Array(65537),Be=new Array(16384);W(Be);var Je=tt-(Ue.value-mt);if($(le,ve,Ue,Je,ce,we,De),Re>8*(tt-(Ue.value-mt)))throw"Something wrong with hufUncompress";ee(De,ce,we,Be),Ge(De,Be,le,ve,Ue,Re,we,ut,at,Lt)}function ft(le,ve,Ue){for(var tt=0;tt<Ue;++tt)ve[tt]=le[ve[tt]]}function Pe(le){for(var ve=1;ve<le.length;ve++){var Ue=le[ve-1]+le[ve]-128;le[ve]=Ue}}function he(le,ve){for(var Ue=0,tt=Math.floor((le.length+1)/2),at=0,ut=le.length-1;!(at>ut||(ve[at++]=le[Ue++],at>ut));)ve[at++]=le[tt++]}function ke(le){for(var ve=le.byteLength,Ue=new Array,tt=0,at=new DataView(le);ve>0;){var ut=at.getInt8(tt++);if(ut<0){var Lt=-ut;ve-=Lt+1;for(var mt=0;mt<Lt;mt++)Ue.push(at.getUint8(tt++))}else{var Lt=ut;ve-=2;for(var ce=at.getUint8(tt++),mt=0;mt<Lt+1;mt++)Ue.push(ce)}}return Ue}function Ee(le,ve,Ue,tt,at,ut){var Kt=new DataView(ut.buffer),Lt=Ue[le.idx[0]].width,mt=Ue[le.idx[0]].height,ce=3,we=Math.floor(Lt/8),Re=Math.ceil(Lt/8),De=Math.ceil(mt/8),Be=Lt-(Re-1)*8,Je=mt-(De-1)*8,dt={value:0},_t=new Array(ce),vt=new Array(ce),Ut=new Array(ce),Ht=new Array(ce),Gt=new Array(ce);for(let Tn=0;Tn<ce;++Tn)Gt[Tn]=ve[le.idx[Tn]],_t[Tn]=Tn<1?0:_t[Tn-1]+Re*De,vt[Tn]=new Float32Array(64),Ut[Tn]=new Uint16Array(64),Ht[Tn]=new Uint16Array(Re*64);for(let Tn=0;Tn<De;++Tn){var an=8;Tn==De-1&&(an=Je);var sn=8;for(let yn=0;yn<Re;++yn){yn==Re-1&&(sn=Be);for(let $n=0;$n<ce;++$n)Ut[$n].fill(0),Ut[$n][0]=at[_t[$n]++],Le(dt,tt,Ut[$n]),Ie(Ut[$n],vt[$n]),Et(vt[$n]);ct(vt);for(let $n=0;$n<ce;++$n)At(vt[$n],Ht[$n],yn*64)}let na=0;for(let yn=0;yn<ce;++yn){const $n=Ue[le.idx[yn]].type;for(let Gn=8*Tn;Gn<8*Tn+an;++Gn){na=Gt[yn][Gn];for(let ha=0;ha<we;++ha){const Ei=ha*64+(Gn&7)*8;Kt.setUint16(na+0*$n,Ht[yn][Ei+0],!0),Kt.setUint16(na+2*$n,Ht[yn][Ei+1],!0),Kt.setUint16(na+4*$n,Ht[yn][Ei+2],!0),Kt.setUint16(na+6*$n,Ht[yn][Ei+3],!0),Kt.setUint16(na+8*$n,Ht[yn][Ei+4],!0),Kt.setUint16(na+10*$n,Ht[yn][Ei+5],!0),Kt.setUint16(na+12*$n,Ht[yn][Ei+6],!0),Kt.setUint16(na+14*$n,Ht[yn][Ei+7],!0),na+=16*$n}}if(we!=Re)for(let Gn=8*Tn;Gn<8*Tn+an;++Gn){const ha=Gt[yn][Gn]+8*we*2*$n,Ei=we*64+(Gn&7)*8;for(let ia=0;ia<sn;++ia)Kt.setUint16(ha+ia*2*$n,Ht[yn][Ei+ia],!0)}}}for(var Ln=new Uint16Array(Lt),Kt=new DataView(ut.buffer),Sn=0;Sn<ce;++Sn){Ue[le.idx[Sn]].decoded=!0;var Qt=Ue[le.idx[Sn]].type;if(Ue[Sn].type==2)for(var vi=0;vi<mt;++vi){const Tn=Gt[Sn][vi];for(var En=0;En<Lt;++En)Ln[En]=Kt.getUint16(Tn+En*2*Qt,!0);for(var En=0;En<Lt;++En)Kt.setFloat32(Tn+En*2*Qt,Qe(Ln[En]),!0)}}}function Le(le,ve,Ue){for(var tt,at=1;at<64;)tt=ve[le.value],tt==65280?at=64:tt>>8==255?at+=tt&255:(Ue[at]=tt,at++),le.value++}function Ie(le,ve){ve[0]=Qe(le[0]),ve[1]=Qe(le[1]),ve[2]=Qe(le[5]),ve[3]=Qe(le[6]),ve[4]=Qe(le[14]),ve[5]=Qe(le[15]),ve[6]=Qe(le[27]),ve[7]=Qe(le[28]),ve[8]=Qe(le[2]),ve[9]=Qe(le[4]),ve[10]=Qe(le[7]),ve[11]=Qe(le[13]),ve[12]=Qe(le[16]),ve[13]=Qe(le[26]),ve[14]=Qe(le[29]),ve[15]=Qe(le[42]),ve[16]=Qe(le[3]),ve[17]=Qe(le[8]),ve[18]=Qe(le[12]),ve[19]=Qe(le[17]),ve[20]=Qe(le[25]),ve[21]=Qe(le[30]),ve[22]=Qe(le[41]),ve[23]=Qe(le[43]),ve[24]=Qe(le[9]),ve[25]=Qe(le[11]),ve[26]=Qe(le[18]),ve[27]=Qe(le[24]),ve[28]=Qe(le[31]),ve[29]=Qe(le[40]),ve[30]=Qe(le[44]),ve[31]=Qe(le[53]),ve[32]=Qe(le[10]),ve[33]=Qe(le[19]),ve[34]=Qe(le[23]),ve[35]=Qe(le[32]),ve[36]=Qe(le[39]),ve[37]=Qe(le[45]),ve[38]=Qe(le[52]),ve[39]=Qe(le[54]),ve[40]=Qe(le[20]),ve[41]=Qe(le[22]),ve[42]=Qe(le[33]),ve[43]=Qe(le[38]),ve[44]=Qe(le[46]),ve[45]=Qe(le[51]),ve[46]=Qe(le[55]),ve[47]=Qe(le[60]),ve[48]=Qe(le[21]),ve[49]=Qe(le[34]),ve[50]=Qe(le[37]),ve[51]=Qe(le[47]),ve[52]=Qe(le[50]),ve[53]=Qe(le[56]),ve[54]=Qe(le[59]),ve[55]=Qe(le[61]),ve[56]=Qe(le[35]),ve[57]=Qe(le[36]),ve[58]=Qe(le[48]),ve[59]=Qe(le[49]),ve[60]=Qe(le[57]),ve[61]=Qe(le[58]),ve[62]=Qe(le[62]),ve[63]=Qe(le[63])}function Et(le){const ve=.5*Math.cos(.7853975),Ue=.5*Math.cos(3.14159/16),tt=.5*Math.cos(3.14159/8),at=.5*Math.cos(3*3.14159/16),ut=.5*Math.cos(5*3.14159/16),Lt=.5*Math.cos(3*3.14159/8),mt=.5*Math.cos(7*3.14159/16);for(var ce=new Array(4),we=new Array(4),Re=new Array(4),De=new Array(4),Be=0;Be<8;++Be){var Je=Be*8;ce[0]=tt*le[Je+2],ce[1]=Lt*le[Je+2],ce[2]=tt*le[Je+6],ce[3]=Lt*le[Je+6],we[0]=Ue*le[Je+1]+at*le[Je+3]+ut*le[Je+5]+mt*le[Je+7],we[1]=at*le[Je+1]-mt*le[Je+3]-Ue*le[Je+5]-ut*le[Je+7],we[2]=ut*le[Je+1]-Ue*le[Je+3]+mt*le[Je+5]+at*le[Je+7],we[3]=mt*le[Je+1]-ut*le[Je+3]+at*le[Je+5]-Ue*le[Je+7],Re[0]=ve*(le[Je+0]+le[Je+4]),Re[3]=ve*(le[Je+0]-le[Je+4]),Re[1]=ce[0]+ce[3],Re[2]=ce[1]-ce[2],De[0]=Re[0]+Re[1],De[1]=Re[3]+Re[2],De[2]=Re[3]-Re[2],De[3]=Re[0]-Re[1],le[Je+0]=De[0]+we[0],le[Je+1]=De[1]+we[1],le[Je+2]=De[2]+we[2],le[Je+3]=De[3]+we[3],le[Je+4]=De[3]-we[3],le[Je+5]=De[2]-we[2],le[Je+6]=De[1]-we[1],le[Je+7]=De[0]-we[0]}for(var dt=0;dt<8;++dt)ce[0]=tt*le[16+dt],ce[1]=Lt*le[16+dt],ce[2]=tt*le[48+dt],ce[3]=Lt*le[48+dt],we[0]=Ue*le[8+dt]+at*le[24+dt]+ut*le[40+dt]+mt*le[56+dt],we[1]=at*le[8+dt]-mt*le[24+dt]-Ue*le[40+dt]-ut*le[56+dt],we[2]=ut*le[8+dt]-Ue*le[24+dt]+mt*le[40+dt]+at*le[56+dt],we[3]=mt*le[8+dt]-ut*le[24+dt]+at*le[40+dt]-Ue*le[56+dt],Re[0]=ve*(le[dt]+le[32+dt]),Re[3]=ve*(le[dt]-le[32+dt]),Re[1]=ce[0]+ce[3],Re[2]=ce[1]-ce[2],De[0]=Re[0]+Re[1],De[1]=Re[3]+Re[2],De[2]=Re[3]-Re[2],De[3]=Re[0]-Re[1],le[0+dt]=De[0]+we[0],le[8+dt]=De[1]+we[1],le[16+dt]=De[2]+we[2],le[24+dt]=De[3]+we[3],le[32+dt]=De[3]-we[3],le[40+dt]=De[2]-we[2],le[48+dt]=De[1]-we[1],le[56+dt]=De[0]-we[0]}function ct(le){for(var ve=0;ve<64;++ve){var Ue=le[0][ve],tt=le[1][ve],at=le[2][ve];le[0][ve]=Ue+1.5747*at,le[1][ve]=Ue-.1873*tt-.4682*at,le[2][ve]=Ue+1.8556*tt}}function At(le,ve,Ue){for(var tt=0;tt<64;++tt)ve[Ue+tt]=rg.toHalfFloat(Pt(le[tt]))}function Pt(le){return le<=1?Math.sign(le)*Math.pow(Math.abs(le),2.2):Math.sign(le)*Math.pow(O,Math.abs(le)-1)}function Se(le){return new DataView(le.array.buffer,le.offset.value,le.size)}function se(le){var ve=le.viewer.buffer.slice(le.offset.value,le.offset.value+le.size),Ue=new Uint8Array(ke(ve)),tt=new Uint8Array(Ue.length);return Pe(Ue),he(Ue,tt),new DataView(tt.buffer)}function He(le){var ve=le.array.slice(le.offset.value,le.offset.value+le.size),Ue=$b(ve),tt=new Uint8Array(Ue.length);return Pe(Ue),he(Ue,tt),new DataView(tt.buffer)}function Ve(le){for(var ve=le.viewer,Ue={value:le.offset.value},tt=new Uint16Array(le.width*le.scanlineBlockSize*(le.channels*le.type)),at=new Uint8Array(8192),ut=0,Lt=new Array(le.channels),mt=0;mt<le.channels;mt++)Lt[mt]={},Lt[mt].start=ut,Lt[mt].end=Lt[mt].start,Lt[mt].nx=le.width,Lt[mt].ny=le.lines,Lt[mt].size=le.type,ut+=Lt[mt].nx*Lt[mt].ny*Lt[mt].size;var ce=bt(ve,Ue),we=bt(ve,Ue);if(we>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ce<=we)for(var mt=0;mt<we-ce+1;mt++)at[mt+ce]=Ae(ve,Ue);var Re=new Uint16Array(65536),De=I(at,Re),Be=Ot(ve,Ue);st(le.array,ve,Ue,Be,tt,ut);for(var mt=0;mt<le.channels;++mt)for(var Je=Lt[mt],dt=0;dt<Lt[mt].size;++dt)Ke(tt,Je.start+dt,Je.nx,Je.size,Je.ny,Je.nx*Je.size,De);ft(Re,tt,ut);for(var _t=0,vt=new Uint8Array(tt.buffer.byteLength),Ut=0;Ut<le.lines;Ut++)for(var Ht=0;Ht<le.channels;Ht++){var Je=Lt[Ht],Gt=Je.nx*Je.size,an=new Uint8Array(tt.buffer,Je.end*2,Gt*2);vt.set(an,_t),_t+=Gt*2,Je.end+=Gt}return new DataView(vt.buffer)}function Te(le){var ve=le.array.slice(le.offset.value,le.offset.value+le.size),Ue=$b(ve);const tt=le.lines*le.channels*le.width,at=le.type==1?new Uint16Array(tt):new Uint32Array(tt);let ut=0,Lt=0;const mt=new Array(4);for(let ce=0;ce<le.lines;ce++)for(let we=0;we<le.channels;we++){let Re=0;switch(le.type){case 1:mt[0]=ut,mt[1]=mt[0]+le.width,ut=mt[1]+le.width;for(let De=0;De<le.width;++De){const Be=Ue[mt[0]++]<<8|Ue[mt[1]++];Re+=Be,at[Lt]=Re,Lt++}break;case 2:mt[0]=ut,mt[1]=mt[0]+le.width,mt[2]=mt[1]+le.width,ut=mt[2]+le.width;for(let De=0;De<le.width;++De){const Be=Ue[mt[0]++]<<24|Ue[mt[1]++]<<16|Ue[mt[2]++]<<8;Re+=Be,at[Lt]=Re,Lt++}break}}return new DataView(at.buffer)}function ze(le){var ve=le.viewer,Ue={value:le.offset.value},tt=new Uint8Array(le.width*le.lines*(le.channels*le.type*2)),at={version:Xe(ve,Ue),unknownUncompressedSize:Xe(ve,Ue),unknownCompressedSize:Xe(ve,Ue),acCompressedSize:Xe(ve,Ue),dcCompressedSize:Xe(ve,Ue),rleCompressedSize:Xe(ve,Ue),rleUncompressedSize:Xe(ve,Ue),rleRawSize:Xe(ve,Ue),totalAcUncompressedCount:Xe(ve,Ue),totalDcUncompressedCount:Xe(ve,Ue),acCompression:Xe(ve,Ue)};if(at.version<2)throw"EXRLoader.parse: "+Ra.compression+" version "+at.version+" is unsupported";for(var ut=new Array,Lt=bt(ve,Ue)-2;Lt>0;){var mt=Nt(ve.buffer,Ue),ce=Ae(ve,Ue),we=ce>>2&3,Re=(ce>>4)-1,De=new Int8Array([Re])[0],Be=Ae(ve,Ue);ut.push({name:mt,index:De,type:Be,compression:we}),Lt-=mt.length+3}for(var Je=Ra.channels,dt=new Array(le.channels),_t=0;_t<le.channels;++_t){var vt=dt[_t]={},Ut=Je[_t];vt.name=Ut.name,vt.compression=0,vt.decoded=!1,vt.type=Ut.pixelType,vt.pLinear=Ut.pLinear,vt.width=le.width,vt.height=le.lines}for(var Ht={idx:new Array(3)},Gt=0;Gt<le.channels;++Gt)for(var vt=dt[Gt],_t=0;_t<ut.length;++_t){var an=ut[_t];vt.name==an.name&&(vt.compression=an.compression,an.index>=0&&(Ht.idx[an.index]=Gt),vt.offset=Gt)}if(at.acCompressedSize>0)switch(at.acCompression){case 0:var Kt=new Uint16Array(at.totalAcUncompressedCount);st(le.array,ve,Ue,at.acCompressedSize,Kt,at.totalAcUncompressedCount);break;case 1:var sn=le.array.slice(Ue.value,Ue.value+at.totalAcUncompressedCount),Ln=$b(sn),Kt=new Uint16Array(Ln.buffer);Ue.value+=at.totalAcUncompressedCount;break}if(at.dcCompressedSize>0){var Sn={array:le.array,offset:Ue,size:at.dcCompressedSize},Qt=new Uint16Array(He(Sn).buffer);Ue.value+=at.dcCompressedSize}if(at.rleRawSize>0){var sn=le.array.slice(Ue.value,Ue.value+at.rleCompressedSize),Ln=$b(sn),vi=ke(Ln.buffer);Ue.value+=at.rleCompressedSize}for(var En=0,Tn=new Array(dt.length),_t=0;_t<Tn.length;++_t)Tn[_t]=new Array;for(var na=0;na<le.lines;++na)for(var yn=0;yn<dt.length;++yn)Tn[yn].push(En),En+=dt[yn].width*le.type*2;Ee(Ht,Tn,dt,Kt,Qt,tt);for(var _t=0;_t<dt.length;++_t){var vt=dt[_t];if(!vt.decoded)switch(vt.compression){case 2:for(var $n=0,Gn=0,na=0;na<le.lines;++na){for(var ha=Tn[_t][$n],Ei=0;Ei<vt.width;++Ei){for(var ia=0;ia<2*vt.type;++ia)tt[ha++]=vi[Gn+ia*vt.width*vt.height];Gn++}$n++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(tt.buffer)}function Nt(le,ve){for(var Ue=new Uint8Array(le),tt=0;Ue[ve.value+tt]!=0;)tt+=1;var at=new TextDecoder().decode(Ue.slice(ve.value,ve.value+tt));return ve.value=ve.value+tt+1,at}function Dt(le,ve,Ue){var tt=new TextDecoder().decode(new Uint8Array(le).slice(ve.value,ve.value+Ue));return ve.value=ve.value+Ue,tt}function Ft(le,ve){var Ue=gt(le,ve),tt=Ot(le,ve);return[Ue,tt]}function Xt(le,ve){var Ue=Ot(le,ve),tt=Ot(le,ve);return[Ue,tt]}function gt(le,ve){var Ue=le.getInt32(ve.value,!0);return ve.value=ve.value+4,Ue}function Ot(le,ve){var Ue=le.getUint32(ve.value,!0);return ve.value=ve.value+4,Ue}function Wt(le,ve){var Ue=le[ve.value];return ve.value=ve.value+1,Ue}function Ae(le,ve){var Ue=le.getUint8(ve.value);return ve.value=ve.value+1,Ue}const Xe=function(le,ve){let Ue;return"getBigInt64"in DataView.prototype?Ue=Number(le.getBigInt64(ve.value,!0)):Ue=le.getUint32(ve.value+4,!0)+Number(le.getUint32(ve.value,!0)<<32),ve.value+=8,Ue};function Mt(le,ve){var Ue=le.getFloat32(ve.value,!0);return ve.value+=4,Ue}function Ne(le,ve){return rg.toHalfFloat(Mt(le,ve))}function Qe(le){var ve=(le&31744)>>10,Ue=le&1023;return(le>>15?-1:1)*(ve?ve===31?Ue?NaN:1/0:Math.pow(2,ve-15)*(1+Ue/1024):6103515625e-14*(Ue/1024))}function bt(le,ve){var Ue=le.getUint16(ve.value,!0);return ve.value+=2,Ue}function kt(le,ve){return Qe(bt(le,ve))}function jt(le,ve,Ue,tt){for(var at=Ue.value,ut=[];Ue.value<at+tt-1;){var Lt=Nt(ve,Ue),mt=gt(le,Ue),ce=Ae(le,Ue);Ue.value+=3;var we=gt(le,Ue),Re=gt(le,Ue);ut.push({name:Lt,pixelType:mt,pLinear:ce,xSampling:we,ySampling:Re})}return Ue.value+=1,ut}function xt(le,ve){var Ue=Mt(le,ve),tt=Mt(le,ve),at=Mt(le,ve),ut=Mt(le,ve),Lt=Mt(le,ve),mt=Mt(le,ve),ce=Mt(le,ve),we=Mt(le,ve);return{redX:Ue,redY:tt,greenX:at,greenY:ut,blueX:Lt,blueY:mt,whiteX:ce,whiteY:we}}function Vt(le,ve){var Ue=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],tt=Ae(le,ve);return Ue[tt]}function $t(le,ve){var Ue=Ot(le,ve),tt=Ot(le,ve),at=Ot(le,ve),ut=Ot(le,ve);return{xMin:Ue,yMin:tt,xMax:at,yMax:ut}}function Xn(le,ve){var Ue=["INCREASING_Y"],tt=Ae(le,ve);return Ue[tt]}function Dn(le,ve){var Ue=Mt(le,ve),tt=Mt(le,ve);return[Ue,tt]}function ga(le,ve){var Ue=Mt(le,ve),tt=Mt(le,ve),at=Mt(le,ve);return[Ue,tt,at]}function ta(le,ve,Ue,tt,at){if(tt==="string"||tt==="stringvector"||tt==="iccProfile")return Dt(ve,Ue,at);if(tt==="chlist")return jt(le,ve,Ue,at);if(tt==="chromaticities")return xt(le,Ue);if(tt==="compression")return Vt(le,Ue);if(tt==="box2i")return $t(le,Ue);if(tt==="lineOrder")return Xn(le,Ue);if(tt==="float")return Mt(le,Ue);if(tt==="v2f")return Dn(le,Ue);if(tt==="v3f")return ga(le,Ue);if(tt==="int")return gt(le,Ue);if(tt==="rational")return Ft(le,Ue);if(tt==="timecode")return Xt(le,Ue);if(tt==="preview")return Ue.value+=at,"skipped";Ue.value+=at}function la(le,ve,Ue){const tt={};if(le.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";tt.version=le.getUint8(4);const at=le.getUint8(5);tt.spec={singleTile:!!(at&2),longName:!!(at&4),deepFormat:!!(at&8),multiPart:!!(at&16)},Ue.value=8;for(var ut=!0;ut;){var Lt=Nt(ve,Ue);if(Lt==0)ut=!1;else{var mt=Nt(ve,Ue),ce=Ot(le,Ue),we=ta(le,ve,Ue,mt,ce);we===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${mt}'.`):tt[Lt]=we}}if((at&-5)!=0)throw console.error("EXRHeader:",tt),"THREE.EXRLoader: provided file is currently unsupported.";return tt}function Va(le,ve,Ue,tt,at){const ut={size:0,viewer:ve,array:Ue,offset:tt,width:le.dataWindow.xMax-le.dataWindow.xMin+1,height:le.dataWindow.yMax-le.dataWindow.yMin+1,channels:le.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:le.channels[0].pixelType,uncompress:null,getter:null,format:null,[mx?"colorSpace":"encoding"]:null};switch(le.compression){case"NO_COMPRESSION":ut.lines=1,ut.uncompress=Se;break;case"RLE_COMPRESSION":ut.lines=1,ut.uncompress=se;break;case"ZIPS_COMPRESSION":ut.lines=1,ut.uncompress=He;break;case"ZIP_COMPRESSION":ut.lines=16,ut.uncompress=He;break;case"PIZ_COMPRESSION":ut.lines=32,ut.uncompress=Ve;break;case"PXR24_COMPRESSION":ut.lines=16,ut.uncompress=Te;break;case"DWAA_COMPRESSION":ut.lines=32,ut.uncompress=ze;break;case"DWAB_COMPRESSION":ut.lines=256,ut.uncompress=ze;break;default:throw"EXRLoader.parse: "+le.compression+" is unsupported"}if(ut.scanlineBlockSize=ut.lines,ut.type==1)switch(at){case bs:ut.getter=kt,ut.inputSize=2;break;case Jr:ut.getter=bt,ut.inputSize=2;break}else if(ut.type==2)switch(at){case bs:ut.getter=Mt,ut.inputSize=4;break;case Jr:ut.getter=Ne,ut.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ut.type+" for "+le.compression+".";ut.blockCount=(le.dataWindow.yMax+1)/ut.scanlineBlockSize;for(var Lt=0;Lt<ut.blockCount;Lt++)Xe(ve,tt);ut.outputChannels=ut.channels==3?4:ut.channels;const mt=ut.width*ut.height*ut.outputChannels;switch(at){case bs:ut.byteArray=new Float32Array(mt),ut.channels<ut.outputChannels&&ut.byteArray.fill(1,0,mt);break;case Jr:ut.byteArray=new Uint16Array(mt),ut.channels<ut.outputChannels&&ut.byteArray.fill(15360,0,mt);break;default:console.error("THREE.EXRLoader: unsupported type: ",at);break}return ut.bytesPerLine=ut.width*ut.inputSize*ut.channels,ut.outputChannels==4?ut.format=Vs:ut.format=M1,mx?ut.colorSpace="srgb-linear":ut.encoding=3e3,ut}const Na=new DataView(e),_s=new Uint8Array(e),to={value:0},Ra=la(Na,e,to),un=Va(Ra,Na,_s,to,this.type),Ss={value:0},Pi={R:0,G:1,B:2,A:3,Y:0};for(let le=0;le<un.height/un.scanlineBlockSize;le++){const ve=Ot(Na,to);un.size=Ot(Na,to),un.lines=ve+un.scanlineBlockSize>un.height?un.height-ve:un.scanlineBlockSize;const tt=un.size<un.lines*un.bytesPerLine?un.uncompress(un):Se(un);to.value+=un.size;for(let at=0;at<un.scanlineBlockSize;at++){const ut=at+le*un.scanlineBlockSize;if(ut>=un.height)break;for(let Lt=0;Lt<un.channels;Lt++){const mt=Pi[Ra.channels[Lt].name];for(let ce=0;ce<un.width;ce++){Ss.value=(at*(un.channels*un.width)+Lt*un.width+ce)*un.inputSize;const we=(un.height-1-ut)*(un.width*un.outputChannels)+ce*un.outputChannels+mt;un.byteArray[we]=un.getter(tt,Ss)}}}}return{header:Ra,width:un.width,height:un.height,data:un.byteArray,format:un.format,[mx?"colorSpace":"encoding"]:un[mx?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,a){function s(r,l){mx?r.colorSpace=l.colorSpace:r.encoding=l.encoding,r.minFilter=Aa,r.magFilter=Aa,r.generateMipmaps=!1,r.flipY=!1,t&&t(r,l)}return super.load(e,s,i,a)}}function OQ(n,e,t,i){var a;return a=class extends So{constructor(s){super({vertexShader:e,fragmentShader:t,...s});for(const r in n)this.uniforms[r]=new P2(n[r]),Object.defineProperty(this,r,{get(){return this.uniforms[r].value},set(l){this.uniforms[r].value=l}});this.uniforms=H3.clone(this.uniforms)}},a.key=SO.generateUUID(),a}const jQ=()=>parseInt(Lv.replace(/\D+/g,"")),PQ=jQ(),rP=k.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:a=!0,keyEvents:s=!1,onChange:r,onStart:l,onEnd:d,...f},g)=>{const x=qo(B=>B.invalidate),b=qo(B=>B.camera),_=qo(B=>B.gl),S=qo(B=>B.events),w=qo(B=>B.setEvents),M=qo(B=>B.set),E=qo(B=>B.get),T=qo(B=>B.performance),C=e||b,D=i||S.connected||_.domElement,P=k.useMemo(()=>new CQ(C),[C]);return L2(()=>{P.enabled&&P.update()},-1),k.useEffect(()=>(s&&P.connect(s===!0?D:s),P.connect(D),()=>void P.dispose()),[s,D,t,P,x]),k.useEffect(()=>{const B=O=>{x(),t&&T.regress(),r&&r(O)},F=O=>{l&&l(O)},j=O=>{d&&d(O)};return P.addEventListener("change",B),P.addEventListener("start",F),P.addEventListener("end",j),()=>{P.removeEventListener("start",F),P.removeEventListener("end",j),P.removeEventListener("change",B)}},[r,l,d,P,x,w]),k.useEffect(()=>{if(n){const B=E().controls;return M({controls:P}),()=>M({controls:B})}},[n,P]),k.createElement("primitive",Wp({ref:g,object:P,enableDamping:a},f))}),UQ=OQ({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Zt,sectionColor:new Zt,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new be,worldPlanePosition:new be},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${PQ>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),oP=k.forwardRef(({args:n,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:i=.5,sectionSize:a=1,followCamera:s=!1,infiniteGrid:r=!1,fadeDistance:l=100,fadeStrength:d=1,fadeFrom:f=1,cellThickness:g=.5,sectionThickness:x=1,side:b=Wo,..._},S)=>{yC({GridMaterial:UQ});const w=k.useRef(null);k.useImperativeHandle(S,()=>w.current,[]);const M=new sh,E=new be(0,1,0),T=new be(0,0,0);L2(P=>{M.setFromNormalAndCoplanarPoint(E,T).applyMatrix4(w.current.matrixWorld);const B=w.current.material,F=B.uniforms.worldCamProjPosition,j=B.uniforms.worldPlanePosition;M.projectPoint(P.camera.position,F.value),j.value.set(0,0,0).applyMatrix4(w.current.matrixWorld)});const C={cellSize:i,sectionSize:a,cellColor:e,sectionColor:t,cellThickness:g,sectionThickness:x},D={fadeDistance:l,fadeStrength:d,fadeFrom:f,infiniteGrid:r,followCamera:s};return k.createElement("mesh",Wp({ref:w,frustumCulled:!1},_),k.createElement("gridMaterial",Wp({transparent:!0,"extensions-derivatives":!0,side:b},C,D)),k.createElement("planeGeometry",{args:n}))});function lP(n,e){const t=n+"Geometry";return k.forwardRef(({args:i,children:a,...s},r)=>{const l=k.useRef(null);return k.useImperativeHandle(r,()=>l.current),k.useLayoutEffect(()=>void e?.(l.current)),k.createElement("mesh",Wp({ref:l},s),k.createElement(t,{attach:"geometry",args:i}),a)})}const cP=lP("box"),uP=lP("plane"),dP=(n,e,t)=>{let i;switch(n){case bl:i=new Uint8ClampedArray(e*t*4);break;case Jr:i=new Uint16Array(e*t*4);break;case bh:i=new Uint32Array(e*t*4);break;case i2:i=new Int8Array(e*t*4);break;case a2:i=new Int16Array(e*t*4);break;case w1:i=new Int32Array(e*t*4);break;case bs:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let t_;const LQ=(n,e,t,i)=>{if(t_!==void 0)return t_;const a=new sc(1,1,i);e.setRenderTarget(a);const s=new us(new If,new zf({color:16777215}));e.render(s,t),e.setRenderTarget(null);const r=dP(n,a.width,a.height);return e.readRenderTargetPixels(a,0,0,a.width,a.height,r),a.dispose(),s.geometry.dispose(),s.material.dispose(),t_=r[0]!==0,t_};class bC{constructor(e){var t,i,a,s,r,l,d,f,g,x,b,_,S,w,M,E;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(C){throw this._renderer.setRenderTarget(null),C}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const T={format:Vs,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.magFilter)!==void 0?(l=e.renderTargetOptions)===null||l===void 0?void 0:l.magFilter:Aa,minFilter:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.minFilter)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.minFilter:Aa,samples:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.samples)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.samples:void 0,wrapS:((b=e.renderTargetOptions)===null||b===void 0?void 0:b.wrapS)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.wrapS:fr,wrapT:((S=e.renderTargetOptions)===null||S===void 0?void 0:S.wrapT)!==void 0?(w=e.renderTargetOptions)===null||w===void 0?void 0:w.wrapT:fr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=bC.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new A1,this._camera=new Cf,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!LQ(this._type,this._renderer,this._camera,T)){let C;switch(this._type){case Jr:C=this._renderer.extensions.has("EXT_color_buffer_float")?bs:void 0;break}C!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${bs}`),this._type=C):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new us(new If,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new sc(this.width,this.height,T),this._renderTarget.texture.mapping=((M=e.renderTargetOptions)===null||M===void 0?void 0:M.mapping)!==void 0?(E=e.renderTargetOptions)===null||E===void 0?void 0:E.mapping:qp}static instantiateRenderer(){const e=new pC;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=dP(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new dd(this.toArray(),this.width,this.height,Vs,this._type,e?.mapping||qp,e?.wrapS||fr,e?.wrapT||fr,e?.magFilter||Aa,e?.minFilter||Aa,e?.anisotropy||1,fd);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof So&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Pa&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Pa&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const zQ=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,IQ=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class BQ extends So{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:a,gainMapMax:s,maxDisplayBoost:r,hdrCapacityMin:l,hdrCapacityMax:d,sdr:f,gainMap:g}){super({name:"GainMapDecoderMaterial",vertexShader:zQ,fragmentShader:IQ,uniforms:{sdr:{value:f},gainMap:{value:g},gamma:{value:new be(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new be().fromArray(t)},offsetSdr:{value:new be().fromArray(i)},gainMapMin:{value:new be().fromArray(a)},gainMapMax:{value:new be().fromArray(s)},weightFactor:{value:(Math.log2(r)-l)/(d-l)}},blending:hh,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=r,this._hdrCapacityMin=l,this._hdrCapacityMax=d,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class hP extends Error{}class fP extends Error{}const gx=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const a=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(a){const s=a[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(r=>r.replace(/<\/?rdf:li>/g,"")):a[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},FQ=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),a=e.slice(t,i+10);try{const s=gx(a,"hdrgm:GainMapMin","0"),r=gx(a,"hdrgm:GainMapMax"),l=gx(a,"hdrgm:Gamma","1"),d=gx(a,"hdrgm:OffsetSDR","0.015625"),f=gx(a,"hdrgm:OffsetHDR","0.015625"),g=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(a),x=g?g[1]:"0",b=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(a);if(!b)throw new Error("Incomplete gainmap metadata");const _=b[1];return{gainMapMin:Array.isArray(s)?s.map(S=>parseFloat(S)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(r)?r.map(S=>parseFloat(S)):[parseFloat(r),parseFloat(r),parseFloat(r)],gamma:Array.isArray(l)?l.map(S=>parseFloat(S)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetSdr:Array.isArray(d)?d.map(S=>parseFloat(S)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(f)?f.map(S=>parseFloat(S)):[parseFloat(f),parseFloat(f),parseFloat(f)],hdrCapacityMin:parseFloat(x),hdrCapacityMax:parseFloat(_)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class kQ{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const a=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const r=s.byteLength;let l=2,d=0,f;for(;l<r;){if(++d>250){i(new Error(`Found no marker after ${d} loops `));return}if(s.getUint8(l)!==255){i(new Error(`Not a valid marker at offset 0x${l.toString(16)}, found: 0x${s.getUint8(l).toString(16)}`));return}if(f=s.getUint8(l+1),a&&console.log(`Marker: ${f.toString(16)}`),f===226){a&&console.log("Found APP2 marker (0xffe2)");const g=l+4;if(s.getUint32(g)===1297106432){const x=g+4;let b;if(s.getUint16(x)===18761)b=!1;else if(s.getUint16(x)===19789)b=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(x+2,!b)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const _=s.getUint32(x+4,!b);if(_<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const S=x+_,w=s.getUint16(S,!b),M=S+2;let E=0;for(let P=M;P<M+12*w;P+=12)s.getUint16(P,!b)===45057&&(E=s.getUint32(P+8,!b));const C=S+2+w*12+4,D=[];for(let P=C;P<C+E*16;P+=16){const B={MPType:s.getUint32(P,!b),size:s.getUint32(P+4,!b),dataOffset:s.getUint32(P+8,!b),dependantImages:s.getUint32(P+12,!b),start:-1,end:-1,isFII:!1};B.dataOffset?(B.start=x+B.dataOffset,B.isFII=!1):(B.start=0,B.isFII=!0),B.end=B.start+B.size,D.push(B)}if(this.options.extractNonFII&&D.length){const P=new Blob([s]),B=[];for(const F of D){if(F.isFII&&!this.options.extractFII)continue;const j=P.slice(F.start,F.end+1,"image/jpeg");B.push(j)}t(B)}}}l+=2+s.getUint16(l+2)}})}}const HQ=async n=>{const e=FQ(n);if(!e)throw new fP("Gain map XMP metadata not found");const i=await new kQ({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new hP("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},Q5=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=a=>{t(a)},i.src=URL.createObjectURL(n)});class pP extends El{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new O2}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new BQ({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Pa,sdr:new Pa});return new bC({width:16,height:16,type:Jr,colorSpace:fd,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,a){const s=a?new Blob([a],{type:"image/jpeg"}):void 0,r=new Blob([i],{type:"image/jpeg"});let l,d,f=!1;if(typeof createImageBitmap>"u"){const b=await Promise.all([s?Q5(s):Promise.resolve(void 0),Q5(r)]);d=b[0],l=b[1],f=!0}else{const b=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(r,{imageOrientation:"flipY"})]);d=b[0],l=b[1]}const g=new Pa(d||new ImageData(2,2),qp,fr,fr,Aa,pT,Vs,bl,1,fd);g.flipY=f,g.needsUpdate=!0;const x=new Pa(l,qp,fr,fr,Aa,pT,Vs,bl,1,yo);x.flipY=f,x.needsUpdate=!0,e.width=l.width,e.height=l.height,e.material.gainMap=g,e.material.sdr=x,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class GQ extends pP{load([e,t,i],a,s,r){const l=this.prepareQuadRenderer();let d,f,g;const x=async()=>{if(d&&f&&g){try{await this.render(l,g,d,f)}catch(O){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof r=="function"&&r(O),l.disposeOnDemandRenderer();return}typeof a=="function"&&a(l),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),l.disposeOnDemandRenderer()}};let b=!0,_=0,S=0,w=!0,M=0,E=0,T=!0,C=0,D=0;const P=()=>{if(typeof s=="function"){const O=_+M+C,I=S+E+D,W=b&&w&&T;s(new ProgressEvent("progress",{lengthComputable:W,loaded:I,total:O}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const B=new Vc(this._internalLoadingManager);B.setResponseType("arraybuffer"),B.setRequestHeader(this.requestHeader),B.setPath(this.path),B.setWithCredentials(this.withCredentials),B.load(e,async O=>{if(typeof O=="string")throw new Error("Invalid sdr buffer");d=O,await x()},O=>{b=O.lengthComputable,S=O.loaded,_=O.total,P()},O=>{this.manager.itemError(e),typeof r=="function"&&r(O)});const F=new Vc(this._internalLoadingManager);F.setResponseType("arraybuffer"),F.setRequestHeader(this.requestHeader),F.setPath(this.path),F.setWithCredentials(this.withCredentials),F.load(t,async O=>{if(typeof O=="string")throw new Error("Invalid gainmap buffer");f=O,await x()},O=>{w=O.lengthComputable,E=O.loaded,M=O.total,P()},O=>{this.manager.itemError(t),typeof r=="function"&&r(O)});const j=new Vc(this._internalLoadingManager);return j.setRequestHeader(this.requestHeader),j.setPath(this.path),j.setWithCredentials(this.withCredentials),j.load(i,async O=>{if(typeof O!="string")throw new Error("Invalid metadata string");g=JSON.parse(O),await x()},O=>{T=O.lengthComputable,D=O.loaded,C=O.total,P()},O=>{this.manager.itemError(i),typeof r=="function"&&r(O)}),l}}class VQ extends pP{load(e,t,i,a){const s=this.prepareQuadRenderer(),r=new Vc(this._internalLoadingManager);return r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setPath(this.path),r.setWithCredentials(this.withCredentials),this.manager.itemStart(e),r.load(e,async l=>{if(typeof l=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const d=new Uint8Array(l);let f,g,x;try{const b=await HQ(d);f=b.sdr,g=b.gainMap,x=b.metadata}catch(b){if(b instanceof fP||b instanceof hP)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),x={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},f=d;else throw b}try{await this.render(s,x,f,g)}catch(b){this.manager.itemError(e),typeof a=="function"&&a(b),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,l=>{this.manager.itemError(e),typeof a=="function"&&a(l)}),s}}const c1={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},mP="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",uv=n=>Array.isArray(n),_C=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function I2({files:n=_C,path:e="",preset:t=void 0,colorSpace:i=void 0,extensions:a}={}){t&&(SC(t),n=c1[t],e=mP);const s=uv(n),{extension:r,isCubemap:l}=EC(n),d=wC(r);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+n);const f=qo(_=>_.gl);k.useLayoutEffect(()=>{if(r!=="webp"&&r!=="jpg"&&r!=="jpeg")return;function _(){Tv.clear(d,s?[n]:n)}f.domElement.addEventListener("webglcontextlost",_,{once:!0})},[n,f.domElement]);const g=Tv(d,s?[n]:n,_=>{(r==="webp"||r==="jpg"||r==="jpeg")&&_.setRenderer(f),_.setPath==null||_.setPath(e),a&&a(_)});let x=s?g[0]:g;if(r==="jpg"||r==="jpeg"||r==="webp"){var b;x=(b=x.renderTarget)==null?void 0:b.texture}return x.mapping=l?xh:gv,x.colorSpace=i??(l?"srgb":"srgb-linear"),x}const qQ={files:_C,path:"",preset:void 0,extensions:void 0};I2.preload=n=>{const e={...qQ,...n};let{files:t,path:i=""}=e;const{preset:a,extensions:s}=e;a&&(SC(a),t=c1[a],i=mP);const{extension:r}=EC(t);if(r==="webp"||r==="jpg"||r==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const l=wC(r);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+t);Tv.preload(l,uv(t)?[t]:t,d=>{d.setPath==null||d.setPath(i),s&&s(d)})};const XQ={files:_C,preset:void 0};I2.clear=n=>{const e={...XQ,...n};let{files:t}=e;const{preset:i}=e;i&&(SC(i),t=c1[i]);const{extension:a}=EC(t),s=wC(a);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Tv.clear(s,uv(t)?[t]:t)};function SC(n){if(!(n in c1))throw new Error("Preset must be one of: "+Object.keys(c1).join(", "))}function EC(n){var e;const t=uv(n)&&n.length===6,i=uv(n)&&n.length===3&&n.some(r=>r.endsWith("json")),a=uv(n)?n[0]:n;return{extension:t?"cube":i?"webp":a.startsWith("data:application/exr")?"exr":a.startsWith("data:application/hdr")?"hdr":a.startsWith("data:image/jpeg")?"jpg":(e=a.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function wC(n){return n==="cube"?uj:n==="hdr"?RQ:n==="exr"?DQ:n==="jpg"||n==="jpeg"?VQ:n==="webp"?GQ:null}const YQ=n=>n.current&&n.current.isScene,WQ=n=>YQ(n)?n.current:n;function MC(n,e,t,i,a={}){var s,r,l,d;a={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...a};const f=WQ(e||t),g=f.background,x=f.environment,b={backgroundBlurriness:f.backgroundBlurriness,backgroundIntensity:f.backgroundIntensity,backgroundRotation:(s=(r=f.backgroundRotation)==null||r.clone==null?void 0:r.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:f.environmentIntensity,environmentRotation:(l=(d=f.environmentRotation)==null||d.clone==null?void 0:d.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(f.environment=i),n&&(f.background=i),rh(f,a),()=>{n!=="only"&&(f.environment=x),n&&(f.background=g),rh(f,b)}}function TC({scene:n,background:e=!1,map:t,...i}){const a=qo(s=>s.scene);return k.useLayoutEffect(()=>{if(t)return MC(e,n,a,t,i)}),null}function gP({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:a,backgroundRotation:s,environmentIntensity:r,environmentRotation:l,...d}){const f=I2(d),g=qo(x=>x.scene);return k.useLayoutEffect(()=>MC(n,e,g,f,{backgroundBlurriness:t??i,backgroundIntensity:a,backgroundRotation:s,environmentIntensity:r,environmentRotation:l})),k.useEffect(()=>()=>{f.dispose()},[f]),null}function KQ({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:a=1,map:s,background:r=!1,blur:l,backgroundBlurriness:d,backgroundIntensity:f,backgroundRotation:g,environmentIntensity:x,environmentRotation:b,scene:_,files:S,path:w,preset:M=void 0,extensions:E}){const T=qo(j=>j.gl),C=qo(j=>j.scene),D=k.useRef(null),[P]=k.useState(()=>new A1),B=k.useMemo(()=>{const j=new G3(i);return j.texture.type=Jr,j},[i]);k.useEffect(()=>()=>{B.dispose()},[B]),k.useLayoutEffect(()=>{if(a===1){const j=T.autoClear;T.autoClear=!0,D.current.update(T,P),T.autoClear=j}return MC(r,_,C,B.texture,{backgroundBlurriness:l??d,backgroundIntensity:f,backgroundRotation:g,environmentIntensity:x,environmentRotation:b})},[n,P,B.texture,_,C,r,a,T]);let F=1;return L2(()=>{if(a===1/0||F<a){const j=T.autoClear;T.autoClear=!0,D.current.update(T,P),T.autoClear=j,F++}}),k.createElement(k.Fragment,null,XZ(k.createElement(k.Fragment,null,n,k.createElement("cubeCamera",{ref:D,args:[e,t,B]}),S||M?k.createElement(gP,{background:!0,files:S,preset:M,path:w,extensions:E}):s?k.createElement(TC,{background:!0,map:s,extensions:E}):null),P))}function ZQ(n){var e,t,i,a;const s=I2(n),r=n.map||s;k.useMemo(()=>yC({GroundProjectedEnvImpl:xQ}),[]),k.useEffect(()=>()=>{s.dispose()},[s]);const l=k.useMemo(()=>[r],[r]),d=(e=n.ground)==null?void 0:e.height,f=(t=n.ground)==null?void 0:t.radius,g=(i=(a=n.ground)==null?void 0:a.scale)!==null&&i!==void 0?i:1e3;return k.createElement(k.Fragment,null,k.createElement(TC,Wp({},n,{map:r})),k.createElement("groundProjectedEnvImpl",{args:l,scale:g,height:d,radius:f}))}function QQ(n){return n.ground?k.createElement(ZQ,n):n.map?k.createElement(TC,n):n.children?k.createElement(KQ,n):k.createElement(gP,n)}const JQ=k.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:i=1,height:a=1,blur:s=1,near:r=0,far:l=10,resolution:d=512,smooth:f=!0,color:g="#000000",depthWrite:x=!1,renderOrder:b,..._},S)=>{const w=k.useRef(null),M=qo(te=>te.scene),E=qo(te=>te.gl),T=k.useRef(null);i=i*(Array.isArray(n)?n[0]:n||1),a=a*(Array.isArray(n)?n[1]:n||1);const[C,D,P,B,F,j,O]=k.useMemo(()=>{const te=new sc(d,d),oe=new sc(d,d);oe.texture.generateMipmaps=te.texture.generateMipmaps=!1;const $=new If(i,a).rotateX(Math.PI/2),X=new us($),G=new D2;G.depthTest=G.depthWrite=!1,G.onBeforeCompile=ne=>{ne.uniforms={...ne.uniforms,ucolor:{value:new Zt(g)}},ne.fragmentShader=ne.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),ne.fragmentShader=ne.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const ee=new So(AQ),Y=new So(NQ);return Y.depthTest=ee.depthTest=!1,[te,$,G,X,ee,Y,oe]},[d,i,a,n,g]),I=te=>{B.visible=!0,B.material=F,F.uniforms.tDiffuse.value=C.texture,F.uniforms.h.value=te*1/256,E.setRenderTarget(O),E.render(B,T.current),B.material=j,j.uniforms.tDiffuse.value=O.texture,j.uniforms.v.value=te*1/256,E.setRenderTarget(C),E.render(B,T.current),B.visible=!1};let W=0,Q,J;return L2(()=>{T.current&&(e===1/0||W<e)&&(W++,Q=M.background,J=M.overrideMaterial,w.current.visible=!1,M.background=null,M.overrideMaterial=P,E.setRenderTarget(C),E.render(M,T.current),I(s),f&&I(s*.4),E.setRenderTarget(null),w.current.visible=!0,M.overrideMaterial=J,M.background=Q)}),k.useImperativeHandle(S,()=>w.current,[]),k.createElement("group",Wp({"rotation-x":Math.PI/2},_,{ref:w}),k.createElement("mesh",{renderOrder:b,geometry:D,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},k.createElement("meshBasicMaterial",{transparent:!0,map:C.texture,opacity:t,depthWrite:x})),k.createElement("orthographicCamera",{ref:T,args:[-i/2,i/2,a/2,-a/2,r,l]}))}),$Q=({cameraView:n="default",autoFrame:e=!0})=>{const{walls:t,rooms:i,furniture:a}=ti(),s=k.useRef(null),{camera:r}=qo();return k.useEffect(()=>{if(e&&s.current){const l=new pr;if(t.forEach(_=>{if(_.points&&_.points.length>=4){const S=_.points[0]/50,w=_.points[1]/50,M=_.points[2]/50,E=_.points[3]/50,T=new pr;T.expandByPoint(new be(S,0,w)),T.expandByPoint(new be(M,2.5,E)),l.union(T)}}),i.forEach(_=>{const S=_.x/50,w=_.y/50,M=_.width/50,E=_.height/50,T=new pr;T.expandByPoint(new be(S,0,w)),T.expandByPoint(new be(S+M,0,w+E)),l.union(T)}),a.forEach(_=>{const S=_.x/50,w=_.y/50,M=_.width/50,E=_.height/50,T=.8,C=new pr;C.expandByPoint(new be(S,0,w)),C.expandByPoint(new be(S+M,T,w+E)),l.union(C)}),l.isEmpty()){r.position.set(15,15,15),s.current.target.set(0,0,0),s.current.update();return}const d=new be;l.getCenter(d),s.current.target.copy(d);const f=new be;l.getSize(f);const g=Math.max(f.x,f.z),x=r.fov?r.fov*(Math.PI/180):50*(Math.PI/180);let b=g/2/Math.tan(x/2);switch(b*=1.5,n){case"top":r.position.set(d.x,b,d.z);break;case"front":r.position.set(d.x,d.y,d.z+b);break;case"side":r.position.set(d.x+b,d.y,d.z);break;case"isometric":r.position.set(d.x+b*.7,b*.7,d.z+b*.7);break;case"corner":r.position.set(d.x+b*.5,b*.3,d.z+b*.5);break;default:r.position.set(d.x+b*.5,b*.5,d.z+b*.5)}r.near=b/100,r.far=b*100,r.updateProjectionMatrix(),s.current.update()}},[t,i,a,r,n,e]),c.jsx(rP,{ref:s,enablePan:!0,enableZoom:!0,enableRotate:!0,maxPolarAngle:Math.PI/2.1,minPolarAngle:.1})};function J5(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function B2(...n){return e=>{let t=!1;const i=n.map(a=>{const s=J5(a,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let a=0;a<i.length;a++){const s=i[a];typeof s=="function"?s():J5(n[a],null)}}}}function da(...n){return k.useCallback(B2(...n),n)}function bg(n){const e=tJ(n),t=k.forwardRef((i,a)=>{const{children:s,...r}=i,l=k.Children.toArray(s),d=l.find(iJ);if(d){const f=d.props.children,g=l.map(x=>x===d?k.Children.count(f)>1?k.Children.only(null):k.isValidElement(f)?f.props.children:null:x);return c.jsx(e,{...r,ref:a,children:k.isValidElement(f)?k.cloneElement(f,void 0,g):null})}return c.jsx(e,{...r,ref:a,children:s})});return t.displayName=`${n}.Slot`,t}var eJ=bg("Slot");function tJ(n){const e=k.forwardRef((t,i)=>{const{children:a,...s}=t;if(k.isValidElement(a)){const r=sJ(a),l=aJ(s,a.props);return a.type!==k.Fragment&&(l.ref=i?B2(i,r):r),k.cloneElement(a,l)}return k.Children.count(a)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var vP=Symbol("radix.slottable");function nJ(n){const e=({children:t})=>c.jsx(c.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=vP,e}function iJ(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===vP}function aJ(n,e){const t={...e};for(const i in e){const a=n[i],s=e[i];/^on[A-Z]/.test(i)?a&&s?t[i]=(...l)=>{const d=s(...l);return a(...l),d}:a&&(t[i]=a):i==="style"?t[i]={...a,...s}:i==="className"&&(t[i]=[a,s].filter(Boolean).join(" "))}return{...n,...t}}function sJ(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function yP(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=yP(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function xP(){for(var n,e,t=0,i="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=yP(n))&&(i&&(i+=" "),i+=e);return i}const $5=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,eD=xP,CC=(n,e)=>t=>{var i;if(e?.variants==null)return eD(n,t?.class,t?.className);const{variants:a,defaultVariants:s}=e,r=Object.keys(a).map(f=>{const g=t?.[f],x=s?.[f];if(g===null)return null;const b=$5(g)||$5(x);return a[f][b]}),l=t&&Object.entries(t).reduce((f,g)=>{let[x,b]=g;return b===void 0||(f[x]=b),f},{}),d=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((f,g)=>{let{class:x,className:b,..._}=g;return Object.entries(_).every(S=>{let[w,M]=S;return Array.isArray(M)?M.includes({...s,...l}[w]):{...s,...l}[w]===M})?[...f,x,b]:f},[]);return eD(n,r,d,t?.class,t?.className)},AC="-",rJ=n=>{const e=lJ(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:r=>{const l=r.split(AC);return l[0]===""&&l.length!==1&&l.shift(),bP(l,e)||oJ(r)},getConflictingClassGroupIds:(r,l)=>{const d=t[r]||[];return l&&i[r]?[...d,...i[r]]:d}}},bP=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),a=i?bP(n.slice(1),i):void 0;if(a)return a;if(e.validators.length===0)return;const s=n.join(AC);return e.validators.find(({validator:r})=>r(s))?.classGroupId},tD=/^\[(.+)\]$/,oJ=n=>{if(tD.test(n)){const e=tD.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},lJ=n=>{const{theme:e,classGroups:t}=n,i={nextPart:new Map,validators:[]};for(const a in t)UT(t[a],i,a,e);return i},UT=(n,e,t,i)=>{n.forEach(a=>{if(typeof a=="string"){const s=a===""?e:nD(e,a);s.classGroupId=t;return}if(typeof a=="function"){if(cJ(a)){UT(a(i),e,t,i);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([s,r])=>{UT(r,nD(e,s),t,i)})})},nD=(n,e)=>{let t=n;return e.split(AC).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},cJ=n=>n.isThemeGetter,uJ=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const a=(s,r)=>{t.set(s,r),e++,e>n&&(e=0,i=t,t=new Map)};return{get(s){let r=t.get(s);if(r!==void 0)return r;if((r=i.get(s))!==void 0)return a(s,r),r},set(s,r){t.has(s)?t.set(s,r):a(s,r)}}},LT="!",zT=":",dJ=zT.length,hJ=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=a=>{const s=[];let r=0,l=0,d=0,f;for(let S=0;S<a.length;S++){let w=a[S];if(r===0&&l===0){if(w===zT){s.push(a.slice(d,S)),d=S+dJ;continue}if(w==="/"){f=S;continue}}w==="["?r++:w==="]"?r--:w==="("?l++:w===")"&&l--}const g=s.length===0?a:a.substring(d),x=fJ(g),b=x!==g,_=f&&f>d?f-d:void 0;return{modifiers:s,hasImportantModifier:b,baseClassName:x,maybePostfixModifierPosition:_}};if(e){const a=e+zT,s=i;i=r=>r.startsWith(a)?s(r.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:r,maybePostfixModifierPosition:void 0}}if(t){const a=i;i=s=>t({className:s,parseClassName:a})}return i},fJ=n=>n.endsWith(LT)?n.substring(0,n.length-1):n.startsWith(LT)?n.substring(1):n,pJ=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const a=[];let s=[];return i.forEach(r=>{r[0]==="["||e[r]?(a.push(...s.sort(),r),s=[]):s.push(r)}),a.push(...s.sort()),a}},mJ=n=>({cache:uJ(n.cacheSize),parseClassName:hJ(n),sortModifiers:pJ(n),...rJ(n)}),gJ=/\s+/,vJ=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:s}=e,r=[],l=n.trim().split(gJ);let d="";for(let f=l.length-1;f>=0;f-=1){const g=l[f],{isExternal:x,modifiers:b,hasImportantModifier:_,baseClassName:S,maybePostfixModifierPosition:w}=t(g);if(x){d=g+(d.length>0?" "+d:d);continue}let M=!!w,E=i(M?S.substring(0,w):S);if(!E){if(!M){d=g+(d.length>0?" "+d:d);continue}if(E=i(S),!E){d=g+(d.length>0?" "+d:d);continue}M=!1}const T=s(b).join(":"),C=_?T+LT:T,D=C+E;if(r.includes(D))continue;r.push(D);const P=a(E,M);for(let B=0;B<P.length;++B){const F=P[B];r.push(C+F)}d=g+(d.length>0?" "+d:d)}return d};function yJ(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=_P(e))&&(i&&(i+=" "),i+=t);return i}const _P=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=_P(n[i]))&&(t&&(t+=" "),t+=e);return t};function xJ(n,...e){let t,i,a,s=r;function r(d){const f=e.reduce((g,x)=>x(g),n());return t=mJ(f),i=t.cache.get,a=t.cache.set,s=l,l(d)}function l(d){const f=i(d);if(f)return f;const g=vJ(d,t);return a(d,g),g}return function(){return s(yJ.apply(null,arguments))}}const Mr=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},SP=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,EP=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bJ=/^\d+\/\d+$/,_J=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,SJ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EJ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,wJ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,MJ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,K0=n=>bJ.test(n),_i=n=>!!n&&!Number.isNaN(Number(n)),Op=n=>!!n&&Number.isInteger(Number(n)),wM=n=>n.endsWith("%")&&_i(n.slice(0,-1)),_f=n=>_J.test(n),TJ=()=>!0,CJ=n=>SJ.test(n)&&!EJ.test(n),wP=()=>!1,AJ=n=>wJ.test(n),NJ=n=>MJ.test(n),RJ=n=>!on(n)&&!ln(n),DJ=n=>kv(n,CP,wP),on=n=>SP.test(n),Zm=n=>kv(n,AP,CJ),MM=n=>kv(n,LJ,_i),iD=n=>kv(n,MP,wP),OJ=n=>kv(n,TP,NJ),n_=n=>kv(n,NP,AJ),ln=n=>EP.test(n),vx=n=>Hv(n,AP),jJ=n=>Hv(n,zJ),aD=n=>Hv(n,MP),PJ=n=>Hv(n,CP),UJ=n=>Hv(n,TP),i_=n=>Hv(n,NP,!0),kv=(n,e,t)=>{const i=SP.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},Hv=(n,e,t=!1)=>{const i=EP.exec(n);return i?i[1]?e(i[1]):t:!1},MP=n=>n==="position"||n==="percentage",TP=n=>n==="image"||n==="url",CP=n=>n==="length"||n==="size"||n==="bg-size",AP=n=>n==="length",LJ=n=>n==="number",zJ=n=>n==="family-name",NP=n=>n==="shadow",IJ=()=>{const n=Mr("color"),e=Mr("font"),t=Mr("text"),i=Mr("font-weight"),a=Mr("tracking"),s=Mr("leading"),r=Mr("breakpoint"),l=Mr("container"),d=Mr("spacing"),f=Mr("radius"),g=Mr("shadow"),x=Mr("inset-shadow"),b=Mr("text-shadow"),_=Mr("drop-shadow"),S=Mr("blur"),w=Mr("perspective"),M=Mr("aspect"),E=Mr("ease"),T=Mr("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...D(),ln,on],B=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto","contain","none"],j=()=>[ln,on,d],O=()=>[K0,"full","auto",...j()],I=()=>[Op,"none","subgrid",ln,on],W=()=>["auto",{span:["full",Op,ln,on]},Op,ln,on],Q=()=>[Op,"auto",ln,on],J=()=>["auto","min","max","fr",ln,on],te=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],oe=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...j()],X=()=>[K0,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],G=()=>[n,ln,on],ee=()=>[...D(),aD,iD,{position:[ln,on]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ne=()=>["auto","cover","contain",PJ,DJ,{size:[ln,on]}],ue=()=>[wM,vx,Zm],de=()=>["","none","full",f,ln,on],ie=()=>["",_i,vx,Zm],Me=()=>["solid","dashed","dotted","double"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>[_i,wM,aD,iD],_e=()=>["","none",S,ln,on],Ke=()=>["none",_i,ln,on],Ge=()=>["none",_i,ln,on],st=()=>[_i,ln,on],ft=()=>[K0,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[_f],breakpoint:[_f],color:[TJ],container:[_f],"drop-shadow":[_f],ease:["in","out","in-out"],font:[RJ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[_f],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[_f],shadow:[_f],spacing:["px",_i],text:[_f],"text-shadow":[_f],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",K0,on,ln,M]}],container:["container"],columns:[{columns:[_i,on,ln,l]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Op,"auto",ln,on]}],basis:[{basis:[K0,"full","auto",l,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[_i,K0,"auto","initial","none",on]}],grow:[{grow:["",_i,ln,on]}],shrink:[{shrink:["",_i,ln,on]}],order:[{order:[Op,"first","last","none",ln,on]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":J()}],"auto-rows":[{"auto-rows":J()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...te(),"normal"]}],"justify-items":[{"justify-items":[...oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...oe()]}],"align-content":[{content:["normal",...te()]}],"align-items":[{items:[...oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":te()}],"place-items":[{"place-items":[...oe(),"baseline"]}],"place-self":[{"place-self":["auto",...oe()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:X()}],w:[{w:[l,"screen",...X()]}],"min-w":[{"min-w":[l,"screen","none",...X()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[r]},...X()]}],h:[{h:["screen","lh",...X()]}],"min-h":[{"min-h":["screen","lh","none",...X()]}],"max-h":[{"max-h":["screen","lh",...X()]}],"font-size":[{text:["base",t,vx,Zm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,ln,MM]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",wM,on]}],"font-family":[{font:[jJ,on,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ln,on]}],"line-clamp":[{"line-clamp":[_i,"none",ln,MM]}],leading:[{leading:[s,...j()]}],"list-image":[{"list-image":["none",ln,on]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ln,on]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Me(),"wavy"]}],"text-decoration-thickness":[{decoration:[_i,"from-font","auto",ln,Zm]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[_i,"auto",ln,on]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ln,on]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ln,on]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ee()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:ne()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Op,ln,on],radial:["",ln,on],conic:[Op,ln,on]},UJ,OJ]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:ue()}],"gradient-via-pos":[{via:ue()}],"gradient-to-pos":[{to:ue()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:de()}],"rounded-s":[{"rounded-s":de()}],"rounded-e":[{"rounded-e":de()}],"rounded-t":[{"rounded-t":de()}],"rounded-r":[{"rounded-r":de()}],"rounded-b":[{"rounded-b":de()}],"rounded-l":[{"rounded-l":de()}],"rounded-ss":[{"rounded-ss":de()}],"rounded-se":[{"rounded-se":de()}],"rounded-ee":[{"rounded-ee":de()}],"rounded-es":[{"rounded-es":de()}],"rounded-tl":[{"rounded-tl":de()}],"rounded-tr":[{"rounded-tr":de()}],"rounded-br":[{"rounded-br":de()}],"rounded-bl":[{"rounded-bl":de()}],"border-w":[{border:ie()}],"border-w-x":[{"border-x":ie()}],"border-w-y":[{"border-y":ie()}],"border-w-s":[{"border-s":ie()}],"border-w-e":[{"border-e":ie()}],"border-w-t":[{"border-t":ie()}],"border-w-r":[{"border-r":ie()}],"border-w-b":[{"border-b":ie()}],"border-w-l":[{"border-l":ie()}],"divide-x":[{"divide-x":ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Me(),"hidden","none"]}],"divide-style":[{divide:[...Me(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...Me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[_i,ln,on]}],"outline-w":[{outline:["",_i,vx,Zm]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",g,i_,n_]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",x,i_,n_]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[_i,Zm]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":ie()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",b,i_,n_]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[_i,ln,on]}],"mix-blend":[{"mix-blend":[...ye(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ye()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[_i]}],"mask-image-linear-from-pos":[{"mask-linear-from":ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":ae()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":ae()}],"mask-image-t-to-pos":[{"mask-t-to":ae()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":ae()}],"mask-image-r-to-pos":[{"mask-r-to":ae()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":ae()}],"mask-image-b-to-pos":[{"mask-b-to":ae()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":ae()}],"mask-image-l-to-pos":[{"mask-l-to":ae()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":ae()}],"mask-image-x-to-pos":[{"mask-x-to":ae()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":ae()}],"mask-image-y-to-pos":[{"mask-y-to":ae()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[ln,on]}],"mask-image-radial-from-pos":[{"mask-radial-from":ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":ae()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":D()}],"mask-image-conic-pos":[{"mask-conic":[_i]}],"mask-image-conic-from-pos":[{"mask-conic-from":ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":ae()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ee()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:ne()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ln,on]}],filter:[{filter:["","none",ln,on]}],blur:[{blur:_e()}],brightness:[{brightness:[_i,ln,on]}],contrast:[{contrast:[_i,ln,on]}],"drop-shadow":[{"drop-shadow":["","none",_,i_,n_]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",_i,ln,on]}],"hue-rotate":[{"hue-rotate":[_i,ln,on]}],invert:[{invert:["",_i,ln,on]}],saturate:[{saturate:[_i,ln,on]}],sepia:[{sepia:["",_i,ln,on]}],"backdrop-filter":[{"backdrop-filter":["","none",ln,on]}],"backdrop-blur":[{"backdrop-blur":_e()}],"backdrop-brightness":[{"backdrop-brightness":[_i,ln,on]}],"backdrop-contrast":[{"backdrop-contrast":[_i,ln,on]}],"backdrop-grayscale":[{"backdrop-grayscale":["",_i,ln,on]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_i,ln,on]}],"backdrop-invert":[{"backdrop-invert":["",_i,ln,on]}],"backdrop-opacity":[{"backdrop-opacity":[_i,ln,on]}],"backdrop-saturate":[{"backdrop-saturate":[_i,ln,on]}],"backdrop-sepia":[{"backdrop-sepia":["",_i,ln,on]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ln,on]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[_i,"initial",ln,on]}],ease:[{ease:["linear","initial",E,ln,on]}],delay:[{delay:[_i,ln,on]}],animate:[{animate:["none",T,ln,on]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,ln,on]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:Ke()}],"rotate-x":[{"rotate-x":Ke()}],"rotate-y":[{"rotate-y":Ke()}],"rotate-z":[{"rotate-z":Ke()}],scale:[{scale:Ge()}],"scale-x":[{"scale-x":Ge()}],"scale-y":[{"scale-y":Ge()}],"scale-z":[{"scale-z":Ge()}],"scale-3d":["scale-3d"],skew:[{skew:st()}],"skew-x":[{"skew-x":st()}],"skew-y":[{"skew-y":st()}],transform:[{transform:[ln,on,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ft()}],"translate-x":[{"translate-x":ft()}],"translate-y":[{"translate-y":ft()}],"translate-z":[{"translate-z":ft()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ln,on]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ln,on]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[_i,vx,Zm,MM]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},BJ=xJ(IJ);function fn(...n){return BJ(xP(n))}const FJ=CC("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),it=k.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...a},s)=>{const r=i?eJ:"button";return c.jsx(r,{className:fn(FJ({variant:e,size:t,className:n})),ref:s,...a})});it.displayName="Button";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HJ=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),sD=n=>{const e=HJ(n);return e.charAt(0).toUpperCase()+e.slice(1)},RP=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),GJ=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=k.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:s,iconNode:r,...l},d)=>k.createElement("svg",{ref:d,...VJ,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:RP("lucide",a),...!s&&!GJ(l)&&{"aria-hidden":"true"},...l},[...r.map(([f,g])=>k.createElement(f,g)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=(n,e)=>{const t=k.forwardRef(({className:i,...a},s)=>k.createElement(qJ,{ref:s,iconNode:e,className:RP(`lucide-${kJ(sD(n))}`,`lucide-${n}`,i),...a}));return t.displayName=sD(n),t};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],u1=Rt("arrow-right",XJ);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],DP=Rt("bed",YJ);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],rD=Rt("bookmark",WJ);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],ZJ=Rt("box",KJ);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],JJ=Rt("bug",QJ);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],OP=Rt("calculator",$J);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],jP=Rt("camera",e$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],PP=Rt("check",t$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],UP=Rt("chevron-down",n$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],a$=Rt("chevron-left",i$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],LP=Rt("chevron-right",s$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],zP=Rt("chevrons-up",r$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],IT=Rt("circle-alert",o$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Df=Rt("circle-check-big",l$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],IP=Rt("circle-x",c$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],d$=Rt("circle",u$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],NC=Rt("clock",h$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]],p$=Rt("cloud-sun",f$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],g$=Rt("cloud",m$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],RC=Rt("copy",v$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],x$=Rt("credit-card",y$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],BP=Rt("crown",b$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Fp=Rt("download",_$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]],F2=Rt("door-open",S$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],w$=Rt("droplets",E$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],T$=Rt("ellipsis-vertical",M$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],A$=Rt("external-link",C$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Gv=Rt("eye-off",N$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xl=Rt("eye",R$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],oD=Rt("facebook",D$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],lD=Rt("file-image",O$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Sf=Rt("file-text",j$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]],cD=Rt("file-video",P$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],L$=Rt("folder-open",U$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["rect",{width:"10",height:"8",x:"7",y:"8",rx:"1",key:"vys8me"}]],I$=Rt("fullscreen",z$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],FP=Rt("funnel",B$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],k$=Rt("git-compare",F$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Mf=Rt("grid-3x3",H$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],kP=Rt("grip-vertical",G$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],HP=Rt("hand",V$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],BT=Rt("heart",q$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Y$=Rt("history",X$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],K$=Rt("house",W$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_g=Rt("info",Z$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],J$=Rt("instagram",Q$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],jS=Rt("keyboard",$$);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eee=[["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M4.077 10.615A1 1 0 0 0 5 12h14a1 1 0 0 0 .923-1.385l-3.077-7.384A2 2 0 0 0 15 2H9a2 2 0 0 0-1.846 1.23Z",key:"1l7kg2"}],["path",{d:"M8 20a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1z",key:"1mmzpi"}]],GP=Rt("lamp",eee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],d1=Rt("layers",tee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nee=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],VP=Rt("layout-grid",nee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Fx=Rt("lightbulb",iee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aee=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],uD=Rt("linkedin",aee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const see=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],ree=Rt("list",see);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oee=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],qP=Rt("lock-open",oee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lee=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],XP=Rt("lock",lee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=[["path",{d:"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15",key:"1i3lhw"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}],["path",{d:"m12 15 4 4",key:"lnac28"}]],uee=Rt("magnet",cee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],hee=Rt("map-pin",dee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fee=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Vv=Rt("maximize-2",fee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pee=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],dD=Rt("maximize",pee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mee=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],gee=Rt("menu",mee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vee=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],YP=Rt("message-circle",vee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yee=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],xee=Rt("message-square",yee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],DC=Rt("minimize-2",bee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ee=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],WP=Rt("moon",_ee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const See=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],KP=Rt("mouse-pointer",See);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eee=[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]],wee=Rt("move-3d",Eee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mee=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],_h=Rt("move",Mee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tee=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Fc=Rt("package",Tee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cee=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],hD=Rt("paintbrush",Cee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aee=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],k2=Rt("palette",Aee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nee=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],ZP=Rt("pause",Nee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ree=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Dee=Rt("pen-line",Ree);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oee=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],OC=Rt("play",Oee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jee=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],h1=Rt("plus",jee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pee=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],QP=Rt("rectangle-horizontal",Pee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uee=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],JP=Rt("redo-2",Uee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lee=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pd=Rt("refresh-cw",Lee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zee=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Sg=Rt("rotate-ccw",zee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iee=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Bee=Rt("rotate-cw",Iee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fee=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Av=Rt("ruler",Fee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kee=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jC=Rt("save",kee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hee=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],H2=Rt("search",Hee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gee=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$P=Rt("send",Gee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vee=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],qee=Rt("settings-2",Vee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xee=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kp=Rt("settings",Xee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yee=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],fg=Rt("share-2",Yee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wee=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],Kee=Rt("share",Wee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zee=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Qee=Rt("smartphone",Zee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jee=[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"xacw8m"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]],eU=Rt("sofa",Jee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ee=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],PC=Rt("sparkles",$ee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ete=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],tte=Rt("square-pen",ete);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nte=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Nv=Rt("square",nte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ite=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],UC=Rt("star",ite);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ate=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],FT=Rt("sun",ate);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ste=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],rte=Rt("sunrise",ste);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ote=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],lte=Rt("sunset",ote);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cte=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],tU=Rt("table",cte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ute=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],dte=Rt("target",ute);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hte=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Of=Rt("trash-2",hte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fte=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pte=Rt("trending-up",fte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ph=Rt("triangle-alert",mte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],fD=Rt("twitter",gte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vte=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],G2=Rt("type",vte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yte=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],LC=Rt("upload",yte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xte=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bte=Rt("user-plus",xte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _te=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Bp=Rt("users",_te);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ste=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],pD=Rt("wand-sparkles",Ste);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Eg=Rt("x",Ete);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wte=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],nU=Rt("zap",wte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mte=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Tte=Rt("zoom-in",Mte);function nn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(a){if(n?.(a),t===!1||!a.defaultPrevented)return e?.(a)}}function Cte(n,e){const t=k.createContext(e),i=s=>{const{children:r,...l}=s,d=k.useMemo(()=>l,Object.values(l));return c.jsx(t.Provider,{value:d,children:r})};i.displayName=n+"Provider";function a(s){const r=k.useContext(t);if(r)return r;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[i,a]}function xd(n,e=[]){let t=[];function i(s,r){const l=k.createContext(r),d=t.length;t=[...t,r];const f=x=>{const{scope:b,children:_,...S}=x,w=b?.[n]?.[d]||l,M=k.useMemo(()=>S,Object.values(S));return c.jsx(w.Provider,{value:M,children:_})};f.displayName=s+"Provider";function g(x,b){const _=b?.[n]?.[d]||l,S=k.useContext(_);if(S)return S;if(r!==void 0)return r;throw new Error(`\`${x}\` must be used within \`${s}\``)}return[f,g]}const a=()=>{const s=t.map(r=>k.createContext(r));return function(l){const d=l?.[n]||s;return k.useMemo(()=>({[`__scope${n}`]:{...l,[n]:d}}),[l,d])}};return a.scopeName=n,[i,Ate(a,...e)]}function Ate(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const r=i.reduce((l,{useScope:d,scopeName:f})=>{const x=d(s)[`__scope${f}`];return{...l,...x}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:r}),[r])}};return t.scopeName=e.scopeName,t}var Jo=globalThis?.document?k.useLayoutEffect:()=>{},Nte=X6[" useInsertionEffect ".trim().toString()]||Jo;function Kp({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[a,s,r]=Rte({defaultProp:e,onChange:t}),l=n!==void 0,d=l?n:a;{const g=k.useRef(n!==void 0);k.useEffect(()=>{const x=g.current;x!==l&&console.warn(`${i} is changing from ${x?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=l},[l,i])}const f=k.useCallback(g=>{if(l){const x=Dte(g)?g(n):g;x!==n&&r.current?.(x)}else s(g)},[l,n,s,r]);return[d,f]}function Rte({defaultProp:n,onChange:e}){const[t,i]=k.useState(n),a=k.useRef(t),s=k.useRef(e);return Nte(()=>{s.current=e},[e]),k.useEffect(()=>{a.current!==t&&(s.current?.(t),a.current=t)},[t,a]),[t,i,s]}function Dte(n){return typeof n=="function"}var jg=qS();const Ote=Uf(jg);var jte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ci=jte.reduce((n,e)=>{const t=bg(`Primitive.${e}`),i=k.forwardRef((a,s)=>{const{asChild:r,...l}=a,d=r?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(d,{...l,ref:s})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function iU(n,e){n&&jg.flushSync(()=>n.dispatchEvent(e))}function zC(n){const e=n+"CollectionProvider",[t,i]=xd(e),[a,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),r=w=>{const{scope:M,children:E}=w,T=di.useRef(null),C=di.useRef(new Map).current;return c.jsx(a,{scope:M,itemMap:C,collectionRef:T,children:E})};r.displayName=e;const l=n+"CollectionSlot",d=bg(l),f=di.forwardRef((w,M)=>{const{scope:E,children:T}=w,C=s(l,E),D=da(M,C.collectionRef);return c.jsx(d,{ref:D,children:T})});f.displayName=l;const g=n+"CollectionItemSlot",x="data-radix-collection-item",b=bg(g),_=di.forwardRef((w,M)=>{const{scope:E,children:T,...C}=w,D=di.useRef(null),P=da(M,D),B=s(g,E);return di.useEffect(()=>(B.itemMap.set(D,{ref:D,...C}),()=>void B.itemMap.delete(D))),c.jsx(b,{[x]:"",ref:P,children:T})});_.displayName=g;function S(w){const M=s(n+"CollectionConsumer",w);return di.useCallback(()=>{const T=M.collectionRef.current;if(!T)return[];const C=Array.from(T.querySelectorAll(`[${x}]`));return Array.from(M.itemMap.values()).sort((B,F)=>C.indexOf(B.ref.current)-C.indexOf(F.ref.current))},[M.collectionRef,M.itemMap])}return[{Provider:r,Slot:f,ItemSlot:_},S,i]}var Pte=k.createContext(void 0);function V2(n){const e=k.useContext(Pte);return n||e||"ltr"}function Sh(n){const e=k.useRef(n);return k.useEffect(()=>{e.current=n}),k.useMemo(()=>(...t)=>e.current?.(...t),[])}function Ute(n,e=globalThis?.document){const t=Sh(n);k.useEffect(()=>{const i=a=>{a.key==="Escape"&&t(a)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var Lte="DismissableLayer",kT="dismissableLayer.update",zte="dismissableLayer.pointerDownOutside",Ite="dismissableLayer.focusOutside",mD,aU=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),I1=k.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:r,onDismiss:l,...d}=n,f=k.useContext(aU),[g,x]=k.useState(null),b=g?.ownerDocument??globalThis?.document,[,_]=k.useState({}),S=da(e,F=>x(F)),w=Array.from(f.layers),[M]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),E=w.indexOf(M),T=g?w.indexOf(g):-1,C=f.layersWithOutsidePointerEventsDisabled.size>0,D=T>=E,P=kte(F=>{const j=F.target,O=[...f.branches].some(I=>I.contains(j));!D||O||(a?.(F),r?.(F),F.defaultPrevented||l?.())},b),B=Hte(F=>{const j=F.target;[...f.branches].some(I=>I.contains(j))||(s?.(F),r?.(F),F.defaultPrevented||l?.())},b);return Ute(F=>{T===f.layers.size-1&&(i?.(F),!F.defaultPrevented&&l&&(F.preventDefault(),l()))},b),k.useEffect(()=>{if(g)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(mD=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),gD(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=mD)}},[g,b,t,f]),k.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),gD())},[g,f]),k.useEffect(()=>{const F=()=>_({});return document.addEventListener(kT,F),()=>document.removeEventListener(kT,F)},[]),c.jsx(ci.div,{...d,ref:S,style:{pointerEvents:C?D?"auto":"none":void 0,...n.style},onFocusCapture:nn(n.onFocusCapture,B.onFocusCapture),onBlurCapture:nn(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:nn(n.onPointerDownCapture,P.onPointerDownCapture)})});I1.displayName=Lte;var Bte="DismissableLayerBranch",Fte=k.forwardRef((n,e)=>{const t=k.useContext(aU),i=k.useRef(null),a=da(e,i);return k.useEffect(()=>{const s=i.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),c.jsx(ci.div,{...n,ref:a})});Fte.displayName=Bte;function kte(n,e=globalThis?.document){const t=Sh(n),i=k.useRef(!1),a=k.useRef(()=>{});return k.useEffect(()=>{const s=l=>{if(l.target&&!i.current){let d=function(){sU(zte,t,f,{discrete:!0})};const f={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=d,e.addEventListener("click",a.current,{once:!0})):d()}else e.removeEventListener("click",a.current);i.current=!1},r=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(r),e.removeEventListener("pointerdown",s),e.removeEventListener("click",a.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function Hte(n,e=globalThis?.document){const t=Sh(n),i=k.useRef(!1);return k.useEffect(()=>{const a=s=>{s.target&&!i.current&&sU(Ite,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function gD(){const n=new CustomEvent(kT);document.dispatchEvent(n)}function sU(n,e,t,{discrete:i}){const a=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&a.addEventListener(n,e,{once:!0}),i?iU(a,s):a.dispatchEvent(s)}var TM=0;function IC(){k.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??vD()),document.body.insertAdjacentElement("beforeend",n[1]??vD()),TM++,()=>{TM===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),TM--}},[])}function vD(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var CM="focusScope.autoFocusOnMount",AM="focusScope.autoFocusOnUnmount",yD={bubbles:!1,cancelable:!0},Gte="FocusScope",q2=k.forwardRef((n,e)=>{const{loop:t=!1,trapped:i=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...r}=n,[l,d]=k.useState(null),f=Sh(a),g=Sh(s),x=k.useRef(null),b=da(e,w=>d(w)),_=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(i){let w=function(C){if(_.paused||!l)return;const D=C.target;l.contains(D)?x.current=D:Up(x.current,{select:!0})},M=function(C){if(_.paused||!l)return;const D=C.relatedTarget;D!==null&&(l.contains(D)||Up(x.current,{select:!0}))},E=function(C){if(document.activeElement===document.body)for(const P of C)P.removedNodes.length>0&&Up(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",M);const T=new MutationObserver(E);return l&&T.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",M),T.disconnect()}}},[i,l,_.paused]),k.useEffect(()=>{if(l){bD.add(_);const w=document.activeElement;if(!l.contains(w)){const E=new CustomEvent(CM,yD);l.addEventListener(CM,f),l.dispatchEvent(E),E.defaultPrevented||(Vte(Kte(rU(l)),{select:!0}),document.activeElement===w&&Up(l))}return()=>{l.removeEventListener(CM,f),setTimeout(()=>{const E=new CustomEvent(AM,yD);l.addEventListener(AM,g),l.dispatchEvent(E),E.defaultPrevented||Up(w??document.body,{select:!0}),l.removeEventListener(AM,g),bD.remove(_)},0)}}},[l,f,g,_]);const S=k.useCallback(w=>{if(!t&&!i||_.paused)return;const M=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,E=document.activeElement;if(M&&E){const T=w.currentTarget,[C,D]=qte(T);C&&D?!w.shiftKey&&E===D?(w.preventDefault(),t&&Up(C,{select:!0})):w.shiftKey&&E===C&&(w.preventDefault(),t&&Up(D,{select:!0})):E===T&&w.preventDefault()}},[t,i,_.paused]);return c.jsx(ci.div,{tabIndex:-1,...r,ref:b,onKeyDown:S})});q2.displayName=Gte;function Vte(n,{select:e=!1}={}){const t=document.activeElement;for(const i of n)if(Up(i,{select:e}),document.activeElement!==t)return}function qte(n){const e=rU(n),t=xD(e,n),i=xD(e.reverse(),n);return[t,i]}function rU(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function xD(n,e){for(const t of n)if(!Xte(t,{upTo:e}))return t}function Xte(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Yte(n){return n instanceof HTMLInputElement&&"select"in n}function Up(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Yte(n)&&e&&n.select()}}var bD=Wte();function Wte(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=_D(n,e),n.unshift(e)},remove(e){n=_D(n,e),n[0]?.resume()}}}function _D(n,e){const t=[...n],i=t.indexOf(e);return i!==-1&&t.splice(i,1),t}function Kte(n){return n.filter(e=>e.tagName!=="A")}var Zte=X6[" useId ".trim().toString()]||(()=>{}),Qte=0;function hd(n){const[e,t]=k.useState(Zte());return Jo(()=>{t(i=>i??String(Qte++))},[n]),e?`radix-${e}`:""}const Jte=["top","right","bottom","left"],Zp=Math.min,kc=Math.max,PS=Math.round,a_=Math.floor,mh=n=>({x:n,y:n}),$te={left:"right",right:"left",bottom:"top",top:"bottom"},ene={start:"end",end:"start"};function HT(n,e,t){return kc(n,Zp(e,t))}function jf(n,e){return typeof n=="function"?n(e):n}function Pf(n){return n.split("-")[0]}function qv(n){return n.split("-")[1]}function BC(n){return n==="x"?"y":"x"}function FC(n){return n==="y"?"height":"width"}const tne=new Set(["top","bottom"]);function uh(n){return tne.has(Pf(n))?"y":"x"}function kC(n){return BC(uh(n))}function nne(n,e,t){t===void 0&&(t=!1);const i=qv(n),a=kC(n),s=FC(a);let r=a==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(r=US(r)),[r,US(r)]}function ine(n){const e=US(n);return[GT(n),e,GT(e)]}function GT(n){return n.replace(/start|end/g,e=>ene[e])}const SD=["left","right"],ED=["right","left"],ane=["top","bottom"],sne=["bottom","top"];function rne(n,e,t){switch(n){case"top":case"bottom":return t?e?ED:SD:e?SD:ED;case"left":case"right":return e?ane:sne;default:return[]}}function one(n,e,t,i){const a=qv(n);let s=rne(Pf(n),t==="start",i);return a&&(s=s.map(r=>r+"-"+a),e&&(s=s.concat(s.map(GT)))),s}function US(n){return n.replace(/left|right|bottom|top/g,e=>$te[e])}function lne(n){return{top:0,right:0,bottom:0,left:0,...n}}function oU(n){return typeof n!="number"?lne(n):{top:n,right:n,bottom:n,left:n}}function LS(n){const{x:e,y:t,width:i,height:a}=n;return{width:i,height:a,top:t,left:e,right:e+i,bottom:t+a,x:e,y:t}}function wD(n,e,t){let{reference:i,floating:a}=n;const s=uh(e),r=kC(e),l=FC(r),d=Pf(e),f=s==="y",g=i.x+i.width/2-a.width/2,x=i.y+i.height/2-a.height/2,b=i[l]/2-a[l]/2;let _;switch(d){case"top":_={x:g,y:i.y-a.height};break;case"bottom":_={x:g,y:i.y+i.height};break;case"right":_={x:i.x+i.width,y:x};break;case"left":_={x:i.x-a.width,y:x};break;default:_={x:i.x,y:i.y}}switch(qv(e)){case"start":_[r]-=b*(t&&f?-1:1);break;case"end":_[r]+=b*(t&&f?-1:1);break}return _}const cne=async(n,e,t)=>{const{placement:i="bottom",strategy:a="absolute",middleware:s=[],platform:r}=t,l=s.filter(Boolean),d=await(r.isRTL==null?void 0:r.isRTL(e));let f=await r.getElementRects({reference:n,floating:e,strategy:a}),{x:g,y:x}=wD(f,i,d),b=i,_={},S=0;for(let w=0;w<l.length;w++){const{name:M,fn:E}=l[w],{x:T,y:C,data:D,reset:P}=await E({x:g,y:x,initialPlacement:i,placement:b,strategy:a,middlewareData:_,rects:f,platform:r,elements:{reference:n,floating:e}});g=T??g,x=C??x,_={..._,[M]:{..._[M],...D}},P&&S<=50&&(S++,typeof P=="object"&&(P.placement&&(b=P.placement),P.rects&&(f=P.rects===!0?await r.getElementRects({reference:n,floating:e,strategy:a}):P.rects),{x:g,y:x}=wD(f,b,d)),w=-1)}return{x:g,y:x,placement:b,strategy:a,middlewareData:_}};async function f1(n,e){var t;e===void 0&&(e={});const{x:i,y:a,platform:s,rects:r,elements:l,strategy:d}=n,{boundary:f="clippingAncestors",rootBoundary:g="viewport",elementContext:x="floating",altBoundary:b=!1,padding:_=0}=jf(e,n),S=oU(_),M=l[b?x==="floating"?"reference":"floating":x],E=LS(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(M)))==null||t?M:M.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:f,rootBoundary:g,strategy:d})),T=x==="floating"?{x:i,y:a,width:r.floating.width,height:r.floating.height}:r.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),D=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},P=LS(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:T,offsetParent:C,strategy:d}):T);return{top:(E.top-P.top+S.top)/D.y,bottom:(P.bottom-E.bottom+S.bottom)/D.y,left:(E.left-P.left+S.left)/D.x,right:(P.right-E.right+S.right)/D.x}}const une=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:a,rects:s,platform:r,elements:l,middlewareData:d}=e,{element:f,padding:g=0}=jf(n,e)||{};if(f==null)return{};const x=oU(g),b={x:t,y:i},_=kC(a),S=FC(_),w=await r.getDimensions(f),M=_==="y",E=M?"top":"left",T=M?"bottom":"right",C=M?"clientHeight":"clientWidth",D=s.reference[S]+s.reference[_]-b[_]-s.floating[S],P=b[_]-s.reference[_],B=await(r.getOffsetParent==null?void 0:r.getOffsetParent(f));let F=B?B[C]:0;(!F||!await(r.isElement==null?void 0:r.isElement(B)))&&(F=l.floating[C]||s.floating[S]);const j=D/2-P/2,O=F/2-w[S]/2-1,I=Zp(x[E],O),W=Zp(x[T],O),Q=I,J=F-w[S]-W,te=F/2-w[S]/2+j,oe=HT(Q,te,J),$=!d.arrow&&qv(a)!=null&&te!==oe&&s.reference[S]/2-(te<Q?I:W)-w[S]/2<0,X=$?te<Q?te-Q:te-J:0;return{[_]:b[_]+X,data:{[_]:oe,centerOffset:te-oe-X,...$&&{alignmentOffset:X}},reset:$}}}),dne=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:a,middlewareData:s,rects:r,initialPlacement:l,platform:d,elements:f}=e,{mainAxis:g=!0,crossAxis:x=!0,fallbackPlacements:b,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:w=!0,...M}=jf(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const E=Pf(a),T=uh(l),C=Pf(l)===l,D=await(d.isRTL==null?void 0:d.isRTL(f.floating)),P=b||(C||!w?[US(l)]:ine(l)),B=S!=="none";!b&&B&&P.push(...one(l,w,S,D));const F=[l,...P],j=await f1(e,M),O=[];let I=((i=s.flip)==null?void 0:i.overflows)||[];if(g&&O.push(j[E]),x){const te=nne(a,r,D);O.push(j[te[0]],j[te[1]])}if(I=[...I,{placement:a,overflows:O}],!O.every(te=>te<=0)){var W,Q;const te=(((W=s.flip)==null?void 0:W.index)||0)+1,oe=F[te];if(oe&&(!(x==="alignment"?T!==uh(oe):!1)||I.every(G=>uh(G.placement)===T?G.overflows[0]>0:!0)))return{data:{index:te,overflows:I},reset:{placement:oe}};let $=(Q=I.filter(X=>X.overflows[0]<=0).sort((X,G)=>X.overflows[1]-G.overflows[1])[0])==null?void 0:Q.placement;if(!$)switch(_){case"bestFit":{var J;const X=(J=I.filter(G=>{if(B){const ee=uh(G.placement);return ee===T||ee==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(ee=>ee>0).reduce((ee,Y)=>ee+Y,0)]).sort((G,ee)=>G[1]-ee[1])[0])==null?void 0:J[0];X&&($=X);break}case"initialPlacement":$=l;break}if(a!==$)return{reset:{placement:$}}}return{}}}};function MD(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function TD(n){return Jte.some(e=>n[e]>=0)}const hne=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...a}=jf(n,e);switch(i){case"referenceHidden":{const s=await f1(e,{...a,elementContext:"reference"}),r=MD(s,t.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:TD(r)}}}case"escaped":{const s=await f1(e,{...a,altBoundary:!0}),r=MD(s,t.floating);return{data:{escapedOffsets:r,escaped:TD(r)}}}default:return{}}}}},lU=new Set(["left","top"]);async function fne(n,e){const{placement:t,platform:i,elements:a}=n,s=await(i.isRTL==null?void 0:i.isRTL(a.floating)),r=Pf(t),l=qv(t),d=uh(t)==="y",f=lU.has(r)?-1:1,g=s&&d?-1:1,x=jf(e,n);let{mainAxis:b,crossAxis:_,alignmentAxis:S}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return l&&typeof S=="number"&&(_=l==="end"?S*-1:S),d?{x:_*g,y:b*f}:{x:b*f,y:_*g}}const pne=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:a,y:s,placement:r,middlewareData:l}=e,d=await fne(e,n);return r===((t=l.offset)==null?void 0:t.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:a+d.x,y:s+d.y,data:{...d,placement:r}}}}},mne=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:a}=e,{mainAxis:s=!0,crossAxis:r=!1,limiter:l={fn:M=>{let{x:E,y:T}=M;return{x:E,y:T}}},...d}=jf(n,e),f={x:t,y:i},g=await f1(e,d),x=uh(Pf(a)),b=BC(x);let _=f[b],S=f[x];if(s){const M=b==="y"?"top":"left",E=b==="y"?"bottom":"right",T=_+g[M],C=_-g[E];_=HT(T,_,C)}if(r){const M=x==="y"?"top":"left",E=x==="y"?"bottom":"right",T=S+g[M],C=S-g[E];S=HT(T,S,C)}const w=l.fn({...e,[b]:_,[x]:S});return{...w,data:{x:w.x-t,y:w.y-i,enabled:{[b]:s,[x]:r}}}}}},gne=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:a,rects:s,middlewareData:r}=e,{offset:l=0,mainAxis:d=!0,crossAxis:f=!0}=jf(n,e),g={x:t,y:i},x=uh(a),b=BC(x);let _=g[b],S=g[x];const w=jf(l,e),M=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(d){const C=b==="y"?"height":"width",D=s.reference[b]-s.floating[C]+M.mainAxis,P=s.reference[b]+s.reference[C]-M.mainAxis;_<D?_=D:_>P&&(_=P)}if(f){var E,T;const C=b==="y"?"width":"height",D=lU.has(Pf(a)),P=s.reference[x]-s.floating[C]+(D&&((E=r.offset)==null?void 0:E[x])||0)+(D?0:M.crossAxis),B=s.reference[x]+s.reference[C]+(D?0:((T=r.offset)==null?void 0:T[x])||0)-(D?M.crossAxis:0);S<P?S=P:S>B&&(S=B)}return{[b]:_,[x]:S}}}},vne=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:a,rects:s,platform:r,elements:l}=e,{apply:d=()=>{},...f}=jf(n,e),g=await f1(e,f),x=Pf(a),b=qv(a),_=uh(a)==="y",{width:S,height:w}=s.floating;let M,E;x==="top"||x==="bottom"?(M=x,E=b===(await(r.isRTL==null?void 0:r.isRTL(l.floating))?"start":"end")?"left":"right"):(E=x,M=b==="end"?"top":"bottom");const T=w-g.top-g.bottom,C=S-g.left-g.right,D=Zp(w-g[M],T),P=Zp(S-g[E],C),B=!e.middlewareData.shift;let F=D,j=P;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(j=C),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(F=T),B&&!b){const I=kc(g.left,0),W=kc(g.right,0),Q=kc(g.top,0),J=kc(g.bottom,0);_?j=S-2*(I!==0||W!==0?I+W:kc(g.left,g.right)):F=w-2*(Q!==0||J!==0?Q+J:kc(g.top,g.bottom))}await d({...e,availableWidth:j,availableHeight:F});const O=await r.getDimensions(l.floating);return S!==O.width||w!==O.height?{reset:{rects:!0}}:{}}}};function X2(){return typeof window<"u"}function Xv(n){return cU(n)?(n.nodeName||"").toLowerCase():"#document"}function qc(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Th(n){var e;return(e=(cU(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function cU(n){return X2()?n instanceof Node||n instanceof qc(n).Node:!1}function md(n){return X2()?n instanceof Element||n instanceof qc(n).Element:!1}function Eh(n){return X2()?n instanceof HTMLElement||n instanceof qc(n).HTMLElement:!1}function CD(n){return!X2()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof qc(n).ShadowRoot}const yne=new Set(["inline","contents"]);function B1(n){const{overflow:e,overflowX:t,overflowY:i,display:a}=gd(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!yne.has(a)}const xne=new Set(["table","td","th"]);function bne(n){return xne.has(Xv(n))}const _ne=[":popover-open",":modal"];function Y2(n){return _ne.some(e=>{try{return n.matches(e)}catch{return!1}})}const Sne=["transform","translate","scale","rotate","perspective"],Ene=["transform","translate","scale","rotate","perspective","filter"],wne=["paint","layout","strict","content"];function HC(n){const e=GC(),t=md(n)?gd(n):n;return Sne.some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||Ene.some(i=>(t.willChange||"").includes(i))||wne.some(i=>(t.contain||"").includes(i))}function Mne(n){let e=Qp(n);for(;Eh(e)&&!Rv(e);){if(HC(e))return e;if(Y2(e))return null;e=Qp(e)}return null}function GC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Tne=new Set(["html","body","#document"]);function Rv(n){return Tne.has(Xv(n))}function gd(n){return qc(n).getComputedStyle(n)}function W2(n){return md(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Qp(n){if(Xv(n)==="html")return n;const e=n.assignedSlot||n.parentNode||CD(n)&&n.host||Th(n);return CD(e)?e.host:e}function uU(n){const e=Qp(n);return Rv(e)?n.ownerDocument?n.ownerDocument.body:n.body:Eh(e)&&B1(e)?e:uU(e)}function p1(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const a=uU(n),s=a===((i=n.ownerDocument)==null?void 0:i.body),r=qc(a);if(s){const l=VT(r);return e.concat(r,r.visualViewport||[],B1(a)?a:[],l&&t?p1(l):[])}return e.concat(a,p1(a,[],t))}function VT(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function dU(n){const e=gd(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const a=Eh(n),s=a?n.offsetWidth:t,r=a?n.offsetHeight:i,l=PS(t)!==s||PS(i)!==r;return l&&(t=s,i=r),{width:t,height:i,$:l}}function VC(n){return md(n)?n:n.contextElement}function dv(n){const e=VC(n);if(!Eh(e))return mh(1);const t=e.getBoundingClientRect(),{width:i,height:a,$:s}=dU(e);let r=(s?PS(t.width):t.width)/i,l=(s?PS(t.height):t.height)/a;return(!r||!Number.isFinite(r))&&(r=1),(!l||!Number.isFinite(l))&&(l=1),{x:r,y:l}}const Cne=mh(0);function hU(n){const e=qc(n);return!GC()||!e.visualViewport?Cne:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Ane(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==qc(n)?!1:e}function wg(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const a=n.getBoundingClientRect(),s=VC(n);let r=mh(1);e&&(i?md(i)&&(r=dv(i)):r=dv(n));const l=Ane(s,t,i)?hU(s):mh(0);let d=(a.left+l.x)/r.x,f=(a.top+l.y)/r.y,g=a.width/r.x,x=a.height/r.y;if(s){const b=qc(s),_=i&&md(i)?qc(i):i;let S=b,w=VT(S);for(;w&&i&&_!==S;){const M=dv(w),E=w.getBoundingClientRect(),T=gd(w),C=E.left+(w.clientLeft+parseFloat(T.paddingLeft))*M.x,D=E.top+(w.clientTop+parseFloat(T.paddingTop))*M.y;d*=M.x,f*=M.y,g*=M.x,x*=M.y,d+=C,f+=D,S=qc(w),w=VT(S)}}return LS({width:g,height:x,x:d,y:f})}function qC(n,e){const t=W2(n).scrollLeft;return e?e.left+t:wg(Th(n)).left+t}function fU(n,e,t){t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=i.left+e.scrollLeft-(t?0:qC(n,i)),s=i.top+e.scrollTop;return{x:a,y:s}}function Nne(n){let{elements:e,rect:t,offsetParent:i,strategy:a}=n;const s=a==="fixed",r=Th(i),l=e?Y2(e.floating):!1;if(i===r||l&&s)return t;let d={scrollLeft:0,scrollTop:0},f=mh(1);const g=mh(0),x=Eh(i);if((x||!x&&!s)&&((Xv(i)!=="body"||B1(r))&&(d=W2(i)),Eh(i))){const _=wg(i);f=dv(i),g.x=_.x+i.clientLeft,g.y=_.y+i.clientTop}const b=r&&!x&&!s?fU(r,d,!0):mh(0);return{width:t.width*f.x,height:t.height*f.y,x:t.x*f.x-d.scrollLeft*f.x+g.x+b.x,y:t.y*f.y-d.scrollTop*f.y+g.y+b.y}}function Rne(n){return Array.from(n.getClientRects())}function Dne(n){const e=Th(n),t=W2(n),i=n.ownerDocument.body,a=kc(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=kc(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let r=-t.scrollLeft+qC(n);const l=-t.scrollTop;return gd(i).direction==="rtl"&&(r+=kc(e.clientWidth,i.clientWidth)-a),{width:a,height:s,x:r,y:l}}function One(n,e){const t=qc(n),i=Th(n),a=t.visualViewport;let s=i.clientWidth,r=i.clientHeight,l=0,d=0;if(a){s=a.width,r=a.height;const f=GC();(!f||f&&e==="fixed")&&(l=a.offsetLeft,d=a.offsetTop)}return{width:s,height:r,x:l,y:d}}const jne=new Set(["absolute","fixed"]);function Pne(n,e){const t=wg(n,!0,e==="fixed"),i=t.top+n.clientTop,a=t.left+n.clientLeft,s=Eh(n)?dv(n):mh(1),r=n.clientWidth*s.x,l=n.clientHeight*s.y,d=a*s.x,f=i*s.y;return{width:r,height:l,x:d,y:f}}function AD(n,e,t){let i;if(e==="viewport")i=One(n,t);else if(e==="document")i=Dne(Th(n));else if(md(e))i=Pne(e,t);else{const a=hU(n);i={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return LS(i)}function pU(n,e){const t=Qp(n);return t===e||!md(t)||Rv(t)?!1:gd(t).position==="fixed"||pU(t,e)}function Une(n,e){const t=e.get(n);if(t)return t;let i=p1(n,[],!1).filter(l=>md(l)&&Xv(l)!=="body"),a=null;const s=gd(n).position==="fixed";let r=s?Qp(n):n;for(;md(r)&&!Rv(r);){const l=gd(r),d=HC(r);!d&&l.position==="fixed"&&(a=null),(s?!d&&!a:!d&&l.position==="static"&&!!a&&jne.has(a.position)||B1(r)&&!d&&pU(n,r))?i=i.filter(g=>g!==r):a=l,r=Qp(r)}return e.set(n,i),i}function Lne(n){let{element:e,boundary:t,rootBoundary:i,strategy:a}=n;const r=[...t==="clippingAncestors"?Y2(e)?[]:Une(e,this._c):[].concat(t),i],l=r[0],d=r.reduce((f,g)=>{const x=AD(e,g,a);return f.top=kc(x.top,f.top),f.right=Zp(x.right,f.right),f.bottom=Zp(x.bottom,f.bottom),f.left=kc(x.left,f.left),f},AD(e,l,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function zne(n){const{width:e,height:t}=dU(n);return{width:e,height:t}}function Ine(n,e,t){const i=Eh(e),a=Th(e),s=t==="fixed",r=wg(n,!0,s,e);let l={scrollLeft:0,scrollTop:0};const d=mh(0);function f(){d.x=qC(a)}if(i||!i&&!s)if((Xv(e)!=="body"||B1(a))&&(l=W2(e)),i){const _=wg(e,!0,s,e);d.x=_.x+e.clientLeft,d.y=_.y+e.clientTop}else a&&f();s&&!i&&a&&f();const g=a&&!i&&!s?fU(a,l):mh(0),x=r.left+l.scrollLeft-d.x-g.x,b=r.top+l.scrollTop-d.y-g.y;return{x,y:b,width:r.width,height:r.height}}function NM(n){return gd(n).position==="static"}function ND(n,e){if(!Eh(n)||gd(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Th(n)===t&&(t=t.ownerDocument.body),t}function mU(n,e){const t=qc(n);if(Y2(n))return t;if(!Eh(n)){let a=Qp(n);for(;a&&!Rv(a);){if(md(a)&&!NM(a))return a;a=Qp(a)}return t}let i=ND(n,e);for(;i&&bne(i)&&NM(i);)i=ND(i,e);return i&&Rv(i)&&NM(i)&&!HC(i)?t:i||Mne(n)||t}const Bne=async function(n){const e=this.getOffsetParent||mU,t=this.getDimensions,i=await t(n.floating);return{reference:Ine(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Fne(n){return gd(n).direction==="rtl"}const kne={convertOffsetParentRelativeRectToViewportRelativeRect:Nne,getDocumentElement:Th,getClippingRect:Lne,getOffsetParent:mU,getElementRects:Bne,getClientRects:Rne,getDimensions:zne,getScale:dv,isElement:md,isRTL:Fne};function gU(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Hne(n,e){let t=null,i;const a=Th(n);function s(){var l;clearTimeout(i),(l=t)==null||l.disconnect(),t=null}function r(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),s();const f=n.getBoundingClientRect(),{left:g,top:x,width:b,height:_}=f;if(l||e(),!b||!_)return;const S=a_(x),w=a_(a.clientWidth-(g+b)),M=a_(a.clientHeight-(x+_)),E=a_(g),C={rootMargin:-S+"px "+-w+"px "+-M+"px "+-E+"px",threshold:kc(0,Zp(1,d))||1};let D=!0;function P(B){const F=B[0].intersectionRatio;if(F!==d){if(!D)return r();F?r(!1,F):i=setTimeout(()=>{r(!1,1e-7)},1e3)}F===1&&!gU(f,n.getBoundingClientRect())&&r(),D=!1}try{t=new IntersectionObserver(P,{...C,root:a.ownerDocument})}catch{t=new IntersectionObserver(P,C)}t.observe(n)}return r(!0),s}function Gne(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=i,f=VC(n),g=a||s?[...f?p1(f):[],...p1(e)]:[];g.forEach(E=>{a&&E.addEventListener("scroll",t,{passive:!0}),s&&E.addEventListener("resize",t)});const x=f&&l?Hne(f,t):null;let b=-1,_=null;r&&(_=new ResizeObserver(E=>{let[T]=E;T&&T.target===f&&_&&(_.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var C;(C=_)==null||C.observe(e)})),t()}),f&&!d&&_.observe(f),_.observe(e));let S,w=d?wg(n):null;d&&M();function M(){const E=wg(n);w&&!gU(w,E)&&t(),w=E,S=requestAnimationFrame(M)}return t(),()=>{var E;g.forEach(T=>{a&&T.removeEventListener("scroll",t),s&&T.removeEventListener("resize",t)}),x?.(),(E=_)==null||E.disconnect(),_=null,d&&cancelAnimationFrame(S)}}const Vne=pne,qne=mne,Xne=dne,Yne=vne,Wne=hne,RD=une,Kne=gne,Zne=(n,e,t)=>{const i=new Map,a={platform:kne,...t},s={...a.platform,_c:i};return cne(n,e,{...a,platform:s})};var Qne=typeof document<"u",Jne=function(){},A_=Qne?k.useLayoutEffect:Jne;function zS(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,a;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!zS(n[i],e[i]))return!1;return!0}if(a=Object.keys(n),t=a.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,a[i]))return!1;for(i=t;i--!==0;){const s=a[i];if(!(s==="_owner"&&n.$$typeof)&&!zS(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function vU(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function DD(n,e){const t=vU(n);return Math.round(e*t)/t}function RM(n){const e=k.useRef(n);return A_(()=>{e.current=n}),e}function $ne(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:a,elements:{reference:s,floating:r}={},transform:l=!0,whileElementsMounted:d,open:f}=n,[g,x]=k.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[b,_]=k.useState(i);zS(b,i)||_(i);const[S,w]=k.useState(null),[M,E]=k.useState(null),T=k.useCallback(G=>{G!==B.current&&(B.current=G,w(G))},[]),C=k.useCallback(G=>{G!==F.current&&(F.current=G,E(G))},[]),D=s||S,P=r||M,B=k.useRef(null),F=k.useRef(null),j=k.useRef(g),O=d!=null,I=RM(d),W=RM(a),Q=RM(f),J=k.useCallback(()=>{if(!B.current||!F.current)return;const G={placement:e,strategy:t,middleware:b};W.current&&(G.platform=W.current),Zne(B.current,F.current,G).then(ee=>{const Y={...ee,isPositioned:Q.current!==!1};te.current&&!zS(j.current,Y)&&(j.current=Y,jg.flushSync(()=>{x(Y)}))})},[b,e,t,W,Q]);A_(()=>{f===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,x(G=>({...G,isPositioned:!1})))},[f]);const te=k.useRef(!1);A_(()=>(te.current=!0,()=>{te.current=!1}),[]),A_(()=>{if(D&&(B.current=D),P&&(F.current=P),D&&P){if(I.current)return I.current(D,P,J);J()}},[D,P,J,I,O]);const oe=k.useMemo(()=>({reference:B,floating:F,setReference:T,setFloating:C}),[T,C]),$=k.useMemo(()=>({reference:D,floating:P}),[D,P]),X=k.useMemo(()=>{const G={position:t,left:0,top:0};if(!$.floating)return G;const ee=DD($.floating,g.x),Y=DD($.floating,g.y);return l?{...G,transform:"translate("+ee+"px, "+Y+"px)",...vU($.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ee,top:Y}},[t,l,$.floating,g.x,g.y]);return k.useMemo(()=>({...g,update:J,refs:oe,elements:$,floatingStyles:X}),[g,J,oe,$,X])}const eie=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:a}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?RD({element:i.current,padding:a}).fn(t):{}:i?RD({element:i,padding:a}).fn(t):{}}}},tie=(n,e)=>({...Vne(n),options:[n,e]}),nie=(n,e)=>({...qne(n),options:[n,e]}),iie=(n,e)=>({...Kne(n),options:[n,e]}),aie=(n,e)=>({...Xne(n),options:[n,e]}),sie=(n,e)=>({...Yne(n),options:[n,e]}),rie=(n,e)=>({...Wne(n),options:[n,e]}),oie=(n,e)=>({...eie(n),options:[n,e]});var lie="Arrow",yU=k.forwardRef((n,e)=>{const{children:t,width:i=10,height:a=5,...s}=n;return c.jsx(ci.svg,{...s,ref:e,width:i,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});yU.displayName=lie;var cie=yU;function xU(n){const[e,t]=k.useState(void 0);return Jo(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const s=a[0];let r,l;if("borderBoxSize"in s){const d=s.borderBoxSize,f=Array.isArray(d)?d[0]:d;r=f.inlineSize,l=f.blockSize}else r=n.offsetWidth,l=n.offsetHeight;t({width:r,height:l})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}var XC="Popper",[bU,Yv]=xd(XC),[uie,_U]=bU(XC),SU=n=>{const{__scopePopper:e,children:t}=n,[i,a]=k.useState(null);return c.jsx(uie,{scope:e,anchor:i,onAnchorChange:a,children:t})};SU.displayName=XC;var EU="PopperAnchor",wU=k.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...a}=n,s=_U(EU,t),r=k.useRef(null),l=da(e,r);return k.useEffect(()=>{s.onAnchorChange(i?.current||r.current)}),i?null:c.jsx(ci.div,{...a,ref:l})});wU.displayName=EU;var YC="PopperContent",[die,hie]=bU(YC),MU=k.forwardRef((n,e)=>{const{__scopePopper:t,side:i="bottom",sideOffset:a=0,align:s="center",alignOffset:r=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:g=0,sticky:x="partial",hideWhenDetached:b=!1,updatePositionStrategy:_="optimized",onPlaced:S,...w}=n,M=_U(YC,t),[E,T]=k.useState(null),C=da(e,ae=>T(ae)),[D,P]=k.useState(null),B=xU(D),F=B?.width??0,j=B?.height??0,O=i+(s!=="center"?"-"+s:""),I=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},W=Array.isArray(f)?f:[f],Q=W.length>0,J={padding:I,boundary:W.filter(pie),altBoundary:Q},{refs:te,floatingStyles:oe,placement:$,isPositioned:X,middlewareData:G}=$ne({strategy:"fixed",placement:O,whileElementsMounted:(...ae)=>Gne(...ae,{animationFrame:_==="always"}),elements:{reference:M.anchor},middleware:[tie({mainAxis:a+j,alignmentAxis:r}),d&&nie({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?iie():void 0,...J}),d&&aie({...J}),sie({...J,apply:({elements:ae,rects:_e,availableWidth:Ke,availableHeight:Ge})=>{const{width:st,height:ft}=_e.reference,Pe=ae.floating.style;Pe.setProperty("--radix-popper-available-width",`${Ke}px`),Pe.setProperty("--radix-popper-available-height",`${Ge}px`),Pe.setProperty("--radix-popper-anchor-width",`${st}px`),Pe.setProperty("--radix-popper-anchor-height",`${ft}px`)}}),D&&oie({element:D,padding:l}),mie({arrowWidth:F,arrowHeight:j}),b&&rie({strategy:"referenceHidden",...J})]}),[ee,Y]=AU($),ne=Sh(S);Jo(()=>{X&&ne?.()},[X,ne]);const ue=G.arrow?.x,de=G.arrow?.y,ie=G.arrow?.centerOffset!==0,[Me,ye]=k.useState();return Jo(()=>{E&&ye(window.getComputedStyle(E).zIndex)},[E]),c.jsx("div",{ref:te.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:X?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[G.transformOrigin?.x,G.transformOrigin?.y].join(" "),...G.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:c.jsx(die,{scope:t,placedSide:ee,onArrowChange:P,arrowX:ue,arrowY:de,shouldHideArrow:ie,children:c.jsx(ci.div,{"data-side":ee,"data-align":Y,...w,ref:C,style:{...w.style,animation:X?void 0:"none"}})})})});MU.displayName=YC;var TU="PopperArrow",fie={top:"bottom",right:"left",bottom:"top",left:"right"},CU=k.forwardRef(function(e,t){const{__scopePopper:i,...a}=e,s=hie(TU,i),r=fie[s.placedSide];return c.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[r]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:c.jsx(cie,{...a,ref:t,style:{...a.style,display:"block"}})})});CU.displayName=TU;function pie(n){return n!==null}var mie=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:i,middlewareData:a}=e,r=a.arrow?.centerOffset!==0,l=r?0:n.arrowWidth,d=r?0:n.arrowHeight,[f,g]=AU(t),x={start:"0%",center:"50%",end:"100%"}[g],b=(a.arrow?.x??0)+l/2,_=(a.arrow?.y??0)+d/2;let S="",w="";return f==="bottom"?(S=r?x:`${b}px`,w=`${-d}px`):f==="top"?(S=r?x:`${b}px`,w=`${i.floating.height+d}px`):f==="right"?(S=`${-d}px`,w=r?x:`${_}px`):f==="left"&&(S=`${i.floating.width+d}px`,w=r?x:`${_}px`),{data:{x:S,y:w}}}});function AU(n){const[e,t="center"]=n.split("-");return[e,t]}var WC=SU,KC=wU,ZC=MU,QC=CU,gie="Portal",K2=k.forwardRef((n,e)=>{const{container:t,...i}=n,[a,s]=k.useState(!1);Jo(()=>s(!0),[]);const r=t||a&&globalThis?.document?.body;return r?Ote.createPortal(c.jsx(ci.div,{...i,ref:e}),r):null});K2.displayName=gie;function vie(n,e){return k.useReducer((t,i)=>e[t][i]??t,n)}var Ch=n=>{const{present:e,children:t}=n,i=yie(e),a=typeof t=="function"?t({present:i.isPresent}):k.Children.only(t),s=da(i.ref,xie(a));return typeof t=="function"||i.isPresent?k.cloneElement(a,{ref:s}):null};Ch.displayName="Presence";function yie(n){const[e,t]=k.useState(),i=k.useRef(null),a=k.useRef(n),s=k.useRef("none"),r=n?"mounted":"unmounted",[l,d]=vie(r,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const f=s_(i.current);s.current=l==="mounted"?f:"none"},[l]),Jo(()=>{const f=i.current,g=a.current;if(g!==n){const b=s.current,_=s_(f);n?d("MOUNT"):_==="none"||f?.display==="none"?d("UNMOUNT"):d(g&&b!==_?"ANIMATION_OUT":"UNMOUNT"),a.current=n}},[n,d]),Jo(()=>{if(e){let f;const g=e.ownerDocument.defaultView??window,x=_=>{const w=s_(i.current).includes(_.animationName);if(_.target===e&&w&&(d("ANIMATION_END"),!a.current)){const M=e.style.animationFillMode;e.style.animationFillMode="forwards",f=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=M)})}},b=_=>{_.target===e&&(s.current=s_(i.current))};return e.addEventListener("animationstart",b),e.addEventListener("animationcancel",x),e.addEventListener("animationend",x),()=>{g.clearTimeout(f),e.removeEventListener("animationstart",b),e.removeEventListener("animationcancel",x),e.removeEventListener("animationend",x)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:k.useCallback(f=>{i.current=f?getComputedStyle(f):null,t(f)},[])}}function s_(n){return n?.animationName||"none"}function xie(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var DM="rovingFocusGroup.onEntryFocus",bie={bubbles:!1,cancelable:!0},F1="RovingFocusGroup",[qT,NU,_ie]=zC(F1),[Sie,Z2]=xd(F1,[_ie]),[Eie,wie]=Sie(F1),RU=k.forwardRef((n,e)=>c.jsx(qT.Provider,{scope:n.__scopeRovingFocusGroup,children:c.jsx(qT.Slot,{scope:n.__scopeRovingFocusGroup,children:c.jsx(Mie,{...n,ref:e})})}));RU.displayName=F1;var Mie=k.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:i,loop:a=!1,dir:s,currentTabStopId:r,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:g=!1,...x}=n,b=k.useRef(null),_=da(e,b),S=V2(s),[w,M]=Kp({prop:r,defaultProp:l??null,onChange:d,caller:F1}),[E,T]=k.useState(!1),C=Sh(f),D=NU(t),P=k.useRef(!1),[B,F]=k.useState(0);return k.useEffect(()=>{const j=b.current;if(j)return j.addEventListener(DM,C),()=>j.removeEventListener(DM,C)},[C]),c.jsx(Eie,{scope:t,orientation:i,dir:S,loop:a,currentTabStopId:w,onItemFocus:k.useCallback(j=>M(j),[M]),onItemShiftTab:k.useCallback(()=>T(!0),[]),onFocusableItemAdd:k.useCallback(()=>F(j=>j+1),[]),onFocusableItemRemove:k.useCallback(()=>F(j=>j-1),[]),children:c.jsx(ci.div,{tabIndex:E||B===0?-1:0,"data-orientation":i,...x,ref:_,style:{outline:"none",...n.style},onMouseDown:nn(n.onMouseDown,()=>{P.current=!0}),onFocus:nn(n.onFocus,j=>{const O=!P.current;if(j.target===j.currentTarget&&O&&!E){const I=new CustomEvent(DM,bie);if(j.currentTarget.dispatchEvent(I),!I.defaultPrevented){const W=D().filter($=>$.focusable),Q=W.find($=>$.active),J=W.find($=>$.id===w),oe=[Q,J,...W].filter(Boolean).map($=>$.ref.current);jU(oe,g)}}P.current=!1}),onBlur:nn(n.onBlur,()=>T(!1))})})}),DU="RovingFocusGroupItem",OU=k.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:i=!0,active:a=!1,tabStopId:s,children:r,...l}=n,d=hd(),f=s||d,g=wie(DU,t),x=g.currentTabStopId===f,b=NU(t),{onFocusableItemAdd:_,onFocusableItemRemove:S,currentTabStopId:w}=g;return k.useEffect(()=>{if(i)return _(),()=>S()},[i,_,S]),c.jsx(qT.ItemSlot,{scope:t,id:f,focusable:i,active:a,children:c.jsx(ci.span,{tabIndex:x?0:-1,"data-orientation":g.orientation,...l,ref:e,onMouseDown:nn(n.onMouseDown,M=>{i?g.onItemFocus(f):M.preventDefault()}),onFocus:nn(n.onFocus,()=>g.onItemFocus(f)),onKeyDown:nn(n.onKeyDown,M=>{if(M.key==="Tab"&&M.shiftKey){g.onItemShiftTab();return}if(M.target!==M.currentTarget)return;const E=Aie(M,g.orientation,g.dir);if(E!==void 0){if(M.metaKey||M.ctrlKey||M.altKey||M.shiftKey)return;M.preventDefault();let C=b().filter(D=>D.focusable).map(D=>D.ref.current);if(E==="last")C.reverse();else if(E==="prev"||E==="next"){E==="prev"&&C.reverse();const D=C.indexOf(M.currentTarget);C=g.loop?Nie(C,D+1):C.slice(D+1)}setTimeout(()=>jU(C))}}),children:typeof r=="function"?r({isCurrentTabStop:x,hasTabStop:w!=null}):r})})});OU.displayName=DU;var Tie={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Cie(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function Aie(n,e,t){const i=Cie(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return Tie[i]}function jU(n,e=!1){const t=document.activeElement;for(const i of n)if(i===t||(i.focus({preventScroll:e}),document.activeElement!==t))return}function Nie(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var PU=RU,UU=OU,Rie=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Z0=new WeakMap,r_=new WeakMap,o_={},OM=0,LU=function(n){return n&&(n.host||LU(n.parentNode))},Die=function(n,e){return e.map(function(t){if(n.contains(t))return t;var i=LU(t);return i&&n.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},Oie=function(n,e,t,i){var a=Die(e,Array.isArray(n)?n:[n]);o_[t]||(o_[t]=new WeakMap);var s=o_[t],r=[],l=new Set,d=new Set(a),f=function(x){!x||l.has(x)||(l.add(x),f(x.parentNode))};a.forEach(f);var g=function(x){!x||d.has(x)||Array.prototype.forEach.call(x.children,function(b){if(l.has(b))g(b);else try{var _=b.getAttribute(i),S=_!==null&&_!=="false",w=(Z0.get(b)||0)+1,M=(s.get(b)||0)+1;Z0.set(b,w),s.set(b,M),r.push(b),w===1&&S&&r_.set(b,!0),M===1&&b.setAttribute(t,"true"),S||b.setAttribute(i,"true")}catch(E){console.error("aria-hidden: cannot operate on ",b,E)}})};return g(e),l.clear(),OM++,function(){r.forEach(function(x){var b=Z0.get(x)-1,_=s.get(x)-1;Z0.set(x,b),s.set(x,_),b||(r_.has(x)||x.removeAttribute(i),r_.delete(x)),_||x.removeAttribute(t)}),OM--,OM||(Z0=new WeakMap,Z0=new WeakMap,r_=new WeakMap,o_={})}},JC=function(n,e,t){t===void 0&&(t="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),a=Rie(n);return a?(i.push.apply(i,Array.from(a.querySelectorAll("[aria-live], script"))),Oie(i,a,t,"aria-hidden")):function(){return null}},oh=function(){return oh=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},oh.apply(this,arguments)};function zU(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function jie(n,e,t){if(t||arguments.length===2)for(var i=0,a=e.length,s;i<a;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}var N_="right-scroll-bar-position",R_="width-before-scroll-bar",Pie="with-scroll-bars-hidden",Uie="--removed-body-scroll-bar-size";function jM(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function Lie(n,e){var t=k.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var a=t.value;a!==i&&(t.value=i,t.callback(i,a))}}}})[0];return t.callback=e,t.facade}var zie=typeof window<"u"?k.useLayoutEffect:k.useEffect,OD=new WeakMap;function Iie(n,e){var t=Lie(null,function(i){return n.forEach(function(a){return jM(a,i)})});return zie(function(){var i=OD.get(t);if(i){var a=new Set(i),s=new Set(n),r=t.current;a.forEach(function(l){s.has(l)||jM(l,null)}),s.forEach(function(l){a.has(l)||jM(l,r)})}OD.set(t,n)},[n]),t}function Bie(n){return n}function Fie(n,e){e===void 0&&(e=Bie);var t=[],i=!1,a={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var r=e(s,i);return t.push(r),function(){t=t.filter(function(l){return l!==r})}},assignSyncMedium:function(s){for(i=!0;t.length;){var r=t;t=[],r.forEach(s)}t={push:function(l){return s(l)},filter:function(){return t}}},assignMedium:function(s){i=!0;var r=[];if(t.length){var l=t;t=[],l.forEach(s),r=t}var d=function(){var g=r;r=[],g.forEach(s)},f=function(){return Promise.resolve().then(d)};f(),t={push:function(g){r.push(g),f()},filter:function(g){return r=r.filter(g),t}}}};return a}function kie(n){n===void 0&&(n={});var e=Fie(null);return e.options=oh({async:!0,ssr:!1},n),e}var IU=function(n){var e=n.sideCar,t=zU(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return k.createElement(i,oh({},t))};IU.isSideCarExport=!0;function Hie(n,e){return n.useMedium(e),IU}var BU=kie(),PM=function(){},Q2=k.forwardRef(function(n,e){var t=k.useRef(null),i=k.useState({onScrollCapture:PM,onWheelCapture:PM,onTouchMoveCapture:PM}),a=i[0],s=i[1],r=n.forwardProps,l=n.children,d=n.className,f=n.removeScrollBar,g=n.enabled,x=n.shards,b=n.sideCar,_=n.noRelative,S=n.noIsolation,w=n.inert,M=n.allowPinchZoom,E=n.as,T=E===void 0?"div":E,C=n.gapMode,D=zU(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=b,B=Iie([t,e]),F=oh(oh({},D),a);return k.createElement(k.Fragment,null,g&&k.createElement(P,{sideCar:BU,removeScrollBar:f,shards:x,noRelative:_,noIsolation:S,inert:w,setCallbacks:s,allowPinchZoom:!!M,lockRef:t,gapMode:C}),r?k.cloneElement(k.Children.only(l),oh(oh({},F),{ref:B})):k.createElement(T,oh({},F,{className:d,ref:B}),l))});Q2.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Q2.classNames={fullWidth:R_,zeroRight:N_};var Gie=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Vie(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=Gie();return e&&n.setAttribute("nonce",e),n}function qie(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function Xie(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var Yie=function(){var n=0,e=null;return{add:function(t){n==0&&(e=Vie())&&(qie(e,t),Xie(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Wie=function(){var n=Yie();return function(e,t){k.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},FU=function(){var n=Wie(),e=function(t){var i=t.styles,a=t.dynamic;return n(i,a),null};return e},Kie={left:0,top:0,right:0,gap:0},UM=function(n){return parseInt(n||"",10)||0},Zie=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],i=e[n==="padding"?"paddingTop":"marginTop"],a=e[n==="padding"?"paddingRight":"marginRight"];return[UM(t),UM(i),UM(a)]},Qie=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Kie;var e=Zie(n),t=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-t+e[2]-e[0])}},Jie=FU(),hv="data-scroll-locked",$ie=function(n,e,t,i){var a=n.left,s=n.top,r=n.right,l=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(Pie,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(l,"px ").concat(i,`;
  }
  body[`).concat(hv,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),t==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(r,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(i,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(N_,` {
    right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(R_,` {
    margin-right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(N_," .").concat(N_,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(R_," .").concat(R_,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(hv,`] {
    `).concat(Uie,": ").concat(l,`px;
  }
`)},jD=function(){var n=parseInt(document.body.getAttribute(hv)||"0",10);return isFinite(n)?n:0},eae=function(){k.useEffect(function(){return document.body.setAttribute(hv,(jD()+1).toString()),function(){var n=jD()-1;n<=0?document.body.removeAttribute(hv):document.body.setAttribute(hv,n.toString())}},[])},tae=function(n){var e=n.noRelative,t=n.noImportant,i=n.gapMode,a=i===void 0?"margin":i;eae();var s=k.useMemo(function(){return Qie(a)},[a]);return k.createElement(Jie,{styles:$ie(s,!e,a,t?"":"!important")})},XT=!1;if(typeof window<"u")try{var l_=Object.defineProperty({},"passive",{get:function(){return XT=!0,!0}});window.addEventListener("test",l_,l_),window.removeEventListener("test",l_,l_)}catch{XT=!1}var Q0=XT?{passive:!1}:!1,nae=function(n){return n.tagName==="TEXTAREA"},kU=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!nae(n)&&t[e]==="visible")},iae=function(n){return kU(n,"overflowY")},aae=function(n){return kU(n,"overflowX")},PD=function(n,e){var t=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var a=HU(n,i);if(a){var s=GU(n,i),r=s[1],l=s[2];if(r>l)return!0}i=i.parentNode}while(i&&i!==t.body);return!1},sae=function(n){var e=n.scrollTop,t=n.scrollHeight,i=n.clientHeight;return[e,t,i]},rae=function(n){var e=n.scrollLeft,t=n.scrollWidth,i=n.clientWidth;return[e,t,i]},HU=function(n,e){return n==="v"?iae(e):aae(e)},GU=function(n,e){return n==="v"?sae(e):rae(e)},oae=function(n,e){return n==="h"&&e==="rtl"?-1:1},lae=function(n,e,t,i,a){var s=oae(n,window.getComputedStyle(e).direction),r=s*i,l=t.target,d=e.contains(l),f=!1,g=r>0,x=0,b=0;do{if(!l)break;var _=GU(n,l),S=_[0],w=_[1],M=_[2],E=w-M-s*S;(S||E)&&HU(n,l)&&(x+=E,b+=S);var T=l.parentNode;l=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!d&&l!==document.body||d&&(e.contains(l)||e===l));return(g&&Math.abs(x)<1||!g&&Math.abs(b)<1)&&(f=!0),f},c_=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},UD=function(n){return[n.deltaX,n.deltaY]},LD=function(n){return n&&"current"in n?n.current:n},cae=function(n,e){return n[0]===e[0]&&n[1]===e[1]},uae=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},dae=0,J0=[];function hae(n){var e=k.useRef([]),t=k.useRef([0,0]),i=k.useRef(),a=k.useState(dae++)[0],s=k.useState(FU)[0],r=k.useRef(n);k.useEffect(function(){r.current=n},[n]),k.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(a));var w=jie([n.lockRef.current],(n.shards||[]).map(LD),!0).filter(Boolean);return w.forEach(function(M){return M.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),w.forEach(function(M){return M.classList.remove("allow-interactivity-".concat(a))})}}},[n.inert,n.lockRef.current,n.shards]);var l=k.useCallback(function(w,M){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!r.current.allowPinchZoom;var E=c_(w),T=t.current,C="deltaX"in w?w.deltaX:T[0]-E[0],D="deltaY"in w?w.deltaY:T[1]-E[1],P,B=w.target,F=Math.abs(C)>Math.abs(D)?"h":"v";if("touches"in w&&F==="h"&&B.type==="range")return!1;var j=PD(F,B);if(!j)return!0;if(j?P=F:(P=F==="v"?"h":"v",j=PD(F,B)),!j)return!1;if(!i.current&&"changedTouches"in w&&(C||D)&&(i.current=P),!P)return!0;var O=i.current||P;return lae(O,M,w,O==="h"?C:D)},[]),d=k.useCallback(function(w){var M=w;if(!(!J0.length||J0[J0.length-1]!==s)){var E="deltaY"in M?UD(M):c_(M),T=e.current.filter(function(P){return P.name===M.type&&(P.target===M.target||M.target===P.shadowParent)&&cae(P.delta,E)})[0];if(T&&T.should){M.cancelable&&M.preventDefault();return}if(!T){var C=(r.current.shards||[]).map(LD).filter(Boolean).filter(function(P){return P.contains(M.target)}),D=C.length>0?l(M,C[0]):!r.current.noIsolation;D&&M.cancelable&&M.preventDefault()}}},[]),f=k.useCallback(function(w,M,E,T){var C={name:w,delta:M,target:E,should:T,shadowParent:fae(E)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(D){return D!==C})},1)},[]),g=k.useCallback(function(w){t.current=c_(w),i.current=void 0},[]),x=k.useCallback(function(w){f(w.type,UD(w),w.target,l(w,n.lockRef.current))},[]),b=k.useCallback(function(w){f(w.type,c_(w),w.target,l(w,n.lockRef.current))},[]);k.useEffect(function(){return J0.push(s),n.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:b}),document.addEventListener("wheel",d,Q0),document.addEventListener("touchmove",d,Q0),document.addEventListener("touchstart",g,Q0),function(){J0=J0.filter(function(w){return w!==s}),document.removeEventListener("wheel",d,Q0),document.removeEventListener("touchmove",d,Q0),document.removeEventListener("touchstart",g,Q0)}},[]);var _=n.removeScrollBar,S=n.inert;return k.createElement(k.Fragment,null,S?k.createElement(s,{styles:uae(a)}):null,_?k.createElement(tae,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function fae(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const pae=Hie(BU,hae);var J2=k.forwardRef(function(n,e){return k.createElement(Q2,oh({},n,{ref:e,sideCar:pae}))});J2.classNames=Q2.classNames;var YT=["Enter"," "],mae=["ArrowDown","PageUp","Home"],VU=["ArrowUp","PageDown","End"],gae=[...mae,...VU],vae={ltr:[...YT,"ArrowRight"],rtl:[...YT,"ArrowLeft"]},yae={ltr:["ArrowLeft"],rtl:["ArrowRight"]},k1="Menu",[m1,xae,bae]=zC(k1),[Pg,qU]=xd(k1,[bae,Yv,Z2]),$2=Yv(),XU=Z2(),[_ae,Ug]=Pg(k1),[Sae,H1]=Pg(k1),YU=n=>{const{__scopeMenu:e,open:t=!1,children:i,dir:a,onOpenChange:s,modal:r=!0}=n,l=$2(e),[d,f]=k.useState(null),g=k.useRef(!1),x=Sh(s),b=V2(a);return k.useEffect(()=>{const _=()=>{g.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>g.current=!1;return document.addEventListener("keydown",_,{capture:!0}),()=>{document.removeEventListener("keydown",_,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),c.jsx(WC,{...l,children:c.jsx(_ae,{scope:e,open:t,onOpenChange:x,content:d,onContentChange:f,children:c.jsx(Sae,{scope:e,onClose:k.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:g,dir:b,modal:r,children:i})})})};YU.displayName=k1;var Eae="MenuAnchor",$C=k.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n,a=$2(t);return c.jsx(KC,{...a,...i,ref:e})});$C.displayName=Eae;var eA="MenuPortal",[wae,WU]=Pg(eA,{forceMount:void 0}),KU=n=>{const{__scopeMenu:e,forceMount:t,children:i,container:a}=n,s=Ug(eA,e);return c.jsx(wae,{scope:e,forceMount:t,children:c.jsx(Ch,{present:t||s.open,children:c.jsx(K2,{asChild:!0,container:a,children:i})})})};KU.displayName=eA;var yu="MenuContent",[Mae,tA]=Pg(yu),ZU=k.forwardRef((n,e)=>{const t=WU(yu,n.__scopeMenu),{forceMount:i=t.forceMount,...a}=n,s=Ug(yu,n.__scopeMenu),r=H1(yu,n.__scopeMenu);return c.jsx(m1.Provider,{scope:n.__scopeMenu,children:c.jsx(Ch,{present:i||s.open,children:c.jsx(m1.Slot,{scope:n.__scopeMenu,children:r.modal?c.jsx(Tae,{...a,ref:e}):c.jsx(Cae,{...a,ref:e})})})})}),Tae=k.forwardRef((n,e)=>{const t=Ug(yu,n.__scopeMenu),i=k.useRef(null),a=da(e,i);return k.useEffect(()=>{const s=i.current;if(s)return JC(s)},[]),c.jsx(nA,{...n,ref:a,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:nn(n.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),Cae=k.forwardRef((n,e)=>{const t=Ug(yu,n.__scopeMenu);return c.jsx(nA,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),Aae=bg("MenuContent.ScrollLock"),nA=k.forwardRef((n,e)=>{const{__scopeMenu:t,loop:i=!1,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:r,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:f,onPointerDownOutside:g,onFocusOutside:x,onInteractOutside:b,onDismiss:_,disableOutsideScroll:S,...w}=n,M=Ug(yu,t),E=H1(yu,t),T=$2(t),C=XU(t),D=xae(t),[P,B]=k.useState(null),F=k.useRef(null),j=da(e,F,M.onContentChange),O=k.useRef(0),I=k.useRef(""),W=k.useRef(0),Q=k.useRef(null),J=k.useRef("right"),te=k.useRef(0),oe=S?J2:k.Fragment,$=S?{as:Aae,allowPinchZoom:!0}:void 0,X=ee=>{const Y=I.current+ee,ne=D().filter(ae=>!ae.disabled),ue=document.activeElement,de=ne.find(ae=>ae.ref.current===ue)?.textValue,ie=ne.map(ae=>ae.textValue),Me=Fae(ie,Y,de),ye=ne.find(ae=>ae.textValue===Me)?.ref.current;(function ae(_e){I.current=_e,window.clearTimeout(O.current),_e!==""&&(O.current=window.setTimeout(()=>ae(""),1e3))})(Y),ye&&setTimeout(()=>ye.focus())};k.useEffect(()=>()=>window.clearTimeout(O.current),[]),IC();const G=k.useCallback(ee=>J.current===Q.current?.side&&Hae(ee,Q.current?.area),[]);return c.jsx(Mae,{scope:t,searchRef:I,onItemEnter:k.useCallback(ee=>{G(ee)&&ee.preventDefault()},[G]),onItemLeave:k.useCallback(ee=>{G(ee)||(F.current?.focus(),B(null))},[G]),onTriggerLeave:k.useCallback(ee=>{G(ee)&&ee.preventDefault()},[G]),pointerGraceTimerRef:W,onPointerGraceIntentChange:k.useCallback(ee=>{Q.current=ee},[]),children:c.jsx(oe,{...$,children:c.jsx(q2,{asChild:!0,trapped:a,onMountAutoFocus:nn(s,ee=>{ee.preventDefault(),F.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:r,children:c.jsx(I1,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:f,onPointerDownOutside:g,onFocusOutside:x,onInteractOutside:b,onDismiss:_,children:c.jsx(PU,{asChild:!0,...C,dir:E.dir,orientation:"vertical",loop:i,currentTabStopId:P,onCurrentTabStopIdChange:B,onEntryFocus:nn(d,ee=>{E.isUsingKeyboardRef.current||ee.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(ZC,{role:"menu","aria-orientation":"vertical","data-state":h7(M.open),"data-radix-menu-content":"",dir:E.dir,...T,...w,ref:j,style:{outline:"none",...w.style},onKeyDown:nn(w.onKeyDown,ee=>{const ne=ee.target.closest("[data-radix-menu-content]")===ee.currentTarget,ue=ee.ctrlKey||ee.altKey||ee.metaKey,de=ee.key.length===1;ne&&(ee.key==="Tab"&&ee.preventDefault(),!ue&&de&&X(ee.key));const ie=F.current;if(ee.target!==ie||!gae.includes(ee.key))return;ee.preventDefault();const ye=D().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);VU.includes(ee.key)&&ye.reverse(),Iae(ye)}),onBlur:nn(n.onBlur,ee=>{ee.currentTarget.contains(ee.target)||(window.clearTimeout(O.current),I.current="")}),onPointerMove:nn(n.onPointerMove,g1(ee=>{const Y=ee.target,ne=te.current!==ee.clientX;if(ee.currentTarget.contains(Y)&&ne){const ue=ee.clientX>te.current?"right":"left";J.current=ue,te.current=ee.clientX}}))})})})})})})});ZU.displayName=yu;var Nae="MenuGroup",iA=k.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return c.jsx(ci.div,{role:"group",...i,ref:e})});iA.displayName=Nae;var Rae="MenuLabel",QU=k.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return c.jsx(ci.div,{...i,ref:e})});QU.displayName=Rae;var IS="MenuItem",zD="menu.itemSelect",eE=k.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:i,...a}=n,s=k.useRef(null),r=H1(IS,n.__scopeMenu),l=tA(IS,n.__scopeMenu),d=da(e,s),f=k.useRef(!1),g=()=>{const x=s.current;if(!t&&x){const b=new CustomEvent(zD,{bubbles:!0,cancelable:!0});x.addEventListener(zD,_=>i?.(_),{once:!0}),iU(x,b),b.defaultPrevented?f.current=!1:r.onClose()}};return c.jsx(JU,{...a,ref:d,disabled:t,onClick:nn(n.onClick,g),onPointerDown:x=>{n.onPointerDown?.(x),f.current=!0},onPointerUp:nn(n.onPointerUp,x=>{f.current||x.currentTarget?.click()}),onKeyDown:nn(n.onKeyDown,x=>{const b=l.searchRef.current!=="";t||b&&x.key===" "||YT.includes(x.key)&&(x.currentTarget.click(),x.preventDefault())})})});eE.displayName=IS;var JU=k.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:i=!1,textValue:a,...s}=n,r=tA(IS,t),l=XU(t),d=k.useRef(null),f=da(e,d),[g,x]=k.useState(!1),[b,_]=k.useState("");return k.useEffect(()=>{const S=d.current;S&&_((S.textContent??"").trim())},[s.children]),c.jsx(m1.ItemSlot,{scope:t,disabled:i,textValue:a??b,children:c.jsx(UU,{asChild:!0,...l,focusable:!i,children:c.jsx(ci.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:f,onPointerMove:nn(n.onPointerMove,g1(S=>{i?r.onItemLeave(S):(r.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:nn(n.onPointerLeave,g1(S=>r.onItemLeave(S))),onFocus:nn(n.onFocus,()=>x(!0)),onBlur:nn(n.onBlur,()=>x(!1))})})})}),Dae="MenuCheckboxItem",$U=k.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:i,...a}=n;return c.jsx(a7,{scope:n.__scopeMenu,checked:t,children:c.jsx(eE,{role:"menuitemcheckbox","aria-checked":BS(t)?"mixed":t,...a,ref:e,"data-state":sA(t),onSelect:nn(a.onSelect,()=>i?.(BS(t)?!0:!t),{checkForDefaultPrevented:!1})})})});$U.displayName=Dae;var e7="MenuRadioGroup",[Oae,jae]=Pg(e7,{value:void 0,onValueChange:()=>{}}),t7=k.forwardRef((n,e)=>{const{value:t,onValueChange:i,...a}=n,s=Sh(i);return c.jsx(Oae,{scope:n.__scopeMenu,value:t,onValueChange:s,children:c.jsx(iA,{...a,ref:e})})});t7.displayName=e7;var n7="MenuRadioItem",i7=k.forwardRef((n,e)=>{const{value:t,...i}=n,a=jae(n7,n.__scopeMenu),s=t===a.value;return c.jsx(a7,{scope:n.__scopeMenu,checked:s,children:c.jsx(eE,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":sA(s),onSelect:nn(i.onSelect,()=>a.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});i7.displayName=n7;var aA="MenuItemIndicator",[a7,Pae]=Pg(aA,{checked:!1}),s7=k.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:i,...a}=n,s=Pae(aA,t);return c.jsx(Ch,{present:i||BS(s.checked)||s.checked===!0,children:c.jsx(ci.span,{...a,ref:e,"data-state":sA(s.checked)})})});s7.displayName=aA;var Uae="MenuSeparator",r7=k.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return c.jsx(ci.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});r7.displayName=Uae;var Lae="MenuArrow",o7=k.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n,a=$2(t);return c.jsx(QC,{...a,...i,ref:e})});o7.displayName=Lae;var zae="MenuSub",[Yde,l7]=Pg(zae),Tx="MenuSubTrigger",c7=k.forwardRef((n,e)=>{const t=Ug(Tx,n.__scopeMenu),i=H1(Tx,n.__scopeMenu),a=l7(Tx,n.__scopeMenu),s=tA(Tx,n.__scopeMenu),r=k.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=s,f={__scopeMenu:n.__scopeMenu},g=k.useCallback(()=>{r.current&&window.clearTimeout(r.current),r.current=null},[]);return k.useEffect(()=>g,[g]),k.useEffect(()=>{const x=l.current;return()=>{window.clearTimeout(x),d(null)}},[l,d]),c.jsx($C,{asChild:!0,...f,children:c.jsx(JU,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":a.contentId,"data-state":h7(t.open),...n,ref:B2(e,a.onTriggerChange),onClick:x=>{n.onClick?.(x),!(n.disabled||x.defaultPrevented)&&(x.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:nn(n.onPointerMove,g1(x=>{s.onItemEnter(x),!x.defaultPrevented&&!n.disabled&&!t.open&&!r.current&&(s.onPointerGraceIntentChange(null),r.current=window.setTimeout(()=>{t.onOpenChange(!0),g()},100))})),onPointerLeave:nn(n.onPointerLeave,g1(x=>{g();const b=t.content?.getBoundingClientRect();if(b){const _=t.content?.dataset.side,S=_==="right",w=S?-5:5,M=b[S?"left":"right"],E=b[S?"right":"left"];s.onPointerGraceIntentChange({area:[{x:x.clientX+w,y:x.clientY},{x:M,y:b.top},{x:E,y:b.top},{x:E,y:b.bottom},{x:M,y:b.bottom}],side:_}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(x),x.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:nn(n.onKeyDown,x=>{const b=s.searchRef.current!=="";n.disabled||b&&x.key===" "||vae[i.dir].includes(x.key)&&(t.onOpenChange(!0),t.content?.focus(),x.preventDefault())})})})});c7.displayName=Tx;var u7="MenuSubContent",d7=k.forwardRef((n,e)=>{const t=WU(yu,n.__scopeMenu),{forceMount:i=t.forceMount,...a}=n,s=Ug(yu,n.__scopeMenu),r=H1(yu,n.__scopeMenu),l=l7(u7,n.__scopeMenu),d=k.useRef(null),f=da(e,d);return c.jsx(m1.Provider,{scope:n.__scopeMenu,children:c.jsx(Ch,{present:i||s.open,children:c.jsx(m1.Slot,{scope:n.__scopeMenu,children:c.jsx(nA,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:f,align:"start",side:r.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{r.isUsingKeyboardRef.current&&d.current?.focus(),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:nn(n.onFocusOutside,g=>{g.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:nn(n.onEscapeKeyDown,g=>{r.onClose(),g.preventDefault()}),onKeyDown:nn(n.onKeyDown,g=>{const x=g.currentTarget.contains(g.target),b=yae[r.dir].includes(g.key);x&&b&&(s.onOpenChange(!1),l.trigger?.focus(),g.preventDefault())})})})})})});d7.displayName=u7;function h7(n){return n?"open":"closed"}function BS(n){return n==="indeterminate"}function sA(n){return BS(n)?"indeterminate":n?"checked":"unchecked"}function Iae(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function Bae(n,e){return n.map((t,i)=>n[(e+i)%n.length])}function Fae(n,e,t){const a=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let r=Bae(n,Math.max(s,0));a.length===1&&(r=r.filter(f=>f!==t));const d=r.find(f=>f.toLowerCase().startsWith(a.toLowerCase()));return d!==t?d:void 0}function kae(n,e){const{x:t,y:i}=n;let a=!1;for(let s=0,r=e.length-1;s<e.length;r=s++){const l=e[s],d=e[r],f=l.x,g=l.y,x=d.x,b=d.y;g>i!=b>i&&t<(x-f)*(i-g)/(b-g)+f&&(a=!a)}return a}function Hae(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return kae(t,e)}function g1(n){return e=>e.pointerType==="mouse"?n(e):void 0}var Gae=YU,Vae=$C,qae=KU,Xae=ZU,Yae=iA,Wae=QU,Kae=eE,Zae=$U,Qae=t7,Jae=i7,$ae=s7,ese=r7,tse=o7,nse=c7,ise=d7,tE="DropdownMenu",[ase,Wde]=xd(tE,[qU]),wl=qU(),[sse,f7]=ase(tE),p7=n=>{const{__scopeDropdownMenu:e,children:t,dir:i,open:a,defaultOpen:s,onOpenChange:r,modal:l=!0}=n,d=wl(e),f=k.useRef(null),[g,x]=Kp({prop:a,defaultProp:s??!1,onChange:r,caller:tE});return c.jsx(sse,{scope:e,triggerId:hd(),triggerRef:f,contentId:hd(),open:g,onOpenChange:x,onOpenToggle:k.useCallback(()=>x(b=>!b),[x]),modal:l,children:c.jsx(Gae,{...d,open:g,onOpenChange:x,dir:i,modal:l,children:t})})};p7.displayName=tE;var m7="DropdownMenuTrigger",g7=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:i=!1,...a}=n,s=f7(m7,t),r=wl(t);return c.jsx(Vae,{asChild:!0,...r,children:c.jsx(ci.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...a,ref:B2(e,s.triggerRef),onPointerDown:nn(n.onPointerDown,l=>{!i&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:nn(n.onKeyDown,l=>{i||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});g7.displayName=m7;var rse="DropdownMenuPortal",v7=n=>{const{__scopeDropdownMenu:e,...t}=n,i=wl(e);return c.jsx(qae,{...i,...t})};v7.displayName=rse;var y7="DropdownMenuContent",x7=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=f7(y7,t),s=wl(t),r=k.useRef(!1);return c.jsx(Xae,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...i,ref:e,onCloseAutoFocus:nn(n.onCloseAutoFocus,l=>{r.current||a.triggerRef.current?.focus(),r.current=!1,l.preventDefault()}),onInteractOutside:nn(n.onInteractOutside,l=>{const d=l.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0,g=d.button===2||f;(!a.modal||g)&&(r.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});x7.displayName=y7;var ose="DropdownMenuGroup",lse=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=wl(t);return c.jsx(Yae,{...a,...i,ref:e})});lse.displayName=ose;var cse="DropdownMenuLabel",b7=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=wl(t);return c.jsx(Wae,{...a,...i,ref:e})});b7.displayName=cse;var use="DropdownMenuItem",_7=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=wl(t);return c.jsx(Kae,{...a,...i,ref:e})});_7.displayName=use;var dse="DropdownMenuCheckboxItem",S7=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=wl(t);return c.jsx(Zae,{...a,...i,ref:e})});S7.displayName=dse;var hse="DropdownMenuRadioGroup",fse=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=wl(t);return c.jsx(Qae,{...a,...i,ref:e})});fse.displayName=hse;var pse="DropdownMenuRadioItem",E7=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=wl(t);return c.jsx(Jae,{...a,...i,ref:e})});E7.displayName=pse;var mse="DropdownMenuItemIndicator",w7=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=wl(t);return c.jsx($ae,{...a,...i,ref:e})});w7.displayName=mse;var gse="DropdownMenuSeparator",M7=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=wl(t);return c.jsx(ese,{...a,...i,ref:e})});M7.displayName=gse;var vse="DropdownMenuArrow",yse=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=wl(t);return c.jsx(tse,{...a,...i,ref:e})});yse.displayName=vse;var xse="DropdownMenuSubTrigger",T7=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=wl(t);return c.jsx(nse,{...a,...i,ref:e})});T7.displayName=xse;var bse="DropdownMenuSubContent",C7=k.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,a=wl(t);return c.jsx(ise,{...a,...i,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});C7.displayName=bse;var _se=p7,Sse=g7,Ese=v7,A7=x7,N7=b7,R7=_7,D7=S7,O7=E7,j7=w7,P7=M7,U7=T7,L7=C7;const z7=_se,I7=Sse,wse=k.forwardRef(({className:n,inset:e,children:t,...i},a)=>c.jsxs(U7,{ref:a,className:fn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...i,children:[t,c.jsx(LP,{className:"ml-auto h-4 w-4"})]}));wse.displayName=U7.displayName;const Mse=k.forwardRef(({className:n,...e},t)=>c.jsx(L7,{ref:t,className:fn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));Mse.displayName=L7.displayName;const rA=k.forwardRef(({className:n,sideOffset:e=4,...t},i)=>c.jsx(Ese,{children:c.jsx(A7,{ref:i,sideOffset:e,className:fn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));rA.displayName=A7.displayName;const fv=k.forwardRef(({className:n,inset:e,...t},i)=>c.jsx(R7,{ref:i,className:fn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));fv.displayName=R7.displayName;const Tse=k.forwardRef(({className:n,children:e,checked:t,...i},a)=>c.jsxs(D7,{ref:a,className:fn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...i,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(j7,{children:c.jsx(PP,{className:"h-4 w-4"})})}),e]}));Tse.displayName=D7.displayName;const Cse=k.forwardRef(({className:n,children:e,...t},i)=>c.jsxs(O7,{ref:i,className:fn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(j7,{children:c.jsx(d$,{className:"h-2 w-2 fill-current"})})}),e]}));Cse.displayName=O7.displayName;const B7=k.forwardRef(({className:n,inset:e,...t},i)=>c.jsx(N7,{ref:i,className:fn("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));B7.displayName=N7.displayName;const WT=k.forwardRef(({className:n,...e},t)=>c.jsx(P7,{ref:t,className:fn("-mx-1 my-1 h-px bg-muted",n),...e}));WT.displayName=P7.displayName;var F7=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ase="VisuallyHidden",k7=k.forwardRef((n,e)=>c.jsx(ci.span,{...n,ref:e,style:{...F7,...n.style}}));k7.displayName=Ase;var Nse=k7,[nE,Kde]=xd("Tooltip",[Yv]),iE=Yv(),H7="TooltipProvider",Rse=700,KT="tooltip.open",[Dse,oA]=nE(H7),G7=n=>{const{__scopeTooltip:e,delayDuration:t=Rse,skipDelayDuration:i=300,disableHoverableContent:a=!1,children:s}=n,r=k.useRef(!0),l=k.useRef(!1),d=k.useRef(0);return k.useEffect(()=>{const f=d.current;return()=>window.clearTimeout(f)},[]),c.jsx(Dse,{scope:e,isOpenDelayedRef:r,delayDuration:t,onOpen:k.useCallback(()=>{window.clearTimeout(d.current),r.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>r.current=!0,i)},[i]),isPointerInTransitRef:l,onPointerInTransitChange:k.useCallback(f=>{l.current=f},[]),disableHoverableContent:a,children:s})};G7.displayName=H7;var v1="Tooltip",[Ose,aE]=nE(v1),V7=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:a,onOpenChange:s,disableHoverableContent:r,delayDuration:l}=n,d=oA(v1,n.__scopeTooltip),f=iE(e),[g,x]=k.useState(null),b=hd(),_=k.useRef(0),S=r??d.disableHoverableContent,w=l??d.delayDuration,M=k.useRef(!1),[E,T]=Kp({prop:i,defaultProp:a??!1,onChange:F=>{F?(d.onOpen(),document.dispatchEvent(new CustomEvent(KT))):d.onClose(),s?.(F)},caller:v1}),C=k.useMemo(()=>E?M.current?"delayed-open":"instant-open":"closed",[E]),D=k.useCallback(()=>{window.clearTimeout(_.current),_.current=0,M.current=!1,T(!0)},[T]),P=k.useCallback(()=>{window.clearTimeout(_.current),_.current=0,T(!1)},[T]),B=k.useCallback(()=>{window.clearTimeout(_.current),_.current=window.setTimeout(()=>{M.current=!0,T(!0),_.current=0},w)},[w,T]);return k.useEffect(()=>()=>{_.current&&(window.clearTimeout(_.current),_.current=0)},[]),c.jsx(WC,{...f,children:c.jsx(Ose,{scope:e,contentId:b,open:E,stateAttribute:C,trigger:g,onTriggerChange:x,onTriggerEnter:k.useCallback(()=>{d.isOpenDelayedRef.current?B():D()},[d.isOpenDelayedRef,B,D]),onTriggerLeave:k.useCallback(()=>{S?P():(window.clearTimeout(_.current),_.current=0)},[P,S]),onOpen:D,onClose:P,disableHoverableContent:S,children:t})})};V7.displayName=v1;var ZT="TooltipTrigger",q7=k.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,a=aE(ZT,t),s=oA(ZT,t),r=iE(t),l=k.useRef(null),d=da(e,l,a.onTriggerChange),f=k.useRef(!1),g=k.useRef(!1),x=k.useCallback(()=>f.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),c.jsx(KC,{asChild:!0,...r,children:c.jsx(ci.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...i,ref:d,onPointerMove:nn(n.onPointerMove,b=>{b.pointerType!=="touch"&&!g.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),g.current=!0)}),onPointerLeave:nn(n.onPointerLeave,()=>{a.onTriggerLeave(),g.current=!1}),onPointerDown:nn(n.onPointerDown,()=>{a.open&&a.onClose(),f.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:nn(n.onFocus,()=>{f.current||a.onOpen()}),onBlur:nn(n.onBlur,a.onClose),onClick:nn(n.onClick,a.onClose)})})});q7.displayName=ZT;var jse="TooltipPortal",[Zde,Pse]=nE(jse,{forceMount:void 0}),Dv="TooltipContent",X7=k.forwardRef((n,e)=>{const t=Pse(Dv,n.__scopeTooltip),{forceMount:i=t.forceMount,side:a="top",...s}=n,r=aE(Dv,n.__scopeTooltip);return c.jsx(Ch,{present:i||r.open,children:r.disableHoverableContent?c.jsx(Y7,{side:a,...s,ref:e}):c.jsx(Use,{side:a,...s,ref:e})})}),Use=k.forwardRef((n,e)=>{const t=aE(Dv,n.__scopeTooltip),i=oA(Dv,n.__scopeTooltip),a=k.useRef(null),s=da(e,a),[r,l]=k.useState(null),{trigger:d,onClose:f}=t,g=a.current,{onPointerInTransitChange:x}=i,b=k.useCallback(()=>{l(null),x(!1)},[x]),_=k.useCallback((S,w)=>{const M=S.currentTarget,E={x:S.clientX,y:S.clientY},T=Fse(E,M.getBoundingClientRect()),C=kse(E,T),D=Hse(w.getBoundingClientRect()),P=Vse([...C,...D]);l(P),x(!0)},[x]);return k.useEffect(()=>()=>b(),[b]),k.useEffect(()=>{if(d&&g){const S=M=>_(M,g),w=M=>_(M,d);return d.addEventListener("pointerleave",S),g.addEventListener("pointerleave",w),()=>{d.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",w)}}},[d,g,_,b]),k.useEffect(()=>{if(r){const S=w=>{const M=w.target,E={x:w.clientX,y:w.clientY},T=d?.contains(M)||g?.contains(M),C=!Gse(E,r);T?b():C&&(b(),f())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[d,g,r,f,b]),c.jsx(Y7,{...n,ref:s})}),[Lse,zse]=nE(v1,{isInside:!1}),Ise=nJ("TooltipContent"),Y7=k.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:r,...l}=n,d=aE(Dv,t),f=iE(t),{onClose:g}=d;return k.useEffect(()=>(document.addEventListener(KT,g),()=>document.removeEventListener(KT,g)),[g]),k.useEffect(()=>{if(d.trigger){const x=b=>{b.target?.contains(d.trigger)&&g()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[d.trigger,g]),c.jsx(I1,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:x=>x.preventDefault(),onDismiss:g,children:c.jsxs(ZC,{"data-state":d.stateAttribute,...f,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(Ise,{children:i}),c.jsx(Lse,{scope:t,isInside:!0,children:c.jsx(Nse,{id:d.contentId,role:"tooltip",children:a||i})})]})})});X7.displayName=Dv;var W7="TooltipArrow",Bse=k.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,a=iE(t);return zse(W7,t).isInside?null:c.jsx(QC,{...a,...i,ref:e})});Bse.displayName=W7;function Fse(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),a=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,i,a,s)){case s:return"left";case a:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function kse(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function Hse(n){const{top:e,right:t,bottom:i,left:a}=n;return[{x:a,y:e},{x:t,y:e},{x:t,y:i},{x:a,y:i}]}function Gse(n,e){const{x:t,y:i}=n;let a=!1;for(let s=0,r=e.length-1;s<e.length;r=s++){const l=e[s],d=e[r],f=l.x,g=l.y,x=d.x,b=d.y;g>i!=b>i&&t<(x-f)*(i-g)/(b-g)+f&&(a=!a)}return a}function Vse(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),qse(e)}function qse(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const a=n[i];for(;e.length>=2;){const s=e[e.length-1],r=e[e.length-2];if((s.x-r.x)*(a.y-r.y)>=(s.y-r.y)*(a.x-r.x))e.pop();else break}e.push(a)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const a=n[i];for(;t.length>=2;){const s=t[t.length-1],r=t[t.length-2];if((s.x-r.x)*(a.y-r.y)>=(s.y-r.y)*(a.x-r.x))t.pop();else break}t.push(a)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Xse=G7,Yse=V7,Wse=q7,K7=X7;const ID=Xse,wa=Yse,Ma=Wse,ma=k.forwardRef(({className:n,sideOffset:e=4,...t},i)=>c.jsx(K7,{ref:i,sideOffset:e,className:fn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));ma.displayName=K7.displayName;const Kse=({className:n})=>{const e=ti(s=>s.cameraView),t=ti(s=>s.setCameraView),i=[{id:"default",name:"Default View",icon:c.jsx(jP,{className:"h-4 w-4"})},{id:"top",name:"Top View",icon:c.jsx(zP,{className:"h-4 w-4"})},{id:"front",name:"Front View",icon:c.jsx(u1,{className:"h-4 w-4"})},{id:"side",name:"Side View",icon:c.jsx(u1,{className:"h-4 w-4 rotate-90"})},{id:"isometric",name:"Isometric",icon:c.jsx(dD,{className:"h-4 w-4"})},{id:"corner",name:"Corner View",icon:c.jsx(VP,{className:"h-4 w-4"})}],a=i.find(s=>s.id===e)||i[0];return c.jsx("div",{className:`flex ${n}`,children:c.jsxs(z7,{children:[c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(I7,{asChild:!0,children:c.jsxs(it,{variant:"outline",size:"sm",className:"gap-2",children:[a.icon,c.jsx("span",{className:"hidden sm:inline",children:a.name}),c.jsx(UP,{className:"h-3 w-3 opacity-50"})]})})}),c.jsx(ma,{children:"Camera Views"})]}),c.jsxs(rA,{align:"end",children:[c.jsx(B7,{children:"Camera Views"}),c.jsx(WT,{}),i.map(s=>c.jsxs(fv,{className:"flex items-center gap-2",onClick:()=>t(s.id),children:[s.icon,c.jsx("span",{children:s.name})]},s.id)),c.jsx(WT,{}),c.jsxs(fv,{onClick:()=>t("autoframe"),className:"flex items-center gap-2",children:[c.jsx(dD,{className:"h-4 w-4"}),c.jsx("span",{children:"Auto-frame Scene"})]})]})]})})},Zse=({wall:n})=>{if(!n.points||n.points.length<4)return null;const e=n.points[0]/50,t=n.points[1]/50,i=n.points[2]/50,a=n.points[3]/50,s=Math.sqrt(Math.pow(i-e,2)+Math.pow(a-t,2)),r=Math.atan2(a-t,i-e),l=(n.thickness||8)/50,d=2.5,f=(e+i)/2,g=(t+a)/2;return c.jsx(cP,{position:[f,d/2,g],args:[s,d,l],rotation:[0,r,0],children:c.jsx("meshStandardMaterial",{color:n.color||"#374151"})})},Qse=({room:n})=>{const e=n.x/50,t=n.y/50,i=n.width/50,a=n.height/50;return c.jsx(uP,{position:[e+i/2,.01,t+a/2],args:[i,a],rotation:[-Math.PI/2,0,0],children:c.jsx("meshStandardMaterial",{color:n.color||"rgba(59, 130, 246, 0.1)",transparent:!0,opacity:.3})})},Jse=({item:n})=>{const e=n.x/50,t=n.y/50,i=n.width/50,a=n.height/50,s=.8;return c.jsx(cP,{position:[e+i/2,s/2,t+a/2],args:[i,s,a],children:c.jsx("meshStandardMaterial",{color:n.color||"#8b5cf6"})})},$se=()=>{const{walls:n,rooms:e,furniture:t,lighting:i,cameraView:a}=ti();return c.jsxs(c.Fragment,{children:[c.jsx("ambientLight",{intensity:i.ambientLight}),c.jsx("directionalLight",{position:[10,10,5],intensity:i.mainLight}),c.jsx("pointLight",{position:[-10,10,-5],intensity:i.mainLight*.5}),c.jsx(uP,{position:[0,0,0],args:[50,50],rotation:[-Math.PI/2,0,0],children:c.jsx("meshStandardMaterial",{color:"#f5f5f5"})}),c.jsx(oP,{position:[0,.01,0],args:[50,50],cellSize:1,cellThickness:.5,cellColor:"#cccccc",sectionSize:5,sectionThickness:1,sectionColor:"#999999",fadeDistance:25,fadeStrength:1,infiniteGrid:!1}),n.map(s=>c.jsx(Zse,{wall:s},s.id)),e.map(s=>c.jsx(Qse,{room:s},s.id)),t.map(s=>c.jsx(Jse,{item:s},s.id)),c.jsx($Q,{cameraView:a,autoFrame:!0})]})},ere=()=>c.jsxs("div",{className:"w-full h-full relative bg-gray-100",children:[c.jsx(Zj,{camera:{position:[15,15,15],fov:50,near:.1,far:1e3},shadows:!0,children:c.jsx($se,{})}),c.jsxs("div",{className:"absolute top-4 left-4 bg-white p-2 rounded shadow text-sm",children:[c.jsx("div",{className:"font-semibold",children:"3D View"}),c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[c.jsx("div",{children:" Drag to rotate"}),c.jsx("div",{children:" Scroll to zoom"}),c.jsx("div",{children:" Right-click to pan"})]})]}),c.jsx("div",{className:"absolute top-4 right-4",children:c.jsx(Kse,{})})]}),Jt=k.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:fn("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Jt.displayName="Card";const In=k.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:fn("flex flex-col space-y-1.5 p-6",n),...e}));In.displayName="CardHeader";const Bn=k.forwardRef(({className:n,...e},t)=>c.jsx("h3",{ref:t,className:fn("text-2xl font-semibold leading-none tracking-tight",n),...e}));Bn.displayName="CardTitle";const D_=k.forwardRef(({className:n,...e},t)=>c.jsx("p",{ref:t,className:fn("text-sm text-muted-foreground",n),...e}));D_.displayName="CardDescription";const pn=k.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:fn("p-6 pt-0",n),...e}));pn.displayName="CardContent";const Z7=k.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:fn("flex items-center p-6 pt-0",n),...e}));Z7.displayName="CardFooter";const tre=CC("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function wn({className:n,variant:e,...t}){return c.jsx("div",{className:fn(tre({variant:e}),n),...t})}const lA=k.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:fn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));lA.displayName="Avatar";const cA=k.forwardRef(({className:n,...e},t)=>c.jsx("img",{ref:t,className:fn("aspect-square h-full w-full object-cover",n),...e}));cA.displayName="AvatarImage";const uA=k.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:fn("flex h-full w-full items-center justify-center rounded-full bg-gray-100 text-gray-600 text-sm font-medium",n),...e}));uA.displayName="AvatarFallback";const Ca=k.forwardRef(({className:n,children:e,...t},i)=>c.jsx("div",{ref:i,className:fn("overflow-auto",n),...t,children:e}));Ca.displayName="ScrollArea";const Ta=k.forwardRef(({className:n,type:e,...t},i)=>c.jsx("input",{type:e,className:fn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:i,...t}));Ta.displayName="Input";const js=k.forwardRef(({className:n,orientation:e="horizontal",...t},i)=>c.jsx("div",{ref:i,className:fn("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...t}));js.displayName="Separator";const BD=()=>{const{ws:n,isConnected:e,sendMessage:t}=ti(),[i,a]=k.useState(!1),[s,r]=k.useState("users"),[l,d]=k.useState([]),[f,g]=k.useState(""),[x,b]=k.useState(!0),[_]=k.useState([{id:"1",name:"John Designer",email:"john@example.com",role:"owner",status:"online",cursor:{x:150,y:200}},{id:"2",name:"Sarah Architect",email:"sarah@example.com",role:"editor",status:"online",cursor:{x:300,y:150}},{id:"3",name:"Mike Client",email:"mike@example.com",role:"viewer",status:"away",lastSeen:new Date(Date.now()-1e3*60*5)}]);k.useEffect(()=>{if(n&&e)return n.addEventListener("message",S),()=>{n.removeEventListener("message",S)}},[n,e]);const S=j=>{try{const O=JSON.parse(j.data);switch(O.type){case"collaboration_event":w(O);break;case"cursor_update":M(O);break;case"chat_message":E(O);break;case"floor_plan_update":T(O);break}}catch(O){console.error("Error parsing WebSocket message:",O)}},w=j=>{const O={id:`system_${Date.now()}`,userId:"system",userName:"System",message:`${j.userName} ${j.event_type} the collaboration`,timestamp:new Date,type:"system"};d(I=>[...I,O])},M=j=>{console.log("Cursor update:",j)},E=j=>{const O={id:j.id||`msg_${Date.now()}`,userId:j.userId,userName:j.userName,message:j.message,timestamp:new Date(j.timestamp),type:"message"};d(I=>[...I,O])},T=j=>{const O={id:`edit_${Date.now()}`,userId:j.user_id,userName:j.userName||"Someone",message:"made changes to the floor plan",timestamp:new Date,type:"edit"};d(I=>[...I,O])},C=()=>{if(!f.trim()||!t)return;const j={type:"chat_message",message:f,timestamp:new Date().toISOString()};t(j),g("")},D=()=>{console.log("Invite collaborator")},P=j=>{switch(j){case"owner":return c.jsx(BP,{className:"h-3 w-3"});case"editor":return c.jsx(kp,{className:"h-3 w-3"});case"viewer":return c.jsx(xl,{className:"h-3 w-3"});default:return null}},B=j=>{switch(j){case"owner":return"bg-yellow-100 text-yellow-800";case"editor":return"bg-blue-100 text-blue-800";case"viewer":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},F=j=>{switch(j){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"offline":return"bg-gray-400";default:return"bg-gray-400"}};return i?c.jsxs(Jt,{className:"fixed top-4 right-4 w-80 h-96 z-50 bg-white shadow-xl",children:[c.jsxs(In,{className:"pb-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Bn,{className:"text-sm font-semibold",children:"Collaboration"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>b(!x),className:"h-6 w-6 p-0",children:x?c.jsx(xl,{className:"h-3 w-3"}):c.jsx(Gv,{className:"h-3 w-3"})}),c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>a(!1),className:"h-6 w-6 p-0",children:""})]})]}),c.jsxs("div",{className:"flex space-x-1",children:[c.jsxs(it,{variant:s==="users"?"default":"ghost",size:"sm",onClick:()=>r("users"),className:"h-7 px-3 text-xs",children:[c.jsx(Bp,{className:"h-3 w-3 mr-1"}),"Users (",_.length,")"]}),c.jsxs(it,{variant:s==="chat"?"default":"ghost",size:"sm",onClick:()=>r("chat"),className:"h-7 px-3 text-xs",children:[c.jsx(YP,{className:"h-3 w-3 mr-1"}),"Chat"]})]})]}),c.jsxs(pn,{className:"p-3 pt-0",children:[s==="users"&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs(it,{onClick:D,variant:"outline",size:"sm",className:"w-full h-8 text-xs",children:[c.jsx(bte,{className:"h-3 w-3 mr-2"}),"Invite Collaborator"]}),c.jsx(Ca,{className:"h-64",children:c.jsx("div",{className:"space-y-2",children:_.map(j=>c.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded-lg border bg-gray-50",children:[c.jsxs("div",{className:"relative",children:[c.jsxs(lA,{className:"h-6 w-6",children:[c.jsx(cA,{src:j.avatar}),c.jsx(uA,{className:"text-xs",children:j.name.split(" ").map(O=>O[0]).join("")})]}),c.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 h-2 w-2 rounded-full border border-white ${F(j.status)}`})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("span",{className:"text-xs font-medium truncate",children:j.name}),c.jsxs(wn,{variant:"secondary",className:`h-4 px-1 text-xs ${B(j.role)}`,children:[P(j.role),c.jsx("span",{className:"ml-1",children:j.role})]})]}),c.jsx("div",{className:"text-xs text-gray-500 truncate",children:j.status==="online"?"Active now":j.lastSeen?`Last seen ${Math.round((Date.now()-j.lastSeen.getTime())/6e4)}m ago`:"Offline"})]})]},j.id))})})]}),s==="chat"&&c.jsxs("div",{className:"space-y-3",children:[c.jsx(Ca,{className:"h-52",children:c.jsxs("div",{className:"space-y-2",children:[l.map(j=>c.jsxs("div",{className:`p-2 rounded-lg text-xs ${j.type==="system"?"bg-blue-50 text-blue-700 text-center":j.type==="edit"?"bg-green-50 text-green-700":"bg-gray-50"}`,children:[j.type!=="system"&&c.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[c.jsx("span",{className:"font-medium",children:j.userName}),j.type==="edit"&&c.jsx(NC,{className:"h-3 w-3"}),c.jsx("span",{className:"text-gray-500",children:j.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),c.jsx("div",{children:j.message})]},j.id)),l.length===0&&c.jsx("div",{className:"text-center text-gray-500 text-xs py-8",children:"No messages yet. Start the conversation!"})]})}),c.jsx(js,{}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(Ta,{value:f,onChange:j=>g(j.target.value),placeholder:"Type a message...",className:"h-8 text-xs",onKeyPress:j=>j.key==="Enter"&&C()}),c.jsx(it,{onClick:C,size:"sm",className:"h-8 w-8 p-0",disabled:!f.trim(),children:c.jsx($P,{className:"h-3 w-3"})})]})]})]})]}):c.jsx("div",{className:"fixed top-4 right-4 z-50",children:c.jsxs(it,{onClick:()=>a(!0),variant:"outline",size:"sm",className:"bg-white shadow-lg",children:[c.jsx(Bp,{className:"h-4 w-4 mr-2"}),_.filter(j=>j.status==="online").length," Online"]})})},FD=({floorplanId:n,onCollaborationRequest:e})=>{const[t,i]=k.useState([]),[a,s]=k.useState(!1),[r,l]=k.useState(null),[d,f]=k.useState(null),{apiConfig:g}=ti();k.useEffect(()=>{x()},[n]);const x=async()=>{if(g?.baseUrl){s(!0),l(null);try{const S=await fetch(`${g.baseUrl}/api/floorplans/${n}/suggest_professionals/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!S.ok)throw new Error("Failed to load professional suggestions");const w=await S.json();i(w)}catch(S){l(S instanceof Error?S.message:"Unknown error")}finally{s(!1)}}},b=async S=>{if(g?.baseUrl){f(S);try{const w=await fetch(`${g.baseUrl}/api/floorplans/${n}/collaborate/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({professional_id:S})});if(!w.ok){const M=await w.json();throw new Error(M.error||"Failed to request collaboration")}e&&e(S),i(M=>M.map(E=>E.id===S?{...E,requested:!0}:E))}catch(w){alert(w instanceof Error?w.message:"Failed to send request")}finally{f(null)}}},_=(S,w)=>c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(UC,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),c.jsx("span",{className:"text-sm font-medium",children:S.toFixed(1)}),c.jsxs("span",{className:"text-sm text-gray-500",children:["(",w,")"]})]});return a?c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsxs(Bn,{className:"flex items-center gap-2",children:[c.jsx(Bp,{className:"h-5 w-5"}),"Professional Suggestions"]})}),c.jsx(pn,{children:c.jsx("div",{className:"text-center py-4",children:"Loading suggestions..."})})]}):r?c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsxs(Bn,{className:"flex items-center gap-2",children:[c.jsx(Bp,{className:"h-5 w-5"}),"Professional Suggestions"]})}),c.jsx(pn,{children:c.jsxs("div",{className:"text-center py-4 text-red-500",children:["Error: ",r,c.jsx(it,{variant:"outline",size:"sm",onClick:x,className:"ml-2",children:"Retry"})]})})]}):c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsxs(Bn,{className:"flex items-center gap-2",children:[c.jsx(Bp,{className:"h-5 w-5"}),"Professional Suggestions",c.jsx(wn,{variant:"secondary",children:t.length})]})}),c.jsx(pn,{className:"p-0",children:c.jsx(Ca,{className:"h-96",children:c.jsx("div",{className:"space-y-4 p-4",children:t.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(Bp,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No professional suggestions available"}),c.jsx("p",{className:"text-sm",children:"Try adding more details to your floorplan"})]}):t.map(S=>c.jsx(Jt,{className:"border",children:c.jsx(pn,{className:"p-4",children:c.jsxs("div",{className:"flex gap-3",children:[c.jsx(lA,{className:"h-12 w-12",children:S.profile_photo?c.jsx(cA,{src:S.profile_photo,alt:S.business_name}):c.jsx(uA,{children:S.business_name.split(" ").map(w=>w[0]).slice(0,2).join("")})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold text-sm leading-5",children:S.business_name}),c.jsxs("p",{className:"text-xs text-gray-600",children:["by ",S.user]})]}),S.is_verified&&c.jsx(wn,{variant:"secondary",className:"text-xs",children:"Verified"})]}),S.category&&c.jsx(wn,{variant:"outline",className:"text-xs mt-1",children:S.category}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[S.rating>0&&c.jsx("div",{className:"flex items-center gap-1",children:_(S.rating,S.review_count)}),S.city&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[c.jsx(hee,{className:"h-3 w-3"}),S.city,S.state&&`, ${S.state}`]})]}),S.short_bio&&c.jsx("p",{className:"text-xs text-gray-600 mt-2 line-clamp-2",children:S.short_bio}),c.jsx("div",{className:"flex gap-2 mt-3",children:c.jsxs(it,{size:"sm",onClick:()=>b(S.id),disabled:d===S.id,className:"text-xs",children:[c.jsx(YP,{className:"h-3 w-3 mr-1"}),d===S.id?"Requesting...":"Request Collaboration"]})})]})]})})},S.id))})})})]})},kD=({floorplanId:n})=>{const[e,t]=k.useState([]),[i,a]=k.useState(!0),[s,r]=k.useState(!1),[l,d]=k.useState(null);k.useEffect(()=>{a(!0),ua.get(`/api/floorplanner/media/?floorplan=${n}`).then(x=>t(x.data)).finally(()=>a(!1))},[n]);const f=async x=>{const b=x.target.files?.[0];if(!b)return;r(!0);const _=new FormData;_.append("file",b),_.append("original_filename",b.name),_.append("floorplan",String(n)),_.append("file_type",b.name.split(".").pop()||"");try{await ua.post("/api/floorplanner/media/",_);const S=await ua.get(`/api/floorplanner/media/?floorplan=${n}`);t(S.data)}finally{r(!1)}},g=async x=>{await ua.delete(`/api/floorplanner/media/${x}/`),t(b=>b.filter(_=>_.id!==x))};return c.jsxs(Jt,{className:"w-full max-w-md",children:[c.jsx(In,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Bn,{children:"Files"}),c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"file",accept:".dxf,.dwg,.pdf,.jpg,.jpeg,.png",className:"hidden",onChange:f,disabled:s}),c.jsxs(it,{size:"sm",variant:"outline",disabled:s,children:[c.jsx(h1,{className:"w-4 h-4 mr-1"}),"Upload"]})]})]})}),c.jsxs(pn,{children:[c.jsx(Ca,{className:"h-64",children:i?c.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((x,b)=>c.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded bg-gray-100 animate-pulse",children:[c.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded"}),c.jsx("div",{className:"flex-1 h-4 bg-gray-300 rounded"})]},b))}):c.jsx("div",{className:"space-y-1",children:e.map(x=>c.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-50",children:[c.jsxs("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center flex-1 min-w-0",children:[c.jsx(Sf,{className:"w-4 h-4 mr-2 flex-shrink-0"}),c.jsx("span",{className:"truncate text-sm",children:x.original_filename})]}),c.jsxs(z7,{children:[c.jsx(I7,{asChild:!0,children:c.jsx(it,{size:"sm",variant:"ghost",children:c.jsx(T$,{className:"w-4 h-4"})})}),c.jsxs(rA,{children:[c.jsxs(fv,{onClick:()=>d(x),children:[c.jsx(xl,{className:"w-4 h-4 mr-2"}),"Preview"]}),c.jsx(fv,{asChild:!0,children:c.jsxs("a",{href:x.url,download:!0,children:[c.jsx(Fp,{className:"w-4 h-4 mr-2"}),"Download"]})}),c.jsxs(fv,{onClick:()=>g(x.id),children:[c.jsx(Of,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]},x.id))})}),c.jsx(js,{className:"my-2"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Supported: .dxf, .dwg, .pdf, .jpg, .png"})]}),l&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs(Jt,{className:"w-96 h-96",children:[c.jsx(In,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(Bn,{className:"text-base",children:l.original_filename}),c.jsx(it,{size:"sm",variant:"ghost",onClick:()=>d(null),children:""})]})}),c.jsx(pn,{className:"flex-1",children:c.jsx("iframe",{src:l.url,title:"File Preview",className:"w-full h-full border rounded"})})]})})]})},HD=({onPlanSelect:n})=>{const[e,t]=k.useState([]),[i,a]=k.useState(!1),[s,r]=k.useState(null),[l,d]=k.useState(null),[f,g]=k.useState(null),[x,b]=k.useState(!1),{apiConfig:_}=ti();k.useEffect(()=>{S(),w()},[]);const S=async()=>{if(_?.baseUrl){a(!0),r(null);try{const D=await fetch(`${_.baseUrl}/api/floorplans/payment_plans/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!D.ok)throw new Error("Failed to load payment plans");const P=await D.json();t(P)}catch(D){r(D instanceof Error?D.message:"Unknown error")}finally{a(!1)}}},w=async()=>{if(_?.baseUrl)try{const D=await fetch(`${_.baseUrl}/api/floorplans/subscription_status/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(D.ok){const P=await D.json();g(P)}}catch(D){console.error("Failed to load subscription status:",D)}},M=async D=>{if(_?.baseUrl){if(D.price===0){n&&n(D);return}d(D.slug),b(!0);try{const P=await fetch(`${_.baseUrl}/api/floorplans/create_payment_order/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({plan_slug:D.slug})});if(!P.ok){const O=await P.json();throw new Error(O.error||"Failed to create payment order")}const B=await P.json(),F={key:"rzp_test_your_key_here",amount:B.amount,currency:B.currency,name:"HomeDecor FloorPlanner",description:B.plan_name,order_id:B.order_id,handler:async O=>{await E(B.payment_id,O)},prefill:{email:"user@example.com"},theme:{color:"#3B82F6"}};new window.Razorpay(F).open()}catch(P){alert(P instanceof Error?P.message:"Payment failed")}finally{b(!1),d(null)}}},E=async(D,P)=>{if(_?.baseUrl)try{const B=await fetch(`${_.baseUrl}/api/floorplans/verify_payment/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({payment_id:D,razorpay_payment_id:P.razorpay_payment_id,razorpay_signature:P.razorpay_signature})});if(B.ok){const F=await B.json();alert(`Payment successful! ${F.plan_name} activated.`),await w()}else{const F=await B.json();throw new Error(F.error||"Payment verification failed")}}catch(B){alert(B instanceof Error?B.message:"Payment verification failed")}},T=D=>{switch(D){case"basic":return c.jsx(Df,{className:"h-6 w-6 text-green-500"});case"premium":return c.jsx(BP,{className:"h-6 w-6 text-blue-500"});case"professional":return c.jsx(PC,{className:"h-6 w-6 text-purple-500"});default:return c.jsx(x$,{className:"h-6 w-6 text-gray-500"})}},C=D=>f?.plan_type===D;return i?c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{children:"Payment Plans"})}),c.jsx(pn,{children:c.jsx("div",{className:"text-center py-4",children:"Loading plans..."})})]}):s?c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{children:"Payment Plans"})}),c.jsx(pn,{children:c.jsxs("div",{className:"text-center py-4 text-red-500",children:["Error: ",s,c.jsx(it,{variant:"outline",size:"sm",onClick:S,className:"ml-2",children:"Retry"})]})})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose Your FloorPlanner Plan"}),f&&c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsxs(wn,{variant:"secondary",children:["Current: ",f.plan_name]}),f.expiry_date&&c.jsxs("span",{className:"text-sm text-gray-500",children:["Expires:"," ",new Date(f.expiry_date).toLocaleDateString()]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.map(D=>c.jsxs(Jt,{className:`relative transition-all duration-200 hover:shadow-lg ${C(D.plan_type)?"ring-2 ring-blue-500 shadow-lg":"hover:shadow-md"}`,children:[C(D.plan_type)&&c.jsx(wn,{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 bg-blue-500",children:"Current Plan"}),c.jsxs(In,{className:"text-center",children:[c.jsx("div",{className:"flex justify-center mb-2",children:T(D.plan_type)}),c.jsx(Bn,{className:"text-xl",children:D.name}),c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:D.price===0?"Free":c.jsxs(c.Fragment,{children:["",D.price,c.jsxs("span",{className:"text-base font-normal text-gray-500",children:["/",D.duration_days," days"]})]})})]}),c.jsxs(pn,{children:[c.jsx("ul",{className:"space-y-2 mb-6",children:D.features.map((P,B)=>c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx(Df,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),c.jsx("span",{className:"text-sm text-gray-600",children:P})]},B))}),c.jsx(it,{className:"w-full",variant:C(D.plan_type)?"secondary":"default",disabled:C(D.plan_type)||x||l===D.slug,onClick:()=>M(D),children:C(D.plan_type)?"Current Plan":l===D.slug?"Processing...":D.price===0?"Select Free Plan":"Upgrade Now"})]})]},D.id))}),f&&c.jsxs(Jt,{className:"mt-6",children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-lg",children:"Your Subscription"})}),c.jsx(pn,{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Current Plan"}),c.jsx("p",{className:"text-gray-600",children:f.plan_name})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Status"}),c.jsx(wn,{variant:f.is_active?"default":"secondary",children:f.is_active?"Active":"Inactive"})]})]})})]})]})},GD=({showPublicOnly:n=!1,showTemplatesOnly:e=!1,allowEdit:t=!1})=>{const[i,a]=k.useState([]),[s,r]=k.useState(!1),[l,d]=k.useState(null),[f,g]=k.useState(""),[x,b]=k.useState("grid"),[_,S]=k.useState("all"),{apiConfig:w}=ti();k.useEffect(()=>{M()},[_]);const M=async()=>{if(w?.baseUrl){r(!0),d(null);try{let O="/api/floorplans/";const I=new URLSearchParams;(n||_==="public")&&I.append("is_public","true"),(e||_==="templates")&&I.append("is_template","true"),I.toString()&&(O+=`?${I.toString()}`);const W=await fetch(`${w.baseUrl}${O}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!W.ok)throw new Error("Failed to load floorplans");const Q=await W.json();a(Q.results||Q)}catch(O){d(O instanceof Error?O.message:"Unknown error")}finally{r(!1)}}},E=async O=>{const I=`${window.location.origin}/floorplanner/gallery/${O.id}/`;if(navigator.share)try{await navigator.share({title:O.title,text:O.description,url:I})}catch{T(I)}else T(I)},T=O=>{navigator.clipboard.writeText(O).then(()=>{alert("Link copied to clipboard!")}).catch(()=>{const I=document.createElement("textarea");I.value=O,document.body.appendChild(I),I.select(),document.execCommand("copy"),document.body.removeChild(I),alert("Link copied to clipboard!")})},C=async O=>{console.log("Liking floorplan:",O.title),alert("Like feature coming soon!")},D=O=>{window.open(`/floorplanner/${O.id}/`,"_blank")},P=async O=>{console.log("Downloading floorplan:",O.title),alert("Download feature coming soon!")},B=i.filter(O=>O.title.toLowerCase().includes(f.toLowerCase())||O.description.toLowerCase().includes(f.toLowerCase())||O.user.toLowerCase().includes(f.toLowerCase())),F=O=>c.jsxs(Jt,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[c.jsxs("div",{className:"aspect-video bg-gray-100 relative",children:[O.thumbnail_url?c.jsx("img",{src:O.thumbnail_url,alt:O.title,className:"w-full h-full object-cover"}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:c.jsx(Mf,{className:"h-12 w-12"})}),c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center opacity-0 hover:opacity-100",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(it,{size:"sm",variant:"secondary",onClick:()=>D(O),children:c.jsx(xl,{className:"h-4 w-4"})}),c.jsx(it,{size:"sm",variant:"secondary",onClick:()=>E(O),children:c.jsx(fg,{className:"h-4 w-4"})}),c.jsx(it,{size:"sm",variant:"secondary",onClick:()=>P(O),children:c.jsx(Fp,{className:"h-4 w-4"})})]})})]}),c.jsxs(pn,{className:"p-4",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:O.title}),c.jsxs("div",{className:"flex gap-1",children:[O.is_public&&c.jsx(wn,{variant:"secondary",className:"text-xs",children:"Public"}),O.is_template&&c.jsx(wn,{variant:"outline",className:"text-xs",children:"Template"})]})]}),O.description&&c.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:O.description}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[c.jsxs("span",{children:["by ",O.user]}),c.jsx("span",{children:new Date(O.updated_at).toLocaleDateString()})]}),O.professional&&c.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["Professional: ",O.professional]}),c.jsxs("div",{className:"flex gap-2 mt-3",children:[c.jsxs(it,{size:"sm",variant:"outline",onClick:()=>C(O),className:"flex-1",children:[c.jsx(BT,{className:"h-3 w-3 mr-1"}),"Like"]}),c.jsxs(it,{size:"sm",variant:"outline",onClick:()=>D(O),className:"flex-1",children:[c.jsx(xl,{className:"h-3 w-3 mr-1"}),"View"]})]})]})]},O.id),j=O=>c.jsx(Jt,{className:"mb-3",children:c.jsx(pn,{className:"p-4",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded flex items-center justify-center flex-shrink-0",children:O.thumbnail_url?c.jsx("img",{src:O.thumbnail_url,alt:O.title,className:"w-full h-full object-cover rounded"}):c.jsx(Mf,{className:"h-8 w-8 text-gray-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between mb-1",children:[c.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:O.title}),c.jsxs("div",{className:"flex gap-1 ml-2",children:[O.is_public&&c.jsx(wn,{variant:"secondary",className:"text-xs",children:"Public"}),O.is_template&&c.jsx(wn,{variant:"outline",className:"text-xs",children:"Template"})]})]}),O.description&&c.jsx("p",{className:"text-sm text-gray-600 line-clamp-1 mb-2",children:O.description}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[c.jsxs("span",{children:["by ",O.user]}),c.jsx("span",{children:new Date(O.updated_at).toLocaleDateString()})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(it,{size:"sm",variant:"outline",onClick:()=>D(O),children:[c.jsx(xl,{className:"h-3 w-3 mr-1"}),"View"]}),c.jsxs(it,{size:"sm",variant:"outline",onClick:()=>E(O),children:[c.jsx(fg,{className:"h-3 w-3 mr-1"}),"Share"]}),c.jsxs(it,{size:"sm",variant:"outline",onClick:()=>C(O),children:[c.jsx(BT,{className:"h-3 w-3 mr-1"}),"Like"]})]})]})]})})},O.id);return s?c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{children:"Gallery"})}),c.jsx(pn,{children:c.jsx("div",{className:"text-center py-8",children:"Loading gallery..."})})]}):l?c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{children:"Gallery"})}),c.jsx(pn,{children:c.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error: ",l,c.jsx(it,{variant:"outline",size:"sm",onClick:M,className:"ml-2",children:"Retry"})]})})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"FloorPlan Gallery"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(it,{variant:x==="grid"?"default":"outline",size:"sm",onClick:()=>b("grid"),children:c.jsx(Mf,{className:"h-4 w-4"})}),c.jsx(it,{variant:x==="list"?"default":"outline",size:"sm",onClick:()=>b("list"),children:c.jsx(ree,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(H2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),c.jsx(Ta,{placeholder:"Search floorplans...",value:f,onChange:O=>g(O.target.value),className:"pl-10"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(it,{variant:_==="all"?"default":"outline",size:"sm",onClick:()=>S("all"),children:"All"}),c.jsxs(it,{variant:_==="public"?"default":"outline",size:"sm",onClick:()=>S("public"),children:[c.jsx(FP,{className:"h-3 w-3 mr-1"}),"Public"]}),c.jsx(it,{variant:_==="templates"?"default":"outline",size:"sm",onClick:()=>S("templates"),children:"Templates"})]})]}),c.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[B.length," floorplan",B.length!==1?"s":""," found"]}),c.jsx(Ca,{className:"h-96",children:B.length===0?c.jsxs("div",{className:"text-center py-12 text-gray-500",children:[c.jsx(Mf,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No floorplans found"}),c.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]}):x==="grid"?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(F)}):c.jsx("div",{children:B.map(j)})})]})},Q7=k.createContext({dragDropManager:void 0});function fu(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var VD=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),qD=function(){return Math.random().toString(36).substring(7).split("").join(".")},XD={INIT:"@@redux/INIT"+qD(),REPLACE:"@@redux/REPLACE"+qD()};function nre(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function J7(n,e,t){var i;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(fu(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(fu(1));return t(J7)(n,e)}if(typeof n!="function")throw new Error(fu(2));var a=n,s=e,r=[],l=r,d=!1;function f(){l===r&&(l=r.slice())}function g(){if(d)throw new Error(fu(3));return s}function x(w){if(typeof w!="function")throw new Error(fu(4));if(d)throw new Error(fu(5));var M=!0;return f(),l.push(w),function(){if(M){if(d)throw new Error(fu(6));M=!1,f();var T=l.indexOf(w);l.splice(T,1),r=null}}}function b(w){if(!nre(w))throw new Error(fu(7));if(typeof w.type>"u")throw new Error(fu(8));if(d)throw new Error(fu(9));try{d=!0,s=a(s,w)}finally{d=!1}for(var M=r=l,E=0;E<M.length;E++){var T=M[E];T()}return w}function _(w){if(typeof w!="function")throw new Error(fu(10));a=w,b({type:XD.REPLACE})}function S(){var w,M=x;return w={subscribe:function(T){if(typeof T!="object"||T===null)throw new Error(fu(11));function C(){T.next&&T.next(g())}C();var D=M(C);return{unsubscribe:D}}},w[VD]=function(){return this},w}return b({type:XD.INIT}),i={dispatch:b,subscribe:x,getState:g,replaceReducer:_},i[VD]=S,i}function li(n,e,...t){if(ire()&&e===void 0)throw new Error("invariant requires an error message argument");if(!n){let i;if(e===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;i=new Error(e.replace(/%s/g,function(){return t[a++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}function ire(){return typeof process<"u"&&!0}function are(n,e,t){return e.split(".").reduce((i,a)=>i&&i[a]?i[a]:t||null,n)}function sre(n,e){return n.filter(t=>t!==e)}function $7(n){return typeof n=="object"}function rre(n,e){const t=new Map,i=s=>{t.set(s,t.has(s)?t.get(s)+1:1)};n.forEach(i),e.forEach(i);const a=[];return t.forEach((s,r)=>{s===1&&a.push(r)}),a}function ore(n,e){return n.filter(t=>e.indexOf(t)>-1)}const dA="dnd-core/INIT_COORDS",sE="dnd-core/BEGIN_DRAG",hA="dnd-core/PUBLISH_DRAG_SOURCE",rE="dnd-core/HOVER",oE="dnd-core/DROP",lE="dnd-core/END_DRAG";function YD(n,e){return{type:dA,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}const lre={type:dA,payload:{clientOffset:null,sourceClientOffset:null}};function cre(n){return function(t=[],i={publishSource:!0}){const{publishSource:a=!0,clientOffset:s,getSourceClientOffset:r}=i,l=n.getMonitor(),d=n.getRegistry();n.dispatch(YD(s)),ure(t,l,d);const f=fre(t,l);if(f==null){n.dispatch(lre);return}let g=null;if(s){if(!r)throw new Error("getSourceClientOffset must be defined");dre(r),g=r(f)}n.dispatch(YD(s,g));const b=d.getSource(f).beginDrag(l,f);if(b==null)return;hre(b),d.pinSource(f);const _=d.getSourceType(f);return{type:sE,payload:{itemType:_,item:b,sourceId:f,clientOffset:s||null,sourceClientOffset:g||null,isSourcePublic:!!a}}}}function ure(n,e,t){li(!e.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(i){li(t.getSource(i),"Expected sourceIds to be registered.")})}function dre(n){li(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function hre(n){li($7(n),"Item must be an object.")}function fre(n,e){let t=null;for(let i=n.length-1;i>=0;i--)if(e.canDragSource(n[i])){t=n[i];break}return t}function pre(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){pre(n,a,t[a])})}return n}function gre(n){return function(t={}){const i=n.getMonitor(),a=n.getRegistry();vre(i),bre(i).forEach((r,l)=>{const d=yre(r,l,a,i),f={type:oE,payload:{dropResult:mre({},t,d)}};n.dispatch(f)})}}function vre(n){li(n.isDragging(),"Cannot call drop while not dragging."),li(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function yre(n,e,t,i){const a=t.getTarget(n);let s=a?a.drop(i,n):void 0;return xre(s),typeof s>"u"&&(s=e===0?{}:i.getDropResult()),s}function xre(n){li(typeof n>"u"||$7(n),"Drop result must either be an object or undefined.")}function bre(n){const e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function _re(n){return function(){const t=n.getMonitor(),i=n.getRegistry();Sre(t);const a=t.getSourceId();return a!=null&&(i.getSource(a,!0).endDrag(t,a),i.unpinSource()),{type:lE}}}function Sre(n){li(n.isDragging(),"Cannot call endDrag while not dragging.")}function QT(n,e){return e===null?n===null:Array.isArray(n)?n.some(t=>t===e):n===e}function Ere(n){return function(t,{clientOffset:i}={}){wre(t);const a=t.slice(0),s=n.getMonitor(),r=n.getRegistry(),l=s.getItemType();return Tre(a,r,l),Mre(a,s,r),Cre(a,s,r),{type:rE,payload:{targetIds:a,clientOffset:i||null}}}}function wre(n){li(Array.isArray(n),"Expected targetIds to be an array.")}function Mre(n,e,t){li(e.isDragging(),"Cannot call hover while not dragging."),li(!e.didDrop(),"Cannot call hover after drop.");for(let i=0;i<n.length;i++){const a=n[i];li(n.lastIndexOf(a)===i,"Expected targetIds to be unique in the passed array.");const s=t.getTarget(a);li(s,"Expected targetIds to be registered.")}}function Tre(n,e,t){for(let i=n.length-1;i>=0;i--){const a=n[i],s=e.getTargetType(a);QT(s,t)||n.splice(i,1)}}function Cre(n,e,t){n.forEach(function(i){t.getTarget(i).hover(e,i)})}function Are(n){return function(){if(n.getMonitor().isDragging())return{type:hA}}}function Nre(n){return{beginDrag:cre(n),publishDragSource:Are(n),hover:Ere(n),drop:gre(n),endDrag:_re(n)}}class Rre{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function i(s){return(...r)=>{const l=s.apply(e,r);typeof l<"u"&&t(l)}}const a=Nre(this);return Object.keys(a).reduce((s,r)=>{const l=a[r];return s[r]=i(l),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const i=this.store.getState().refCount>0;this.backend&&(i&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!i&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function Dre(n,e){return{x:n.x+e.x,y:n.y+e.y}}function e9(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Ore(n){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:i}=n;return!e||!t||!i?null:e9(Dre(e,i),t)}function jre(n){const{clientOffset:e,initialClientOffset:t}=n;return!e||!t?null:e9(e,t)}const kx=[],fA=[];kx.__IS_NONE__=!0;fA.__IS_ALL__=!0;function Pre(n,e){return n===kx?!1:n===fA||typeof e>"u"?!0:ore(e,n).length>0}class Ure{subscribeToStateChange(e,t={}){const{handlerIds:i}=t;li(typeof e=="function","listener must be a function."),li(typeof i>"u"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const s=()=>{const r=this.store.getState(),l=r.stateId;try{l===a||l===a+1&&!Pre(r.dirtyHandlerIds,i)||e()}finally{a=l}};return this.store.subscribe(s)}subscribeToOffsetChange(e){li(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const i=()=>{const a=this.store.getState().dragOffset;a!==t&&(t=a,e())};return this.store.subscribe(i)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return li(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(li(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();return QT(i,a)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(li(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const i=this.registry.getSourceType(e),a=this.getItemType();return i!==a?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:i}=t;if(!this.isDragging())return!1;const a=this.registry.getTargetType(e),s=this.getItemType();if(s&&!QT(a,s))return!1;const r=this.getTargetIds();if(!r.length)return!1;const l=r.indexOf(e);return i?l===r.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Ore(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return jre(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const WD=typeof global<"u"?global:self,t9=WD.MutationObserver||WD.WebKitMutationObserver;function n9(n){return function(){const t=setTimeout(a,0),i=setInterval(a,50);function a(){clearTimeout(t),clearInterval(i),n()}}}function Lre(n){let e=1;const t=new t9(n),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){e=-e,i.data=e}}const zre=typeof t9=="function"?Lre:n9;class Ire{enqueueTask(e){const{queue:t,requestFlush:i}=this;t.length||(i(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let i=0,a=e.length-this.index;i<a;i++)e[i]=e[i+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=zre(this.flush),this.requestErrorThrow=n9(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Bre{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class Fre{create(e){const t=this.freeTasks,i=t.length?t.pop():new Bre(this.onError,a=>t[t.length]=a);return i.task=e,i}constructor(e){this.onError=e,this.freeTasks=[]}}const i9=new Ire,kre=new Fre(i9.registerPendingError);function Hre(n){i9.enqueueTask(kre.create(n))}const pA="dnd-core/ADD_SOURCE",mA="dnd-core/ADD_TARGET",gA="dnd-core/REMOVE_SOURCE",cE="dnd-core/REMOVE_TARGET";function Gre(n){return{type:pA,payload:{sourceId:n}}}function Vre(n){return{type:mA,payload:{targetId:n}}}function qre(n){return{type:gA,payload:{sourceId:n}}}function Xre(n){return{type:cE,payload:{targetId:n}}}function Yre(n){li(typeof n.canDrag=="function","Expected canDrag to be a function."),li(typeof n.beginDrag=="function","Expected beginDrag to be a function."),li(typeof n.endDrag=="function","Expected endDrag to be a function.")}function Wre(n){li(typeof n.canDrop=="function","Expected canDrop to be a function."),li(typeof n.hover=="function","Expected hover to be a function."),li(typeof n.drop=="function","Expected beginDrag to be a function.")}function JT(n,e){if(e&&Array.isArray(n)){n.forEach(t=>JT(t,!1));return}li(typeof n=="string"||typeof n=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var mu;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(mu||(mu={}));let Kre=0;function Zre(){return Kre++}function Qre(n){const e=Zre().toString();switch(n){case mu.SOURCE:return`S${e}`;case mu.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function KD(n){switch(n[0]){case"S":return mu.SOURCE;case"T":return mu.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function ZD(n,e){const t=n.entries();let i=!1;do{const{done:a,value:[,s]}=t.next();if(s===e)return!0;i=!!a}while(!i);return!1}class Jre{addSource(e,t){JT(e),Yre(t);const i=this.addHandler(mu.SOURCE,e,t);return this.store.dispatch(Gre(i)),i}addTarget(e,t){JT(e,!0),Wre(t);const i=this.addHandler(mu.TARGET,e,t);return this.store.dispatch(Vre(i)),i}containsHandler(e){return ZD(this.dragSources,e)||ZD(this.dropTargets,e)}getSource(e,t=!1){return li(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return li(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return li(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return li(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return KD(e)===mu.SOURCE}isTargetId(e){return KD(e)===mu.TARGET}removeSource(e){li(this.getSource(e),"Expected an existing source."),this.store.dispatch(qre(e)),Hre(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){li(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Xre(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);li(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){li(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,i){const a=Qre(e);return this.types.set(a,t),e===mu.SOURCE?this.dragSources.set(a,i):e===mu.TARGET&&this.dropTargets.set(a,i),a}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const $re=(n,e)=>n===e;function eoe(n,e){return!n&&!e?!0:!n||!e?!1:n.x===e.x&&n.y===e.y}function toe(n,e,t=$re){if(n.length!==e.length)return!1;for(let i=0;i<n.length;++i)if(!t(n[i],e[i]))return!1;return!0}function noe(n=kx,e){switch(e.type){case rE:break;case pA:case mA:case cE:case gA:return kx;case sE:case hA:case lE:case oE:default:return fA}const{targetIds:t=[],prevTargetIds:i=[]}=e.payload,a=rre(t,i);if(!(a.length>0||!toe(t,i)))return kx;const r=i[i.length-1],l=t[t.length-1];return r!==l&&(r&&a.push(r),l&&a.push(l)),a}function ioe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aoe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){ioe(n,a,t[a])})}return n}const QD={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function soe(n=QD,e){const{payload:t}=e;switch(e.type){case dA:case sE:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case rE:return eoe(n.clientOffset,t.clientOffset)?n:aoe({},n,{clientOffset:t.clientOffset});case lE:case oE:return QD;default:return n}}function roe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){roe(n,a,t[a])})}return n}const ooe={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function loe(n=ooe,e){const{payload:t}=e;switch(e.type){case sE:return $0({},n,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case hA:return $0({},n,{isSourcePublic:!0});case rE:return $0({},n,{targetIds:t.targetIds});case cE:return n.targetIds.indexOf(t.targetId)===-1?n:$0({},n,{targetIds:sre(n.targetIds,t.targetId)});case oE:return $0({},n,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case lE:return $0({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function coe(n=0,e){switch(e.type){case pA:case mA:return n+1;case gA:case cE:return n-1;default:return n}}function uoe(n=0){return n+1}function doe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hoe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){doe(n,a,t[a])})}return n}function foe(n={},e){return{dirtyHandlerIds:noe(n.dirtyHandlerIds,{type:e.type,payload:hoe({},e.payload,{prevTargetIds:are(n,"dragOperation.targetIds",[])})}),dragOffset:soe(n.dragOffset,e),refCount:coe(n.refCount,e),dragOperation:loe(n.dragOperation,e),stateId:uoe(n.stateId)}}function poe(n,e=void 0,t={},i=!1){const a=moe(i),s=new Ure(a,new Jre(a)),r=new Rre(a,s),l=n(r,e,t);return r.receiveBackend(l),r}function moe(n){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return J7(foe,n&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function goe(n,e){if(n==null)return{};var t=voe(n,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function voe(n,e){if(n==null)return{};var t={},i=Object.keys(n),a,s;for(s=0;s<i.length;s++)a=i[s],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}let JD=0;const O_=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var yoe=k.memo(function(e){var{children:t}=e,i=goe(e,["children"]);const[a,s]=xoe(i);return k.useEffect(()=>{if(s){const r=a9();return++JD,()=>{--JD===0&&(r[O_]=null)}}},[]),c.jsx(Q7.Provider,{value:a,children:t})});function xoe(n){if("manager"in n)return[{dragDropManager:n.manager},!1];const e=boe(n.backend,n.context,n.options,n.debugMode),t=!n.context;return[e,t]}function boe(n,e=a9(),t,i){const a=e;return a[O_]||(a[O_]={dragDropManager:poe(n,e,t,i)}),a[O_]}function a9(){return typeof global<"u"?global:window}var LM,$D;function _oe(){return $D||($D=1,LM=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,a,s;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(a=i;a--!==0;)if(!n(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(a=i;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[a]))return!1;for(a=i;a--!==0;){var r=s[a];if(!n(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}),LM}var Soe=_oe();const Eoe=Uf(Soe),Mg=typeof window<"u"?k.useLayoutEffect:k.useEffect;function woe(n,e,t){const[i,a]=k.useState(()=>e(n)),s=k.useCallback(()=>{const r=e(n);Eoe(i,r)||(a(r),t&&t())},[i,n,t]);return Mg(s),[i,s]}function Moe(n,e,t){const[i,a]=woe(n,e,t);return Mg(function(){const r=n.getHandlerId();if(r!=null)return n.subscribeToStateChange(a,{handlerIds:[r]})},[n,a]),i}function s9(n,e,t){return Moe(e,n||(()=>({})),()=>t.reconnect())}function r9(n,e){const t=[];return typeof n!="function"&&t.push(n),k.useMemo(()=>typeof n=="function"?n():n,t)}function Toe(n){return k.useMemo(()=>n.hooks.dragSource(),[n])}function Coe(n){return k.useMemo(()=>n.hooks.dragPreview(),[n])}let zM=!1,IM=!1;class Aoe{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){li(!zM,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return zM=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{zM=!1}}isDragging(){if(!this.sourceId)return!1;li(!IM,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return IM=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{IM=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let BM=!1;class Noe{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;li(!BM,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return BM=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{BM=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Roe(n,e,t){const i=t.getRegistry(),a=i.addTarget(n,e);return[a,()=>i.removeTarget(a)]}function Doe(n,e,t){const i=t.getRegistry(),a=i.addSource(n,e);return[a,()=>i.removeSource(a)]}function $T(n,e,t,i){let a;if(a!==void 0)return!!a;if(n===e)return!0;if(typeof n!="object"||!n||typeof e!="object"||!e)return!1;const s=Object.keys(n),r=Object.keys(e);if(s.length!==r.length)return!1;const l=Object.prototype.hasOwnProperty.bind(e);for(let d=0;d<s.length;d++){const f=s[d];if(!l(f))return!1;const g=n[f],x=e[f];if(a=void 0,a===!1||a===void 0&&g!==x)return!1}return!0}function e3(n){return n!==null&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Ooe(n){if(typeof n.type=="string")return;const e=n.type.displayName||n.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function joe(n){return(e=null,t=null)=>{if(!k.isValidElement(e)){const s=e;return n(s,t),s}const i=e;return Ooe(i),Poe(i,t?s=>n(s,t):n)}}function o9(n){const e={};return Object.keys(n).forEach(t=>{const i=n[t];if(t.endsWith("Ref"))e[t]=n[t];else{const a=joe(i);e[t]=()=>a}}),e}function e6(n,e){typeof n=="function"?n(e):n.current=e}function Poe(n,e){const t=n.ref;return li(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?k.cloneElement(n,{ref:i=>{e6(t,i),e6(e,i)}}):k.cloneElement(n,{ref:e})}class Uoe{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,i=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(i&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}i&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!$T(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!$T(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=o9({dragSource:(t,i)=>{this.clearDragSource(),this.dragSourceOptions=i||null,e3(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,i)=>{this.clearDragPreview(),this.dragPreviewOptions=i||null,e3(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class Loe{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!$T(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=o9({dropTarget:(t,i)=>{this.clearDropTarget(),this.dropTargetOptions=i,e3(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Wv(){const{dragDropManager:n}=k.useContext(Q7);return li(n!=null,"Expected drag drop context"),n}function zoe(n,e){const t=Wv(),i=k.useMemo(()=>new Uoe(t.getBackend()),[t]);return Mg(()=>(i.dragSourceOptions=n||null,i.reconnect(),()=>i.disconnectDragSource()),[i,n]),Mg(()=>(i.dragPreviewOptions=e||null,i.reconnect(),()=>i.disconnectDragPreview()),[i,e]),i}function Ioe(){const n=Wv();return k.useMemo(()=>new Aoe(n),[n])}class Boe{beginDrag(){const e=this.spec,t=this.monitor;let i=null;return typeof e.item=="object"?i=e.item:typeof e.item=="function"?i=e.item(t):i={},i??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const i=this.spec,a=this.monitor,{isDragging:s}=i;return s?s(a):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,i=this.connector,{end:a}=e;a&&a(t.getItem(),t),i.reconnect()}constructor(e,t,i){this.spec=e,this.monitor=t,this.connector=i}}function Foe(n,e,t){const i=k.useMemo(()=>new Boe(n,e,t),[e,t]);return k.useEffect(()=>{i.spec=n},[n]),i}function koe(n){return k.useMemo(()=>{const e=n.type;return li(e!=null,"spec.type must be defined"),e},[n])}function Hoe(n,e,t){const i=Wv(),a=Foe(n,e,t),s=koe(n);Mg(function(){if(s!=null){const[l,d]=Doe(s,a,i);return e.receiveHandlerId(l),t.receiveHandlerId(l),d}},[i,e,t,a,s])}function l9(n,e){const t=r9(n);li(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const i=Ioe(),a=zoe(t.options,t.previewOptions);return Hoe(t,i,a),[s9(t.collect,i,a),Toe(a),Coe(a)]}function Goe(n){return k.useMemo(()=>n.hooks.dropTarget(),[n])}function Voe(n){const e=Wv(),t=k.useMemo(()=>new Loe(e.getBackend()),[e]);return Mg(()=>(t.dropTargetOptions=n||null,t.reconnect(),()=>t.disconnectDropTarget()),[n]),t}function qoe(){const n=Wv();return k.useMemo(()=>new Noe(n),[n])}function Xoe(n){const{accept:e}=n;return k.useMemo(()=>(li(n.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class Yoe{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function Woe(n,e){const t=k.useMemo(()=>new Yoe(n,e),[e]);return k.useEffect(()=>{t.spec=n},[n]),t}function Koe(n,e,t){const i=Wv(),a=Woe(n,e),s=Xoe(n);Mg(function(){const[l,d]=Roe(s,a,i);return e.receiveHandlerId(l),t.receiveHandlerId(l),d},[i,e,a,t,s.map(r=>r.toString()).join("|")])}function Zoe(n,e){const t=r9(n),i=qoe(),a=Voe(t.options);return Koe(t,i,a),[s9(t.collect,i,a),Goe(a)]}function c9(n){let e=null;return()=>(e==null&&(e=n()),e)}function Qoe(n,e){return n.filter(t=>t!==e)}function Joe(n,e){const t=new Set,i=s=>t.add(s);n.forEach(i),e.forEach(i);const a=[];return t.forEach(s=>a.push(s)),a}class $oe{enter(e){const t=this.entered.length,i=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(e));return this.entered=Joe(this.entered.filter(i),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=Qoe(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class ele{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(i=>{const a=this.config.exposeProperties[i];a!=null&&(t[i]={value:a(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const u9="__NATIVE_FILE__",d9="__NATIVE_URL__",h9="__NATIVE_TEXT__",f9="__NATIVE_HTML__",t6=Object.freeze(Object.defineProperty({__proto__:null,FILE:u9,HTML:f9,TEXT:h9,URL:d9},Symbol.toStringTag,{value:"Module"}));function FM(n,e,t){const i=e.reduce((a,s)=>a||n.getData(s),"");return i??t}const t3={[u9]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[f9]:{exposeProperties:{html:(n,e)=>FM(n,e,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[d9]:{exposeProperties:{urls:(n,e)=>FM(n,e,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[h9]:{exposeProperties:{text:(n,e)=>FM(n,e,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function tle(n,e){const t=t3[n];if(!t)throw new Error(`native type ${n} has no configuration`);const i=new ele(t);return i.loadDataTransfer(e),i}function kM(n){if(!n)return null;const e=Array.prototype.slice.call(n.types||[]);return Object.keys(t3).filter(t=>{const i=t3[t];return i?.matchesTypes?i.matchesTypes.some(a=>e.indexOf(a)>-1):!1})[0]||null}const nle=c9(()=>/firefox/i.test(navigator.userAgent)),p9=c9(()=>!!window.safari);class n6{interpolate(e){const{xs:t,ys:i,c1s:a,c2s:s,c3s:r}=this;let l=t.length-1;if(e===t[l])return i[l];let d=0,f=r.length-1,g;for(;d<=f;){g=Math.floor(.5*(d+f));const _=t[g];if(_<e)d=g+1;else if(_>e)f=g-1;else return i[g]}l=Math.max(0,f);const x=e-t[l],b=x*x;return i[l]+a[l]*x+s[l]*b+r[l]*x*b}constructor(e,t){const{length:i}=e,a=[];for(let _=0;_<i;_++)a.push(_);a.sort((_,S)=>e[_]<e[S]?-1:1);const s=[],r=[];let l,d;for(let _=0;_<i-1;_++)l=e[_+1]-e[_],d=t[_+1]-t[_],s.push(l),r.push(d/l);const f=[r[0]];for(let _=0;_<s.length-1;_++){const S=r[_],w=r[_+1];if(S*w<=0)f.push(0);else{l=s[_];const M=s[_+1],E=l+M;f.push(3*E/((E+M)/S+(E+l)/w))}}f.push(r[r.length-1]);const g=[],x=[];let b;for(let _=0;_<f.length-1;_++){b=r[_];const S=f[_],w=1/s[_],M=S+f[_+1]-b-b;g.push((b-S-M)*w),x.push(M*w*w)}this.xs=e,this.ys=t,this.c1s=f,this.c2s=g,this.c3s=x}}const ile=1;function m9(n){const e=n.nodeType===ile?n:n.parentElement;if(!e)return null;const{top:t,left:i}=e.getBoundingClientRect();return{x:i,y:t}}function u_(n){return{x:n.clientX,y:n.clientY}}function ale(n){var e;return n.nodeName==="IMG"&&(nle()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(n)))}function sle(n,e,t,i){let a=n?e.width:t,s=n?e.height:i;return p9()&&n&&(s/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:s}}function rle(n,e,t,i,a){const s=ale(e),l=m9(s?n:e),d={x:t.x-l.x,y:t.y-l.y},{offsetWidth:f,offsetHeight:g}=n,{anchorX:x,anchorY:b}=i,{dragPreviewWidth:_,dragPreviewHeight:S}=sle(s,e,f,g),w=()=>{let B=new n6([0,.5,1],[d.y,d.y/g*S,d.y+S-g]).interpolate(b);return p9()&&s&&(B+=(window.devicePixelRatio-1)*S),B},M=()=>new n6([0,.5,1],[d.x,d.x/f*_,d.x+_-f]).interpolate(x),{offsetX:E,offsetY:T}=a,C=E===0||E,D=T===0||T;return{x:C?E:M(),y:D?T:w()}}let ole=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}};function lle(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){lle(n,a,t[a])})}return n}class cle{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,i){return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,i){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,i);const a=r=>this.handleDragStart(r,e),s=r=>this.handleSelectStart(r);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",a),t.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",a),t.removeEventListener("selectstart",s),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const i=r=>this.handleDragEnter(r,e),a=r=>this.handleDragOver(r,e),s=r=>this.handleDrop(r,e);return t.addEventListener("dragenter",i),t.addEventListener("dragover",a),t.addEventListener("drop",s),()=>{t.removeEventListener("dragenter",i),t.removeEventListener("dragover",a),t.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return i6({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return i6({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(t6).some(t=>t6[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=tle(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var i;return(i=this.rootElement)===null||i===void 0?void 0:i.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,i){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const s=this.sourceNodes.get(a);return s&&m9(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const r=u_(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:r});const{dataTransfer:l}=a,d=kM(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const g=this.monitor.getSourceId(),x=this.sourceNodes.get(g),b=this.sourcePreviewNodes.get(g)||x;if(b){const{anchorX:_,anchorY:S,offsetX:w,offsetY:M}=this.getCurrentSourcePreviewNodeOptions(),C=rle(x,b,r,{anchorX:_,anchorY:S},{offsetX:w,offsetY:M});l.setDragImage(b,C.x,C.y)}}try{l?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:f}=this.getCurrentSourcePreviewNodeOptions();f?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(d)this.beginDragNativeItem(d);else{if(l&&!l.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:l}=a,d=kM(l);d&&this.beginDragNativeItem(d,l)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,s.length>0&&this.actions.hover(s,{clientOffset:u_(a)}),s.some(l=>this.monitor.canDropOnTarget(l))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=u_(a),this.scheduleHover(s),(s||[]).some(l=>this.monitor.canDropOnTarget(l))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;a.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}else kM(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:u_(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const s=a.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(a.preventDefault(),s.dragDrop()))},this.options=new ole(t,i),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new $oe(this.isNodeInDocument)}}let d_;function g9(){return d_||(d_=new Image,d_.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),d_}const ule=function(e,t,i){return new cle(e,t,i)},n3={FURNITURE:"furniture"},dle=({item:n,onAdd:e,getCategoryIcon:t,showPrice:i=!0,compact:a=!1})=>{const[s,r]=k.useState(!1),l=k.useRef(null),[{isDragging:d},f,g]=l9({type:n3.FURNITURE,item:()=>({type:n3.FURNITURE,id:n.id,furnitureItem:n}),end:(x,b)=>{const _=b.getDropResult();x&&_&&e(n)},collect:x=>({isDragging:!!x.isDragging()})});return f(l),di.useEffect(()=>{g(g9(),{captureDraggingState:!0})},[g]),a?c.jsx("div",{ref:l,className:fn("p-2 border rounded-lg bg-white cursor-grab transition-all",d?"opacity-50":"opacity-100",s?"border-primary":"border-gray-200"),onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:n.image_url?c.jsx("img",{src:n.image_url,alt:n.name,className:"w-full h-full object-cover rounded"}):t(n.category)}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"text-sm font-medium line-clamp-1",children:n.name}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("span",{className:"text-xs text-gray-500",children:[n.dimensions.width,"",n.dimensions.height," cm"]}),i&&n.price&&c.jsxs("span",{className:"text-xs font-medium",children:["",n.price.toLocaleString()]})]})]})]})}):c.jsx(Jt,{ref:l,className:fn("border cursor-grab transition-all",d?"opacity-50":"opacity-100",s?"border-primary ring-1 ring-primary":"border-gray-200"),onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),children:c.jsx(pn,{className:"p-3",children:c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded flex items-center justify-center flex-shrink-0",children:n.image_url?c.jsx("img",{src:n.image_url,alt:n.name,className:"w-full h-full object-cover rounded"}):t(n.category)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between mb-1",children:[c.jsx("h4",{className:"font-medium text-sm line-clamp-1",children:n.name}),c.jsx(wn,{variant:"outline",className:"text-xs ml-2",children:n.category})]}),c.jsx("p",{className:"text-xs text-gray-600 line-clamp-1 mb-2",children:n.description}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[c.jsxs("span",{children:[n.dimensions.width,"",n.dimensions.height,n.dimensions.depth&&`${n.dimensions.depth}`," cm"]}),i&&n.price&&c.jsxs("span",{className:"font-medium text-gray-900",children:["",n.price.toLocaleString()]})]}),c.jsxs("div",{className:"flex gap-1 mb-2",children:[n.style&&c.jsx(wn,{variant:"secondary",className:"text-xs",children:n.style}),n.material&&c.jsx(wn,{variant:"outline",className:"text-xs",children:n.material})]})]})]})})})},a6=({onItemSelect:n})=>{const[e,t]=k.useState([]),[i,a]=k.useState(!1),[s,r]=k.useState(null),[l,d]=k.useState(""),[f,g]=k.useState("all"),x=[{id:1,name:"Modern Sofa",category:"seating",description:"Comfortable 3-seater modern sofa",price:15999,dimensions:{width:200,height:80,depth:90},style:"modern",material:"fabric",color:"gray"},{id:2,name:"Dining Table",category:"tables",description:"Wooden dining table for 6 people",price:12999,dimensions:{width:180,height:75,depth:90},style:"classic",material:"wood",color:"brown"},{id:3,name:"Office Chair",category:"seating",description:"Ergonomic office chair with lumbar support",price:8999,dimensions:{width:60,height:110,depth:60},style:"modern",material:"mesh",color:"black"},{id:4,name:"Floor Lamp",category:"lighting",description:"Contemporary floor lamp with adjustable arm",price:2999,dimensions:{width:40,height:160,depth:40},style:"modern",material:"metal",color:"black"},{id:5,name:"Coffee Table",category:"tables",description:"Glass top coffee table with metal legs",price:5999,dimensions:{width:120,height:45,depth:60},style:"modern",material:"glass",color:"clear"},{id:6,name:"Bookshelf",category:"storage",description:"5-tier wooden bookshelf",price:4999,dimensions:{width:80,height:180,depth:30},style:"classic",material:"wood",color:"brown"},{id:7,name:"Bed Frame",category:"bedroom",description:"Queen size bed frame with headboard",price:18999,dimensions:{width:160,height:120,depth:200},style:"modern",material:"wood",color:"white"},{id:8,name:"Wardrobe",category:"storage",description:"3-door wardrobe with mirror",price:22999,dimensions:{width:150,height:200,depth:60},style:"classic",material:"wood",color:"brown"},{id:9,name:"Side Table",category:"tables",description:"Bedside table with drawer",price:2999,dimensions:{width:40,height:55,depth:35},style:"modern",material:"wood",color:"white"},{id:10,name:"Ceiling Light",category:"lighting",description:"Modern LED ceiling light",price:3999,dimensions:{width:60,height:15,depth:60},style:"modern",material:"metal",color:"white"}],b=[{id:"all",name:"All Items",icon:Mf},{id:"seating",name:"Seating",icon:eU},{id:"tables",name:"Tables",icon:tU},{id:"lighting",name:"Lighting",icon:GP},{id:"storage",name:"Storage",icon:Fc},{id:"bedroom",name:"Bedroom",icon:DP}];k.useEffect(()=>{_()},[]);const _=async()=>{a(!0),r(null);try{await new Promise(E=>setTimeout(E,500)),t(x)}catch(E){r(E instanceof Error?E.message:"Unknown error")}finally{a(!1)}},S=E=>{n&&n(E),alert(`Added ${E.name} to floorplan!`)},w=E=>{const C=b.find(D=>D.id===E)?.icon||Fc;return c.jsx(C,{className:"h-4 w-4"})},M=e.filter(E=>{const T=E.name.toLowerCase().includes(l.toLowerCase())||E.description.toLowerCase().includes(l.toLowerCase()),C=f==="all"||E.category===f;return T&&C});return i?c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsxs(Bn,{className:"flex items-center gap-2",children:[c.jsx(Fc,{className:"h-5 w-5"}),"Furniture Library"]})}),c.jsx(pn,{children:c.jsx("div",{className:"text-center py-4",children:"Loading furniture..."})})]}):s?c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsxs(Bn,{className:"flex items-center gap-2",children:[c.jsx(Fc,{className:"h-5 w-5"}),"Furniture Library"]})}),c.jsx(pn,{children:c.jsxs("div",{className:"text-center py-4 text-red-500",children:["Error: ",s,c.jsx(it,{variant:"outline",size:"sm",onClick:_,className:"ml-2",children:"Retry"})]})})]}):c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsxs(Bn,{className:"flex items-center gap-2",children:[c.jsx(Fc,{className:"h-5 w-5"}),"Furniture Library",c.jsx(wn,{variant:"secondary",children:M.length})]})}),c.jsxs(pn,{className:"p-0",children:[c.jsx("div",{className:"p-4 border-b",children:c.jsxs("div",{className:"relative",children:[c.jsx(H2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),c.jsx(Ta,{placeholder:"Search furniture...",value:l,onChange:E=>d(E.target.value),className:"pl-10"})]})}),c.jsx("div",{className:"p-4 border-b",children:c.jsx("div",{className:"grid grid-cols-3 gap-2",children:b.map(E=>c.jsxs(it,{variant:f===E.id?"default":"outline",size:"sm",onClick:()=>g(E.id),className:"flex items-center gap-1 text-xs",children:[w(E.id),E.name]},E.id))})}),c.jsx(Ca,{className:"h-80",children:c.jsx("div",{className:"p-4 space-y-3",children:M.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(Fc,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No furniture items found"}),c.jsx("p",{className:"text-sm",children:"Try adjusting your search or category"})]}):M.map(E=>c.jsx("div",{className:"mb-3",children:c.jsx(dle,{item:E,onAdd:S,getCategoryIcon:w})},E.id))})})]})]})},hle=CC("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Zo=k.forwardRef(({className:n,variant:e,...t},i)=>c.jsx("div",{ref:i,role:"alert",className:fn(hle({variant:e}),n),...t}));Zo.displayName="Alert";const Ov=k.forwardRef(({className:n,...e},t)=>c.jsx("h5",{ref:t,className:fn("mb-1 font-medium leading-none tracking-tight",n),...e}));Ov.displayName="AlertTitle";const Qo=k.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:fn("text-sm [&_p]:leading-relaxed",n),...e}));Qo.displayName="AlertDescription";function v9(n){const e=k.useRef({value:n,previous:n});return k.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var uE="Switch",[fle,Jde]=xd(uE),[ple,mle]=fle(uE),y9=k.forwardRef((n,e)=>{const{__scopeSwitch:t,name:i,checked:a,defaultChecked:s,required:r,disabled:l,value:d="on",onCheckedChange:f,form:g,...x}=n,[b,_]=k.useState(null),S=da(e,C=>_(C)),w=k.useRef(!1),M=b?g||!!b.closest("form"):!0,[E,T]=Kp({prop:a,defaultProp:s??!1,onChange:f,caller:uE});return c.jsxs(ple,{scope:t,checked:E,disabled:l,children:[c.jsx(ci.button,{type:"button",role:"switch","aria-checked":E,"aria-required":r,"data-state":S9(E),"data-disabled":l?"":void 0,disabled:l,value:d,...x,ref:S,onClick:nn(n.onClick,C=>{T(D=>!D),M&&(w.current=C.isPropagationStopped(),w.current||C.stopPropagation())})}),M&&c.jsx(_9,{control:b,bubbles:!w.current,name:i,value:d,checked:E,required:r,disabled:l,form:g,style:{transform:"translateX(-100%)"}})]})});y9.displayName=uE;var x9="SwitchThumb",b9=k.forwardRef((n,e)=>{const{__scopeSwitch:t,...i}=n,a=mle(x9,t);return c.jsx(ci.span,{"data-state":S9(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e})});b9.displayName=x9;var gle="SwitchBubbleInput",_9=k.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:i=!0,...a},s)=>{const r=k.useRef(null),l=da(r,s),d=v9(t),f=xU(e);return k.useEffect(()=>{const g=r.current;if(!g)return;const x=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(x,"checked").set;if(d!==t&&_){const S=new Event("click",{bubbles:i});_.call(g,t),g.dispatchEvent(S)}},[d,t,i]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...a,tabIndex:-1,ref:l,style:{...a.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});_9.displayName=gle;function S9(n){return n?"checked":"unchecked"}var E9=y9,vle=b9;const Yo=k.forwardRef(({className:n,...e},t)=>c.jsx(E9,{className:fn("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:c.jsx(vle,{className:fn("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Yo.displayName=E9.displayName;const qt=k.forwardRef(({className:n,...e},t)=>c.jsx("label",{ref:t,className:fn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n),...e}));qt.displayName="Label";function s6(n,[e,t]){return Math.min(t,Math.max(e,n))}var yle=[" ","Enter","ArrowUp","ArrowDown"],xle=[" ","Enter"],Tg="Select",[dE,hE,ble]=zC(Tg),[Kv,$de]=xd(Tg,[ble,Yv]),fE=Yv(),[_le,nm]=Kv(Tg),[Sle,Ele]=Kv(Tg),w9=n=>{const{__scopeSelect:e,children:t,open:i,defaultOpen:a,onOpenChange:s,value:r,defaultValue:l,onValueChange:d,dir:f,name:g,autoComplete:x,disabled:b,required:_,form:S}=n,w=fE(e),[M,E]=k.useState(null),[T,C]=k.useState(null),[D,P]=k.useState(!1),B=V2(f),[F,j]=Kp({prop:i,defaultProp:a??!1,onChange:s,caller:Tg}),[O,I]=Kp({prop:r,defaultProp:l,onChange:d,caller:Tg}),W=k.useRef(null),Q=M?S||!!M.closest("form"):!0,[J,te]=k.useState(new Set),oe=Array.from(J).map($=>$.props.value).join(";");return c.jsx(WC,{...w,children:c.jsxs(_le,{required:_,scope:e,trigger:M,onTriggerChange:E,valueNode:T,onValueNodeChange:C,valueNodeHasChildren:D,onValueNodeHasChildrenChange:P,contentId:hd(),value:O,onValueChange:I,open:F,onOpenChange:j,dir:B,triggerPointerDownPosRef:W,disabled:b,children:[c.jsx(dE.Provider,{scope:e,children:c.jsx(Sle,{scope:n.__scopeSelect,onNativeOptionAdd:k.useCallback($=>{te(X=>new Set(X).add($))},[]),onNativeOptionRemove:k.useCallback($=>{te(X=>{const G=new Set(X);return G.delete($),G})},[]),children:t})}),Q?c.jsxs(X9,{"aria-hidden":!0,required:_,tabIndex:-1,name:g,autoComplete:x,value:O,onChange:$=>I($.target.value),disabled:b,form:S,children:[O===void 0?c.jsx("option",{value:""}):null,Array.from(J)]},oe):null]})})};w9.displayName=Tg;var M9="SelectTrigger",T9=k.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:i=!1,...a}=n,s=fE(t),r=nm(M9,t),l=r.disabled||i,d=da(e,r.onTriggerChange),f=hE(t),g=k.useRef("touch"),[x,b,_]=W9(w=>{const M=f().filter(C=>!C.disabled),E=M.find(C=>C.value===r.value),T=K9(M,w,E);T!==void 0&&r.onValueChange(T.value)}),S=w=>{l||(r.onOpenChange(!0),_()),w&&(r.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return c.jsx(KC,{asChild:!0,...s,children:c.jsx(ci.button,{type:"button",role:"combobox","aria-controls":r.contentId,"aria-expanded":r.open,"aria-required":r.required,"aria-autocomplete":"none",dir:r.dir,"data-state":r.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Y9(r.value)?"":void 0,...a,ref:d,onClick:nn(a.onClick,w=>{w.currentTarget.focus(),g.current!=="mouse"&&S(w)}),onPointerDown:nn(a.onPointerDown,w=>{g.current=w.pointerType;const M=w.target;M.hasPointerCapture(w.pointerId)&&M.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(S(w),w.preventDefault())}),onKeyDown:nn(a.onKeyDown,w=>{const M=x.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&b(w.key),!(M&&w.key===" ")&&yle.includes(w.key)&&(S(),w.preventDefault())})})})});T9.displayName=M9;var C9="SelectValue",A9=k.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:a,children:s,placeholder:r="",...l}=n,d=nm(C9,t),{onValueNodeHasChildrenChange:f}=d,g=s!==void 0,x=da(e,d.onValueNodeChange);return Jo(()=>{f(g)},[f,g]),c.jsx(ci.span,{...l,ref:x,style:{pointerEvents:"none"},children:Y9(d.value)?c.jsx(c.Fragment,{children:r}):s})});A9.displayName=C9;var wle="SelectIcon",N9=k.forwardRef((n,e)=>{const{__scopeSelect:t,children:i,...a}=n;return c.jsx(ci.span,{"aria-hidden":!0,...a,ref:e,children:i||""})});N9.displayName=wle;var Mle="SelectPortal",R9=n=>c.jsx(K2,{asChild:!0,...n});R9.displayName=Mle;var Cg="SelectContent",D9=k.forwardRef((n,e)=>{const t=nm(Cg,n.__scopeSelect),[i,a]=k.useState();if(Jo(()=>{a(new DocumentFragment)},[]),!t.open){const s=i;return s?jg.createPortal(c.jsx(O9,{scope:n.__scopeSelect,children:c.jsx(dE.Slot,{scope:n.__scopeSelect,children:c.jsx("div",{children:n.children})})}),s):null}return c.jsx(j9,{...n,ref:e})});D9.displayName=Cg;var sd=10,[O9,im]=Kv(Cg),Tle="SelectContentImpl",Cle=bg("SelectContent.RemoveScroll"),j9=k.forwardRef((n,e)=>{const{__scopeSelect:t,position:i="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:r,side:l,sideOffset:d,align:f,alignOffset:g,arrowPadding:x,collisionBoundary:b,collisionPadding:_,sticky:S,hideWhenDetached:w,avoidCollisions:M,...E}=n,T=nm(Cg,t),[C,D]=k.useState(null),[P,B]=k.useState(null),F=da(e,ae=>D(ae)),[j,O]=k.useState(null),[I,W]=k.useState(null),Q=hE(t),[J,te]=k.useState(!1),oe=k.useRef(!1);k.useEffect(()=>{if(C)return JC(C)},[C]),IC();const $=k.useCallback(ae=>{const[_e,...Ke]=Q().map(ft=>ft.ref.current),[Ge]=Ke.slice(-1),st=document.activeElement;for(const ft of ae)if(ft===st||(ft?.scrollIntoView({block:"nearest"}),ft===_e&&P&&(P.scrollTop=0),ft===Ge&&P&&(P.scrollTop=P.scrollHeight),ft?.focus(),document.activeElement!==st))return},[Q,P]),X=k.useCallback(()=>$([j,C]),[$,j,C]);k.useEffect(()=>{J&&X()},[J,X]);const{onOpenChange:G,triggerPointerDownPosRef:ee}=T;k.useEffect(()=>{if(C){let ae={x:0,y:0};const _e=Ge=>{ae={x:Math.abs(Math.round(Ge.pageX)-(ee.current?.x??0)),y:Math.abs(Math.round(Ge.pageY)-(ee.current?.y??0))}},Ke=Ge=>{ae.x<=10&&ae.y<=10?Ge.preventDefault():C.contains(Ge.target)||G(!1),document.removeEventListener("pointermove",_e),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",_e),document.addEventListener("pointerup",Ke,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_e),document.removeEventListener("pointerup",Ke,{capture:!0})}}},[C,G,ee]),k.useEffect(()=>{const ae=()=>G(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[G]);const[Y,ne]=W9(ae=>{const _e=Q().filter(st=>!st.disabled),Ke=_e.find(st=>st.ref.current===document.activeElement),Ge=K9(_e,ae,Ke);Ge&&setTimeout(()=>Ge.ref.current.focus())}),ue=k.useCallback((ae,_e,Ke)=>{const Ge=!oe.current&&!Ke;(T.value!==void 0&&T.value===_e||Ge)&&(O(ae),Ge&&(oe.current=!0))},[T.value]),de=k.useCallback(()=>C?.focus(),[C]),ie=k.useCallback((ae,_e,Ke)=>{const Ge=!oe.current&&!Ke;(T.value!==void 0&&T.value===_e||Ge)&&W(ae)},[T.value]),Me=i==="popper"?i3:P9,ye=Me===i3?{side:l,sideOffset:d,align:f,alignOffset:g,arrowPadding:x,collisionBoundary:b,collisionPadding:_,sticky:S,hideWhenDetached:w,avoidCollisions:M}:{};return c.jsx(O9,{scope:t,content:C,viewport:P,onViewportChange:B,itemRefCallback:ue,selectedItem:j,onItemLeave:de,itemTextRefCallback:ie,focusSelectedItem:X,selectedItemText:I,position:i,isPositioned:J,searchRef:Y,children:c.jsx(J2,{as:Cle,allowPinchZoom:!0,children:c.jsx(q2,{asChild:!0,trapped:T.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:nn(a,ae=>{T.trigger?.focus({preventScroll:!0}),ae.preventDefault()}),children:c.jsx(I1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:c.jsx(Me,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:ae=>ae.preventDefault(),...E,...ye,onPlaced:()=>te(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:nn(E.onKeyDown,ae=>{const _e=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!_e&&ae.key.length===1&&ne(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let Ge=Q().filter(st=>!st.disabled).map(st=>st.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(Ge=Ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const st=ae.target,ft=Ge.indexOf(st);Ge=Ge.slice(ft+1)}setTimeout(()=>$(Ge)),ae.preventDefault()}})})})})})})});j9.displayName=Tle;var Ale="SelectItemAlignedPosition",P9=k.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:i,...a}=n,s=nm(Cg,t),r=im(Cg,t),[l,d]=k.useState(null),[f,g]=k.useState(null),x=da(e,F=>g(F)),b=hE(t),_=k.useRef(!1),S=k.useRef(!0),{viewport:w,selectedItem:M,selectedItemText:E,focusSelectedItem:T}=r,C=k.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&f&&w&&M&&E){const F=s.trigger.getBoundingClientRect(),j=f.getBoundingClientRect(),O=s.valueNode.getBoundingClientRect(),I=E.getBoundingClientRect();if(s.dir!=="rtl"){const st=I.left-j.left,ft=O.left-st,Pe=F.left-ft,he=F.width+Pe,ke=Math.max(he,j.width),Ee=window.innerWidth-sd,Le=s6(ft,[sd,Math.max(sd,Ee-ke)]);l.style.minWidth=he+"px",l.style.left=Le+"px"}else{const st=j.right-I.right,ft=window.innerWidth-O.right-st,Pe=window.innerWidth-F.right-ft,he=F.width+Pe,ke=Math.max(he,j.width),Ee=window.innerWidth-sd,Le=s6(ft,[sd,Math.max(sd,Ee-ke)]);l.style.minWidth=he+"px",l.style.right=Le+"px"}const W=b(),Q=window.innerHeight-sd*2,J=w.scrollHeight,te=window.getComputedStyle(f),oe=parseInt(te.borderTopWidth,10),$=parseInt(te.paddingTop,10),X=parseInt(te.borderBottomWidth,10),G=parseInt(te.paddingBottom,10),ee=oe+$+J+G+X,Y=Math.min(M.offsetHeight*5,ee),ne=window.getComputedStyle(w),ue=parseInt(ne.paddingTop,10),de=parseInt(ne.paddingBottom,10),ie=F.top+F.height/2-sd,Me=Q-ie,ye=M.offsetHeight/2,ae=M.offsetTop+ye,_e=oe+$+ae,Ke=ee-_e;if(_e<=ie){const st=W.length>0&&M===W[W.length-1].ref.current;l.style.bottom="0px";const ft=f.clientHeight-w.offsetTop-w.offsetHeight,Pe=Math.max(Me,ye+(st?de:0)+ft+X),he=_e+Pe;l.style.height=he+"px"}else{const st=W.length>0&&M===W[0].ref.current;l.style.top="0px";const Pe=Math.max(ie,oe+w.offsetTop+(st?ue:0)+ye)+Ke;l.style.height=Pe+"px",w.scrollTop=_e-ie+w.offsetTop}l.style.margin=`${sd}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=Q+"px",i?.(),requestAnimationFrame(()=>_.current=!0)}},[b,s.trigger,s.valueNode,l,f,w,M,E,s.dir,i]);Jo(()=>C(),[C]);const[D,P]=k.useState();Jo(()=>{f&&P(window.getComputedStyle(f).zIndex)},[f]);const B=k.useCallback(F=>{F&&S.current===!0&&(C(),T?.(),S.current=!1)},[C,T]);return c.jsx(Rle,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:_,onScrollButtonChange:B,children:c.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:D},children:c.jsx(ci.div,{...a,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});P9.displayName=Ale;var Nle="SelectPopperPosition",i3=k.forwardRef((n,e)=>{const{__scopeSelect:t,align:i="start",collisionPadding:a=sd,...s}=n,r=fE(t);return c.jsx(ZC,{...r,...s,ref:e,align:i,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});i3.displayName=Nle;var[Rle,vA]=Kv(Cg,{}),a3="SelectViewport",U9=k.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:i,...a}=n,s=im(a3,t),r=vA(a3,t),l=da(e,s.onViewportChange),d=k.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),c.jsx(dE.Slot,{scope:t,children:c.jsx(ci.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:nn(a.onScroll,f=>{const g=f.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:b}=r;if(b?.current&&x){const _=Math.abs(d.current-g.scrollTop);if(_>0){const S=window.innerHeight-sd*2,w=parseFloat(x.style.minHeight),M=parseFloat(x.style.height),E=Math.max(w,M);if(E<S){const T=E+_,C=Math.min(S,T),D=T-C;x.style.height=C+"px",x.style.bottom==="0px"&&(g.scrollTop=D>0?D:0,x.style.justifyContent="flex-end")}}}d.current=g.scrollTop})})})]})});U9.displayName=a3;var L9="SelectGroup",[Dle,Ole]=Kv(L9),jle=k.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,a=hd();return c.jsx(Dle,{scope:t,id:a,children:c.jsx(ci.div,{role:"group","aria-labelledby":a,...i,ref:e})})});jle.displayName=L9;var z9="SelectLabel",I9=k.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,a=Ole(z9,t);return c.jsx(ci.div,{id:a.id,...i,ref:e})});I9.displayName=z9;var FS="SelectItem",[Ple,B9]=Kv(FS),F9=k.forwardRef((n,e)=>{const{__scopeSelect:t,value:i,disabled:a=!1,textValue:s,...r}=n,l=nm(FS,t),d=im(FS,t),f=l.value===i,[g,x]=k.useState(s??""),[b,_]=k.useState(!1),S=da(e,T=>d.itemRefCallback?.(T,i,a)),w=hd(),M=k.useRef("touch"),E=()=>{a||(l.onValueChange(i),l.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(Ple,{scope:t,value:i,disabled:a,textId:w,isSelected:f,onItemTextChange:k.useCallback(T=>{x(C=>C||(T?.textContent??"").trim())},[]),children:c.jsx(dE.ItemSlot,{scope:t,value:i,disabled:a,textValue:g,children:c.jsx(ci.div,{role:"option","aria-labelledby":w,"data-highlighted":b?"":void 0,"aria-selected":f&&b,"data-state":f?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...r,ref:S,onFocus:nn(r.onFocus,()=>_(!0)),onBlur:nn(r.onBlur,()=>_(!1)),onClick:nn(r.onClick,()=>{M.current!=="mouse"&&E()}),onPointerUp:nn(r.onPointerUp,()=>{M.current==="mouse"&&E()}),onPointerDown:nn(r.onPointerDown,T=>{M.current=T.pointerType}),onPointerMove:nn(r.onPointerMove,T=>{M.current=T.pointerType,a?d.onItemLeave?.():M.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:nn(r.onPointerLeave,T=>{T.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:nn(r.onKeyDown,T=>{d.searchRef?.current!==""&&T.key===" "||(xle.includes(T.key)&&E(),T.key===" "&&T.preventDefault())})})})})});F9.displayName=FS;var Cx="SelectItemText",k9=k.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:a,...s}=n,r=nm(Cx,t),l=im(Cx,t),d=B9(Cx,t),f=Ele(Cx,t),[g,x]=k.useState(null),b=da(e,E=>x(E),d.onItemTextChange,E=>l.itemTextRefCallback?.(E,d.value,d.disabled)),_=g?.textContent,S=k.useMemo(()=>c.jsx("option",{value:d.value,disabled:d.disabled,children:_},d.value),[d.disabled,d.value,_]),{onNativeOptionAdd:w,onNativeOptionRemove:M}=f;return Jo(()=>(w(S),()=>M(S)),[w,M,S]),c.jsxs(c.Fragment,{children:[c.jsx(ci.span,{id:d.textId,...s,ref:b}),d.isSelected&&r.valueNode&&!r.valueNodeHasChildren?jg.createPortal(s.children,r.valueNode):null]})});k9.displayName=Cx;var H9="SelectItemIndicator",G9=k.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return B9(H9,t).isSelected?c.jsx(ci.span,{"aria-hidden":!0,...i,ref:e}):null});G9.displayName=H9;var s3="SelectScrollUpButton",Ule=k.forwardRef((n,e)=>{const t=im(s3,n.__scopeSelect),i=vA(s3,n.__scopeSelect),[a,s]=k.useState(!1),r=da(e,i.onScrollButtonChange);return Jo(()=>{if(t.viewport&&t.isPositioned){let l=function(){const f=d.scrollTop>0;s(f)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),a?c.jsx(V9,{...n,ref:r,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});Ule.displayName=s3;var r3="SelectScrollDownButton",Lle=k.forwardRef((n,e)=>{const t=im(r3,n.__scopeSelect),i=vA(r3,n.__scopeSelect),[a,s]=k.useState(!1),r=da(e,i.onScrollButtonChange);return Jo(()=>{if(t.viewport&&t.isPositioned){let l=function(){const f=d.scrollHeight-d.clientHeight,g=Math.ceil(d.scrollTop)<f;s(g)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),a?c.jsx(V9,{...n,ref:r,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});Lle.displayName=r3;var V9=k.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:i,...a}=n,s=im("SelectScrollButton",t),r=k.useRef(null),l=hE(t),d=k.useCallback(()=>{r.current!==null&&(window.clearInterval(r.current),r.current=null)},[]);return k.useEffect(()=>()=>d(),[d]),Jo(()=>{l().find(g=>g.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),c.jsx(ci.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:nn(a.onPointerDown,()=>{r.current===null&&(r.current=window.setInterval(i,50))}),onPointerMove:nn(a.onPointerMove,()=>{s.onItemLeave?.(),r.current===null&&(r.current=window.setInterval(i,50))}),onPointerLeave:nn(a.onPointerLeave,()=>{d()})})}),zle="SelectSeparator",q9=k.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return c.jsx(ci.div,{"aria-hidden":!0,...i,ref:e})});q9.displayName=zle;var o3="SelectArrow",Ile=k.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,a=fE(t),s=nm(o3,t),r=im(o3,t);return s.open&&r.position==="popper"?c.jsx(QC,{...a,...i,ref:e}):null});Ile.displayName=o3;var Ble="SelectBubbleInput",X9=k.forwardRef(({__scopeSelect:n,value:e,...t},i)=>{const a=k.useRef(null),s=da(i,a),r=v9(e);return k.useEffect(()=>{const l=a.current;if(!l)return;const d=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(d,"value").set;if(r!==e&&g){const x=new Event("change",{bubbles:!0});g.call(l,e),l.dispatchEvent(x)}},[r,e]),c.jsx(ci.select,{...t,style:{...F7,...t.style},ref:s,defaultValue:e})});X9.displayName=Ble;function Y9(n){return n===""||n===void 0}function W9(n){const e=Sh(n),t=k.useRef(""),i=k.useRef(0),a=k.useCallback(r=>{const l=t.current+r;e(l),function d(f){t.current=f,window.clearTimeout(i.current),f!==""&&(i.current=window.setTimeout(()=>d(""),1e3))}(l)},[e]),s=k.useCallback(()=>{t.current="",window.clearTimeout(i.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(i.current),[]),[t,a,s]}function K9(n,e,t){const a=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let r=Fle(n,Math.max(s,0));a.length===1&&(r=r.filter(f=>f!==t));const d=r.find(f=>f.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==t?d:void 0}function Fle(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var kle=w9,Z9=T9,Hle=A9,Gle=N9,Vle=R9,Q9=D9,qle=U9,J9=I9,$9=F9,Xle=k9,Yle=G9,eL=q9;const Cr=kle,Ar=Hle,dr=k.forwardRef(({className:n,children:e,...t},i)=>c.jsxs(Z9,{ref:i,className:fn("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...t,children:[e,c.jsx(Gle,{asChild:!0,children:c.jsx(UP,{className:"h-4 w-4 opacity-50"})})]}));dr.displayName=Z9.displayName;const hr=k.forwardRef(({className:n,children:e,position:t="popper",...i},a)=>c.jsx(Vle,{children:c.jsx(Q9,{ref:a,className:fn("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...i,children:c.jsx(qle,{className:fn("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})}));hr.displayName=Q9.displayName;const Wle=k.forwardRef(({className:n,...e},t)=>c.jsx(J9,{ref:t,className:fn("px-2 py-1.5 text-sm font-semibold",n),...e}));Wle.displayName=J9.displayName;const Li=k.forwardRef(({className:n,children:e,...t},i)=>c.jsxs($9,{ref:i,className:fn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[c.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(Yle,{children:c.jsx(PP,{className:"h-4 w-4"})})}),c.jsx(Xle,{children:e})]}));Li.displayName=$9.displayName;const Kle=k.forwardRef(({className:n,...e},t)=>c.jsx(eL,{ref:t,className:fn("-mx-1 my-1 h-px bg-muted",n),...e}));Kle.displayName=eL.displayName;const l3=({measurements:n,onRemoveMeasurement:e,unit:t="ft"})=>{const[i,a]=k.useState(null),[s,r]=k.useState(null),[l,d]=k.useState(!0),f=ti(),g=f.measurements||n||[],x=f.clearanceDetection||!0,b=f.toggleClearanceDetection||(()=>{}),_=f.measurementUnit||t,S=f.setMeasurementUnit||(()=>{}),w=f.calculateTotalArea||(()=>0),M=F=>{f.removeMeasurement?.(F),e?.(F)},E=f.getClearanceIssues?.()||[],T=[{id:"linear",name:"Linear Measurement",icon:Av,description:"Measure distance between two points"},{id:"area",name:"Area Measurement",icon:Nv,description:"Measure area of a region"},{id:"angle",name:"Angle Measurement",icon:dte,description:"Measure angles between lines"}],C=F=>{switch(_){case"ft":return`${F.toFixed(2)} ft`;case"m":return`${F.toFixed(2)} m`;default:return`${F.toFixed(0)} px`}},D=F=>{switch(_){case"ft":return`${F.toFixed(2)} sq ft`;case"m":return`${F.toFixed(2)} sq m`;default:return`${F.toFixed(0)} px`}},P=()=>g.filter(F=>F.type==="area").reduce((F,j)=>F+j.distance,0),B=()=>{g.forEach(F=>M?.(F.id))};return c.jsxs(Jt,{className:"w-full",children:[c.jsx(In,{children:c.jsxs(Bn,{className:"flex items-center gap-2",children:[c.jsx(OP,{className:"h-5 w-5"}),"Measurement Tools"]})}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Tools"}),c.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.map(F=>{const j=F.icon,O=i===F.id;return c.jsxs(it,{variant:O?"default":"outline",size:"sm",className:"justify-start h-auto p-3",onClick:()=>a(O?null:F.id),children:[c.jsx(j,{className:"h-4 w-4 mr-2"}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-medium",children:F.name}),c.jsx("div",{className:"text-xs text-muted-foreground",children:F.description})]})]},F.id)})})]}),c.jsx(js,{}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h4",{className:"text-sm font-medium",children:["Measurements (",g.length,")"]}),g.length>0&&c.jsx(it,{variant:"ghost",size:"sm",onClick:B,children:"Clear All"})]}),g.length===0?c.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No measurements yet. Select a tool and click on the canvas to start measuring."}):c.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:g.map(F=>c.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(wn,{variant:"outline",className:"text-xs",children:F.type}),c.jsx("span",{className:"text-sm",children:F.type==="area"?D(F.distance):C(F.distance)})]}),c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>M?.(F.id),children:""})]},F.id))})]}),g.length>0&&c.jsxs(c.Fragment,{children:[c.jsx(js,{}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Summary"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Manual Measurements:"}),c.jsx("div",{className:"font-medium",children:D(P())})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Floor Plan Area:"}),c.jsx("div",{className:"font-medium",children:D(w())})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Unit:"}),c.jsx("div",{className:"font-medium",children:_})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Measurements:"}),c.jsx("div",{className:"font-medium",children:g.length})]})]})]})]}),c.jsx(js,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("h4",{className:"text-sm font-medium",children:"Display Options"})}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(qt,{htmlFor:"auto-annotations",className:"text-sm",children:"Automatic Annotations"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Show room areas and dimensions automatically"})]}),c.jsx(Yo,{id:"auto-annotations",checked:l,onCheckedChange:d})]})]}),i&&c.jsxs(c.Fragment,{children:[c.jsx(js,{}),c.jsx("div",{className:"p-3 bg-muted/50 rounded-md",children:c.jsxs("p",{className:"text-xs text-muted-foreground",children:[i==="linear"&&"Click two points to measure distance",i==="area"&&"Click points to define an area boundary",i==="angle"&&"Click three points to measure angle"]})})]}),c.jsx(js,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("h4",{className:"text-sm font-medium",children:"Advanced Measurement"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(qt,{htmlFor:"virtual-tape",className:"text-sm",children:"Virtual Tape Measure"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable drag-and-drop measuring tape"})]}),c.jsx(Yo,{id:"virtual-tape",checked:s!==null,onCheckedChange:F=>{r(F?{id:"virtual-tape-1",start:{x:100,y:100,id:"p1"},end:{x:200,y:200,id:"p2"},distance:141.42,type:"linear",label:"Virtual Tape"}:null)}})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(qt,{htmlFor:"clearance",className:"text-sm",children:"Clearance Detection"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Detect potential collisions and clearance issues"})]}),c.jsx(Yo,{id:"clearance",checked:x,onCheckedChange:b})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsx(qt,{htmlFor:"unit-select",className:"text-sm",children:"Measurement Unit"}),c.jsxs(Cr,{value:_,onValueChange:F=>S(F),children:[c.jsx(dr,{id:"unit-select",children:c.jsx(Ar,{placeholder:"Select unit"})}),c.jsxs(hr,{children:[c.jsx(Li,{value:"ft",children:"Feet (ft)"}),c.jsx(Li,{value:"m",children:"Meters (m)"}),c.jsx(Li,{value:"px",children:"Pixels (px)"})]})]})]})]})]}),c.jsxs(c.Fragment,{children:[c.jsx(js,{}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Clearance Issues"}),E.length>0?c.jsx("div",{className:"space-y-2",children:E.map(F=>c.jsxs(Zo,{className:F.severity==="error"?"bg-red-50 border-red-200":"",children:[c.jsx(ph,{className:"h-4 w-4"}),c.jsxs(Ov,{children:[F.elementType," Clearance Issue"]}),c.jsx(Qo,{children:F.description})]},F.id))}):c.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No clearance issues detected."})]})]})]}),c.jsx(Z7,{children:c.jsx("p",{className:"text-xs text-muted-foreground",children:"Tip: All measurements automatically update when elements are moved or resized."})})]})};var pE="Tabs",[Zle,ehe]=xd(pE,[Z2]),tL=Z2(),[Qle,yA]=Zle(pE),nL=k.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,onValueChange:a,defaultValue:s,orientation:r="horizontal",dir:l,activationMode:d="automatic",...f}=n,g=V2(l),[x,b]=Kp({prop:i,onChange:a,defaultProp:s??"",caller:pE});return c.jsx(Qle,{scope:t,baseId:hd(),value:x,onValueChange:b,orientation:r,dir:g,activationMode:d,children:c.jsx(ci.div,{dir:g,"data-orientation":r,...f,ref:e})})});nL.displayName=pE;var iL="TabsList",aL=k.forwardRef((n,e)=>{const{__scopeTabs:t,loop:i=!0,...a}=n,s=yA(iL,t),r=tL(t);return c.jsx(PU,{asChild:!0,...r,orientation:s.orientation,dir:s.dir,loop:i,children:c.jsx(ci.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:e})})});aL.displayName=iL;var sL="TabsTrigger",rL=k.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,disabled:a=!1,...s}=n,r=yA(sL,t),l=tL(t),d=cL(r.baseId,i),f=uL(r.baseId,i),g=i===r.value;return c.jsx(UU,{asChild:!0,...l,focusable:!a,active:g,children:c.jsx(ci.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...s,ref:e,onMouseDown:nn(n.onMouseDown,x=>{!a&&x.button===0&&x.ctrlKey===!1?r.onValueChange(i):x.preventDefault()}),onKeyDown:nn(n.onKeyDown,x=>{[" ","Enter"].includes(x.key)&&r.onValueChange(i)}),onFocus:nn(n.onFocus,()=>{const x=r.activationMode!=="manual";!g&&!a&&x&&r.onValueChange(i)})})})});rL.displayName=sL;var oL="TabsContent",lL=k.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,forceMount:a,children:s,...r}=n,l=yA(oL,t),d=cL(l.baseId,i),f=uL(l.baseId,i),g=i===l.value,x=k.useRef(g);return k.useEffect(()=>{const b=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(b)},[]),c.jsx(Ch,{present:a||g,children:({present:b})=>c.jsx(ci.div,{"data-state":g?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!b,id:f,tabIndex:0,...r,ref:e,style:{...n.style,animationDuration:x.current?"0s":void 0},children:b&&s})})});lL.displayName=oL;function cL(n,e){return`${n}-trigger-${e}`}function uL(n,e){return`${n}-content-${e}`}var Jle=nL,dL=aL,hL=rL,fL=lL;const _l=Jle,Eo=k.forwardRef(({className:n,...e},t)=>c.jsx(dL,{ref:t,className:fn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));Eo.displayName=dL.displayName;const vn=k.forwardRef(({className:n,...e},t)=>c.jsx(hL,{ref:t,className:fn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));vn.displayName=hL.displayName;const Rn=k.forwardRef(({className:n,...e},t)=>c.jsx(fL,{ref:t,className:fn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Rn.displayName=fL.displayName;const r6={MATERIAL:"material"},$le=({material:n,onApply:e})=>{const[t,i]=k.useState(!1),[{isDragging:a},s,r]=l9({type:r6.MATERIAL,item:()=>({type:r6.MATERIAL,id:n.id,materialItem:n}),end:(l,d)=>{d.getDropResult()&&e(n)},collect:l=>({isDragging:l.isDragging()})});return di.useEffect(()=>{r(g9(),{captureDraggingState:!0})},[r]),c.jsxs(Jt,{ref:s,className:fn("cursor-grab transition-all overflow-hidden",a?"opacity-50":"opacity-100",t?"ring-2 ring-primary":""),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[c.jsx("div",{className:"h-24 bg-cover bg-center",style:{backgroundColor:n.color,backgroundImage:`url(${n.previewUrl})`}}),c.jsx(pn,{className:"p-2",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium",children:n.name}),c.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:n.category})]}),c.jsxs(it,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>e(n),children:[c.jsx("span",{className:"sr-only",children:"Apply"}),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[c.jsx("path",{d:"M5 12h14"}),c.jsx("path",{d:"M12 5v14"})]})]})]})})]})},o6=()=>{const[n,e]=k.useState(""),[t,i]=k.useState("all"),a=[{id:1,name:"Soft White",category:"wall",previewUrl:"/materials/wall-white.jpg",textureUrl:"/materials/textures/wall-white.jpg",color:"#f5f5f5",description:"Clean white wall finish"},{id:2,name:"Classic Brick",category:"wall",previewUrl:"/materials/wall-brick.jpg",textureUrl:"/materials/textures/wall-brick.jpg",color:"#c1665a",description:"Traditional red brick texture"},{id:3,name:"Modern Concrete",category:"wall",previewUrl:"/materials/wall-concrete.jpg",textureUrl:"/materials/textures/wall-concrete.jpg",color:"#ababab",description:"Sleek concrete finish"},{id:4,name:"Oak Hardwood",category:"floor",previewUrl:"/materials/floor-wood.jpg",textureUrl:"/materials/textures/floor-wood.jpg",color:"#b2916d",description:"Natural oak planks"},{id:5,name:"White Marble",category:"floor",previewUrl:"/materials/floor-marble.jpg",textureUrl:"/materials/textures/floor-marble.jpg",color:"#e8e8e8",description:"Luxury white marble tile"},{id:6,name:"Grey Carpet",category:"floor",previewUrl:"/materials/floor-carpet.jpg",textureUrl:"/materials/textures/floor-carpet.jpg",color:"#7d7d7d",description:"Soft plush carpeting"},{id:7,name:"Blue Cotton",category:"fabric",previewUrl:"/materials/fabric-blue.jpg",textureUrl:"/materials/textures/fabric-blue.jpg",color:"#4a6da7",description:"Soft blue cotton fabric"},{id:8,name:"Charcoal Linen",category:"fabric",previewUrl:"/materials/fabric-charcoal.jpg",textureUrl:"/materials/textures/fabric-charcoal.jpg",color:"#333333",description:"Dark linen upholstery"},{id:9,name:"Beige Canvas",category:"fabric",previewUrl:"/materials/fabric-beige.jpg",textureUrl:"/materials/textures/fabric-beige.jpg",color:"#d7ceb2",description:"Natural beige canvas"}],s=l=>{const d=ti.getState(),{selectedElement:f,updateElement:g}=d;if(!f){alert("Please select an element to apply material");return}if(!g){console.error("updateElement method not available in store");return}f.type==="wall"&&l.category==="wall"?g({material:l.textureUrl,color:l.color}):f.type==="room"&&l.category==="floor"?g({material:l.textureUrl,color:l.color}):f.type==="furniture"&&l.category==="fabric"?g({material:l.textureUrl,color:l.color}):alert(`This ${l.category} material cannot be applied to the selected ${f.type}`)},r=a.filter(l=>{const d=l.name.toLowerCase().includes(n.toLowerCase())||(l.description||"").toLowerCase().includes(n.toLowerCase()),f=t==="all"||l.category===t;return d&&f});return c.jsxs(Jt,{className:"h-full",children:[c.jsx(In,{children:c.jsxs(Bn,{className:"flex items-center gap-2",children:[c.jsx(hD,{className:"h-5 w-5"}),"Materials"]})}),c.jsxs(pn,{className:"p-0",children:[c.jsx("div",{className:"p-4 border-b",children:c.jsxs("div",{className:"relative",children:[c.jsx(H2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),c.jsx(Ta,{placeholder:"Search materials...",value:n,onChange:l=>e(l.target.value),className:"pl-10"})]})}),c.jsxs(_l,{value:t,onValueChange:i,children:[c.jsxs(Eo,{className:"grid grid-cols-4 p-0",children:[c.jsx(vn,{value:"all",children:"All"}),c.jsx(vn,{value:"wall",children:"Walls"}),c.jsx(vn,{value:"floor",children:"Floors"}),c.jsx(vn,{value:"fabric",children:"Fabrics"})]}),c.jsx(Ca,{className:"h-[400px] p-4",children:c.jsx("div",{className:"grid grid-cols-2 gap-3",children:r.length===0?c.jsxs("div",{className:"col-span-2 text-center py-8 text-gray-500",children:[c.jsx(hD,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No materials found"}),c.jsx("p",{className:"text-sm",children:"Try adjusting your search"})]}):r.map(l=>c.jsx($le,{material:l,onApply:s},l.id))})})]})]})]})},l6=()=>{const[n,e]=k.useState("#6366f1"),[t,i]=k.useState("analogous"),a=[{name:"Modern Minimalist",colors:["#F5F5F5","#EEEEEE","#E0E0E0","#212121","#616161"]},{name:"Warm Natural",colors:["#E6D2AA","#D5B892","#C49A6C","#8B7355","#5D4E33"]},{name:"Cool Elegant",colors:["#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#006064"]},{name:"Vibrant Pop",colors:["#FF5252","#FF4081","#E040FB","#7C4DFF","#536DFE"]},{name:"Scandinavian",colors:["#FFFFFF","#F5F5F5","#ECEFF1","#B0BEC5","#37474F"]}],s=(g,x)=>{const b=parseInt(g.substring(1,3),16),_=parseInt(g.substring(3,5),16),S=parseInt(g.substring(5,7),16),w=r(b,_,S);let M=w[0],E=w[1],T=w[2];switch(x){case"analogous":return[l(M,E,T),l((M+30)%360,E,T),l((M+60)%360,E,T),l((M-30+360)%360,E,T),l((M-60+360)%360,E,T)];case"complementary":return[l(M,E,T),l(M,E*.8,T*1.1),l(M,E*.5,T*1.2),l((M+180)%360,E,T),l((M+180)%360,E*.8,T*1.1)];case"triadic":return[l(M,E,T),l((M+120)%360,E,T),l((M+240)%360,E,T),l(M,E*.7,T*1.2),l(M,E*.5,T*1.4)];case"monochromatic":return[l(M,E,T*.6),l(M,E,T*.8),l(M,E,T),l(M,E,T*1.2),l(M,E*.8,T*1.3)];default:return[g,g,g,g,g]}},r=(g,x,b)=>{g/=255,x/=255,b/=255;const _=Math.max(g,x,b),S=Math.min(g,x,b);let w=0,M=0;const E=(_+S)/2;if(_!==S){const T=_-S;switch(M=E>.5?T/(2-_-S):T/(_+S),_){case g:w=(x-b)/T+(x<b?6:0);break;case x:w=(b-g)/T+2;break;case b:w=(g-x)/T+4;break}w/=6}return[Math.round(w*360),M,E]},l=(g,x,b)=>{b=Math.min(Math.max(0,b),1),x=Math.min(Math.max(0,x),1);const _=(1-Math.abs(2*b-1))*x,S=_*(1-Math.abs(g/60%2-1)),w=b-_/2;let M=0,E=0,T=0;0<=g&&g<60?(M=_,E=S,T=0):60<=g&&g<120?(M=S,E=_,T=0):120<=g&&g<180?(M=0,E=_,T=S):180<=g&&g<240?(M=0,E=S,T=_):240<=g&&g<300?(M=S,E=0,T=_):300<=g&&g<360&&(M=_,E=0,T=S);const C=Math.round((M+w)*255).toString(16).padStart(2,"0"),D=Math.round((E+w)*255).toString(16).padStart(2,"0"),P=Math.round((T+w)*255).toString(16).padStart(2,"0");return`#${C}${D}${P}`},d=s(n,t),f=g=>{const x=ti.getState(),b=x.selectedElements?.[0];if(!b){alert("Please select an element to apply color");return}const _=x,{type:S,id:w}=b;S==="wall"?_.updateWall(w,{color:g}):S==="room"?_.updateRoom(w,{color:g}):S==="furniture"?_.updateFurniture(w,{color:g}):console.warn(`Unknown element type: ${S}`)};return c.jsxs(Jt,{className:"h-full",children:[c.jsx(In,{children:c.jsxs(Bn,{className:"flex items-center gap-2",children:[c.jsx(k2,{className:"h-5 w-5"}),"Color Palettes"]})}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Base Color"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"color",value:n,onChange:g=>e(g.target.value),className:"w-12 h-12 rounded cursor-pointer"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:n.toUpperCase()}),c.jsx("p",{className:"text-xs text-gray-500",children:"Click to select a base color"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Color Theory"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:["analogous","complementary","triadic","monochromatic"].map(g=>c.jsx(it,{variant:t===g?"default":"outline",size:"sm",onClick:()=>i(g),className:"capitalize",children:g},g))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Generated Palette"}),c.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:d.map((g,x)=>c.jsx(it,{className:"h-12 w-full p-0",style:{backgroundColor:g},onClick:()=>f(g),children:c.jsxs("span",{className:"sr-only",children:["Select color ",g]})},x))})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"block text-sm font-medium",children:"Designer Palettes"}),c.jsx(wn,{variant:"outline",children:a.length})]}),a.map((g,x)=>c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-xs font-medium mb-1",children:g.name}),c.jsx("div",{className:"grid grid-cols-5 gap-1",children:g.colors.map((b,_)=>c.jsx(it,{className:"h-8 w-full p-0",style:{backgroundColor:b},onClick:()=>f(b),children:c.jsxs("span",{className:"sr-only",children:["Select ",g.name," color ",_+1]})},`${x}-${_}`))})]},g.name))]})]})]})},_o=k.forwardRef(({value:n=[50],onValueChange:e,max:t=100,min:i=0,step:a=1,className:s,disabled:r=!1,...l},d)=>{const[f,g]=k.useState(n),x=n||f,b=S=>{const w=[parseInt(S.target.value)];g(w),e&&e(w)},_=(x[0]-i)/(t-i)*100;return c.jsxs("div",{ref:d,className:fn("relative flex w-full touch-none select-none items-center",s),...l,children:[c.jsx("div",{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:c.jsx("div",{className:"absolute h-full bg-primary transition-all duration-200",style:{width:`${_}%`}})}),c.jsx("input",{type:"range",min:i,max:t,step:a,value:x[0],onChange:b,disabled:r,className:"absolute inset-0 h-full w-full cursor-pointer opacity-0"}),c.jsx("div",{className:"absolute block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",style:{left:`calc(${_}% - 10px)`}})]})});_o.displayName="Slider";const c6=()=>{const[n,e]=k.useState(75),[t,i]=k.useState(50),[a,s]=k.useState(30),r=[{name:"Morning",icon:c.jsx(p$,{className:"h-5 w-5"}),settings:{intensity:60,temperature:40,ambientLight:35}},{name:"Noon",icon:c.jsx(FT,{className:"h-5 w-5"}),settings:{intensity:90,temperature:50,ambientLight:25}},{name:"Evening",icon:c.jsx(g$,{className:"h-5 w-5"}),settings:{intensity:50,temperature:70,ambientLight:40}},{name:"Night",icon:c.jsx(WP,{className:"h-5 w-5"}),settings:{intensity:30,temperature:75,ambientLight:60}}],l=b=>{e(b.settings.intensity),i(b.settings.temperature),s(b.settings.ambientLight),d(b.settings.intensity,b.settings.temperature,b.settings.ambientLight)},d=(b,_,S)=>{const w=b/100,M=f(_),E=S/100,T=ti.getState();T.updateSceneLighting?T.updateSceneLighting({mainLight:w,ambientLight:E,temperature:M}):console.log("Lighting update - values to be implemented in store:",{mainLight:w,ambientLight:E,temperature:M})},f=b=>1e4-b/100*8e3,x=(b=>{let _,S,w;return b<6600?(_=255,S=b/100-2,w=b<2e3?0:(b-2e3)/4e3*255):(_=Math.max(0,329.698727446*Math.pow(b/100-60,-.1332047592)),S=Math.max(0,288.1221695283*Math.pow(b/100-60,-.0755148492)),w=255),`rgb(${Math.min(255,Math.max(0,Math.round(_)))}, ${Math.min(255,Math.max(0,Math.round(S)))}, ${Math.min(255,Math.max(0,Math.round(w)))})`})(f(t));return c.jsxs(Jt,{className:"h-full",children:[c.jsx(In,{children:c.jsxs(Bn,{className:"flex items-center gap-2",children:[c.jsx(FT,{className:"h-5 w-5"}),"Lighting"]})}),c.jsxs(pn,{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-3",children:"Time of Day"}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:r.map(b=>c.jsxs("button",{onClick:()=>l(b),className:"flex flex-col items-center justify-center p-3 border rounded-md hover:bg-gray-50 transition-colors",children:[b.icon,c.jsx("span",{className:"text-xs mt-1",children:b.name})]},b.name))})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center justify-between text-sm font-medium mb-2",children:[c.jsx("span",{children:"Light Intensity"}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[n,"%"]})]}),c.jsx(_o,{value:[n],min:0,max:100,step:1,onValueChange:b=>{e(b[0]),d(b[0],t,a)}}),c.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[c.jsx("span",{children:"Dim"}),c.jsx("span",{children:"Bright"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center justify-between text-sm font-medium mb-2",children:[c.jsx("span",{children:"Color Temperature"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:x}}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(f(t)),"K"]})]})]}),c.jsx(_o,{value:[t],min:0,max:100,step:1,onValueChange:b=>{i(b[0]),d(n,b[0],a)}}),c.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[c.jsx("span",{children:"Cool"}),c.jsx("span",{children:"Warm"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center justify-between text-sm font-medium mb-2",children:[c.jsx("span",{children:"Ambient Light"}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[a,"%"]})]}),c.jsx(_o,{value:[a],min:0,max:100,step:1,onValueChange:b=>{s(b[0]),d(n,t,b[0])}}),c.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[c.jsx("span",{children:"Soft"}),c.jsx("span",{children:"Strong"})]})]})]})]})},ece=_3(Jj((n,e)=>({comments:[],viewerComments:[],isLoading:!1,error:null,fetchComments:async t=>{n({isLoading:!0,error:null});try{const i=await ua.get(`/api/floorplanner/floorplans/${t}/comments/`);n({comments:i.data,isLoading:!1})}catch(i){console.error("Error fetching comments:",i),n({error:"Failed to load comments",isLoading:!1})}},addComment:async(t,i)=>{n({isLoading:!0,error:null});try{const a=await ua.post(`/api/floorplanner/floorplans/${t}/comments/`,i);return n(s=>({comments:[...s.comments,a.data],isLoading:!1})),a.data}catch(a){return console.error("Error adding comment:",a),n({error:"Failed to add comment",isLoading:!1}),null}},updateComment:async(t,i,a)=>{n({isLoading:!0,error:null});try{const s=await ua.put(`/api/floorplanner/floorplans/${t}/comments/${i}/`,a);return n(r=>({comments:r.comments.map(l=>l.id===i?s.data:l),isLoading:!1})),s.data}catch(s){return console.error("Error updating comment:",s),n({error:"Failed to update comment",isLoading:!1}),null}},deleteComment:async(t,i)=>{n({isLoading:!0,error:null});try{return await ua.delete(`/api/floorplanner/floorplans/${t}/comments/${i}/`),n(a=>({comments:a.comments.filter(s=>s.id!==i),isLoading:!1})),!0}catch(a){return console.error("Error deleting comment:",a),n({error:"Failed to delete comment",isLoading:!1}),!1}},fetchViewerComments:async t=>{n({isLoading:!0,error:null});try{const i=await ua.get(`/api/floorplanner/preview/${t}/comments/`);n({viewerComments:i.data,isLoading:!1})}catch(i){console.error("Error fetching viewer comments:",i),n({error:"Failed to load viewer comments",isLoading:!1})}},addViewerComment:async(t,i)=>{n({isLoading:!0,error:null});try{const a=await ua.post(`/api/floorplanner/preview/${t}/comments/`,i);return n(s=>({viewerComments:[...s.viewerComments,a.data],isLoading:!1})),a.data}catch(a){return console.error("Error adding viewer comment:",a),n({error:"Failed to add viewer comment",isLoading:!1}),null}},clearComments:()=>{n({comments:[],viewerComments:[]})}}),{name:"floorplanner-comments-storage"})),u6=()=>{const{comments:n,activeComment:e,setActiveComment:t,addCommentReply:i,removeComment:a,isPreviewMode:s,shareLinkId:r,floorPlanId:l}=ti(),{viewerComments:d,fetchViewerComments:f,addViewerComment:g,fetchComments:x}=ece(),[b,_]=k.useState(""),[S,w]=k.useState(localStorage.getItem("viewerName")||"");k.useEffect(()=>{s&&r?f(r):l&&x(l)},[s,r,l]);const E=(s?d:n).find(D=>D.id===e),T=D=>{if(D.preventDefault(),!(!b.trim()||!e)){if(s){if(!S.trim()){const P=prompt("Please enter your name to add a reply:","");if(!P)return;w(P),localStorage.setItem("viewerName",P)}g(r,{parentId:e,text:b,author:S,position:E.position})}else i(e,b);_("")}},C=()=>{!s&&confirm("Are you sure you want to delete this comment and all its replies?")&&a(e)};return!e||!E?c.jsxs("div",{className:"comments-panel p-4",children:[c.jsx("p",{className:"text-gray-500 italic",children:s?"No comment selected. Click on a comment pin on the canvas to view it.":"No comment selected. Click on a comment pin on the canvas or add a new comment."}),s&&c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name (for comments)"}),c.jsx("input",{type:"text",value:S,onChange:D=>{w(D.target.value),localStorage.setItem("viewerName",D.target.value)},className:"w-full p-2 border rounded-md",placeholder:"Enter your name"})]})]}):c.jsxs("div",{className:"comments-panel p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Comment Details"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>t(null),className:"text-gray-500 hover:text-gray-700",children:"Close"}),!s&&c.jsx("button",{onClick:C,className:"text-red-500 hover:text-red-700",children:"Delete"})]})]}),c.jsxs("div",{className:"bg-white rounded-md shadow-sm p-3 mb-4 border border-gray-200",children:[c.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[c.jsx("div",{className:"rounded-full bg-blue-500 text-white w-8 h-8 flex items-center justify-center font-bold",children:E.author?.charAt(0)||"U"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold",children:E.author||"User"}),c.jsx("div",{className:"text-gray-500 text-xs",children:new Date(E.createdAt).toLocaleDateString()})]})]}),c.jsx("p",{className:"text-gray-800 mt-2",children:E.text})]}),c.jsx("h4",{className:"font-medium mb-2",children:"Replies"}),E.replies?.length>0?c.jsx("div",{className:"space-y-3 mb-4 max-h-60 overflow-y-auto",children:E.replies.map(D=>c.jsxs("div",{className:"bg-gray-50 rounded p-2 border-l-2 border-blue-400",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"font-semibold text-sm",children:D.author||"User"}),c.jsx("div",{className:"text-gray-500 text-xs",children:new Date(D.createdAt).toLocaleDateString()})]}),c.jsx("p",{className:"text-sm mt-1",children:D.text})]},D.id))}):c.jsx("p",{className:"text-gray-500 italic text-sm mb-4",children:"No replies yet"}),c.jsxs("form",{onSubmit:T,className:"mt-4",children:[s&&c.jsxs("div",{className:"mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name"}),c.jsx("input",{type:"text",value:S,onChange:D=>{w(D.target.value),localStorage.setItem("viewerName",D.target.value)},className:"w-full p-2 border rounded-md mb-2",placeholder:"Enter your name"})]}),c.jsx("textarea",{value:b,onChange:D=>_(D.target.value),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-300 focus:border-blue-500",placeholder:"Add a reply...",rows:"2"}),c.jsx("button",{type:"submit",className:"mt-2 px-4 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md",disabled:!b.trim()||s&&!S.trim(),children:"Reply"})]})]})},d6=({showFloatingFeedback:n=!0})=>{const[e,t]=k.useState(null),[i,a]=k.useState([]),s=ti(_=>_.rooms),r=ti(_=>_.walls),l=ti(_=>_.furniture),d=ti(_=>_.getClearanceIssues()),f=ti(_=>_.calculateTotalArea),g=ti(_=>_.measurementUnit);if(k.useEffect(()=>{const _=f(),S=s.length,w=l.length,M=r.length,E={totalArea:_,roomCount:S,furnitureCount:w,wallCount:M,averageRoomSize:S>0?_/S:0,clearanceIssueCount:d.length,unit:g};t(E);const T=[];s.forEach(C=>{const{calculateAutomaticRoomMeasurements:D}=require("../utils/geometry"),P=D(C,g);P.area<9&&T.push({type:"warning",category:"room_size",message:`Room "${C.label||C.id}" is very small (${P.formatted.area})`,elementId:C.id}),(P.width<2.4||P.height<2.4)&&T.push({type:"warning",category:"room_dimension",message:`Room "${C.label||C.id}" has narrow dimensions`,elementId:C.id})}),d.forEach(C=>{T.push({type:C.severity,category:"clearance",message:C.description,elementId:C.elementId})}),_>500&&T.push({type:"info",category:"area",message:`Large floor plan detected (${_.toFixed(1)} ${g})`,elementId:null}),a(T)},[s,r,l,d,f,g]),!n||!e)return null;const x=i.filter(_=>_.type==="error").length,b=i.filter(_=>_.type==="warning").length;return c.jsxs("div",{className:"fixed bottom-4 right-4 z-50 space-y-2 max-w-sm",children:[c.jsxs("div",{className:"bg-white/95 backdrop-blur-sm border rounded-lg p-3 shadow-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(OP,{className:"h-4 w-4 text-blue-600"}),c.jsx("span",{className:"font-medium text-sm",children:"Design Metrics"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Total Area:"}),c.jsxs("div",{className:"font-medium",children:[e.totalArea.toFixed(1)," ",e.unit,""]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Rooms:"}),c.jsx("div",{className:"font-medium",children:e.roomCount})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Furniture:"}),c.jsx("div",{className:"font-medium",children:e.furnitureCount})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Avg Room:"}),c.jsxs("div",{className:"font-medium",children:[e.averageRoomSize.toFixed(1)," ",e.unit,""]})]})]})]}),c.jsxs("div",{className:"bg-white/95 backdrop-blur-sm border rounded-lg p-3 shadow-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x>0||b>0?c.jsx(ph,{className:"h-4 w-4 text-amber-600"}):c.jsx(Df,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{className:"font-medium text-sm",children:"Validation Status"})]}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[x>0&&c.jsxs(wn,{variant:"destructive",className:"text-xs",children:[x," Error",x!==1?"s":""]}),b>0&&c.jsxs(wn,{variant:"secondary",className:"text-xs",children:[b," Warning",b!==1?"s":""]}),x===0&&b===0&&c.jsx(wn,{variant:"default",className:"text-xs bg-green-100 text-green-800",children:"All Good"})]}),i.slice(0,2).map((_,S)=>c.jsx(Zo,{className:`mb-1 py-1 px-2 text-xs ${_.type==="error"?"border-red-200 bg-red-50":_.type==="warning"?"border-amber-200 bg-amber-50":"border-blue-200 bg-blue-50"}`,children:c.jsx(Qo,{className:"text-xs",children:_.message})},S)),i.length>2&&c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+",i.length-2," more issues"]})]})]})};function tce({children:n,rightPanel:e,toolbar:t}){const[i,a]=k.useState(!1),[s,r]=k.useState(!1),[l,d]=k.useState(!1),[f,g]=k.useState("portrait"),[x,b]=k.useState("drawer"),[_,S]=k.useState(!0);k.useEffect(()=>{const B=()=>{const O=window.innerWidth,I=window.innerHeight,W=O<=768,Q=window.devicePixelRatio||1;a(W);const J=window.innerWidth>window.innerHeight?"landscape":"portrait";g(J),W&&(J==="landscape"&&I<500?b("overlay"):b(J==="portrait"?"bottom":"drawer")),Q>1&&document.documentElement.style.setProperty("--pixel-ratio",Q.toString())};B();let F;const j=()=>{clearTimeout(F),F=setTimeout(B,100)};return window.addEventListener("resize",B),window.addEventListener("orientationchange",j),screen.orientation?.addEventListener("change",j),()=>{window.removeEventListener("resize",B),window.removeEventListener("orientationchange",j),screen.orientation?.removeEventListener("change",j),clearTimeout(F)}},[]);const w=k.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().then(()=>{d(!1)}).catch(B=>{console.error("Error exiting fullscreen:",B)}):document.documentElement.requestFullscreen().then(()=>{d(!0)}).catch(B=>{console.error("Error entering fullscreen:",B)})},[]),M=k.useCallback(()=>{try{if("orientation"in screen&&"lock"in screen.orientation){const B=f==="portrait"?"landscape":"portrait";screen.orientation.lock(B).catch(F=>{console.error("Error locking orientation:",F)})}}catch(B){console.error("Orientation lock not supported:",B)}},[f]),[E,T]=k.useState(null),[C,D]=k.useState(!1);k.useEffect(()=>{const B=F=>{F.preventDefault(),T(F),D(!0)};return window.addEventListener("beforeinstallprompt",B),()=>{window.removeEventListener("beforeinstallprompt",B)}},[]);const P=k.useCallback(()=>{E&&(E.prompt(),E.userChoice.then(B=>{B.outcome==="accepted"&&console.log("User accepted the install prompt"),T(null),D(!1)}))},[E]);return i?c.jsxs("div",{className:fn("floorplanner-app flex flex-col h-screen overflow-hidden",`orientation-${f}`,`layout-${x}`,_&&"touch-enabled"),children:[c.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-900 text-white safe-area-top",children:[c.jsxs(it,{variant:"ghost",size:"sm",onClick:()=>r(!0),className:"text-white touch-target min-h-[44px] min-w-[44px]",children:[c.jsx(gee,{className:"h-5 w-5"}),c.jsx("span",{className:"sr-only",children:"Open menu"})]}),c.jsx("h1",{className:"text-lg font-semibold truncate px-2",children:"FloorPlanner"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsxs(it,{variant:"ghost",size:"sm",onClick:()=>S(!_),className:fn("text-white touch-target min-h-[44px] min-w-[44px]",_&&"bg-blue-600"),children:[c.jsx(Mf,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Toggle touch interactions"})]}),c.jsxs(it,{variant:"ghost",size:"sm",onClick:M,className:"text-white touch-target min-h-[44px] min-w-[44px]",children:[c.jsx(Sg,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Rotate screen"})]}),c.jsxs(it,{variant:"ghost",size:"sm",onClick:w,className:"text-white touch-target min-h-[44px] min-w-[44px]",children:[l?c.jsx(DC,{className:"h-4 w-4"}):c.jsx(Vv,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Toggle fullscreen"})]})]})]}),s&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 touch-target",onClick:()=>r(!1),onTouchStart:B=>{const F=B.touches[0].clientX,j=O=>{O.touches[0].clientX-F<-100&&(r(!1),document.removeEventListener("touchmove",j))};document.addEventListener("touchmove",j,{passive:!0}),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",j)},{once:!0})}}),c.jsxs("div",{className:fn("fixed top-0 left-0 h-full bg-white z-50 transform transition-transform duration-300 overflow-y-auto safe-area-left safe-area-right",f==="landscape"?"w-80":"w-full max-w-sm"),children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Tools & Panels"}),c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>r(!1),className:"touch-target min-h-[44px] min-w-[44px]",children:c.jsx(Eg,{className:"h-5 w-5"})})]}),c.jsx("div",{className:"p-4 safe-area-bottom",children:e})]})]}),C&&c.jsxs("div",{className:"bg-blue-600 text-white p-3 flex items-center justify-between safe-area-left safe-area-right",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:"Install FloorPlanner for the best mobile experience"}),c.jsx("p",{className:"text-xs opacity-90 mt-1",children:"Works offline and provides better performance"})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(it,{variant:"ghost",size:"sm",onClick:P,className:"text-white border-white touch-target",children:"Install"}),c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>D(!1),className:"text-white touch-target",children:c.jsx(Eg,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:fn("floorplanner-toolbar bg-white border-b safe-area-left safe-area-right",f==="landscape"?"p-1":"p-2","overflow-x-auto scrollbar-hide"),children:[c.jsx("div",{className:"min-w-max",children:t}),c.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none",children:c.jsx("div",{className:"w-2 h-8 bg-gradient-to-l from-white via-transparent to-transparent"})})]}),c.jsxs("div",{className:fn("floorplanner-canvas flex-1 relative overflow-hidden",_&&"touch-action-none","safe-area-left safe-area-right"),children:[n,_&&c.jsx("div",{className:"absolute inset-0 pointer-events-none z-10",children:c.jsx("div",{className:"absolute bottom-4 left-4 bg-black bg-opacity-75 text-white text-xs p-2 rounded opacity-50",children:"Pinch to zoom  Two fingers to pan"})})]}),x==="bottom"&&f==="portrait"&&c.jsx("div",{className:fn("floorplanner-bottom-panel bg-gray-50 border-t overflow-y-auto safe-area-left safe-area-right safe-area-bottom","h-64 md:h-48"),children:c.jsx("div",{className:"p-3",children:e})}),x==="drawer"&&f==="landscape"&&!s&&c.jsx("div",{className:"fixed right-0 top-16 bottom-0 w-64 bg-gray-50 border-l overflow-y-auto z-30 safe-area-right safe-area-bottom",children:c.jsx("div",{className:"p-3",children:e})})]}):c.jsxs("div",{className:"floorplanner-app flex h-screen",children:[c.jsxs("div",{className:"flex-1 flex flex-col",children:[c.jsx("div",{className:"floorplanner-toolbar border-b bg-white p-2",children:t}),c.jsx("div",{className:"floorplanner-canvas flex-1",children:n})]}),c.jsx("div",{className:"floorplanner-right-panel w-80 border-l bg-gray-50",children:e})]})}const yx={preventDoubleZoom:()=>{let n=0;document.addEventListener("touchend",e=>{const t=new Date().getTime();t-n<=300&&e.preventDefault(),n=t},{passive:!1})},setViewportMeta:()=>{const n=document.querySelector("meta[name=viewport]");n&&n.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover")},handleSafeArea:()=>{document.documentElement.style.setProperty("--safe-area-inset-top","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--safe-area-inset-bottom","env(safe-area-inset-bottom)"),document.documentElement.style.setProperty("--safe-area-inset-left","env(safe-area-inset-left)"),document.documentElement.style.setProperty("--safe-area-inset-right","env(safe-area-inset-right)")},registerServiceWorker:async()=>{if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"){console.log("Service Worker registration skipped in development");return}if("serviceWorker"in navigator)try{const n=await navigator.serviceWorker.register("/static/floorplanner/sw.js");console.log("Service Worker registered successfully:",n),n.addEventListener("updatefound",()=>{const e=n.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&confirm("A new version is available. Reload to update?")&&window.location.reload()})})}catch(n){console.error("Service Worker registration failed:",n)}},enableBackgroundSync:()=>{"serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(n=>{const e=n;e.sync&&(e.sync.register("floorplan-save"),e.sync.register("collaboration-message"))})}},Af={drawingTools:{id:"drawingTools",title:"Drawing Tools",icon:"Move",defaultPosition:{x:20,y:80},defaultSize:{width:280,height:400},minSize:{width:250,height:300},resizable:!0,minimizable:!0,closable:!0,keyboardShortcut:"1",category:"tools",dockable:!0,groupable:!0},furnitureLibrary:{id:"furnitureLibrary",title:"Furniture Library",icon:"Package",defaultPosition:{x:320,y:80},defaultSize:{width:320,height:450},minSize:{width:280,height:350},resizable:!0,minimizable:!0,closable:!0,keyboardShortcut:"2",category:"content",dockable:!0,groupable:!0},materialPalette:{id:"materialPalette",title:"Materials & Colors",icon:"Palette",defaultPosition:{x:660,y:80},defaultSize:{width:300,height:400},minSize:{width:280,height:350},resizable:!0,minimizable:!0,closable:!0,keyboardShortcut:"3",category:"content",dockable:!0,groupable:!0},properties:{id:"properties",title:"Properties",icon:"Settings",defaultPosition:{x:980,y:80},defaultSize:{width:300,height:450},minSize:{width:280,height:350},resizable:!0,minimizable:!0,closable:!0,keyboardShortcut:"4",category:"editing",dockable:!0,groupable:!0},layers:{id:"layers",title:"Layers",icon:"Layers",defaultPosition:{x:20,y:500},defaultSize:{width:280,height:300},minSize:{width:250,height:200},resizable:!0,minimizable:!0,closable:!0},view3D:{id:"view3D",title:"3D View",icon:"Box",defaultPosition:{x:320,y:550},defaultSize:{width:400,height:300},minSize:{width:350,height:250},resizable:!0,minimizable:!0,closable:!0},collaboration:{id:"collaboration",title:"Collaboration",icon:"Users",defaultPosition:{x:740,y:500},defaultSize:{width:320,height:350},minSize:{width:300,height:300},resizable:!0,minimizable:!0,closable:!0},measurements:{id:"measurements",title:"Measurements",icon:"Ruler",defaultPosition:{x:20,y:820},defaultSize:{width:280,height:200},minSize:{width:250,height:150},resizable:!0,minimizable:!0,closable:!0},socialShare:{id:"socialShare",title:"Share & Collaborate",icon:"Share2",defaultPosition:{x:320,y:820},defaultSize:{width:300,height:400},minSize:{width:280,height:350},resizable:!0,minimizable:!0,closable:!0},enhancedSharing:{id:"enhancedSharing",title:"Advanced Sharing",icon:"Share",defaultPosition:{x:640,y:820},defaultSize:{width:400,height:500},minSize:{width:350,height:400},resizable:!0,minimizable:!0,closable:!0},advancedPanelManager:{id:"advancedPanelManager",title:"Panel Manager",icon:"Settings",defaultPosition:{x:640,y:820},defaultSize:{width:400,height:500},minSize:{width:350,height:400},resizable:!0,minimizable:!0,closable:!0},export:{id:"export",title:"Export & Share",icon:"Download",defaultPosition:{x:1080,y:550},defaultSize:{width:350,height:500},minSize:{width:320,height:400},resizable:!0,minimizable:!0,closable:!0,keyboardShortcut:"e",category:"tools",dockable:!0,groupable:!0},revisionHistory:{id:"revisionHistory",title:"Revision History",icon:"History",defaultPosition:{x:1400,y:80},defaultSize:{width:350,height:500},minSize:{width:320,height:400},resizable:!0,minimizable:!0,closable:!0,keyboardShortcut:"h",category:"tools",dockable:!0,groupable:!0},cadImport:{id:"cadImport",title:"CAD Import",icon:"Upload",defaultPosition:{x:1400,y:600},defaultSize:{width:350,height:500},minSize:{width:320,height:400},resizable:!0,minimizable:!0,closable:!0,keyboardShortcut:"i",category:"tools",dockable:!0,groupable:!0}},h6=()=>{const n={};return Object.values(Af).forEach((e,t)=>{n[e.id]={position:e.defaultPosition,size:e.defaultSize,isMinimized:!1,isVisible:!1,zIndex:100+t,isDocked:!1,isSnapped:!1}}),n.drawingTools.isVisible=!0,n.properties.isVisible=!0,n.furnitureLibrary.isVisible=!0,n.export.isVisible=!1,n.revisionHistory.isVisible=!1,n.cadImport.isVisible=!1,n},pv={1:"drawingTools",2:"furnitureLibrary",3:"materialPalette",4:"properties",5:"layers",6:"view3D",7:"collaboration",8:"measurements",9:"socialShare",0:"enhancedSharing",e:"export",h:"revisionHistory",i:"cadImport",p:"advancedPanelManager"},Nr=_3()(Jj((n,e)=>({panels:h6(),panelGroups:{},workspacePresets:{},activePresetId:void 0,maxZIndex:200,snapToEdges:!0,magneticBoundaries:!0,snapThreshold:20,keyboardShortcutsEnabled:!0,panelAnimations:!0,showPanel:t=>{n(i=>({panels:{...i.panels,[t]:{...i.panels[t],isVisible:!0,zIndex:i.maxZIndex+1}},maxZIndex:i.maxZIndex+1}))},hidePanel:t=>{n(i=>({panels:{...i.panels,[t]:{...i.panels[t],isVisible:!1}}}))},togglePanel:t=>{const{panels:i}=e();i[t]?.isVisible?e().hidePanel(t):e().showPanel(t)},minimizePanel:t=>{n(i=>({panels:{...i.panels,[t]:{...i.panels[t],isMinimized:!0}}}))},maximizePanel:t=>{n(i=>({panels:{...i.panels,[t]:{...i.panels[t],isMinimized:!1}}}))},toggleMinimize:t=>{const{panels:i}=e();i[t]?.isMinimized?e().maximizePanel(t):e().minimizePanel(t)},bringToFront:t=>{n(i=>({panels:{...i.panels,[t]:{...i.panels[t],zIndex:i.maxZIndex+1}},maxZIndex:i.maxZIndex+1}))},updatePanelPosition:(t,i)=>{n(a=>({panels:{...a.panels,[t]:{...a.panels[t],position:i}}}))},updatePanelSize:(t,i)=>{n(a=>({panels:{...a.panels,[t]:{...a.panels[t],size:i}}}))},updatePanelState:(t,i)=>{n(a=>({panels:{...a.panels,[t]:{...a.panels[t],...i}}}))},resetPanelLayout:()=>{n({panels:h6(),maxZIndex:200})},getVisiblePanels:()=>{const{panels:t}=e();return Object.keys(t).filter(i=>t[i]?.isVisible)},isPanelVisible:t=>{const{panels:i}=e();return i[t]?.isVisible||!1},isPanelMinimized:t=>{const{panels:i}=e();return i[t]?.isMinimized||!1},dockPanel:(t,i)=>{const a={width:window.innerWidth,height:window.innerHeight};let s;const r=e().panels[t];if(r){switch(i){case"left":s={x:0,y:r.position.y};break;case"right":s={x:a.width-r.size.width,y:r.position.y};break;case"top":s={x:r.position.x,y:0};break;case"bottom":s={x:r.position.x,y:a.height-r.size.height};break}n(l=>({panels:{...l.panels,[t]:{...l.panels[t],isDocked:!0,dockPosition:i,position:s}}}))}},undockPanel:t=>{n(i=>({panels:{...i.panels,[t]:{...i.panels[t],isDocked:!1,dockPosition:void 0}}}))},toggleDock:t=>{const{panels:i}=e(),a=i[t];if(a?.isDocked)e().undockPanel(t);else{const s={width:window.innerWidth,height:window.innerHeight},r=a.position.x+a.size.width/2,l=a.position.y+a.size.height/2;let d;r<s.width/4?d="left":r>s.width*3/4?d="right":l<s.height/4?d="top":d="bottom",e().dockPanel(t,d)}},createGroup:(t,i)=>{const a=`group_${Date.now()}`,s={id:a,name:t,panelIds:i,docked:!1,createdAt:Date.now()};return n(r=>({panelGroups:{...r.panelGroups,[a]:s},panels:{...r.panels,...i.reduce((l,d)=>(r.panels[d]&&(l[d]={...r.panels[d],groupId:a}),l),{})}})),a},removeGroup:t=>{const{panelGroups:i,panels:a}=e(),s=i[t];s&&n(r=>({panelGroups:Object.fromEntries(Object.entries(r.panelGroups).filter(([l])=>l!==t)),panels:{...r.panels,...s.panelIds.reduce((l,d)=>(r.panels[d]&&(l[d]={...r.panels[d],groupId:void 0}),l),{})}}))},addPanelToGroup:(t,i)=>{const{panelGroups:a,panels:s}=e(),r=a[i],l=s[t];!r||!l||n(d=>({panelGroups:{...d.panelGroups,[i]:{...r,panelIds:[...r.panelIds,t]}},panels:{...d.panels,[t]:{...l,groupId:i}}}))},removePanelFromGroup:t=>{const{panels:i}=e(),a=i[t];if(!a?.groupId)return;const s=a.groupId;n(r=>{const l=r.panelGroups[s];if(!l)return r;const d=l.panelIds.filter(f=>f!==t);return{...r,panelGroups:d.length>0?{...r.panelGroups,[s]:{...l,panelIds:d}}:Object.fromEntries(Object.entries(r.panelGroups).filter(([f])=>f!==s)),panels:{...r.panels,[t]:{...r.panels[t],groupId:void 0}}}})},moveGroup:(t,i)=>{const{panelGroups:a,panels:s}=e(),r=a[t];if(!r)return;const l=r.panelIds[0],d=s[l];if(!d)return;const f=i.x-d.position.x,g=i.y-d.position.y;n(x=>({panels:{...x.panels,...r.panelIds.reduce((b,_)=>{const S=x.panels[_];return S&&(b[_]={...S,position:{x:S.position.x+f,y:S.position.y+g}}),b},{})}}))},createPreset:(t,i)=>{const a=`preset_${Date.now()}`,{panels:s}=e(),r={id:a,name:t,description:i,panelStates:Object.fromEntries(Object.entries(s).map(([l,d])=>[l,{position:d.position,size:d.size,isVisible:d.isVisible,isMinimized:d.isMinimized,isDocked:d.isDocked,dockPosition:d.dockPosition}])),createdAt:Date.now()};return n(l=>({workspacePresets:{...l.workspacePresets,[a]:r}})),a},applyPreset:t=>{const{workspacePresets:i}=e(),a=i[t];a&&n(s=>({panels:{...s.panels,...Object.fromEntries(Object.entries(a.panelStates).map(([r,l])=>[r,{...s.panels[r],...l}]))},activePresetId:t}))},deletePreset:t=>{n(i=>({workspacePresets:Object.fromEntries(Object.entries(i.workspacePresets).filter(([a])=>a!==t)),activePresetId:i.activePresetId===t?void 0:i.activePresetId}))},setActivePreset:t=>{n({activePresetId:t})},snapPanelsToGrid:(t=20)=>{n(i=>({panels:Object.fromEntries(Object.entries(i.panels).map(([a,s])=>[a,{...s,position:{x:Math.round(s.position.x/t)*t,y:Math.round(s.position.y/t)*t},isSnapped:!0}]))})),setTimeout(()=>{n(i=>({panels:Object.fromEntries(Object.entries(i.panels).map(([a,s])=>[a,{...s,isSnapped:!1}]))}))},1e3)},distributeHorizontally:t=>{const{panels:i}=e(),a=t.filter(f=>i[f]?.isVisible);if(a.length<2)return;const s={width:window.innerWidth},r=a.reduce((f,g)=>f+i[g].size.width,0),l=Math.max(20,(s.width-r)/(a.length+1));let d=l;n(f=>({panels:{...f.panels,...a.reduce((g,x)=>{const b=f.panels[x];return g[x]={...b,position:{x:d,y:b.position.y}},d+=b.size.width+l,g},{})}}))},distributeVertically:t=>{const{panels:i}=e(),a=t.filter(f=>i[f]?.isVisible);if(a.length<2)return;const s={height:window.innerHeight},r=a.reduce((f,g)=>f+i[g].size.height,0),l=Math.max(20,(s.height-r)/(a.length+1));let d=l;n(f=>({panels:{...f.panels,...a.reduce((g,x)=>{const b=f.panels[x];return g[x]={...b,position:{x:b.position.x,y:d}},d+=b.size.height+l,g},{})}}))},cascadePanels:t=>{const{panels:i}=e(),a=t.filter(l=>i[l]?.isVisible);if(a.length<2)return;const s={x:30,y:30},r={x:50,y:50};n(l=>({panels:{...l.panels,...a.reduce((d,f,g)=>{const x=l.panels[f];return d[f]={...x,position:{x:r.x+g*s.x,y:r.y+g*s.y},zIndex:l.maxZIndex+g+1},d},{})},maxZIndex:l.maxZIndex+a.length}))},snapPanelToEdges:t=>{const{panels:i,snapThreshold:a}=e(),s=i[t];if(!s)return;const r={width:window.innerWidth,height:window.innerHeight};let l={...s.position};s.position.x<a?l.x=0:s.position.x+s.size.width>r.width-a&&(l.x=r.width-s.size.width),s.position.y<a?l.y=0:s.position.y+s.size.height>r.height-a&&(l.y=r.height-s.size.height),(l.x!==s.position.x||l.y!==s.position.y)&&e().updatePanelPosition(t,l)},enableMagneticBoundaries:t=>{n({magneticBoundaries:t})},setSnapThreshold:t=>{n({snapThreshold:Math.max(5,Math.min(50,t))})},toggleKeyboardShortcuts:t=>{n({keyboardShortcutsEnabled:t})},togglePanelAnimations:t=>{n({panelAnimations:t})},createWorkspaceLayout:(t,i)=>{const a=`workspace_${Date.now()}`,{panels:s}=e(),r={id:a,name:t,description:i,panelStates:Object.fromEntries(Object.entries(s).map(([l,d])=>[l,{position:d.position,size:d.size,isVisible:d.isVisible,isMinimized:d.isMinimized,isDocked:d.isDocked,dockPosition:d.dockPosition,groupId:d.groupId}])),createdAt:Date.now()};return n(l=>({workspacePresets:{...l.workspacePresets,[a]:r}})),a},switchWorkspace:t=>{e().applyPreset(t)},exportPanelLayout:()=>{const{panels:t,panelGroups:i,workspacePresets:a}=e(),s={panels:t,panelGroups:i,workspacePresets:a,exportedAt:new Date().toISOString(),version:"1.0"};return JSON.stringify(s,null,2)},importPanelLayout:t=>{try{const i=JSON.parse(t);i.version==="1.0"&&n({panels:{...e().panels,...i.panels},panelGroups:{...e().panelGroups,...i.panelGroups},workspacePresets:{...e().workspacePresets,...i.workspacePresets}})}catch(i){console.error("Failed to import panel layout:",i)}},focusPanel:t=>{const{panels:i}=e();i[t]&&(e().bringToFront(t),e().showPanel(t),i[t].isMinimized&&e().maximizePanel(t))},minimizeAllPanels:()=>{const{panels:t}=e(),i=Object.keys(t).filter(a=>t[a].isVisible);n(a=>({panels:{...a.panels,...i.reduce((s,r)=>(s[r]={...a.panels[r],isMinimized:!0},s),{})}}))},restoreAllPanels:()=>{const{panels:t}=e(),i=Object.keys(t).filter(a=>t[a].isMinimized);n(a=>({panels:{...a.panels,...i.reduce((s,r)=>(s[r]={...a.panels[r],isMinimized:!1},s),{})}}))},alignPanelsToGrid:t=>{const{panels:i}=e(),a=Object.keys(i).filter(s=>i[s].isVisible);n(s=>({panels:{...s.panels,...a.reduce((r,l)=>{const d=s.panels[l];return r[l]={...d,position:{x:Math.round(d.position.x/t)*t,y:Math.round(d.position.y/t)*t}},r},{})}}))}}),{name:"floorplanner-panels",storage:Qj(()=>localStorage),partialize:n=>({panels:n.panels,panelGroups:n.panelGroups,workspacePresets:n.workspacePresets,activePresetId:n.activePresetId})})),xA=()=>{const[n,e]=k.useState({isMobile:!1,isTablet:!1,isDesktop:!0,orientation:"portrait",screenSize:"lg"});return k.useEffect(()=>{const t=()=>{const s=window.innerWidth,r=window.innerHeight,l=s<=768,d=s>768&&s<=1024,f=s>1024,g=s>r?"landscape":"portrait";let x="lg";s<=640?x="sm":s<=768?x="md":s<=1024?x="lg":x="xl",e({isMobile:l,isTablet:d,isDesktop:f,orientation:g,screenSize:x})};t();const i=window.matchMedia("(orientation: portrait)"),a=()=>{setTimeout(t,100)};return window.addEventListener("resize",t),i.addEventListener("change",a),()=>{window.removeEventListener("resize",t),i.removeEventListener("change",a)}},[]),n},f6=({children:n})=>{const e=xA(),{panels:t,updatePanelPosition:i,updatePanelSize:a,getVisiblePanels:s}=Nr();return k.useEffect(()=>{const r=s();if(e.isMobile)r.forEach((l,d)=>{const f=t[l];f&&(i(l,{x:10,y:60+d*40}),a(l,{width:Math.min(f.size.width,window.innerWidth-20),height:Math.min(f.size.height,200)}))});else if(e.isTablet){const l=e.orientation==="landscape"?3:2;r.forEach((d,f)=>{const g=Math.floor(f/l),x=f%l,b=Math.floor((window.innerWidth-60)/l);i(d,{x:20+x*(b+20),y:80+g*320}),a(d,{width:b,height:300})})}},[e,t,i,a,s]),c.jsx("div",{className:fn("responsive-panel-container",e.isMobile&&"mobile-layout",e.isTablet&&"tablet-layout",e.orientation==="landscape"&&"landscape-mode"),children:n})};var xx={exports:{}},HM={},GM={exports:{}},VM,p6;function nce(){if(p6)return VM;p6=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return VM=n,VM}var qM,m6;function ice(){if(m6)return qM;m6=1;var n=nce();function e(){}function t(){}return t.resetWarningCache=e,qM=function(){function i(r,l,d,f,g,x){if(x!==n){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}i.isRequired=i;function a(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},qM}var g6;function pL(){return g6||(g6=1,GM.exports=ice()()),GM.exports}function mL(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=mL(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function v6(){for(var n,e,t=0,i="";t<arguments.length;)(n=arguments[t++])&&(e=mL(n))&&(i&&(i+=" "),i+=e);return i}const ace=Object.freeze(Object.defineProperty({__proto__:null,clsx:v6,default:v6},Symbol.toStringTag,{value:"Module"})),sce=Oz(ace);var Hs={},jp={},y6;function mE(){if(y6)return jp;y6=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.dontSetMe=a,jp.findInArray=n,jp.int=i,jp.isFunction=e,jp.isNum=t;function n(s,r){for(let l=0,d=s.length;l<d;l++)if(r.apply(r,[s[l],l,s]))return s[l]}function e(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Function]"}function t(s){return typeof s=="number"&&!isNaN(s)}function i(s){return parseInt(s,10)}function a(s,r,l){if(s[r])return new Error("Invalid prop ".concat(r," passed to ").concat(l," - do not set this, set it on the child."))}return jp}var Pp={},x6;function rce(){if(x6)return Pp;x6=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.browserPrefixToKey=t,Pp.browserPrefixToStyle=i,Pp.default=void 0,Pp.getPrefix=e;const n=["Moz","Webkit","O","ms"];function e(){var s;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const l=(s=window.document)===null||s===void 0||(s=s.documentElement)===null||s===void 0?void 0:s.style;if(!l||r in l)return"";for(let d=0;d<n.length;d++)if(t(r,n[d])in l)return n[d];return""}function t(s,r){return r?"".concat(r).concat(a(s)):s}function i(s,r){return r?"-".concat(r.toLowerCase(),"-").concat(s):s}function a(s){let r="",l=!0;for(let d=0;d<s.length;d++)l?(r+=s[d].toUpperCase(),l=!1):s[d]==="-"?l=!0:r+=s[d];return r}return Pp.default=e(),Pp}var b6;function bA(){if(b6)return Hs;b6=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.addClassName=P,Hs.addEvent=l,Hs.addUserSelectStyles=C,Hs.createCSSTransform=S,Hs.createSVGTransform=w,Hs.getTouch=E,Hs.getTouchIdentifier=T,Hs.getTranslation=M,Hs.innerHeight=x,Hs.innerWidth=b,Hs.matchesSelector=s,Hs.matchesSelectorAndParentsTo=r,Hs.offsetXYFromParent=_,Hs.outerHeight=f,Hs.outerWidth=g,Hs.removeClassName=B,Hs.removeEvent=d,Hs.removeUserSelectStyles=D;var n=mE(),e=i(rce());function t(F){if(typeof WeakMap!="function")return null;var j=new WeakMap,O=new WeakMap;return(t=function(I){return I?O:j})(F)}function i(F,j){if(F&&F.__esModule)return F;if(F===null||typeof F!="object"&&typeof F!="function")return{default:F};var O=t(j);if(O&&O.has(F))return O.get(F);var I={},W=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in F)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(F,Q)){var J=W?Object.getOwnPropertyDescriptor(F,Q):null;J&&(J.get||J.set)?Object.defineProperty(I,Q,J):I[Q]=F[Q]}return I.default=F,O&&O.set(F,I),I}let a="";function s(F,j){return a||(a=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(O){return(0,n.isFunction)(F[O])})),(0,n.isFunction)(F[a])?F[a](j):!1}function r(F,j,O){let I=F;do{if(s(I,j))return!0;if(I===O)return!1;I=I.parentNode}while(I);return!1}function l(F,j,O,I){if(!F)return;const W={capture:!0,...I};F.addEventListener?F.addEventListener(j,O,W):F.attachEvent?F.attachEvent("on"+j,O):F["on"+j]=O}function d(F,j,O,I){if(!F)return;const W={capture:!0,...I};F.removeEventListener?F.removeEventListener(j,O,W):F.detachEvent?F.detachEvent("on"+j,O):F["on"+j]=null}function f(F){let j=F.clientHeight;const O=F.ownerDocument.defaultView.getComputedStyle(F);return j+=(0,n.int)(O.borderTopWidth),j+=(0,n.int)(O.borderBottomWidth),j}function g(F){let j=F.clientWidth;const O=F.ownerDocument.defaultView.getComputedStyle(F);return j+=(0,n.int)(O.borderLeftWidth),j+=(0,n.int)(O.borderRightWidth),j}function x(F){let j=F.clientHeight;const O=F.ownerDocument.defaultView.getComputedStyle(F);return j-=(0,n.int)(O.paddingTop),j-=(0,n.int)(O.paddingBottom),j}function b(F){let j=F.clientWidth;const O=F.ownerDocument.defaultView.getComputedStyle(F);return j-=(0,n.int)(O.paddingLeft),j-=(0,n.int)(O.paddingRight),j}function _(F,j,O){const W=j===j.ownerDocument.body?{left:0,top:0}:j.getBoundingClientRect(),Q=(F.clientX+j.scrollLeft-W.left)/O,J=(F.clientY+j.scrollTop-W.top)/O;return{x:Q,y:J}}function S(F,j){const O=M(F,j,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:O}}function w(F,j){return M(F,j,"")}function M(F,j,O){let{x:I,y:W}=F,Q="translate(".concat(I).concat(O,",").concat(W).concat(O,")");if(j){const J="".concat(typeof j.x=="string"?j.x:j.x+O),te="".concat(typeof j.y=="string"?j.y:j.y+O);Q="translate(".concat(J,", ").concat(te,")")+Q}return Q}function E(F,j){return F.targetTouches&&(0,n.findInArray)(F.targetTouches,O=>j===O.identifier)||F.changedTouches&&(0,n.findInArray)(F.changedTouches,O=>j===O.identifier)}function T(F){if(F.targetTouches&&F.targetTouches[0])return F.targetTouches[0].identifier;if(F.changedTouches&&F.changedTouches[0])return F.changedTouches[0].identifier}function C(F){if(!F)return;let j=F.getElementById("react-draggable-style-el");j||(j=F.createElement("style"),j.type="text/css",j.id="react-draggable-style-el",j.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,j.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,F.getElementsByTagName("head")[0].appendChild(j)),F.body&&P(F.body,"react-draggable-transparent-selection")}function D(F){if(F)try{if(F.body&&B(F.body,"react-draggable-transparent-selection"),F.selection)F.selection.empty();else{const j=(F.defaultView||window).getSelection();j&&j.type!=="Caret"&&j.removeAllRanges()}}catch{}}function P(F,j){F.classList?F.classList.add(j):F.className.match(new RegExp("(?:^|\\s)".concat(j,"(?!\\S)")))||(F.className+=" ".concat(j))}function B(F,j){F.classList?F.classList.remove(j):F.className=F.className.replace(new RegExp("(?:^|\\s)".concat(j,"(?!\\S)"),"g"),"")}return Hs}var nh={},_6;function gL(){if(_6)return nh;_6=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.canDragX=a,nh.canDragY=s,nh.createCoreData=l,nh.createDraggableData=d,nh.getBoundPosition=t,nh.getControlPosition=r,nh.snapToGrid=i;var n=mE(),e=bA();function t(x,b,_){if(!x.props.bounds)return[b,_];let{bounds:S}=x.props;S=typeof S=="string"?S:f(S);const w=g(x);if(typeof S=="string"){const{ownerDocument:M}=w,E=M.defaultView;let T;if(S==="parent"?T=w.parentNode:T=M.querySelector(S),!(T instanceof E.HTMLElement))throw new Error('Bounds selector "'+S+'" could not find an element.');const C=T,D=E.getComputedStyle(w),P=E.getComputedStyle(C);S={left:-w.offsetLeft+(0,n.int)(P.paddingLeft)+(0,n.int)(D.marginLeft),top:-w.offsetTop+(0,n.int)(P.paddingTop)+(0,n.int)(D.marginTop),right:(0,e.innerWidth)(C)-(0,e.outerWidth)(w)-w.offsetLeft+(0,n.int)(P.paddingRight)-(0,n.int)(D.marginRight),bottom:(0,e.innerHeight)(C)-(0,e.outerHeight)(w)-w.offsetTop+(0,n.int)(P.paddingBottom)-(0,n.int)(D.marginBottom)}}return(0,n.isNum)(S.right)&&(b=Math.min(b,S.right)),(0,n.isNum)(S.bottom)&&(_=Math.min(_,S.bottom)),(0,n.isNum)(S.left)&&(b=Math.max(b,S.left)),(0,n.isNum)(S.top)&&(_=Math.max(_,S.top)),[b,_]}function i(x,b,_){const S=Math.round(b/x[0])*x[0],w=Math.round(_/x[1])*x[1];return[S,w]}function a(x){return x.props.axis==="both"||x.props.axis==="x"}function s(x){return x.props.axis==="both"||x.props.axis==="y"}function r(x,b,_){const S=typeof b=="number"?(0,e.getTouch)(x,b):null;if(typeof b=="number"&&!S)return null;const w=g(_),M=_.props.offsetParent||w.offsetParent||w.ownerDocument.body;return(0,e.offsetXYFromParent)(S||x,M,_.props.scale)}function l(x,b,_){const S=!(0,n.isNum)(x.lastX),w=g(x);return S?{node:w,deltaX:0,deltaY:0,lastX:b,lastY:_,x:b,y:_}:{node:w,deltaX:b-x.lastX,deltaY:_-x.lastY,lastX:x.lastX,lastY:x.lastY,x:b,y:_}}function d(x,b){const _=x.props.scale;return{node:b.node,x:x.state.x+b.deltaX/_,y:x.state.y+b.deltaY/_,deltaX:b.deltaX/_,deltaY:b.deltaY/_,lastX:x.state.x,lastY:x.state.y}}function f(x){return{left:x.left,top:x.top,right:x.right,bottom:x.bottom}}function g(x){const b=x.findDOMNode();if(!b)throw new Error("<DraggableCore>: Unmounted during event!");return b}return nh}var bx={},h_={},S6;function vL(){if(S6)return h_;S6=1,Object.defineProperty(h_,"__esModule",{value:!0}),h_.default=n;function n(){}return h_}var E6;function oce(){if(E6)return bx;E6=1,Object.defineProperty(bx,"__esModule",{value:!0}),bx.default=void 0;var n=f(Lf()),e=l(pL()),t=l(qS()),i=bA(),a=gL(),s=mE(),r=l(vL());function l(M){return M&&M.__esModule?M:{default:M}}function d(M){if(typeof WeakMap!="function")return null;var E=new WeakMap,T=new WeakMap;return(d=function(C){return C?T:E})(M)}function f(M,E){if(M&&M.__esModule)return M;if(M===null||typeof M!="object"&&typeof M!="function")return{default:M};var T=d(E);if(T&&T.has(M))return T.get(M);var C={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in M)if(P!=="default"&&Object.prototype.hasOwnProperty.call(M,P)){var B=D?Object.getOwnPropertyDescriptor(M,P):null;B&&(B.get||B.set)?Object.defineProperty(C,P,B):C[P]=M[P]}return C.default=M,T&&T.set(M,C),C}function g(M,E,T){return E=x(E),E in M?Object.defineProperty(M,E,{value:T,enumerable:!0,configurable:!0,writable:!0}):M[E]=T,M}function x(M){var E=b(M,"string");return typeof E=="symbol"?E:String(E)}function b(M,E){if(typeof M!="object"||M===null)return M;var T=M[Symbol.toPrimitive];if(T!==void 0){var C=T.call(M,E);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(M)}const _={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let S=_.mouse,w=class extends n.Component{constructor(){super(...arguments),g(this,"dragging",!1),g(this,"lastX",NaN),g(this,"lastY",NaN),g(this,"touchIdentifier",null),g(this,"mounted",!1),g(this,"handleDragStart",E=>{if(this.props.onMouseDown(E),!this.props.allowAnyClick&&typeof E.button=="number"&&E.button!==0)return!1;const T=this.findDOMNode();if(!T||!T.ownerDocument||!T.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:C}=T;if(this.props.disabled||!(E.target instanceof C.defaultView.Node)||this.props.handle&&!(0,i.matchesSelectorAndParentsTo)(E.target,this.props.handle,T)||this.props.cancel&&(0,i.matchesSelectorAndParentsTo)(E.target,this.props.cancel,T))return;E.type==="touchstart"&&E.preventDefault();const D=(0,i.getTouchIdentifier)(E);this.touchIdentifier=D;const P=(0,a.getControlPosition)(E,D,this);if(P==null)return;const{x:B,y:F}=P,j=(0,a.createCoreData)(this,B,F);(0,r.default)("DraggableCore: handleDragStart: %j",j),(0,r.default)("calling",this.props.onStart),!(this.props.onStart(E,j)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,i.addUserSelectStyles)(C),this.dragging=!0,this.lastX=B,this.lastY=F,(0,i.addEvent)(C,S.move,this.handleDrag),(0,i.addEvent)(C,S.stop,this.handleDragStop))}),g(this,"handleDrag",E=>{const T=(0,a.getControlPosition)(E,this.touchIdentifier,this);if(T==null)return;let{x:C,y:D}=T;if(Array.isArray(this.props.grid)){let F=C-this.lastX,j=D-this.lastY;if([F,j]=(0,a.snapToGrid)(this.props.grid,F,j),!F&&!j)return;C=this.lastX+F,D=this.lastY+j}const P=(0,a.createCoreData)(this,C,D);if((0,r.default)("DraggableCore: handleDrag: %j",P),this.props.onDrag(E,P)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const j=document.createEvent("MouseEvents");j.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(j)}return}this.lastX=C,this.lastY=D}),g(this,"handleDragStop",E=>{if(!this.dragging)return;const T=(0,a.getControlPosition)(E,this.touchIdentifier,this);if(T==null)return;let{x:C,y:D}=T;if(Array.isArray(this.props.grid)){let j=C-this.lastX||0,O=D-this.lastY||0;[j,O]=(0,a.snapToGrid)(this.props.grid,j,O),C=this.lastX+j,D=this.lastY+O}const P=(0,a.createCoreData)(this,C,D);if(this.props.onStop(E,P)===!1||this.mounted===!1)return!1;const F=this.findDOMNode();F&&this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(F.ownerDocument),(0,r.default)("DraggableCore: handleDragStop: %j",P),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,F&&((0,r.default)("DraggableCore: Removing handlers"),(0,i.removeEvent)(F.ownerDocument,S.move,this.handleDrag),(0,i.removeEvent)(F.ownerDocument,S.stop,this.handleDragStop))}),g(this,"onMouseDown",E=>(S=_.mouse,this.handleDragStart(E))),g(this,"onMouseUp",E=>(S=_.mouse,this.handleDragStop(E))),g(this,"onTouchStart",E=>(S=_.touch,this.handleDragStart(E))),g(this,"onTouchEnd",E=>(S=_.touch,this.handleDragStop(E)))}componentDidMount(){this.mounted=!0;const E=this.findDOMNode();E&&(0,i.addEvent)(E,_.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const E=this.findDOMNode();if(E){const{ownerDocument:T}=E;(0,i.removeEvent)(T,_.mouse.move,this.handleDrag),(0,i.removeEvent)(T,_.touch.move,this.handleDrag),(0,i.removeEvent)(T,_.mouse.stop,this.handleDragStop),(0,i.removeEvent)(T,_.touch.stop,this.handleDragStop),(0,i.removeEvent)(E,_.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(T)}}findDOMNode(){var E,T;return(E=this.props)!==null&&E!==void 0&&E.nodeRef?(T=this.props)===null||T===void 0||(T=T.nodeRef)===null||T===void 0?void 0:T.current:t.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return bx.default=w,g(w,"displayName","DraggableCore"),g(w,"propTypes",{allowAnyClick:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(M,E){if(M[E]&&M[E].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),g(w,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),bx}var w6;function lce(){return w6||(w6=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),n.default=void 0;var e=b(Lf()),t=g(pL()),i=g(qS()),a=g(sce),s=bA(),r=gL(),l=mE(),d=g(oce()),f=g(vL());function g(T){return T&&T.__esModule?T:{default:T}}function x(T){if(typeof WeakMap!="function")return null;var C=new WeakMap,D=new WeakMap;return(x=function(P){return P?D:C})(T)}function b(T,C){if(T&&T.__esModule)return T;if(T===null||typeof T!="object"&&typeof T!="function")return{default:T};var D=x(C);if(D&&D.has(T))return D.get(T);var P={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in T)if(F!=="default"&&Object.prototype.hasOwnProperty.call(T,F)){var j=B?Object.getOwnPropertyDescriptor(T,F):null;j&&(j.get||j.set)?Object.defineProperty(P,F,j):P[F]=T[F]}return P.default=T,D&&D.set(T,P),P}function _(){return _=Object.assign?Object.assign.bind():function(T){for(var C=1;C<arguments.length;C++){var D=arguments[C];for(var P in D)Object.prototype.hasOwnProperty.call(D,P)&&(T[P]=D[P])}return T},_.apply(this,arguments)}function S(T,C,D){return C=w(C),C in T?Object.defineProperty(T,C,{value:D,enumerable:!0,configurable:!0,writable:!0}):T[C]=D,T}function w(T){var C=M(T,"string");return typeof C=="symbol"?C:String(C)}function M(T,C){if(typeof T!="object"||T===null)return T;var D=T[Symbol.toPrimitive];if(D!==void 0){var P=D.call(T,C);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(T)}class E extends e.Component{static getDerivedStateFromProps(C,D){let{position:P}=C,{prevPropsPosition:B}=D;return P&&(!B||P.x!==B.x||P.y!==B.y)?((0,f.default)("Draggable: getDerivedStateFromProps %j",{position:P,prevPropsPosition:B}),{x:P.x,y:P.y,prevPropsPosition:{...P}}):null}constructor(C){super(C),S(this,"onDragStart",(D,P)=>{if((0,f.default)("Draggable: onDragStart: %j",P),this.props.onStart(D,(0,r.createDraggableData)(this,P))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),S(this,"onDrag",(D,P)=>{if(!this.state.dragging)return!1;(0,f.default)("Draggable: onDrag: %j",P);const B=(0,r.createDraggableData)(this,P),F={x:B.x,y:B.y,slackX:0,slackY:0};if(this.props.bounds){const{x:O,y:I}=F;F.x+=this.state.slackX,F.y+=this.state.slackY;const[W,Q]=(0,r.getBoundPosition)(this,F.x,F.y);F.x=W,F.y=Q,F.slackX=this.state.slackX+(O-F.x),F.slackY=this.state.slackY+(I-F.y),B.x=F.x,B.y=F.y,B.deltaX=F.x-this.state.x,B.deltaY=F.y-this.state.y}if(this.props.onDrag(D,B)===!1)return!1;this.setState(F)}),S(this,"onDragStop",(D,P)=>{if(!this.state.dragging||this.props.onStop(D,(0,r.createDraggableData)(this,P))===!1)return!1;(0,f.default)("Draggable: onDragStop: %j",P);const F={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:O,y:I}=this.props.position;F.x=O,F.y=I}this.setState(F)}),this.state={dragging:!1,dragged:!1,x:C.position?C.position.x:C.defaultPosition.x,y:C.position?C.position.y:C.defaultPosition.y,prevPropsPosition:{...C.position},slackX:0,slackY:0,isElementSVG:!1},C.position&&!(C.onDrag||C.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var C,D;return(C=(D=this.props)===null||D===void 0||(D=D.nodeRef)===null||D===void 0?void 0:D.current)!==null&&C!==void 0?C:i.default.findDOMNode(this)}render(){const{axis:C,bounds:D,children:P,defaultPosition:B,defaultClassName:F,defaultClassNameDragging:j,defaultClassNameDragged:O,position:I,positionOffset:W,scale:Q,...J}=this.props;let te={},oe=null;const X=!!!I||this.state.dragging,G=I||B,ee={x:(0,r.canDragX)(this)&&X?this.state.x:G.x,y:(0,r.canDragY)(this)&&X?this.state.y:G.y};this.state.isElementSVG?oe=(0,s.createSVGTransform)(ee,W):te=(0,s.createCSSTransform)(ee,W);const Y=(0,a.default)(P.props.className||"",F,{[j]:this.state.dragging,[O]:this.state.dragged});return e.createElement(d.default,_({},J,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(P),{className:Y,style:{...P.props.style,...te},transform:oe}))}}n.default=E,S(E,"displayName","Draggable"),S(E,"propTypes",{...d.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),S(E,"defaultProps",{...d.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(HM)),HM}var M6;function cce(){if(M6)return xx.exports;M6=1;const{default:n,DraggableCore:e}=lce();return xx.exports=n,xx.exports.default=n,xx.exports.DraggableCore=e,xx.exports}var uce=cce();const dce=Uf(uce);var ur=function(){return ur=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},ur.apply(this,arguments)},T6={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},C6={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},f_={width:"20px",height:"20px",position:"absolute",zIndex:1},hce={top:ur(ur({},T6),{top:"-5px"}),right:ur(ur({},C6),{left:void 0,right:"-5px"}),bottom:ur(ur({},T6),{top:void 0,bottom:"-5px"}),left:ur(ur({},C6),{left:"-5px"}),topRight:ur(ur({},f_),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:ur(ur({},f_),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:ur(ur({},f_),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:ur(ur({},f_),{left:"-10px",top:"-10px",cursor:"nw-resize"})},fce=k.memo(function(n){var e=n.onResizeStart,t=n.direction,i=n.children,a=n.replaceStyles,s=n.className,r=k.useCallback(function(f){e(f,t)},[e,t]),l=k.useCallback(function(f){e(f,t)},[e,t]),d=k.useMemo(function(){return ur(ur({position:"absolute",userSelect:"none"},hce[t]),a??{})},[a,t]);return c.jsx("div",{className:s||void 0,style:d,onMouseDown:r,onTouchStart:l,children:i})}),pce=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ah=function(){return ah=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},ah.apply(this,arguments)},mce={width:"auto",height:"auto"},p_=function(n,e,t){return Math.max(Math.min(n,t),e)},A6=function(n,e,t){var i=Math.round(n/e);return i*e+t*(i-1)},ev=function(n,e){return new RegExp(n,"i").test(e)},m_=function(n){return!!(n.touches&&n.touches.length)},gce=function(n){return!!((n.clientX||n.clientX===0)&&(n.clientY||n.clientY===0))},N6=function(n,e,t){t===void 0&&(t=0);var i=e.reduce(function(s,r,l){return Math.abs(r-n)<Math.abs(e[s]-n)?l:s},0),a=Math.abs(e[i]-n);return t===0||a<t?e[i]:n},XM=function(n){return n=n.toString(),n==="auto"||n.endsWith("px")||n.endsWith("%")||n.endsWith("vh")||n.endsWith("vw")||n.endsWith("vmax")||n.endsWith("vmin")?n:"".concat(n,"px")},g_=function(n,e,t,i){if(n&&typeof n=="string"){if(n.endsWith("px"))return Number(n.replace("px",""));if(n.endsWith("%")){var a=Number(n.replace("%",""))/100;return e*a}if(n.endsWith("vw")){var a=Number(n.replace("vw",""))/100;return t*a}if(n.endsWith("vh")){var a=Number(n.replace("vh",""))/100;return i*a}}return n},vce=function(n,e,t,i,a,s,r){return i=g_(i,n.width,e,t),a=g_(a,n.height,e,t),s=g_(s,n.width,e,t),r=g_(r,n.height,e,t),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof a>"u"?void 0:Number(a),minWidth:typeof s>"u"?void 0:Number(s),minHeight:typeof r>"u"?void 0:Number(r)}},yce=function(n){return Array.isArray(n)?n:[n,n]},xce=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],R6="__resizable_base__",bce=function(n){pce(e,n);function e(t){var i,a,s,r,l=n.call(this,t)||this;return l.ratio=1,l.resizable=null,l.parentLeft=0,l.parentTop=0,l.resizableLeft=0,l.resizableRight=0,l.resizableTop=0,l.resizableBottom=0,l.targetLeft=0,l.targetTop=0,l.delta={width:0,height:0},l.appendBase=function(){if(!l.resizable||!l.window)return null;var d=l.parentNode;if(!d)return null;var f=l.window.document.createElement("div");return f.style.width="100%",f.style.height="100%",f.style.position="absolute",f.style.transform="scale(0, 0)",f.style.left="0",f.style.flex="0 0 100%",f.classList?f.classList.add(R6):f.className+=R6,d.appendChild(f),f},l.removeBase=function(d){var f=l.parentNode;f&&f.removeChild(d)},l.state={isResizing:!1,width:(a=(i=l.propsSize)===null||i===void 0?void 0:i.width)!==null&&a!==void 0?a:"auto",height:(r=(s=l.propsSize)===null||s===void 0?void 0:s.height)!==null&&r!==void 0?r:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},l.onResizeStart=l.onResizeStart.bind(l),l.onMouseMove=l.onMouseMove.bind(l),l.onMouseUp=l.onMouseUp.bind(l),l}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||mce},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,i=0;if(this.resizable&&this.window){var a=this.resizable.offsetWidth,s=this.resizable.offsetHeight,r=this.resizable.style.position;r!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:a,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:s,this.resizable.style.position=r}return{width:t,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,i=this.props.size,a=function(l){var d;if(typeof t.state[l]>"u"||t.state[l]==="auto")return"auto";if(t.propsSize&&t.propsSize[l]&&(!((d=t.propsSize[l])===null||d===void 0)&&d.toString().endsWith("%"))){if(t.state[l].toString().endsWith("%"))return t.state[l].toString();var f=t.getParentSize(),g=Number(t.state[l].toString().replace("px","")),x=g/f[l]*100;return"".concat(x,"%")}return XM(t.state[l])},s=i&&typeof i.width<"u"&&!this.state.isResizing?XM(i.width):a("width"),r=i&&typeof i.height<"u"&&!this.state.isResizing?XM(i.height):a("height");return{width:s,height:r}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var i=!1,a=this.parentNode.style.flexWrap;a!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var s={width:t.offsetWidth,height:t.offsetHeight};return i&&(this.parentNode.style.flexWrap=a),this.removeBase(t),s},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,i){var a=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===t&&(typeof a>"u"||a==="auto")?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,i){var a=this.props.boundsByDirection,s=this.state.direction,r=a&&ev("left",s),l=a&&ev("top",s),d,f;if(this.props.bounds==="parent"){var g=this.parentNode;g&&(d=r?this.resizableRight-this.parentLeft:g.offsetWidth+(this.parentLeft-this.resizableLeft),f=l?this.resizableBottom-this.parentTop:g.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(d=r?this.resizableRight:this.window.innerWidth-this.resizableLeft,f=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(d=r?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),f=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return d&&Number.isFinite(d)&&(t=t&&t<d?t:d),f&&Number.isFinite(f)&&(i=i&&i<f?i:f),{maxWidth:t,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(t,i){var a=this.props.scale||1,s=yce(this.props.resizeRatio||1),r=s[0],l=s[1],d=this.state,f=d.direction,g=d.original,x=this.props,b=x.lockAspectRatio,_=x.lockAspectRatioExtraHeight,S=x.lockAspectRatioExtraWidth,w=g.width,M=g.height,E=_||0,T=S||0;return ev("right",f)&&(w=g.width+(t-g.x)*r/a,b&&(M=(w-T)/this.ratio+E)),ev("left",f)&&(w=g.width-(t-g.x)*r/a,b&&(M=(w-T)/this.ratio+E)),ev("bottom",f)&&(M=g.height+(i-g.y)*l/a,b&&(w=(M-E)*this.ratio+T)),ev("top",f)&&(M=g.height-(i-g.y)*l/a,b&&(w=(M-E)*this.ratio+T)),{newWidth:w,newHeight:M}},e.prototype.calculateNewSizeFromAspectRatio=function(t,i,a,s){var r=this.props,l=r.lockAspectRatio,d=r.lockAspectRatioExtraHeight,f=r.lockAspectRatioExtraWidth,g=typeof s.width>"u"?10:s.width,x=typeof a.width>"u"||a.width<0?t:a.width,b=typeof s.height>"u"?10:s.height,_=typeof a.height>"u"||a.height<0?i:a.height,S=d||0,w=f||0;if(l){var M=(b-S)*this.ratio+w,E=(_-S)*this.ratio+w,T=(g-w)/this.ratio+S,C=(x-w)/this.ratio+S,D=Math.max(g,M),P=Math.min(x,E),B=Math.max(b,T),F=Math.min(_,C);t=p_(t,D,P),i=p_(i,B,F)}else t=p_(t,g,x),i=p_(i,b,_);return{newWidth:t,newHeight:i}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var a=i.getBoundingClientRect();this.parentLeft=a.left*t,this.parentTop=a.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*t,this.targetTop=s.top*t}if(this.resizable){var r=this.resizable.getBoundingClientRect(),l=r.left,d=r.top,f=r.right,g=r.bottom;this.resizableLeft=l*t,this.resizableRight=f*t,this.resizableTop=d*t,this.resizableBottom=g*t}},e.prototype.onResizeStart=function(t,i){if(!(!this.resizable||!this.window)){var a=0,s=0;if(t.nativeEvent&&gce(t.nativeEvent)?(a=t.nativeEvent.clientX,s=t.nativeEvent.clientY):t.nativeEvent&&m_(t.nativeEvent)&&(a=t.nativeEvent.touches[0].clientX,s=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var r=this.props.onResizeStart(t,i,this.resizable);if(r===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var l,d=this.window.getComputedStyle(this.resizable);if(d.flexBasis!=="auto"){var f=this.parentNode;if(f){var g=this.window.getComputedStyle(f).flexDirection;this.flexDir=g.startsWith("row")?"row":"column",l=d.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var x={original:{x:a,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:ah(ah({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:i,flexBasis:l};this.setState(x)}},e.prototype.onMouseMove=function(t){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&m_(t))try{t.preventDefault(),t.stopPropagation()}catch{}var a=this.props,s=a.maxWidth,r=a.maxHeight,l=a.minWidth,d=a.minHeight,f=m_(t)?t.touches[0].clientX:t.clientX,g=m_(t)?t.touches[0].clientY:t.clientY,x=this.state,b=x.direction,_=x.original,S=x.width,w=x.height,M=this.getParentSize(),E=vce(M,this.window.innerWidth,this.window.innerHeight,s,r,l,d);s=E.maxWidth,r=E.maxHeight,l=E.minWidth,d=E.minHeight;var T=this.calculateNewSizeFromDirection(f,g),C=T.newHeight,D=T.newWidth,P=this.calculateNewMaxFromBoundary(s,r);this.props.snap&&this.props.snap.x&&(D=N6(D,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(C=N6(C,this.props.snap.y,this.props.snapGap));var B=this.calculateNewSizeFromAspectRatio(D,C,{width:P.maxWidth,height:P.maxHeight},{width:l,height:d});if(D=B.newWidth,C=B.newHeight,this.props.grid){var F=A6(D,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),j=A6(C,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),O=this.props.snapGap||0,I=O===0||Math.abs(F-D)<=O?F:D,W=O===0||Math.abs(j-C)<=O?j:C;D=I,C=W}var Q={width:D-_.width,height:C-_.height};if(this.delta=Q,S&&typeof S=="string"){if(S.endsWith("%")){var J=D/M.width*100;D="".concat(J,"%")}else if(S.endsWith("vw")){var te=D/this.window.innerWidth*100;D="".concat(te,"vw")}else if(S.endsWith("vh")){var oe=D/this.window.innerHeight*100;D="".concat(oe,"vh")}}if(w&&typeof w=="string"){if(w.endsWith("%")){var J=C/M.height*100;C="".concat(J,"%")}else if(w.endsWith("vw")){var te=C/this.window.innerWidth*100;C="".concat(te,"vw")}else if(w.endsWith("vh")){var oe=C/this.window.innerHeight*100;C="".concat(oe,"vh")}}var $={width:this.createSizeForCssProperty(D,"width"),height:this.createSizeForCssProperty(C,"height")};this.flexDir==="row"?$.flexBasis=$.width:this.flexDir==="column"&&($.flexBasis=$.height);var X=this.state.width!==$.width,G=this.state.height!==$.height,ee=this.state.flexBasis!==$.flexBasis,Y=X||G||ee;Y&&jg.flushSync(function(){i.setState($)}),this.props.onResize&&Y&&this.props.onResize(t,b,this.resizable,Q)}},e.prototype.onMouseUp=function(t){var i,a,s=this.state,r=s.isResizing,l=s.direction;s.original,!(!r||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,l,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(a=this.props.size.height)!==null&&a!==void 0?a:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:ah(ah({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(t){var i,a;this.setState({width:(i=t.width)!==null&&i!==void 0?i:"auto",height:(a=t.height)!==null&&a!==void 0?a:"auto"})},e.prototype.renderResizer=function(){var t=this,i=this.props,a=i.enable,s=i.handleStyles,r=i.handleClasses,l=i.handleWrapperStyle,d=i.handleWrapperClass,f=i.handleComponent;if(!a)return null;var g=Object.keys(a).map(function(x){return a[x]!==!1?c.jsx(fce,{direction:x,onResizeStart:t.onResizeStart,replaceStyles:s&&s[x],className:r&&r[x],children:f&&f[x]?f[x]:null},x):null});return c.jsx("div",{className:d,style:l,children:g})},e.prototype.render=function(){var t=this,i=Object.keys(this.props).reduce(function(r,l){return xce.indexOf(l)!==-1||(r[l]=t.props[l]),r},{}),a=ah(ah(ah({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(a.flexBasis=this.state.flexBasis);var s=this.props.as||"div";return c.jsxs(s,ah({style:a,className:this.props.className},i,{ref:function(r){r&&(t.resizable=r)},children:[this.state.isResizing&&c.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(k.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var c3=function(n,e){return c3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])},c3(n,e)};function _ce(n,e){c3(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Tr=function(){return Tr=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Tr.apply(this,arguments)};function Sce(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}var Ece={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},wce=function(n){return{bottom:n,bottomLeft:n,bottomRight:n,left:n,right:n,top:n,topLeft:n,topRight:n}},Mce=function(n){_ce(e,n);function e(t){var i=n.call(this,t)||this;return i.resizingPosition={x:0,y:0},i.offsetFromParent={left:0,top:0},i.resizableElement={current:null},i.originalPosition={x:0,y:0},i.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},i.onResizeStart=i.onResizeStart.bind(i),i.onResize=i.onResize.bind(i),i.onResizeStop=i.onResizeStop.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDrag=i.onDrag.bind(i),i.onDragStop=i.onDragStop.bind(i),i.getMaxSizesFromProps=i.getMaxSizesFromProps.bind(i),i}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,i=t.left,a=t.top,s=this.getDraggablePosition(),r=s.x,l=s.y;this.draggable.setState({x:r-i,y:l-a}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,i=t.x,a=t.y;return{x:i,y:a}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,i=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:i}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var i=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/i;case"body":return document.body.offsetHeight/i;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var i=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/i;case"body":return document.body.offsetWidth/i;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,i){this.props.onDragStart&&this.props.onDragStart(t,i);var a=this.getDraggablePosition();if(this.originalPosition=a,!!this.props.bounds){var s=this.getParent(),r=this.props.scale,l;if(this.props.bounds==="parent")l=s;else if(this.props.bounds==="body"){var d=s.getBoundingClientRect(),f=d.left,g=d.top,x=document.body.getBoundingClientRect(),b=-(f-s.offsetLeft*r-x.left)/r,_=-(g-s.offsetTop*r-x.top)/r,S=(document.body.offsetWidth-this.resizable.size.width*r)/r+b,w=(document.body.offsetHeight-this.resizable.size.height*r)/r+_;return this.setState({bounds:{top:_,right:S,bottom:w,left:b}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var M=s.getBoundingClientRect(),E=M.left,T=M.top,C=-(E-s.offsetLeft*r)/r,D=-(T-s.offsetTop*r)/r,S=(window.innerWidth-this.resizable.size.width*r)/r+C,w=(window.innerHeight-this.resizable.size.height*r)/r+D;return this.setState({bounds:{top:D,right:S,bottom:w,left:C}})}else typeof this.props.bounds=="string"?l=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(l=this.props.bounds);if(!(!(l instanceof HTMLElement)||!(s instanceof HTMLElement))){var P=l.getBoundingClientRect(),B=P.left,F=P.top,j=s.getBoundingClientRect(),O=j.left,I=j.top,W=(B-O)/r,Q=F-I;if(this.resizable){this.updateOffsetFromParent();var J=this.offsetFromParent;this.setState({bounds:{top:Q-J.top,right:W+(l.offsetWidth-this.resizable.size.width)-J.left/r,bottom:Q+(l.offsetHeight-this.resizable.size.height)-J.top,left:W-J.left/r}})}}}},e.prototype.onDrag=function(t,i){if(this.props.onDrag){var a=this.offsetFromParent,s=a.left,r=a.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,Tr(Tr({},i),{x:i.x+s,y:i.y+r}));if(this.props.dragAxis==="x")return this.props.onDrag(t,Tr(Tr({},i),{x:i.x+s,y:this.originalPosition.y+r,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,Tr(Tr({},i),{x:this.originalPosition.x+s,y:i.y+r,deltaX:0}))}},e.prototype.onDragStop=function(t,i){if(this.props.onDragStop){var a=this.offsetFromParent,s=a.left,r=a.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,Tr(Tr({},i),{x:i.x+s,y:i.y+r}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,Tr(Tr({},i),{x:i.x+s,y:this.originalPosition.y+r,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,Tr(Tr({},i),{x:this.originalPosition.x+s,y:i.y+r,deltaX:0}))}},e.prototype.onResizeStart=function(t,i,a){t.stopPropagation(),this.setState({resizing:!0});var s=this.props.scale,r=this.offsetFromParent,l=this.getDraggablePosition();if(this.resizingPosition={x:l.x+r.left,y:l.y+r.top},this.originalPosition=l,this.props.bounds){var d=this.getParent(),f=void 0;this.props.bounds==="parent"?f=d:this.props.bounds==="body"?f=document.body:this.props.bounds==="window"?f=window:typeof this.props.bounds=="string"?f=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(f=this.props.bounds);var g=this.getSelfElement();if(g instanceof Element&&(f instanceof HTMLElement||f===window)&&d instanceof HTMLElement){var x=this.getMaxSizesFromProps(),b=x.maxWidth,_=x.maxHeight,S=this.getParentSize();if(b&&typeof b=="string")if(b.endsWith("%")){var w=Number(b.replace("%",""))/100;b=S.width*w}else b.endsWith("px")&&(b=Number(b.replace("px","")));if(_&&typeof _=="string")if(_.endsWith("%")){var w=Number(_.replace("%",""))/100;_=S.height*w}else _.endsWith("px")&&(_=Number(_.replace("px","")));var M=g.getBoundingClientRect(),E=M.left,T=M.top,C=this.props.bounds==="window"?{left:0,top:0}:f.getBoundingClientRect(),D=C.left,P=C.top,B=this.getOffsetWidth(f),F=this.getOffsetHeight(f),j=i.toLowerCase().endsWith("left"),O=i.toLowerCase().endsWith("right"),I=i.startsWith("top"),W=i.startsWith("bottom");if((j||I)&&this.resizable){var Q=(E-D)/s+this.resizable.size.width;this.setState({maxWidth:Q>Number(b)?b:Q})}if(O||this.props.lockAspectRatio&&!j&&!I){var Q=B+(D-E)/s;this.setState({maxWidth:Q>Number(b)?b:Q})}if((I||j)&&this.resizable){var Q=(T-P)/s+this.resizable.size.height;this.setState({maxHeight:Q>Number(_)?_:Q})}if(W||this.props.lockAspectRatio&&!I&&!j){var Q=F+(P-T)/s;this.setState({maxHeight:Q>Number(_)?_:Q})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,i,a)},e.prototype.onResize=function(t,i,a,s){var r=this,l={x:this.originalPosition.x,y:this.originalPosition.y},d=-s.width,f=-s.height,g=["top","left","topLeft","bottomLeft","topRight"];g.includes(i)&&(i==="bottomLeft"?l.x+=d:(i==="topRight"||(l.x+=d),l.y+=f));var x=this.draggable.state;(l.x!==x.x||l.y!==x.y)&&jg.flushSync(function(){r.draggable.setState(l)}),this.updateOffsetFromParent();var b=this.offsetFromParent,_=this.getDraggablePosition().x+b.left,S=this.getDraggablePosition().y+b.top;this.resizingPosition={x:_,y:S},this.props.onResize&&this.props.onResize(t,i,a,s,{x:_,y:S})},e.prototype.onResizeStop=function(t,i,a,s){this.setState({resizing:!1});var r=this.getMaxSizesFromProps(),l=r.maxWidth,d=r.maxHeight;this.setState({maxWidth:l,maxHeight:d}),this.props.onResizeStop&&this.props.onResizeStop(t,i,a,s,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,i=this.getParent(),a=this.getSelfElement();if(!i||a===null)return{top:0,left:0};var s=i.getBoundingClientRect(),r=s.left,l=s.top,d=a.getBoundingClientRect(),f=this.getDraggablePosition(),g=i.scrollLeft,x=i.scrollTop;this.offsetFromParent={left:d.left-r+g-f.x*t,top:d.top-l+x-f.y*t}},e.prototype.render=function(){var t=this,i=this.props,a=i.disableDragging,s=i.style,r=i.dragHandleClassName,l=i.position,d=i.onMouseDown,f=i.onMouseUp,g=i.dragAxis,x=i.dragGrid,b=i.bounds,_=i.enableUserSelectHack,S=i.cancel,w=i.children;i.onResizeStart,i.onResize,i.onResizeStop,i.onDragStart,i.onDrag,i.onDragStop;var M=i.resizeHandleStyles,E=i.resizeHandleClasses,T=i.resizeHandleComponent,C=i.enableResizing,D=i.resizeGrid,P=i.resizeHandleWrapperClass,B=i.resizeHandleWrapperStyle,F=i.scale,j=i.allowAnyClick,O=i.dragPositionOffset,I=Sce(i,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),W=this.props.default?Tr({},this.props.default):void 0;delete I.default;var Q=a||r?{cursor:"auto"}:{cursor:"move"},J=Tr(Tr(Tr({},Ece),Q),s),te=this.offsetFromParent,oe=te.left,$=te.top,X;l&&(X={x:l.x-oe,y:l.y-$});var G=this.state.resizing?void 0:X,ee=this.state.resizing?"both":g;return k.createElement(dce,{ref:function(Y){Y&&(t.draggable=Y)},handle:r?".".concat(r):void 0,defaultPosition:W,onMouseDown:d,onMouseUp:f,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:ee,disabled:a,grid:x,bounds:b?this.state.bounds:void 0,position:G,enableUserSelectHack:_,cancel:S,scale:F,allowAnyClick:j,nodeRef:this.resizableElement,positionOffset:O},k.createElement(bce,Tr({},I,{ref:function(Y){Y&&(t.resizable=Y,t.resizableElement.current=Y.resizable)},defaultSize:W,size:this.props.size,enable:typeof C=="boolean"?wce(C):C,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:J,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:D,handleWrapperClass:P,handleWrapperStyle:B,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:M,handleClasses:E,handleComponent:T,scale:this.props.scale}),w))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(k.PureComponent);const Tce=()=>{const n=xA(),{panels:e,updatePanelPosition:t,updatePanelSize:i,getVisiblePanels:a}=Nr(),s=k.useCallback(()=>{const r=a();if(n.isMobile)r.forEach((l,d)=>{const f=e[l];f&&!f.isMinimized&&(t(l,{x:10,y:60+d*220}),i(l,{width:Math.min(f.size.width,window.innerWidth-20),height:Math.min(f.size.height,200)}))});else if(n.isTablet){const l=n.orientation==="landscape"?3:2;r.forEach((d,f)=>{const g=e[d];if(g){const x=Math.floor(f/l),b=f%l,_=Math.floor((window.innerWidth-60)/l);t(d,{x:20+b*(_+20),y:80+x*350}),i(d,{width:_,height:Math.min(g.size.height,300)})}})}},[n,e,t,i,a]);return k.useEffect(()=>{const r=setTimeout(s,100);return()=>clearTimeout(r)},[n.isMobile,n.isTablet,n.orientation,s]),{reorganizePanels:s}};let Cce=class extends k.Component{maxRetries=3;constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:"",retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(e,t){this.setState({errorInfo:t}),this.props.onError&&this.props.onError(e,t),this.reportError(e,t)}reportError=(e,t)=>{const i={errorId:this.state.errorId,panelId:this.props.panelId,message:e.message,stack:e.stack,componentStack:t.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href};console.log("Error report:",i)};handleRetry=()=>{this.state.retryCount<this.maxRetries&&this.setState({hasError:!1,error:null,errorInfo:null,retryCount:this.state.retryCount+1})};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:"",retryCount:0})};copyErrorDetails=async()=>{const e={panelId:this.props.panelId,error:this.state.error?.message,stack:this.state.error?.stack,componentStack:this.state.errorInfo?.componentStack,errorId:this.state.errorId};try{await navigator.clipboard.writeText(JSON.stringify(e,null,2)),console.log("Error details copied to clipboard")}catch(t){console.error("Failed to copy error details:",t)}};render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const{error:e,errorInfo:t,errorId:i,retryCount:a}=this.state,s=a<this.maxRetries;return c.jsxs(Jt,{className:"m-4 border-red-200 bg-red-50",children:[c.jsx(In,{className:"pb-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ph,{className:"h-5 w-5 text-red-500"}),c.jsx(Bn,{className:"text-red-700 text-lg",children:"Panel Error"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(wn,{variant:"destructive",className:"text-xs",children:this.props.panelId||"Unknown Panel"}),c.jsx(wn,{variant:"outline",className:"text-xs",children:i})]})]})}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs(Zo,{variant:"destructive",children:[c.jsx(JJ,{className:"h-4 w-4"}),c.jsx(Ov,{children:"Something went wrong in this panel"}),c.jsx(Qo,{className:"mt-2",children:e?.message||"An unexpected error occurred"})]}),!1,c.jsxs("div",{className:"flex flex-wrap gap-2",children:[s&&c.jsxs(it,{onClick:this.handleRetry,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[c.jsx(pd,{className:"h-4 w-4"}),"Retry (",this.maxRetries-a," left)"]}),c.jsxs(it,{onClick:this.handleReset,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[c.jsx(Df,{className:"h-4 w-4"}),"Reset Panel"]}),c.jsxs(it,{onClick:this.copyErrorDetails,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[c.jsx(RC,{className:"h-4 w-4"}),"Copy Error Details"]}),c.jsxs(it,{onClick:()=>{window.open(`mailto:support@example.com?subject=Panel Error Report&body=Error ID: ${i}`,"_blank")},size:"sm",variant:"outline",className:"flex items-center gap-2",children:[c.jsx(A$,{className:"h-4 w-4"}),"Report Issue"]})]}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:[c.jsx("p",{children:"This error has been logged and will be investigated. You can continue using other panels while this issue is resolved."}),a>0&&c.jsxs("p",{className:"mt-1 text-amber-600",children:["Retry attempts: ",a,"/",this.maxRetries]})]})]})]})}return this.props.children}};const Ace=()=>{const{panels:n}=Nr(),[e,t]=k.useState({renderTime:0,memoryUsage:0,panelCount:0,visiblePanelCount:0,lastUpdate:Date.now(),frameRate:60,isLagging:!1}),[i,a]=k.useState({}),s=k.useRef(0),r=k.useRef(performance.now()),l=k.useRef([]),d=k.useRef(null),f=k.useCallback(()=>{const M=performance.now(),E=M-r.current;if(E>=1e3){const T=Math.round(s.current*1e3/E);s.current=0,r.current=M,t(C=>({...C,frameRate:T,isLagging:T<30}))}s.current++,requestAnimationFrame(f)},[]),g=k.useCallback(()=>{if("memory"in performance){const M=performance.memory;t(E=>({...E,memoryUsage:M.usedJSHeapSize/1024/1024}))}},[]),x=k.useCallback((M,E)=>{a(C=>{const D=C[M]||{panelId:M,renderCount:0,averageRenderTime:0,lastRenderTime:0,memoryImpact:0},P=D.renderCount+1,B=(D.averageRenderTime*D.renderCount+E)/P;return{...C,[M]:{...D,renderCount:P,averageRenderTime:B,lastRenderTime:E}}}),l.current.push(E),l.current.length>100&&l.current.shift();const T=l.current.reduce((C,D)=>C+D,0)/l.current.length;t(C=>({...C,renderTime:T,lastUpdate:Date.now()}))},[]);k.useEffect(()=>{const M=Object.keys(n).length,E=Object.values(n).filter(T=>T.isVisible).length;t(T=>({...T,panelCount:M,visiblePanelCount:E}))},[n]),k.useEffect(()=>{requestAnimationFrame(f);const M=setInterval(g,5e3);if("PerformanceObserver"in window)try{d.current=new PerformanceObserver(E=>{E.getEntries().forEach(C=>{if(C.entryType==="measure"&&C.name.startsWith("panel-render-")){const D=C.name.replace("panel-render-","");x(D,C.duration)}})}),d.current.observe({entryTypes:["measure","navigation","paint"]})}catch(E){console.warn("Performance Observer not supported:",E)}return()=>{clearInterval(M),d.current&&d.current.disconnect()}},[f,g,x]);const b=k.useCallback(()=>{const M=[];e.frameRate<30&&M.push("Frame rate is low. Consider reducing the number of visible panels."),e.visiblePanelCount>8&&M.push("Many panels are visible. Hide unused panels to improve performance."),e.memoryUsage>100&&M.push("High memory usage detected. Consider refreshing the page."),e.renderTime>16&&M.push("Slow rendering detected. Check for complex panel content.");const E=Object.values(i).filter(T=>T.averageRenderTime>10);return E.length>0&&M.push(`Slow panels detected: ${E.map(T=>T.panelId).join(", ")}`),M},[e,i]),_=k.useCallback(()=>{const{minimizeAllPanels:M,resetPanelLayout:E}=Nr.getState();if(e.frameRate<20)return M(),"Emergency optimization: All panels minimized due to low frame rate.";if(e.visiblePanelCount>10){const D=Object.keys(n).filter(P=>n[P].isVisible).slice(8);return D.forEach(P=>{Nr.getState().hidePanel(P)}),`Hid ${D.length} panels to improve performance.`}return"No immediate optimizations needed."},[e,n]),S=k.useCallback((M,E)=>{const T=`panel-render-${M}`;performance.mark(`${T}-start`),E(),performance.mark(`${T}-end`),performance.measure(T,`${T}-start`,`${T}-end`)},[]),w=k.useCallback(()=>e.frameRate>=50&&e.renderTime<10?{status:"excellent",color:"green"}:e.frameRate>=30&&e.renderTime<16?{status:"good",color:"blue"}:e.frameRate>=20&&e.renderTime<25?{status:"fair",color:"yellow"}:{status:"poor",color:"red"},[e]);return{metrics:e,panelData:i,getOptimizationRecommendations:b,optimizePerformance:_,measurePanelRender:S,getPerformanceStatus:w}},bu=({panelId:n,children:e,className:t})=>{const{panels:i,hidePanel:a,toggleMinimize:s,bringToFront:r,updatePanelPosition:l,updatePanelSize:d,snapToEdges:f,magneticBoundaries:g,snapThreshold:x,panelAnimations:b,snapPanelToEdges:_}=Nr();Ace();const S=i[n],w=Af[n];if(!S||!w||!S.isVisible)return null;const M=()=>{a(n)},E=()=>{s(n)},T=()=>{r(n)};return k.useEffect(()=>{const C=()=>{const D={width:window.innerWidth,height:window.innerHeight};let P={...S.position};S.position.x+S.size.width>D.width&&(P.x=Math.max(0,D.width-S.size.width)),S.position.y+S.size.height>D.height&&(P.y=Math.max(0,D.height-S.size.height)),(P.x!==S.position.x||P.y!==S.position.y)&&l(n,P)};return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[S.position,S.size,n,l]),c.jsxs(Mce,{position:S.position,size:S.size,minWidth:w.minSize.width,minHeight:S.isMinimized?40:w.minSize.height,maxWidth:w.maxSize?.width,maxHeight:w.maxSize?.height,onDragStop:(C,D)=>{l(n,{x:D.x,y:D.y})},onResizeStop:(C,D,P,B,F)=>{d(n,{width:parseInt(P.style.width),height:parseInt(P.style.height)}),l(n,F)},disableDragging:!1,enableResizing:w.resizable&&!S.isMinimized,className:fn("bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60","shadow-lg rounded-lg border border-border/40 overflow-hidden",t),style:{zIndex:S.zIndex},dragHandleClassName:"drag-handle",onMouseDown:T,children:[c.jsxs("div",{className:"drag-handle flex items-center justify-between px-3 py-2 bg-muted/50 border-b border-border/40 cursor-move",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(kP,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("h3",{className:"font-medium text-sm text-foreground truncate",children:w.title})]}),c.jsxs("div",{className:"flex items-center",children:[w.minimizable&&c.jsx("button",{onClick:E,className:"p-1 rounded-md hover:bg-muted transition-colors",children:S.isMinimized?c.jsx(Vv,{className:"h-4 w-4"}):c.jsx(DC,{className:"h-4 w-4"})}),w.closable&&c.jsx("button",{onClick:M,className:"p-1 rounded-md hover:bg-muted transition-colors ml-1",children:c.jsx(Eg,{className:"h-4 w-4"})})]})]}),!S.isMinimized&&c.jsx("div",{className:"p-3 overflow-auto",style:{height:"calc(100% - 40px)"},children:c.jsx(Cce,{panelId:n,children:e})})]})},Nce={drawingTools:_h,furnitureLibrary:Fc,materialPalette:k2,properties:kp,layers:d1,view3D:ZJ,collaboration:Bp,export:Fp,revisionHistory:Y$,cadImport:LC,measurements:Av,socialShare:fg,enhancedSharing:Kee,advancedPanelManager:kp},D6=()=>{const{togglePanel:n,isPanelVisible:e,resetPanelLayout:t}=Nr();return c.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[1000]",children:c.jsx("div",{className:"bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border border-border/40 rounded-lg shadow-lg p-2",children:c.jsxs("div",{className:"flex items-center gap-1",children:[Object.values(Af).map(i=>{const a=Nce[i.id],s=e(i.id);return c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:s?"default":"ghost",size:"sm",onClick:()=>n(i.id),className:"h-8 w-8 p-0",children:c.jsx(a,{className:"h-4 w-4"})})}),c.jsx(ma,{children:c.jsx("p",{children:i.title})})]},i.id)}),c.jsx("div",{className:"w-px h-6 bg-border mx-1"}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0",children:c.jsx(_h,{className:"h-4 w-4"})})}),c.jsx(ma,{children:c.jsx("p",{children:"Reset Layout"})})]})]})})})};var gE="Dialog",[yL,ihe]=xd(gE),[Rce,bd]=yL(gE),xL=n=>{const{__scopeDialog:e,children:t,open:i,defaultOpen:a,onOpenChange:s,modal:r=!0}=n,l=k.useRef(null),d=k.useRef(null),[f,g]=Kp({prop:i,defaultProp:a??!1,onChange:s,caller:gE});return c.jsx(Rce,{scope:e,triggerRef:l,contentRef:d,contentId:hd(),titleId:hd(),descriptionId:hd(),open:f,onOpenChange:g,onOpenToggle:k.useCallback(()=>g(x=>!x),[g]),modal:r,children:t})};xL.displayName=gE;var bL="DialogTrigger",_L=k.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,a=bd(bL,t),s=da(e,a.triggerRef);return c.jsx(ci.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":EA(a.open),...i,ref:s,onClick:nn(n.onClick,a.onOpenToggle)})});_L.displayName=bL;var _A="DialogPortal",[Dce,SL]=yL(_A,{forceMount:void 0}),EL=n=>{const{__scopeDialog:e,forceMount:t,children:i,container:a}=n,s=bd(_A,e);return c.jsx(Dce,{scope:e,forceMount:t,children:k.Children.map(i,r=>c.jsx(Ch,{present:t||s.open,children:c.jsx(K2,{asChild:!0,container:a,children:r})}))})};EL.displayName=_A;var kS="DialogOverlay",wL=k.forwardRef((n,e)=>{const t=SL(kS,n.__scopeDialog),{forceMount:i=t.forceMount,...a}=n,s=bd(kS,n.__scopeDialog);return s.modal?c.jsx(Ch,{present:i||s.open,children:c.jsx(jce,{...a,ref:e})}):null});wL.displayName=kS;var Oce=bg("DialogOverlay.RemoveScroll"),jce=k.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,a=bd(kS,t);return c.jsx(J2,{as:Oce,allowPinchZoom:!0,shards:[a.contentRef],children:c.jsx(ci.div,{"data-state":EA(a.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),Ag="DialogContent",ML=k.forwardRef((n,e)=>{const t=SL(Ag,n.__scopeDialog),{forceMount:i=t.forceMount,...a}=n,s=bd(Ag,n.__scopeDialog);return c.jsx(Ch,{present:i||s.open,children:s.modal?c.jsx(Pce,{...a,ref:e}):c.jsx(Uce,{...a,ref:e})})});ML.displayName=Ag;var Pce=k.forwardRef((n,e)=>{const t=bd(Ag,n.__scopeDialog),i=k.useRef(null),a=da(e,t.contentRef,i);return k.useEffect(()=>{const s=i.current;if(s)return JC(s)},[]),c.jsx(TL,{...n,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:nn(n.onCloseAutoFocus,s=>{s.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:nn(n.onPointerDownOutside,s=>{const r=s.detail.originalEvent,l=r.button===0&&r.ctrlKey===!0;(r.button===2||l)&&s.preventDefault()}),onFocusOutside:nn(n.onFocusOutside,s=>s.preventDefault())})}),Uce=k.forwardRef((n,e)=>{const t=bd(Ag,n.__scopeDialog),i=k.useRef(!1),a=k.useRef(!1);return c.jsx(TL,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{n.onCloseAutoFocus?.(s),s.defaultPrevented||(i.current||t.triggerRef.current?.focus(),s.preventDefault()),i.current=!1,a.current=!1},onInteractOutside:s=>{n.onInteractOutside?.(s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const r=s.target;t.triggerRef.current?.contains(r)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),TL=k.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:s,...r}=n,l=bd(Ag,t),d=k.useRef(null),f=da(e,d);return IC(),c.jsxs(c.Fragment,{children:[c.jsx(q2,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:a,onUnmountAutoFocus:s,children:c.jsx(I1,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":EA(l.open),...r,ref:f,onDismiss:()=>l.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(Lce,{titleId:l.titleId}),c.jsx(Ice,{contentRef:d,descriptionId:l.descriptionId})]})]})}),SA="DialogTitle",CL=k.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,a=bd(SA,t);return c.jsx(ci.h2,{id:a.titleId,...i,ref:e})});CL.displayName=SA;var AL="DialogDescription",NL=k.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,a=bd(AL,t);return c.jsx(ci.p,{id:a.descriptionId,...i,ref:e})});NL.displayName=AL;var RL="DialogClose",DL=k.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,a=bd(RL,t);return c.jsx(ci.button,{type:"button",...i,ref:e,onClick:nn(n.onClick,()=>a.onOpenChange(!1))})});DL.displayName=RL;function EA(n){return n?"open":"closed"}var OL="DialogTitleWarning",[ahe,jL]=Cte(OL,{contentName:Ag,titleName:SA,docsSlug:"dialog"}),Lce=({titleId:n})=>{const e=jL(OL),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},zce="DialogDescriptionWarning",Ice=({contentRef:n,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${jL(zce).contentName}}.`;return k.useEffect(()=>{const a=n.current?.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(i))},[i,n,e]),null},Bce=xL,Fce=_L,kce=EL,PL=wL,UL=ML,LL=CL,zL=NL,Hce=DL;const Nf=Bce,y1=Fce,Gce=kce,IL=k.forwardRef(({className:n,...e},t)=>c.jsx(PL,{ref:t,className:fn("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));IL.displayName=PL.displayName;const gh=k.forwardRef(({className:n,children:e,...t},i)=>c.jsxs(Gce,{children:[c.jsx(IL,{}),c.jsxs(UL,{ref:i,className:fn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,c.jsxs(Hce,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(Eg,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));gh.displayName=UL.displayName;const vh=({className:n,...e})=>c.jsx("div",{className:fn("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});vh.displayName="DialogHeader";const j_=({className:n,...e})=>c.jsx("div",{className:fn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});j_.displayName="DialogFooter";const yh=k.forwardRef(({className:n,...e},t)=>c.jsx(LL,{ref:t,className:fn("text-lg font-semibold leading-none tracking-tight",n),...e}));yh.displayName=LL.displayName;const Hp=k.forwardRef(({className:n,...e},t)=>c.jsx(zL,{ref:t,className:fn("text-sm text-muted-foreground",n),...e}));Hp.displayName=zL.displayName;const O6=[{title:"Drawing Tools",icon:_h,shortcuts:[{key:"V",description:"Select Tool",icon:KP},{key:"W",description:"Wall Tool",icon:_h},{key:"R",description:"Room Tool",icon:Nv},{key:"D",description:"Door Tool",icon:F2},{key:"M",description:"Measurement Tool",icon:Av},{key:"T",description:"Text Tool",icon:G2},{key:"H",description:"Hand Tool (Pan)",icon:HP}]},{title:"View Controls",icon:Tte,shortcuts:[{key:"Ctrl + 0",description:"Reset Zoom & Pan"},{key:"Mouse Wheel",description:"Zoom In/Out"},{key:"Space + Drag",description:"Pan Canvas"},{key:"Ctrl + +",description:"Zoom In"},{key:"Ctrl + -",description:"Zoom Out"},{key:"G",description:"Toggle Grid",icon:Mf}]},{title:"Edit Operations",icon:Sg,shortcuts:[{key:"Ctrl + Z",description:"Undo",icon:Sg},{key:"Ctrl + Y",description:"Redo",icon:JP},{key:"Delete",description:"Delete Selected",icon:Of},{key:"Backspace",description:"Delete Selected",icon:Of},{key:"Ctrl + A",description:"Select All"},{key:"Ctrl + D",description:"Duplicate Selected"}]},{title:"General",icon:jS,shortcuts:[{key:"Escape",description:"Cancel Current Operation",icon:Eg},{key:"Enter",description:"Confirm Operation"},{key:"Shift + Click",description:"Multi-select"},{key:"Ctrl + S",description:"Save Floor Plan"},{key:"F11",description:"Toggle Fullscreen"},{key:"?",description:"Show This Help"}]},{title:"Panel Management",icon:Nv,shortcuts:[{key:"1",description:"Toggle Drawing Tools Panel"},{key:"2",description:"Toggle Furniture Library Panel"},{key:"3",description:"Toggle Material Palette Panel"},{key:"4",description:"Toggle Properties Panel"},{key:"5",description:"Toggle Layers Panel"},{key:"6",description:"Toggle 3D View Panel"},{key:"7",description:"Toggle Collaboration Panel"},{key:"8",description:"Toggle Export Panel"},{key:"9",description:"Toggle Revision History Panel"},{key:"0",description:"Toggle CAD Import Panel"}]},{title:"Precision Drawing",icon:Av,shortcuts:[{key:"Shift + Draw",description:"Constrain to 45 angles"},{key:"Alt + Draw",description:"Disable snap-to-grid"},{key:"Ctrl + Draw",description:"Duplicate while drawing"},{key:"Shift + Resize",description:"Maintain aspect ratio"},{key:"Alt + Move",description:"Fine positioning"}]}],Vce=({shortcut:n})=>{const e=n.split(" + ");return c.jsx("div",{className:"flex items-center gap-1",children:e.map((t,i)=>c.jsxs(di.Fragment,{children:[c.jsx(wn,{variant:"outline",className:"px-2 py-1 text-xs font-mono",children:t}),i<e.length-1&&c.jsx("span",{className:"text-muted-foreground",children:"+"})]},i))})},qce=()=>{const[n,e]=k.useState(!1);return di.useEffect(()=>{const t=i=>{i.key==="?"&&!i.ctrlKey&&!i.metaKey&&!i.altKey&&(i.preventDefault(),e(!0))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),c.jsx(c.Fragment,{children:c.jsx("div",{className:"fixed bottom-4 right-4 z-[1000]",children:c.jsxs(Nf,{open:n,onOpenChange:e,children:[c.jsx(y1,{asChild:!0,children:c.jsx(it,{size:"sm",variant:"outline",className:"h-10 w-10 rounded-full bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-border/40 shadow-lg hover:shadow-xl transition-all duration-200",children:c.jsx(jS,{className:"h-4 w-4"})})}),c.jsxs(gh,{className:"max-w-4xl max-h-[80vh]",children:[c.jsx(vh,{children:c.jsxs(yh,{className:"flex items-center gap-2",children:[c.jsx(jS,{className:"h-5 w-5"}),"Keyboard Shortcuts & Controls"]})}),c.jsx(Ca,{className:"max-h-[60vh]",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:O6.map((t,i)=>{const a=t.icon;return c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(a,{className:"h-4 w-4 text-primary"}),c.jsx("h3",{className:"font-semibold text-sm",children:t.title})]}),c.jsx("div",{className:"space-y-2",children:t.shortcuts.map((s,r)=>{const l=s.icon;return c.jsxs("div",{className:"flex items-center justify-between py-1",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l&&c.jsx(l,{className:"h-3 w-3 text-muted-foreground"}),c.jsx("span",{className:"text-sm text-foreground",children:s.description})]}),c.jsx(Vce,{shortcut:s.key})]},r)})}),i<O6.length-1&&c.jsx(js,{className:"mt-4"})]},i)})})}),c.jsx("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:c.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[c.jsx("p",{children:c.jsx("strong",{children:" Pro Tips:"})}),c.jsxs("p",{children:[" Hold"," ",c.jsx(wn,{variant:"outline",className:"px-1 py-0 text-xs",children:"Shift"})," ","while drawing for straight lines and constrained angles"]}),c.jsxs("p",{children:[" Use"," ",c.jsx(wn,{variant:"outline",className:"px-1 py-0 text-xs",children:"Alt"})," ","to temporarily disable snap-to-grid for precise positioning"]}),c.jsxs("p",{children:[""," ",c.jsx(wn,{variant:"outline",className:"px-1 py-0 text-xs",children:"Mouse Wheel"})," ","over canvas to zoom in/out smoothly"]}),c.jsxs("p",{children:[""," ",c.jsx(wn,{variant:"outline",className:"px-1 py-0 text-xs",children:"Space + Drag"})," ","to pan around the canvas quickly"]}),c.jsx("p",{children:" Double-click objects to edit properties directly"}),c.jsxs("p",{children:[" Use"," ",c.jsx(wn,{variant:"outline",className:"px-1 py-0 text-xs",children:"Ctrl + Click"})," ","to multi-select objects"]}),c.jsxs("p",{children:[" Press"," ",c.jsx(wn,{variant:"outline",className:"px-1 py-0 text-xs",children:"?"})," ","anytime to show this help dialog"]})]})})]})]})})})},YM=[{id:"select",label:"Select",icon:KP,shortcut:"V",description:"Select and move objects"},{id:"wall",label:"Wall",icon:_h,shortcut:"W",description:"Draw walls with snap-to-grid"},{id:"room",label:"Room",icon:Nv,shortcut:"R",description:"Create rooms with auto-dimensions"},{id:"door",label:"Door",icon:F2,shortcut:"D",description:"Place doors with clearance check"},{id:"window",label:"Window",icon:QP,shortcut:"Shift+W",description:"Add windows to walls"},{id:"dimension",label:"Measure",icon:Av,shortcut:"M",description:"Virtual tape measure tool"},{id:"text",label:"Text",icon:G2,shortcut:"T",description:"Add labels and annotations"},{id:"hand",label:"Pan",icon:HP,shortcut:"H",description:"Pan around the canvas"}],Xce=[{value:4,label:"Thin (4px)"},{value:8,label:"Standard (8px)"},{value:12,label:"Thick (12px)"},{value:16,label:"Extra Thick (16px)"}],Yce=[{value:25,label:"Fine (25px)"},{value:50,label:"Standard (50px)"},{value:75,label:"Coarse (75px)"},{value:100,label:"Extra Coarse (100px)"}],Wce=()=>{const{currentTool:n,setCurrentTool:e,showGrid:t,toggleGrid:i,gridSize:a,setGridSize:s,selectedElements:r,clearSelection:l,wallThickness:d,setWallThickness:f,snapToGrid:g,setSnapToGrid:x,showClearanceWarnings:b,setShowClearanceWarnings:_}=ti(),[S,w]=k.useState("tools"),M=()=>{console.log("Undo")},E=()=>{console.log("Redo")},T=()=>{r.forEach(D=>{switch(D.type){case"wall":ti.getState().removeWall(D.id);break;case"room":ti.getState().removeRoom(D.id);break;case"furniture":ti.getState().removeFurniture(D.id);break}}),l()},C=()=>{console.log("Duplicate selected elements")};return c.jsx(bu,{panelId:"drawingTools",children:c.jsxs(_l,{value:S,onValueChange:w,className:"w-full",children:[c.jsxs(Eo,{className:"grid w-full grid-cols-3",children:[c.jsx(vn,{value:"tools",children:"Tools"}),c.jsx(vn,{value:"settings",children:"Settings"}),c.jsx(vn,{value:"actions",children:"Actions"})]}),c.jsxs(Rn,{value:"tools",className:"space-y-4 mt-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium mb-3",children:"Drawing Tools"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:YM.map(D=>{const P=D.icon,B=n===D.id;return c.jsxs(it,{variant:B?"default":"outline",size:"sm",onClick:()=>e(D.id),className:"flex items-center gap-2 justify-start relative",title:`${D.description} (${D.shortcut})`,children:[c.jsx(P,{className:"h-4 w-4"}),c.jsx("span",{className:"text-xs flex-1 text-left",children:D.label}),c.jsx(wn,{variant:"secondary",className:"text-xs px-1 py-0",children:D.shortcut})]},D.id)})})]}),n&&c.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(_g,{className:"h-4 w-4 text-blue-500"}),c.jsxs("span",{className:"text-sm font-medium",children:[YM.find(D=>D.id===n)?.label," Tool"]})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:YM.find(D=>D.id===n)?.description}),n==="wall"&&c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsx(qt,{className:"text-xs",children:"Wall Thickness"}),c.jsxs(Cr,{value:d.toString(),onValueChange:D=>f(Number(D)),children:[c.jsx(dr,{className:"h-8",children:c.jsx(Ar,{})}),c.jsx(hr,{children:Xce.map(D=>c.jsx(Li,{value:D.value.toString(),children:D.label},D.value))})]})]}),n==="door"&&b&&c.jsxs(Zo,{className:"mt-3",children:[c.jsx(ph,{className:"h-4 w-4"}),c.jsx(Qo,{className:"text-xs",children:"Door clearance validation is enabled. You'll be warned if doors can't open properly."})]})]})]}),c.jsxs(Rn,{value:"settings",className:"space-y-4 mt-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium mb-3",children:"Grid & Snap"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(qt,{htmlFor:"show-grid",className:"text-sm",children:"Show Grid"}),c.jsx(Yo,{id:"show-grid",checked:t,onCheckedChange:i})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(qt,{htmlFor:"snap-to-grid",className:"text-sm",children:"Snap to Grid"}),c.jsx(Yo,{id:"snap-to-grid",checked:g,onCheckedChange:x})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(qt,{className:"text-sm",children:["Grid Size: ",a,"px"]}),c.jsx(_o,{value:[a],onValueChange:([D])=>s(D),min:10,max:100,step:5,className:"w-full"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-xs",children:"Grid Presets"}),c.jsx("div",{className:"grid grid-cols-2 gap-1",children:Yce.map(D=>c.jsx(it,{variant:"outline",size:"sm",onClick:()=>s(D.value),className:"text-xs h-7",children:D.label},D.value))})]})]})]}),c.jsx(js,{}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium mb-3",children:"Drawing Options"}),c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(qt,{htmlFor:"clearance-warnings",className:"text-sm",children:"Clearance Warnings"}),c.jsx(Yo,{id:"clearance-warnings",checked:b,onCheckedChange:_})]})})]})]}),c.jsxs(Rn,{value:"actions",className:"space-y-4 mt-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium mb-3",children:"Quick Actions"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs(it,{variant:"outline",size:"sm",onClick:M,className:"flex items-center gap-2",children:[c.jsx(Sg,{className:"h-4 w-4"}),c.jsx("span",{className:"text-xs",children:"Undo"})]}),c.jsxs(it,{variant:"outline",size:"sm",onClick:E,className:"flex items-center gap-2",children:[c.jsx(JP,{className:"h-4 w-4"}),c.jsx("span",{className:"text-xs",children:"Redo"})]}),c.jsxs(it,{variant:"outline",size:"sm",onClick:T,disabled:r.length===0,className:"flex items-center gap-2",children:[c.jsx(Of,{className:"h-4 w-4"}),c.jsx("span",{className:"text-xs",children:"Delete"})]}),c.jsxs(it,{variant:"outline",size:"sm",onClick:C,disabled:r.length===0,className:"flex items-center gap-2",children:[c.jsx(RC,{className:"h-4 w-4"}),c.jsx("span",{className:"text-xs",children:"Duplicate"})]})]})]}),c.jsx(js,{}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium mb-3",children:"Selection"}),r.length>0?c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.length," object",r.length!==1?"s":""," selected"]}),c.jsx("div",{className:"flex flex-wrap gap-1",children:r.map((D,P)=>c.jsx(wn,{variant:"outline",className:"text-xs",children:D.type},P))}),c.jsx(it,{variant:"outline",size:"sm",onClick:l,className:"w-full text-xs",children:"Clear Selection"})]}):c.jsx("p",{className:"text-xs text-muted-foreground",children:"No objects selected. Click objects to select them."})]}),c.jsx(js,{}),c.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[c.jsx("h5",{className:"text-xs font-medium mb-2",children:" Quick Tips"}),c.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[c.jsx("p",{children:" Hold Shift while drawing for straight lines"}),c.jsx("p",{children:" Use Alt to temporarily disable snap-to-grid"}),c.jsx("p",{children:" Double-click objects to edit properties"}),c.jsx("p",{children:" Press Escape to cancel current operation"})]})]})]})]})})},WM=[{id:"seating",label:"Seating",icon:eU,color:"#8B4513"},{id:"tables",label:"Tables",icon:tU,color:"#8B4513"},{id:"bedroom",label:"Bedroom",icon:DP,color:"#8B4513"},{id:"storage",label:"Storage",icon:Fc,color:"#8B4513"},{id:"lighting",label:"Lighting",icon:GP,color:"#FFD700"},{id:"decor",label:"Decor",icon:Fc,color:"#228B22"}],j6={seating:[{id:"sofa-1",name:"Modern Sofa",width:200,height:80,color:"#8B4513",category:"seating",tags:["modern","living room","3-seater"],description:"Comfortable 3-seater modern sofa"},{id:"chair-1",name:"Office Chair",width:60,height:60,color:"#2F4F4F",category:"seating",tags:["office","ergonomic","swivel"],description:"Ergonomic office chair with swivel base"},{id:"armchair-1",name:"Armchair",width:80,height:80,color:"#8B4513",category:"seating",tags:["comfort","reading","single"],description:"Comfortable reading armchair"},{id:"sectional-1",name:"L-Sectional",width:240,height:160,color:"#8B4513",category:"seating",tags:["sectional","large","corner"],description:"Large L-shaped sectional sofa"}],tables:[{id:"dining-table-1",name:"Dining Table",width:160,height:80,color:"#8B4513",category:"tables",tags:["dining","rectangular","6-seater"],description:"Rectangular dining table for 6 people"},{id:"coffee-table-1",name:"Coffee Table",width:120,height:60,color:"#8B4513",category:"tables",tags:["coffee","living room","rectangular"],description:"Rectangular coffee table"},{id:"desk-1",name:"Office Desk",width:140,height:70,color:"#8B4513",category:"tables",tags:["office","work","computer"],description:"Computer desk with storage"},{id:"round-table-1",name:"Round Table",width:120,height:120,color:"#8B4513",category:"tables",tags:["round","dining","4-seater"],description:"Round dining table for 4 people"}],bedroom:[{id:"bed-1",name:"Queen Bed",width:160,height:200,color:"#8B4513",category:"bedroom",tags:["queen","bed","sleep"],description:"Queen size bed with headboard"},{id:"nightstand-1",name:"Nightstand",width:50,height:40,color:"#8B4513",category:"bedroom",tags:["nightstand","bedside","storage"],description:"Bedside nightstand with drawer"},{id:"dresser-1",name:"Dresser",width:120,height:50,color:"#8B4513",category:"bedroom",tags:["dresser","storage","clothes"],description:"6-drawer dresser"},{id:"king-bed-1",name:"King Bed",width:180,height:200,color:"#8B4513",category:"bedroom",tags:["king","bed","large"],description:"King size bed with headboard"}],storage:[{id:"bookshelf-1",name:"Bookshelf",width:80,height:30,color:"#8B4513",category:"storage",tags:["books","shelving","display"],description:"5-shelf bookcase"},{id:"wardrobe-1",name:"Wardrobe",width:120,height:60,color:"#8B4513",category:"storage",tags:["wardrobe","clothes","hanging"],description:"Double door wardrobe"},{id:"cabinet-1",name:"Cabinet",width:100,height:40,color:"#8B4513",category:"storage",tags:["cabinet","storage","doors"],description:"Storage cabinet with doors"},{id:"chest-1",name:"Storage Chest",width:90,height:45,color:"#8B4513",category:"storage",tags:["chest","storage","blankets"],description:"Storage chest for blankets"}],lighting:[{id:"floor-lamp-1",name:"Floor Lamp",width:30,height:30,color:"#FFD700",category:"lighting",tags:["floor","lamp","ambient"],description:"Modern floor lamp"},{id:"table-lamp-1",name:"Table Lamp",width:20,height:20,color:"#FFD700",category:"lighting",tags:["table","lamp","desk"],description:"Desk table lamp"},{id:"chandelier-1",name:"Chandelier",width:60,height:60,color:"#FFD700",category:"lighting",tags:["chandelier","ceiling","elegant"],description:"Crystal chandelier"},{id:"pendant-1",name:"Pendant Light",width:25,height:25,color:"#FFD700",category:"lighting",tags:["pendant","hanging","modern"],description:"Modern pendant light"}],decor:[{id:"plant-1",name:"Plant",width:40,height:40,color:"#228B22",category:"decor",tags:["plant","green","natural"],description:"Indoor potted plant"},{id:"artwork-1",name:"Artwork",width:60,height:80,color:"#4169E1",category:"decor",tags:["art","wall","painting"],description:"Framed artwork"},{id:"mirror-1",name:"Mirror",width:50,height:70,color:"#C0C0C0",category:"decor",tags:["mirror","wall","reflection"],description:"Wall-mounted mirror"},{id:"vase-1",name:"Decorative Vase",width:20,height:20,color:"#8B4513",category:"decor",tags:["vase","decoration","ceramic"],description:"Ceramic decorative vase"}]},Kce=()=>{const[n,e]=k.useState(""),[t,i]=k.useState("seating"),[a,s]=k.useState(null),[r,l]=k.useState(null),[d,f]=k.useState(!1),[g,x]=k.useState(!1),[b,_]=k.useState([]),S=k.useRef(null),{gridSize:w,snapToGrid:M,addFurniture:E}=ti(),T=k.useMemo(()=>{const Q=new Set;return Object.values(j6).flat().forEach(J=>{J.tags.forEach(te=>Q.add(te))}),Array.from(Q).sort()},[]),C=k.useMemo(()=>{let Q=j6[t]||[];return n&&(Q=Q.filter(J=>J.name.toLowerCase().includes(n.toLowerCase())||J.description?.toLowerCase().includes(n.toLowerCase())||J.tags.some(te=>te.toLowerCase().includes(n.toLowerCase())))),b.length>0&&(Q=Q.filter(J=>b.some(te=>J.tags.includes(te)))),Q},[t,n,b]),D=k.useCallback((Q,J)=>{s(J),f(!0),Q.dataTransfer.setData("application/json",JSON.stringify({type:"furniture",...J})),Q.dataTransfer.effectAllowed="copy";const te=document.createElement("div");te.style.width=`${J.width/4}px`,te.style.height=`${J.height/4}px`,te.style.backgroundColor=J.color,te.style.border="2px solid #3b82f6",te.style.borderRadius="4px",te.style.opacity="0.8",te.style.position="absolute",te.style.top="-1000px",document.body.appendChild(te),Q.dataTransfer.setDragImage(te,J.width/8,J.height/8),setTimeout(()=>{document.body.removeChild(te)},0)},[]),P=k.useCallback(()=>{s(null),f(!1)},[]),B=k.useCallback((Q,J)=>{const te=Q.touches[0];l({x:te.clientX,y:te.clientY}),s(J)},[]),F=k.useCallback(Q=>{if(!r||!a)return;Q.preventDefault();const J=Q.touches[0],te=Math.abs(J.clientX-r.x),oe=Math.abs(J.clientY-r.y);(te>10||oe>10)&&f(!0)},[r,a]),j=k.useCallback(Q=>{if(!d||!a){l(null),s(null),f(!1);return}const J=Q.changedTouches[0],te=document.elementFromPoint(J.clientX,J.clientY),oe=document.querySelector("canvas");if(oe&&(te===oe||oe.contains(te))){const $=oe.getBoundingClientRect(),X=J.clientX-$.left,G=J.clientY-$.top,{zoom:ee,panX:Y,panY:ne}=ti.getState(),ue=(X-Y)/ee,de=(G-ne)/ee,ie=M?{x:Math.round(ue/w)*w,y:Math.round(de/w)*w}:{x:ue,y:de};E({x:ie.x,y:ie.y,width:a.width,height:a.height,color:a.color,label:a.name})}l(null),s(null),f(!1)},[d,a,M,w,E]),O=k.useCallback(Q=>{_(J=>J.includes(Q)?J.filter(te=>te!==Q):[...J,Q])},[]),I=k.useCallback(()=>{e(""),_([])},[]),W=Q=>WM.find(te=>te.id===Q)?.icon||Fc;return c.jsx(bu,{panelId:"furnitureLibrary",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(H2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(Ta,{placeholder:"Search furniture...",value:n,onChange:Q=>e(Q.target.value),className:"pl-10 pr-8"}),n&&c.jsx(it,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>e(""),children:c.jsx(Eg,{className:"h-3 w-3"})})]}),c.jsx(it,{variant:g?"default":"outline",size:"sm",onClick:()=>x(!g),className:"px-3",children:c.jsx(FP,{className:"h-4 w-4"})})]}),g&&c.jsxs("div",{className:"space-y-2 p-3 bg-muted/50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium",children:"Filter by tags:"}),b.length>0&&c.jsx(it,{variant:"ghost",size:"sm",onClick:I,className:"h-6 text-xs",children:"Clear all"})]}),c.jsx("div",{className:"flex flex-wrap gap-1",children:T.map(Q=>c.jsx(wn,{variant:b.includes(Q)?"default":"outline",className:"cursor-pointer text-xs",onClick:()=>O(Q),children:Q},Q))})]})]}),c.jsxs(_l,{value:t,onValueChange:i,children:[c.jsx(Eo,{className:"grid w-full grid-cols-3 h-auto",children:WM.slice(0,3).map(Q=>{const J=Q.icon;return c.jsxs(vn,{value:Q.id,className:"flex flex-col gap-1 h-12 text-xs",children:[c.jsx(J,{className:"h-4 w-4"}),Q.label]},Q.id)})}),c.jsx(Eo,{className:"grid w-full grid-cols-3 mt-1 h-auto",children:WM.slice(3).map(Q=>{const J=Q.icon;return c.jsxs(vn,{value:Q.id,className:"flex flex-col gap-1 h-12 text-xs",children:[c.jsx(J,{className:"h-4 w-4"}),Q.label]},Q.id)})}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mt-2",children:[c.jsxs("span",{children:[C.length," items found"]}),(n||b.length>0)&&c.jsx(it,{variant:"ghost",size:"sm",onClick:I,className:"h-6 text-xs",children:"Clear filters"})]}),c.jsxs(Ca,{className:"h-[320px] mt-2",children:[c.jsx("div",{className:"grid grid-cols-2 gap-2 pr-2",children:C.map(Q=>{const J=W(Q.category);return c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(Jt,{className:`cursor-move hover:shadow-md transition-all duration-200 hover:scale-105 ${d&&a?.id===Q.id?"opacity-50 scale-95":""}`,draggable:!0,onDragStart:te=>D(te,Q),onDragEnd:P,onTouchStart:te=>B(te,Q),onTouchMove:F,onTouchEnd:j,children:c.jsxs(pn,{className:"p-3",children:[c.jsxs("div",{className:"w-full h-16 rounded mb-2 flex items-center justify-center relative overflow-hidden",style:{backgroundColor:Q.color},children:[c.jsx(J,{className:"h-6 w-6 text-white/80"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("div",{className:"text-xs font-medium truncate",children:Q.name}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:[Q.width,"  ",Q.height]}),Q.tags.length>0&&c.jsxs("div",{className:"flex flex-wrap gap-1",children:[Q.tags.slice(0,2).map(te=>c.jsx(wn,{variant:"secondary",className:"text-xs px-1 py-0",children:te},te)),Q.tags.length>2&&c.jsxs(wn,{variant:"secondary",className:"text-xs px-1 py-0",children:["+",Q.tags.length-2]})]})]})]})})}),c.jsx(ma,{side:"left",className:"max-w-xs",children:c.jsxs("div",{className:"space-y-1",children:[c.jsx("div",{className:"font-medium",children:Q.name}),c.jsx("div",{className:"text-xs text-muted-foreground",children:Q.description}),c.jsxs("div",{className:"text-xs",children:["Size: ",Q.width,"  ",Q.height," pixels"]}),c.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Q.tags.map(te=>c.jsx(wn,{variant:"outline",className:"text-xs",children:te},te))})]})})]},Q.id)})}),C.length===0&&c.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-muted-foreground",children:[c.jsx(Fc,{className:"h-8 w-8 mb-2"}),c.jsx("div",{className:"text-sm",children:"No furniture found"}),c.jsx("div",{className:"text-xs",children:"Try adjusting your search or filters"})]})]})]}),c.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-lg space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(_h,{className:"h-3 w-3"}),c.jsx("span",{children:"Drag furniture to canvas for automatic placement"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Mf,{className:"h-3 w-3"}),c.jsx("span",{children:"Items snap to grid when enabled"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Vv,{className:"h-3 w-3"}),c.jsx("span",{children:"Use corner handles to resize after placement"})]})]}),d&&a&&c.jsx("div",{ref:S,className:"fixed pointer-events-none z-50 opacity-80",style:{width:a.width/4,height:a.height/4,backgroundColor:a.color,border:"2px solid #3b82f6",borderRadius:"4px",transform:"translate(-50%, -50%)"}})]})})};function Zv(n){const e=parseInt(n.slice(1,3),16)/255,t=parseInt(n.slice(3,5),16)/255,i=parseInt(n.slice(5,7),16)/255,a=Math.max(e,t,i),s=Math.min(e,t,i);let r=0,l=0;const d=(a+s)/2;if(a!==s){const f=a-s;switch(l=d>.5?f/(2-a-s):f/(a+s),a){case e:r=(t-i)/f+(t<i?6:0);break;case t:r=(i-e)/f+2;break;case i:r=(e-t)/f+4;break}r/=6}return{h:Math.round(r*360),s:Math.round(l*100),l:Math.round(d*100)}}function $r(n){const e=n.h/360,t=n.s/100,i=n.l/100,a=(f,g,x)=>(x<0&&(x+=1),x>1&&(x-=1),x<1/6?f+(g-f)*6*x:x<1/2?g:x<2/3?f+(g-f)*(2/3-x)*6:f);let s,r,l;if(t===0)s=r=l=i;else{const f=i<.5?i*(1+t):i+t-i*t,g=2*i-f;s=a(g,f,e+1/3),r=a(g,f,e),l=a(g,f,e-1/3)}const d=f=>{const g=Math.round(f*255).toString(16);return g.length===1?"0"+g:g};return`#${d(s)}${d(r)}${d(l)}`}function Zce(n,e=5){const t=Zv(n),i=[],a=80/(e-1);for(let s=0;s<e;s++){const r=Math.max(10,Math.min(90,20+s*a));i.push($r({h:t.h,s:Math.max(10,t.s),l:r}))}return i}function Qce(n,e=5){const t=Zv(n),i=[],a=60/(e-1);for(let s=0;s<e;s++){const r=(t.h-30+s*a+360)%360;i.push($r({h:r,s:Math.max(30,t.s),l:Math.max(20,Math.min(80,t.l))}))}return i}function Jce(n){const e=Zv(n),t=(e.h+180)%360;return[n,$r({h:t,s:e.s,l:e.l}),$r({h:e.h,s:Math.max(20,e.s-20),l:Math.min(90,e.l+20)}),$r({h:t,s:Math.max(20,e.s-20),l:Math.min(90,e.l+20)}),$r({h:e.h,s:Math.min(100,e.s+20),l:Math.max(10,e.l-20)})]}function $ce(n){const e=Zv(n);return[n,$r({h:(e.h+120)%360,s:e.s,l:e.l}),$r({h:(e.h+240)%360,s:e.s,l:e.l}),$r({h:e.h,s:Math.max(20,e.s-30),l:Math.min(90,e.l+30)}),$r({h:(e.h+120)%360,s:Math.max(20,e.s-30),l:Math.min(90,e.l+30)})]}function eue(n){const e=Zv(n),t=(e.h+180)%360;return[n,$r({h:(t-30+360)%360,s:e.s,l:e.l}),$r({h:(t+30)%360,s:e.s,l:e.l}),$r({h:e.h,s:Math.max(20,e.s-20),l:Math.min(90,e.l+20)}),$r({h:t,s:Math.max(20,e.s-20),l:Math.min(90,e.l+20)})]}function tue(n){const e=Zv(n);return[n,$r({h:(e.h+90)%360,s:e.s,l:e.l}),$r({h:(e.h+180)%360,s:e.s,l:e.l}),$r({h:(e.h+270)%360,s:e.s,l:e.l}),$r({h:e.h,s:Math.max(20,e.s-20),l:Math.min(90,e.l+20)})]}function nue(n,e,t=5){let i,a,s;switch(e){case"monochromatic":i=Zce(n,t),a="Monochromatic",s="Variations of the same hue with different lightness";break;case"analogous":i=Qce(n,t),a="Analogous",s="Colors adjacent on the color wheel";break;case"complementary":i=Jce(n),a="Complementary",s="Colors opposite on the color wheel";break;case"triadic":i=$ce(n),a="Triadic",s="Three colors evenly spaced on the color wheel";break;case"split-complementary":i=eue(n),a="Split Complementary",s="Base color plus two colors adjacent to its complement";break;case"tetradic":i=tue(n),a="Tetradic",s="Four colors forming a square on the color wheel";break;default:i=[n],a="Custom",s="Custom color selection"}return{id:`${e}-${Date.now()}`,name:a,colors:i,type:e,description:s}}const iue=[{id:"walls",label:"Walls"},{id:"floors",label:"Floors"},{id:"fabrics",label:"Fabrics"}],aue={walls:[{id:"wall-white",name:"White Paint",color:"#FFFFFF",texture:"solid"},{id:"wall-beige",name:"Beige Paint",color:"#F5F5DC",texture:"solid"},{id:"wall-gray",name:"Gray Paint",color:"#808080",texture:"solid"},{id:"wall-brick",name:"Red Brick",color:"#B22222",texture:"brick"},{id:"wall-wood",name:"Wood Paneling",color:"#8B4513",texture:"wood"},{id:"wall-stone",name:"Stone",color:"#696969",texture:"stone"}],floors:[{id:"floor-hardwood",name:"Hardwood",color:"#8B4513",texture:"wood"},{id:"floor-tile",name:"Ceramic Tile",color:"#F0F0F0",texture:"tile"},{id:"floor-marble",name:"Marble",color:"#FFFAFA",texture:"marble"},{id:"floor-carpet",name:"Carpet",color:"#D2B48C",texture:"carpet"},{id:"floor-concrete",name:"Concrete",color:"#808080",texture:"concrete"},{id:"floor-bamboo",name:"Bamboo",color:"#DEB887",texture:"wood"}],fabrics:[{id:"fabric-cotton",name:"Cotton",color:"#FFFAF0",texture:"fabric"},{id:"fabric-linen",name:"Linen",color:"#FAF0E6",texture:"fabric"},{id:"fabric-velvet",name:"Velvet",color:"#8B008B",texture:"fabric"},{id:"fabric-leather",name:"Leather",color:"#8B4513",texture:"leather"},{id:"fabric-silk",name:"Silk",color:"#FFF8DC",texture:"fabric"},{id:"fabric-wool",name:"Wool",color:"#F5DEB3",texture:"fabric"}]},sue=[{id:"modern",name:"Modern Minimalist",colors:["#FFFFFF","#F5F5F5","#E0E0E0","#BDBDBD","#757575"],type:"monochromatic",description:"Clean, minimal palette for contemporary spaces"},{id:"warm",name:"Warm Comfort",colors:["#FFF8DC","#F5DEB3","#DEB887","#D2B48C","#BC8F8F"],type:"analogous",description:"Cozy, inviting colors for comfortable living"},{id:"cool",name:"Cool Serenity",colors:["#E0F6FF","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6"],type:"analogous",description:"Calming blues for peaceful environments"},{id:"earth",name:"Natural Earth",colors:["#8D6E63","#A1887F","#BCAAA4","#D7CCC8","#EFEBE9"],type:"monochromatic",description:"Grounded, natural tones inspired by earth"},{id:"vibrant",name:"Vibrant Energy",colors:["#FF5722","#FF9800","#FFC107","#8BC34A","#2196F3"],type:"complementary",description:"Bold, energetic colors for dynamic spaces"},{id:"scandinavian",name:"Scandinavian",colors:["#FAFAFA","#E8E8E8","#D0D0D0","#A0A0A0","#606060"],type:"monochromatic",description:"Nordic-inspired neutral palette"},{id:"tropical",name:"Tropical Paradise",colors:["#00BCD4","#4CAF50","#FFEB3B","#FF9800","#E91E63"],type:"triadic",description:"Vibrant tropical colors for exotic feel"}],rue=()=>{const[n,e]=k.useState("walls"),[t,i]=k.useState("#3B82F6"),[a,s]=k.useState([]),[r,l]=k.useState(!1),{lighting:d,updateSceneLighting:f}=ti(),[g,x]=k.useState(d),b=k.useCallback(E=>{x(E),f(E)},[f]),_=k.useCallback(()=>{l(!0),setTimeout(()=>{const T=["monochromatic","analogous","complementary","triadic","split-complementary"].map(C=>nue(t,C));s(T),l(!1)},500)},[t]);di.useEffect(()=>{_()},[_]);const S=k.useMemo(()=>[...sue,...a],[a]),w=k.useCallback((E,T)=>{E.dataTransfer.setData("application/json",JSON.stringify({type:"material",...T})),E.dataTransfer.effectAllowed="copy"},[]),M=k.useCallback((E,T)=>{E.dataTransfer.setData("application/json",JSON.stringify({type:"color",color:T})),E.dataTransfer.effectAllowed="copy"},[]);return c.jsxs(bu,{panelId:"materialPalette",children:[c.jsxs(_l,{defaultValue:"materials",className:"w-full",children:[c.jsxs(Eo,{className:"grid w-full grid-cols-3",children:[c.jsx(vn,{value:"materials",children:"Materials"}),c.jsx(vn,{value:"colors",children:"Colors"}),c.jsx(vn,{value:"lighting",children:"Lighting"})]}),c.jsx(Rn,{value:"materials",className:"space-y-4",children:c.jsxs(_l,{value:n,onValueChange:e,children:[c.jsx(Eo,{className:"grid w-full grid-cols-3",children:iue.map(E=>c.jsx(vn,{value:E.id,className:"text-xs",children:E.label},E.id))}),c.jsx(Ca,{className:"h-[350px] mt-4",children:c.jsx("div",{className:"grid grid-cols-2 gap-2",children:aue[n]?.map(E=>c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(Jt,{className:"cursor-move hover:shadow-md transition-all duration-200 hover:scale-105 group",draggable:!0,onDragStart:T=>w(T,E),children:c.jsxs(pn,{className:"p-3",children:[c.jsxs("div",{className:"w-full h-12 rounded mb-2 relative overflow-hidden border border-border/20",style:{backgroundColor:E.color},children:[c.jsxs("div",{className:"absolute inset-0 opacity-20",children:[E.texture==="brick"&&c.jsx("div",{className:"w-full h-full bg-gradient-to-br from-transparent via-black/10 to-transparent",style:{backgroundImage:`repeating-linear-gradient(
                                           0deg,
                                           transparent,
                                           transparent 3px,
                                           rgba(0,0,0,0.1) 3px,
                                           rgba(0,0,0,0.1) 4px
                                         ),
                                         repeating-linear-gradient(
                                           90deg,
                                           transparent,
                                           transparent 8px,
                                           rgba(0,0,0,0.1) 8px,
                                           rgba(0,0,0,0.1) 9px
                                         )`}}),E.texture==="wood"&&c.jsx("div",{className:"w-full h-full bg-gradient-to-r from-transparent via-black/5 to-transparent",style:{backgroundImage:`repeating-linear-gradient(
                                           90deg,
                                           transparent,
                                           transparent 2px,
                                           rgba(0,0,0,0.05) 2px,
                                           rgba(0,0,0,0.05) 3px
                                         )`}}),E.texture==="tile"&&c.jsx("div",{className:"w-full h-full",style:{backgroundImage:`repeating-linear-gradient(
                                           0deg,
                                           rgba(0,0,0,0.1),
                                           rgba(0,0,0,0.1) 1px,
                                           transparent 1px,
                                           transparent 6px
                                         ),
                                         repeating-linear-gradient(
                                           90deg,
                                           rgba(0,0,0,0.1),
                                           rgba(0,0,0,0.1) 1px,
                                           transparent 1px,
                                           transparent 6px
                                         )`}})]}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent group-hover:from-white/20"})]}),c.jsx("div",{className:"text-xs font-medium truncate",children:E.name}),c.jsxs("div",{className:"text-xs text-muted-foreground capitalize flex items-center gap-1",children:[c.jsx("span",{children:E.texture}),c.jsx("span",{className:"text-xs",children:""}),c.jsx("span",{children:E.color})]})]})})}),c.jsx(ma,{side:"left",children:c.jsxs("div",{className:"text-xs",children:[c.jsx("div",{className:"font-medium",children:E.name}),c.jsxs("div",{className:"text-muted-foreground",children:[E.texture," texture"]}),c.jsx("div",{className:"text-muted-foreground",children:"Drag to apply to selected elements"})]})})]},E.id))})})]})}),c.jsxs(Rn,{value:"colors",className:"space-y-4",children:[c.jsxs(Jt,{children:[c.jsx(In,{className:"pb-3",children:c.jsxs(Bn,{className:"text-sm flex items-center gap-2",children:[c.jsx(pD,{className:"h-4 w-4"}),"Smart Palette Generator"]})}),c.jsx(pn,{className:"space-y-3",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(qt,{className:"text-xs",children:"Base Color"}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx(Ta,{type:"color",value:t,onChange:E=>i(E.target.value),className:"w-12 h-8 p-1 border rounded"}),c.jsx(Ta,{type:"text",value:t,onChange:E=>i(E.target.value),className:"flex-1 h-8 text-xs",placeholder:"#3B82F6"})]})]}),c.jsx("div",{className:"flex items-end",children:c.jsx(it,{size:"sm",onClick:_,disabled:r,className:"h-8",children:r?c.jsx(pd,{className:"h-3 w-3 animate-spin"}):c.jsx(PC,{className:"h-3 w-3"})})})]})})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium mb-3",children:"Color Palettes"}),c.jsx(Ca,{className:"h-[350px]",children:c.jsx("div",{className:"space-y-3",children:S.map(E=>c.jsx(Jt,{className:"transition-shadow hover:shadow-md",children:c.jsxs(pn,{className:"p-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm font-medium",children:E.name}),a.includes(E)&&c.jsx(wn,{variant:"secondary",className:"text-xs",children:"Generated"})]}),c.jsxs(wa,{children:[c.jsx(Ma,{children:c.jsx(wn,{variant:"outline",className:"text-xs capitalize",children:E.type})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs max-w-xs",children:E.description})})]})]}),c.jsx("div",{className:"flex gap-1 mb-2",children:E.colors.map((T,C)=>c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx("div",{className:"flex-1 h-8 rounded cursor-move transition-transform hover:scale-105 border border-border/20",style:{backgroundColor:T},draggable:!0,onDragStart:D=>M(D,T),title:T})}),c.jsx(ma,{children:c.jsxs("div",{className:"text-xs",children:[c.jsx("div",{className:"font-medium",children:T}),c.jsx("div",{className:"text-muted-foreground",children:"Click to copy, drag to apply"})]})})]},C))}),E.description&&c.jsx("p",{className:"text-xs text-muted-foreground",children:E.description})]})},E.id))})})]})]}),c.jsx(Rn,{value:"lighting",className:"space-y-4",children:c.jsxs("div",{children:[c.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[c.jsx(Fx,{className:"h-4 w-4"}),"Scene Lighting Controls"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx(qt,{className:"text-sm",children:"Main Light Intensity"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:g.mainLight.toFixed(1)})]}),c.jsx(_o,{value:[g.mainLight],onValueChange:([E])=>{const T={...g,mainLight:E};b(T)},min:0,max:2,step:.1,className:"mt-2"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx(qt,{className:"text-sm",children:"Ambient Light"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:g.ambientLight.toFixed(1)})]}),c.jsx(_o,{value:[g.ambientLight],onValueChange:([E])=>{const T={...g,ambientLight:E};b(T)},min:0,max:1,step:.1,className:"mt-2"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx(qt,{className:"text-sm",children:"Color Temperature"}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[g.temperature,"K"]})]}),c.jsx(_o,{value:[g.temperature],onValueChange:([E])=>{const T={...g,temperature:E};b(T)},min:2700,max:6500,step:100,className:"mt-2"}),c.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[c.jsx("span",{children:"Warm"}),c.jsx("span",{children:"Cool"})]})]}),c.jsxs("div",{children:[c.jsx(qt,{className:"text-sm mb-3 block",children:"Time of Day Ambiance"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsxs(it,{variant:"outline",size:"sm",onClick:()=>{b({mainLight:.2,ambientLight:.1,temperature:2700})},className:"flex items-center gap-2",children:[c.jsx(WP,{className:"h-4 w-4"}),"Night"]})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:"Soft, warm lighting for evening"})})]}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsxs(it,{variant:"outline",size:"sm",onClick:()=>{b({mainLight:.6,ambientLight:.3,temperature:3200})},className:"flex items-center gap-2",children:[c.jsx(rte,{className:"h-4 w-4"}),"Dawn"]})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:"Gentle morning light"})})]}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsxs(it,{variant:"outline",size:"sm",onClick:()=>{b({mainLight:1.2,ambientLight:.6,temperature:6500})},className:"flex items-center gap-2",children:[c.jsx(FT,{className:"h-4 w-4"}),"Midday"]})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:"Bright, natural daylight"})})]}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsxs(it,{variant:"outline",size:"sm",onClick:()=>{b({mainLight:.8,ambientLight:.4,temperature:3800})},className:"flex items-center gap-2",children:[c.jsx(lte,{className:"h-4 w-4"}),"Sunset"]})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:"Warm, golden hour lighting"})})]}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsxs(it,{variant:"outline",size:"sm",onClick:()=>{b({mainLight:1,ambientLight:.5,temperature:5e3})},className:"flex items-center gap-2",children:[c.jsx(xl,{className:"h-4 w-4"}),"Focus"]})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:"Optimal lighting for work"})})]}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsxs(it,{variant:"outline",size:"sm",onClick:()=>{b({mainLight:.4,ambientLight:.3,temperature:2900})},className:"flex items-center gap-2",children:[c.jsx(w$,{className:"h-4 w-4"}),"Cozy"]})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:"Intimate, relaxing atmosphere"})})]})]})]}),c.jsx(Jt,{className:"bg-gradient-to-r from-yellow-100 to-blue-100 border-dashed",children:c.jsx(pn,{className:"p-3",children:c.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:[c.jsx(Fx,{className:"h-4 w-4 mx-auto mb-1"}),"Lighting changes apply to 3D view in real-time"]})})})]})]})})]}),c.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-lg space-y-2 mt-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(k2,{className:"h-3 w-3"}),c.jsx("span",{children:"Select elements first, then drag materials/colors to apply"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(pD,{className:"h-3 w-3"}),c.jsx("span",{children:"Use smart palette generator for harmonious color schemes"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Fx,{className:"h-3 w-3"}),c.jsx("span",{children:"Lighting changes reflect in 3D view instantly"})]})]})]})},oue=[{id:"walls",name:"Walls",color:"#8B4513",visible:!0,locked:!1},{id:"rooms",name:"Rooms",color:"#90EE90",visible:!0,locked:!1},{id:"furniture",name:"Furniture",color:"#4169E1",visible:!0,locked:!1},{id:"doors",name:"Doors & Windows",color:"#FF6347",visible:!0,locked:!1},{id:"dimensions",name:"Dimensions",color:"#FFD700",visible:!0,locked:!1},{id:"annotations",name:"Text & Labels",color:"#9370DB",visible:!0,locked:!1}],lue=[{id:"white",name:"White",color:"#FFFFFF",texture:"solid"},{id:"beige",name:"Beige",color:"#F5F5DC",texture:"solid"},{id:"gray",name:"Gray",color:"#808080",texture:"solid"},{id:"brown",name:"Brown",color:"#8B4513",texture:"solid"},{id:"red",name:"Red",color:"#DC143C",texture:"solid"},{id:"blue",name:"Blue",color:"#4169E1",texture:"solid"},{id:"green",name:"Green",color:"#228B22",texture:"solid"},{id:"yellow",name:"Yellow",color:"#FFD700",texture:"solid"},{id:"brick",name:"Brick",color:"#B22222",texture:"brick"},{id:"wood",name:"Wood",color:"#8B4513",texture:"wood"},{id:"stone",name:"Stone",color:"#696969",texture:"stone"},{id:"marble",name:"Marble",color:"#FFFAFA",texture:"marble"}],cue=[{id:"solid",name:"Solid",icon:""},{id:"brick",name:"Brick",icon:""},{id:"wood",name:"Wood",icon:""},{id:"stone",name:"Stone",icon:""},{id:"tile",name:"Tile",icon:""},{id:"marble",name:"Marble",icon:""},{id:"fabric",name:"Fabric",icon:""},{id:"leather",name:"Leather",icon:""},{id:"carpet",name:"Carpet",icon:""},{id:"concrete",name:"Concrete",icon:""}],KM=()=>{const{selectedElements:n,walls:e,rooms:t,furniture:i,updateWall:a,updateRoom:s,updateFurniture:r,removeWall:l,removeRoom:d,removeFurniture:f,clearSelection:g}=ti(),[x,b]=k.useState(oue),[_,S]=k.useState("properties"),w=k.useMemo(()=>{if(n.length===0)return null;const j=n[0];switch(j.type){case"wall":return e.find(O=>O.id===j.id);case"room":return t.find(O=>O.id===j.id);case"furniture":return i.find(O=>O.id===j.id);default:return null}},[n,e,t,i]),M=n.length>0?n[0].type:null,E=k.useCallback((j,O)=>{if(!w||n.length===0)return;const I=n[0].id,W=n[0].type,Q={[j]:O};switch(W){case"wall":a(I,Q);break;case"room":s(I,Q);break;case"furniture":r(I,Q);break}},[w,n,a,s,r]),T=k.useCallback(()=>{if(n.length===0)return;const j=n[0];switch(j.type){case"wall":l(j.id);break;case"room":d(j.id);break;case"furniture":f(j.id);break}g()},[n,l,d,f,g]),C=k.useCallback(()=>{if(!w||n.length===0)return;const j=n[0].type,O=20;switch(j){case"room":const I=w;s("",{...I,x:I.x+O,y:I.y+O,label:`${I.label} Copy`});break;case"furniture":const W=w;r("",{...W,x:W.x+O,y:W.y+O,label:`${W.label} Copy`});break}},[w,n,s,r]),D=k.useCallback(j=>{b(O=>O.map(I=>I.id===j?{...I,visible:!I.visible}:I))},[]),P=k.useCallback(j=>{b(O=>O.map(I=>I.id===j?{...I,locked:!I.locked}:I))},[]),B=j=>{switch(j){case"wall":return _h;case"room":return Nv;case"furniture":return Fc;case"door":return F2;case"window":return QP;case"text":return G2;default:return kp}},F=()=>{if(!w||!M)return c.jsxs("div",{className:"text-center py-8",children:[c.jsx(kp,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Select an object to edit its properties"})]});const j=B(M);return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[c.jsx(j,{className:"h-5 w-5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-sm capitalize",children:M}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",w.id]})]}),c.jsxs(wn,{variant:"outline",className:"text-xs",children:[n.length," selected"]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Basic Properties"}),(M==="room"||M==="furniture")&&c.jsxs("div",{className:"space-y-1",children:[c.jsx(qt,{className:"text-xs",children:"Label"}),c.jsx(Ta,{value:w.label||"",onChange:O=>E("label",O.target.value),placeholder:"Enter label...",className:"h-8 text-xs"})]}),(M==="room"||M==="furniture")&&c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx(qt,{className:"text-xs",children:"X Position"}),c.jsx(Ta,{type:"number",value:w.x||0,onChange:O=>E("x",Number(O.target.value)),className:"h-8 text-xs"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(qt,{className:"text-xs",children:"Y Position"}),c.jsx(Ta,{type:"number",value:w.y||0,onChange:O=>E("y",Number(O.target.value)),className:"h-8 text-xs"})]})]}),(M==="room"||M==="furniture")&&c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx(qt,{className:"text-xs",children:"Width"}),c.jsx(Ta,{type:"number",value:w.width||0,onChange:O=>E("width",Number(O.target.value)),className:"h-8 text-xs",min:"1"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(qt,{className:"text-xs",children:"Height"}),c.jsx(Ta,{type:"number",value:w.height||0,onChange:O=>E("height",Number(O.target.value)),className:"h-8 text-xs",min:"1"})]})]}),M==="wall"&&c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{className:"space-y-1",children:[c.jsx(qt,{className:"text-xs",children:"Thickness"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(_o,{value:[w.thickness||8],onValueChange:([O])=>E("thickness",O),min:2,max:20,step:1,className:"flex-1"}),c.jsxs("span",{className:"text-xs text-muted-foreground w-8",children:[w.thickness||8,"px"]})]})]})})]}),c.jsx(js,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(k2,{className:"h-4 w-4"}),"Material & Color"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-xs",children:"Color"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ta,{type:"color",value:w.color||"#808080",onChange:O=>E("color",O.target.value),className:"w-12 h-8 p-1 border rounded"}),c.jsx(Ta,{type:"text",value:w.color||"#808080",onChange:O=>E("color",O.target.value),className:"flex-1 h-8 text-xs",placeholder:"#808080"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-xs",children:"Quick Colors"}),c.jsx("div",{className:"grid grid-cols-6 gap-1",children:lue.slice(0,12).map(O=>c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx("button",{className:"w-6 h-6 rounded border border-border/40 hover:scale-110 transition-transform",style:{backgroundColor:O.color},onClick:()=>E("color",O.color),title:O.name})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:O.name})})]},O.id))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-xs",children:"Texture"}),c.jsxs(Cr,{value:w.texture||"solid",onValueChange:O=>E("texture",O),children:[c.jsx(dr,{className:"h-8",children:c.jsx(Ar,{})}),c.jsx(hr,{children:cue.map(O=>c.jsx(Li,{value:O.id,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{children:O.icon}),c.jsx("span",{children:O.name})]})},O.id))})]})]})]}),c.jsx(js,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(d1,{className:"h-4 w-4"}),"Layer Assignment"]}),c.jsxs(Cr,{value:w.layerId||M,onValueChange:O=>E("layerId",O),children:[c.jsx(dr,{className:"h-8",children:c.jsx(Ar,{})}),c.jsx(hr,{children:x.map(O=>c.jsx(Li,{value:O.id,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-sm border",style:{backgroundColor:O.color}}),c.jsx("span",{children:O.name})]})},O.id))})]})]}),c.jsx(js,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Actions"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs(it,{variant:"outline",size:"sm",onClick:C,className:"flex items-center gap-2",children:[c.jsx(RC,{className:"h-3 w-3"}),c.jsx("span",{className:"text-xs",children:"Duplicate"})]}),c.jsxs(it,{variant:"outline",size:"sm",onClick:T,className:"flex items-center gap-2 text-destructive hover:text-destructive",children:[c.jsx(Of,{className:"h-3 w-3"}),c.jsx("span",{className:"text-xs",children:"Delete"})]})]})]})]})};return c.jsxs(bu,{panelId:"properties",children:[c.jsxs(_l,{value:_,onValueChange:S,className:"w-full",children:[c.jsxs(Eo,{className:"grid w-full grid-cols-2",children:[c.jsx(vn,{value:"properties",children:"Properties"}),c.jsx(vn,{value:"layers",children:"Layers"})]}),c.jsx(Rn,{value:"properties",className:"mt-4",children:c.jsx(Ca,{className:"h-[400px]",children:F()})}),c.jsx(Rn,{value:"layers",className:"mt-4",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Layer Management"}),c.jsx(it,{variant:"outline",size:"sm",className:"text-xs",children:"Add Layer"})]}),c.jsx(Ca,{className:"h-[350px]",children:c.jsx("div",{className:"space-y-2",children:x.map(j=>c.jsx(Jt,{className:"p-3",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-4 h-4 rounded border border-border/40",style:{backgroundColor:j.color}}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium text-sm",children:j.name}),c.jsx("div",{className:"text-xs text-muted-foreground",children:j.id})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>D(j.id),className:"h-6 w-6 p-0",children:j.visible?c.jsx(xl,{className:"h-3 w-3"}):c.jsx(Gv,{className:"h-3 w-3"})})}),c.jsx(ma,{children:c.jsxs("p",{className:"text-xs",children:[j.visible?"Hide":"Show"," layer"]})})]}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>P(j.id),className:"h-6 w-6 p-0",children:j.locked?c.jsx(XP,{className:"h-3 w-3"}):c.jsx(qP,{className:"h-3 w-3"})})}),c.jsx(ma,{children:c.jsxs("p",{className:"text-xs",children:[j.locked?"Unlock":"Lock"," layer"]})})]})]})]})},j.id))})}),c.jsxs(Zo,{children:[c.jsx(_g,{className:"h-4 w-4"}),c.jsx(Qo,{className:"text-xs",children:"Use layers to organize your floor plan elements. Hidden layers won't be visible in the canvas, and locked layers can't be edited."})]})]})})]}),c.jsx("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:c.jsx("div",{className:"text-xs text-muted-foreground",children:n.length===0?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(_g,{className:"h-3 w-3"}),c.jsx("span",{children:"Select objects on the canvas to edit their properties"})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(kp,{className:"h-3 w-3"}),c.jsxs("span",{children:[n.length," object",n.length!==1?"s":""," selected"]})]})})})]})},uue=[{id:"walls",name:"Walls",color:"#8B4513",visible:!0,locked:!1,order:0,type:"default"},{id:"rooms",name:"Rooms",color:"#90EE90",visible:!0,locked:!1,order:1,type:"default"},{id:"furniture",name:"Furniture",color:"#4169E1",visible:!0,locked:!1,order:2,type:"default"},{id:"doors-windows",name:"Doors & Windows",color:"#FF6347",visible:!0,locked:!1,order:3,type:"default"},{id:"dimensions",name:"Dimensions",color:"#FFD700",visible:!0,locked:!1,order:4,type:"default"},{id:"annotations",name:"Text & Labels",color:"#9370DB",visible:!0,locked:!1,order:5,type:"default"}],v_=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#F1948A","#85C1E9","#D7BDE2"],due=()=>{const{walls:n,rooms:e,furniture:t}=ti(),[i,a]=k.useState(()=>uue.map(ie=>({...ie,objectCount:O(ie.id)}))),[s,r]=k.useState(null),[l,d]=k.useState(null),[f,g]=k.useState(!1),[x,b]=k.useState(!1),[_,S]=k.useState(!1),[w,M]=k.useState(null),[E,T]=k.useState(""),[C,D]=k.useState(v_[0]),[P,B]=k.useState(""),[F,j]=k.useState("");function O(ie){switch(ie){case"walls":return n.length;case"rooms":return e.length;case"furniture":return t.length;case"doors-windows":return 0;case"dimensions":return 0;case"annotations":return 0;default:return 0}}const I=k.useCallback(()=>{a(ie=>ie.map(Me=>({...Me,objectCount:O(Me.id)})))},[n.length,e.length,t.length]);di.useEffect(()=>{I()},[I]);const W=k.useMemo(()=>[...i].sort((ie,Me)=>ie.order-Me.order),[i]),Q=k.useCallback(ie=>{a(Me=>Me.map(ye=>ye.id===ie?{...ye,visible:!ye.visible}:ye))},[]),J=k.useCallback(ie=>{a(Me=>Me.map(ye=>ye.id===ie?{...ye,locked:!ye.locked}:ye))},[]),te=k.useCallback(()=>{if(!E.trim())return;const ie={id:`layer_${Date.now()}`,name:E.trim(),color:C,visible:!0,locked:!1,order:i.length,objectCount:0,type:"custom"};a(Me=>[...Me,ie]),T(""),D(v_[0]),g(!1)},[E,C,i.length]),oe=k.useCallback(()=>{!w||!P.trim()||(a(ie=>ie.map(Me=>Me.id===w?{...Me,name:P.trim(),color:F}:Me)),b(!1),M(null),B(""),j(""))},[w,P,F]),$=k.useCallback(()=>{w&&(a(ie=>ie.filter(Me=>Me.id!==w)),S(!1),M(null))},[w]),X=k.useCallback(ie=>{M(ie.id),B(ie.name),j(ie.color),b(!0)},[]),G=k.useCallback(ie=>{M(ie),S(!0)},[]),ee=k.useCallback((ie,Me)=>{r(Me),ie.dataTransfer.effectAllowed="move"},[]),Y=k.useCallback((ie,Me)=>{ie.preventDefault(),ie.dataTransfer.dropEffect="move",d(Me)},[]),ne=k.useCallback(()=>{d(null)},[]),ue=k.useCallback((ie,Me)=>{if(ie.preventDefault(),!s||s===Me){r(null),d(null);return}a(ye=>{const ae=[...ye],_e=ae.findIndex(st=>st.id===s),Ke=ae.findIndex(st=>st.id===Me);if(_e===-1||Ke===-1)return ye;const[Ge]=ae.splice(_e,1);return ae.splice(Ke,0,Ge),ae.map((st,ft)=>({...st,order:ft}))}),r(null),d(null)},[s]),de=ie=>{switch(ie){case"walls":return _h;case"rooms":return Nv;case"furniture":return Fc;case"doors-windows":return F2;case"dimensions":return Av;case"annotations":return G2;default:return d1}};return c.jsxs(bu,{panelId:"layers",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h3",{className:"font-medium text-sm flex items-center gap-2",children:[c.jsx(d1,{className:"h-4 w-4"}),"Layer Management"]}),c.jsxs(Nf,{open:f,onOpenChange:g,children:[c.jsx(y1,{asChild:!0,children:c.jsxs(it,{variant:"outline",size:"sm",className:"h-7",children:[c.jsx(h1,{className:"h-3 w-3 mr-1"}),"Add Layer"]})}),c.jsxs(gh,{className:"sm:max-w-md",children:[c.jsxs(vh,{children:[c.jsx(yh,{children:"Create New Layer"}),c.jsx(Hp,{children:"Add a new layer to organize your floor plan elements."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"layer-name",children:"Layer Name"}),c.jsx(Ta,{id:"layer-name",value:E,onChange:ie=>T(ie.target.value),placeholder:"Enter layer name...",className:"h-8"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"layer-color",children:"Layer Color"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ta,{id:"layer-color",type:"color",value:C,onChange:ie=>D(ie.target.value),className:"w-12 h-8 p-1"}),c.jsx("div",{className:"grid grid-cols-5 gap-1 flex-1",children:v_.slice(0,10).map(ie=>c.jsx("button",{className:"w-6 h-6 rounded border border-border/40 hover:scale-110 transition-transform",style:{backgroundColor:ie},onClick:()=>D(ie)},ie))})]})]})]}),c.jsxs(j_,{children:[c.jsx(it,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),c.jsx(it,{onClick:te,disabled:!E.trim(),children:"Create Layer"})]})]})]})]}),c.jsx(js,{}),c.jsx(Ca,{className:"h-[300px]",children:c.jsx("div",{className:"space-y-2",children:W.map(ie=>{const Me=de(ie.id),ye=s===ie.id,ae=l===ie.id;return c.jsx(Jt,{className:`transition-all duration-200 ${ye?"opacity-50 scale-95":""} ${ae?"ring-2 ring-primary/50 bg-primary/5":""}`,draggable:!0,onDragStart:_e=>ee(_e,ie.id),onDragOver:_e=>Y(_e,ie.id),onDragLeave:ne,onDrop:_e=>ue(_e,ie.id),children:c.jsx(pn,{className:"p-3",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(kP,{className:"h-4 w-4 text-muted-foreground cursor-grab hover:text-foreground"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 rounded border border-border/40",style:{backgroundColor:ie.color}}),c.jsx(Me,{className:"h-4 w-4 text-muted-foreground"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-sm truncate",children:ie.name}),ie.type==="default"&&c.jsx(wn,{variant:"secondary",className:"text-xs px-1 py-0",children:"Default"})]}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:[ie.objectCount," object",ie.objectCount!==1?"s":""]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>Q(ie.id),className:"h-6 w-6 p-0",children:ie.visible?c.jsx(xl,{className:"h-3 w-3"}):c.jsx(Gv,{className:"h-3 w-3"})})}),c.jsx(ma,{children:c.jsxs("p",{className:"text-xs",children:[ie.visible?"Hide":"Show"," layer"]})})]}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>J(ie.id),className:"h-6 w-6 p-0",children:ie.locked?c.jsx(XP,{className:"h-3 w-3"}):c.jsx(qP,{className:"h-3 w-3"})})}),c.jsx(ma,{children:c.jsxs("p",{className:"text-xs",children:[ie.locked?"Unlock":"Lock"," layer"]})})]}),ie.type==="custom"&&c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>X(ie),className:"h-6 w-6 p-0",children:c.jsx(Dee,{className:"h-3 w-3"})})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:"Edit layer"})})]}),ie.type==="custom"&&c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>G(ie.id),className:"h-6 w-6 p-0 text-destructive hover:text-destructive",children:c.jsx(Of,{className:"h-3 w-3"})})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:"Delete layer"})})]})]})]})})},ie.id)})})}),c.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:c.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Total Layers:"}),c.jsx("span",{className:"font-medium",children:i.length})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Visible Layers:"}),c.jsx("span",{className:"font-medium",children:i.filter(ie=>ie.visible).length})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Total Objects:"}),c.jsx("span",{className:"font-medium",children:i.reduce((ie,Me)=>ie+Me.objectCount,0)})]})]})}),c.jsxs(Zo,{children:[c.jsx(_g,{className:"h-4 w-4"}),c.jsx(Qo,{className:"text-xs",children:"Drag layers to reorder them. Use visibility and lock controls to manage your workspace. Default layers cannot be deleted."})]})]}),c.jsx(Nf,{open:x,onOpenChange:b,children:c.jsxs(gh,{className:"sm:max-w-md",children:[c.jsxs(vh,{children:[c.jsx(yh,{children:"Edit Layer"}),c.jsx(Hp,{children:"Modify the layer name and color."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"edit-layer-name",children:"Layer Name"}),c.jsx(Ta,{id:"edit-layer-name",value:P,onChange:ie=>B(ie.target.value),placeholder:"Enter layer name...",className:"h-8"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"edit-layer-color",children:"Layer Color"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ta,{id:"edit-layer-color",type:"color",value:F,onChange:ie=>j(ie.target.value),className:"w-12 h-8 p-1"}),c.jsx("div",{className:"grid grid-cols-5 gap-1 flex-1",children:v_.slice(0,10).map(ie=>c.jsx("button",{className:"w-6 h-6 rounded border border-border/40 hover:scale-110 transition-transform",style:{backgroundColor:ie},onClick:()=>j(ie)},ie))})]})]})]}),c.jsxs(j_,{children:[c.jsx(it,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),c.jsx(it,{onClick:oe,disabled:!P.trim(),children:"Save Changes"})]})]})}),c.jsx(Nf,{open:_,onOpenChange:S,children:c.jsxs(gh,{className:"sm:max-w-md",children:[c.jsxs(vh,{children:[c.jsx(yh,{children:"Delete Layer"}),c.jsx(Hp,{children:"Are you sure you want to delete this layer? This action cannot be undone."})]}),c.jsxs(j_,{children:[c.jsx(it,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),c.jsx(it,{variant:"destructive",onClick:$,children:"Delete Layer"})]})]})})]})},P6=[{id:"default",name:"Default View",icon:jP,position:[15,15,15],description:"Balanced perspective view"},{id:"top",name:"Top View",icon:zP,position:[0,30,0],description:"Bird's eye view from above"},{id:"front",name:"Front View",icon:u1,position:[0,5,25],description:"Straight-on front perspective"},{id:"side",name:"Side View",icon:u1,position:[25,5,0],description:"Side profile view"},{id:"isometric",name:"Isometric",icon:VP,position:[20,20,20],description:"Technical isometric projection"},{id:"corner",name:"Corner View",icon:Vv,position:[12,8,12],description:"Angled corner perspective"}],hue=[{id:"low",name:"Low",description:"Fast rendering, lower quality"},{id:"medium",name:"Medium",description:"Balanced quality and performance"},{id:"high",name:"High",description:"Best quality, slower rendering"},{id:"ultra",name:"Ultra",description:"Maximum quality for final renders"}],fue=[{id:"studio",name:"Studio",description:"Neutral studio lighting"},{id:"sunset",name:"Sunset",description:"Warm sunset ambiance"},{id:"dawn",name:"Dawn",description:"Soft morning light"},{id:"night",name:"Night",description:"Evening interior lighting"},{id:"warehouse",name:"Warehouse",description:"Industrial lighting"}],pue=({wall:n})=>{if(!n.points||n.points.length<4)return null;const e=n.points[0]/50,t=n.points[1]/50,i=n.points[2]/50,a=n.points[3]/50,s=Math.sqrt(Math.pow(i-e,2)+Math.pow(a-t,2)),r=Math.atan2(a-t,i-e),l=(n.thickness||8)/50,d=2.5,f=(e+i)/2,g=(t+a)/2;return c.jsxs("mesh",{position:[f,d/2,g],rotation:[0,r,0],castShadow:!0,receiveShadow:!0,children:[c.jsx("boxGeometry",{args:[s,d,l]}),c.jsx("meshStandardMaterial",{color:n.color||"#374151"})]})},mue=({room:n})=>{const e=n.x/50,t=n.y/50,i=n.width/50,a=n.height/50;return c.jsxs("mesh",{position:[e+i/2,.01,t+a/2],rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[c.jsx("planeGeometry",{args:[i,a]}),c.jsx("meshStandardMaterial",{color:n.color||"#3b82f6",transparent:!0,opacity:.3})]})},gue=({item:n})=>{const e=n.x/50,t=n.y/50,i=n.width/50,a=n.height/50,s=.8;return c.jsxs("mesh",{position:[e+i/2,s/2,t+a/2],castShadow:!0,receiveShadow:!0,children:[c.jsx("boxGeometry",{args:[i,s,a]}),c.jsx("meshStandardMaterial",{color:n.color||"#8b5cf6"})]})},vue=({cameraPreset:n,quality:e,environment:t,showGrid:i,showShadows:a,autoRotate:s})=>{const{walls:r,rooms:l,furniture:d,lighting:f}=ti(),g=k.useRef(null);return k.useEffect(()=>{g.current&&n==="autoframe"&&g.current.reset()},[r,l,d,n]),c.jsxs(c.Fragment,{children:[c.jsx("ambientLight",{intensity:f.ambientLight*.6}),c.jsx("directionalLight",{position:[10,10,5],intensity:f.mainLight,castShadow:a,"shadow-mapSize-width":e==="ultra"?2048:e==="high"?1024:512,"shadow-mapSize-height":e==="ultra"?2048:e==="high"?1024:512}),c.jsx("pointLight",{position:[-10,10,-5],intensity:f.mainLight*.3,castShadow:a}),t!=="none"&&c.jsx(QQ,{preset:t,background:!1}),c.jsxs("mesh",{position:[0,0,0],rotation:[-Math.PI/2,0,0],receiveShadow:a,children:[c.jsx("planeGeometry",{args:[50,50]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5"})]}),i&&c.jsx(oP,{position:[0,.01,0],args:[50,50],cellSize:1,cellThickness:.5,cellColor:"#cccccc",sectionSize:5,sectionThickness:1,sectionColor:"#999999",fadeDistance:25,fadeStrength:1,infiniteGrid:!1}),a&&c.jsx(JQ,{position:[0,0,0],opacity:.4,scale:50,blur:2,far:10}),r.map(x=>c.jsx(pue,{wall:x},x.id)),l.map(x=>c.jsx(mue,{room:x},x.id)),d.map(x=>c.jsx(gue,{item:x},x.id)),c.jsx(rP,{ref:g,enablePan:!0,enableZoom:!0,enableRotate:!0,autoRotate:s,autoRotateSpeed:.5,maxPolarAngle:Math.PI/2.1,minPolarAngle:.1,enableDamping:!0,dampingFactor:.05})]})},yue=()=>{const{viewMode:n,setViewMode:e,cameraView:t,setCameraView:i,lighting:a,updateSceneLighting:s}=ti(),[r,l]=k.useState("view"),[d,f]=k.useState("default"),[g,x]=k.useState("medium"),[b,_]=k.useState("studio"),[S,w]=k.useState(!0),[M,E]=k.useState(!0),[T,C]=k.useState(!1),[D,P]=k.useState(!1),[B,F]=k.useState(a),j=k.useCallback(J=>{F(J),s(J)},[s]),O=k.useCallback(J=>{f(J),i(J)},[i]),I=k.useCallback(()=>{e(n==="2d"?"3d":"2d")},[n,e]),W=k.useCallback(()=>{f("autoframe"),i("autoframe")},[i]),Q=k.useCallback(()=>{console.log("Exporting 3D view...")},[]);return c.jsx(bu,{panelId:"view3D",children:c.jsxs(_l,{value:r,onValueChange:l,className:"w-full",children:[c.jsxs(Eo,{className:"grid w-full grid-cols-3",children:[c.jsx(vn,{value:"view",children:"View"}),c.jsx(vn,{value:"camera",children:"Camera"}),c.jsx(vn,{value:"render",children:"Render"})]}),c.jsxs(Rn,{value:"view",className:"space-y-4 mt-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg overflow-hidden border",children:c.jsx(Zj,{camera:{position:P6.find(J=>J.id===d)?.position||[15,15,15],fov:50,near:.1,far:1e3},shadows:M,gl:{antialias:g!=="low",alpha:!0,powerPreference:g==="ultra"?"high-performance":"default"},children:c.jsx(vue,{cameraPreset:d,quality:g,environment:b,showGrid:S,showShadows:M,autoRotate:T})})}),c.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"secondary",size:"sm",onClick:I,className:"h-7 w-7 p-0",children:c.jsx(wee,{className:"h-3 w-3"})})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:"Toggle 2D/3D View"})})]}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"secondary",size:"sm",onClick:()=>P(!D),className:"h-7 w-7 p-0",children:c.jsx(I$,{className:"h-3 w-3"})})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:"Fullscreen"})})]})]}),c.jsx("div",{className:"absolute bottom-2 left-2",children:c.jsxs(wn,{variant:"secondary",className:"text-xs",children:[n.toUpperCase()," View"]})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(qt,{className:"text-sm",children:"View Controls"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsxs(it,{variant:"outline",size:"sm",onClick:W,className:"h-7",children:[c.jsx(Vv,{className:"h-3 w-3 mr-1"}),"Frame"]})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:"Auto-frame scene"})})]}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"outline",size:"sm",onClick:()=>C(!T),className:"h-7",children:T?c.jsx(ZP,{className:"h-3 w-3"}):c.jsx(OC,{className:"h-3 w-3"})})}),c.jsx(ma,{children:c.jsxs("p",{className:"text-xs",children:[T?"Stop":"Start"," rotation"]})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Yo,{id:"show-grid",checked:S,onCheckedChange:w}),c.jsx(qt,{htmlFor:"show-grid",className:"text-xs",children:"Grid"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Yo,{id:"show-shadows",checked:M,onCheckedChange:E}),c.jsx(qt,{htmlFor:"show-shadows",className:"text-xs",children:"Shadows"})]})]})]})]}),c.jsxs(Rn,{value:"camera",className:"space-y-4 mt-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx(qt,{className:"text-sm",children:"Camera Presets"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:P6.map(J=>{const te=J.icon;return c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsxs(it,{variant:d===J.id?"default":"outline",size:"sm",onClick:()=>O(J.id),className:"flex items-center gap-2 justify-start h-8",children:[c.jsx(te,{className:"h-3 w-3"}),c.jsx("span",{className:"text-xs truncate",children:J.name})]})}),c.jsx(ma,{children:c.jsx("p",{className:"text-xs",children:J.description})})]},J.id)})})]}),c.jsx(js,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs(qt,{className:"text-sm flex items-center gap-2",children:[c.jsx(Fx,{className:"h-4 w-4"}),"Scene Lighting"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx(qt,{className:"text-xs",children:"Main Light"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:B.mainLight.toFixed(1)})]}),c.jsx(_o,{value:[B.mainLight],onValueChange:([J])=>j({...B,mainLight:J}),min:0,max:2,step:.1,className:"w-full"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx(qt,{className:"text-xs",children:"Ambient Light"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:B.ambientLight.toFixed(1)})]}),c.jsx(_o,{value:[B.ambientLight],onValueChange:([J])=>j({...B,ambientLight:J}),min:0,max:1,step:.1,className:"w-full"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx(qt,{className:"text-xs",children:"Temperature"}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[B.temperature,"K"]})]}),c.jsx(_o,{value:[B.temperature],onValueChange:([J])=>j({...B,temperature:J}),min:2700,max:6500,step:100,className:"w-full"})]})]})]})]}),c.jsxs(Rn,{value:"render",className:"space-y-4 mt-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-sm",children:"Render Quality"}),c.jsxs(Cr,{value:g,onValueChange:x,children:[c.jsx(dr,{className:"h-8",children:c.jsx(Ar,{})}),c.jsx(hr,{children:hue.map(J=>c.jsx(Li,{value:J.id,children:c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:J.name}),c.jsx("div",{className:"text-xs text-muted-foreground",children:J.description})]})},J.id))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-sm",children:"Environment"}),c.jsxs(Cr,{value:b,onValueChange:_,children:[c.jsx(dr,{className:"h-8",children:c.jsx(Ar,{})}),c.jsx(hr,{children:fue.map(J=>c.jsx(Li,{value:J.id,children:c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:J.name}),c.jsx("div",{className:"text-xs text-muted-foreground",children:J.description})]})},J.id))})]})]}),c.jsx(js,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(qt,{className:"text-sm",children:"Export & Share"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs(it,{variant:"outline",size:"sm",onClick:Q,className:"flex items-center gap-2 h-8",children:[c.jsx(Fp,{className:"h-3 w-3"}),c.jsx("span",{className:"text-xs",children:"Export"})]}),c.jsxs(it,{variant:"outline",size:"sm",className:"flex items-center gap-2 h-8",children:[c.jsx(fg,{className:"h-3 w-3"}),c.jsx("span",{className:"text-xs",children:"Share"})]})]})]}),c.jsxs(Zo,{children:[c.jsx(_g,{className:"h-4 w-4"}),c.jsx(Qo,{className:"text-xs",children:"Real-time sync: Changes in 2D view automatically update the 3D visualization."})]})]})]})})},xue=()=>c.jsx(bu,{panelId:"measurements",children:c.jsx(l3,{})}),BL=k.forwardRef(({className:n,...e},t)=>c.jsx("textarea",{className:fn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));BL.displayName="Textarea";const Gp=k.forwardRef(({className:n,...e},t)=>c.jsx("input",{type:"checkbox",className:fn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),ref:t,...e}));Gp.displayName="Checkbox";const U6=()=>{const{currentFloorPlan:n,apiConfig:e}=ti(),[t,i]=k.useState([]),[a,s]=k.useState(!1),[r,l]=k.useState(""),[d,f]=k.useState(""),[g,x]=k.useState(null),[b,_]=k.useState(!1),[S,w]=k.useState("share"),[M,E]=k.useState([]),[T,C]=k.useState([]),[D,P]=k.useState({watermark_enabled:!0,brand_colors:["#3b82f6","#1e40af","#1d4ed8"],custom_hashtags:["#floorplan","#interiordesign","#homedecor"],auto_branding:!0}),[B,F]=k.useState(null),[j,O]=k.useState(!1),[I,W]=k.useState(""),[Q,J]=k.useState(""),[te,oe]=k.useState(["instagram","facebook"]),[$,X]=k.useState(""),[G,ee]=k.useState({instagram:!1,facebook:!1,twitter:!1,linkedin:!1});k.useEffect(()=>{Y(),ne(),ue()},[]);const Y=async()=>{try{const Pe=await fetch(`${e?.baseUrl}/social/templates/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(Pe.ok){const he=await Pe.json();C(he.results||[])}}catch(Pe){console.error("Failed to load social templates:",Pe)}},ne=async()=>{if(n)try{const Pe=await fetch(`${e?.baseUrl}/social/analytics/${n.id}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(Pe.ok){const he=await Pe.json();F(he)}}catch(Pe){console.error("Failed to load social analytics:",Pe)}},ue=async()=>{try{const Pe=await fetch(`${e?.baseUrl}/social/connections/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(Pe.ok){const he=await Pe.json();ee(he)}}catch(Pe){console.error("Failed to check social connections:",Pe)}},de=async Pe=>{if(!n)return null;O(!0);try{const he=await fetch(`${e?.baseUrl}/social/generate-image/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({floorplan_id:n.id,platform:Pe,branding:D,template_id:I})});if(he.ok)return(await he.json()).image_url}catch(he){console.error("Failed to generate branded image:",he)}finally{O(!1)}return null},ie=async Pe=>{if(!n)return"";try{const he=await fetch(`${e?.baseUrl}/social/generate-content/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({floorplan_id:n.id,platform:Pe,template_id:I,custom_hashtags:D.custom_hashtags,company_name:D.company_name})});if(he.ok)return(await he.json()).content}catch(he){console.error("Failed to generate social content:",he)}return""},Me=async(Pe,he,ke,Ee)=>{const Le={id:`post_${Date.now()}_${Pe}`,platform:Pe,content:he,image_url:ke,status:Ee?"scheduled":"draft",scheduled_at:Ee};return E(Ie=>[...Ie,Le]),Le},ye=async Pe=>{const he=M.find(ke=>ke.id===Pe);if(he){E(ke=>ke.map(Ee=>Ee.id===Pe?{...Ee,status:"posting"}:Ee));try{const ke=await fetch(`${e?.baseUrl}/social/post/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({platform:he.platform,content:he.content,image_url:he.image_url,scheduled_at:he.scheduled_at})});if(ke.ok){const Ee=await ke.json();E(Le=>Le.map(Ie=>Ie.id===Pe?{...Ie,status:"posted",posted_at:new Date,engagement:Ee.engagement}:Ie))}else throw new Error("Failed to post")}catch(ke){console.error("Failed to post to social media:",ke),E(Ee=>Ee.map(Le=>Le.id===Pe?{...Le,status:"failed",error_message:ke instanceof Error?ke.message:"Unknown error"}:Le))}}},ae=async()=>{if(!(!n||te.length===0)){O(!0);for(const Pe of te)try{const he=await de(Pe);if(!he)continue;const ke=Q||await ie(Pe),Ee=$?new Date($):void 0,Le=await Me(Pe,ke,he,Ee);Ee||await ye(Le.id)}catch(he){console.error(`Failed to create post for ${Pe}:`,he)}O(!1)}},_e=Pe=>{const he=`${e?.baseUrl}/social/connect/${Pe}/`;window.open(he,"_blank","width=600,height=400")},Ke=k.useCallback(Pe=>{const he={id:`link_${Date.now()}`,url:`${window.location.origin}/floorplan/share/${n?.id}?access=${Pe}&token=${Math.random().toString(36).substr(2,9)}`,accessLevel:Pe,isActive:!0};return r&&(he.password=r),i(ke=>[...ke,he]),he},[n,r]);k.useCallback(async(Pe,he)=>{try{await navigator.clipboard.writeText(Pe),x(he),setTimeout(()=>x(null),2e3)}catch(ke){console.error("Failed to copy to clipboard:",ke)}},[]);const Ge=k.useCallback((Pe,he)=>{const ke=d||"Check out my floor plan design!",Ee=encodeURIComponent(he),Le=encodeURIComponent(ke),Et={facebook:`https://www.facebook.com/sharer/sharer.php?u=${Ee}`,twitter:`https://twitter.com/intent/tweet?url=${Ee}&text=${Le}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${Ee}`,whatsapp:`https://wa.me/?text=${Le}%20${Ee}`,telegram:`https://t.me/share/url?url=${Ee}&text=${Le}`,email:`mailto:?subject=${Le}&body=${Ee}`}[Pe];Et&&window.open(Et,"_blank","width=600,height=400")},[d]);k.useCallback(Pe=>{i(he=>he.map(ke=>ke.id===Pe?{...ke,isActive:!ke.isActive}:ke))},[]),k.useCallback(Pe=>`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(Pe)}`,[]);const st=Pe=>{switch(Pe){case"instagram":return J$;case"facebook":return oD;case"twitter":return fD;case"linkedin":return uD;default:return fg}},ft=Pe=>{switch(Pe){case"draft":return tte;case"scheduled":return NC;case"posting":return pd;case"posted":return Df;case"failed":return IP;default:return ph}};return c.jsx(bu,{panelId:"socialShare",children:c.jsxs(_l,{value:S,onValueChange:w,className:"w-full",children:[c.jsxs(Eo,{className:"grid w-full grid-cols-4",children:[c.jsx(vn,{value:"share",children:"Share"}),c.jsx(vn,{value:"social",children:"Social"}),c.jsx(vn,{value:"branding",children:"Branding"}),c.jsx(vn,{value:"analytics",children:"Analytics"})]}),c.jsxs(Rn,{value:"share",className:"space-y-4 mt-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(fg,{className:"h-5 w-5 text-blue-600"}),c.jsx("h3",{className:"font-semibold",children:"Share & Collaborate"})]}),n?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[a?c.jsx(xl,{className:"h-4 w-4"}):c.jsx(Gv,{className:"h-4 w-4"}),c.jsx(qt,{htmlFor:"public-toggle",className:"text-sm",children:"Public Access"})]}),c.jsx(Yo,{id:"public-toggle",checked:a,onCheckedChange:s})]})}),c.jsx(js,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Generate Share Links"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs(it,{variant:"outline",size:"sm",onClick:()=>Ke("view"),className:"flex items-center gap-2",children:[c.jsx(xl,{className:"h-4 w-4"}),c.jsx("span",{className:"text-xs",children:"View Only"})]}),c.jsxs(it,{variant:"outline",size:"sm",onClick:()=>Ke("edit"),className:"flex items-center gap-2",children:[c.jsx(Bp,{className:"h-4 w-4"}),c.jsx("span",{className:"text-xs",children:"Collaborate"})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Quick Share"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsx(it,{variant:"outline",size:"sm",onClick:()=>Ge("facebook",t[0]?.url||window.location.href),className:"flex items-center gap-1 p-2",children:c.jsx(oD,{className:"h-4 w-4 text-blue-600"})}),c.jsx(it,{variant:"outline",size:"sm",onClick:()=>Ge("twitter",t[0]?.url||window.location.href),className:"flex items-center gap-1 p-2",children:c.jsx(fD,{className:"h-4 w-4 text-blue-400"})}),c.jsx(it,{variant:"outline",size:"sm",onClick:()=>Ge("linkedin",t[0]?.url||window.location.href),className:"flex items-center gap-1 p-2",children:c.jsx(uD,{className:"h-4 w-4 text-blue-700"})})]})]})]}):c.jsx(Zo,{children:c.jsx(Qo,{className:"text-sm",children:"Save your floor plan to enable sharing options."})})]}),c.jsxs(Rn,{value:"social",className:"space-y-4 mt-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"font-semibold",children:"Social Media Posts"}),c.jsxs(it,{onClick:ae,size:"sm",disabled:j,children:[j?c.jsx(pd,{className:"h-4 w-4 mr-2 animate-spin"}):c.jsx(h1,{className:"h-4 w-4 mr-2"}),"Create Post"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-sm",children:"Select Platforms"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(G).map(([Pe,he])=>{const ke=st(Pe);return c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Gp,{id:Pe,checked:te.includes(Pe),onCheckedChange:Ee=>{oe(Ee?Le=>[...Le,Pe]:Le=>Le.filter(Ie=>Ie!==Pe))},disabled:!he}),c.jsxs(qt,{htmlFor:Pe,className:"flex items-center gap-2 text-sm",children:[c.jsx(ke,{className:"h-4 w-4"}),Pe.charAt(0).toUpperCase()+Pe.slice(1),!he&&c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>_e(Pe),className:"h-6 text-xs",children:"Connect"})]})]},Pe)})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-sm",children:"Custom Content (Optional)"}),c.jsx(BL,{placeholder:"Write your custom post content or leave empty for AI-generated content...",value:Q,onChange:Pe=>J(Pe.target.value),rows:3})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-sm",children:"Template"}),c.jsxs(Cr,{value:I,onValueChange:W,children:[c.jsx(dr,{children:c.jsx(Ar,{placeholder:"Choose a template..."})}),c.jsx(hr,{children:T.map(Pe=>c.jsx(Li,{value:Pe.id,children:Pe.name},Pe.id))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-sm",children:"Schedule Post (Optional)"}),c.jsx(Ta,{type:"datetime-local",value:$,onChange:Pe=>X(Pe.target.value)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Recent Posts"}),c.jsx(Ca,{className:"h-32",children:c.jsx("div",{className:"space-y-2",children:M.map(Pe=>{const he=st(Pe.platform),ke=ft(Pe.status);return c.jsxs(Jt,{className:"p-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(he,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm font-medium",children:Pe.platform}),c.jsx(ke,{className:`h-3 w-3 ${Pe.status==="posted"?"text-green-500":Pe.status==="failed"?"text-red-500":Pe.status==="posting"?"text-blue-500 animate-spin":"text-gray-500"}`})]}),Pe.status==="draft"&&c.jsx(it,{size:"sm",onClick:()=>ye(Pe.id),children:c.jsx($P,{className:"h-3 w-3"})})]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:Pe.content}),Pe.engagement&&c.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-muted-foreground",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(BT,{className:"h-3 w-3"}),Pe.engagement.likes]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(xee,{className:"h-3 w-3"}),Pe.engagement.comments]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(fg,{className:"h-3 w-3"}),Pe.engagement.shares]})]})]},Pe.id)})})})]})]}),c.jsxs(Rn,{value:"branding",className:"space-y-4 mt-4",children:[c.jsx("h3",{className:"font-semibold",children:"Brand Settings"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(qt,{className:"text-sm",children:"Auto-branding"}),c.jsx(Yo,{checked:D.auto_branding,onCheckedChange:Pe=>P(he=>({...he,auto_branding:Pe}))})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(qt,{className:"text-sm",children:"Watermark"}),c.jsx(Yo,{checked:D.watermark_enabled,onCheckedChange:Pe=>P(he=>({...he,watermark_enabled:Pe}))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-sm",children:"Company Name"}),c.jsx(Ta,{placeholder:"Your Company Name",value:D.company_name||"",onChange:Pe=>P(he=>({...he,company_name:Pe.target.value}))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-sm",children:"Website URL"}),c.jsx(Ta,{placeholder:"https://yourwebsite.com",value:D.website_url||"",onChange:Pe=>P(he=>({...he,website_url:Pe.target.value}))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-sm",children:"Custom Hashtags"}),c.jsx(Ta,{placeholder:"#hashtag1 #hashtag2 #hashtag3",value:D.custom_hashtags.join(" "),onChange:Pe=>P(he=>({...he,custom_hashtags:Pe.target.value.split(" ").filter(ke=>ke.startsWith("#"))}))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-sm",children:"Brand Colors"}),c.jsxs("div",{className:"flex gap-2",children:[D.brand_colors.map((Pe,he)=>c.jsx("div",{className:"w-8 h-8 rounded border cursor-pointer",style:{backgroundColor:Pe},onClick:()=>{console.log("Open color picker for",Pe)}},he)),c.jsx(it,{variant:"outline",size:"sm",className:"w-8 h-8 p-0",children:c.jsx(h1,{className:"h-4 w-4"})})]})]})]})]}),c.jsxs(Rn,{value:"analytics",className:"space-y-4 mt-4",children:[c.jsx("h3",{className:"font-semibold",children:"Social Analytics"}),B?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs(Jt,{className:"p-3",children:[c.jsx("div",{className:"text-2xl font-bold",children:B.total_shares}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Shares"})]}),c.jsxs(Jt,{className:"p-3",children:[c.jsxs("div",{className:"text-2xl font-bold",children:[B.engagement_rate.toFixed(1),"%"]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Engagement Rate"})]})]}),c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Platform Breakdown"})}),c.jsx(pn,{children:c.jsx("div",{className:"space-y-2",children:Object.entries(B.platform_breakdown).map(([Pe,he])=>{const ke=st(Pe),Ee=he/B.total_shares*100;return c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ke,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm capitalize",children:Pe})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Ee}%`}})}),c.jsx("span",{className:"text-sm",children:he})]})]},Pe)})})})]}),c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Optimal Posting Times"})}),c.jsx(pn,{children:c.jsx("div",{className:"space-y-1",children:B.optimal_posting_times.map((Pe,he)=>c.jsx("div",{className:"text-sm",children:Pe},he))})})]})]}):c.jsxs(Zo,{children:[c.jsx(pte,{className:"h-4 w-4"}),c.jsx(Qo,{children:"Share your floor plans on social media to see analytics data."})]})]})]})})},bue=()=>{const{panels:n,panelGroups:e,workspacePresets:t,activePresetId:i,snapToEdges:a,magneticBoundaries:s,snapThreshold:r,keyboardShortcutsEnabled:l,panelAnimations:d,showPanel:f,hidePanel:g,togglePanel:x,minimizeAllPanels:b,restoreAllPanels:_,resetPanelLayout:S,focusPanel:w,snapPanelToEdges:M,enableMagneticBoundaries:E,setSnapThreshold:T,toggleKeyboardShortcuts:C,togglePanelAnimations:D,createWorkspaceLayout:P,switchWorkspace:B,exportPanelLayout:F,importPanelLayout:j,alignPanelsToGrid:O,distributeHorizontally:I,distributeVertically:W,cascadePanels:Q,createGroup:J,removeGroup:te,addPanelToGroup:oe,removePanelFromGroup:$}=Nr(),[X,G]=k.useState("panels"),[ee,Y]=k.useState([]),[ne,ue]=k.useState(""),[de,ie]=k.useState(""),[Me,ye]=k.useState(""),[ae,_e]=k.useState(!1),[Ke,Ge]=k.useState(!1),[st,ft]=k.useState(""),[Pe,he]=k.useState(20),ke=Object.keys(n).filter(se=>n[se].isVisible);Object.keys(n).filter(se=>n[se].isMinimized);const Ee=k.useCallback((se,He)=>{Y(Ve=>He?[...Ve,se]:Ve.filter(Te=>Te!==se))},[]),Le=k.useCallback(()=>{Y(ke)},[ke]),Ie=k.useCallback(()=>{Y([])},[]),Et=k.useCallback(()=>{ne.trim()&&(P(ne,de),ue(""),ie(""),_e(!1))},[ne,de,P]),ct=k.useCallback(()=>{!Me.trim()||ee.length===0||(J(Me,ee),ye(""),Y([]),Ge(!1))},[Me,ee,J]),At=k.useCallback(()=>{const se=F(),He=new Blob([se],{type:"application/json"}),Ve=URL.createObjectURL(He),Te=document.createElement("a");Te.href=Ve,Te.download=`panel-layout-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Te),Te.click(),document.body.removeChild(Te),URL.revokeObjectURL(Ve)},[F]),Pt=k.useCallback(()=>{if(st.trim())try{j(st),ft(""),alert("Panel layout imported successfully!")}catch{alert("Failed to import panel layout. Please check the format.")}},[st,j]),Se=k.useCallback(se=>{const He=se.target.files?.[0];if(!He)return;const Ve=new FileReader;Ve.onload=Te=>{const ze=Te.target?.result;ft(ze)},Ve.readAsText(He)},[]);return c.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(kp,{className:"h-6 w-6 text-blue-600"}),c.jsx("h2",{className:"text-xl font-semibold",children:"Advanced Panel Manager"})]}),c.jsxs(wn,{variant:"secondary",className:"text-xs",children:[ke.length," panels visible"]})]}),c.jsxs(_l,{value:X,onValueChange:G,className:"w-full",children:[c.jsxs(Eo,{className:"grid w-full grid-cols-5",children:[c.jsx(vn,{value:"panels",children:"Panels"}),c.jsx(vn,{value:"layout",children:"Layout"}),c.jsx(vn,{value:"groups",children:"Groups"}),c.jsx(vn,{value:"workspaces",children:"Workspaces"}),c.jsx(vn,{value:"settings",children:"Settings"})]}),c.jsxs(Rn,{value:"panels",className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx(it,{onClick:Le,size:"sm",variant:"outline",children:"Select All Visible"}),c.jsx(it,{onClick:Ie,size:"sm",variant:"outline",children:"Deselect All"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(it,{onClick:b,size:"sm",variant:"outline",children:[c.jsx(DC,{className:"h-4 w-4 mr-2"}),"Minimize All"]}),c.jsxs(it,{onClick:_,size:"sm",variant:"outline",children:[c.jsx(Vv,{className:"h-4 w-4 mr-2"}),"Restore All"]})]})]}),c.jsx(Ca,{className:"h-64",children:c.jsx("div",{className:"space-y-2",children:Object.entries(Af).map(([se,He])=>{const Ve=n[se],Te=ee.includes(se),ze=Object.values(e).find(Nt=>Nt.panelIds.includes(se));return c.jsxs(Jt,{className:`p-3 ${Te?"ring-2 ring-blue-500":""}`,children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"checkbox",checked:Te,onChange:Nt=>Ee(se,Nt.target.checked),className:"w-4 h-4"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-3 h-3 rounded ${Ve?.isVisible?"bg-green-500":"bg-gray-300"}`}),c.jsx("span",{className:"font-medium text-sm",children:He.title}),ze&&c.jsx(wn,{variant:"outline",className:"text-xs",children:ze.name})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>w(se),className:"h-6 w-6 p-0",children:c.jsx(xl,{className:"h-3 w-3"})})}),c.jsx(ma,{children:"Focus Panel"})]}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>x(se),className:"h-6 w-6 p-0",children:Ve?.isVisible?c.jsx(Gv,{className:"h-3 w-3"}):c.jsx(xl,{className:"h-3 w-3"})})}),c.jsx(ma,{children:"Toggle Visibility"})]}),c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>M(se),className:"h-6 w-6 p-0",children:c.jsx(uee,{className:"h-3 w-3"})})}),c.jsx(ma,{children:"Snap to Edges"})]})]})]}),Ve&&c.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Position: (",Math.round(Ve.position.x),","," ",Math.round(Ve.position.y),")  Size:"," ",Ve.size.width,"",Ve.size.height,"  Z-Index: ",Ve.zIndex,Ve.isMinimized&&"  Minimized",Ve.isDocked&&`  Docked ${Ve.dockPosition}`]})]},se)})})})]}),c.jsxs(Rn,{value:"layout",className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Quick Actions"})}),c.jsxs(pn,{className:"space-y-2",children:[c.jsxs(it,{onClick:S,size:"sm",variant:"outline",className:"w-full justify-start",children:[c.jsx(Sg,{className:"h-4 w-4 mr-2"}),"Reset Layout"]}),c.jsxs(it,{onClick:()=>O(Pe),size:"sm",variant:"outline",className:"w-full justify-start",children:[c.jsx(Mf,{className:"h-4 w-4 mr-2"}),"Align to Grid"]}),c.jsxs(it,{onClick:()=>Q(ee),size:"sm",variant:"outline",className:"w-full justify-start",disabled:ee.length<2,children:[c.jsx(d1,{className:"h-4 w-4 mr-2"}),"Cascade Selected"]})]})]}),c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Distribution"})}),c.jsxs(pn,{className:"space-y-2",children:[c.jsxs(it,{onClick:()=>I(ee),size:"sm",variant:"outline",className:"w-full justify-start",disabled:ee.length<2,children:[c.jsx(DistributeHorizontal,{className:"h-4 w-4 mr-2"}),"Distribute Horizontally"]}),c.jsxs(it,{onClick:()=>W(ee),size:"sm",variant:"outline",className:"w-full justify-start",disabled:ee.length<2,children:[c.jsx(DistributeVertical,{className:"h-4 w-4 mr-2"}),"Distribute Vertically"]})]})]})]}),c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Grid Settings"})}),c.jsx(pn,{className:"space-y-3",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs(qt,{className:"text-sm",children:["Grid Size: ",Pe,"px"]}),c.jsx(_o,{value:[Pe],onValueChange:([se])=>he(se),min:10,max:50,step:5,className:"w-full"})]})})]}),c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Import/Export Layout"})}),c.jsxs(pn,{className:"space-y-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(it,{onClick:At,size:"sm",variant:"outline",children:[c.jsx(Fp,{className:"h-4 w-4 mr-2"}),"Export Layout"]}),c.jsx("input",{type:"file",accept:".json",onChange:Se,className:"hidden",id:"import-file"}),c.jsxs(it,{onClick:()=>document.getElementById("import-file")?.click(),size:"sm",variant:"outline",children:[c.jsx(LC,{className:"h-4 w-4 mr-2"}),"Import File"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{className:"text-sm",children:"Or paste layout data:"}),c.jsx("textarea",{value:st,onChange:se=>ft(se.target.value),placeholder:"Paste exported layout JSON here...",className:"w-full h-20 p-2 text-xs border rounded resize-none"}),c.jsx(it,{onClick:Pt,size:"sm",disabled:!st.trim(),children:"Import Layout"})]})]})]})]}),c.jsxs(Rn,{value:"groups",className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-medium",children:"Panel Groups"}),c.jsxs(Nf,{open:Ke,onOpenChange:Ge,children:[c.jsx(y1,{asChild:!0,children:c.jsxs(it,{size:"sm",children:[c.jsx(h1,{className:"h-4 w-4 mr-2"}),"Create Group"]})}),c.jsxs(gh,{children:[c.jsxs(vh,{children:[c.jsx(yh,{children:"Create Panel Group"}),c.jsx(Hp,{children:"Group selected panels together for easier management."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{children:"Group Name"}),c.jsx(Ta,{value:Me,onChange:se=>ye(se.target.value),placeholder:"Enter group name..."})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(qt,{children:["Selected Panels (",ee.length,")"]}),c.jsx("div",{className:"text-sm text-muted-foreground",children:ee.map(se=>Af[se]?.title).join(", ")||"No panels selected"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(it,{variant:"outline",onClick:()=>Ge(!1),children:"Cancel"}),c.jsx(it,{onClick:ct,disabled:!Me.trim()||ee.length===0,children:"Create Group"})]})]})]})]}),c.jsx(Ca,{className:"h-48",children:c.jsx("div",{className:"space-y-2",children:Object.values(e).map(se=>c.jsxs(Jt,{className:"p-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(L$,{className:"h-4 w-4 text-blue-500"}),c.jsx("span",{className:"font-medium text-sm",children:se.name}),c.jsxs(wn,{variant:"secondary",className:"text-xs",children:[se.panelIds.length," panels"]})]}),c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>te(se.id),className:"h-6 w-6 p-0",children:c.jsx(Of,{className:"h-3 w-3"})})]}),c.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:se.panelIds.map(He=>Af[He]?.title).join(", ")})]},se.id))})}),Object.keys(e).length===0&&c.jsxs(Zo,{children:[c.jsx(_g,{className:"h-4 w-4"}),c.jsx(Qo,{children:"No panel groups created yet. Select panels and create a group to organize your workspace."})]})]}),c.jsxs(Rn,{value:"workspaces",className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-medium",children:"Workspace Presets"}),c.jsxs(Nf,{open:ae,onOpenChange:_e,children:[c.jsx(y1,{asChild:!0,children:c.jsxs(it,{size:"sm",children:[c.jsx(jC,{className:"h-4 w-4 mr-2"}),"Save Workspace"]})}),c.jsxs(gh,{children:[c.jsxs(vh,{children:[c.jsx(yh,{children:"Save Current Workspace"}),c.jsx(Hp,{children:"Save the current panel layout as a workspace preset."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{children:"Workspace Name"}),c.jsx(Ta,{value:ne,onChange:se=>ue(se.target.value),placeholder:"Enter workspace name..."})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{children:"Description (Optional)"}),c.jsx(Ta,{value:de,onChange:se=>ie(se.target.value),placeholder:"Describe this workspace..."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(it,{variant:"outline",onClick:()=>_e(!1),children:"Cancel"}),c.jsx(it,{onClick:Et,disabled:!ne.trim(),children:"Save Workspace"})]})]})]})]}),c.jsx(Ca,{className:"h-48",children:c.jsx("div",{className:"space-y-2",children:Object.values(t).map(se=>c.jsxs(Jt,{className:`p-3 ${i===se.id?"ring-2 ring-blue-500":""}`,children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(PC,{className:"h-4 w-4 text-purple-500"}),c.jsx("span",{className:"font-medium text-sm",children:se.name}),se.isDefault&&c.jsx(UC,{className:"h-3 w-3 text-yellow-500 fill-current"}),i===se.id&&c.jsx(wn,{variant:"default",className:"text-xs",children:"Active"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>B(se.id),className:"h-6 px-2 text-xs",children:"Apply"}),c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>{console.log("Delete preset:",se.id)},className:"h-6 w-6 p-0",children:c.jsx(Of,{className:"h-3 w-3"})})]})]}),se.description&&c.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:se.description}),c.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Created: ",new Date(se.createdAt).toLocaleDateString()]})]},se.id))})}),Object.keys(t).length===0&&c.jsxs(Zo,{children:[c.jsx(_g,{className:"h-4 w-4"}),c.jsx(Qo,{children:"No workspace presets saved yet. Save your current panel layout to create reusable workspaces."})]})]}),c.jsxs(Rn,{value:"settings",className:"space-y-4",children:[c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Panel Behavior"})}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx(qt,{className:"text-sm",children:"Snap to Edges"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically snap panels to screen edges"})]}),c.jsx(Yo,{checked:a,onCheckedChange:E})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx(qt,{className:"text-sm",children:"Magnetic Boundaries"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Panels attract to edges and other panels"})]}),c.jsx(Yo,{checked:s,onCheckedChange:E})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(qt,{className:"text-sm",children:["Snap Threshold: ",r,"px"]}),c.jsx(_o,{value:[r],onValueChange:([se])=>T(se),min:5,max:50,step:5,className:"w-full"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx(qt,{className:"text-sm",children:"Keyboard Shortcuts"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable keyboard shortcuts for panel management"})]}),c.jsx(Yo,{checked:l,onCheckedChange:C})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx(qt,{className:"text-sm",children:"Panel Animations"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Smooth animations for panel movements"})]}),c.jsx(Yo,{checked:d,onCheckedChange:D})]})]})]}),c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Statistics"})}),c.jsx(pn,{children:c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold",children:Object.keys(n).length}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Panels"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold",children:ke.length}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Visible"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold",children:Object.keys(e).length}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Groups"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold",children:Object.keys(t).length}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Workspaces"})]})]})})]})]})]})]})},_ue=()=>c.jsx(bu,{panelId:"advancedPanelManager",children:c.jsx(bue,{})});var wA="Progress",MA=100,[Sue,she]=xd(wA),[Eue,wue]=Sue(wA),FL=k.forwardRef((n,e)=>{const{__scopeProgress:t,value:i=null,max:a,getValueLabel:s=Mue,...r}=n;(a||a===0)&&!L6(a)&&console.error(Tue(`${a}`,"Progress"));const l=L6(a)?a:MA;i!==null&&!z6(i,l)&&console.error(Cue(`${i}`,"Progress"));const d=z6(i,l)?i:null,f=HS(d)?s(d,l):void 0;return c.jsx(Eue,{scope:t,value:d,max:l,children:c.jsx(ci.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":HS(d)?d:void 0,"aria-valuetext":f,role:"progressbar","data-state":GL(d,l),"data-value":d??void 0,"data-max":l,...r,ref:e})})});FL.displayName=wA;var kL="ProgressIndicator",HL=k.forwardRef((n,e)=>{const{__scopeProgress:t,...i}=n,a=wue(kL,t);return c.jsx(ci.div,{"data-state":GL(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...i,ref:e})});HL.displayName=kL;function Mue(n,e){return`${Math.round(n/e*100)}%`}function GL(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function HS(n){return typeof n=="number"}function L6(n){return HS(n)&&!isNaN(n)&&n>0}function z6(n,e){return HS(n)&&!isNaN(n)&&n<=e&&n>=0}function Tue(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${MA}\`.`}function Cue(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${MA} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var VL=FL,Aue=HL;const vE=k.forwardRef(({className:n,value:e,...t},i)=>c.jsx(VL,{ref:i,className:fn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:c.jsx(Aue,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));vE.displayName=VL.displayName;const Nue=()=>{const{currentFloorPlan:n,apiConfig:e}=ti(),[t,i]=k.useState("image"),[a,s]=k.useState({export_type:"image",quality:"standard",resolution:"1080p",image_format:"png",include_measurements:!0,include_materials:!0,paper_size:"A4",scale:"1:100",duration:30}),[r,l]=k.useState([]),[d,f]=k.useState(!1),[g,x]=k.useState([]),[b,_]=k.useState(null),[S,w]=k.useState(!1),[M,E]=k.useState(null),[T,C]=k.useState(""),D=[{value:"standard",label:"Standard Quality",description:"Fast render, good quality"},{value:"high",label:"High Quality",description:"Slower render, great quality"},{value:"8k",label:"Ultra Quality (8K)",description:"Longest render, best quality"}],P=[{value:"720p",label:"HD (1280x720)"},{value:"1080p",label:"Full HD (1920x1080)"},{value:"1440p",label:"QHD (2560x1440)"},{value:"4k",label:"4K (3840x2160)"},{value:"8k",label:"8K (7680x4320)"}],B=[{value:"png",label:"PNG",description:"Best quality, larger file"},{value:"jpg",label:"JPEG",description:"Good quality, smaller file"},{value:"webp",label:"WebP",description:"Modern format, great compression"}];k.useEffect(()=>{F(),j(),O();const G=setInterval(F,5e3);return()=>clearInterval(G)},[]);const F=async()=>{if(e)try{const G=await fetch(`${e.baseUrl}/exports/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(G.ok){const ee=await G.json();l(ee.results||ee)}}catch(G){console.error("Failed to load export jobs:",G)}},j=async()=>{if(e)try{const G=await fetch(`${e.baseUrl}/export-presets/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(G.ok){const ee=await G.json();x(ee.results||ee)}}catch(G){console.error("Failed to load presets:",G)}},O=async()=>{if(e)try{const G=await fetch(`${e.baseUrl}/exports/statistics/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(G.ok){const ee=await G.json();_(ee)}}catch(G){console.error("Failed to load statistics:",G)}},I=async()=>{if(!n||!e){alert("Please save your floor plan first");return}f(!0);try{const G=await fetch(`${e.baseUrl}/exports/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`,"X-CSRFToken":oe()},body:JSON.stringify({floorplan_id:n.id,...a})});if(G.ok){const ee=await G.json();l(Y=>[ee,...Y])}else throw new Error("Failed to create export job")}catch(G){console.error("Export failed:",G),alert("Failed to start export. Please try again.")}finally{f(!1)}},W=async G=>{if(G.is_ready_for_download)try{const ee=await fetch(`${e?.baseUrl}/exports/${G.id}/download/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(ee.ok){const Y=await ee.blob(),ne=URL.createObjectURL(Y),ue=document.createElement("a");ue.href=ne,ue.download=`export_${G.id}`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),URL.revokeObjectURL(ne)}}catch(ee){console.error("Download failed:",ee),alert("Failed to download file")}},Q=async()=>{if(!(!T.trim()||!e))try{const G=await fetch(`${e.baseUrl}/export-presets/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`,"X-CSRFToken":oe()},body:JSON.stringify({name:T,...a})});if(G.ok){const ee=await G.json();x(Y=>[ee,...Y]),C(""),alert("Preset saved successfully!")}}catch(G){console.error("Failed to save preset:",G),alert("Failed to save preset")}},J=G=>{s({export_type:G.export_type,quality:G.quality,resolution:G.resolution,image_format:G.image_format,include_measurements:G.settings.include_measurements??!0,include_materials:G.settings.include_materials??!0,paper_size:G.settings.paper_size??"A4",scale:G.settings.scale??"1:100",duration:G.settings.duration??30}),i(G.export_type),E(G.id)},te=(G,ee)=>{s(Y=>({...Y,[G]:ee}))},oe=()=>document.querySelector("[name=csrfmiddlewaretoken]")?.value||"",$=G=>{switch(G){case"pending":return c.jsx(NC,{className:"h-4 w-4 text-yellow-500"});case"processing":return c.jsx(pd,{className:"h-4 w-4 text-blue-500 animate-spin"});case"completed":return c.jsx(Df,{className:"h-4 w-4 text-green-500"});case"failed":return c.jsx(IP,{className:"h-4 w-4 text-red-500"});default:return c.jsx(IT,{className:"h-4 w-4 text-gray-500"})}},X=G=>{switch(G){case"image":return c.jsx(lD,{className:"h-4 w-4"});case"video":return c.jsx(cD,{className:"h-4 w-4"});case"pdf":return c.jsx(Sf,{className:"h-4 w-4"});default:return c.jsx(Fp,{className:"h-4 w-4"})}};return c.jsx(bu,{panelId:"export",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs(_l,{value:t,onValueChange:G=>{i(G),te("export_type",G)},className:"w-full",children:[c.jsxs(Eo,{className:"grid w-full grid-cols-3",children:[c.jsxs(vn,{value:"image",className:"flex items-center gap-2",children:[c.jsx(lD,{className:"h-4 w-4"}),"Image"]}),c.jsxs(vn,{value:"video",className:"flex items-center gap-2",children:[c.jsx(cD,{className:"h-4 w-4"}),"Video"]}),c.jsxs(vn,{value:"pdf",className:"flex items-center gap-2",children:[c.jsx(Sf,{className:"h-4 w-4"}),"PDF"]})]}),c.jsx(Rn,{value:"image",className:"space-y-4",children:c.jsxs(Jt,{children:[c.jsxs(In,{children:[c.jsx(Bn,{className:"text-sm",children:"Image Export Settings"}),c.jsx(D_,{children:"Generate high-quality images of your floor plan"})]}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"quality",children:"Quality"}),c.jsxs(Cr,{value:a.quality,onValueChange:G=>te("quality",G),children:[c.jsx(dr,{children:c.jsx(Ar,{})}),c.jsx(hr,{children:D.map(G=>c.jsx(Li,{value:G.value,children:c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:G.label}),c.jsx("div",{className:"text-xs text-muted-foreground",children:G.description})]})},G.value))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"resolution",children:"Resolution"}),c.jsxs(Cr,{value:a.resolution,onValueChange:G=>te("resolution",G),children:[c.jsx(dr,{children:c.jsx(Ar,{})}),c.jsx(hr,{children:P.map(G=>c.jsx(Li,{value:G.value,children:G.label},G.value))})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"format",children:"Format"}),c.jsxs(Cr,{value:a.image_format,onValueChange:G=>te("image_format",G),children:[c.jsx(dr,{children:c.jsx(Ar,{})}),c.jsx(hr,{children:B.map(G=>c.jsx(Li,{value:G.value,children:c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:G.label}),c.jsx("div",{className:"text-xs text-muted-foreground",children:G.description})]})},G.value))})]})]})]})]})}),c.jsx(Rn,{value:"video",className:"space-y-4",children:c.jsxs(Jt,{children:[c.jsxs(In,{children:[c.jsx(Bn,{className:"text-sm",children:"Video Export Settings"}),c.jsx(D_,{children:"Create animated walkthroughs of your design"})]}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"quality",children:"Quality"}),c.jsxs(Cr,{value:a.quality,onValueChange:G=>te("quality",G),children:[c.jsx(dr,{children:c.jsx(Ar,{})}),c.jsx(hr,{children:D.map(G=>c.jsx(Li,{value:G.value,children:G.label},G.value))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"resolution",children:"Resolution"}),c.jsxs(Cr,{value:a.resolution,onValueChange:G=>te("resolution",G),children:[c.jsx(dr,{children:c.jsx(Ar,{})}),c.jsx(hr,{children:P.slice(0,3).map(G=>c.jsx(Li,{value:G.value,children:G.label},G.value))})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(qt,{htmlFor:"duration",children:["Duration: ",a.duration,"s"]}),c.jsx(_o,{value:[a.duration],onValueChange:([G])=>te("duration",G),max:300,min:10,step:5,className:"w-full"}),c.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[c.jsx("span",{children:"10s"}),c.jsx("span",{children:"5min"})]})]})]})]})}),c.jsx(Rn,{value:"pdf",className:"space-y-4",children:c.jsxs(Jt,{children:[c.jsxs(In,{children:[c.jsx(Bn,{className:"text-sm",children:"PDF Export Settings"}),c.jsx(D_,{children:"Generate scale-accurate plans for contractors"})]}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"paper",children:"Paper Size"}),c.jsxs(Cr,{value:a.paper_size,onValueChange:G=>te("paper_size",G),children:[c.jsx(dr,{children:c.jsx(Ar,{})}),c.jsxs(hr,{children:[c.jsx(Li,{value:"A4",children:"A4"}),c.jsx(Li,{value:"A3",children:"A3"}),c.jsx(Li,{value:"Letter",children:"Letter"}),c.jsx(Li,{value:"Legal",children:"Legal"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"scale",children:"Scale"}),c.jsxs(Cr,{value:a.scale,onValueChange:G=>te("scale",G),children:[c.jsx(dr,{children:c.jsx(Ar,{})}),c.jsxs(hr,{children:[c.jsx(Li,{value:"1:50",children:"1:50"}),c.jsx(Li,{value:"1:100",children:"1:100"}),c.jsx(Li,{value:"1:200",children:"1:200"})]})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Gp,{id:"measurements",checked:a.include_measurements,onCheckedChange:G=>te("include_measurements",G)}),c.jsx(qt,{htmlFor:"measurements",children:"Include measurements"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Gp,{id:"materials",checked:a.include_materials,onCheckedChange:G=>te("include_materials",G)}),c.jsx(qt,{htmlFor:"materials",children:"Include materials list"})]})]})]})]})})]}),g.length>0&&c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Quick Presets"})}),c.jsx(pn,{children:c.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.slice(0,4).map(G=>c.jsxs(it,{variant:M===G.id?"default":"outline",size:"sm",onClick:()=>J(G),className:"flex items-center gap-2",children:[X(G.export_type),G.name,G.is_default&&c.jsx(UC,{className:"h-3 w-3 fill-current"})]},G.id))})})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(it,{onClick:I,disabled:!n||d,className:"flex-1",children:d?c.jsxs(c.Fragment,{children:[c.jsx(pd,{className:"h-4 w-4 mr-2 animate-spin"}),"Starting..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Fp,{className:"h-4 w-4 mr-2"}),"Export"]})}),c.jsxs(Nf,{open:S,onOpenChange:w,children:[c.jsx(y1,{asChild:!0,children:c.jsx(it,{variant:"outline",size:"icon",children:c.jsx(qee,{className:"h-4 w-4"})})}),c.jsxs(gh,{className:"max-w-md",children:[c.jsxs(vh,{children:[c.jsx(yh,{children:"Export Settings"}),c.jsx(Hp,{children:"Manage presets and advanced options"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(qt,{htmlFor:"preset-name",children:"Save Current Settings as Preset"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ta,{id:"preset-name",placeholder:"Preset name",value:T,onChange:G=>C(G.target.value)}),c.jsx(it,{size:"sm",onClick:Q,disabled:!T.trim(),children:c.jsx(jC,{className:"h-4 w-4"})})]})]}),c.jsx(js,{}),c.jsxs("div",{children:[c.jsx(qt,{children:"My Presets"}),c.jsx(Ca,{className:"h-32 mt-2",children:g.map(G=>c.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded",children:[c.jsx("span",{className:"text-sm",children:G.name}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx(it,{size:"sm",variant:"ghost",onClick:()=>J(G),children:"Apply"}),c.jsx(it,{size:"sm",variant:"ghost",children:c.jsx(Of,{className:"h-3 w-3"})})]})]},G.id))})]})]})]})]})]}),r.length>0&&c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Recent Exports"})}),c.jsx(pn,{children:c.jsx(Ca,{className:"max-h-48",children:c.jsx("div",{className:"space-y-2",children:r.slice(0,5).map(G=>c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[X(G.export_type),c.jsxs("div",{children:[c.jsxs("div",{className:"font-medium text-sm",children:[G.export_type_display," - ",G.quality]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(G.created_at).toLocaleString()})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[$(G.status),G.status==="processing"&&c.jsxs("div",{className:"w-16",children:[c.jsx(vE,{value:G.progress}),c.jsxs("div",{className:"text-xs text-center",children:[G.progress,"%"]})]}),G.status==="completed"&&G.is_ready_for_download&&c.jsx(it,{size:"sm",variant:"outline",onClick:()=>W(G),children:c.jsx(Fp,{className:"h-3 w-3"})}),G.status==="failed"&&c.jsx(wn,{variant:"destructive",children:"Failed"})]})]},G.id))})})})]}),b&&c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Export Statistics"})}),c.jsx(pn,{children:c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold",children:b.total_exports_this_month}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"This month"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"text-2xl font-bold",children:[b.success_rate?.toFixed(1),"%"]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Success rate"})]})]})})]})]})})},Rue=()=>{const{currentFloorPlan:n,apiConfig:e,revisionHistory:t,currentRevision:i}=ti(),[a,s]=k.useState("timeline"),[r,l]=k.useState([]),[d,f]=k.useState(!1),[g,x]=k.useState({enabled:!0,interval:300,maxRevisions:50}),[b,_]=k.useState([]),[S,w]=k.useState(!1),[M,E]=k.useState(null),[T,C]=k.useState(null),[D,P]=k.useState(0),[B,F]=k.useState(!1),[j,O]=k.useState(0),[I,W]=k.useState(null),[Q,J]=k.useState(!1),[te,oe]=k.useState("synced"),[$,X]=k.useState([]),[G,ee]=k.useState(!0),[Y,ne]=k.useState(!1),[ue,de]=k.useState("all"),[ie,Me]=k.useState("all"),[ye,ae]=k.useState(""),_e=[{value:"all",label:"All Revisions"},{value:"checkpoints",label:"Checkpoints Only"},{value:"auto-saves",label:"Auto-saves Only"},{value:"manual",label:"Manual Saves Only"},{value:"collaborative",label:"Collaborative Edits"}];k.useEffect(()=>{n&&(Ke(),Ge(),st(),ft(),Pe())},[n]);const Ke=async()=>{if(!(!e||!n)){w(!0);try{const Te=await fetch(`${e.baseUrl}/floorplans/${n.id}/revisions/timeline/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(Te.ok){const ze=await Te.json();_(ze),P(ze.length-1)}}catch(Te){console.error("Failed to load revision timeline:",Te)}finally{w(!1)}}},Ge=async()=>{if(!(!e||!n))try{const Te=await fetch(`${e.baseUrl}/floorplans/${n.id}/revisions/statistics/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(Te.ok){const ze=await Te.json();E(ze)}}catch(Te){console.error("Failed to load statistics:",Te)}},st=async()=>{if(!(!e||!n))try{const Te=await fetch(`${e.baseUrl}/floorplans/${n.id}/analytics/collaboration_insights/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(Te.ok){const ze=await Te.json();C(ze)}}catch(Te){console.error("Failed to load collaboration insights:",Te)}},ft=async()=>{if(e)try{const Te=await fetch(`${e.baseUrl}/auto-save-settings/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(Te.ok){const ze=await Te.json();x(ze)}}catch(Te){console.error("Failed to load auto-save settings:",Te)}},Pe=async()=>{if(e)try{const Te=await fetch(`${e.baseUrl}/sync-conflicts/`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(Te.ok){const ze=await Te.json();X(ze.results||ze)}}catch(Te){console.error("Failed to load sync conflicts:",Te)}},he=()=>{D>0&&(P(D-1),F(!0),console.log("Undo to revision:",b[D-1]))},ke=()=>{D<b.length-1&&(P(D+1),F(!0),console.log("Redo to revision:",b[D+1]))},Ee=async Te=>{if(!(!e||!n))try{const ze=await fetch(`${e.baseUrl}/floorplans/${n.id}/revisions/${Te}/restore/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`,"X-CSRFToken":Pt()},body:JSON.stringify({create_checkpoint:!0,checkpoint_name:`Restore point - ${new Date().toLocaleString()}`})});if(ze.ok){const Nt=await ze.json();console.log("Restored to revision:",Nt),await Ke(),P(b.length)}else throw new Error("Failed to restore revision")}catch(ze){console.error("Restore failed:",ze),alert("Failed to restore revision. Please try again.")}},Le=async()=>{if(r.length!==2){alert("Please select exactly 2 revisions to compare");return}J(!0);try{const Te=await fetch(`${e?.baseUrl}/floorplans/${n?.id}/revisions/compare/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`,"X-CSRFToken":Pt()},body:JSON.stringify({revision_1:r[0],revision_2:r[1]})});if(Te.ok){const ze=await Te.json();W(ze),f(!0)}else throw new Error("Failed to compare revisions")}catch(Te){console.error("Comparison failed:",Te),alert("Failed to compare revisions. Please try again.")}finally{J(!1)}},Ie=async()=>{const Te=prompt("Enter checkpoint name:");if(!(!Te||!e||!n))try{if((await fetch(`${e.baseUrl}/floorplans/${n.id}/revisions/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`,"X-CSRFToken":Pt()},body:JSON.stringify({name:Te,description:"User-created checkpoint",is_checkpoint:!0,data:{}})})).ok)await Ke();else throw new Error("Failed to create checkpoint")}catch(ze){console.error("Checkpoint creation failed:",ze),alert("Failed to create checkpoint. Please try again.")}},Et=async Te=>{try{if((await fetch(`${e?.baseUrl}/auto-save-settings/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`,"X-CSRFToken":Pt()},body:JSON.stringify(Te)})).ok)x(Te);else throw new Error("Failed to update settings")}catch(ze){console.error("Settings update failed:",ze),alert("Failed to update auto-save settings.")}},ct=Te=>{l(ze=>ze.includes(Te)?ze.filter(Nt=>Nt!==Te):ze.length<2?[...ze,Te]:[ze[1],Te])},At=()=>{f(!1),W(null),l([])},Pt=()=>document.querySelector("[name=csrfmiddlewaretoken]")?.getAttribute("value")||"",Se=Te=>Te.is_checkpoint?c.jsx(rD,{className:"h-4 w-4"}):Te.is_auto_save?c.jsx(nU,{className:"h-4 w-4"}):c.jsx(jC,{className:"h-4 w-4"}),se=Te=>Te.is_checkpoint?"default":Te.is_auto_save?"secondary":"outline",He=Te=>{const ze=Math.floor(Te/60),Nt=Math.floor(ze/60),Dt=Math.floor(Nt/24);return Dt>0?`${Dt}d ago`:Nt>0?`${Nt}h ago`:ze>0?`${ze}m ago`:"Just now"},Ve=b.filter(Te=>{if(ie==="checkpoints"&&!Te.is_checkpoint||ie==="auto-saves"&&!Te.is_auto_save||ie==="manual"&&Te.is_auto_save)return!1;if(ye){const ze=ye.toLowerCase();if(!Te.name?.toLowerCase().includes(ze)&&!Te.description?.toLowerCase().includes(ze))return!1}return!0});return c.jsx(bu,{panelId:"revisionHistory",children:c.jsxs(_l,{value:a,onValueChange:s,className:"w-full",children:[c.jsxs(Eo,{className:"grid w-full grid-cols-4",children:[c.jsx(vn,{value:"timeline",children:"Timeline"}),c.jsx(vn,{value:"compare",children:"Compare"}),c.jsx(vn,{value:"analytics",children:"Analytics"}),c.jsx(vn,{value:"settings",children:"Settings"})]}),c.jsxs(Rn,{value:"timeline",className:"space-y-4 mt-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(it,{onClick:he,disabled:D<=0,size:"sm",variant:"outline",children:[c.jsx(Sg,{className:"h-4 w-4 mr-2"}),"Undo"]}),c.jsxs(it,{onClick:ke,disabled:D>=b.length-1,size:"sm",variant:"outline",children:[c.jsx(Bee,{className:"h-4 w-4 mr-2"}),"Redo"]})]}),c.jsxs(it,{onClick:Ie,size:"sm",children:[c.jsx(rD,{className:"h-4 w-4 mr-2"}),"Checkpoint"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Cr,{value:ie,onValueChange:Me,children:[c.jsx(dr,{className:"w-40",children:c.jsx(Ar,{})}),c.jsx(hr,{children:_e.map(Te=>c.jsx(Li,{value:Te.value,children:Te.label},Te.value))})]}),c.jsx(Ta,{placeholder:"Search revisions...",value:ye,onChange:Te=>ae(Te.target.value),className:"flex-1"})]}),c.jsx(Ca,{className:"h-64",children:c.jsx("div",{className:"space-y-2",children:Ve.map(Te=>c.jsxs(Jt,{className:`p-3 cursor-pointer transition-colors ${r.includes(Te.id)?"border-blue-500 bg-blue-50":"hover:bg-muted"}`,onClick:()=>ct(Te.id),children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[Se(Te),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-sm",children:Te.name||`Revision ${Te.id.substr(0,8)}`}),c.jsx(wn,{variant:se(Te),className:"text-xs",children:Te.is_checkpoint?"Checkpoint":Te.is_auto_save?"Auto":"Manual"})]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:He(Te.time_ago_seconds)}),Te.description&&c.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:Te.description})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Gp,{checked:r.includes(Te.id),onCheckedChange:()=>ct(Te.id)}),c.jsx(it,{size:"sm",variant:"ghost",onClick:ze=>{ze.stopPropagation(),Ee(Te.id)},children:"Restore"})]})]}),Te.thumbnail&&c.jsx("div",{className:"mt-2",children:c.jsx("img",{src:Te.thumbnail,alt:`Revision ${Te.id} thumbnail`,className:"h-16 w-24 object-cover rounded border"})})]},Te.id))})}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[te==="synced"?c.jsx(Df,{className:"h-4 w-4 text-green-500"}):te==="syncing"?c.jsx(pd,{className:"h-4 w-4 text-blue-500 animate-spin"}):c.jsx(IT,{className:"h-4 w-4 text-red-500"}),c.jsx("span",{children:te==="synced"?"All changes saved":te==="syncing"?"Syncing...":"Sync conflicts"})]}),j>0&&c.jsxs(wn,{variant:"secondary",children:[j," pending"]})]})]}),c.jsxs(Rn,{value:"compare",className:"space-y-4 mt-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Select 2 revisions to compare (",r.length,"/2)"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(it,{onClick:Le,disabled:r.length!==2||Q,size:"sm",children:[Q?c.jsx(pd,{className:"h-4 w-4 mr-2 animate-spin"}):c.jsx(k$,{className:"h-4 w-4 mr-2"}),"Compare"]}),d&&c.jsx(it,{onClick:At,size:"sm",variant:"outline",children:"Exit Compare"})]})]}),I&&c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Comparison Results"})}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:I.summary.additions}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Added"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:I.summary.modifications}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Modified"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:I.summary.deletions}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Removed"})]})]}),c.jsx(js,{}),c.jsx(Ca,{className:"h-32",children:c.jsx("div",{className:"space-y-2",children:I.changes.map((Te,ze)=>c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("div",{className:`w-3 h-3 rounded-full ${Te.type==="added"?"bg-green-500":Te.type==="modified"?"bg-blue-500":"bg-red-500"}`}),c.jsx("span",{className:"capitalize",children:Te.type}),c.jsxs("span",{className:"text-muted-foreground",children:[Te.element_type,":"]}),c.jsx("span",{children:Te.description})]},ze))})})]})]})]}),c.jsxs(Rn,{value:"analytics",className:"space-y-4 mt-4",children:[M&&c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Revision Statistics"})}),c.jsx(pn,{children:c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold",children:M.total_revisions}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Revisions"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold",children:M.checkpoints_count}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Checkpoints"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold",children:M.auto_saves_count}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Auto-saves"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(M.average_time_between_saves/60),"m"]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg. Save Time"})]})]})})]}),T&&c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Collaboration Insights"})}),c.jsxs(pn,{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm",children:"Most Active Collaborator"}),c.jsx(wn,{variant:"outline",children:T.most_active_collaborator})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm",children:"Collaboration Frequency"}),c.jsxs("span",{className:"text-sm font-medium",children:[T.collaboration_frequency,"%"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm",children:"Concurrent Edits"}),c.jsx("span",{className:"text-sm font-medium",children:T.concurrent_edits})]})]})]}),$.length>0&&c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Sync Conflicts"})}),c.jsx(pn,{children:c.jsx(Ca,{className:"h-32",children:c.jsx("div",{className:"space-y-2",children:$.map(Te=>c.jsxs(Zo,{variant:Te.resolved?"default":"destructive",children:[c.jsx(IT,{className:"h-4 w-4"}),c.jsx(Ov,{className:"text-sm",children:Te.type}),c.jsx(Qo,{className:"text-xs",children:Te.description})]},Te.id))})})})]})]}),c.jsxs(Rn,{value:"settings",className:"space-y-4 mt-4",children:[c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Auto-save Settings"})}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(qt,{htmlFor:"auto-save-enabled",children:"Enable Auto-save"}),c.jsx(Gp,{id:"auto-save-enabled",checked:g.enabled,onCheckedChange:Te=>x(ze=>({...ze,enabled:Te}))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(qt,{children:["Save Interval: ",g.interval,"s"]}),c.jsx(_o,{value:[g.interval],onValueChange:([Te])=>x(ze=>({...ze,interval:Te})),min:60,max:600,step:30,className:"w-full"}),c.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[c.jsx("span",{children:"1min"}),c.jsx("span",{children:"10min"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(qt,{children:["Max Revisions: ",g.maxRevisions]}),c.jsx(_o,{value:[g.maxRevisions],onValueChange:([Te])=>x(ze=>({...ze,maxRevisions:Te})),min:10,max:100,step:5,className:"w-full"}),c.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[c.jsx("span",{children:"10"}),c.jsx("span",{children:"100"})]})]}),c.jsx(it,{onClick:()=>Et(g),size:"sm",className:"w-full",children:"Save Settings"})]})]}),c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Cloud Sync"})}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(qt,{htmlFor:"cloud-sync",children:"Enable Cloud Sync"}),c.jsx(Gp,{id:"cloud-sync",checked:G,onCheckedChange:ee})]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Cloud sync automatically backs up your revisions and enables cross-device collaboration."})]})]})]})]})})},ih={async uploadFile(n,e,t={}){const i=new FormData;i.append("file",n),e&&i.append("floorplan_id",e),Object.entries(t).forEach(([s,r])=>{r!==void 0&&i.append(s,String(r))});const a=await fetch("/floorplanner/api/cad/imports/",{method:"POST",body:i,credentials:"include"});if(!a.ok){const s=await a.json();throw new Error(s.detail||"Upload failed")}return a.json()},async getImportJob(n){const e=await fetch(`/floorplanner/api/cad/imports/${n}/`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch import job");return e.json()},async updateLayers(n,e){const t=await fetch(`/floorplanner/api/cad/imports/${n}/update_layers/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({layer_updates:e}),credentials:"include"});if(!t.ok){const i=await t.json();throw new Error(i.detail||"Failed to update layers")}return t.json()},async startImport(n){const e=await fetch(`/floorplanner/api/cad/imports/${n}/start_import/`,{method:"POST",credentials:"include"});if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to start import")}return e.json()},async cancelImport(n){const e=await fetch(`/floorplanner/api/cad/imports/${n}/cancel/`,{method:"POST",credentials:"include"});if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to cancel import")}return e.json()},async getActiveImports(){const n=await fetch("/floorplanner/api/cad/status/check_status/",{credentials:"include"});if(!n.ok)throw new Error("Failed to fetch active imports");return n.json()},async getTemplates(){const n=await fetch("/floorplanner/api/cad/templates/",{credentials:"include"});if(!n.ok)throw new Error("Failed to fetch templates");return n.json()},async applyTemplate(n,e){const t=await fetch(`/floorplanner/api/cad/imports/${n}/apply_template/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template_id:e}),credentials:"include"});if(!t.ok){const i=await t.json();throw new Error(i.error||"Failed to apply template")}return t.json()}},Due=()=>{const{currentFloorPlan:n,importCADFile:e}=ti(),[t,i]=k.useState(null),[a,s]=k.useState(!1),[r,l]=k.useState(0),[d,f]=k.useState(null),[g,x]=k.useState("upload"),[b,_]=k.useState([]),[S,w]=k.useState(""),[M,E]=k.useState({sourceUnits:"auto",targetUnits:"m",scaleFactor:1}),[T,C]=k.useState({}),[D,P]=k.useState([]),B={dxf:{name:"AutoCAD DXF",icon:Sf,description:"Drawing Exchange Format"},dwg:{name:"AutoCAD DWG",icon:Sf,description:"Drawing file (requires conversion)"},ifc:{name:"IFC Building Model",icon:Sf,description:"Industry Foundation Classes"},revit:{name:"Revit Family",icon:Sf,description:"Revit file format"},skp:{name:"SketchUp",icon:Sf,description:"SketchUp model file"},pdf:{name:"PDF Plans",icon:Sf,description:"Portable Document Format"}},F={walls:{name:"Walls",color:"bg-stone-500"},doors:{name:"Doors",color:"bg-amber-600"},windows:{name:"Windows",color:"bg-sky-500"},furniture:{name:"Furniture",color:"bg-emerald-600"},dimensions:{name:"Dimensions",color:"bg-red-500"},text:{name:"Text/Labels",color:"bg-purple-500"},electrical:{name:"Electrical",color:"bg-yellow-500"},plumbing:{name:"Plumbing",color:"bg-blue-600"},hvac:{name:"HVAC",color:"bg-orange-500"},structural:{name:"Structural",color:"bg-gray-600"},other:{name:"Other",color:"bg-gray-400"}};k.useEffect(()=>{j(),O();const ue=setInterval(O,5e3);return()=>clearInterval(ue)},[]),k.useEffect(()=>{t?.id&&I()},[t?.id]);const j=async()=>{try{const ue=await ih.getTemplates();_(ue.results||[])}catch(ue){console.error("Failed to load templates:",ue)}},O=async()=>{try{const ue=await ih.getActiveImports();P(ue.active_imports||[])}catch(ue){console.error("Failed to load active imports:",ue)}},I=async()=>{if(t?.id)try{const ue=await ih.getImportJob(t.id);if(i(ue),ue.layers){const de={};ue.layers.forEach(ie=>{de[ie.id]={isVisible:ie.is_visible,isImportable:ie.is_importable,layerType:ie.layer_type,importPriority:ie.import_priority}}),C(de)}ue.status==="layer_review"?x("layers"):ue.status==="completed"&&x("results")}catch(ue){console.error("Failed to load import details:",ue),f("Failed to load import details")}},W=k.useCallback(async ue=>{if(!ue||ue.length===0)return;const de=ue[0];f(null),s(!0),l(0);try{const ie=de.name.split(".").pop()?.toLowerCase();if(!ie||!B[ie])throw new Error(`Unsupported file format: ${ie}`);const Me=await ih.uploadFile(de,n?.id,M);i(Me),x("processing"),l(100);const ye=setInterval(async()=>{try{const ae=await ih.getImportJob(Me.id);i(ae),ae.status==="layer_review"?(x("layers"),clearInterval(ye)):ae.status==="failed"?(f(ae.error_message||"Import failed"),clearInterval(ye)):ae.status==="completed"&&(x("results"),clearInterval(ye))}catch(ae){console.error("Polling error:",ae),clearInterval(ye)}},2e3)}catch(ie){f(ie instanceof Error?ie.message:"Upload failed")}finally{s(!1)}},[n?.id,M]),Q=k.useCallback(ue=>{ue.preventDefault(),ue.dataTransfer.dropEffect="copy"},[]),J=k.useCallback(ue=>{ue.preventDefault();const de=ue.dataTransfer.files;W(de)},[W]),te=async(ue,de)=>{try{C(ie=>({...ie,[ue]:{...ie[ue],...de}})),t?.id&&await ih.updateLayers(t.id,[{id:ue,...de}])}catch(ie){console.error("Failed to update layer:",ie),f("Failed to update layer settings")}},oe=async()=>{if(t?.id)try{f(null),await ih.startImport(t.id);const ue=setInterval(async()=>{try{const de=await ih.getImportJob(t.id);i(de),de.status==="completed"?(x("results"),clearInterval(ue),e&&e(de)):de.status==="failed"&&(f(de.error_message||"Import failed"),clearInterval(ue))}catch(de){console.error("Import polling error:",de),clearInterval(ue)}},1e3)}catch(ue){f(ue instanceof Error?ue.message:"Import failed")}},$=async()=>{if(t?.id)try{await ih.cancelImport(t.id),i(null),x("upload")}catch(ue){f(ue instanceof Error?ue.message:"Cancel failed")}},X=async()=>{if(!(!S||!t?.id))try{await ih.applyTemplate(t.id,S),await I()}catch(ue){f(ue instanceof Error?ue.message:"Template application failed")}},G=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors cursor-pointer",onDragOver:Q,onDrop:J,onClick:()=>document.getElementById("file-input")?.click(),children:[c.jsx(LC,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop CAD files here or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Supports DXF, DWG, IFC, Revit, SketchUp, and PDF files"}),c.jsx("input",{id:"file-input",type:"file",className:"hidden",accept:".dxf,.dwg,.ifc,.rvt,.skp,.pdf",onChange:ue=>W(ue.target.files)}),c.jsx(it,{variant:"outline",size:"sm",children:"Choose Files"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Supported Formats"}),c.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(B).map(([ue,de])=>{const ie=de.icon;return c.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded",children:[c.jsx(ie,{className:"h-4 w-4 text-gray-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium",children:de.name}),c.jsx("div",{className:"text-xs text-gray-500",children:de.description})]})]},ue)})})]}),c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Import Settings"})}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(qt,{htmlFor:"source-units",children:"Source Units"}),c.jsxs(Cr,{value:M.sourceUnits,onValueChange:ue=>E(de=>({...de,sourceUnits:ue})),children:[c.jsx(dr,{children:c.jsx(Ar,{})}),c.jsxs(hr,{children:[c.jsx(Li,{value:"auto",children:"Auto-detect"}),c.jsx(Li,{value:"mm",children:"Millimeters"}),c.jsx(Li,{value:"cm",children:"Centimeters"}),c.jsx(Li,{value:"m",children:"Meters"}),c.jsx(Li,{value:"in",children:"Inches"}),c.jsx(Li,{value:"ft",children:"Feet"})]})]})]}),c.jsxs("div",{children:[c.jsx(qt,{htmlFor:"target-units",children:"Target Units"}),c.jsxs(Cr,{value:M.targetUnits,onValueChange:ue=>E(de=>({...de,targetUnits:ue})),children:[c.jsx(dr,{children:c.jsx(Ar,{})}),c.jsxs(hr,{children:[c.jsx(Li,{value:"m",children:"Meters"}),c.jsx(Li,{value:"cm",children:"Centimeters"}),c.jsx(Li,{value:"mm",children:"Millimeters"}),c.jsx(Li,{value:"ft",children:"Feet"}),c.jsx(Li,{value:"in",children:"Inches"})]})]})]})]}),c.jsxs("div",{children:[c.jsx(qt,{htmlFor:"scale-factor",children:"Scale Factor"}),c.jsx(Ta,{id:"scale-factor",type:"number",step:"0.1",min:"0.1",max:"1000",value:M.scaleFactor,onChange:ue=>E(de=>({...de,scaleFactor:parseFloat(ue.target.value)||1}))})]})]})]}),b.length>0&&c.jsxs(Jt,{children:[c.jsxs(In,{children:[c.jsx(Bn,{className:"text-sm",children:"Import Templates"}),c.jsx(CardDescription,{children:"Apply saved settings from previous imports"})]}),c.jsx(pn,{className:"space-y-3",children:c.jsxs(Cr,{value:S,onValueChange:w,children:[c.jsx(dr,{children:c.jsx(Ar,{placeholder:"Choose a template..."})}),c.jsx(hr,{children:b.map(ue=>c.jsx(Li,{value:ue.id,children:ue.name},ue.id))})]})})]})]}),ee=()=>c.jsx("div",{className:"space-y-6",children:t&&c.jsxs(Jt,{children:[c.jsxs(In,{children:[c.jsxs(Bn,{className:"text-sm",children:["Processing ",t.original_filename]}),c.jsxs(CardDescription,{children:[t.file_format.toUpperCase()," "," ",(t.file_size_mb||0).toFixed(1)," MB"]})]}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[c.jsx("span",{children:"Progress"}),c.jsxs("span",{children:[t.progress_percentage.toFixed(0),"%"]})]}),c.jsx(vE,{value:t.progress_percentage})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(wn,{variant:t.status==="failed"?"destructive":"default",children:t.status.replace("_"," ").toUpperCase()}),t.status==="processing"&&c.jsx(pd,{className:"h-4 w-4 animate-spin"})]}),t.error_message&&c.jsxs(Zo,{variant:"destructive",children:[c.jsx(ph,{className:"h-4 w-4"}),c.jsx(Qo,{children:t.error_message})]}),c.jsx("div",{className:"flex space-x-2",children:c.jsx(it,{onClick:$,variant:"outline",size:"sm",disabled:!["processing","uploading"].includes(t.status),children:"Cancel"})})]})]})}),Y=()=>c.jsx("div",{className:"space-y-6",children:t&&t.layers&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h4",{className:"text-sm font-medium",children:["Found ",t.layers.length," layers"]}),c.jsxs("div",{className:"flex space-x-2",children:[S&&c.jsx(it,{onClick:X,size:"sm",variant:"outline",children:"Apply Template"}),c.jsxs(it,{onClick:oe,size:"sm",children:[c.jsx(OC,{className:"h-4 w-4 mr-2"}),"Start Import"]})]})]}),c.jsx(Ca,{className:"h-64",children:c.jsx("div",{className:"space-y-2",children:t.layers.map(ue=>c.jsx(Jt,{className:"p-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:`w-4 h-4 rounded ${F[ue.layer_type]?.color||"bg-gray-400"}`,style:{backgroundColor:ue.color}}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-sm",children:ue.display_name||ue.original_name}),c.jsxs("div",{className:"text-xs text-gray-500",children:[ue.entity_count," entities "," ",F[ue.layer_type]?.name||"Other"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs(wa,{children:[c.jsx(Ma,{asChild:!0,children:c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>te(ue.id,{isVisible:!T[ue.id]?.isVisible}),children:T[ue.id]?.isVisible?c.jsx(xl,{className:"h-4 w-4"}):c.jsx(Gv,{className:"h-4 w-4"})})}),c.jsx(ma,{children:"Toggle visibility"})]}),c.jsx(Gp,{checked:T[ue.id]?.isImportable||!1,onCheckedChange:de=>te(ue.id,{isImportable:de})})]})]})},ue.id))})}),b.length>0&&c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsx(Bn,{className:"text-sm",children:"Apply Template"})}),c.jsx(pn,{children:c.jsxs(Cr,{value:S,onValueChange:w,children:[c.jsx(dr,{children:c.jsx(Ar,{placeholder:"Choose a template..."})}),c.jsx(hr,{children:b.map(ue=>c.jsx(Li,{value:ue.id,children:ue.name},ue.id))})]})})]})]})}),ne=()=>c.jsx("div",{className:"space-y-6",children:t&&t.import_summary&&c.jsxs(Jt,{children:[c.jsx(In,{children:c.jsxs(Bn,{className:"text-sm flex items-center",children:[c.jsx(Df,{className:"h-4 w-4 text-green-500 mr-2"}),"Import Complete"]})}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-gray-500",children:"Total Layers"}),c.jsx("div",{className:"font-medium",children:t.import_summary.total_layers||0})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-gray-500",children:"Imported"}),c.jsx("div",{className:"font-medium text-green-600",children:t.import_summary.imported_layers||0})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-gray-500",children:"Skipped"}),c.jsx("div",{className:"font-medium text-orange-600",children:t.import_summary.skipped_layers||0})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-gray-500",children:"Errors"}),c.jsx("div",{className:"font-medium text-red-600",children:t.import_summary.errors?.length||0})]})]}),t.import_summary.warnings&&t.import_summary.warnings.length>0&&c.jsxs(Zo,{children:[c.jsx(ph,{className:"h-4 w-4"}),c.jsx(Ov,{children:"Warnings"}),c.jsx(Qo,{children:c.jsx("ul",{className:"list-disc list-inside",children:t.import_summary.warnings.map((ue,de)=>c.jsx("li",{className:"text-sm",children:ue},de))})})]}),c.jsx("div",{className:"flex space-x-2",children:c.jsx(it,{onClick:()=>{i(null),x("upload")},size:"sm",children:"Import Another File"})})]})]})});return c.jsx(bu,{panelId:"cadImport",children:c.jsxs("div",{className:"h-full flex flex-col",children:[c.jsx("div",{className:"flex-1 overflow-hidden",children:c.jsxs(_l,{value:g,onValueChange:ue=>x(ue),className:"h-full",children:[c.jsxs(Eo,{className:"grid w-full grid-cols-4",children:[c.jsx(vn,{value:"upload",children:"Upload"}),c.jsx(vn,{value:"processing",disabled:!t,children:"Processing"}),c.jsx(vn,{value:"layers",disabled:!t||t.status!=="layer_review",children:"Layers"}),c.jsx(vn,{value:"results",disabled:!t||t.status!=="completed",children:"Results"})]}),c.jsx(Rn,{value:"upload",className:"h-full p-4",children:c.jsx(Ca,{className:"h-full",children:G()})}),c.jsx(Rn,{value:"processing",className:"h-full p-4",children:c.jsx(Ca,{className:"h-full",children:ee()})}),c.jsx(Rn,{value:"layers",className:"h-full p-4",children:c.jsx(Ca,{className:"h-full",children:Y()})}),c.jsx(Rn,{value:"results",className:"h-full p-4",children:c.jsx(Ca,{className:"h-full",children:ne()})})]})}),d&&c.jsx("div",{className:"p-4 border-t",children:c.jsxs(Zo,{variant:"destructive",children:[c.jsx(ph,{className:"h-4 w-4"}),c.jsx(Ov,{children:"Error"}),c.jsx(Qo,{children:d})]})})]})})},I6=({enabled:n=!0})=>{const{togglePanel:e,resetPanelLayout:t,getVisiblePanels:i,snapPanelsToGrid:a,distributeHorizontally:s,distributeVertically:r,cascadePanels:l,createPreset:d,applyPreset:f,workspacePresets:g}=Nr();return k.useEffect(()=>{if(!n)return;const x=b=>{if(b.target instanceof HTMLInputElement||b.target instanceof HTMLTextAreaElement||b.target instanceof HTMLSelectElement||b.target?.contentEditable==="true")return;const{key:_,ctrlKey:S,metaKey:w,shiftKey:M,altKey:E}=b,T=S||w;if(!T&&!M&&!E){const C=pv[_.toLowerCase()];if(C){b.preventDefault(),e(C);return}}if(T&&!M&&!E)switch(_.toLowerCase()){case"r":b.preventDefault(),t();break;case"g":b.preventDefault(),a();break;case"h":b.preventDefault();const C=i();s(C);break;case"j":b.preventDefault();const D=i();r(D);break;case"k":b.preventDefault();const P=i();l(P);break;case"s":if(M){b.preventDefault();const B=`Workspace ${Object.keys(g).length+1}`;d(B,`Saved at ${new Date().toLocaleString()}`)}break}if(T&&M&&!E){const C=parseInt(_);if(C>=1&&C<=9){b.preventDefault();const P=Object.keys(g)[C-1];P&&f(P)}}if(E&&!T&&!M)switch(_.toLowerCase()){case"h":b.preventDefault(),i().forEach(C=>e(C));break;case"a":b.preventDefault(),Object.keys(pv).forEach(C=>{const D=pv[C];D&&!Nr.getState().isPanelVisible(D)&&e(D)});break}};return window.addEventListener("keydown",x),()=>{window.removeEventListener("keydown",x)}},[n,e,t,i,a,s,r,l,d,f,g]),null},Oue=({error:n,resetError:e,errorId:t})=>c.jsxs(Jt,{className:"m-4 border-red-200 bg-red-50",children:[c.jsx(In,{children:c.jsxs(Bn,{className:"flex items-center gap-2 text-red-700",children:[c.jsx(ph,{className:"h-5 w-5"}),"Something went wrong"]})}),c.jsxs(pn,{className:"space-y-4",children:[c.jsxs("div",{className:"text-sm text-red-600",children:[c.jsx("p",{className:"font-medium",children:"Error Details:"}),c.jsx("p",{className:"font-mono text-xs bg-red-100 p-2 rounded mt-1 break-all",children:n.message}),c.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Error ID: ",t]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(it,{onClick:e,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[c.jsx(pd,{className:"h-4 w-4"}),"Try Again"]}),c.jsxs(it,{onClick:()=>window.location.reload(),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[c.jsx(K$,{className:"h-4 w-4"}),"Reload App"]})]})]})]});let GS=class extends k.Component{resetTimeoutId=null;constructor(e){super(e),this.state={hasError:!1,errorId:""}}static getDerivedStateFromError(e){const t=`err_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return{hasError:!0,error:e,errorId:t}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t),this.reportError(e,t)}componentDidUpdate(e){const{resetKeys:t,resetOnPropsChange:i}=this.props,{hasError:a}=this.state;if(a&&t){const s=e.resetKeys||[];t.some((l,d)=>l!==s[d])&&this.resetError()}a&&i&&e.children!==this.props.children&&this.resetError()}componentWillUnmount(){this.resetTimeoutId&&clearTimeout(this.resetTimeoutId)}resetError=()=>{this.resetTimeoutId&&clearTimeout(this.resetTimeoutId),this.setState({hasError:!1,error:void 0,errorInfo:void 0,errorId:""})};reportError=(e,t)=>{e.message,e.stack,t.componentStack,new Date().toISOString()};render(){const{hasError:e,error:t,errorId:i}=this.state,{children:a,fallback:s=Oue}=this.props;return e&&t?c.jsx(s,{error:t,resetError:this.resetError,errorId:i}):a}};const jue=({children:n,panelId:e,panelTitle:t})=>{const i=(s,r)=>{console.error(`Panel "${e}" encountered an error:`,s,r)},a=({error:s,resetError:r,errorId:l})=>c.jsxs("div",{className:"p-4 text-center",children:[c.jsx(ph,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),c.jsxs("h3",{className:"font-medium text-gray-900 mb-1",children:[t||"Panel"," Error"]}),c.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"This panel encountered an error and couldn't load properly."}),c.jsxs(it,{onClick:r,size:"sm",variant:"outline",children:[c.jsx(pd,{className:"h-4 w-4 mr-2"}),"Reload Panel"]}),!1]});return c.jsx(GS,{fallback:a,onError:i,resetKeys:[e],children:n})},Pue=(n=!1)=>{const[e,t]=k.useState({renderTime:0,updateTime:0,memoryUsage:0,fps:0,panelCount:0,visiblePanelCount:0}),i=k.useRef(0),a=k.useRef(performance.now()),s=k.useRef(null),r=Nr(g=>g.getVisiblePanels),l=Nr(g=>g.panels),d=()=>{i.current++;const g=performance.now(),x=g-a.current;if(x>=1e3){const b=Math.round(i.current*1e3/x);i.current=0,a.current=g,t(_=>({..._,fps:b}))}n&&(s.current=requestAnimationFrame(d))},f=()=>{if("memory"in performance){const g=performance.memory;return Math.round(g.usedJSHeapSize/1024/1024*100)/100}return 0};return k.useEffect(()=>{if(!n)return;const g=()=>{const b=r(),_=Object.keys(l).length,S=b.length,w=f();t(M=>({...M,panelCount:_,visiblePanelCount:S,memoryUsage:w}))};s.current=requestAnimationFrame(d);const x=setInterval(g,1e3);return()=>{s.current&&cancelAnimationFrame(s.current),clearInterval(x)}},[n,r,l]),e},Uue={debounce:(n,e)=>{let t;return(...i)=>{clearTimeout(t),t=setTimeout(()=>n(...i),e)}},throttle:(n,e)=>{let t=0;return(...i)=>{const a=Date.now();a-t>=e&&(t=a,n(...i))}},scheduleUpdate:n=>{requestAnimationFrame(n)},batchUpdates:n=>{requestAnimationFrame(()=>{n.forEach(e=>e())})},cleanupPanel:n=>{const e=document.getElementById(`panel-${n}`);e&&["mousemove","mouseup","touchmove","touchend"].forEach(i=>{e.removeEventListener(i,()=>{})})},optimizeDrag:{setTransform:(n,e,t)=>{n.style.transform=`translate3d(${e}px, ${t}px, 0)`},throttledUpdate:(()=>{let n=0;return e=>{const t=Date.now();t-n>=16&&(n=t,e())}})(),enableOptimization:n=>{n.style.willChange="transform"},disableOptimization:n=>{n.style.willChange="auto"}}},Lue=({enabled:n=!1,samplingInterval:e=1e3,onMetricsUpdate:t})=>{const i=Pue(n);return k.useEffect(()=>{t&&t(i)},[i,t]),null},zue={enableErrorBoundaries:!0,enablePerformanceMonitoring:!1,enableAutoSave:!0,autoSaveInterval:3e4,enableKeyboardShortcuts:!0,enablePanelSynchronization:!0};class ov{static instance;subscribers=new Map;panelData=new Map;static getInstance(){return ov.instance||(ov.instance=new ov),ov.instance}subscribe(e,t){return this.subscribers.has(e)||this.subscribers.set(e,[]),this.subscribers.get(e).push(t),()=>{const i=this.subscribers.get(e);if(i){const a=i.indexOf(t);a>-1&&i.splice(a,1)}}}updatePanelData(e,t){this.panelData.set(e,t);const i=this.subscribers.get(e);i&&i.forEach(a=>{try{a(t)}catch(s){console.error(`Error in panel ${e} data sync:`,s)}})}getPanelData(e){return this.panelData.get(e)}broadcast(e){this.subscribers.forEach((t,i)=>{t.forEach(a=>{try{a(e)}catch(s){console.error(`Error broadcasting to panel ${i}:`,s)}})})}}const Iue=n=>{const e=k.useMemo(()=>ov.getInstance(),[]),t=k.useCallback(s=>{e.updatePanelData(n,s)},[e,n]),i=k.useCallback(s=>e.subscribe(n,s),[e,n]),a=k.useCallback(()=>e.getPanelData(n),[e,n]);return{updateData:t,subscribe:i,getData:a}},Bue=(n,e)=>{const t=ti(r=>r.currentFloorPlan),i=Nr(r=>r.panels),a=di.useRef(0),s=k.useCallback(Uue.throttle(()=>{try{const r={floorPlan:t,panels:i,timestamp:Date.now()};localStorage.setItem("floorplanner-autosave",JSON.stringify(r)),a.current=Date.now(),console.log("Auto-saved floor plan data")}catch(r){console.error("Auto-save failed:",r)}},5e3),[t,i]);k.useEffect(()=>{if(!n)return;const r=setInterval(()=>{Date.now()-a.current>=e&&s()},e);return()=>clearInterval(r)},[n,e,s]),k.useEffect(()=>{if(!n)return;const r=()=>{s()};return window.addEventListener("beforeunload",r),()=>window.removeEventListener("beforeunload",r)},[n,s])},Fue=n=>{const{showPanel:e,hidePanel:t,togglePanel:i}=Nr();k.useEffect(()=>{if(!n)return;const a=s=>{if(!(s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement||s.target instanceof HTMLSelectElement)&&(s.ctrlKey||s.metaKey)){const r=s.key,l=Object.values(Af).find(d=>d.keyboardShortcut===r);switch(l&&(s.preventDefault(),s.shiftKey?t(l.id):i(l.id)),r){case"h":s.preventDefault(),Object.keys(Af).forEach(t);break;case"r":s.preventDefault(),Nr.getState().resetPanelLayout();break}}};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[n,e,t,i])},kue=()=>{const n=Nr(e=>e.panels);k.useEffect(()=>{const t=setInterval(()=>{Object.entries(n).forEach(([i,a])=>{const s=document.getElementById(`panel-${i}`);if(a.isVisible&&!s&&console.warn(`Panel ${i} is marked as visible but DOM element not found`),s&&a.isVisible){const r=s.getBoundingClientRect(),l={width:window.innerWidth,height:window.innerHeight};(r.right<0||r.left>l.width||r.bottom<0||r.top>l.height)&&console.warn(`Panel ${i} is outside viewport bounds`)}})},1e4);return()=>clearInterval(t)},[n])},Hue=({config:n={},children:e})=>{const t={...zue,...n};Bue(t.enableAutoSave,t.autoSaveInterval),Fue(t.enableKeyboardShortcuts),kue();const i=t.enableErrorBoundaries?c.jsx(GS,{onError:(a,s)=>{console.error("Panel system error:",a,s)},children:e}):e;return c.jsxs(c.Fragment,{children:[i,t.enablePerformanceMonitoring&&c.jsx(Lue,{enabled:!0,onMetricsUpdate:a=>{a.fps<30&&console.warn("Low FPS detected:",a.fps),a.memoryUsage>100&&console.warn("High memory usage:",a.memoryUsage,"MB")}})]})},pu=({panelId:n,children:e,enableSync:t=!0})=>{const i=Af[n],{subscribe:a}=Iue(n);return k.useEffect(()=>t?a(r=>{console.log(`Panel ${n} received sync data:`,r)}):void 0,[n,a,t]),c.jsx(jue,{panelId:n,panelTitle:i?.title,children:e})},TA=(...n)=>n.filter(Boolean).join(" "),Gue=()=>{const[n,e]=k.useState("");return k.useEffect(()=>{const t=i=>{e(i.detail.message),setTimeout(()=>e(""),100)};return window.addEventListener("floorplanner:announce",t),()=>{window.removeEventListener("floorplanner:announce",t)}},[]),c.jsx("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"sr-only","aria-label":"Screen reader announcements",children:n})},CA=n=>{const e=new CustomEvent("floorplanner:announce",{detail:{message:n}});window.dispatchEvent(e)},Vue=()=>c.jsx("a",{href:"#main-content",className:TA("absolute top-0 left-0 z-[9999] p-4 bg-blue-600 text-white font-medium","transform -translate-y-full focus:translate-y-0","transition-transform duration-200 ease-in-out","focus:outline-none focus:ring-2 focus:ring-blue-300"),onFocus:()=>CA("Skip to main content link focused"),children:"Skip to main content"}),que=()=>{const[n,e]=k.useState(!1),[t,i]=k.useState(!1);return k.useEffect(()=>{let a;const s=l=>{l.key==="Tab"&&(e(!0),clearTimeout(a),a=setTimeout(()=>{e(!1)},5e3)),l.key==="F1"&&(l.preventDefault(),i(d=>!d),CA(t?"Keyboard hints hidden":"Keyboard hints shown"))},r=()=>{e(!1),clearTimeout(a)};return document.addEventListener("keydown",s),document.addEventListener("mousedown",r),()=>{document.removeEventListener("keydown",s),document.removeEventListener("mousedown",r),clearTimeout(a)}},[t]),!n&&!t?null:c.jsxs(c.Fragment,{children:[c.jsx("style",{children:`
        .keyboard-user *:focus-visible {
          outline: 3px solid #3b82f6 !important;
          outline-offset: 2px !important;
          border-radius: 4px !important;
        }
        
        .keyboard-user button:focus-visible,
        .keyboard-user [role="button"]:focus-visible {
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5) !important;
        }
      `}),c.jsx("div",{className:n?"keyboard-user":"",children:t&&c.jsxs("div",{className:TA("fixed top-4 right-4 z-[9999] p-4 bg-gray-900 text-white rounded-lg shadow-lg","max-w-md text-sm space-y-2"),children:[c.jsx("h3",{className:"font-semibold text-blue-300",children:"Keyboard Shortcuts"}),c.jsxs("ul",{className:"space-y-1 text-gray-300",children:[c.jsxs("li",{children:[c.jsx("kbd",{children:"Tab"})," - Navigate between elements"]}),c.jsxs("li",{children:[c.jsx("kbd",{children:"Shift+Tab"})," - Navigate backwards"]}),c.jsxs("li",{children:[c.jsx("kbd",{children:"Enter/Space"})," - Activate buttons"]}),c.jsxs("li",{children:[c.jsx("kbd",{children:"Escape"})," - Close panels/modals"]}),c.jsxs("li",{children:[c.jsx("kbd",{children:"Arrow Keys"})," - Navigate within components"]}),c.jsxs("li",{children:[c.jsx("kbd",{children:"1-9"})," - Toggle panels"]}),c.jsxs("li",{children:[c.jsx("kbd",{children:"F1"})," - Toggle this help"]})]}),c.jsx("button",{onClick:()=>i(!1),className:"mt-2 px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300",children:"Close (F1)"})]})})]})},Xue=()=>{const[n,e]=k.useState(()=>typeof window<"u"?localStorage.getItem("floorplanner-high-contrast")==="true":!1);k.useEffect(()=>{const i=document.documentElement;n?(i.classList.add("high-contrast"),localStorage.setItem("floorplanner-high-contrast","true")):(i.classList.remove("high-contrast"),localStorage.setItem("floorplanner-high-contrast","false"))},[n]);const t=()=>{e(i=>{const a=!i;return CA(a?"High contrast mode enabled":"High contrast mode disabled"),a})};return c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:t,className:TA("fixed bottom-4 right-4 z-[9998] p-3 rounded-full shadow-lg","focus:outline-none focus:ring-2 focus:ring-blue-300",n?"bg-yellow-400 text-black hover:bg-yellow-500":"bg-gray-800 text-white hover:bg-gray-700"),"aria-label":`${n?"Disable":"Enable"} high contrast mode`,title:`${n?"Disable":"Enable"} high contrast mode`,children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8c.34 0 .67.03 1 .07v15.86c-.33.04-.66.07-1 .07z"})})}),c.jsx("style",{children:`
        .high-contrast {
          filter: contrast(150%) brightness(110%);
        }
        
        .high-contrast button {
          border: 2px solid currentColor !important;
        }
        
        .high-contrast [data-floating-panel] {
          border: 3px solid #000 !important;
          background: #fff !important;
          color: #000 !important;
        }
        
        .high-contrast .dark [data-floating-panel] {
          border: 3px solid #fff !important;
          background: #000 !important;
          color: #fff !important;
        }
      `})]})},Yue=()=>{const[n,e]=k.useState(!1);return k.useEffect(()=>{const t=window.matchMedia("(prefers-reduced-motion: reduce)"),i=a=>{e(a.matches)};return e(t.matches),t.addEventListener("change",i),()=>{t.removeEventListener("change",i)}},[]),k.useEffect(()=>{const t=document.documentElement;n?t.classList.add("reduce-motion"):t.classList.remove("reduce-motion")},[n]),c.jsx("style",{children:`
      .reduce-motion * {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
        transition-delay: 0ms !important;
      }
      
      .reduce-motion [data-floating-panel] {
        transform: none !important;
        transition: none !important;
      }
    `})},B6=({children:n})=>c.jsxs(c.Fragment,{children:[c.jsx(Vue,{}),c.jsx(Gue,{}),c.jsx(que,{}),c.jsx(Xue,{}),c.jsx(Yue,{}),n]}),Wue=({message:n,priority:e="polite"})=>c.jsx("div",{role:"status","aria-live":e,"aria-atomic":"true",className:"sr-only",children:n}),Kue=({children:n})=>{const{panels:e,keyboardShortcutsEnabled:t,focusPanel:i,togglePanel:a,minimizeAllPanels:s,restoreAllPanels:r}=Nr();k.useRef(null);const[l,d]=di.useState(""),f=k.useCallback(g=>{d(g),setTimeout(()=>d(""),1e3)},[]);return k.useEffect(()=>{const g=Object.entries(e).filter(([x,b])=>b.isVisible).map(([x,b])=>x);if(g.length>0){const x=g.map(b=>b.replace(/([A-Z])/g," $1").toLowerCase().trim()).join(", ");g.length===1?f(`${x} panel is now visible`):f(`${g.length} panels are now visible: ${x}`)}},[e,f]),k.useEffect(()=>{if(!t)return;const g=x=>{const{key:b,ctrlKey:_,metaKey:S,altKey:w,shiftKey:M}=x,E=_||S,T=document.activeElement;if(!(T&&(T.tagName==="INPUT"||T.tagName==="TEXTAREA"||T.contentEditable==="true"))){if(E&&w)switch(b.toLowerCase()){case"h":x.preventDefault(),f("Keyboard shortcuts help would open here");break;case"l":x.preventDefault();const C=Object.entries(e).filter(([D,P])=>P.isVisible).map(([D,P])=>D.replace(/([A-Z])/g," $1").toLowerCase().trim());C.length===0?f("No panels are currently visible"):f(`Visible panels: ${C.join(", ")}`);break;case"m":x.preventDefault(),s(),f("All panels minimized");break;case"r":x.preventDefault(),r(),f("All panels restored");break}if(b==="Tab"&&!E&&!w){const C=Object.entries(e).filter(([D,P])=>P.isVisible).map(([D,P])=>D).sort((D,P)=>e[D].zIndex-e[P].zIndex);if(C.length>0){const P=document.activeElement?.closest("[data-panel-id]")?.getAttribute("data-panel-id");if(P){const B=C.indexOf(P),F=M?(B-1+C.length)%C.length:(B+1)%C.length,j=C[F];i(j);const O=j.replace(/([A-Z])/g," $1").toLowerCase().trim();f(`Focused on ${O} panel`),x.preventDefault()}}}}};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[t,e,i,s,r,f]),c.jsxs(c.Fragment,{children:[n,c.jsx(Wue,{message:l}),c.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded",children:"Skip to main content"}),c.jsx("div",{role:"region","aria-label":"Panel management area",className:"sr-only",children:c.jsx("p",{children:"Use Ctrl+Alt+H for keyboard shortcuts help. Use Ctrl+Alt+L to list visible panels. Use Tab to navigate between panels."})})]})},Zue=()=>{const{showPanel:n,hidePanel:e,focusPanel:t,resetPanelLayout:i,createWorkspaceLayout:a}=Nr(),[s,r]=k.useState(!1),[l,d]=k.useState(null),[f,g]=k.useState(0),[x,b]=k.useState([]),[_,S]=k.useState(!1),[w,M]=k.useState(!0),E=[{id:"getting-started",name:"Getting Started",description:"Learn the basics of the panel system",category:"beginner",steps:[{id:"welcome",title:"Welcome to FloorPlanner!",description:"Let's take a quick tour of the floating panel system",content:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("p",{className:"text-lg",children:"FloorPlanner uses a flexible panel system that lets you customize your workspace exactly how you want it."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(_h,{className:"h-4 w-4 text-blue-500"}),c.jsx("span",{children:"Drag panels anywhere"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(xl,{className:"h-4 w-4 text-green-500"}),c.jsx("span",{children:"Show/hide as needed"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(kp,{className:"h-4 w-4 text-purple-500"}),c.jsx("span",{children:"Customize layouts"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(jS,{className:"h-4 w-4 text-orange-500"}),c.jsx("span",{children:"Keyboard shortcuts"})]})]})]})},{id:"drawing-tools",title:"Drawing Tools Panel",description:"Your main toolkit for creating floor plans",panelId:"drawingTools",content:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{children:"The Drawing Tools panel contains all the tools you need to create your floor plan:"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),c.jsx("span",{children:"Wall tool for drawing walls"})]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),c.jsx("span",{children:"Room tool for creating rooms"})]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),c.jsx("span",{children:"Door and window tools"})]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),c.jsx("span",{children:"Measurement tools"})]})]})]}),action:()=>n("drawingTools")},{id:"furniture-library",title:"Furniture Library",description:"Browse and add furniture to your floor plan",panelId:"furnitureLibrary",content:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{children:"The Furniture Library lets you add furniture to your design:"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsx("li",{children:" Browse furniture by category"}),c.jsx("li",{children:" Drag and drop items onto your floor plan"}),c.jsx("li",{children:" Search for specific furniture pieces"}),c.jsx("li",{children:" Resize items after placement"})]}),c.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-700",children:[" ",c.jsx("strong",{children:"Tip:"})," Items automatically snap to grid when enabled!"]})})]}),action:()=>n("furnitureLibrary")},{id:"properties-panel",title:"Properties Panel",description:"Edit selected objects and their properties",panelId:"properties",content:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{children:"The Properties panel shows details about selected objects:"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsx("li",{children:" View and edit dimensions"}),c.jsx("li",{children:" Change colors and materials"}),c.jsx("li",{children:" Adjust object properties"}),c.jsx("li",{children:" Layer management"})]})]}),action:()=>n("properties")},{id:"keyboard-shortcuts",title:"Keyboard Shortcuts",description:"Speed up your workflow with keyboard shortcuts",content:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{children:"Learn these essential keyboard shortcuts:"}),c.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[c.jsx("span",{children:"Toggle Drawing Tools"}),c.jsx(wn,{variant:"outline",children:"Ctrl + 1"})]}),c.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[c.jsx("span",{children:"Toggle Furniture Library"}),c.jsx(wn,{variant:"outline",children:"Ctrl + 2"})]}),c.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[c.jsx("span",{children:"Toggle Properties"}),c.jsx(wn,{variant:"outline",children:"Ctrl + 4"})]}),c.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[c.jsx("span",{children:"Reset Layout"}),c.jsx(wn,{variant:"outline",children:"Ctrl + 0"})]})]}),c.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:c.jsxs("p",{className:"text-sm text-green-700",children:[" ",c.jsx("strong",{children:"Pro Tip:"})," Use Alt + number to focus panels instead of toggling them!"]})})]})},{id:"completion",title:"You're All Set!",description:"Start creating amazing floor plans",content:c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("p",{className:"text-lg",children:"Congratulations! You've completed the basic tour."}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"You can always access this tour again from the help menu, or explore advanced features with other tours."}),c.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[c.jsx(it,{onClick:()=>d("advanced-features"),variant:"outline",size:"sm",children:"Advanced Tour"}),c.jsx(it,{onClick:()=>a("My First Workspace"),size:"sm",children:"Save This Layout"})]})]})}]},{id:"advanced-features",name:"Advanced Features",description:"Discover powerful panel management features",category:"advanced",steps:[{id:"panel-grouping",title:"Panel Grouping",description:"Group related panels together",content:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{children:"Group panels for better organization:"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsx("li",{children:" Select multiple panels"}),c.jsx("li",{children:" Create groups for related tools"}),c.jsx("li",{children:" Move groups together"}),c.jsx("li",{children:" Save grouped layouts"})]})]})},{id:"workspace-presets",title:"Workspace Presets",description:"Save and switch between different layouts",content:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{children:"Create custom workspaces for different tasks:"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsx("li",{children:" Design workspace with drawing tools"}),c.jsx("li",{children:" Review workspace with measurement tools"}),c.jsx("li",{children:" Presentation workspace with 3D view"}),c.jsx("li",{children:" Switch instantly between layouts"})]})]})},{id:"performance-optimization",title:"Performance Tips",description:"Keep your workspace running smoothly",content:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{children:"Optimize performance with these tips:"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsx("li",{children:" Hide unused panels"}),c.jsx("li",{children:" Use panel grouping to reduce clutter"}),c.jsx("li",{children:" Enable magnetic boundaries for easier positioning"}),c.jsx("li",{children:" Monitor performance in the advanced panel manager"})]})]})}]},{id:"mobile-usage",name:"Mobile & Touch",description:"Using FloorPlanner on mobile devices",category:"intermediate",steps:[{id:"touch-gestures",title:"Touch Gestures",description:"Navigate with touch on mobile devices",content:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{children:"Master these touch gestures:"}),c.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded",children:[c.jsx(Qee,{className:"h-4 w-4"}),c.jsx("span",{children:"Tap to select tools and objects"})]}),c.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded",children:[c.jsx(_h,{className:"h-4 w-4"}),c.jsx("span",{children:"Drag to move panels and objects"})]}),c.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded",children:[c.jsx(nU,{className:"h-4 w-4"}),c.jsx("span",{children:"Pinch to zoom in and out"})]})]})]})},{id:"mobile-panels",title:"Mobile Panel Layout",description:"Panels adapt automatically to mobile screens",content:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{children:"On mobile devices, panels automatically:"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsx("li",{children:" Resize to fit your screen"}),c.jsx("li",{children:" Stack vertically when needed"}),c.jsx("li",{children:" Show essential tools first"}),c.jsx("li",{children:" Provide touch-friendly controls"})]})]})}]}];k.useEffect(()=>{const O=localStorage.getItem("floorplanner-visited"),I=JSON.parse(localStorage.getItem("floorplanner-completed-tours")||"[]");b(I),!O&&w&&(r(!0),d("getting-started"),localStorage.setItem("floorplanner-visited","true"))},[w]),k.useEffect(()=>{if(!_||!l)return;const O=E.find(W=>W.id===l);if(!O||f>=O.steps.length-1){S(!1);return}const I=setTimeout(()=>{g(W=>W+1)},5e3);return()=>clearTimeout(I)},[_,l,f,E]);const T=k.useCallback(O=>{d(O),g(0),r(!0)},[]),C=k.useCallback(()=>{const O=E.find(I=>I.id===l);if(O)if(f<O.steps.length-1)g(I=>I+1);else{const I=[...x,l];b(I),localStorage.setItem("floorplanner-completed-tours",JSON.stringify(I)),r(!1),d(null),g(0)}},[l,f,E,x]),D=k.useCallback(()=>{f>0&&g(O=>O-1)},[f]),P=k.useCallback(()=>{r(!1),d(null),g(0),S(!1)},[]);k.useEffect(()=>{if(!l)return;const I=E.find(W=>W.id===l)?.steps[f];I?.action&&I.action()},[l,f,E]);const B=E.find(O=>O.id===l),F=B?.steps[f],j=B?(f+1)/B.steps.length*100:0;return c.jsxs(c.Fragment,{children:[!l&&s&&c.jsx(Nf,{open:s,onOpenChange:r,children:c.jsxs(gh,{className:"max-w-2xl",children:[c.jsxs(vh,{children:[c.jsxs(yh,{className:"flex items-center gap-2",children:[c.jsx(Fx,{className:"h-5 w-5 text-yellow-500"}),"Welcome to FloorPlanner"]}),c.jsx(Hp,{children:"Choose a tour to get started or learn advanced features"})]}),c.jsxs(_l,{defaultValue:"beginner",className:"w-full",children:[c.jsxs(Eo,{className:"grid w-full grid-cols-3",children:[c.jsx(vn,{value:"beginner",children:"Beginner"}),c.jsx(vn,{value:"intermediate",children:"Intermediate"}),c.jsx(vn,{value:"advanced",children:"Advanced"})]}),["beginner","intermediate","advanced"].map(O=>c.jsx(Rn,{value:O,className:"space-y-4",children:E.filter(I=>I.category===O).map(I=>c.jsxs(Jt,{className:"cursor-pointer hover:shadow-md transition-shadow",children:[c.jsx(In,{className:"pb-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Bn,{className:"text-lg",children:I.name}),c.jsxs("div",{className:"flex items-center gap-2",children:[x.includes(I.id)&&c.jsx(Df,{className:"h-4 w-4 text-green-500"}),c.jsxs(wn,{variant:"outline",children:[I.steps.length," steps"]})]})]})}),c.jsxs(pn,{children:[c.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:I.description}),c.jsxs(it,{onClick:()=>T(I.id),className:"w-full",variant:x.includes(I.id)?"outline":"default",children:[x.includes(I.id)?"Retake Tour":"Start Tour",c.jsx(u1,{className:"h-4 w-4 ml-2"})]})]})]},I.id))},O))]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[c.jsx(it,{variant:"ghost",onClick:P,children:"Skip Tours"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"You can access tours anytime from the help menu"})]})]})}),l&&F&&c.jsx(Nf,{open:s,onOpenChange:P,children:c.jsxs(gh,{className:"max-w-lg",children:[c.jsxs(vh,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(yh,{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-bold text-blue-600",children:f+1})}),F.title]}),c.jsx(it,{variant:"ghost",size:"sm",onClick:P,children:c.jsx(Eg,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(vE,{value:j,className:"h-2"}),c.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[c.jsx("span",{children:B.name}),c.jsxs("span",{children:[f+1," of ",B.steps.length]})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:F.description}),c.jsx("div",{className:"min-h-[200px]",children:F.content})]}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>S(!_),disabled:f>=B.steps.length-1,children:_?c.jsx(ZP,{className:"h-4 w-4"}):c.jsx(OC,{className:"h-4 w-4"})}),c.jsx(it,{variant:"ghost",size:"sm",onClick:()=>{g(0),S(!1)},children:c.jsx(Sg,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(it,{variant:"outline",onClick:D,disabled:f===0,children:[c.jsx(a$,{className:"h-4 w-4 mr-1"}),"Previous"]}),c.jsx(it,{onClick:C,children:f===B.steps.length-1?"Finish":c.jsxs(c.Fragment,{children:["Next",c.jsx(LP,{className:"h-4 w-4 ml-1"})]})})]})]})]})})]})};var Vp;(function(n){n.mouse="mouse",n.touch="touch",n.keyboard="keyboard"})(Vp||(Vp={}));class Que{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,i,a;return(a=(i=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&i!==void 0?i:(t=this.args)===null||t===void 0?void 0:t.delay)!==null&&a!==void 0?a:0}get delayMouseStart(){var e,t,i,a;return(a=(i=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&i!==void 0?i:(t=this.args)===null||t===void 0?void 0:t.delay)!==null&&a!==void 0?a:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}function Jue(n,e,t,i){return Math.sqrt(Math.pow(Math.abs(t-n),2)+Math.pow(Math.abs(i-e),2))}function $ue(n,e,t,i,a){if(!a)return!1;const s=Math.atan2(i-e,t-n)*180/Math.PI+180;for(let r=0;r<a.length;++r){const l=a[r];if(l&&(l.start==null||s>=l.start)&&(l.end==null||s<=l.end))return!0}return!1}const ede={Left:1},tde={Left:0};function ZM(n){return n.button===void 0||n.button===tde.Left}function nde(n){return n.buttons===void 0||(n.buttons&ede.Left)===0}function qL(n){return!!n.targetTouches}const ide=1;function ade(n){const e=n.nodeType===ide?n:n.parentElement;if(!e)return;const{top:t,left:i}=e.getBoundingClientRect();return{x:i,y:t}}function sde(n,e){if(n.targetTouches.length===1)return VS(n.targetTouches[0]);if(e&&n.touches.length===1&&n.touches[0].target===e.target)return VS(n.touches[0])}function VS(n,e){return qL(n)?sde(n,e):{x:n.clientX,y:n.clientY}}const F6=(()=>{let n=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return n=!0,!0}}))}catch{}return n})(),_x={[Vp.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Vp.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Vp.keyboard]:{keydown:"keydown"}};class Hx{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(li(!Hx.isSetUp,"Cannot have two Touch backends at the same time."),Hx.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(Hx.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,i,a=!1){const s=F6?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(r){const l=_x[r][t];l&&e.addEventListener(l,i,s)})}removeEventListener(e,t,i,a=!1){const s=F6?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(r){const l=_x[r][t];l&&e.removeEventListener(l,i,s)})}connectDragSource(e,t){const i=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",i),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",i)}}connectDragPreview(e,t,i){return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){const i=this.options.rootElement;if(!this.document||!i)return()=>{};const a=s=>{if(!this.document||!i||!this.monitor.isDragging())return;let r;switch(s.type){case _x.mouse.move:r={x:s.clientX,y:s.clientY};break;case _x.touch.move:var l,d;r={x:((l=s.touches[0])===null||l===void 0?void 0:l.clientX)||0,y:((d=s.touches[0])===null||d===void 0?void 0:d.clientY)||0};break}const f=r!=null?this.document.elementFromPoint(r.x,r.y):void 0,g=f&&t.contains(f);if(f===t||g)return this.handleMove(s,e)};return this.addEventListener(this.document.body,"move",a),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",a))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,i){this.getSourceClientOffset=a=>{const s=this.sourceNodes.get(a);return s&&ade(s)},this.handleTopMoveStartCapture=a=>{ZM(a)&&(this.moveStartSourceIds=[])},this.handleMoveStart=a=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(a)},this.handleTopMoveStart=a=>{if(!ZM(a))return;const s=VS(a);s&&(qL(a)&&(this.lastTargetTouchFallback=a.targetTouches[0]),this._mouseClientOffset=s),this.waitingForDelay=!1},this.handleTopMoveStartDelay=a=>{if(!ZM(a))return;const s=a.type===_x.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,a),s),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(a,s)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(s)},this.handleTopMove=a=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:s,dragOverTargetIds:r}=this,l=this.options.enableHoverOutsideTarget,d=VS(a,this.lastTargetTouchFallback);if(!d)return;if(this._isScrolling||!this.monitor.isDragging()&&$ue(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,d.x,d.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&s&&Jue(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,d.x,d.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(s,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const f=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(f),this.actions.publishDragSource(),a.cancelable&&a.preventDefault();const g=(r||[]).map(S=>this.targetNodes.get(S)).filter(S=>!!S),x=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(d.x,d.y,g):this.document.elementsFromPoint(d.x,d.y),b=[];for(const S in x){if(!x.hasOwnProperty(S))continue;let w=x[S];for(w!=null&&b.push(w);w;)w=w.parentElement,w&&b.indexOf(w)===-1&&b.push(w)}const _=b.filter(S=>g.indexOf(S)>-1).map(S=>this._getDropTargetId(S)).filter(S=>!!S).filter((S,w,M)=>M.indexOf(S)===w);if(l)for(const S in this.targetNodes){const w=this.targetNodes.get(S);if(f&&w&&w.contains(f)&&_.indexOf(S)===-1){_.unshift(S);break}}_.reverse(),this.actions.hover(_,{clientOffset:d})},this._getDropTargetId=a=>{const s=this.targetNodes.keys();let r=s.next();for(;r.done===!1;){const l=r.value;if(a===this.targetNodes.get(l))return l;r=s.next()}},this.handleTopMoveEndCapture=a=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!nde(a)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}a.cancelable&&a.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=a=>{a.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new Que(i,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Vp.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Vp.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Vp.keyboard)}}const rde=function(e,t={},i={}){return new Hx(e,t,i)},k6=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,H6=({children:n})=>{const e=k6()?rde:ule,t=k6()?{enableMouseEvents:!0}:{};return c.jsx(yoe,{backend:e,options:t,children:n})},G6=({children:n})=>{const e=ti(s=>s.addFurniture),[{isOver:t,canDrop:i},a]=Zoe({accept:n3.FURNITURE,drop:(s,r)=>{const l=r.getClientOffset();if(l&&s.furnitureItem){const d=document.getElementById("canvas-container");if(d){const f=d.getBoundingClientRect(),g=l.x-f.left,x=l.y-f.top,{dimensions:b}=s.furnitureItem,_=b?.width||50,S=b?.height||50,w=Math.max(0,g-_/2),M=Math.max(0,x-S/2),E=1,T=_/E,C=S/E;return e({x:w/E,y:M/E,width:T,height:C,color:"#8b5cf6",label:s.furnitureItem.name}),{dropped:!0}}}return{dropped:!1}},collect:s=>({isOver:s.isOver(),canDrop:s.canDrop()})});return c.jsxs("div",{ref:a,id:"canvas-container",className:"relative w-full h-full",style:{outline:t?"2px dashed #3b82f6":"none",backgroundColor:t&&i?"rgba(59, 130, 246, 0.05)":"transparent"},children:[n,t&&i&&c.jsx("div",{className:"absolute inset-0 pointer-events-none bg-blue-500/10 flex items-center justify-center",children:c.jsx("div",{className:"bg-white/90 px-3 py-1 rounded-full shadow-lg text-sm font-medium text-blue-600",children:"Drop furniture here"})})]})},ode=()=>{const{keyboardShortcutsEnabled:n,togglePanel:e,focusPanel:t,minimizeAllPanels:i,restoreAllPanels:a,resetPanelLayout:s,createWorkspaceLayout:r,exportPanelLayout:l}=Nr(),d=k.useCallback(g=>{if(!n)return;const{key:x,ctrlKey:b,metaKey:_,altKey:S,shiftKey:w}=g,M=b||_;let E=!1;if(M&&!S&&!w){const T=pv[x.toLowerCase()];switch(T&&(e(T),E=!0),x.toLowerCase()){case"m":S&&(i(),E=!0);break;case"r":S&&(a(),E=!0);break;case"0":s(),E=!0;break;case"s":if(w){const C=`Workspace ${new Date().toLocaleTimeString()}`;r(C),E=!0}break;case"e":if(w){const C=l();console.log("Exported layout:",C),E=!0}break}}if(S&&!M&&!w){const T=pv[x.toLowerCase()];T&&(t(T),E=!0)}if(!M&&!S&&!w)switch(x){case"Escape":i(),E=!0;break;case"F11":E=!1;break}E&&(g.preventDefault(),g.stopPropagation())},[n,e,t,i,a,s,r,l]);k.useEffect(()=>{if(n)return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[n,d]);const f=k.useCallback(()=>[{category:"Panel Management",shortcuts:[{key:"Ctrl/Cmd + 1-9, 0",description:"Toggle specific panels"},{key:"Alt + 1-9, 0",description:"Focus specific panels"},{key:"Ctrl/Cmd + Alt + M",description:"Minimize all panels"},{key:"Ctrl/Cmd + Alt + R",description:"Restore all panels"},{key:"Ctrl/Cmd + 0",description:"Reset panel layout"},{key:"Escape",description:"Minimize all panels"}]},{category:"Workspace Management",shortcuts:[{key:"Ctrl/Cmd + Shift + S",description:"Save current workspace"},{key:"Ctrl/Cmd + Shift + E",description:"Export panel layout"}]},{category:"Panel Shortcuts",shortcuts:Object.entries(pv).map(([g,x])=>({key:`Ctrl/Cmd + ${g.toUpperCase()}`,description:`Toggle ${x.replace(/([A-Z])/g," $1").toLowerCase()}`}))}],[]);return{keyboardShortcutsEnabled:n,getAvailableShortcuts:f}},V6={api:{timeout:1e4},auth:{mockUser:{id:"user-1",name:"Demo User",email:"demo@floorplanner.com"}}},Hc={app:{title:"FloorPlanner",version:"1.0.0"},api:{baseUrl:"http://localhost:3001/api",wsUrl:"ws://localhost:3001/ws",timeout:V6.api.timeout},auth:{enabled:!1,provider:"local",mockUser:V6.auth.mockUser},features:{collaboration:!0,view3D:!0,export:!0,cadImport:!0},storage:{type:"localStorage",autoSaveInterval:parseInt("30000")},development:{debugMode:!0,mockApi:!0}},{app:q6,api:y_,development:lde}=Hc,XL=()=>{try{!q6.title||q6.version,!y_.baseUrl||y_.wsUrl;try{new URL(y_.baseUrl),new URL(y_.wsUrl.replace("ws://","http://").replace("wss://","https://"))}catch{return console.error("Invalid API URLs in configuration"),!1}return!0}catch(n){return console.error("Configuration validation failed:",n),!1}};lde.debugMode&&(console.log("FloorPlanner Configuration:",Hc),console.log("Configuration valid:",XL()));const cde=({config:n})=>{const{setApiConfig:e,initializeApp:t,viewMode:i}=ti(),[a,s]=k.useState("properties"),[r]=k.useState(1),l=xA(),{reorganizePanels:d}=Tce();ode(),k.useEffect(()=>{e({baseUrl:n.apiBaseUrl||Hc.api.baseUrl,wsUrl:n.wsUrl||Hc.api.wsUrl,userId:n.userId||Hc.auth.mockUser?.id,isAuthenticated:n.isAuthenticated!==!1}),t(),Hc.development.mockApi&&console.log("Mock API initialized with sample data"),yx.setViewportMeta(),yx.handleSafeArea(),yx.preventDoubleZoom(),yx.registerServiceWorker(),yx.enableBackgroundSync(),(l.isMobile||l.isTablet)&&d()},[n,t,e,l,d]);const f=()=>{alert("Collaboration request sent successfully!"),s("collaboration")},g=i==="2d"?c.jsx(Bk,{}):c.jsx(ere,{}),x=c.jsxs(_l,{value:a,onValueChange:s,className:"h-full flex flex-col",children:[c.jsxs(Eo,{className:"grid w-full grid-cols-12 text-xs shrink-0",children:[c.jsx(vn,{value:"properties",children:"Props"}),c.jsx(vn,{value:"professionals",children:"Pros"}),c.jsx(vn,{value:"collaboration",children:"Collab"}),c.jsx(vn,{value:"comments",children:"Comments"}),c.jsx(vn,{value:"sharing",children:"Share"}),c.jsx(vn,{value:"gallery",children:"Gallery"}),c.jsx(vn,{value:"furniture",children:"Furn."}),c.jsx(vn,{value:"materials",children:"Mats"}),c.jsx(vn,{value:"colors",children:"Colors"}),c.jsx(vn,{value:"lighting",children:"Light"}),c.jsx(vn,{value:"measure",children:"Meas."}),c.jsx(vn,{value:"files",children:"Files"})]}),c.jsxs("div",{className:"flex-1 overflow-hidden",children:[c.jsx(Rn,{value:"properties",className:"h-full p-0",children:c.jsx(KM,{})}),c.jsx(Rn,{value:"professionals",className:"h-full p-0",children:r&&c.jsx(FD,{floorplanId:r,onCollaborationRequest:f})}),c.jsx(Rn,{value:"collaboration",className:"h-full p-0",children:c.jsx(BD,{})}),c.jsx(Rn,{value:"comments",className:"h-full p-0",children:c.jsx(u6,{})}),c.jsx(Rn,{value:"sharing",className:"h-full p-0",children:c.jsx(U6,{})}),c.jsx(Rn,{value:"gallery",className:"h-full p-0",children:c.jsx("div",{className:"p-4 h-full overflow-y-auto",children:c.jsx(GD,{showPublicOnly:!0})})}),c.jsx(Rn,{value:"furniture",className:"h-full p-0",children:c.jsx("div",{className:"p-4 h-full overflow-y-auto",children:c.jsx(a6,{})})}),c.jsx(Rn,{value:"materials",className:"h-full p-0",children:c.jsx("div",{className:"p-4 h-full overflow-y-auto",children:c.jsx(o6,{})})}),c.jsx(Rn,{value:"colors",className:"h-full p-0",children:c.jsx("div",{className:"p-4 h-full overflow-y-auto",children:c.jsx(l6,{})})}),c.jsx(Rn,{value:"lighting",className:"h-full p-0",children:c.jsx("div",{className:"p-4 h-full overflow-y-auto",children:c.jsx(c6,{})})}),c.jsx(Rn,{value:"measure",className:"h-full p-0",children:c.jsx("div",{className:"p-4 h-full overflow-y-auto",children:c.jsx(l3,{})})}),c.jsx(Rn,{value:"files",className:"h-full p-0",children:c.jsx("div",{className:"p-4 h-full overflow-y-auto",children:r&&c.jsx(kD,{floorplanId:r})})}),c.jsx(Rn,{value:"payment",className:"h-full p-0",children:c.jsx("div",{className:"p-4 h-full overflow-y-auto",children:c.jsx(HD,{})})}),c.jsx(Rn,{value:"help",className:"h-full p-0",children:c.jsx("div",{className:"p-4 h-full overflow-y-auto",children:c.jsxs("div",{className:"prose prose-sm",children:[c.jsx("h3",{children:"Material & Color Tools"}),c.jsx("p",{children:"Select any element in your floor plan, then use the Materials and Colors tabs to customize its appearance. You can drag-and-drop materials directly onto elements or use the color picker to choose precise colors."}),c.jsx("h3",{children:"Lighting Controls"}),c.jsx("p",{children:"Adjust scene lighting to simulate different times of day. Change intensity, color temperature, and ambient light to create the perfect ambiance for your design."})]})})})]})]}),b=c.jsxs(Hue,{config:{enableErrorBoundaries:!0,enablePerformanceMonitoring:!1,enableAutoSave:!0,autoSaveInterval:3e4,enableKeyboardShortcuts:!0,enablePanelSynchronization:!0},children:[c.jsx(pu,{panelId:"drawingTools",children:c.jsx(Wce,{})}),c.jsx(pu,{panelId:"furnitureLibrary",children:c.jsx(Kce,{})}),c.jsx(pu,{panelId:"materialPalette",children:c.jsx(rue,{})}),c.jsx(pu,{panelId:"properties",children:c.jsx(KM,{})}),c.jsx(pu,{panelId:"layers",children:c.jsx(due,{})}),c.jsx(pu,{panelId:"view3D",children:c.jsx(yue,{})}),c.jsx(pu,{panelId:"measurement",children:c.jsx(xue,{})}),c.jsx(pu,{panelId:"socialShare",children:c.jsx(U6,{})}),c.jsx(pu,{panelId:"advancedPanelManager",children:c.jsx(_ue,{})}),c.jsx(pu,{panelId:"export",children:c.jsx(Nue,{})}),c.jsx(pu,{panelId:"revisionHistory",children:c.jsx(Rue,{})}),c.jsx(pu,{panelId:"cadImport",children:c.jsx(Due,{})}),c.jsx(qce,{})]}),_=c.jsx("div",{className:"flex flex-col h-full",children:l.isMobile?c.jsxs(_l,{value:a,onValueChange:s,className:"w-full",children:[c.jsxs(Eo,{className:"grid grid-cols-4 h-12",children:[c.jsx(vn,{value:"properties",className:"text-xs p-1",children:"Props"}),c.jsx(vn,{value:"furniture",className:"text-xs p-1",children:"Items"}),c.jsx(vn,{value:"materials",className:"text-xs p-1",children:"Colors"}),c.jsx(vn,{value:"collaboration",className:"text-xs p-1",children:"Share"})]}),c.jsxs(Rn,{value:"properties",className:"mt-4 space-y-4",children:[c.jsx(KM,{}),c.jsx(l3,{}),c.jsx(d6,{})]}),c.jsxs(Rn,{value:"furniture",className:"mt-4 space-y-4",children:[c.jsx(a6,{}),c.jsx(GD,{})]}),c.jsxs(Rn,{value:"materials",className:"mt-4 space-y-4",children:[c.jsx(o6,{}),c.jsx(l6,{}),c.jsx(c6,{})]}),c.jsxs(Rn,{value:"collaboration",className:"mt-4 space-y-4",children:[c.jsx(BD,{}),c.jsx(u6,{}),r&&c.jsx(FD,{floorplanId:r,onCollaborationRequest:f}),r&&c.jsx(kD,{floorplanId:r}),c.jsx(HD,{})]})]}):x});return l.isMobile||l.isTablet?c.jsx(B6,{children:c.jsx(GS,{children:c.jsxs(ID,{children:[c.jsx(I6,{enabled:!0}),c.jsx(f6,{children:c.jsx(H6,{children:c.jsx(tce,{rightPanel:_,toolbar:c.jsx(D6,{}),children:c.jsxs("main",{id:"main-content",role:"main","aria-label":"Floor planner canvas",children:[c.jsx(G6,{children:g}),b]})})})})]})})}):c.jsx(B6,{children:c.jsx(Kue,{children:c.jsx(GS,{children:c.jsxs(ID,{children:[c.jsx(I6,{enabled:!0}),c.jsx(f6,{children:c.jsxs(H6,{children:[c.jsx(Zue,{}),c.jsxs("div",{className:"h-screen w-screen flex flex-col overflow-hidden relative",children:[c.jsx("nav",{role:"navigation","aria-label":"Panel management toolbar",children:c.jsx(D6,{})}),c.jsx("div",{className:"flex-1 relative overflow-hidden",children:c.jsx("main",{id:"main-content",role:"main","aria-label":"Floor planner canvas",children:c.jsx(G6,{children:g})})}),b,c.jsx("aside",{role:"complementary","aria-label":"Measurement feedback",children:c.jsx(d6,{showFloatingFeedback:!0})})]})]})})]})})})})},P_=document.getElementById("floorplanner-root")||document.getElementById("root");XL()||console.error("Invalid configuration detected. Please check your environment variables.");console.log("FloorPlanner main.tsx loaded");console.log("Root element found:",!!P_);console.log("App config:",Hc);const YL={userId:Hc.auth.mockUser?.id,isAuthenticated:!0,apiBaseUrl:Hc.api.baseUrl,wsUrl:Hc.api.wsUrl,features:Hc.features,storage:Hc.storage,development:Hc.development};console.log("Standalone app config:",YL);class ude extends di.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("FloorPlanner Error:",e,t)}render(){return this.state.hasError?c.jsxs("div",{style:{padding:"20px",textAlign:"center",fontFamily:"Arial, sans-serif",color:"#dc2626"},children:[c.jsx("h2",{children:" FloorPlanner Error"}),c.jsx("p",{children:"Something went wrong loading the FloorPlanner."}),c.jsxs("details",{style:{marginTop:"10px",textAlign:"left"},children:[c.jsx("summary",{children:"Error Details"}),c.jsx("pre",{style:{background:"#f3f4f6",padding:"10px",borderRadius:"4px",fontSize:"12px",overflow:"auto"},children:this.state.error?.toString()})]}),c.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"10px",padding:"8px 16px",background:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}if(P_)try{console.log("Creating React root...");const n=kz.createRoot(P_);console.log("Rendering FloorPlanner app..."),n.render(c.jsx(di.StrictMode,{children:c.jsx(ude,{children:c.jsx(cde,{config:YL})})})),console.log("FloorPlanner app rendered successfully")}catch(n){console.error("Failed to render FloorPlanner:",n),P_.innerHTML=`
      <div style="padding: 20px; color: red; text-align: center; font-family: Arial, sans-serif;">
        <h2> FloorPlanner Failed to Load</h2>
        <p>Error: ${n instanceof Error?n.message:"Unknown error"}</p>
        <button onclick="window.location.reload()" style="margin-top: 10px; padding: 8px 16px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer;">
          Reload Page
        </button>
      </div>
    `}else{console.error("FloorPlanner root element not found!");const n=`
    <div style="padding: 20px; color: red; text-align: center; font-family: Arial, sans-serif;">
      <h2> FloorPlanner Root Element Not Found</h2>
      <p>The element with ID 'floorplanner-root' was not found in the DOM.</p>
      <button onclick="window.location.reload()" style="margin-top: 10px; padding: 8px 16px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer;">
        Reload Page
      </button>
    </div>
  `,e=document.body;e&&(e.innerHTML=n)}
